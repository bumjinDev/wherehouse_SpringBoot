================================================================================
                        성능 최적화 문서 피드백
================================================================================

문서 주제: Wherehouse 프로젝트 성능 최적화 (CompletableFuture 병렬 처리)
피드백 일자: 2024년 12월

--------------------------------------------------------------------------------
1. 용어 사용의 정확성 문제
--------------------------------------------------------------------------------

[지적 사항]
"하이버네이트 스레드 풀"이라는 표현이 사용되었으나, 이는 일반적으로 
병목 포인트로 분석되지 않는 개념입니다.

[권고 사항]
- Hibernate 자체는 스레드 풀을 직접 관리하지 않습니다.
- 정확한 용어 사용이 필요합니다: HikariCP 커넥션 풀, Tomcat 스레드 풀 등
- 각 컴포넌트의 역할과 책임 범위를 명확히 구분하여 기술해야 합니다.

--------------------------------------------------------------------------------
2. 병목 지점 분석의 명확성 부족
--------------------------------------------------------------------------------

[지적 사항]
성능 저하의 원인이 다음 중 어디에서 발생했는지 명확하지 않습니다:

  (1) DB 커넥션 풀 경합
      - 커넥션 풀이 25번 acquire/release를 반복하면서 지연이 발생했는지?
      
  (2) DBMS 자체 리소스 병목
      - DB가 25번의 쿼리를 처리하는 과정에서 CPU, I/O, Lock, Buffer 등에서
        병목이 발생했는지?
        
  (3) 애플리케이션 서버 스레드 고갈
      - Tomcat 요청 스레드가 DB 응답을 기다리느라 장시간 점유되어
        스레드 풀이 고갈되었는지?

[권고 사항]
- 각 레이어별 모니터링 데이터를 수집하여 실제 병목 지점을 특정해야 합니다.
- 추측이 아닌 실측 데이터에 기반한 분석이 필요합니다.

--------------------------------------------------------------------------------
3. DBMS 병목 판단 근거 부재
--------------------------------------------------------------------------------

[지적 사항]
"DBMS 병목"이라고 판단한 근거가 문서에 명시되어 있지 않습니다.

[필요한 근거 데이터 예시]
- DB CPU 사용률 (예: 90% 이상 도달 여부)
- Active Session 수 증가 추이
- Wait Event 분석 결과
- 쿼리 실행 계획 및 실제 수행 시간

[권고 사항]
- "단순히 쿼리가 25번 실행되니까 DB 병목이겠지"라는 추론만으로는
  기술 문서의 신뢰성을 확보할 수 없습니다.
- Oracle AWR Report, V$SESSION, V$SQL 등의 실측 데이터를 첨부하거나
  최소한 관찰된 수치를 명시해야 합니다.

--------------------------------------------------------------------------------
4. Oracle IN 절 1000개 제한 관련 분석 보완 필요
--------------------------------------------------------------------------------

[지적 사항]
Oracle의 IN 절 1000개 제한으로 인해 Hibernate가 OR 조건으로 분해하면,
실행 계획이 비효율적으로 변경되는 것은 예상 가능한 결과입니다.

[권고 사항]
- 이 현상이 발생했다면, 실제로 생성된 SQL과 실행 계획을 문서에 포함해야 합니다.
- OR 분해로 인한 성능 저하 수치를 정량적으로 측정하여 제시해야 합니다.
- 대안적 접근 방식(임시 테이블 활용, 배치 처리 등)에 대한 검토가 필요합니다.

--------------------------------------------------------------------------------
5. 정량적 성능 수치 부재
--------------------------------------------------------------------------------

[지적 사항]
"느려졌다"라는 정성적 표현만 있을 뿐, 다음과 같은 정량적 수치가 없습니다:

  - 최적화 전 응답 시간: ?ms
  - 최적화 후 응답 시간: ?ms
  - 개선율: ?%
  - 테스트 환경의 부하 조건: 동시 사용자 수, TPS 등

[권고 사항]
- 성능 최적화 문서는 반드시 Before/After 수치 비교가 포함되어야 합니다.
- 테스트 환경과 조건을 명시하여 재현 가능성을 확보해야 합니다.
- 부하 테스트 도구(JMeter, nGrinder 등) 결과 리포트 첨부를 권장합니다.

--------------------------------------------------------------------------------
6. Hibernate 생성 쿼리 분석 여부
--------------------------------------------------------------------------------

[지적 사항]
Hibernate가 실제로 어떤 SQL 쿼리를 생성하여 실행하는지 파악했는지 
확인이 필요합니다.

[권고 사항]
- spring.jpa.show-sql=true 또는 Hibernate SQL 로깅을 활성화하여
  실제 생성되는 쿼리를 확인해야 합니다.
- N+1 문제, 불필요한 조인, 비효율적인 페치 전략 등을 점검해야 합니다.
- 생성된 쿼리의 실행 계획(EXPLAIN PLAN)을 분석하여 문서에 포함해야 합니다.

================================================================================
                              종합 의견
================================================================================

현재 문서는 성능 최적화를 수행했다는 사실은 기술되어 있으나,
다음과 같은 핵심 요소들이 누락되어 있어 기술 문서로서의 완성도가 부족합니다:

  1. 정확한 기술 용어 사용
  2. 병목 지점에 대한 체계적 분석
  3. 판단 근거가 되는 실측 데이터
  4. 정량적 성능 수치 (Before/After)
  5. 실제 생성 쿼리 및 실행 계획 분석

포트폴리오 프로젝트에서 성능 최적화를 어필하기 위해서는
"왜 그것이 병목이었는지", "어떤 데이터로 확인했는지", "얼마나 개선되었는지"를
명확하게 제시할 수 있어야 합니다.

================================================================================
                              권장 보완 사항
================================================================================

[ ] 각 레이어별 모니터링 데이터 수집 및 첨부
[ ] 병목 판단 근거 명시 (CPU, Memory, I/O, Lock 등)
[ ] Before/After 성능 수치 정량화
[ ] Hibernate 생성 SQL 및 실행 계획 분석 결과 첨부
[ ] 테스트 환경 및 부하 조건 명시
[ ] 용어 검토 및 수정 (하이버네이트 스레드 풀 → 적절한 용어로 변경)

================================================================================
