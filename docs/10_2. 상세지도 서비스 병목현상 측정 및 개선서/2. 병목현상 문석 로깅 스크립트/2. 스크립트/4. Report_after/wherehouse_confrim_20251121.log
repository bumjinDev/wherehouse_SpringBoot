2025-11-21 19:40:40.649 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-11-21 19:40:40.689 [main] INFO  c.wherehouse.WherehouseApplication - Starting WherehouseApplication using Java 17.0.11 with PID 3480 (E:\devSpace\SpringBootProjects\wherehouse_SpringBoot-master\wherehouse\build\classes\java\main started by wjdqj in E:\devSpace\SpringBootProjects\wherehouse_SpringBoot-master\wherehouse)
2025-11-21 19:40:40.690 [main] INFO  c.wherehouse.WherehouseApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-21 19:40:41.436 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-21 19:40:41.439 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2025-11-21 19:40:41.477 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.BoardEntityRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:40:41.478 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.CommentEntityRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:40:41.479 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.ArrestRateRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:40:41.480 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.CctvGeoRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:40:41.480 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.PoliceOfficeGeoRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:40:41.481 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.JWT.Repository.UserEntityRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:40:41.482 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.members.dao.MemberEntityRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:40:41.483 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisCrimeRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:40:41.484 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisEntertainmentRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:40:41.485 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisPopulationDensityRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:40:41.485 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.restapi.mapdata.dao.MapDataEntityRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:40:41.486 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 43 ms. Found 0 Elasticsearch repository interfaces.
2025-11-21 19:40:41.490 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-21 19:40:41.490 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2025-11-21 19:40:41.501 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.BoardEntityRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:40:41.502 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.CommentEntityRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:40:41.502 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.ArrestRateRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:40:41.502 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.CctvGeoRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:40:41.502 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.PoliceOfficeGeoRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:40:41.502 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.JWT.Repository.UserEntityRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:40:41.502 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.members.dao.MemberEntityRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:40:41.502 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisCrimeRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:40:41.503 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisEntertainmentRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:40:41.503 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisPopulationDensityRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:40:41.503 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.restapi.mapdata.dao.MapDataEntityRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:40:41.503 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 0 Reactive Elasticsearch repository interfaces.
2025-11-21 19:40:41.520 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-21 19:40:41.520 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-11-21 19:40:41.533 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.BoardEntityRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:40:41.533 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.CommentEntityRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:40:41.534 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.ArrestRateRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:40:41.534 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.CctvGeoRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:40:41.534 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.PoliceOfficeGeoRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:40:41.534 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.JWT.Repository.UserEntityRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:40:41.534 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.members.dao.MemberEntityRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:40:41.534 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisCrimeRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:40:41.535 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisEntertainmentRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:40:41.535 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisPopulationDensityRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:40:41.535 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.restapi.mapdata.dao.MapDataEntityRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:40:41.535 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 0 JDBC repository interfaces.
2025-11-21 19:40:41.542 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-21 19:40:41.543 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-21 19:40:41.659 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 114 ms. Found 11 JPA repository interfaces.
2025-11-21 19:40:41.677 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-21 19:40:41.678 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-21 19:40:41.701 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.BoardEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:40:41.701 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.CommentEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:40:41.701 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.ArrestRateRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:40:41.701 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.CctvGeoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:40:41.701 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.PoliceOfficeGeoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:40:41.702 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.JWT.Repository.UserEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:40:41.702 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.members.dao.MemberEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:40:41.702 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisCrimeRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:40:41.702 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisEntertainmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:40:41.702 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisPopulationDensityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:40:41.702 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.restapi.mapdata.dao.MapDataEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:40:41.702 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 16 ms. Found 0 Redis repository interfaces.
2025-11-21 19:40:42.201 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8185 (http)
2025-11-21 19:40:42.208 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8185"]
2025-11-21 19:40:42.212 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-21 19:40:42.212 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.31]
2025-11-21 19:40:42.361 [main] INFO  o.apache.jasper.servlet.TldScanner - At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.
2025-11-21 19:40:42.366 [main] INFO  o.a.c.c.C.[.[.[/wherehouse] - Initializing Spring embedded WebApplicationContext
2025-11-21 19:40:42.366 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1634 ms
2025-11-21 19:40:42.510 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-21 19:40:42.549 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-11-21 19:40:42.574 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-21 19:40:42.788 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-21 19:40:42.807 [main] WARN  com.zaxxer.hikari.HikariConfig - HikariPool-1 - idleTimeout has been set but has no effect because the pool is operating as a fixed size pool.
2025-11-21 19:40:42.808 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-21 19:40:42.973 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection oracle.jdbc.driver.T4CConnection@2d8087da
2025-11-21 19:40:42.974 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-21 19:40:43.059 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: OracleDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-21 19:40:44.099 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-21 19:40:44.101 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-21 19:40:44.253 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-21 19:40:45.200 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name userAuthenticationProvider
2025-11-21 19:40:45.200 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-11-21 19:40:45.894 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8185"]
2025-11-21 19:40:45.909 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8185 (http) with context path '/wherehouse'
2025-11-21 19:40:45.921 [main] INFO  c.wherehouse.WherehouseApplication - Started WherehouseApplication in 5.673 seconds (process running for 6.227)
2025-11-21 19:42:10.654 [http-nio-8185-exec-2] INFO  o.a.c.c.C.[.[.[/wherehouse] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-21 19:42:10.654 [http-nio-8185-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-21 19:42:10.656 [http-nio-8185-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-11-21 19:42:10.780 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:42:10.780 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.4979, longitude=127.0276, radius=500)
2025-11-21 19:42:10.780 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:42:10.780 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.4979, longitude=127.0276, radius=500
2025-11-21 19:42:10.788 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:10.783222100Z","nanoTime":27316796163400,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:42:10.789 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:42:10.789 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.4979, lon=127.0276
2025-11-21 19:42:10.791 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:10.790245900Z","nanoTime":27316804090800,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:42:10.808 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:10.793233300Z","nanoTime":27316807443400,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":3352600,"duration_ms":3,"resultData":{"latitude":37.4979,"longitude":127.0276,"precision":7,"centerHash":"wydm6d6","adjacentHashes":["wydm6d6","wydm6dd","wydm6de","wydm6d7","wydm6d5","wydm6d4","wydm6d1","wydm6d3","wydm6d9"],"errorMessage":null,"success":true}}
2025-11-21 19:42:10.808 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm6d6, wydm6dd, wydm6de, wydm6d7, wydm6d5, wydm6d4, wydm6d1, wydm6d3, wydm6d9]
2025-11-21 19:42:10.808 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm6d6
2025-11-21 19:42:10.810 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:10.808223Z","nanoTime":27316822758400,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":26595000,"duration_ms":26,"resultData":{"requestLatitude":37.4979,"requestLongitude":127.0276,"requestRadius":500,"centerGeohashId":"wydm6d6","nineBlockGeohashes":["wydm6d6","wydm6dd","wydm6de","wydm6d7","wydm6d5","wydm6d4","wydm6d1","wydm6d3","wydm6d9"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:42:10.810 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:10.810219400Z","nanoTime":27316824203300,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:42:10.811 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:42:10.811 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm6d6
2025-11-21 19:42:11.138 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 326.0818ms)
2025-11-21 19:42:11.139 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:42:11.155 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:42:11.155 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:42:11.155 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 16.0942ms, 역직렬화: 0.0ms
2025-11-21 19:42:11.155 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:42:11.160 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:11.155212900Z","nanoTime":27317169668100,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":345464800,"duration_ms":345,"resultData":{"centerGeohashId":"wydm6d6","nineBlockGeohashes":["wydm6d6","wydm6dd","wydm6de","wydm6d7","wydm6d5","wydm6d4","wydm6d1","wydm6d3","wydm6d9"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm6d6","hit":false,"valueSize":0,"l1CacheGetDurationNs":326081800,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm6d6","cacheKey":"data:wydm6d6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":698600},{"geohashId":"wydm6dd","cacheKey":"data:wydm6dd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":899400},{"geohashId":"wydm6de","cacheKey":"data:wydm6de:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":756400},{"geohashId":"wydm6d7","cacheKey":"data:wydm6d7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":412400},{"geohashId":"wydm6d5","cacheKey":"data:wydm6d5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":429400},{"geohashId":"wydm6d4","cacheKey":"data:wydm6d4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":410000},{"geohashId":"wydm6d1","cacheKey":"data:wydm6d1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":426400},{"geohashId":"wydm6d3","cacheKey":"data:wydm6d3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":295000},{"geohashId":"wydm6d9","cacheKey":"data:wydm6d9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":241700}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":16094200,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:42:11.160 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:11.160213700Z","nanoTime":27317174647400,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:42:11.160 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:42:11.162 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:42:11.299 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 50건
2025-11-21 19:42:11.314 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:42:11.315 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 6개
2025-11-21 19:42:11.320 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:11.315030400Z","nanoTime":27317329106700,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":154459300,"duration_ms":154,"resultData":{"inputCctvMissGrids":["wydm6d6","wydm6dd","wydm6de","wydm6d7","wydm6d5","wydm6d4","wydm6d1","wydm6d3","wydm6d9"],"cctvQueryResult":{"queryGeohashIds":["wydm6d6","wydm6dd","wydm6de","wydm6d7","wydm6d5","wydm6d4","wydm6d1","wydm6d3","wydm6d9"],"totalRowsReturned":50,"rowsPerGrid":{"wydm6d9":20,"wydm6d4":5,"wydm6dd":16,"wydm6d3":2,"wydm6d1":3,"wydm6d6":4},"queryExecutionTimeNs":135615500,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm6d9","cacheKey":"data:wydm6d9:cctv","dataCount":20,"dataSize":2782,"errorMessage":null,"success":true},{"geohashId":"wydm6d4","cacheKey":"data:wydm6d4:cctv","dataCount":5,"dataSize":700,"errorMessage":null,"success":true},{"geohashId":"wydm6dd","cacheKey":"data:wydm6dd:cctv","dataCount":16,"dataSize":2182,"errorMessage":null,"success":true},{"geohashId":"wydm6d3","cacheKey":"data:wydm6d3:cctv","dataCount":2,"dataSize":278,"errorMessage":null,"success":true},{"geohashId":"wydm6d1","cacheKey":"data:wydm6d1:cctv","dataCount":3,"dataSize":421,"errorMessage":null,"success":true},{"geohashId":"wydm6d6","cacheKey":"data:wydm6d6:cctv","dataCount":4,"dataSize":557,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:42:11.320 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:11.320030400Z","nanoTime":27317334282600,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:42:11.320 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:42:11.322 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.4979, 127.0276)
2025-11-21 19:42:11.323 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:42:11.885 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:42:11.887 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:42:11.889 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:42:11.889 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.4979, 127.0276), 반경: 500m
2025-11-21 19:42:12.077 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:42:12.078 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 141건
2025-11-21 19:42:12.085 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:42:12.086 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:42:12.086 [http-nio-8185-exec-2] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:42:12.086 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:42:12.086 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:42:12.086 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:42:12.086 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:42:12.092 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:12.086251200Z","nanoTime":27318100712500,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":766429900,"duration_ms":766,"resultData":{"latitude":37.4979,"longitude":127.0276,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":762944100,"addressApiResult":{"cached":false,"cacheKey":"address:37.4979:127.0276","roadAddress":"주소 없음","jibunAddress":"서울 서초구 서초동 1373","responseSize":58,"executionTimeNs":564273300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":208700,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.4979:127.0276:500","categoryCount":15,"placesByCategory":{"CT1":12,"AT4":4,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":1,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":141,"responseSize":16415,"executionTimeNs":198462100,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:12.092 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:12.092230800Z","nanoTime":27318106808200,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:42:12.092 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:42:12.093 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:42:12.094 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 50개
2025-11-21 19:42:12.094 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 50개 (총 카메라 대수: 65대)
2025-11-21 19:42:12.095 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:42:12.227 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 구로구  고척로1길 34 오류지구대 (거리: 1161m)
2025-11-21 19:42:12.227 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:42:12.228 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:42:12.229 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:42:12.229 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:42:12.232 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:12.229230700Z","nanoTime":27318243323300,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":136515100,"duration_ms":136,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":50,"totalCctvAfterFilter":50,"totalCameraCount":65,"filterRate":1.0,"filterExecutionTimeNs":115100,"success":true},"policeQuery":{"queryDurationNs":131249000,"found":true,"nearestAddress":"서울특별시 구로구  고척로1길 34 오류지구대","nearestDistance":1160.5521098113045,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":12,"AT4":4,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":1,"FD6":15,"PK6":15,"PM9":15},"placesAfterFilter":{"CT1":12,"AT4":4,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":1,"FD6":15,"PK6":15,"PM9":15},"totalBeforeFilter":141,"totalAfterFilter":141,"filterRate":1.0,"filterExecutionTimeNs":579800,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:12.232 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:12.232233500Z","nanoTime":27318246880100,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:42:12.233 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:42:12.235 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 40.00, 편의성: 39.91, 종합: 39.96
2025-11-21 19:42:12.239 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:12.235233600Z","nanoTime":27318249714900,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":2834800,"duration_ms":2,"resultData":{"safetyScore":{"policeDistanceScore":0.0,"policeDistance":1160.5521098113045,"cctvScore":100.0,"cctvCount":50,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":40.0,"success":true},"convenienceScore":{"categoryScores":{"CT1":48.0,"AT4":12.0,"CS2":3.75,"SC4":2.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":3.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":39.910714285714285,"success":true},"overallScore":39.95535714285714,"errorMessage":null,"success":true}}
2025-11-21 19:42:12.239 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:12.239379400Z","nanoTime":27318253615600,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:42:12.239 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:42:12.241 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 구로구  고척로1길 34 오류지구대, latitude=37.487521, longitude=127.028986, geohashId=wydm687)
2025-11-21 19:42:12.242 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 1160.5521098113045
2025-11-21 19:42:12.258 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm6d6
2025-11-21 19:42:12.258 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:42:12.259 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:12.258385400Z","nanoTime":27318272470700,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":18855100,"duration_ms":18,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["지하철역이(가) 41m 내에 있습니다."],"warnings":["가장 가까운 파출소가 1km 이상 떨어져 있습니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm6d6","dataSize":23775,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":23775,"errorMessage":null,"success":true}}
2025-11-21 19:42:12.259 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:42:18.250 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:42:18.251 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5547, longitude=126.9707, radius=500)
2025-11-21 19:42:18.251 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:42:18.251 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5547, longitude=126.9707, radius=500
2025-11-21 19:42:18.251 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.251485700Z","nanoTime":27324265593000,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:42:18.251 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:42:18.251 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5547, lon=126.9707
2025-11-21 19:42:18.251 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.251485700Z","nanoTime":27324265833900,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:42:18.251 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.251485700Z","nanoTime":27324266009100,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":175200,"duration_ms":0,"resultData":{"latitude":37.5547,"longitude":126.9707,"precision":7,"centerHash":"wydm9k9","adjacentHashes":["wydm9k9","wydm9kc","wydm9kf","wydm9kd","wydm9k6","wydm9k3","wydm9k2","wydm9k8","wydm9kb"],"errorMessage":null,"success":true}}
2025-11-21 19:42:18.252 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9k9, wydm9kc, wydm9kf, wydm9kd, wydm9k6, wydm9k3, wydm9k2, wydm9k8, wydm9kb]
2025-11-21 19:42:18.252 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9k9
2025-11-21 19:42:18.252 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.252470600Z","nanoTime":27324266370300,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":777300,"duration_ms":0,"resultData":{"requestLatitude":37.5547,"requestLongitude":126.9707,"requestRadius":500,"centerGeohashId":"wydm9k9","nineBlockGeohashes":["wydm9k9","wydm9kc","wydm9kf","wydm9kd","wydm9k6","wydm9k3","wydm9k2","wydm9k8","wydm9kb"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:42:18.252 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.252470600Z","nanoTime":27324266571500,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:42:18.252 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:42:18.252 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9k9
2025-11-21 19:42:18.253 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.714ms)
2025-11-21 19:42:18.253 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:42:18.256 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:42:18.256 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:42:18.256 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.9122ms, 역직렬화: 0.0ms
2025-11-21 19:42:18.257 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:42:18.258 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.257037900Z","nanoTime":27324270910100,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":4338600,"duration_ms":4,"resultData":{"centerGeohashId":"wydm9k9","nineBlockGeohashes":["wydm9k9","wydm9kc","wydm9kf","wydm9kd","wydm9k6","wydm9k3","wydm9k2","wydm9k8","wydm9kb"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9k9","hit":false,"valueSize":0,"l1CacheGetDurationNs":714000,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9k9","cacheKey":"data:wydm9k9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":382800},{"geohashId":"wydm9kc","cacheKey":"data:wydm9kc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":283200},{"geohashId":"wydm9kf","cacheKey":"data:wydm9kf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":386200},{"geohashId":"wydm9kd","cacheKey":"data:wydm9kd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":325400},{"geohashId":"wydm9k6","cacheKey":"data:wydm9k6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":435200},{"geohashId":"wydm9k3","cacheKey":"data:wydm9k3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":301100},{"geohashId":"wydm9k2","cacheKey":"data:wydm9k2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":260600},{"geohashId":"wydm9k8","cacheKey":"data:wydm9k8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":249100},{"geohashId":"wydm9kb","cacheKey":"data:wydm9kb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":200600}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2912200,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:42:18.258 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.258100600Z","nanoTime":27324272290200,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:42:18.258 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:42:18.258 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:42:18.263 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 2건
2025-11-21 19:42:18.265 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:42:18.265 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 1개
2025-11-21 19:42:18.265 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.265087Z","nanoTime":27324279048800,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6758600,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydm9k9","wydm9kc","wydm9kf","wydm9kd","wydm9k6","wydm9k3","wydm9k2","wydm9k8","wydm9kb"],"cctvQueryResult":{"queryGeohashIds":["wydm9k9","wydm9kc","wydm9kf","wydm9kd","wydm9k6","wydm9k3","wydm9k2","wydm9k8","wydm9kb"],"totalRowsReturned":2,"rowsPerGrid":{"wydm9kf":2},"queryExecutionTimeNs":5186700,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9kf","cacheKey":"data:wydm9kf:cctv","dataCount":2,"dataSize":260,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:42:18.265 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.265617500Z","nanoTime":27324279542600,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:42:18.265 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:42:18.265 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5547, 126.9707)
2025-11-21 19:42:18.266 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:42:18.358 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:42:18.358 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:42:18.358 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:42:18.358 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5547, 126.9707), 반경: 500m
2025-11-21 19:42:18.452 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:42:18.452 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 139건
2025-11-21 19:42:18.454 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:42:18.455 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:42:18.455 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 중구
2025-11-21 19:42:18.455 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 미스 - DB 조회
2025-11-21 19:42:18.472 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 성공 및 캐싱 완료 - 중구: 0.866910799
2025-11-21 19:42:18.472 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:42:18.472 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:42:18.472 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:42:18.472 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.866910799
2025-11-21 19:42:18.473 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.472736900Z","nanoTime":27324487286600,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":207744000,"duration_ms":207,"resultData":{"latitude":37.5547,"longitude":126.9707,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":207425000,"addressApiResult":{"cached":false,"cacheKey":"address:37.5547:126.9707","roadAddress":"서울특별시 중구 한강대로 405","jibunAddress":"서울 중구 봉래동2가 122-11","responseSize":73,"executionTimeNs":92771500,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":"arrest_rate:중구","guName":"중구","arrestRate":0.866910799,"dataFound":true,"executionTimeNs":17671700,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5547:126.9707:500","categoryCount":15,"placesByCategory":{"CT1":9,"AT4":1,"CS2":15,"SC4":1,"MT1":2,"BK9":15,"HP8":15,"AC5":13,"CE7":15,"SW8":5,"PO3":8,"FD6":15,"PK6":15,"OL7":2,"PM9":8},"totalPlaces":139,"responseSize":16203,"executionTimeNs":96981800,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:18.473 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.473745400Z","nanoTime":27324487853900,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:42:18.473 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:42:18.473 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:42:18.473 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 2개
2025-11-21 19:42:18.473 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 2개 (총 카메라 대수: 5대)
2025-11-21 19:42:18.473 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:42:18.543 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  다동길 11 (거리: 247m)
2025-11-21 19:42:18.543 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:42:18.543 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:42:18.543 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:42:18.543 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:42:18.544 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.543737600Z","nanoTime":27324558284100,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":70430200,"duration_ms":70,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":2,"totalCctvAfterFilter":2,"totalCameraCount":5,"filterRate":1.0,"filterExecutionTimeNs":8300,"success":true},"policeQuery":{"queryDurationNs":69527900,"found":true,"nearestAddress":"서울특별시 중구  다동길 11","nearestDistance":246.54394034384907,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":9,"AT4":1,"CS2":15,"SC4":1,"MT1":2,"BK9":15,"HP8":15,"AC5":13,"CE7":15,"SW8":5,"PO3":8,"FD6":15,"PK6":15,"OL7":2,"PM9":8},"placesAfterFilter":{"CT1":9,"AT4":1,"CS2":15,"SC4":1,"MT1":2,"BK9":15,"HP8":15,"AC5":13,"CE7":15,"SW8":5,"PO3":8,"FD6":15,"PK6":15,"OL7":2,"PM9":8},"totalBeforeFilter":139,"totalAfterFilter":139,"filterRate":1.0,"filterExecutionTimeNs":275200,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:18.544 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.544718300Z","nanoTime":27324558994000,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:42:18.544 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:42:18.545 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 49.43, 편의성: 36.56, 종합: 43.00
2025-11-21 19:42:18.545 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.545719500Z","nanoTime":27324559784300,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":790300,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":69.18200745701887,"policeDistance":246.54394034384907,"cctvScore":6.666666666666667,"cctvCount":2,"arrestRateScore":86.6910799,"arrestRate":0.866910799,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":49.42859287377233,"success":true},"convenienceScore":{"categoryScores":{"CT1":36.0,"AT4":3.0,"CS2":11.431706982486624,"SC4":2.0,"MT1":20.0,"BK9":75.0,"HP8":100.0,"AC5":13.0,"CE7":30.0,"SW8":100.0,"PO3":24.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":64.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"중구","guPopulation":131214,"finalScore":36.56211379883244,"success":true},"overallScore":42.99535333630239,"errorMessage":null,"success":true}}
2025-11-21 19:42:18.545 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.545719500Z","nanoTime":27324560214000,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:42:18.545 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:42:18.545 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  다동길 11, latitude=37.556808, longitude=126.971567, geohashId=wydm9m1)
2025-11-21 19:42:18.545 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 246.54394034384907
2025-11-21 19:42:18.547 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9k9
2025-11-21 19:42:18.548 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:42:18.548 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.548721800Z","nanoTime":27324562549800,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":2335800,"duration_ms":2,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["카페이(가) 43m 내에 있습니다."],"warnings":["CCTV 설치 대수가 적은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm9k9","dataSize":17677,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17677,"errorMessage":null,"success":true}}
2025-11-21 19:42:18.548 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:42:28.198 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:42:28.198 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5572, longitude=126.9239, radius=500)
2025-11-21 19:42:28.198 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:42:28.198 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5572, longitude=126.9239, radius=500
2025-11-21 19:42:28.198 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.198289600Z","nanoTime":27334212691900,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:42:28.198 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:42:28.198 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5572, lon=126.9239
2025-11-21 19:42:28.198 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.198289600Z","nanoTime":27334212902400,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:42:28.199 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.199269600Z","nanoTime":27334213051800,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":149400,"duration_ms":0,"resultData":{"latitude":37.5572,"longitude":126.9239,"precision":7,"centerHash":"wydm8jp","adjacentHashes":["wydm8jp","wydm8jr","wydm8m2","wydm8m0","wydm8kb","wydm8hz","wydm8hy","wydm8jn","wydm8jq"],"errorMessage":null,"success":true}}
2025-11-21 19:42:28.199 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm8jp, wydm8jr, wydm8m2, wydm8m0, wydm8kb, wydm8hz, wydm8hy, wydm8jn, wydm8jq]
2025-11-21 19:42:28.199 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm8jp
2025-11-21 19:42:28.199 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.199269600Z","nanoTime":27334213308400,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":616500,"duration_ms":0,"resultData":{"requestLatitude":37.5572,"requestLongitude":126.9239,"requestRadius":500,"centerGeohashId":"wydm8jp","nineBlockGeohashes":["wydm8jp","wydm8jr","wydm8m2","wydm8m0","wydm8kb","wydm8hz","wydm8hy","wydm8jn","wydm8jq"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:42:28.199 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.199269600Z","nanoTime":27334213454500,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:42:28.199 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:42:28.199 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm8jp
2025-11-21 19:42:28.200 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5557ms)
2025-11-21 19:42:28.200 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:42:28.202 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:42:28.202 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:42:28.202 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.484ms, 역직렬화: 0.0ms
2025-11-21 19:42:28.202 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:42:28.203 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.202289100Z","nanoTime":27334216985000,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3530500,"duration_ms":3,"resultData":{"centerGeohashId":"wydm8jp","nineBlockGeohashes":["wydm8jp","wydm8jr","wydm8m2","wydm8m0","wydm8kb","wydm8hz","wydm8hy","wydm8jn","wydm8jq"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm8jp","hit":false,"valueSize":0,"l1CacheGetDurationNs":555700,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm8jp","cacheKey":"data:wydm8jp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":367600},{"geohashId":"wydm8jr","cacheKey":"data:wydm8jr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":303300},{"geohashId":"wydm8m2","cacheKey":"data:wydm8m2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":348900},{"geohashId":"wydm8m0","cacheKey":"data:wydm8m0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":217600},{"geohashId":"wydm8kb","cacheKey":"data:wydm8kb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":241300},{"geohashId":"wydm8hz","cacheKey":"data:wydm8hz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":245000},{"geohashId":"wydm8hy","cacheKey":"data:wydm8hy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":252300},{"geohashId":"wydm8jn","cacheKey":"data:wydm8jn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":220900},{"geohashId":"wydm8jq","cacheKey":"data:wydm8jq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":206100}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2484000,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:42:28.203 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.203273500Z","nanoTime":27334217642200,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:42:28.203 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:42:28.203 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:42:28.209 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 19건
2025-11-21 19:42:28.214 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:42:28.214 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:42:28.214 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.214270Z","nanoTime":27334228261800,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":10619600,"duration_ms":10,"resultData":{"inputCctvMissGrids":["wydm8jp","wydm8jr","wydm8m2","wydm8m0","wydm8kb","wydm8hz","wydm8hy","wydm8jn","wydm8jq"],"cctvQueryResult":{"queryGeohashIds":["wydm8jp","wydm8jr","wydm8m2","wydm8m0","wydm8kb","wydm8hz","wydm8hy","wydm8jn","wydm8jq"],"totalRowsReturned":19,"rowsPerGrid":{"wydm8jp":2,"wydm8jn":2,"wydm8m0":2,"wydm8jr":3,"wydm8jq":1,"wydm8kb":1,"wydm8hz":7,"wydm8hy":1},"queryExecutionTimeNs":5785200,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm8jp","cacheKey":"data:wydm8jp:cctv","dataCount":2,"dataSize":256,"errorMessage":null,"success":true},{"geohashId":"wydm8jn","cacheKey":"data:wydm8jn:cctv","dataCount":2,"dataSize":256,"errorMessage":null,"success":true},{"geohashId":"wydm8m0","cacheKey":"data:wydm8m0:cctv","dataCount":2,"dataSize":255,"errorMessage":null,"success":true},{"geohashId":"wydm8jr","cacheKey":"data:wydm8jr:cctv","dataCount":3,"dataSize":381,"errorMessage":null,"success":true},{"geohashId":"wydm8jq","cacheKey":"data:wydm8jq:cctv","dataCount":1,"dataSize":128,"errorMessage":null,"success":true},{"geohashId":"wydm8kb","cacheKey":"data:wydm8kb:cctv","dataCount":1,"dataSize":127,"errorMessage":null,"success":true},{"geohashId":"wydm8hz","cacheKey":"data:wydm8hz:cctv","dataCount":7,"dataSize":893,"errorMessage":null,"success":true},{"geohashId":"wydm8hy","cacheKey":"data:wydm8hy:cctv","dataCount":1,"dataSize":128,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:42:28.214 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.214270Z","nanoTime":27334228632500,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:42:28.214 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:42:28.214 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5572, 126.9239)
2025-11-21 19:42:28.215 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:42:28.322 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:42:28.322 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:42:28.323 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:42:28.323 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5572, 126.9239), 반경: 500m
2025-11-21 19:42:28.413 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:42:28.414 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 154건
2025-11-21 19:42:28.415 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:42:28.415 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:42:28.415 [http-nio-8185-exec-5] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:42:28.415 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:42:28.416 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:42:28.416 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:42:28.416 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:42:28.416 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.416217200Z","nanoTime":27334430225100,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":201592600,"duration_ms":201,"resultData":{"latitude":37.5572,"longitude":126.9239,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":201215200,"addressApiResult":{"cached":false,"cacheKey":"address:37.5572:126.9239","roadAddress":"주소 없음","jibunAddress":"서울 마포구 동교동 192-44","responseSize":60,"executionTimeNs":108461200,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":53000,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5572:126.9239:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":10,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":3,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalPlaces":154,"responseSize":17877,"executionTimeNs":92701000,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:28.416 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.416217200Z","nanoTime":27334430629900,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:42:28.416 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:42:28.416 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:42:28.416 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 19개
2025-11-21 19:42:28.416 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 19개 (총 카메라 대수: 44대)
2025-11-21 19:42:28.416 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:42:28.489 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 마포구  매봉산로 76 (거리: 349m)
2025-11-21 19:42:28.489 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:42:28.489 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:42:28.489 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:42:28.489 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:42:28.490 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.490216900Z","nanoTime":27334503974100,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":73344200,"duration_ms":73,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":19,"totalCctvAfterFilter":19,"totalCameraCount":44,"filterRate":1.0,"filterExecutionTimeNs":22300,"success":true},"policeQuery":{"queryDurationNs":72572100,"found":true,"nearestAddress":"서울특별시 마포구  매봉산로 76","nearestDistance":348.70022805484854,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":10,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":3,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"placesAfterFilter":{"CT1":14,"AT4":10,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":3,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalBeforeFilter":154,"totalAfterFilter":153,"filterRate":0.9935064935064936,"filterExecutionTimeNs":153500,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:28.490 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.490216900Z","nanoTime":27334504389600,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:42:28.490 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:42:28.490 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 42.26, 편의성: 39.72, 종합: 40.99
2025-11-21 19:42:28.491 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.490216900Z","nanoTime":27334504810900,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":421300,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":56.41247149314393,"policeDistance":348.70022805484854,"cctvScore":63.33333333333333,"cctvCount":19,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":42.257074781276515,"success":true},"convenienceScore":{"categoryScores":{"CT1":56.0,"AT4":30.0,"CS2":3.75,"SC4":2.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":39.71666666666667,"success":true},"overallScore":40.98687072397159,"errorMessage":null,"success":true}}
2025-11-21 19:42:28.491 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.491216700Z","nanoTime":27334505084900,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:42:28.491 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:42:28.491 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 마포구  매봉산로 76, latitude=37.560334, longitude=126.923761, geohashId=wydm8jx)
2025-11-21 19:42:28.491 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 348.70022805484854
2025-11-21 19:42:28.492 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm8jp
2025-11-21 19:42:28.492 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:42:28.493 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.492214400Z","nanoTime":27334506923200,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1838300,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["병원이(가) 20m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm8jp","dataSize":20956,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20956,"errorMessage":null,"success":true}}
2025-11-21 19:42:28.493 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:42:34.579 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:42:34.579 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5326, longitude=126.9135, radius=500)
2025-11-21 19:42:34.579 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:42:34.579 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5326, longitude=126.9135, radius=500
2025-11-21 19:42:34.579 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.579405300Z","nanoTime":27340593726300,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:42:34.579 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:42:34.579 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5326, lon=126.9135
2025-11-21 19:42:34.579 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.579405300Z","nanoTime":27340593933900,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:42:34.580 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.579405300Z","nanoTime":27340594060900,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":127000,"duration_ms":0,"resultData":{"latitude":37.5326,"longitude":126.9135,"precision":7,"centerHash":"wydjxbx","adjacentHashes":["wydjxbx","wydjxbz","wydm80b","wydm808","wydm802","wydjxbr","wydjxbq","wydjxbw","wydjxby"],"errorMessage":null,"success":true}}
2025-11-21 19:42:34.580 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydjxbx, wydjxbz, wydm80b, wydm808, wydm802, wydjxbr, wydjxbq, wydjxbw, wydjxby]
2025-11-21 19:42:34.580 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydjxbx
2025-11-21 19:42:34.580 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.580391700Z","nanoTime":27340594315200,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":588900,"duration_ms":0,"resultData":{"requestLatitude":37.5326,"requestLongitude":126.9135,"requestRadius":500,"centerGeohashId":"wydjxbx","nineBlockGeohashes":["wydjxbx","wydjxbz","wydm80b","wydm808","wydm802","wydjxbr","wydjxbq","wydjxbw","wydjxby"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:42:34.580 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.580391700Z","nanoTime":27340594465300,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:42:34.580 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:42:34.580 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydjxbx
2025-11-21 19:42:34.581 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.7633ms)
2025-11-21 19:42:34.581 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:42:34.583 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:42:34.583 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:42:34.583 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.3751ms, 역직렬화: 0.0ms
2025-11-21 19:42:34.583 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:42:34.584 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.583407600Z","nanoTime":27340597986000,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3520700,"duration_ms":3,"resultData":{"centerGeohashId":"wydjxbx","nineBlockGeohashes":["wydjxbx","wydjxbz","wydm80b","wydm808","wydm802","wydjxbr","wydjxbq","wydjxbw","wydjxby"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydjxbx","hit":false,"valueSize":0,"l1CacheGetDurationNs":763300,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydjxbx","cacheKey":"data:wydjxbx:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":496200},{"geohashId":"wydjxbz","cacheKey":"data:wydjxbz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":253200},{"geohashId":"wydm80b","cacheKey":"data:wydm80b:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":248800},{"geohashId":"wydm808","cacheKey":"data:wydm808:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":214600},{"geohashId":"wydm802","cacheKey":"data:wydm802:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":147700},{"geohashId":"wydjxbr","cacheKey":"data:wydjxbr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":197700},{"geohashId":"wydjxbq","cacheKey":"data:wydjxbq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":238000},{"geohashId":"wydjxbw","cacheKey":"data:wydjxbw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":228100},{"geohashId":"wydjxby","cacheKey":"data:wydjxby:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":269200}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2375100,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:42:34.584 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.584396600Z","nanoTime":27340598343400,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:42:34.584 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:42:34.584 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:42:34.589 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 2건
2025-11-21 19:42:34.589 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:42:34.589 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 1개
2025-11-21 19:42:34.590 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.590387200Z","nanoTime":27340604138300,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5794900,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydjxbx","wydjxbz","wydm80b","wydm808","wydm802","wydjxbr","wydjxbq","wydjxbw","wydjxby"],"cctvQueryResult":{"queryGeohashIds":["wydjxbx","wydjxbz","wydm80b","wydm808","wydm802","wydjxbr","wydjxbq","wydjxbw","wydjxby"],"totalRowsReturned":2,"rowsPerGrid":{"wydjxbq":2},"queryExecutionTimeNs":4690800,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydjxbq","cacheKey":"data:wydjxbq:cctv","dataCount":2,"dataSize":272,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:42:34.591 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.591387200Z","nanoTime":27340605218700,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:42:34.591 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:42:34.591 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5326, 126.9135)
2025-11-21 19:42:34.591 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:42:34.707 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:42:34.707 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:42:34.707 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:42:34.707 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5326, 126.9135), 반경: 500m
2025-11-21 19:42:34.784 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:42:34.785 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 47건
2025-11-21 19:42:34.786 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:42:34.786 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:42:34.786 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 영등포구
2025-11-21 19:42:34.787 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 미스 - DB 조회
2025-11-21 19:42:34.790 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 성공 및 캐싱 완료 - 영등포구: 0.721231491
2025-11-21 19:42:34.790 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:42:34.790 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:42:34.790 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:42:34.790 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.721231491
2025-11-21 19:42:34.791 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.790465500Z","nanoTime":27340805221900,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":200003200,"duration_ms":200,"resultData":{"latitude":37.5326,"longitude":126.9135,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":199811400,"addressApiResult":{"cached":false,"cacheKey":"address:37.5326:126.9135","roadAddress":"서울특별시 영등포구 의사당대로 1","jibunAddress":"서울 영등포구 여의도동 1","responseSize":70,"executionTimeNs":116276700,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":"arrest_rate:영등포구","guName":"영등포구","arrestRate":0.721231491,"dataFound":true,"executionTimeNs":4362500,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5326:126.9135:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":9,"CS2":0,"SC4":0,"MT1":1,"BK9":14,"HP8":2,"AC5":0,"CE7":4,"SW8":0,"PO3":0,"FD6":9,"PK6":6,"OL7":0,"PM9":1},"totalPlaces":47,"responseSize":5608,"executionTimeNs":79172200,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:34.791 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.791485Z","nanoTime":27340805601400,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:42:34.791 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:42:34.791 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:42:34.791 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 2개
2025-11-21 19:42:34.791 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 2개 (총 카메라 대수: 2대)
2025-11-21 19:42:34.791 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:42:34.862 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구  경인로 759 (거리: 1085m)
2025-11-21 19:42:34.862 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:42:34.862 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:42:34.863 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 9개 카테고리
2025-11-21 19:42:34.863 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:42:34.863 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.863470Z","nanoTime":27340877337100,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":71735700,"duration_ms":71,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":2,"totalCctvAfterFilter":2,"totalCameraCount":2,"filterRate":1.0,"filterExecutionTimeNs":4800,"success":true},"policeQuery":{"queryDurationNs":71051400,"found":true,"nearestAddress":"서울특별시 영등포구  경인로 759","nearestDistance":1084.99359027666,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"AT4":9,"BK9":14,"HP8":2,"CE7":4,"FD6":9,"PK6":6,"MT1":1,"PM9":1},"placesAfterFilter":{"CT1":1,"AT4":9,"BK9":14,"HP8":2,"CE7":4,"FD6":9,"PK6":6,"MT1":1,"PM9":1},"totalBeforeFilter":47,"totalAfterFilter":47,"filterRate":1.0,"filterExecutionTimeNs":83500,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:34.863 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.863470Z","nanoTime":27340877777300,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:42:34.863 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:42:34.863 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 24.30, 편의성: 24.89, 종합: 24.60
2025-11-21 19:42:34.864 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.863470Z","nanoTime":27340878189000,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":411700,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":0.0,"policeDistance":1084.99359027666,"cctvScore":6.666666666666667,"cctvCount":2,"arrestRateScore":72.12314909999999,"arrestRate":0.721231491,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":24.303611396666664,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"AT4":27.0,"BK9":70.0,"HP8":70.0,"CE7":8.0,"FD6":9.0,"PK6":18.0,"MT1":10.0,"PM9":8.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"영등포구","guPopulation":397173,"finalScore":24.88888888888889,"success":true},"overallScore":24.596250142777777,"errorMessage":null,"success":true}}
2025-11-21 19:42:34.864 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.864469400Z","nanoTime":27340878506800,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:42:34.864 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:42:34.864 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구  경인로 759, latitude=37.533614, longitude=126.901262, geohashId=wydjx8y)
2025-11-21 19:42:34.864 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 1084.99359027666
2025-11-21 19:42:34.865 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydjxbx
2025-11-21 19:42:34.865 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:42:34.865 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.865468700Z","nanoTime":27340879744300,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1237500,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["음식점이(가) 103m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","가장 가까운 파출소가 1km 이상 떨어져 있습니다.","CCTV 설치 대수가 적은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydjxbx","dataSize":7205,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":7205,"errorMessage":null,"success":true}}
2025-11-21 19:42:34.865 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:42:39.118 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:42:39.118 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5133, longitude=127.1, radius=500)
2025-11-21 19:42:39.118 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:42:39.118 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5133, longitude=127.1, radius=500
2025-11-21 19:42:39.118 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.118411200Z","nanoTime":27345132507300,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:42:39.118 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:42:39.118 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5133, lon=127.1
2025-11-21 19:42:39.118 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.118411200Z","nanoTime":27345132723400,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:42:39.118 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.118411200Z","nanoTime":27345132895300,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":171900,"duration_ms":0,"resultData":{"latitude":37.5133,"longitude":127.1,"precision":7,"centerHash":"wydmkjp","adjacentHashes":["wydmkjp","wydmkjr","wydmkm2","wydmkm0","wydmkkb","wydmkhz","wydmkhy","wydmkjn","wydmkjq"],"errorMessage":null,"success":true}}
2025-11-21 19:42:39.118 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmkjp, wydmkjr, wydmkm2, wydmkm0, wydmkkb, wydmkhz, wydmkhy, wydmkjn, wydmkjq]
2025-11-21 19:42:39.119 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmkjp
2025-11-21 19:42:39.119 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.119416600Z","nanoTime":27345133228600,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":721300,"duration_ms":0,"resultData":{"requestLatitude":37.5133,"requestLongitude":127.1,"requestRadius":500,"centerGeohashId":"wydmkjp","nineBlockGeohashes":["wydmkjp","wydmkjr","wydmkm2","wydmkm0","wydmkkb","wydmkhz","wydmkhy","wydmkjn","wydmkjq"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:42:39.119 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.119416600Z","nanoTime":27345133415800,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:42:39.119 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:42:39.119 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmkjp
2025-11-21 19:42:39.120 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.6369ms)
2025-11-21 19:42:39.120 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:42:39.122 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:42:39.122 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:42:39.122 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.5305ms, 역직렬화: 0.0ms
2025-11-21 19:42:39.122 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:42:39.123 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.123411500Z","nanoTime":27345137173600,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3757800,"duration_ms":3,"resultData":{"centerGeohashId":"wydmkjp","nineBlockGeohashes":["wydmkjp","wydmkjr","wydmkm2","wydmkm0","wydmkkb","wydmkhz","wydmkhy","wydmkjn","wydmkjq"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmkjp","hit":false,"valueSize":0,"l1CacheGetDurationNs":636900,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmkjp","cacheKey":"data:wydmkjp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":375700},{"geohashId":"wydmkjr","cacheKey":"data:wydmkjr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":219800},{"geohashId":"wydmkm2","cacheKey":"data:wydmkm2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":183300},{"geohashId":"wydmkm0","cacheKey":"data:wydmkm0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":278100},{"geohashId":"wydmkkb","cacheKey":"data:wydmkkb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":204700},{"geohashId":"wydmkhz","cacheKey":"data:wydmkhz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":168100},{"geohashId":"wydmkhy","cacheKey":"data:wydmkhy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":360500},{"geohashId":"wydmkjn","cacheKey":"data:wydmkjn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":349600},{"geohashId":"wydmkjq","cacheKey":"data:wydmkjq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":301600}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2530500,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:42:39.123 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.123411500Z","nanoTime":27345137564400,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:42:39.123 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:42:39.123 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:42:39.129 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 21건
2025-11-21 19:42:39.131 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:42:39.131 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 5개
2025-11-21 19:42:39.132 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.131417300Z","nanoTime":27345145974500,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":8410100,"duration_ms":8,"resultData":{"inputCctvMissGrids":["wydmkjp","wydmkjr","wydmkm2","wydmkm0","wydmkkb","wydmkhz","wydmkhy","wydmkjn","wydmkjq"],"cctvQueryResult":{"queryGeohashIds":["wydmkjp","wydmkjr","wydmkm2","wydmkm0","wydmkkb","wydmkhz","wydmkhy","wydmkjn","wydmkjq"],"totalRowsReturned":21,"rowsPerGrid":{"wydmkm2":1,"wydmkjq":15,"wydmkhy":1,"wydmkhz":1,"wydmkm0":3},"queryExecutionTimeNs":5555000,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmkm2","cacheKey":"data:wydmkm2:cctv","dataCount":1,"dataSize":136,"errorMessage":null,"success":true},{"geohashId":"wydmkjq","cacheKey":"data:wydmkjq:cctv","dataCount":15,"dataSize":1996,"errorMessage":null,"success":true},{"geohashId":"wydmkhy","cacheKey":"data:wydmkhy:cctv","dataCount":1,"dataSize":154,"errorMessage":null,"success":true},{"geohashId":"wydmkhz","cacheKey":"data:wydmkhz:cctv","dataCount":1,"dataSize":145,"errorMessage":null,"success":true},{"geohashId":"wydmkm0","cacheKey":"data:wydmkm0:cctv","dataCount":3,"dataSize":447,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:42:39.132 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.132413200Z","nanoTime":27345146433100,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:42:39.132 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:42:39.132 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5133, 127.1)
2025-11-21 19:42:39.132 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:42:39.194 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:42:39.194 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:42:39.195 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:42:39.195 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5133, 127.1), 반경: 500m
2025-11-21 19:42:39.284 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:42:39.284 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 150건
2025-11-21 19:42:39.286 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:42:39.286 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:42:39.286 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 송파구
2025-11-21 19:42:39.286 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 미스 - DB 조회
2025-11-21 19:42:39.289 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 성공 및 캐싱 완료 - 송파구: 0.657451864
2025-11-21 19:42:39.290 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:42:39.290 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:42:39.290 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:42:39.290 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.657451864
2025-11-21 19:42:39.290 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.290437200Z","nanoTime":27345304280600,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":157847500,"duration_ms":157,"resultData":{"latitude":37.5133,"longitude":127.1,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":157643200,"addressApiResult":{"cached":false,"cacheKey":"address:37.5133:127.1","roadAddress":"서울특별시 송파구 올림픽로 지하 265","jibunAddress":"서울 송파구 신천동 8","responseSize":71,"executionTimeNs":62861600,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":"arrest_rate:송파구","guName":"송파구","arrestRate":0.657451864,"dataFound":true,"executionTimeNs":3871100,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5133:127.1:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":5,"CS2":15,"SC4":2,"MT1":4,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":2,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":150,"responseSize":17627,"executionTimeNs":90910500,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:39.290 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.290437200Z","nanoTime":27345304660100,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:42:39.290 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:42:39.290 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:42:39.290 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 21개
2025-11-21 19:42:39.290 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 21개 (총 카메라 대수: 30대)
2025-11-21 19:42:39.290 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:42:39.363 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 양천구  중앙로32길 65 (거리: 1344m)
2025-11-21 19:42:39.364 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:42:39.364 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:42:39.364 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:42:39.364 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:42:39.364 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.364433500Z","nanoTime":27345378630200,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":73970100,"duration_ms":73,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":21,"totalCctvAfterFilter":21,"totalCameraCount":30,"filterRate":1.0,"filterExecutionTimeNs":14600,"success":true},"policeQuery":{"queryDurationNs":73245000,"found":true,"nearestAddress":"서울특별시 양천구  중앙로32길 65","nearestDistance":1343.589020595067,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":5,"CS2":15,"SC4":2,"MT1":4,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":2,"FD6":15,"PK6":15,"PM9":15},"placesAfterFilter":{"CT1":15,"AT4":5,"CS2":15,"SC4":2,"MT1":4,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":2,"FD6":15,"PK6":15,"PM9":15},"totalBeforeFilter":150,"totalAfterFilter":150,"filterRate":1.0,"filterExecutionTimeNs":181500,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:39.365 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.364433500Z","nanoTime":27345379112700,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:42:39.365 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:42:39.365 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 47.72, 편의성: 43.38, 종합: 45.55
2025-11-21 19:42:39.365 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.365435800Z","nanoTime":27345379597500,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":484800,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":0.0,"policeDistance":1343.589020595067,"cctvScore":70.0,"cctvCount":21,"arrestRateScore":65.7451864,"arrestRate":0.657451864,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":47.723555919999995,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":15.0,"CS2":2.285505325227408,"SC4":4.0,"MT1":40.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":6.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"송파구","guPopulation":656310,"finalScore":43.3775360946591,"success":true},"overallScore":45.550546007329544,"errorMessage":null,"success":true}}
2025-11-21 19:42:39.365 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.365435800Z","nanoTime":27345379907200,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:42:39.365 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:42:39.365 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 양천구  중앙로32길 65, latitude=37.502675, longitude=127.092746, geohashId=wydmk54)
2025-11-21 19:42:39.365 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 1343.589020595067
2025-11-21 19:42:39.367 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmkjp
2025-11-21 19:42:39.367 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:42:39.368 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.367434500Z","nanoTime":27345382017300,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":2110100,"duration_ms":2,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["지하철역이(가) 20m 내에 있습니다."],"warnings":["가장 가까운 파출소가 1km 이상 떨어져 있습니다."],"cacheWrite":{"cacheKey":"dto:wydmkjp","dataSize":21721,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":21721,"errorMessage":null,"success":true}}
2025-11-21 19:42:39.368 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:42:43.529 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:42:43.529 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5637, longitude=126.983, radius=500)
2025-11-21 19:42:43.529 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:42:43.529 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5637, longitude=126.983, radius=500
2025-11-21 19:42:43.529 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.529623100Z","nanoTime":27349543739200,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:42:43.529 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:42:43.529 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5637, lon=126.983
2025-11-21 19:42:43.529 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.529623100Z","nanoTime":27349543935900,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:42:43.529 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.529623100Z","nanoTime":27349544125200,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":189300,"duration_ms":0,"resultData":{"latitude":37.5637,"longitude":126.983,"precision":7,"centerHash":"wydm9w6","adjacentHashes":["wydm9w6","wydm9wd","wydm9we","wydm9w7","wydm9w5","wydm9w4","wydm9w1","wydm9w3","wydm9w9"],"errorMessage":null,"success":true}}
2025-11-21 19:42:43.529 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9w6, wydm9wd, wydm9we, wydm9w7, wydm9w5, wydm9w4, wydm9w1, wydm9w3, wydm9w9]
2025-11-21 19:42:43.529 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9w6
2025-11-21 19:42:43.530 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.529623100Z","nanoTime":27349544341200,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":602000,"duration_ms":0,"resultData":{"requestLatitude":37.5637,"requestLongitude":126.983,"requestRadius":500,"centerGeohashId":"wydm9w6","nineBlockGeohashes":["wydm9w6","wydm9wd","wydm9we","wydm9w7","wydm9w5","wydm9w4","wydm9w1","wydm9w3","wydm9w9"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:42:43.530 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.530624600Z","nanoTime":27349544564900,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:42:43.530 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:42:43.530 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9w6
2025-11-21 19:42:43.530 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5621ms)
2025-11-21 19:42:43.530 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:42:43.533 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:42:43.533 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:42:43.533 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.2882ms, 역직렬화: 0.0ms
2025-11-21 19:42:43.533 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:42:43.534 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.533109500Z","nanoTime":27349547746500,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3181600,"duration_ms":3,"resultData":{"centerGeohashId":"wydm9w6","nineBlockGeohashes":["wydm9w6","wydm9wd","wydm9we","wydm9w7","wydm9w5","wydm9w4","wydm9w1","wydm9w3","wydm9w9"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9w6","hit":false,"valueSize":0,"l1CacheGetDurationNs":562100,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9w6","cacheKey":"data:wydm9w6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":275700},{"geohashId":"wydm9wd","cacheKey":"data:wydm9wd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":216300},{"geohashId":"wydm9we","cacheKey":"data:wydm9we:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":274400},{"geohashId":"wydm9w7","cacheKey":"data:wydm9w7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":245700},{"geohashId":"wydm9w5","cacheKey":"data:wydm9w5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":232100},{"geohashId":"wydm9w4","cacheKey":"data:wydm9w4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":255400},{"geohashId":"wydm9w1","cacheKey":"data:wydm9w1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":217500},{"geohashId":"wydm9w3","cacheKey":"data:wydm9w3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":217400},{"geohashId":"wydm9w9","cacheKey":"data:wydm9w9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":277600}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2288200,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:42:43.534 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.534120600Z","nanoTime":27349548042300,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:42:43.534 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:42:43.534 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:42:43.538 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 9건
2025-11-21 19:42:43.541 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:42:43.541 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 6개
2025-11-21 19:42:43.541 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.541121600Z","nanoTime":27349555123600,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":7081300,"duration_ms":7,"resultData":{"inputCctvMissGrids":["wydm9w6","wydm9wd","wydm9we","wydm9w7","wydm9w5","wydm9w4","wydm9w1","wydm9w3","wydm9w9"],"cctvQueryResult":{"queryGeohashIds":["wydm9w6","wydm9wd","wydm9we","wydm9w7","wydm9w5","wydm9w4","wydm9w1","wydm9w3","wydm9w9"],"totalRowsReturned":9,"rowsPerGrid":{"wydm9w4":1,"wydm9w3":1,"wydm9w7":3,"wydm9w6":1,"wydm9w5":2,"wydm9we":1},"queryExecutionTimeNs":4257100,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9w4","cacheKey":"data:wydm9w4:cctv","dataCount":1,"dataSize":131,"errorMessage":null,"success":true},{"geohashId":"wydm9w3","cacheKey":"data:wydm9w3:cctv","dataCount":1,"dataSize":126,"errorMessage":null,"success":true},{"geohashId":"wydm9w7","cacheKey":"data:wydm9w7:cctv","dataCount":3,"dataSize":386,"errorMessage":null,"success":true},{"geohashId":"wydm9w6","cacheKey":"data:wydm9w6:cctv","dataCount":1,"dataSize":130,"errorMessage":null,"success":true},{"geohashId":"wydm9w5","cacheKey":"data:wydm9w5:cctv","dataCount":2,"dataSize":259,"errorMessage":null,"success":true},{"geohashId":"wydm9we","cacheKey":"data:wydm9we:cctv","dataCount":1,"dataSize":132,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:42:43.541 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.541121600Z","nanoTime":27349555399100,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:42:43.541 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:42:43.541 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5637, 126.983)
2025-11-21 19:42:43.542 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:42:43.644 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:42:43.644 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:42:43.644 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:42:43.644 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5637, 126.983), 반경: 500m
2025-11-21 19:42:43.734 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:42:43.734 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 158건
2025-11-21 19:42:43.736 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:42:43.736 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:42:43.736 [http-nio-8185-exec-7] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:42:43.736 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:42:43.736 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:42:43.736 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:42:43.736 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:42:43.736 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.736961900Z","nanoTime":27349751297200,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":195898100,"duration_ms":195,"resultData":{"latitude":37.5637,"longitude":126.983,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":195690600,"addressApiResult":{"cached":false,"cacheKey":"address:37.5637:126.983","roadAddress":"주소 없음","jibunAddress":"서울 중구 명동1가 54-19","responseSize":59,"executionTimeNs":102641300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":57000,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5637:126.983:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":6,"CS2":15,"SC4":0,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":15,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":158,"responseSize":18282,"executionTimeNs":92992300,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:43.737 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.737961100Z","nanoTime":27349751729700,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:42:43.737 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:42:43.737 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:42:43.737 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 9개
2025-11-21 19:42:43.737 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 9개 (총 카메라 대수: 25대)
2025-11-21 19:42:43.737 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:42:43.808 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  통일로 13 (거리: 86m)
2025-11-21 19:42:43.808 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:42:43.808 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:42:43.808 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 12개 카테고리
2025-11-21 19:42:43.808 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:42:43.808 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.808980500Z","nanoTime":27349823244000,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":71514300,"duration_ms":71,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":9,"totalCctvAfterFilter":9,"totalCameraCount":25,"filterRate":1.0,"filterExecutionTimeNs":10200,"success":true},"policeQuery":{"queryDurationNs":70831000,"found":true,"nearestAddress":"서울특별시 중구  통일로 13","nearestDistance":85.80535563833556,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":6,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SW8":2,"PO3":15,"FD6":15,"PK6":15,"PM9":15},"placesAfterFilter":{"CT1":15,"AT4":6,"BK9":14,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SW8":2,"PO3":15,"FD6":15,"PK6":15,"PM9":15},"totalBeforeFilter":158,"totalAfterFilter":157,"filterRate":0.9936708860759493,"filterExecutionTimeNs":164000,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:43.808 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.808980500Z","nanoTime":27349823479000,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:42:43.808 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:42:43.809 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 38.78, 편의성: 50.15, 종합: 44.46
2025-11-21 19:42:43.809 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.809966700Z","nanoTime":27349823941100,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":462100,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":89.27433054520806,"policeDistance":85.80535563833556,"cctvScore":30.0,"cctvCount":9,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":38.78229916356241,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":18.0,"BK9":70.0,"HP8":100.0,"CS2":3.75,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":45.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":50.145833333333336,"success":true},"overallScore":44.46406624844788,"errorMessage":null,"success":true}}
2025-11-21 19:42:43.809 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.809966700Z","nanoTime":27349824213500,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:42:43.809 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:42:43.809 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  통일로 13, latitude=37.563587, longitude=126.983963, geohashId=wydm9w4)
2025-11-21 19:42:43.809 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 85.80535563833556
2025-11-21 19:42:43.810 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9w6
2025-11-21 19:42:43.811 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:42:43.811 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.811960100Z","nanoTime":27349825780300,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1566800,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["문화시설이(가) 43m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm9w6","dataSize":19969,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19969,"errorMessage":null,"success":true}}
2025-11-21 19:42:43.811 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:42:47.549 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:42:47.549 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5559, longitude=126.9368, radius=500)
2025-11-21 19:42:47.549 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:42:47.549 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5559, longitude=126.9368, radius=500
2025-11-21 19:42:47.549 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.549798200Z","nanoTime":27353563870900,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:42:47.549 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:42:47.549 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5559, lon=126.9368
2025-11-21 19:42:47.549 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.549798200Z","nanoTime":27353564062500,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:42:47.549 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.549798200Z","nanoTime":27353564187600,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":125100,"duration_ms":0,"resultData":{"latitude":37.5559,"longitude":126.9368,"precision":7,"centerHash":"wydm8sb","adjacentHashes":["wydm8sb","wydm8t0","wydm8t1","wydm8sc","wydm8s9","wydm8s8","wydm8kx","wydm8kz","wydm8mp"],"errorMessage":null,"success":true}}
2025-11-21 19:42:47.549 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm8sb, wydm8t0, wydm8t1, wydm8sc, wydm8s9, wydm8s8, wydm8kx, wydm8kz, wydm8mp]
2025-11-21 19:42:47.549 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm8sb
2025-11-21 19:42:47.550 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.549798200Z","nanoTime":27353564418700,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":547800,"duration_ms":0,"resultData":{"requestLatitude":37.5559,"requestLongitude":126.9368,"requestRadius":500,"centerGeohashId":"wydm8sb","nineBlockGeohashes":["wydm8sb","wydm8t0","wydm8t1","wydm8sc","wydm8s9","wydm8s8","wydm8kx","wydm8kz","wydm8mp"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:42:47.550 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.550801800Z","nanoTime":27353564693100,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:42:47.550 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:42:47.550 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm8sb
2025-11-21 19:42:47.551 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5807ms)
2025-11-21 19:42:47.551 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:42:47.553 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:42:47.553 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:42:47.553 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.609ms, 역직렬화: 0.0ms
2025-11-21 19:42:47.553 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:42:47.554 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.553484500Z","nanoTime":27353568172600,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3479500,"duration_ms":3,"resultData":{"centerGeohashId":"wydm8sb","nineBlockGeohashes":["wydm8sb","wydm8t0","wydm8t1","wydm8sc","wydm8s9","wydm8s8","wydm8kx","wydm8kz","wydm8mp"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm8sb","hit":false,"valueSize":0,"l1CacheGetDurationNs":580700,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm8sb","cacheKey":"data:wydm8sb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":252600},{"geohashId":"wydm8t0","cacheKey":"data:wydm8t0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":381000},{"geohashId":"wydm8t1","cacheKey":"data:wydm8t1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":332300},{"geohashId":"wydm8sc","cacheKey":"data:wydm8sc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":287200},{"geohashId":"wydm8s9","cacheKey":"data:wydm8s9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":256100},{"geohashId":"wydm8s8","cacheKey":"data:wydm8s8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":194000},{"geohashId":"wydm8kx","cacheKey":"data:wydm8kx:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":297200},{"geohashId":"wydm8kz","cacheKey":"data:wydm8kz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":248800},{"geohashId":"wydm8mp","cacheKey":"data:wydm8mp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":289500}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2609000,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:42:47.554 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.554489800Z","nanoTime":27353568461000,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:42:47.554 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:42:47.554 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:42:47.559 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 20건
2025-11-21 19:42:47.563 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:42:47.563 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:42:47.563 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.563492700Z","nanoTime":27353577925700,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":9464700,"duration_ms":9,"resultData":{"inputCctvMissGrids":["wydm8sb","wydm8t0","wydm8t1","wydm8sc","wydm8s9","wydm8s8","wydm8kx","wydm8kz","wydm8mp"],"cctvQueryResult":{"queryGeohashIds":["wydm8sb","wydm8t0","wydm8t1","wydm8sc","wydm8s9","wydm8s8","wydm8kx","wydm8kz","wydm8mp"],"totalRowsReturned":20,"rowsPerGrid":{"wydm8s9":2,"wydm8s8":2,"wydm8mp":4,"wydm8kx":2,"wydm8t1":4,"wydm8t0":2,"wydm8sc":2,"wydm8kz":1,"wydm8sb":1},"queryExecutionTimeNs":5404200,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm8s9","cacheKey":"data:wydm8s9:cctv","dataCount":2,"dataSize":257,"errorMessage":null,"success":true},{"geohashId":"wydm8s8","cacheKey":"data:wydm8s8:cctv","dataCount":2,"dataSize":255,"errorMessage":null,"success":true},{"geohashId":"wydm8mp","cacheKey":"data:wydm8mp:cctv","dataCount":4,"dataSize":408,"errorMessage":null,"success":true},{"geohashId":"wydm8kx","cacheKey":"data:wydm8kx:cctv","dataCount":2,"dataSize":257,"errorMessage":null,"success":true},{"geohashId":"wydm8t1","cacheKey":"data:wydm8t1:cctv","dataCount":4,"dataSize":409,"errorMessage":null,"success":true},{"geohashId":"wydm8t0","cacheKey":"data:wydm8t0:cctv","dataCount":2,"dataSize":205,"errorMessage":null,"success":true},{"geohashId":"wydm8sc","cacheKey":"data:wydm8sc:cctv","dataCount":2,"dataSize":205,"errorMessage":null,"success":true},{"geohashId":"wydm8kz","cacheKey":"data:wydm8kz:cctv","dataCount":1,"dataSize":103,"errorMessage":null,"success":true},{"geohashId":"wydm8sb","cacheKey":"data:wydm8sb:cctv","dataCount":1,"dataSize":103,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:42:47.564 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.563492700Z","nanoTime":27353578233300,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:42:47.564 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:42:47.564 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5559, 126.9368)
2025-11-21 19:42:47.564 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:42:47.666 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:42:47.666 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:42:47.667 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:42:47.667 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5559, 126.9368), 반경: 500m
2025-11-21 19:42:47.752 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:42:47.752 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 151건
2025-11-21 19:42:47.753 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:42:47.753 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:42:47.753 [http-nio-8185-exec-9] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:42:47.753 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:42:47.753 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:42:47.753 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:42:47.753 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:42:47.754 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.753450100Z","nanoTime":27353768029200,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":189795900,"duration_ms":189,"resultData":{"latitude":37.5559,"longitude":126.9368,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":189596100,"addressApiResult":{"cached":false,"cacheKey":"address:37.5559:126.9368","roadAddress":"주소 없음","jibunAddress":"서울 서대문구 창천동 30-16","responseSize":60,"executionTimeNs":102249500,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":41000,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5559:126.9368:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":4,"CS2":15,"SC4":3,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":4,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":151,"responseSize":17447,"executionTimeNs":87305600,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:47.754 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.754451Z","nanoTime":27353768374800,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:42:47.754 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:42:47.754 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:42:47.754 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 20개
2025-11-21 19:42:47.754 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 20개 (총 카메라 대수: 63대)
2025-11-21 19:42:47.754 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:42:47.823 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 서대문구  독립문로 25-1 (거리: 622m)
2025-11-21 19:42:47.823 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:42:47.823 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:42:47.823 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:42:47.823 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:42:47.824 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.823450900Z","nanoTime":27353838049600,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":69674800,"duration_ms":69,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":20,"totalCctvAfterFilter":20,"totalCameraCount":63,"filterRate":1.0,"filterExecutionTimeNs":14400,"success":true},"policeQuery":{"queryDurationNs":69167900,"found":true,"nearestAddress":"서울특별시 서대문구  독립문로 25-1","nearestDistance":621.8601203772246,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":4,"CS2":15,"SC4":3,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":4,"FD6":15,"PK6":15,"PM9":15},"placesAfterFilter":{"CT1":15,"AT4":4,"CS2":15,"SC4":3,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":4,"FD6":15,"PK6":15,"PM9":15},"totalBeforeFilter":151,"totalAfterFilter":151,"filterRate":1.0,"filterExecutionTimeNs":130700,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:47.824 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.824470800Z","nanoTime":27353838406400,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:42:47.824 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:42:47.824 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 33.35, 편의성: 43.13, 종합: 38.24
2025-11-21 19:42:47.824 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.824470800Z","nanoTime":27353838717900,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":311500,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":22.267484952846928,"policeDistance":621.8601203772246,"cctvScore":66.66666666666666,"cctvCount":20,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":33.346912152520744,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":12.0,"CS2":3.75,"SC4":6.0,"MT1":30.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":12.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":43.125,"success":true},"overallScore":38.23595607626037,"errorMessage":null,"success":true}}
2025-11-21 19:42:47.824 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.824470800Z","nanoTime":27353838904600,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:42:47.824 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:42:47.824 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 서대문구  독립문로 25-1, latitude=37.558552, longitude=126.943011, geohashId=wydm8tm)
2025-11-21 19:42:47.824 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 621.8601203772246
2025-11-21 19:42:47.826 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm8sb
2025-11-21 19:42:47.826 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:42:47.826 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.826456400Z","nanoTime":27353840837100,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1932500,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["관광명소이(가) 23m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm8sb","dataSize":20041,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20041,"errorMessage":null,"success":true}}
2025-11-21 19:42:47.826 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:42:52.306 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:42:52.306 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.572, longitude=126.9769, radius=500)
2025-11-21 19:42:52.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:42:52.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.572, longitude=126.9769, radius=500
2025-11-21 19:42:52.306 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.306552900Z","nanoTime":27358320525700,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:42:52.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:42:52.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.572, lon=126.9769
2025-11-21 19:42:52.306 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.306552900Z","nanoTime":27358320699200,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:42:52.306 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.306552900Z","nanoTime":27358320886300,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":187100,"duration_ms":0,"resultData":{"latitude":37.572,"longitude":126.9769,"precision":7,"centerHash":"wydm9rv","adjacentHashes":["wydm9rv","wydmc2j","wydmc2n","wydm9ry","wydm9rw","wydm9rt","wydm9rs","wydm9ru","wydmc2h"],"errorMessage":null,"success":true}}
2025-11-21 19:42:52.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9rv, wydmc2j, wydmc2n, wydm9ry, wydm9rw, wydm9rt, wydm9rs, wydm9ru, wydmc2h]
2025-11-21 19:42:52.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9rv
2025-11-21 19:42:52.306 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.306552900Z","nanoTime":27358321160000,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":634300,"duration_ms":0,"resultData":{"requestLatitude":37.572,"requestLongitude":126.9769,"requestRadius":500,"centerGeohashId":"wydm9rv","nineBlockGeohashes":["wydm9rv","wydmc2j","wydmc2n","wydm9ry","wydm9rw","wydm9rt","wydm9rs","wydm9ru","wydmc2h"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:42:52.306 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.306552900Z","nanoTime":27358321272000,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:42:52.307 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:42:52.307 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9rv
2025-11-21 19:42:52.307 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.6097ms)
2025-11-21 19:42:52.307 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:42:52.309 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:42:52.309 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:42:52.309 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.8802ms, 역직렬화: 0.0ms
2025-11-21 19:42:52.309 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:42:52.309 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.309642300Z","nanoTime":27358324020300,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2748300,"duration_ms":2,"resultData":{"centerGeohashId":"wydm9rv","nineBlockGeohashes":["wydm9rv","wydmc2j","wydmc2n","wydm9ry","wydm9rw","wydm9rt","wydm9rs","wydm9ru","wydmc2h"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9rv","hit":false,"valueSize":0,"l1CacheGetDurationNs":609700,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9rv","cacheKey":"data:wydm9rv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":300100},{"geohashId":"wydmc2j","cacheKey":"data:wydmc2j:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":208300},{"geohashId":"wydmc2n","cacheKey":"data:wydmc2n:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":217900},{"geohashId":"wydm9ry","cacheKey":"data:wydm9ry:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":166300},{"geohashId":"wydm9rw","cacheKey":"data:wydm9rw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":192900},{"geohashId":"wydm9rt","cacheKey":"data:wydm9rt:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":217900},{"geohashId":"wydm9rs","cacheKey":"data:wydm9rs:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":162200},{"geohashId":"wydm9ru","cacheKey":"data:wydm9ru:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":159900},{"geohashId":"wydmc2h","cacheKey":"data:wydmc2h:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":157000}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1880200,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:42:52.310 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.309642300Z","nanoTime":27358324285900,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:42:52.310 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:42:52.310 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:42:52.314 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 4건
2025-11-21 19:42:52.315 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:42:52.315 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 3개
2025-11-21 19:42:52.315 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.315556400Z","nanoTime":27358330020200,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5734300,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydm9rv","wydmc2j","wydmc2n","wydm9ry","wydm9rw","wydm9rt","wydm9rs","wydm9ru","wydmc2h"],"cctvQueryResult":{"queryGeohashIds":["wydm9rv","wydmc2j","wydmc2n","wydm9ry","wydm9rw","wydm9rt","wydm9rs","wydm9ru","wydmc2h"],"totalRowsReturned":4,"rowsPerGrid":{"wydm9rw":1,"wydm9rt":2,"wydm9rs":1},"queryExecutionTimeNs":4133000,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9rw","cacheKey":"data:wydm9rw:cctv","dataCount":1,"dataSize":135,"errorMessage":null,"success":true},{"geohashId":"wydm9rt","cacheKey":"data:wydm9rt:cctv","dataCount":2,"dataSize":241,"errorMessage":null,"success":true},{"geohashId":"wydm9rs","cacheKey":"data:wydm9rs:cctv","dataCount":1,"dataSize":124,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:42:52.315 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.315556400Z","nanoTime":27358330212700,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:42:52.315 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:42:52.315 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.572, 126.9769)
2025-11-21 19:42:52.316 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:42:52.400 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:42:52.400 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:42:52.400 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:42:52.400 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.572, 126.9769), 반경: 500m
2025-11-21 19:42:52.509 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:42:52.509 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 154건
2025-11-21 19:42:52.510 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:42:52.510 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:42:52.510 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 종로구
2025-11-21 19:42:52.510 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 미스 - DB 조회
2025-11-21 19:42:52.514 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 성공 및 캐싱 완료 - 종로구: 0.939777079
2025-11-21 19:42:52.515 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:42:52.515 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:42:52.515 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:42:52.515 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.939777079
2025-11-21 19:42:52.515 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.515347100Z","nanoTime":27358529205300,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":198992600,"duration_ms":198,"resultData":{"latitude":37.572,"longitude":126.9769,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":198844200,"addressApiResult":{"cached":false,"cacheKey":"address:37.572:126.9769","roadAddress":"서울특별시 종로구 세종대로 지하 175","jibunAddress":"서울 종로구 세종로 81-3","responseSize":74,"executionTimeNs":84020200,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":"arrest_rate:종로구","guName":"종로구","arrestRate":0.939777079,"dataFound":true,"executionTimeNs":4332700,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.572:126.9769:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":1,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":15,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":154,"responseSize":17820,"executionTimeNs":110491300,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:52.515 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.515347100Z","nanoTime":27358529468500,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:42:52.515 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:42:52.515 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:42:52.515 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 4개
2025-11-21 19:42:52.515 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 4개 (총 카메라 대수: 9대)
2025-11-21 19:42:52.515 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:42:52.585 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 종로구  사직로9길 1 (거리: 198m)
2025-11-21 19:42:52.585 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:42:52.585 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:42:52.585 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:42:52.585 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:42:52.586 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.585375Z","nanoTime":27358600012700,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":70544200,"duration_ms":70,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":4,"totalCctvAfterFilter":4,"totalCameraCount":9,"filterRate":1.0,"filterExecutionTimeNs":6900,"success":true},"policeQuery":{"queryDurationNs":70062400,"found":true,"nearestAddress":"서울특별시 종로구  사직로9길 1","nearestDistance":197.94829056886178,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":1,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":15,"FD6":15,"PK6":15,"PM9":15},"placesAfterFilter":{"CT1":15,"AT4":1,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":15,"FD6":15,"PK6":15,"PM9":15},"totalBeforeFilter":154,"totalAfterFilter":154,"filterRate":1.0,"filterExecutionTimeNs":135400,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:52.586 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.586371200Z","nanoTime":27358600318400,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:42:52.586 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:42:52.586 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 56.10, 편의성: 43.57, 종합: 49.84
2025-11-21 19:42:52.586 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.586371200Z","nanoTime":27358600628100,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":309700,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":75.25646367889227,"policeDistance":197.94829056886178,"cctvScore":13.333333333333334,"cctvCount":4,"arrestRateScore":93.9777079,"arrestRate":0.939777079,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":56.10358480700101,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":3.0,"CS2":10.026201807389977,"SC4":2.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":45.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"종로구","guPopulation":149608,"finalScore":43.57330012909928,"success":true},"overallScore":49.83844246805015,"errorMessage":null,"success":true}}
2025-11-21 19:42:52.586 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.586371200Z","nanoTime":27358600902500,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:42:52.586 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:42:52.586 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 종로구  사직로9길 1, latitude=37.572588, longitude=126.97902, geohashId=wydm9rz)
2025-11-21 19:42:52.586 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 197.94829056886178
2025-11-21 19:42:52.588 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9rv
2025-11-21 19:42:52.588 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:42:52.588 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.588372800Z","nanoTime":27358602741600,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1839100,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["지하철역이(가) 57m 내에 있습니다."],"warnings":["CCTV 설치 대수가 적은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm9rv","dataSize":19238,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19238,"errorMessage":null,"success":true}}
2025-11-21 19:42:52.588 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:42:56.810 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:42:56.810 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5403, longitude=127.0695, radius=500)
2025-11-21 19:42:56.810 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:42:56.810 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5403, longitude=127.0695, radius=500
2025-11-21 19:42:56.810 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:56.810118600Z","nanoTime":27362824638600,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:42:56.810 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:42:56.810 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5403, lon=127.0695
2025-11-21 19:42:56.810 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:56.810118600Z","nanoTime":27362824831100,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:42:56.811 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:56.811121600Z","nanoTime":27362824929100,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":98000,"duration_ms":0,"resultData":{"latitude":37.5403,"longitude":127.0695,"precision":7,"centerHash":"wydmed1","adjacentHashes":["wydmed1","wydmed3","wydmed6","wydmed4","wydme9f","wydme9c","wydme9b","wydmed0","wydmed2"],"errorMessage":null,"success":true}}
2025-11-21 19:42:56.811 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmed1, wydmed3, wydmed6, wydmed4, wydme9f, wydme9c, wydme9b, wydmed0, wydmed2]
2025-11-21 19:42:56.811 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmed1
2025-11-21 19:42:56.811 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:56.811121600Z","nanoTime":27362825134900,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":496300,"duration_ms":0,"resultData":{"requestLatitude":37.5403,"requestLongitude":127.0695,"requestRadius":500,"centerGeohashId":"wydmed1","nineBlockGeohashes":["wydmed1","wydmed3","wydmed6","wydmed4","wydme9f","wydme9c","wydme9b","wydmed0","wydmed2"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:42:56.811 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:56.811121600Z","nanoTime":27362825220000,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:42:56.811 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:42:56.811 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmed1
2025-11-21 19:42:56.811 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4911ms)
2025-11-21 19:42:56.811 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:42:56.813 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:42:56.813 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:42:56.813 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.8198ms, 역직렬화: 0.0ms
2025-11-21 19:42:56.813 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:42:56.814 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:56.813118500Z","nanoTime":27362827802300,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2582300,"duration_ms":2,"resultData":{"centerGeohashId":"wydmed1","nineBlockGeohashes":["wydmed1","wydmed3","wydmed6","wydmed4","wydme9f","wydme9c","wydme9b","wydmed0","wydmed2"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmed1","hit":false,"valueSize":0,"l1CacheGetDurationNs":491100,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmed1","cacheKey":"data:wydmed1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":312200},{"geohashId":"wydmed3","cacheKey":"data:wydmed3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":215000},{"geohashId":"wydmed6","cacheKey":"data:wydmed6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":152800},{"geohashId":"wydmed4","cacheKey":"data:wydmed4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":134800},{"geohashId":"wydme9f","cacheKey":"data:wydme9f:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":136300},{"geohashId":"wydme9c","cacheKey":"data:wydme9c:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":186200},{"geohashId":"wydme9b","cacheKey":"data:wydme9b:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":217900},{"geohashId":"wydmed0","cacheKey":"data:wydmed0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":206200},{"geohashId":"wydmed2","cacheKey":"data:wydmed2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":194700}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1819800,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:42:56.814 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:56.814127700Z","nanoTime":27362828029600,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:42:56.814 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:42:56.814 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:42:56.818 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 26건
2025-11-21 19:42:56.822 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:42:56.822 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:42:56.822 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:56.822125700Z","nanoTime":27362835999000,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":7969400,"duration_ms":7,"resultData":{"inputCctvMissGrids":["wydmed1","wydmed3","wydmed6","wydmed4","wydme9f","wydme9c","wydme9b","wydmed0","wydmed2"],"cctvQueryResult":{"queryGeohashIds":["wydmed1","wydmed3","wydmed6","wydmed4","wydme9f","wydme9c","wydme9b","wydmed0","wydmed2"],"totalRowsReturned":26,"rowsPerGrid":{"wydme9c":5,"wydmed0":2,"wydme9f":1,"wydmed1":4,"wydme9b":4,"wydmed6":2,"wydmed2":1,"wydmed3":2,"wydmed4":5},"queryExecutionTimeNs":4607400,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydme9c","cacheKey":"data:wydme9c:cctv","dataCount":5,"dataSize":551,"errorMessage":null,"success":true},{"geohashId":"wydmed0","cacheKey":"data:wydmed0:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydme9f","cacheKey":"data:wydme9f:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmed1","cacheKey":"data:wydmed1:cctv","dataCount":4,"dataSize":399,"errorMessage":null,"success":true},{"geohashId":"wydme9b","cacheKey":"data:wydme9b:cctv","dataCount":4,"dataSize":401,"errorMessage":null,"success":true},{"geohashId":"wydmed6","cacheKey":"data:wydmed6:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydmed2","cacheKey":"data:wydmed2:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmed3","cacheKey":"data:wydmed3:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydmed4","cacheKey":"data:wydmed4:cctv","dataCount":5,"dataSize":501,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:42:56.822 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:56.822125700Z","nanoTime":27362836282700,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:42:56.822 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:42:56.822 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5403, 127.0695)
2025-11-21 19:42:56.822 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:42:56.902 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:42:56.902 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:42:56.903 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:42:56.903 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5403, 127.0695), 반경: 500m
2025-11-21 19:42:56.999 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:42:56.999 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 138건
2025-11-21 19:42:57.000 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:42:57.000 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:42:57.000 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 광진구
2025-11-21 19:42:57.001 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 미스 - DB 조회
2025-11-21 19:42:57.004 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 성공 및 캐싱 완료 - 광진구: 0.672940923
2025-11-21 19:42:57.004 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:42:57.004 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:42:57.004 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:42:57.004 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.672940923
2025-11-21 19:42:57.004 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:57.004124300Z","nanoTime":27363018622000,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":182339300,"duration_ms":182,"resultData":{"latitude":37.5403,"longitude":127.0695,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":182200700,"addressApiResult":{"cached":false,"cacheKey":"address:37.5403:127.0695","roadAddress":"서울특별시 광진구 아차산로 243","jibunAddress":"서울 광진구 화양동 7-3","responseSize":70,"executionTimeNs":80928600,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":"arrest_rate:광진구","guName":"광진구","arrestRate":0.672940923,"dataFound":true,"executionTimeNs":3963300,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5403:127.0695:500","categoryCount":15,"placesByCategory":{"CT1":10,"AT4":4,"CS2":15,"SC4":0,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":0,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":138,"responseSize":16047,"executionTimeNs":97308800,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:57.005 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:57.005106Z","nanoTime":27363018869600,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:42:57.005 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:42:57.005 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:42:57.005 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 26개
2025-11-21 19:42:57.005 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 26개 (총 카메라 대수: 26대)
2025-11-21 19:42:57.005 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:42:57.076 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구 사당로17나길 4 (거리: 712m)
2025-11-21 19:42:57.076 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:42:57.076 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:42:57.076 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 12개 카테고리
2025-11-21 19:42:57.076 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:42:57.076 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:57.076104600Z","nanoTime":27363090284900,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":71415300,"duration_ms":71,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":26,"totalCctvAfterFilter":26,"totalCameraCount":26,"filterRate":1.0,"filterExecutionTimeNs":18800,"success":true},"policeQuery":{"queryDurationNs":70777300,"found":true,"nearestAddress":"서울특별시 동작구 사당로17나길 4","nearestDistance":712.1978057885286,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":10,"AT4":4,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SW8":2,"FD6":15,"PK6":15,"MT1":2,"PM9":15},"placesAfterFilter":{"CT1":10,"AT4":4,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SW8":2,"FD6":15,"PK6":15,"MT1":2,"PM9":15},"totalBeforeFilter":138,"totalAfterFilter":138,"filterRate":1.0,"filterExecutionTimeNs":161700,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:57.076 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:57.076104600Z","nanoTime":27363090627600,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:42:57.076 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:42:57.077 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 58.15, 편의성: 46.36, 종합: 52.25
2025-11-21 19:42:57.077 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:57.077108900Z","nanoTime":27363091007600,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":380000,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":10.975274276433922,"policeDistance":712.1978057885286,"cctvScore":86.66666666666667,"cctvCount":26,"arrestRateScore":67.2940923,"arrestRate":0.672940923,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":58.147476639596846,"success":true},"convenienceScore":{"categoryScores":{"CT1":40.0,"AT4":12.0,"BK9":75.0,"HP8":100.0,"CS2":4.339624824968466,"AC5":15.0,"CE7":30.0,"SW8":100.0,"FD6":15.0,"PK6":45.0,"MT1":20.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"광진구","guPopulation":345652,"finalScore":46.36163540208071,"success":true},"overallScore":52.25455602083878,"errorMessage":null,"success":true}}
2025-11-21 19:42:57.077 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:57.077108900Z","nanoTime":27363091224700,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:42:57.077 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:42:57.077 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구 사당로17나길 4, latitude=37.546541, longitude=127.071316, geohashId=wydmee4)
2025-11-21 19:42:57.077 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 712.1978057885286
2025-11-21 19:42:57.079 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmed1
2025-11-21 19:42:57.079 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:42:57.079 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:57.079108500Z","nanoTime":27363093197600,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1972900,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["학원이(가) 28m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmed1","dataSize":18753,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":18753,"errorMessage":null,"success":true}}
2025-11-21 19:42:57.079 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:43:01.012 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:43:01.012 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5344, longitude=126.9944, radius=500)
2025-11-21 19:43:01.012 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:43:01.012 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5344, longitude=126.9944, radius=500
2025-11-21 19:43:01.013 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.013843100Z","nanoTime":27367027603800,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:43:01.013 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:43:01.013 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5344, lon=126.9944
2025-11-21 19:43:01.013 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.013843100Z","nanoTime":27367027814700,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:43:01.013 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.013843100Z","nanoTime":27367027914300,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":99600,"duration_ms":0,"resultData":{"latitude":37.5344,"longitude":126.9944,"precision":7,"centerHash":"wydm9bf","adjacentHashes":["wydm9bf","wydm9c4","wydm9c5","wydm9bg","wydm9be","wydm9bd","wydm9b9","wydm9bc","wydm9c1"],"errorMessage":null,"success":true}}
2025-11-21 19:43:01.013 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9bf, wydm9c4, wydm9c5, wydm9bg, wydm9be, wydm9bd, wydm9b9, wydm9bc, wydm9c1]
2025-11-21 19:43:01.013 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9bf
2025-11-21 19:43:01.013 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.013843100Z","nanoTime":27367028064600,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":460800,"duration_ms":0,"resultData":{"requestLatitude":37.5344,"requestLongitude":126.9944,"requestRadius":500,"centerGeohashId":"wydm9bf","nineBlockGeohashes":["wydm9bf","wydm9c4","wydm9c5","wydm9bg","wydm9be","wydm9bd","wydm9b9","wydm9bc","wydm9c1"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:43:01.013 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.013843100Z","nanoTime":27367028148300,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:43:01.013 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:43:01.013 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9bf
2025-11-21 19:43:01.014 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5419ms)
2025-11-21 19:43:01.014 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:43:01.016 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:43:01.016 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:43:01.016 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.9489ms, 역직렬화: 0.0ms
2025-11-21 19:43:01.016 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:43:01.016 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.016823200Z","nanoTime":27367030939600,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2791300,"duration_ms":2,"resultData":{"centerGeohashId":"wydm9bf","nineBlockGeohashes":["wydm9bf","wydm9c4","wydm9c5","wydm9bg","wydm9be","wydm9bd","wydm9b9","wydm9bc","wydm9c1"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9bf","hit":false,"valueSize":0,"l1CacheGetDurationNs":541900,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9bf","cacheKey":"data:wydm9bf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":291600},{"geohashId":"wydm9c4","cacheKey":"data:wydm9c4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":249300},{"geohashId":"wydm9c5","cacheKey":"data:wydm9c5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":247100},{"geohashId":"wydm9bg","cacheKey":"data:wydm9bg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":250000},{"geohashId":"wydm9be","cacheKey":"data:wydm9be:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":186900},{"geohashId":"wydm9bd","cacheKey":"data:wydm9bd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":178700},{"geohashId":"wydm9b9","cacheKey":"data:wydm9b9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":174800},{"geohashId":"wydm9bc","cacheKey":"data:wydm9bc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":156400},{"geohashId":"wydm9c1","cacheKey":"data:wydm9c1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":139800}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1948900,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:43:01.016 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.016823200Z","nanoTime":27367031144900,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:43:01.016 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:43:01.016 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:43:01.021 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 19건
2025-11-21 19:43:01.023 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:43:01.023 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:43:01.024 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.023828600Z","nanoTime":27367038531700,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":7386800,"duration_ms":7,"resultData":{"inputCctvMissGrids":["wydm9bf","wydm9c4","wydm9c5","wydm9bg","wydm9be","wydm9bd","wydm9b9","wydm9bc","wydm9c1"],"cctvQueryResult":{"queryGeohashIds":["wydm9bf","wydm9c4","wydm9c5","wydm9bg","wydm9be","wydm9bd","wydm9b9","wydm9bc","wydm9c1"],"totalRowsReturned":19,"rowsPerGrid":{"wydm9bg":3,"wydm9bf":2,"wydm9be":3,"wydm9bd":2,"wydm9c5":1,"wydm9b9":3,"wydm9bc":2,"wydm9c4":1,"wydm9c1":2},"queryExecutionTimeNs":4644500,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9bg","cacheKey":"data:wydm9bg:cctv","dataCount":3,"dataSize":431,"errorMessage":null,"success":true},{"geohashId":"wydm9bf","cacheKey":"data:wydm9bf:cctv","dataCount":2,"dataSize":289,"errorMessage":null,"success":true},{"geohashId":"wydm9be","cacheKey":"data:wydm9be:cctv","dataCount":3,"dataSize":442,"errorMessage":null,"success":true},{"geohashId":"wydm9bd","cacheKey":"data:wydm9bd:cctv","dataCount":2,"dataSize":290,"errorMessage":null,"success":true},{"geohashId":"wydm9c5","cacheKey":"data:wydm9c5:cctv","dataCount":1,"dataSize":147,"errorMessage":null,"success":true},{"geohashId":"wydm9b9","cacheKey":"data:wydm9b9:cctv","dataCount":3,"dataSize":431,"errorMessage":null,"success":true},{"geohashId":"wydm9bc","cacheKey":"data:wydm9bc:cctv","dataCount":2,"dataSize":296,"errorMessage":null,"success":true},{"geohashId":"wydm9c4","cacheKey":"data:wydm9c4:cctv","dataCount":1,"dataSize":145,"errorMessage":null,"success":true},{"geohashId":"wydm9c1","cacheKey":"data:wydm9c1:cctv","dataCount":2,"dataSize":292,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:43:01.024 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.024823900Z","nanoTime":27367038769200,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:43:01.024 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:43:01.024 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5344, 126.9944)
2025-11-21 19:43:01.024 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:43:01.106 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:43:01.106 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:43:01.106 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:43:01.106 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5344, 126.9944), 반경: 500m
2025-11-21 19:43:01.191 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:43:01.191 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 148건
2025-11-21 19:43:01.192 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:43:01.192 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:43:01.192 [http-nio-8185-exec-1] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:43:01.192 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:43:01.192 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:43:01.192 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:43:01.192 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:43:01.192 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.192505600Z","nanoTime":27367207103300,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":168334100,"duration_ms":168,"resultData":{"latitude":37.5344,"longitude":126.9944,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":168173500,"addressApiResult":{"cached":false,"cacheKey":"address:37.5344:126.9944","roadAddress":"주소 없음","jibunAddress":"서울 용산구 이태원동 127-10","responseSize":61,"executionTimeNs":81384900,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":42200,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5344:126.9944:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":7,"CS2":15,"SC4":1,"MT1":0,"BK9":15,"HP8":15,"AC5":14,"CE7":15,"SW8":1,"PO3":15,"FD6":15,"PK6":15,"OL7":0,"PM9":5},"totalPlaces":148,"responseSize":17040,"executionTimeNs":86746400,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:01.193 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.193521900Z","nanoTime":27367207327700,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:43:01.193 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:43:01.193 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:43:01.193 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 19개
2025-11-21 19:43:01.193 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 19개 (총 카메라 대수: 66대)
2025-11-21 19:43:01.193 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:43:01.265 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: "서울특별시 용산구  후암로16나길 17, 용중지구대" (거리: 10m)
2025-11-21 19:43:01.265 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:43:01.265 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:43:01.266 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 19:43:01.266 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:43:01.266 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.266502500Z","nanoTime":27367280357400,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":73029700,"duration_ms":73,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":19,"totalCctvAfterFilter":19,"totalCameraCount":66,"filterRate":1.0,"filterExecutionTimeNs":11400,"success":true},"policeQuery":{"queryDurationNs":72478500,"found":true,"nearestAddress":"\"서울특별시 용산구  후암로16나길 17, 용중지구대\"","nearestDistance":9.921457375807954,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":7,"CS2":15,"SC4":1,"BK9":15,"HP8":15,"AC5":14,"CE7":15,"SW8":1,"PO3":15,"FD6":15,"PK6":15,"PM9":5},"placesAfterFilter":{"CT1":15,"AT4":7,"CS2":15,"SC4":1,"BK9":15,"HP8":15,"AC5":14,"CE7":15,"SW8":1,"PO3":15,"FD6":15,"PK6":15,"PM9":5},"totalBeforeFilter":148,"totalAfterFilter":148,"filterRate":1.0,"filterExecutionTimeNs":169700,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:01.266 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.266502500Z","nanoTime":27367280646200,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:43:01.266 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:43:01.266 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 54.96, 편의성: 42.37, 종합: 48.66
2025-11-21 19:43:01.266 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.266502500Z","nanoTime":27367280984900,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":338700,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":98.75981782802401,"policeDistance":9.921457375807954,"cctvScore":63.33333333333333,"cctvCount":19,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":54.96127868174054,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":21.0,"CS2":3.75,"SC4":2.0,"BK9":75.0,"HP8":100.0,"AC5":14.0,"CE7":30.0,"SW8":100.0,"PO3":45.0,"FD6":15.0,"PK6":45.0,"PM9":40.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":42.36538461538461,"success":true},"overallScore":48.663331648562576,"errorMessage":null,"success":true}}
2025-11-21 19:43:01.266 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.266502500Z","nanoTime":27367281187600,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:43:01.266 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:43:01.266 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address="서울특별시 용산구  후암로16나길 17, 용중지구대", latitude=37.534311, longitude=126.994408, geohashId=wydm9bf)
2025-11-21 19:43:01.267 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 9.921457375807954
2025-11-21 19:43:01.268 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9bf
2025-11-21 19:43:01.268 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:43:01.268 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.268510300Z","nanoTime":27367283052300,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1864700,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["약국이(가) 13m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm9bf","dataSize":20540,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20540,"errorMessage":null,"success":true}}
2025-11-21 19:43:01.269 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:43:05.717 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:43:05.717 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5446, longitude=127.0558, radius=500)
2025-11-21 19:43:05.717 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:43:05.717 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5446, longitude=127.0558, radius=500
2025-11-21 19:43:05.717 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.717838900Z","nanoTime":27371732156900,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:43:05.717 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:43:05.717 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5446, lon=127.0558
2025-11-21 19:43:05.717 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.717838900Z","nanoTime":27371732290900,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:43:05.717 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.717838900Z","nanoTime":27371732393700,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":102800,"duration_ms":0,"resultData":{"latitude":37.5446,"longitude":127.0558,"precision":7,"centerHash":"wydme4z","adjacentHashes":["wydme4z","wydme5p","wydme70","wydme6b","wydme68","wydme4x","wydme4w","wydme4y","wydme5n"],"errorMessage":null,"success":true}}
2025-11-21 19:43:05.717 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydme4z, wydme5p, wydme70, wydme6b, wydme68, wydme4x, wydme4w, wydme4y, wydme5n]
2025-11-21 19:43:05.718 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydme4z
2025-11-21 19:43:05.718 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.718821200Z","nanoTime":27371732621500,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":464600,"duration_ms":0,"resultData":{"requestLatitude":37.5446,"requestLongitude":127.0558,"requestRadius":500,"centerGeohashId":"wydme4z","nineBlockGeohashes":["wydme4z","wydme5p","wydme70","wydme6b","wydme68","wydme4x","wydme4w","wydme4y","wydme5n"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:43:05.718 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.718821200Z","nanoTime":27371732751800,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:43:05.718 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:43:05.718 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydme4z
2025-11-21 19:43:05.718 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4632ms)
2025-11-21 19:43:05.718 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:43:05.720 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:43:05.720 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:43:05.720 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.5079ms, 역직렬화: 0.0ms
2025-11-21 19:43:05.720 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:43:05.720 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.720822200Z","nanoTime":27371734992800,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2241000,"duration_ms":2,"resultData":{"centerGeohashId":"wydme4z","nineBlockGeohashes":["wydme4z","wydme5p","wydme70","wydme6b","wydme68","wydme4x","wydme4w","wydme4y","wydme5n"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydme4z","hit":false,"valueSize":0,"l1CacheGetDurationNs":463200,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydme4z","cacheKey":"data:wydme4z:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":225800},{"geohashId":"wydme5p","cacheKey":"data:wydme5p:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":252800},{"geohashId":"wydme70","cacheKey":"data:wydme70:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":190400},{"geohashId":"wydme6b","cacheKey":"data:wydme6b:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":163100},{"geohashId":"wydme68","cacheKey":"data:wydme68:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":130300},{"geohashId":"wydme4x","cacheKey":"data:wydme4x:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":123900},{"geohashId":"wydme4w","cacheKey":"data:wydme4w:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":123500},{"geohashId":"wydme4y","cacheKey":"data:wydme4y:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":119700},{"geohashId":"wydme5n","cacheKey":"data:wydme5n:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":118900}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1507900,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:43:05.720 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.720822200Z","nanoTime":27371735173600,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:43:05.720 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:43:05.720 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:43:05.726 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 21건
2025-11-21 19:43:05.729 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:43:05.729 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:43:05.730 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.729825200Z","nanoTime":27371744301000,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":9127400,"duration_ms":9,"resultData":{"inputCctvMissGrids":["wydme4z","wydme5p","wydme70","wydme6b","wydme68","wydme4x","wydme4w","wydme4y","wydme5n"],"cctvQueryResult":{"queryGeohashIds":["wydme4z","wydme5p","wydme70","wydme6b","wydme68","wydme4x","wydme4w","wydme4y","wydme5n"],"totalRowsReturned":21,"rowsPerGrid":{"wydme6b":1,"wydme4z":1,"wydme5n":3,"wydme70":2,"wydme68":3,"wydme4w":3,"wydme4x":3,"wydme4y":5},"queryExecutionTimeNs":5476700,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydme6b","cacheKey":"data:wydme6b:cctv","dataCount":1,"dataSize":136,"errorMessage":null,"success":true},{"geohashId":"wydme4z","cacheKey":"data:wydme4z:cctv","dataCount":1,"dataSize":136,"errorMessage":null,"success":true},{"geohashId":"wydme5n","cacheKey":"data:wydme5n:cctv","dataCount":3,"dataSize":403,"errorMessage":null,"success":true},{"geohashId":"wydme70","cacheKey":"data:wydme70:cctv","dataCount":2,"dataSize":265,"errorMessage":null,"success":true},{"geohashId":"wydme68","cacheKey":"data:wydme68:cctv","dataCount":3,"dataSize":336,"errorMessage":null,"success":true},{"geohashId":"wydme4w","cacheKey":"data:wydme4w:cctv","dataCount":3,"dataSize":404,"errorMessage":null,"success":true},{"geohashId":"wydme4x","cacheKey":"data:wydme4x:cctv","dataCount":3,"dataSize":400,"errorMessage":null,"success":true},{"geohashId":"wydme4y","cacheKey":"data:wydme4y:cctv","dataCount":5,"dataSize":642,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:43:05.730 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.730830300Z","nanoTime":27371744649900,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:43:05.730 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:43:05.730 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5446, 127.0558)
2025-11-21 19:43:05.730 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:43:05.789 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:43:05.789 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:43:05.790 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:43:05.790 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5446, 127.0558), 반경: 500m
2025-11-21 19:43:05.871 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:43:05.871 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 138건
2025-11-21 19:43:05.872 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:43:05.872 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:43:05.872 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 19:43:05.872 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 미스 - DB 조회
2025-11-21 19:43:05.875 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 성공 및 캐싱 완료 - 성동구: 0.745164096
2025-11-21 19:43:05.875 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:43:05.875 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:43:05.875 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:43:05.875 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 19:43:05.876 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.875940800Z","nanoTime":27371890596000,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":145946100,"duration_ms":145,"resultData":{"latitude":37.5446,"longitude":127.0558,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":145783700,"addressApiResult":{"cached":false,"cacheKey":"address:37.5446:127.0558","roadAddress":"서울특별시 성동구 아차산로 100","jibunAddress":"서울 성동구 성수동2가 300-1","responseSize":74,"executionTimeNs":59369900,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":3244700,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5446:127.0558:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":4,"CS2":15,"SC4":0,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":15,"OL7":1,"PM9":8},"totalPlaces":138,"responseSize":15916,"executionTimeNs":83169100,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:05.876 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.876946700Z","nanoTime":27371890919300,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:43:05.876 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:43:05.876 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:43:05.876 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 21개
2025-11-21 19:43:05.876 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 21개 (총 카메라 대수: 67대)
2025-11-21 19:43:05.876 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:43:05.945 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구  당산로 221 (거리: 406m)
2025-11-21 19:43:05.945 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:43:05.945 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:43:05.945 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:43:05.945 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:43:05.946 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.945948200Z","nanoTime":27371960622300,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":69703000,"duration_ms":69,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":21,"totalCctvAfterFilter":21,"totalCameraCount":67,"filterRate":1.0,"filterExecutionTimeNs":26000,"success":true},"policeQuery":{"queryDurationNs":69148800,"found":true,"nearestAddress":"서울특별시 영등포구  당산로 221","nearestDistance":405.63099651108564,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":4,"CS2":15,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":15,"OL7":1,"PM9":8},"placesAfterFilter":{"CT1":15,"AT4":4,"CS2":15,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":15,"OL7":1,"PM9":8},"totalBeforeFilter":138,"totalAfterFilter":138,"filterRate":1.0,"filterExecutionTimeNs":147800,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:05.946 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.946942600Z","nanoTime":27371960945600,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:43:05.946 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:43:05.946 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 65.14, 편의성: 38.95, 종합: 52.05
2025-11-21 19:43:05.946 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.946942600Z","nanoTime":27371961298000,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":352400,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":49.296125436114295,"policeDistance":405.63099651108564,"cctvScore":70.0,"cctvCount":21,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":65.14376051083428,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":12.0,"CS2":5.333162672127825,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":64.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":38.952368762294846,"success":true},"overallScore":52.04806463656456,"errorMessage":null,"success":true}}
2025-11-21 19:43:05.946 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.946942600Z","nanoTime":27371961543900,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:43:05.947 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:43:05.947 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구  당산로 221, latitude=37.548221, longitude=127.055242, geohashId=wydme5q)
2025-11-21 19:43:05.947 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 405.63099651108564
2025-11-21 19:43:05.948 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydme4z
2025-11-21 19:43:05.948 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:43:05.950 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.948944800Z","nanoTime":27371963693500,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":2149600,"duration_ms":2,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["지하철역이(가) 24m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydme4z","dataSize":19088,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19088,"errorMessage":null,"success":true}}
2025-11-21 19:43:05.950 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:43:10.902 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:43:10.902 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5709, longitude=126.992, radius=500)
2025-11-21 19:43:10.902 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:43:10.902 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5709, longitude=126.992, radius=500
2025-11-21 19:43:10.902 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:10.902610200Z","nanoTime":27376916870500,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:43:10.902 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:43:10.902 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5709, lon=126.992
2025-11-21 19:43:10.902 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:10.902610200Z","nanoTime":27376917007100,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:43:10.902 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:10.902610200Z","nanoTime":27376917105000,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":97900,"duration_ms":0,"resultData":{"latitude":37.5709,"longitude":126.992,"precision":7,"centerHash":"wydm9z8","adjacentHashes":["wydm9z8","wydm9zb","wydm9zc","wydm9z9","wydm9z3","wydm9z2","wydm9xr","wydm9xx","wydm9xz"],"errorMessage":null,"success":true}}
2025-11-21 19:43:10.902 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9z8, wydm9zb, wydm9zc, wydm9z9, wydm9z3, wydm9z2, wydm9xr, wydm9xx, wydm9xz]
2025-11-21 19:43:10.902 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9z8
2025-11-21 19:43:10.903 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:10.902610200Z","nanoTime":27376917326800,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":456300,"duration_ms":0,"resultData":{"requestLatitude":37.5709,"requestLongitude":126.992,"requestRadius":500,"centerGeohashId":"wydm9z8","nineBlockGeohashes":["wydm9z8","wydm9zb","wydm9zc","wydm9z9","wydm9z3","wydm9z2","wydm9xr","wydm9xx","wydm9xz"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:43:10.903 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:10.903609100Z","nanoTime":27376917461500,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:43:10.903 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:43:10.903 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9z8
2025-11-21 19:43:10.903 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.6074ms)
2025-11-21 19:43:10.903 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:43:10.906 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:43:10.906 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:43:10.906 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.6617ms, 역직렬화: 0.0ms
2025-11-21 19:43:10.906 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:43:10.907 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:10.906877Z","nanoTime":27376921040800,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3579300,"duration_ms":3,"resultData":{"centerGeohashId":"wydm9z8","nineBlockGeohashes":["wydm9z8","wydm9zb","wydm9zc","wydm9z9","wydm9z3","wydm9z2","wydm9xr","wydm9xx","wydm9xz"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9z8","hit":false,"valueSize":0,"l1CacheGetDurationNs":607400,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9z8","cacheKey":"data:wydm9z8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":453100},{"geohashId":"wydm9zb","cacheKey":"data:wydm9zb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":325400},{"geohashId":"wydm9zc","cacheKey":"data:wydm9zc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":334100},{"geohashId":"wydm9z9","cacheKey":"data:wydm9z9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":303400},{"geohashId":"wydm9z3","cacheKey":"data:wydm9z3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":288000},{"geohashId":"wydm9z2","cacheKey":"data:wydm9z2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":231700},{"geohashId":"wydm9xr","cacheKey":"data:wydm9xr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":213800},{"geohashId":"wydm9xx","cacheKey":"data:wydm9xx:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":221900},{"geohashId":"wydm9xz","cacheKey":"data:wydm9xz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":194500}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2661700,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:43:10.907 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:10.907419800Z","nanoTime":27376921360000,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:43:10.907 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:43:10.907 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:43:10.912 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 20건
2025-11-21 19:43:10.915 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:43:10.915 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:43:10.915 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:10.915803600Z","nanoTime":27376929783700,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":8423700,"duration_ms":8,"resultData":{"inputCctvMissGrids":["wydm9z8","wydm9zb","wydm9zc","wydm9z9","wydm9z3","wydm9z2","wydm9xr","wydm9xx","wydm9xz"],"cctvQueryResult":{"queryGeohashIds":["wydm9z8","wydm9zb","wydm9zc","wydm9z9","wydm9z3","wydm9z2","wydm9xr","wydm9xx","wydm9xz"],"totalRowsReturned":20,"rowsPerGrid":{"wydm9xz":5,"wydm9z3":2,"wydm9z2":2,"wydm9zb":4,"wydm9xr":2,"wydm9xx":1,"wydm9z9":2,"wydm9z8":2},"queryExecutionTimeNs":4915500,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9xz","cacheKey":"data:wydm9xz:cctv","dataCount":5,"dataSize":639,"errorMessage":null,"success":true},{"geohashId":"wydm9z3","cacheKey":"data:wydm9z3:cctv","dataCount":2,"dataSize":258,"errorMessage":null,"success":true},{"geohashId":"wydm9z2","cacheKey":"data:wydm9z2:cctv","dataCount":2,"dataSize":226,"errorMessage":null,"success":true},{"geohashId":"wydm9zb","cacheKey":"data:wydm9zb:cctv","dataCount":4,"dataSize":483,"errorMessage":null,"success":true},{"geohashId":"wydm9xr","cacheKey":"data:wydm9xr:cctv","dataCount":2,"dataSize":226,"errorMessage":null,"success":true},{"geohashId":"wydm9xx","cacheKey":"data:wydm9xx:cctv","dataCount":1,"dataSize":132,"errorMessage":null,"success":true},{"geohashId":"wydm9z9","cacheKey":"data:wydm9z9:cctv","dataCount":2,"dataSize":231,"errorMessage":null,"success":true},{"geohashId":"wydm9z8","cacheKey":"data:wydm9z8:cctv","dataCount":2,"dataSize":241,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:43:10.916 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:10.915803600Z","nanoTime":27376930059600,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:43:10.916 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:43:10.916 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5709, 126.992)
2025-11-21 19:43:10.916 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:43:10.967 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:43:10.967 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:43:10.967 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:43:10.967 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5709, 126.992), 반경: 500m
2025-11-21 19:43:11.053 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:43:11.053 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 152건
2025-11-21 19:43:11.054 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:43:11.055 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:43:11.055 [http-nio-8185-exec-6] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:43:11.055 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:43:11.055 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:43:11.055 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:43:11.055 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:43:11.055 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:11.055694900Z","nanoTime":27377069603500,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":139543900,"duration_ms":139,"resultData":{"latitude":37.5709,"longitude":126.992,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":139356800,"addressApiResult":{"cached":false,"cacheKey":"address:37.5709:126.992","roadAddress":"주소 없음","jibunAddress":"서울 종로구 묘동 20-5","responseSize":57,"executionTimeNs":51738900,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":73400,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5709:126.992:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":14,"CS2":15,"SC4":0,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":5,"FD6":15,"PK6":15,"OL7":0,"PM9":9},"totalPlaces":152,"responseSize":17628,"executionTimeNs":87544500,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:11.055 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:11.055694900Z","nanoTime":27377069955100,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:43:11.055 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:43:11.055 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:43:11.055 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 20개
2025-11-21 19:43:11.055 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 20개 (총 카메라 대수: 45대)
2025-11-21 19:43:11.055 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:43:11.124 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 종로구  종로17길 4 종로2가파출소 (거리: 275m)
2025-11-21 19:43:11.124 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:43:11.124 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:43:11.124 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 12개 카테고리
2025-11-21 19:43:11.124 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:43:11.124 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:11.124714300Z","nanoTime":27377139104500,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":69149400,"duration_ms":69,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":20,"totalCctvAfterFilter":20,"totalCameraCount":45,"filterRate":1.0,"filterExecutionTimeNs":15900,"success":true},"policeQuery":{"queryDurationNs":68640500,"found":true,"nearestAddress":"서울특별시 종로구  종로17길 4 종로2가파출소","nearestDistance":274.91169467788285,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":14,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SW8":4,"PO3":5,"FD6":15,"PK6":15,"PM9":9},"placesAfterFilter":{"CT1":15,"AT4":14,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SW8":4,"PO3":5,"FD6":15,"PK6":15,"PM9":9},"totalBeforeFilter":152,"totalAfterFilter":152,"filterRate":1.0,"filterExecutionTimeNs":142300,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:11.124 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:11.124714300Z","nanoTime":27377139310400,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:43:11.124 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:43:11.125 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 46.36, 편의성: 47.73, 종합: 47.04
2025-11-21 19:43:11.125 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:11.125712200Z","nanoTime":27377139632700,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":322300,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":65.63603816526464,"policeDistance":274.91169467788285,"cctvScore":66.66666666666666,"cctvCount":20,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":46.35747811624606,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":42.0,"BK9":75.0,"HP8":100.0,"CS2":3.75,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":15.0,"FD6":15.0,"PK6":45.0,"PM9":72.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":47.729166666666664,"success":true},"overallScore":47.04332239145636,"errorMessage":null,"success":true}}
2025-11-21 19:43:11.125 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:11.125712200Z","nanoTime":27377139813000,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:43:11.125 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:43:11.125 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 종로구  종로17길 4 종로2가파출소, latitude=37.570504, longitude=126.988921, geohashId=wydm9xw)
2025-11-21 19:43:11.125 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 274.91169467788285
2025-11-21 19:43:11.126 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9z8
2025-11-21 19:43:11.126 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:43:11.126 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:11.126712500Z","nanoTime":27377141192300,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1379300,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["병원이(가) 27m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm9z8","dataSize":20168,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20168,"errorMessage":null,"success":true}}
2025-11-21 19:43:11.126 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:43:15.217 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:43:15.217 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5276, longitude=127.0397, radius=500)
2025-11-21 19:43:15.218 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:43:15.218 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5276, longitude=127.0397, radius=500
2025-11-21 19:43:15.218 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.218468600Z","nanoTime":27381232291900,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:43:15.218 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:43:15.218 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5276, lon=127.0397
2025-11-21 19:43:15.218 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.218468600Z","nanoTime":27381232438500,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:43:15.218 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.218468600Z","nanoTime":27381232616500,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":178000,"duration_ms":0,"resultData":{"latitude":37.5276,"longitude":127.0397,"precision":7,"centerHash":"wydm6ze","adjacentHashes":["wydm6ze","wydm6zg","wydm6zu","wydm6zs","wydm6zk","wydm6z7","wydm6z6","wydm6zd","wydm6zf"],"errorMessage":null,"success":true}}
2025-11-21 19:43:15.218 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm6ze, wydm6zg, wydm6zu, wydm6zs, wydm6zk, wydm6z7, wydm6z6, wydm6zd, wydm6zf]
2025-11-21 19:43:15.218 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm6ze
2025-11-21 19:43:15.218 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.218468600Z","nanoTime":27381232813300,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":521400,"duration_ms":0,"resultData":{"requestLatitude":37.5276,"requestLongitude":127.0397,"requestRadius":500,"centerGeohashId":"wydm6ze","nineBlockGeohashes":["wydm6ze","wydm6zg","wydm6zu","wydm6zs","wydm6zk","wydm6z7","wydm6z6","wydm6zd","wydm6zf"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:43:15.218 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.218468600Z","nanoTime":27381232882900,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:43:15.218 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:43:15.218 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm6ze
2025-11-21 19:43:15.219 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5818ms)
2025-11-21 19:43:15.219 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:43:15.220 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:43:15.220 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:43:15.220 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.4861ms, 역직렬화: 0.0ms
2025-11-21 19:43:15.220 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:43:15.221 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.221469Z","nanoTime":27381235220800,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2337900,"duration_ms":2,"resultData":{"centerGeohashId":"wydm6ze","nineBlockGeohashes":["wydm6ze","wydm6zg","wydm6zu","wydm6zs","wydm6zk","wydm6z7","wydm6z6","wydm6zd","wydm6zf"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm6ze","hit":false,"valueSize":0,"l1CacheGetDurationNs":581800,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm6ze","cacheKey":"data:wydm6ze:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":249400},{"geohashId":"wydm6zg","cacheKey":"data:wydm6zg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":204700},{"geohashId":"wydm6zu","cacheKey":"data:wydm6zu:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":145700},{"geohashId":"wydm6zs","cacheKey":"data:wydm6zs:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":147100},{"geohashId":"wydm6zk","cacheKey":"data:wydm6zk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":151700},{"geohashId":"wydm6z7","cacheKey":"data:wydm6z7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":141300},{"geohashId":"wydm6z6","cacheKey":"data:wydm6z6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":130500},{"geohashId":"wydm6zd","cacheKey":"data:wydm6zd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":130500},{"geohashId":"wydm6zf","cacheKey":"data:wydm6zf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":127700}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1486100,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:43:15.221 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.221469Z","nanoTime":27381235411800,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:43:15.221 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:43:15.221 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:43:15.226 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 48건
2025-11-21 19:43:15.229 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:43:15.229 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:43:15.230 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.229468900Z","nanoTime":27381244128400,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":8716600,"duration_ms":8,"resultData":{"inputCctvMissGrids":["wydm6ze","wydm6zg","wydm6zu","wydm6zs","wydm6zk","wydm6z7","wydm6z6","wydm6zd","wydm6zf"],"cctvQueryResult":{"queryGeohashIds":["wydm6ze","wydm6zg","wydm6zu","wydm6zs","wydm6zk","wydm6z7","wydm6z6","wydm6zd","wydm6zf"],"totalRowsReturned":48,"rowsPerGrid":{"wydm6z6":3,"wydm6zf":3,"wydm6ze":9,"wydm6zu":3,"wydm6zd":6,"wydm6zs":6,"wydm6z7":6,"wydm6zg":6,"wydm6zk":6},"queryExecutionTimeNs":5474100,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm6z6","cacheKey":"data:wydm6z6:cctv","dataCount":3,"dataSize":406,"errorMessage":null,"success":true},{"geohashId":"wydm6zf","cacheKey":"data:wydm6zf:cctv","dataCount":3,"dataSize":409,"errorMessage":null,"success":true},{"geohashId":"wydm6ze","cacheKey":"data:wydm6ze:cctv","dataCount":9,"dataSize":1225,"errorMessage":null,"success":true},{"geohashId":"wydm6zu","cacheKey":"data:wydm6zu:cctv","dataCount":3,"dataSize":406,"errorMessage":null,"success":true},{"geohashId":"wydm6zd","cacheKey":"data:wydm6zd:cctv","dataCount":6,"dataSize":823,"errorMessage":null,"success":true},{"geohashId":"wydm6zs","cacheKey":"data:wydm6zs:cctv","dataCount":6,"dataSize":805,"errorMessage":null,"success":true},{"geohashId":"wydm6z7","cacheKey":"data:wydm6z7:cctv","dataCount":6,"dataSize":814,"errorMessage":null,"success":true},{"geohashId":"wydm6zg","cacheKey":"data:wydm6zg:cctv","dataCount":6,"dataSize":814,"errorMessage":null,"success":true},{"geohashId":"wydm6zk","cacheKey":"data:wydm6zk:cctv","dataCount":6,"dataSize":808,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:43:15.230 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.230468300Z","nanoTime":27381244526300,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:43:15.230 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:43:15.230 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5276, 127.0397)
2025-11-21 19:43:15.230 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:43:15.308 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:43:15.308 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:43:15.309 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:43:15.309 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5276, 127.0397), 반경: 500m
2025-11-21 19:43:15.397 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:43:15.397 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 146건
2025-11-21 19:43:15.398 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:43:15.399 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:43:15.399 [http-nio-8185-exec-5] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:43:15.399 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:43:15.399 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:43:15.399 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:43:15.399 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:43:15.399 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.399584Z","nanoTime":27381413460600,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":168934300,"duration_ms":168,"resultData":{"latitude":37.5276,"longitude":127.0397,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":168779600,"addressApiResult":{"cached":false,"cacheKey":"address:37.5276:127.0397","roadAddress":"주소 없음","jibunAddress":"서울 강남구 신사동 668-33","responseSize":60,"executionTimeNs":78300300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":28500,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5276:127.0397:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":6,"CS2":15,"SC4":2,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":1,"FD6":15,"PK6":15,"OL7":0,"PM9":14},"totalPlaces":146,"responseSize":16938,"executionTimeNs":90450800,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:15.399 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.399584Z","nanoTime":27381413675800,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:43:15.399 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:43:15.399 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:43:15.399 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 48개
2025-11-21 19:43:15.399 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 48개 (총 카메라 대수: 141대)
2025-11-21 19:43:15.399 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:43:15.480 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 강남구 학동로 169 (거리: 409m)
2025-11-21 19:43:15.480 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:43:15.480 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:43:15.480 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:43:15.480 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:43:15.480 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.480184700Z","nanoTime":27381494363500,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":80687700,"duration_ms":80,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":48,"totalCctvAfterFilter":48,"totalCameraCount":141,"filterRate":1.0,"filterExecutionTimeNs":19600,"success":true},"policeQuery":{"queryDurationNs":80169000,"found":true,"nearestAddress":"서울특별시 강남구 학동로 169","nearestDistance":408.97969932762777,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":6,"CS2":15,"SC4":2,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":1,"FD6":15,"PK6":15,"PM9":14},"placesAfterFilter":{"CT1":15,"AT4":6,"CS2":15,"SC4":2,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":1,"FD6":15,"PK6":15,"PM9":14},"totalBeforeFilter":146,"totalAfterFilter":146,"filterRate":1.0,"filterExecutionTimeNs":177800,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:15.480 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.480184700Z","nanoTime":27381494635800,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:43:15.480 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:43:15.481 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 54.66, 편의성: 42.05, 종합: 48.36
2025-11-21 19:43:15.481 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.481157300Z","nanoTime":27381494988600,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":352800,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":48.87753758404653,"policeDistance":408.97969932762777,"cctvScore":100.0,"cctvCount":48,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":54.663261275213955,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":18.0,"CS2":3.75,"SC4":4.0,"MT1":20.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":3.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":42.05357142857143,"success":true},"overallScore":48.35841635189269,"errorMessage":null,"success":true}}
2025-11-21 19:43:15.481 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.481157300Z","nanoTime":27381495261700,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:43:15.481 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:43:15.481 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 강남구 학동로 169, latitude=37.529343, longitude=127.035616, geohashId=wydmdb0)
2025-11-21 19:43:15.481 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 408.97969932762777
2025-11-21 19:43:15.483 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm6ze
2025-11-21 19:43:15.483 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:43:15.483 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.483110300Z","nanoTime":27381497462800,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":2201100,"duration_ms":2,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["은행이(가) 17m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm6ze","dataSize":23732,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":23732,"errorMessage":null,"success":true}}
2025-11-21 19:43:15.483 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:43:20.135 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:43:20.135 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5087, longitude=127.0633, radius=500)
2025-11-21 19:43:20.135 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:43:20.135 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5087, longitude=127.0633, radius=500
2025-11-21 19:43:20.135 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:20.135583800Z","nanoTime":27386149702200,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:43:20.135 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:43:20.135 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5087, lon=127.0633
2025-11-21 19:43:20.135 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:20.135583800Z","nanoTime":27386149838800,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:43:20.135 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:20.135583800Z","nanoTime":27386149945600,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":106800,"duration_ms":0,"resultData":{"latitude":37.5087,"longitude":127.0633,"precision":7,"centerHash":"wydm7kk","adjacentHashes":["wydm7kk","wydm7ks","wydm7kt","wydm7km","wydm7kj","wydm7kh","wydm7k5","wydm7k7","wydm7ke"],"errorMessage":null,"success":true}}
2025-11-21 19:43:20.135 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm7kk, wydm7ks, wydm7kt, wydm7km, wydm7kj, wydm7kh, wydm7k5, wydm7k7, wydm7ke]
2025-11-21 19:43:20.135 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm7kk
2025-11-21 19:43:20.135 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:20.135583800Z","nanoTime":27386150151400,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":449200,"duration_ms":0,"resultData":{"requestLatitude":37.5087,"requestLongitude":127.0633,"requestRadius":500,"centerGeohashId":"wydm7kk","nineBlockGeohashes":["wydm7kk","wydm7ks","wydm7kt","wydm7km","wydm7kj","wydm7kh","wydm7k5","wydm7k7","wydm7ke"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:43:20.135 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:20.135583800Z","nanoTime":27386150236500,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:43:20.135 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:43:20.135 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm7kk
2025-11-21 19:43:20.136 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4667ms)
2025-11-21 19:43:20.136 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:43:20.138 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:43:20.138 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:43:20.138 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.6331ms, 역직렬화: 0.0ms
2025-11-21 19:43:20.138 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:43:20.138 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:20.138583400Z","nanoTime":27386152565300,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2328800,"duration_ms":2,"resultData":{"centerGeohashId":"wydm7kk","nineBlockGeohashes":["wydm7kk","wydm7ks","wydm7kt","wydm7km","wydm7kj","wydm7kh","wydm7k5","wydm7k7","wydm7ke"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm7kk","hit":false,"valueSize":0,"l1CacheGetDurationNs":466700,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm7kk","cacheKey":"data:wydm7kk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":290100},{"geohashId":"wydm7ks","cacheKey":"data:wydm7ks:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":173300},{"geohashId":"wydm7kt","cacheKey":"data:wydm7kt:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":145800},{"geohashId":"wydm7km","cacheKey":"data:wydm7km:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":134800},{"geohashId":"wydm7kj","cacheKey":"data:wydm7kj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":126700},{"geohashId":"wydm7kh","cacheKey":"data:wydm7kh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":178000},{"geohashId":"wydm7k5","cacheKey":"data:wydm7k5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":157600},{"geohashId":"wydm7k7","cacheKey":"data:wydm7k7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":172100},{"geohashId":"wydm7ke","cacheKey":"data:wydm7ke:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":192900}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1633100,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:43:20.138 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:20.138583400Z","nanoTime":27386152740900,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:43:20.138 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:43:20.138 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:43:20.143 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 16건
2025-11-21 19:43:20.144 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:43:20.144 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 6개
2025-11-21 19:43:20.145 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:20.144603100Z","nanoTime":27386159311100,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6570200,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydm7kk","wydm7ks","wydm7kt","wydm7km","wydm7kj","wydm7kh","wydm7k5","wydm7k7","wydm7ke"],"cctvQueryResult":{"queryGeohashIds":["wydm7kk","wydm7ks","wydm7kt","wydm7km","wydm7kj","wydm7kh","wydm7k5","wydm7k7","wydm7ke"],"totalRowsReturned":16,"rowsPerGrid":{"wydm7k5":3,"wydm7ke":2,"wydm7kh":3,"wydm7k7":3,"wydm7km":3,"wydm7kk":2},"queryExecutionTimeNs":4582300,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm7k5","cacheKey":"data:wydm7k5:cctv","dataCount":3,"dataSize":412,"errorMessage":null,"success":true},{"geohashId":"wydm7ke","cacheKey":"data:wydm7ke:cctv","dataCount":2,"dataSize":271,"errorMessage":null,"success":true},{"geohashId":"wydm7kh","cacheKey":"data:wydm7kh:cctv","dataCount":3,"dataSize":409,"errorMessage":null,"success":true},{"geohashId":"wydm7k7","cacheKey":"data:wydm7k7:cctv","dataCount":3,"dataSize":409,"errorMessage":null,"success":true},{"geohashId":"wydm7km","cacheKey":"data:wydm7km:cctv","dataCount":3,"dataSize":412,"errorMessage":null,"success":true},{"geohashId":"wydm7kk","cacheKey":"data:wydm7kk:cctv","dataCount":2,"dataSize":273,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:43:20.145 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:20.145585400Z","nanoTime":27386159504300,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:43:20.145 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:43:20.145 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5087, 127.0633)
2025-11-21 19:43:20.145 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:43:20.208 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:43:20.208 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:43:20.208 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:43:20.208 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5087, 127.0633), 반경: 500m
2025-11-21 19:43:21.246 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:43:21.247 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 143건
2025-11-21 19:43:21.248 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:43:21.248 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:43:21.248 [http-nio-8185-exec-4] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:43:21.248 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:43:21.248 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:43:21.248 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:43:21.248 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:43:21.248 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:21.248420100Z","nanoTime":27387262556500,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":1103052200,"duration_ms":1103,"resultData":{"latitude":37.5087,"longitude":127.0633,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":1102923000,"addressApiResult":{"cached":false,"cacheKey":"address:37.5087:127.0633","roadAddress":"주소 없음","jibunAddress":"서울 강남구 대치동 1011","responseSize":58,"executionTimeNs":63063300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":36800,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5087:127.0633:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":1,"CS2":15,"SC4":3,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":5,"FD6":15,"PK6":15,"OL7":1,"PM9":12},"totalPlaces":143,"responseSize":16733,"executionTimeNs":1039822900,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:21.248 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:21.248420100Z","nanoTime":27387262755200,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:43:21.248 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:43:21.248 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:43:21.248 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 16개
2025-11-21 19:43:21.248 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 16개 (총 카메라 대수: 42대)
2025-11-21 19:43:21.248 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:43:21.314 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중랑구  사가정로41길 45 (면목3.8파출소) (거리: 732m)
2025-11-21 19:43:21.314 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:43:21.314 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:43:21.314 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:43:21.314 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:43:21.315 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:21.314411800Z","nanoTime":27387329143800,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":66388600,"duration_ms":66,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":16,"totalCctvAfterFilter":16,"totalCameraCount":42,"filterRate":1.0,"filterExecutionTimeNs":13100,"success":true},"policeQuery":{"queryDurationNs":65935100,"found":true,"nearestAddress":"서울특별시 중랑구  사가정로41길 45 (면목3.8파출소)","nearestDistance":731.8782490022119,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":1,"CS2":15,"SC4":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":5,"FD6":15,"PK6":15,"OL7":1,"PM9":12},"placesAfterFilter":{"CT1":15,"AT4":1,"CS2":15,"SC4":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":5,"FD6":15,"PK6":15,"OL7":1,"PM9":12},"totalBeforeFilter":143,"totalAfterFilter":143,"filterRate":1.0,"filterExecutionTimeNs":122400,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:21.315 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:21.315407500Z","nanoTime":27387329459000,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:43:21.315 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:43:21.315 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 23.89, 편의성: 40.63, 종합: 32.26
2025-11-21 19:43:21.315 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:21.315407500Z","nanoTime":27387329849600,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":390600,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":8.515218874723516,"policeDistance":731.8782490022119,"cctvScore":53.333333333333336,"cctvCount":16,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":23.88789899575039,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":3.0,"CS2":3.75,"SC4":6.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":15.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":96.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":40.625,"success":true},"overallScore":32.256449497875195,"errorMessage":null,"success":true}}
2025-11-21 19:43:21.315 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:21.315407500Z","nanoTime":27387330050100,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:43:21.315 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:43:21.315 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중랑구  사가정로41길 45 (면목3.8파출소), latitude=37.514908, longitude=127.060543, geohashId=wydm7m6)
2025-11-21 19:43:21.316 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 731.8782490022119
2025-11-21 19:43:21.317 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm7kk
2025-11-21 19:43:21.317 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:43:21.317 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:21.317433900Z","nanoTime":27387331711700,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1661600,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["지하철역이(가) 28m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm7kk","dataSize":20053,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20053,"errorMessage":null,"success":true}}
2025-11-21 19:43:21.317 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:43:25.014 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:43:25.014 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5612, longitude=127.0377, radius=500)
2025-11-21 19:43:25.014 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:43:25.014 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5612, longitude=127.0377, radius=500
2025-11-21 19:43:25.017 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.014507Z","nanoTime":27391029104600,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:43:25.017 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:43:25.017 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5612, lon=127.0377
2025-11-21 19:43:25.018 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.018511900Z","nanoTime":27391032271100,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:43:25.018 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.018511900Z","nanoTime":27391032399800,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":128700,"duration_ms":0,"resultData":{"latitude":37.5612,"longitude":127.0377,"precision":7,"centerHash":"wydmdvf","adjacentHashes":["wydmdvf","wydmdy4","wydmdy5","wydmdvg","wydmdve","wydmdvd","wydmdv9","wydmdvc","wydmdy1"],"errorMessage":null,"success":true}}
2025-11-21 19:43:25.018 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdvf, wydmdy4, wydmdy5, wydmdvg, wydmdve, wydmdvd, wydmdv9, wydmdvc, wydmdy1]
2025-11-21 19:43:25.018 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdvf
2025-11-21 19:43:25.018 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.018511900Z","nanoTime":27391032578000,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":3473400,"duration_ms":3,"resultData":{"requestLatitude":37.5612,"requestLongitude":127.0377,"requestRadius":500,"centerGeohashId":"wydmdvf","nineBlockGeohashes":["wydmdvf","wydmdy4","wydmdy5","wydmdvg","wydmdve","wydmdvd","wydmdv9","wydmdvc","wydmdy1"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:43:25.018 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.018511900Z","nanoTime":27391032670300,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:43:25.018 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:43:25.018 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdvf
2025-11-21 19:43:25.018 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4638ms)
2025-11-21 19:43:25.019 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:43:25.020 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:43:25.020 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:43:25.020 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.7466ms, 역직렬화: 0.0ms
2025-11-21 19:43:25.020 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:43:25.021 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.020487500Z","nanoTime":27391035234700,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2564400,"duration_ms":2,"resultData":{"centerGeohashId":"wydmdvf","nineBlockGeohashes":["wydmdvf","wydmdy4","wydmdy5","wydmdvg","wydmdve","wydmdvd","wydmdv9","wydmdvc","wydmdy1"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdvf","hit":false,"valueSize":0,"l1CacheGetDurationNs":463800,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdvf","cacheKey":"data:wydmdvf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":262800},{"geohashId":"wydmdy4","cacheKey":"data:wydmdy4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":203900},{"geohashId":"wydmdy5","cacheKey":"data:wydmdy5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":191100},{"geohashId":"wydmdvg","cacheKey":"data:wydmdvg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":165200},{"geohashId":"wydmdve","cacheKey":"data:wydmdve:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":182600},{"geohashId":"wydmdvd","cacheKey":"data:wydmdvd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":194300},{"geohashId":"wydmdv9","cacheKey":"data:wydmdv9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":162500},{"geohashId":"wydmdvc","cacheKey":"data:wydmdvc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":147000},{"geohashId":"wydmdy1","cacheKey":"data:wydmdy1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":161000}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1746600,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:43:25.021 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.021491800Z","nanoTime":27391035543500,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:43:25.021 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:43:25.021 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:43:25.025 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 21건
2025-11-21 19:43:25.027 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:43:25.027 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 6개
2025-11-21 19:43:25.027 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.027506300Z","nanoTime":27391041515300,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5971800,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydmdvf","wydmdy4","wydmdy5","wydmdvg","wydmdve","wydmdvd","wydmdv9","wydmdvc","wydmdy1"],"cctvQueryResult":{"queryGeohashIds":["wydmdvf","wydmdy4","wydmdy5","wydmdvg","wydmdve","wydmdvd","wydmdv9","wydmdvc","wydmdy1"],"totalRowsReturned":21,"rowsPerGrid":{"wydmdy5":3,"wydmdvc":5,"wydmdy1":3,"wydmdv9":1,"wydmdve":6,"wydmdvg":3},"queryExecutionTimeNs":3909000,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdy5","cacheKey":"data:wydmdy5:cctv","dataCount":3,"dataSize":399,"errorMessage":null,"success":true},{"geohashId":"wydmdvc","cacheKey":"data:wydmdvc:cctv","dataCount":5,"dataSize":660,"errorMessage":null,"success":true},{"geohashId":"wydmdy1","cacheKey":"data:wydmdy1:cctv","dataCount":3,"dataSize":383,"errorMessage":null,"success":true},{"geohashId":"wydmdv9","cacheKey":"data:wydmdv9:cctv","dataCount":1,"dataSize":133,"errorMessage":null,"success":true},{"geohashId":"wydmdve","cacheKey":"data:wydmdve:cctv","dataCount":6,"dataSize":728,"errorMessage":null,"success":true},{"geohashId":"wydmdvg","cacheKey":"data:wydmdvg:cctv","dataCount":3,"dataSize":395,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:43:25.027 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.027506300Z","nanoTime":27391041793200,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:43:25.027 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:43:25.027 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5612, 127.0377)
2025-11-21 19:43:25.027 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:43:25.106 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:43:25.106 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:43:25.107 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:43:25.107 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5612, 127.0377), 반경: 500m
2025-11-21 19:43:25.189 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:43:25.189 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 147건
2025-11-21 19:43:25.191 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:43:25.191 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:43:25.191 [http-nio-8185-exec-3] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:43:25.191 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:43:25.191 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:43:25.191 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:43:25.191 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:43:25.191 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.191883900Z","nanoTime":27391205971900,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":164178700,"duration_ms":164,"resultData":{"latitude":37.5612,"longitude":127.0377,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":163903800,"addressApiResult":{"cached":false,"cacheKey":"address:37.5612:127.0377","roadAddress":"주소 없음","jibunAddress":"서울 성동구 행당동 168-151","responseSize":61,"executionTimeNs":79404400,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":65900,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5612:127.0377:500","categoryCount":15,"placesByCategory":{"CT1":6,"AT4":3,"CS2":15,"SC4":3,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":7,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalPlaces":147,"responseSize":17057,"executionTimeNs":84433500,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:25.191 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.191883900Z","nanoTime":27391206388900,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:43:25.191 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:43:25.191 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:43:25.191 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 21개
2025-11-21 19:43:25.191 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 21개 (총 카메라 대수: 64대)
2025-11-21 19:43:25.191 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:43:25.261 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구  선유로 95 (거리: 375m)
2025-11-21 19:43:25.261 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:43:25.261 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:43:25.261 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:43:25.261 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:43:25.261 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.261866800Z","nanoTime":27391275990900,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":69602000,"duration_ms":69,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":21,"totalCctvAfterFilter":21,"totalCameraCount":64,"filterRate":1.0,"filterExecutionTimeNs":16100,"success":true},"policeQuery":{"queryDurationNs":69104700,"found":true,"nearestAddress":"서울특별시 영등포구  선유로 95","nearestDistance":374.7953776933087,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":6,"AT4":3,"CS2":15,"SC4":3,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":7,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"placesAfterFilter":{"CT1":6,"AT4":3,"CS2":15,"SC4":3,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":7,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalBeforeFilter":147,"totalAfterFilter":147,"filterRate":1.0,"filterExecutionTimeNs":138800,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:25.261 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.261866800Z","nanoTime":27391276234600,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:43:25.261 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:43:25.261 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 43.95, 편의성: 38.58, 종합: 41.26
2025-11-21 19:43:25.262 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.261866800Z","nanoTime":27391276555600,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":321000,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":53.15057778833642,"policeDistance":374.7953776933087,"cctvScore":70.0,"cctvCount":21,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":43.94517333650093,"success":true},"convenienceScore":{"categoryScores":{"CT1":24.0,"AT4":9.0,"CS2":3.75,"SC4":6.0,"MT1":30.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":21.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":38.583333333333336,"success":true},"overallScore":41.26425333491713,"errorMessage":null,"success":true}}
2025-11-21 19:43:25.262 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.262883300Z","nanoTime":27391276700100,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:43:25.262 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:43:25.262 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구  선유로 95, latitude=37.560301, longitude=127.041798, geohashId=wydmdvt)
2025-11-21 19:43:25.262 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 374.7953776933087
2025-11-21 19:43:25.263 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdvf
2025-11-21 19:43:25.263 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:43:25.263 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.263868300Z","nanoTime":27391278308600,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1608500,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["공공기관이(가) 27m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdvf","dataSize":20502,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20502,"errorMessage":null,"success":true}}
2025-11-21 19:43:25.263 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:43:29.585 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:43:29.585 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.4764, longitude=126.9814, radius=500)
2025-11-21 19:43:29.585 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:43:29.585 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.4764, longitude=126.9814, radius=500
2025-11-21 19:43:29.585 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.585532900Z","nanoTime":27395599805400,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:43:29.585 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:43:29.585 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.4764, lon=126.9814
2025-11-21 19:43:29.585 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.585532900Z","nanoTime":27395599937200,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:43:29.586 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.585532900Z","nanoTime":27395600028600,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":91400,"duration_ms":0,"resultData":{"latitude":37.4764,"longitude":126.9814,"precision":7,"centerHash":"wydm1w3","adjacentHashes":["wydm1w3","wydm1w9","wydm1wd","wydm1w6","wydm1w4","wydm1w1","wydm1w0","wydm1w2","wydm1w8"],"errorMessage":null,"success":true}}
2025-11-21 19:43:29.586 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm1w3, wydm1w9, wydm1wd, wydm1w6, wydm1w4, wydm1w1, wydm1w0, wydm1w2, wydm1w8]
2025-11-21 19:43:29.586 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm1w3
2025-11-21 19:43:29.587 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.586533300Z","nanoTime":27395600910000,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":1104600,"duration_ms":1,"resultData":{"requestLatitude":37.4764,"requestLongitude":126.9814,"requestRadius":500,"centerGeohashId":"wydm1w3","nineBlockGeohashes":["wydm1w3","wydm1w9","wydm1wd","wydm1w6","wydm1w4","wydm1w1","wydm1w0","wydm1w2","wydm1w8"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:43:29.587 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.587532800Z","nanoTime":27395601671400,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:43:29.587 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:43:29.587 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm1w3
2025-11-21 19:43:29.587 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4456ms)
2025-11-21 19:43:29.587 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:43:29.589 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:43:29.589 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:43:29.589 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.6714ms, 역직렬화: 0.0ms
2025-11-21 19:43:29.589 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:43:29.592 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.589535600Z","nanoTime":27395604027300,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2355900,"duration_ms":2,"resultData":{"centerGeohashId":"wydm1w3","nineBlockGeohashes":["wydm1w3","wydm1w9","wydm1wd","wydm1w6","wydm1w4","wydm1w1","wydm1w0","wydm1w2","wydm1w8"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm1w3","hit":false,"valueSize":0,"l1CacheGetDurationNs":445600,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm1w3","cacheKey":"data:wydm1w3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":263500},{"geohashId":"wydm1w9","cacheKey":"data:wydm1w9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":210700},{"geohashId":"wydm1wd","cacheKey":"data:wydm1wd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":168700},{"geohashId":"wydm1w6","cacheKey":"data:wydm1w6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":138400},{"geohashId":"wydm1w4","cacheKey":"data:wydm1w4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":152700},{"geohashId":"wydm1w1","cacheKey":"data:wydm1w1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":133100},{"geohashId":"wydm1w0","cacheKey":"data:wydm1w0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":185400},{"geohashId":"wydm1w2","cacheKey":"data:wydm1w2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":153200},{"geohashId":"wydm1w8","cacheKey":"data:wydm1w8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":170200}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1671400,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:43:29.592 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.592534800Z","nanoTime":27395606934200,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:43:29.592 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:43:29.592 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:43:29.599 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 60건
2025-11-21 19:43:29.602 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:43:29.602 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:43:29.604 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.602532Z","nanoTime":27395616409200,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":9475000,"duration_ms":9,"resultData":{"inputCctvMissGrids":["wydm1w3","wydm1w9","wydm1wd","wydm1w6","wydm1w4","wydm1w1","wydm1w0","wydm1w2","wydm1w8"],"cctvQueryResult":{"queryGeohashIds":["wydm1w3","wydm1w9","wydm1wd","wydm1w6","wydm1w4","wydm1w1","wydm1w0","wydm1w2","wydm1w8"],"totalRowsReturned":60,"rowsPerGrid":{"wydm1w4":1,"wydm1wd":18,"wydm1w3":3,"wydm1w2":5,"wydm1w1":4,"wydm1w8":4,"wydm1w6":3,"wydm1w9":20,"wydm1w0":2},"queryExecutionTimeNs":6245700,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm1w4","cacheKey":"data:wydm1w4:cctv","dataCount":1,"dataSize":138,"errorMessage":null,"success":true},{"geohashId":"wydm1wd","cacheKey":"data:wydm1wd:cctv","dataCount":18,"dataSize":2491,"errorMessage":null,"success":true},{"geohashId":"wydm1w3","cacheKey":"data:wydm1w3:cctv","dataCount":3,"dataSize":376,"errorMessage":null,"success":true},{"geohashId":"wydm1w2","cacheKey":"data:wydm1w2:cctv","dataCount":5,"dataSize":573,"errorMessage":null,"success":true},{"geohashId":"wydm1w1","cacheKey":"data:wydm1w1:cctv","dataCount":4,"dataSize":553,"errorMessage":null,"success":true},{"geohashId":"wydm1w8","cacheKey":"data:wydm1w8:cctv","dataCount":4,"dataSize":579,"errorMessage":null,"success":true},{"geohashId":"wydm1w6","cacheKey":"data:wydm1w6:cctv","dataCount":3,"dataSize":415,"errorMessage":null,"success":true},{"geohashId":"wydm1w9","cacheKey":"data:wydm1w9:cctv","dataCount":20,"dataSize":2767,"errorMessage":null,"success":true},{"geohashId":"wydm1w0","cacheKey":"data:wydm1w0:cctv","dataCount":2,"dataSize":197,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:43:29.604 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.604532Z","nanoTime":27395618726000,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:43:29.604 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:43:29.604 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.4764, 126.9814)
2025-11-21 19:43:29.605 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:43:29.685 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:43:29.685 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:43:29.685 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:43:29.685 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.4764, 126.9814), 반경: 500m
2025-11-21 19:43:29.776 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:43:29.776 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 137건
2025-11-21 19:43:29.777 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:43:29.777 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:43:29.777 [http-nio-8185-exec-7] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:43:29.777 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:43:29.777 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:43:29.777 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:43:29.777 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:43:29.780 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.777712900Z","nanoTime":27395792290600,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":173564600,"duration_ms":173,"resultData":{"latitude":37.4764,"longitude":126.9814,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":173414400,"addressApiResult":{"cached":false,"cacheKey":"address:37.4764:126.9814","roadAddress":"주소 없음","jibunAddress":"서울 관악구 남현동 1130-1","responseSize":60,"executionTimeNs":81139800,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":38800,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.4764:126.9814:500","categoryCount":15,"placesByCategory":{"CT1":5,"AT4":3,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":3,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"totalPlaces":137,"responseSize":15882,"executionTimeNs":92235800,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:29.781 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.781731600Z","nanoTime":27395795553400,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:43:29.781 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:43:29.781 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:43:29.781 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 60개
2025-11-21 19:43:29.781 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 60개 (총 카메라 대수: 78대)
2025-11-21 19:43:29.781 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:43:29.850 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 송파구 위례순환로 369 (거리: 345m)
2025-11-21 19:43:29.850 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:43:29.850 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:43:29.850 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:43:29.850 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:43:29.852 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.850735Z","nanoTime":27395864797400,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":69244000,"duration_ms":69,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":60,"totalCctvAfterFilter":60,"totalCameraCount":78,"filterRate":1.0,"filterExecutionTimeNs":29700,"success":true},"policeQuery":{"queryDurationNs":68724300,"found":true,"nearestAddress":"서울특별시 송파구 위례순환로 369","nearestDistance":345.1132241530111,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":5,"AT4":3,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":3,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"placesAfterFilter":{"CT1":5,"AT4":3,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":3,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"totalBeforeFilter":137,"totalAfterFilter":137,"filterRate":1.0,"filterExecutionTimeNs":127100,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:29.852 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.852714Z","nanoTime":27395866961200,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:43:29.852 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:43:29.852 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 57.06, 편의성: 36.25, 종합: 46.65
2025-11-21 19:43:29.855 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.852714Z","nanoTime":27395867239300,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":278100,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":56.86084698087362,"policeDistance":345.1132241530111,"cctvScore":100.0,"cctvCount":60,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":57.05825409426208,"success":true},"convenienceScore":{"categoryScores":{"CT1":20.0,"AT4":9.0,"CS2":3.75,"SC4":2.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":36.25,"success":true},"overallScore":46.65412704713104,"errorMessage":null,"success":true}}
2025-11-21 19:43:29.855 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.855712800Z","nanoTime":27395870297600,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:43:29.855 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:43:29.855 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 송파구 위례순환로 369, latitude=37.479447, longitude=126.982144, geohashId=wydm1wc)
2025-11-21 19:43:29.856 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 345.1132241530111
2025-11-21 19:43:29.857 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm1w3
2025-11-21 19:43:29.857 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:43:29.859 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.857732100Z","nanoTime":27395872230300,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1932700,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["지하철역이(가) 23m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm1w3","dataSize":24095,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":24095,"errorMessage":null,"success":true}}
2025-11-21 19:43:29.859 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:43:33.705 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:43:33.705 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.4815, longitude=126.8826, radius=500)
2025-11-21 19:43:33.705 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:43:33.705 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.4815, longitude=126.8826, radius=500
2025-11-21 19:43:33.705 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.705973500Z","nanoTime":27399720111900,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:43:33.705 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:43:33.705 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.4815, lon=126.8826
2025-11-21 19:43:33.705 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.705973500Z","nanoTime":27399720299900,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:43:33.705 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.705973500Z","nanoTime":27399720367400,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":67500,"duration_ms":0,"resultData":{"latitude":37.4815,"longitude":126.8826,"precision":7,"centerHash":"wydjpr3","adjacentHashes":["wydjpr3","wydjpr9","wydjprd","wydjpr6","wydjpr4","wydjpr1","wydjpr0","wydjpr2","wydjpr8"],"errorMessage":null,"success":true}}
2025-11-21 19:43:33.705 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydjpr3, wydjpr9, wydjprd, wydjpr6, wydjpr4, wydjpr1, wydjpr0, wydjpr2, wydjpr8]
2025-11-21 19:43:33.705 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydjpr3
2025-11-21 19:43:33.705 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.705973500Z","nanoTime":27399720524100,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":412200,"duration_ms":0,"resultData":{"requestLatitude":37.4815,"requestLongitude":126.8826,"requestRadius":500,"centerGeohashId":"wydjpr3","nineBlockGeohashes":["wydjpr3","wydjpr9","wydjprd","wydjpr6","wydjpr4","wydjpr1","wydjpr0","wydjpr2","wydjpr8"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:43:33.705 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.705973500Z","nanoTime":27399720627200,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:43:33.705 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:43:33.705 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydjpr3
2025-11-21 19:43:33.707 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5088ms)
2025-11-21 19:43:33.707 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:43:33.708 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:43:33.708 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:43:33.709 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.7248ms, 역직렬화: 0.0ms
2025-11-21 19:43:33.709 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:43:33.709 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.709325900Z","nanoTime":27399723118300,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2491100,"duration_ms":2,"resultData":{"centerGeohashId":"wydjpr3","nineBlockGeohashes":["wydjpr3","wydjpr9","wydjprd","wydjpr6","wydjpr4","wydjpr1","wydjpr0","wydjpr2","wydjpr8"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydjpr3","hit":false,"valueSize":0,"l1CacheGetDurationNs":508800,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydjpr3","cacheKey":"data:wydjpr3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":363300},{"geohashId":"wydjpr9","cacheKey":"data:wydjpr9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":164500},{"geohashId":"wydjprd","cacheKey":"data:wydjprd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":210000},{"geohashId":"wydjpr6","cacheKey":"data:wydjpr6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":160100},{"geohashId":"wydjpr4","cacheKey":"data:wydjpr4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":162400},{"geohashId":"wydjpr1","cacheKey":"data:wydjpr1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":170400},{"geohashId":"wydjpr0","cacheKey":"data:wydjpr0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":132800},{"geohashId":"wydjpr2","cacheKey":"data:wydjpr2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":135700},{"geohashId":"wydjpr8","cacheKey":"data:wydjpr8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":164600}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1724800,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:43:33.709 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.709325900Z","nanoTime":27399723378300,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:43:33.709 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:43:33.709 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:43:33.713 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 17건
2025-11-21 19:43:33.716 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:43:33.716 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 7개
2025-11-21 19:43:33.716 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.716335100Z","nanoTime":27399730442600,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":7064300,"duration_ms":7,"resultData":{"inputCctvMissGrids":["wydjpr3","wydjpr9","wydjprd","wydjpr6","wydjpr4","wydjpr1","wydjpr0","wydjpr2","wydjpr8"],"cctvQueryResult":{"queryGeohashIds":["wydjpr3","wydjpr9","wydjprd","wydjpr6","wydjpr4","wydjpr1","wydjpr0","wydjpr2","wydjpr8"],"totalRowsReturned":17,"rowsPerGrid":{"wydjpr0":1,"wydjpr1":1,"wydjprd":3,"wydjpr3":2,"wydjpr8":1,"wydjpr9":6,"wydjpr6":3},"queryExecutionTimeNs":4086000,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydjpr0","cacheKey":"data:wydjpr0:cctv","dataCount":1,"dataSize":133,"errorMessage":null,"success":true},{"geohashId":"wydjpr1","cacheKey":"data:wydjpr1:cctv","dataCount":1,"dataSize":134,"errorMessage":null,"success":true},{"geohashId":"wydjprd","cacheKey":"data:wydjprd:cctv","dataCount":3,"dataSize":399,"errorMessage":null,"success":true},{"geohashId":"wydjpr3","cacheKey":"data:wydjpr3:cctv","dataCount":2,"dataSize":265,"errorMessage":null,"success":true},{"geohashId":"wydjpr8","cacheKey":"data:wydjpr8:cctv","dataCount":1,"dataSize":133,"errorMessage":null,"success":true},{"geohashId":"wydjpr9","cacheKey":"data:wydjpr9:cctv","dataCount":6,"dataSize":797,"errorMessage":null,"success":true},{"geohashId":"wydjpr6","cacheKey":"data:wydjpr6:cctv","dataCount":3,"dataSize":400,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:43:33.716 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.716335100Z","nanoTime":27399730663200,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:43:33.716 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:43:33.716 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.4815, 126.8826)
2025-11-21 19:43:33.716 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:43:33.825 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:43:33.825 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:43:33.826 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:43:33.826 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.4815, 126.8826), 반경: 500m
2025-11-21 19:43:33.915 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:43:33.915 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 133건
2025-11-21 19:43:33.917 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:43:33.917 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:43:33.917 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 금천구
2025-11-21 19:43:33.917 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 미스 - DB 조회
2025-11-21 19:43:33.921 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 성공 및 캐싱 완료 - 금천구: 0.715492589
2025-11-21 19:43:33.921 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:43:33.921 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:43:33.921 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:43:33.921 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.715492589
2025-11-21 19:43:33.921 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.921080400Z","nanoTime":27399935328200,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":204665000,"duration_ms":204,"resultData":{"latitude":37.4815,"longitude":126.8826,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":204537300,"addressApiResult":{"cached":false,"cacheKey":"address:37.4815:126.8826","roadAddress":"서울특별시 금천구 벚꽃로 309","jibunAddress":"서울 금천구 가산동 468-4","responseSize":71,"executionTimeNs":109155800,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":"arrest_rate:금천구","guName":"금천구","arrestRate":0.715492589,"dataFound":true,"executionTimeNs":4232500,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.4815:126.8826:500","categoryCount":15,"placesByCategory":{"CT1":5,"AT4":1,"CS2":15,"SC4":1,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":0,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalPlaces":133,"responseSize":15515,"executionTimeNs":91149000,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:33.921 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.921080400Z","nanoTime":27399935793100,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:43:33.921 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:43:33.922 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:43:33.922 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 17개
2025-11-21 19:43:33.922 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 17개 (총 카메라 대수: 52대)
2025-11-21 19:43:33.922 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:43:33.994 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 강북구  한천로 969 (거리: 512m)
2025-11-21 19:43:33.994 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:43:33.994 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:43:33.995 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:43:33.995 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:43:33.995 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.995083300Z","nanoTime":27400008907900,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":73114800,"duration_ms":73,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":17,"totalCctvAfterFilter":17,"totalCameraCount":52,"filterRate":1.0,"filterExecutionTimeNs":14200,"success":true},"policeQuery":{"queryDurationNs":72598500,"found":true,"nearestAddress":"서울특별시 강북구  한천로 969","nearestDistance":511.5439425320286,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":5,"AT4":1,"CS2":15,"SC4":1,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"placesAfterFilter":{"CT1":5,"AT4":1,"CS2":15,"SC4":1,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalBeforeFilter":133,"totalAfterFilter":133,"filterRate":1.0,"filterExecutionTimeNs":155500,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:33.995 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.995083300Z","nanoTime":27400009346500,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:43:33.995 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:43:33.995 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 54.95, 편의성: 39.02, 종합: 46.98
2025-11-21 19:43:33.995 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.995083300Z","nanoTime":27400009564500,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":218000,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":36.057007183496424,"policeDistance":511.5439425320286,"cctvScore":56.666666666666664,"cctvCount":17,"arrestRateScore":71.5492589,"arrestRate":0.715492589,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":54.94854649171559,"success":true},"convenienceScore":{"categoryScores":{"CT1":20.0,"AT4":3.0,"CS2":6.274312962730581,"SC4":2.0,"MT1":30.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"금천구","guPopulation":239070,"finalScore":39.01959378305219,"success":true},"overallScore":46.98407013738389,"errorMessage":null,"success":true}}
2025-11-21 19:43:33.995 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.995083300Z","nanoTime":27400009780900,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:43:33.995 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:43:33.995 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 강북구  한천로 969, latitude=37.479934, longitude=126.888051, geohashId=wydjprj)
2025-11-21 19:43:33.996 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 511.5439425320286
2025-11-21 19:43:33.996 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydjpr3
2025-11-21 19:43:33.996 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:43:33.997 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.996099600Z","nanoTime":27400010824900,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1044000,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["지하철역이(가) 4m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydjpr3","dataSize":18815,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":18815,"errorMessage":null,"success":true}}
2025-11-21 19:43:33.997 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:43:37.603 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:43:37.604 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5245, longitude=126.896, radius=500)
2025-11-21 19:43:37.604 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:43:37.604 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5245, longitude=126.896, radius=500
2025-11-21 19:43:37.604 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.604144600Z","nanoTime":27403618045100,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:43:37.604 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:43:37.604 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5245, lon=126.896
2025-11-21 19:43:37.604 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.604144600Z","nanoTime":27403618118700,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:43:37.604 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.604144600Z","nanoTime":27403618181900,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":63200,"duration_ms":0,"resultData":{"latitude":37.5245,"longitude":126.896,"precision":7,"centerHash":"wydjrx4","adjacentHashes":["wydjrx4","wydjrx6","wydjrx7","wydjrx5","wydjrwg","wydjrwf","wydjrwc","wydjrx1","wydjrx3"],"errorMessage":null,"success":true}}
2025-11-21 19:43:37.604 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydjrx4, wydjrx6, wydjrx7, wydjrx5, wydjrwg, wydjrwf, wydjrwc, wydjrx1, wydjrx3]
2025-11-21 19:43:37.604 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydjrx4
2025-11-21 19:43:37.604 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.604144600Z","nanoTime":27403618341900,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":296800,"duration_ms":0,"resultData":{"requestLatitude":37.5245,"requestLongitude":126.896,"requestRadius":500,"centerGeohashId":"wydjrx4","nineBlockGeohashes":["wydjrx4","wydjrx6","wydjrx7","wydjrx5","wydjrwg","wydjrwf","wydjrwc","wydjrx1","wydjrx3"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:43:37.604 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.604144600Z","nanoTime":27403618395100,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:43:37.604 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:43:37.604 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydjrx4
2025-11-21 19:43:37.604 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4403ms)
2025-11-21 19:43:37.605 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:43:37.607 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:43:37.607 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:43:37.607 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.1137ms, 역직렬화: 0.0ms
2025-11-21 19:43:37.607 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:43:37.607 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.607129300Z","nanoTime":27403621162000,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2766900,"duration_ms":2,"resultData":{"centerGeohashId":"wydjrx4","nineBlockGeohashes":["wydjrx4","wydjrx6","wydjrx7","wydjrx5","wydjrwg","wydjrwf","wydjrwc","wydjrx1","wydjrx3"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydjrx4","hit":false,"valueSize":0,"l1CacheGetDurationNs":440300,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydjrx4","cacheKey":"data:wydjrx4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":279200},{"geohashId":"wydjrx6","cacheKey":"data:wydjrx6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":219700},{"geohashId":"wydjrx7","cacheKey":"data:wydjrx7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":202500},{"geohashId":"wydjrx5","cacheKey":"data:wydjrx5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":261700},{"geohashId":"wydjrwg","cacheKey":"data:wydjrwg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":212100},{"geohashId":"wydjrwf","cacheKey":"data:wydjrwf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":209100},{"geohashId":"wydjrwc","cacheKey":"data:wydjrwc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":202800},{"geohashId":"wydjrx1","cacheKey":"data:wydjrx1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":228500},{"geohashId":"wydjrx3","cacheKey":"data:wydjrx3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":221500}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2113700,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:43:37.607 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.607129300Z","nanoTime":27403621324000,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:43:37.607 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:43:37.607 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:43:37.612 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 55건
2025-11-21 19:43:37.615 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:43:37.615 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:43:37.615 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.615128200Z","nanoTime":27403629300400,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":7976400,"duration_ms":7,"resultData":{"inputCctvMissGrids":["wydjrx4","wydjrx6","wydjrx7","wydjrx5","wydjrwg","wydjrwf","wydjrwc","wydjrx1","wydjrx3"],"cctvQueryResult":{"queryGeohashIds":["wydjrx4","wydjrx6","wydjrx7","wydjrx5","wydjrwg","wydjrwf","wydjrwc","wydjrx1","wydjrx3"],"totalRowsReturned":55,"rowsPerGrid":{"wydjrx1":7,"wydjrx5":11,"wydjrx4":5,"wydjrx3":2,"wydjrwg":13,"wydjrwf":6,"wydjrx7":8,"wydjrx6":3},"queryExecutionTimeNs":5014700,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydjrx1","cacheKey":"data:wydjrx1:cctv","dataCount":7,"dataSize":880,"errorMessage":null,"success":true},{"geohashId":"wydjrx5","cacheKey":"data:wydjrx5:cctv","dataCount":11,"dataSize":1387,"errorMessage":null,"success":true},{"geohashId":"wydjrx4","cacheKey":"data:wydjrx4:cctv","dataCount":5,"dataSize":630,"errorMessage":null,"success":true},{"geohashId":"wydjrx3","cacheKey":"data:wydjrx3:cctv","dataCount":2,"dataSize":257,"errorMessage":null,"success":true},{"geohashId":"wydjrwg","cacheKey":"data:wydjrwg:cctv","dataCount":13,"dataSize":1671,"errorMessage":null,"success":true},{"geohashId":"wydjrwf","cacheKey":"data:wydjrwf:cctv","dataCount":6,"dataSize":765,"errorMessage":null,"success":true},{"geohashId":"wydjrx7","cacheKey":"data:wydjrx7:cctv","dataCount":8,"dataSize":1033,"errorMessage":null,"success":true},{"geohashId":"wydjrx6","cacheKey":"data:wydjrx6:cctv","dataCount":3,"dataSize":381,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:43:37.615 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.615128200Z","nanoTime":27403629466500,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:43:37.615 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:43:37.615 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5245, 126.896)
2025-11-21 19:43:37.615 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:43:37.694 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:43:37.694 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:43:37.695 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:43:37.695 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5245, 126.896), 반경: 500m
2025-11-21 19:43:37.801 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:43:37.801 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 130건
2025-11-21 19:43:37.802 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:43:37.802 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:43:37.802 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 영등포구
2025-11-21 19:43:37.807 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 영등포구
2025-11-21 19:43:37.808 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:43:37.808 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:43:37.808 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:43:37.808 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.721231491
2025-11-21 19:43:37.808 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.808652800Z","nanoTime":27403822469900,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":193003400,"duration_ms":193,"resultData":{"latitude":37.5245,"longitude":126.896,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":192879100,"addressApiResult":{"cached":false,"cacheKey":"address:37.5245:126.896","roadAddress":"서울특별시 영등포구 양산로 111","jibunAddress":"서울 영등포구 당산동3가 370-4","responseSize":75,"executionTimeNs":79288400,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:영등포구","guName":"영등포구","arrestRate":0.721231491,"dataFound":true,"executionTimeNs":5123100,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5245:126.896:500","categoryCount":15,"placesByCategory":{"CT1":3,"AT4":0,"CS2":15,"SC4":0,"MT1":4,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":5,"FD6":15,"PK6":15,"OL7":0,"PM9":11},"totalPlaces":130,"responseSize":15121,"executionTimeNs":108467600,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:37.808 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.808652800Z","nanoTime":27403822706000,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:43:37.808 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:43:37.808 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:43:37.808 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 55개
2025-11-21 19:43:37.808 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 55개 (총 카메라 대수: 55대)
2025-11-21 19:43:37.808 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:43:37.881 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구  여의공원로 120 여의도지구대 (거리: 591m)
2025-11-21 19:43:37.882 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:43:37.882 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:43:37.882 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 12개 카테고리
2025-11-21 19:43:37.882 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:43:37.882 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.882650300Z","nanoTime":27403896761600,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":74055600,"duration_ms":74,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":55,"totalCctvAfterFilter":55,"totalCameraCount":55,"filterRate":1.0,"filterExecutionTimeNs":28000,"success":true},"policeQuery":{"queryDurationNs":73539800,"found":true,"nearestAddress":"서울특별시 영등포구  여의공원로 120 여의도지구대","nearestDistance":591.2514435977744,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":3,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SW8":2,"PO3":5,"FD6":15,"PK6":15,"MT1":4,"PM9":11},"placesAfterFilter":{"CT1":3,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SW8":2,"PO3":5,"FD6":15,"PK6":15,"MT1":4,"PM9":11},"totalBeforeFilter":130,"totalAfterFilter":130,"filterRate":1.0,"filterExecutionTimeNs":161700,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:37.882 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.882650300Z","nanoTime":27403897055600,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:43:37.882 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:43:37.882 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 69.47, 편의성: 44.90, 종합: 57.18
2025-11-21 19:43:37.883 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.882650300Z","nanoTime":27403897333900,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":278300,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":26.093569550278207,"policeDistance":591.2514435977744,"cctvScore":100.0,"cctvCount":55,"arrestRateScore":72.12314909999999,"arrestRate":0.721231491,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":69.46501559508346,"success":true},"convenienceScore":{"categoryScores":{"CT1":12.0,"BK9":75.0,"HP8":100.0,"CS2":3.7766917690779582,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":15.0,"FD6":15.0,"PK6":45.0,"MT1":40.0,"PM9":88.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"영등포구","guPopulation":397173,"finalScore":44.898057647423165,"success":true},"overallScore":57.181536621253315,"errorMessage":null,"success":true}}
2025-11-21 19:43:37.883 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.883649900Z","nanoTime":27403897637200,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:43:37.883 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:43:37.883 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구  여의공원로 120 여의도지구대, latitude=37.522721, longitude=126.889682, geohashId=wydjrqy)
2025-11-21 19:43:37.883 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 591.2514435977744
2025-11-21 19:43:37.884 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydjrx4
2025-11-21 19:43:37.884 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:43:37.884 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.884650700Z","nanoTime":27403899066000,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1428800,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 15m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydjrx4","dataSize":21713,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":21713,"errorMessage":null,"success":true}}
2025-11-21 19:43:37.884 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:43:41.281 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:43:41.281 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5048, longitude=127.0491, radius=500)
2025-11-21 19:43:41.281 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:43:41.281 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5048, longitude=127.0491, radius=500
2025-11-21 19:43:41.281 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.281846100Z","nanoTime":27407295782600,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:43:41.281 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:43:41.281 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5048, lon=127.0491
2025-11-21 19:43:41.281 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.281846100Z","nanoTime":27407295882500,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:43:41.281 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.281846100Z","nanoTime":27407295946100,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":63600,"duration_ms":0,"resultData":{"latitude":37.5048,"longitude":127.0491,"precision":7,"centerHash":"wydm75d","adjacentHashes":["wydm75d","wydm75f","wydm75g","wydm75e","wydm757","wydm756","wydm753","wydm759","wydm75c"],"errorMessage":null,"success":true}}
2025-11-21 19:43:41.281 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm75d, wydm75f, wydm75g, wydm75e, wydm757, wydm756, wydm753, wydm759, wydm75c]
2025-11-21 19:43:41.281 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm75d
2025-11-21 19:43:41.281 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.281846100Z","nanoTime":27407296074900,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":292300,"duration_ms":0,"resultData":{"requestLatitude":37.5048,"requestLongitude":127.0491,"requestRadius":500,"centerGeohashId":"wydm75d","nineBlockGeohashes":["wydm75d","wydm75f","wydm75g","wydm75e","wydm757","wydm756","wydm753","wydm759","wydm75c"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:43:41.281 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.281846100Z","nanoTime":27407296141800,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:43:41.281 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:43:41.281 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm75d
2025-11-21 19:43:41.282 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4481ms)
2025-11-21 19:43:41.282 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:43:41.283 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:43:41.283 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:43:41.283 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.5745ms, 역직렬화: 0.0ms
2025-11-21 19:43:41.283 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:43:41.283 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.283828900Z","nanoTime":27407298411100,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2269300,"duration_ms":2,"resultData":{"centerGeohashId":"wydm75d","nineBlockGeohashes":["wydm75d","wydm75f","wydm75g","wydm75e","wydm757","wydm756","wydm753","wydm759","wydm75c"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm75d","hit":false,"valueSize":0,"l1CacheGetDurationNs":448100,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm75d","cacheKey":"data:wydm75d:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":235200},{"geohashId":"wydm75f","cacheKey":"data:wydm75f:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":170300},{"geohashId":"wydm75g","cacheKey":"data:wydm75g:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":136700},{"geohashId":"wydm75e","cacheKey":"data:wydm75e:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":178200},{"geohashId":"wydm757","cacheKey":"data:wydm757:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":208400},{"geohashId":"wydm756","cacheKey":"data:wydm756:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":156200},{"geohashId":"wydm753","cacheKey":"data:wydm753:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":132500},{"geohashId":"wydm759","cacheKey":"data:wydm759:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":134600},{"geohashId":"wydm75c","cacheKey":"data:wydm75c:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":154000}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1574500,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:43:41.284 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.284828800Z","nanoTime":27407298584000,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:43:41.284 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:43:41.284 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:43:41.287 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 31건
2025-11-21 19:43:41.289 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:43:41.290 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 7개
2025-11-21 19:43:41.290 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.290834900Z","nanoTime":27407304639400,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6055400,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydm75d","wydm75f","wydm75g","wydm75e","wydm757","wydm756","wydm753","wydm759","wydm75c"],"cctvQueryResult":{"queryGeohashIds":["wydm75d","wydm75f","wydm75g","wydm75e","wydm757","wydm756","wydm753","wydm759","wydm75c"],"totalRowsReturned":31,"rowsPerGrid":{"wydm759":3,"wydm75d":3,"wydm753":3,"wydm757":3,"wydm75g":8,"wydm75f":5,"wydm75e":6},"queryExecutionTimeNs":3774100,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm759","cacheKey":"data:wydm759:cctv","dataCount":3,"dataSize":412,"errorMessage":null,"success":true},{"geohashId":"wydm75d","cacheKey":"data:wydm75d:cctv","dataCount":3,"dataSize":412,"errorMessage":null,"success":true},{"geohashId":"wydm753","cacheKey":"data:wydm753:cctv","dataCount":3,"dataSize":412,"errorMessage":null,"success":true},{"geohashId":"wydm757","cacheKey":"data:wydm757:cctv","dataCount":3,"dataSize":406,"errorMessage":null,"success":true},{"geohashId":"wydm75g","cacheKey":"data:wydm75g:cctv","dataCount":8,"dataSize":1093,"errorMessage":null,"success":true},{"geohashId":"wydm75f","cacheKey":"data:wydm75f:cctv","dataCount":5,"dataSize":679,"errorMessage":null,"success":true},{"geohashId":"wydm75e","cacheKey":"data:wydm75e:cctv","dataCount":6,"dataSize":823,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:43:41.290 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.290834900Z","nanoTime":27407304811500,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:43:41.290 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:43:41.290 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5048, 127.0491)
2025-11-21 19:43:41.290 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:43:41.387 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:43:41.387 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:43:41.388 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:43:41.388 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5048, 127.0491), 반경: 500m
2025-11-21 19:43:41.470 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:43:41.470 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 130건
2025-11-21 19:43:41.471 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:43:41.471 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:43:41.471 [http-nio-8185-exec-10] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:43:41.471 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:43:41.471 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:43:41.471 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:43:41.471 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:43:41.472 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.471419800Z","nanoTime":27407486048200,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":181236700,"duration_ms":181,"resultData":{"latitude":37.5048,"longitude":127.0491,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":181140900,"addressApiResult":{"cached":false,"cacheKey":"address:37.5048:127.0491","roadAddress":"주소 없음","jibunAddress":"서울 강남구 삼성동 172-66","responseSize":60,"executionTimeNs":97593500,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":29500,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5048:127.0491:500","categoryCount":15,"placesByCategory":{"CT1":5,"AT4":0,"CS2":15,"SC4":3,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":0,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":130,"responseSize":15054,"executionTimeNs":83517900,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:41.472 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.472414700Z","nanoTime":27407486215200,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:43:41.472 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:43:41.472 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:43:41.472 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 31개
2025-11-21 19:43:41.472 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 31개 (총 카메라 대수: 105대)
2025-11-21 19:43:41.472 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:43:41.541 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 은평구  통일로 737 (거리: 611m)
2025-11-21 19:43:41.541 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:43:41.542 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:43:41.542 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 11개 카테고리
2025-11-21 19:43:41.542 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:43:41.542 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.542447300Z","nanoTime":27407556386100,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":70170900,"duration_ms":70,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":31,"totalCctvAfterFilter":31,"totalCameraCount":105,"filterRate":1.0,"filterExecutionTimeNs":19100,"success":true},"policeQuery":{"queryDurationNs":69715400,"found":true,"nearestAddress":"서울특별시 은평구  통일로 737","nearestDistance":611.435347972041,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":5,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SC4":3,"SW8":2,"FD6":15,"PK6":15,"PM9":15},"placesAfterFilter":{"CT1":5,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SC4":3,"SW8":2,"FD6":15,"PK6":15,"PM9":15},"totalBeforeFilter":130,"totalAfterFilter":130,"filterRate":1.0,"filterExecutionTimeNs":125500,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:41.542 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.542447300Z","nanoTime":27407556639100,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:43:41.542 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:43:41.542 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 47.07, 편의성: 46.34, 종합: 46.71
2025-11-21 19:43:41.542 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.542447300Z","nanoTime":27407556952700,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":313600,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":23.57058150349488,"policeDistance":611.435347972041,"cctvScore":100.0,"cctvCount":31,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":47.07117445104846,"success":true},"convenienceScore":{"categoryScores":{"CT1":20.0,"BK9":75.0,"HP8":100.0,"CS2":3.75,"AC5":15.0,"CE7":30.0,"SC4":6.0,"SW8":100.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":46.34090909090909,"success":true},"overallScore":46.70604177097878,"errorMessage":null,"success":true}}
2025-11-21 19:43:41.542 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.542447300Z","nanoTime":27407557081200,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:43:41.542 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:43:41.542 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 은평구  통일로 737, latitude=37.501333, longitude=127.04372, geohashId=wydm6fy)
2025-11-21 19:43:41.542 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 611.435347972041
2025-11-21 19:43:41.544 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm75d
2025-11-21 19:43:41.544 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:43:41.544 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.544420700Z","nanoTime":27407558368800,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1287600,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["병원이(가) 19m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm75d","dataSize":19645,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19645,"errorMessage":null,"success":true}}
2025-11-21 19:43:41.544 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:43:44.913 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:43:44.913 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.4854, longitude=126.9013, radius=500)
2025-11-21 19:43:44.914 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:43:44.914 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.4854, longitude=126.9013, radius=500
2025-11-21 19:43:44.914 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:44.914582800Z","nanoTime":27410928401500,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:43:44.914 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:43:44.914 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.4854, lon=126.9013
2025-11-21 19:43:44.914 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:44.914582800Z","nanoTime":27410928498700,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:43:44.914 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:44.914582800Z","nanoTime":27410928606900,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":108200,"duration_ms":0,"resultData":{"latitude":37.4854,"longitude":126.9013,"precision":7,"centerHash":"wydjr8n","adjacentHashes":["wydjr8n","wydjr8q","wydjr8r","wydjr8p","wydjpxz","wydjpxy","wydjpxv","wydjr8j","wydjr8m"],"errorMessage":null,"success":true}}
2025-11-21 19:43:44.914 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydjr8n, wydjr8q, wydjr8r, wydjr8p, wydjpxz, wydjpxy, wydjpxv, wydjr8j, wydjr8m]
2025-11-21 19:43:44.914 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydjr8n
2025-11-21 19:43:44.914 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:44.914582800Z","nanoTime":27410928801600,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":400100,"duration_ms":0,"resultData":{"requestLatitude":37.4854,"requestLongitude":126.9013,"requestRadius":500,"centerGeohashId":"wydjr8n","nineBlockGeohashes":["wydjr8n","wydjr8q","wydjr8r","wydjr8p","wydjpxz","wydjpxy","wydjpxv","wydjr8j","wydjr8m"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:43:44.914 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:44.914582800Z","nanoTime":27410928889900,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:43:44.914 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:43:44.914 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydjr8n
2025-11-21 19:43:44.915 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4513ms)
2025-11-21 19:43:44.915 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:43:44.916 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:43:44.916 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:43:44.916 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.2526ms, 역직렬화: 0.0ms
2025-11-21 19:43:44.916 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:43:44.916 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:44.916581500Z","nanoTime":27410930821000,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1931100,"duration_ms":1,"resultData":{"centerGeohashId":"wydjr8n","nineBlockGeohashes":["wydjr8n","wydjr8q","wydjr8r","wydjr8p","wydjpxz","wydjpxy","wydjpxv","wydjr8j","wydjr8m"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydjr8n","hit":false,"valueSize":0,"l1CacheGetDurationNs":451300,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydjr8n","cacheKey":"data:wydjr8n:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":256500},{"geohashId":"wydjr8q","cacheKey":"data:wydjr8q:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":138600},{"geohashId":"wydjr8r","cacheKey":"data:wydjr8r:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":123400},{"geohashId":"wydjr8p","cacheKey":"data:wydjr8p:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":113000},{"geohashId":"wydjpxz","cacheKey":"data:wydjpxz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":112500},{"geohashId":"wydjpxy","cacheKey":"data:wydjpxy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":112900},{"geohashId":"wydjpxv","cacheKey":"data:wydjpxv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":120300},{"geohashId":"wydjr8j","cacheKey":"data:wydjr8j:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":113200},{"geohashId":"wydjr8m","cacheKey":"data:wydjr8m:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":112100}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1252600,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:43:44.916 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:44.916581500Z","nanoTime":27410930955900,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:43:44.916 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:43:44.916 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:43:44.921 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 59건
2025-11-21 19:43:44.925 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:43:44.925 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:43:44.925 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:44.925582900Z","nanoTime":27410939552800,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":8596900,"duration_ms":8,"resultData":{"inputCctvMissGrids":["wydjr8n","wydjr8q","wydjr8r","wydjr8p","wydjpxz","wydjpxy","wydjpxv","wydjr8j","wydjr8m"],"cctvQueryResult":{"queryGeohashIds":["wydjr8n","wydjr8q","wydjr8r","wydjr8p","wydjpxz","wydjpxy","wydjpxv","wydjr8j","wydjr8m"],"totalRowsReturned":59,"rowsPerGrid":{"wydjr8p":7,"wydjr8q":12,"wydjr8n":2,"wydjpxv":2,"wydjr8r":11,"wydjpxz":2,"wydjpxy":5,"wydjr8m":8,"wydjr8j":10},"queryExecutionTimeNs":5264600,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydjr8p","cacheKey":"data:wydjr8p:cctv","dataCount":7,"dataSize":987,"errorMessage":null,"success":true},{"geohashId":"wydjr8q","cacheKey":"data:wydjr8q:cctv","dataCount":12,"dataSize":1593,"errorMessage":null,"success":true},{"geohashId":"wydjr8n","cacheKey":"data:wydjr8n:cctv","dataCount":2,"dataSize":255,"errorMessage":null,"success":true},{"geohashId":"wydjpxv","cacheKey":"data:wydjpxv:cctv","dataCount":2,"dataSize":271,"errorMessage":null,"success":true},{"geohashId":"wydjr8r","cacheKey":"data:wydjr8r:cctv","dataCount":11,"dataSize":1489,"errorMessage":null,"success":true},{"geohashId":"wydjpxz","cacheKey":"data:wydjpxz:cctv","dataCount":2,"dataSize":272,"errorMessage":null,"success":true},{"geohashId":"wydjpxy","cacheKey":"data:wydjpxy:cctv","dataCount":5,"dataSize":685,"errorMessage":null,"success":true},{"geohashId":"wydjr8m","cacheKey":"data:wydjr8m:cctv","dataCount":8,"dataSize":1036,"errorMessage":null,"success":true},{"geohashId":"wydjr8j","cacheKey":"data:wydjr8j:cctv","dataCount":10,"dataSize":1360,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:43:44.925 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:44.925582900Z","nanoTime":27410939799300,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:43:44.925 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:43:44.925 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.4854, 126.9013)
2025-11-21 19:43:44.925 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:43:44.991 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:43:44.991 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:43:44.991 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:43:44.991 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.4854, 126.9013), 반경: 500m
2025-11-21 19:43:45.084 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:43:45.084 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 131건
2025-11-21 19:43:45.085 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:43:45.085 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:43:45.085 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 구로구
2025-11-21 19:43:45.085 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 미스 - DB 조회
2025-11-21 19:43:45.089 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 성공 및 캐싱 완료 - 구로구: 0.704705259
2025-11-21 19:43:45.089 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:43:45.089 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:43:45.089 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:43:45.089 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.704705259
2025-11-21 19:43:45.089 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:45.089672400Z","nanoTime":27411104223700,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":164424400,"duration_ms":164,"resultData":{"latitude":37.4854,"longitude":126.9013,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":164269500,"addressApiResult":{"cached":false,"cacheKey":"address:37.4854:126.9013","roadAddress":"서울특별시 구로구 도림천로 477","jibunAddress":"서울 구로구 구로동 810-3","responseSize":72,"executionTimeNs":65438100,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":"arrest_rate:구로구","guName":"구로구","arrestRate":0.704705259,"dataFound":true,"executionTimeNs":4332300,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.4854:126.9013:500","categoryCount":15,"placesByCategory":{"CT1":3,"AT4":3,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":14},"totalPlaces":131,"responseSize":15332,"executionTimeNs":94499100,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:45.090 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:45.090665700Z","nanoTime":27411104422200,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:43:45.090 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:43:45.090 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:43:45.090 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 59개
2025-11-21 19:43:45.090 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 59개 (총 카메라 대수: 73대)
2025-11-21 19:43:45.090 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:43:45.159 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구  동작대로9길 35 (거리: 433m)
2025-11-21 19:43:45.160 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:43:45.160 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:43:45.160 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:43:45.160 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:43:45.160 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:45.160665300Z","nanoTime":27411174682900,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":70260700,"duration_ms":70,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":59,"totalCctvAfterFilter":59,"totalCameraCount":73,"filterRate":1.0,"filterExecutionTimeNs":32500,"success":true},"policeQuery":{"queryDurationNs":69685500,"found":true,"nearestAddress":"서울특별시 동작구  동작대로9길 35","nearestDistance":432.65409157883056,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":3,"AT4":3,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":14},"placesAfterFilter":{"CT1":3,"AT4":3,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":14},"totalBeforeFilter":131,"totalAfterFilter":131,"filterRate":1.0,"filterExecutionTimeNs":183700,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:45.160 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:45.160665300Z","nanoTime":27411174898500,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:43:45.160 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:43:45.160 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 74.92, 편의성: 35.18, 종합: 55.05
2025-11-21 19:43:45.160 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:45.160665300Z","nanoTime":27411175122400,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":223900,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":45.91823855264618,"policeDistance":432.65409157883056,"cctvScore":100.0,"cctvCount":59,"arrestRateScore":70.4705259,"arrestRate":0.704705259,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":74.91662933579386,"success":true},"convenienceScore":{"categoryScores":{"CT1":12.0,"AT4":9.0,"CS2":3.6415191446799833,"SC4":2.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":6.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"구로구","guPopulation":411916,"finalScore":35.176101276312,"success":true},"overallScore":55.04636530605293,"errorMessage":null,"success":true}}
2025-11-21 19:43:45.160 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:45.160665300Z","nanoTime":27411175243900,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:43:45.160 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:43:45.160 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구  동작대로9길 35, latitude=37.486642, longitude=126.905947, geohashId=wydjrb4)
2025-11-21 19:43:45.160 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 432.65409157883056
2025-11-21 19:43:45.162 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydjr8n
2025-11-21 19:43:45.162 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:43:45.162 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:45.162670900Z","nanoTime":27411176565700,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1321800,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["지하철역이(가) 22m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydjr8n","dataSize":23586,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":23586,"errorMessage":null,"success":true}}
2025-11-21 19:43:45.162 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:43:58.470 [SpringApplicationShutdownHook] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 스레드 풀 종료 시작
2025-11-21 19:43:58.471 [SpringApplicationShutdownHook] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 스레드 풀 종료 완료
2025-11-21 19:43:58.472 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-21 19:43:58.474 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-21 19:43:58.481 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
