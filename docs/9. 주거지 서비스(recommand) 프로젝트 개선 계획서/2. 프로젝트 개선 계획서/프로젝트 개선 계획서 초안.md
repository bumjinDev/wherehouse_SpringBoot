# 데이터 기반 사용자 맞춤형 부동산 추천 시스템 개발 계획서

**문서 분류**: 기술 개발 계획서  
**프로젝트명**: 데이터 기반 사용자 맞춤형 부동산 추천 시스템  
**버전**: 1.0  
**작성일**: 2025년 8월  
**승인**: [승인자명]  
**배포**: 개발팀, 기획팀  

---

## 목차

1. [프로젝트 개요](#1-프로젝트-개요)
2. [현 시스템 분석](#2-현-시스템-분석)
3. [기술적 요구사항](#3-기술적-요구사항)
4. [시스템 설계 전략](#4-시스템-설계-전략)
5. [개발 계획](#5-개발-계획)
6. [품질 보증](#6-품질-보증)
7. [위험 관리](#7-위험-관리)
8. [자원 계획](#8-자원-계획)

---

## 1. 프로젝트 개요

### 1.1 프로젝트 배경

현재 운영 중인 부동산 추천 시스템은 사용자가 입력한 안전점수와 편의점수의 단순 대소 비교를 통해 추천 기준을 결정하는 방식을 채택하고 있다. 그러나 이러한 접근법은 매물 부족 상황에서 빈 결과를 반환하거나, 사용자의 실제 우선순위를 정확히 반영하지 못하는 구조적 한계를 보이고 있다.

### 1.2 프로젝트 목표

**주요 목표**
- 데이터 기반 객관적 안전성 점수 모델 구축
- 사용자 우선순위를 반영한 지능형 폴백 시스템 개발
- 성능과 정확성 최적화를 위한 다중 아키텍처 구현

**정량적 목표**

| 지표 | 현재 상태 | 목표 상태 | 측정 방법 |
|------|-----------|-----------|-----------|
| 매물 부족 시 빈 결과율 | 35% | 5% 이하 | 월별 추천 성공률 측정 |
| 사용자 만족도 | 측정 불가 | 4.0/5.0 이상 | 추천 결과 만족도 설문 |
| 시스템 응답 시간 | 2-5초 | 1초 이내 | API 응답 시간 모니터링 |
| 추천 근거 제공률 | 0% | 100% | 추천 결과 설명 포함 여부 |

### 1.3 프로젝트 범위

**포함 범위**
- 서울시 25개 자치구 대상 안전성 점수 산출
- 19종 시설물 데이터 기반 통계 분석
- 2단계 폴백 추천 로직 개발
- 실시간/배치 처리 아키텍처 성능 비교
- 기존 UI와의 연동 개선

**제외 범위**
- 서울시 외 지역 확대
- 모바일 앱 개발
- 사용자 인증 시스템 개편
- 결제 시스템 연동

---

## 2. 현 시스템 분석

### 2.1 기존 시스템 구조 분석

**컨트롤러 계층**

| 클래스명 | 엔드포인트 | 담당 기능 | 문제점 |
|----------|------------|----------|---------|
| RecServiceController | /charter | 전세 추천 처리 | 중복 로직 존재 |
| RecServiceController | /monthly | 월세 추천 처리 | 동일 구조 반복 |

**서비스 계층**

| 클래스명 | 핵심 로직 | 현재 문제점 | 개선 필요사항 |
|----------|-----------|------------|---------------|
| RecommandCharterService | 전세 추천 로직 | 조건문 중복 오류 | 로직 재구성 필요 |
| RecServiceMonthlyService | 월세 추천 로직 | 하드코딩된 매직넘버 | 설정값 외부화 |

**데이터베이스 설계**

| 테이블명 | 주요 컬럼 | 현재 활용도 | 개선 방향 |
|----------|-----------|------------|----------|
| gu_info | gu_id, gu_name, safe_score, cvt_score | 정적 점수만 활용 | 동적 점수 계산으로 전환 |

### 2.2 현재 로직의 세부 문제 분석

**조건 분기 오류**

현재 전세 추천 서비스의 조건 분기에서 다음과 같은 논리적 오류가 발견되었다:

```
if (safe_score > cvt_score) {
    // 안전 우선 정렬
} else if (safe_score < cvt_score) {
    // 편의 우선 정렬 (실행되지 않는 분기)
} else {
    // 동일 점수 처리
}
```

이 구조에서 두 번째 조건이 올바르게 작동하지 않아 편의성을 우선시하는 사용자의 요구사항이 반영되지 않고 있다.

**하드코딩된 제약사항**

| 하드코딩 요소 | 현재 값 | 문제점 | 개선 방안 |
|---------------|---------|---------|-----------|
| 결과 개수 제한 | ROWNUM <= 3 | 상황별 조정 불가 | 동적 개수 설정 |
| 점수 임계값 | *10 < 60 | 의미 불명확 | 비즈니스 규칙 명문화 |
| 가중치 계산 | safe_score+1 | 근거 부재 | 통계적 가중치 적용 |

### 2.3 사용자 요구사항 분석

**현재 처리 방식의 한계**

| 사용자 입력 예시 | 현재 처리 | 사용자 실제 의도 | 문제점 |
|-----------------|-----------|-----------------|---------|
| 안전 75점, 편의 70점 | 안전 절대 우선 | 안전 약간 선호 | 의도 왜곡 |
| 안전 60점, 편의 90점 | 잘못된 분기 실행 | 편의 절대 우선 | 로직 오류 |
| 조건 만족 매물 1개 | 1개만 반환 | 대안 매물 희망 | 선택권 부족 |

---

## 3. 기술적 요구사항

### 3.1 시스템 아키텍처 요구사항

**개발 환경 사양**

| 구분 | 기술 스택 | 버전 | 선정 근거 |
|------|-----------|------|-----------|
| 개발 언어 | Java | 17 LTS | 장기 지원, 성능 최적화 |
| 프레임워크 | Spring Boot | 3.3.5 | 최신 안정 버전 |
| 데이터베이스 | Oracle Database | 19c | 기존 인프라 연계 |
| 캐싱 시스템 | Redis | 7.0+ | 고성능 인메모리 처리 |
| 빌드 도구 | Gradle | 8.0+ | 의존성 관리 효율성 |

**핵심 라이브러리 요구사항**

| 라이브러리명 | 버전 | 용도 | 필수 여부 |
|-------------|------|------|-----------|
| Spring Data JPA | 3.1+ | 데이터 접근 계층 | 필수 |
| Apache Commons Math | 3.6+ | 통계 분석 | 필수 |
| OpenCSV | 5.9+ | CSV 데이터 처리 | 필수 |
| Spring WebFlux | 3.1+ | 비동기 API 호출 | 필수 |
| Lombok | 1.18+ | 코드 간소화 | 권장 |

### 3.2 데이터 요구사항

**수집 완료 데이터 현황**

| 데이터 분류 | 세부 데이터 | 수량 | 수집 방식 | 업데이트 주기 |
|-------------|-------------|------|-----------|---------------|
| 범죄 통계 | 5대 범죄 발생 현황 | 25개구 | CSV 파일 | 연 1회 |
| 경찰 시설 | 경찰서, 지구대, 파출소 | 전국 | 표준데이터 | 연 1회 |
| 감시 시설 | CCTV, 가로등 | 서울시 | CSV/API | 분기 1회 |
| 편의 시설 | 편의점, 은행, 병원, 주민센터 | 서울시 | API | 월 1회 |
| 위험 요소 | 유흥업소, 모텔, PC방, 노래방 | 서울시 | CSV/API | 월 1회 |
| 교통 시설 | 지하철역 | 서울시 | 표준데이터 | 분기 1회 |
| 교육 시설 | 초중고등학교, 대학교 | 서울시 | 표준데이터 | 연 1회 |
| 상업 시설 | 마트, 백화점, 영화관 | 서울시 | API | 월 1회 |

**데이터 품질 요구사항**

| 품질 지표 | 목표 수준 | 측정 방법 | 대응 방안 |
|-----------|-----------|-----------|-----------|
| 완전성 | 95% 이상 | 필수 필드 누락률 | 자동 검증 로직 |
| 정확성 | 98% 이상 | 좌표 검증률 | 카카오맵 API 교차 검증 |
| 일관성 | 100% | 데이터 형식 통일률 | 표준화 변환 로직 |
| 최신성 | 업데이트 주기 준수 | 데이터 갱신률 | 자동 수집 스케줄러 |

### 3.3 성능 요구사항

**응답 시간 목표**

| 처리 유형 | 목표 응답 시간 | 허용 한계 | 측정 조건 |
|-----------|---------------|-----------|-----------|
| 기본 추천 조회 | 500ms 이하 | 1초 이하 | 동시 사용자 100명 |
| 확장 검색 처리 | 1초 이하 | 3초 이하 | 조건 2단계 확장 |
| 안전성 점수 계산 | 100ms 이하 | 300ms 이하 | 단일 좌표 기준 |
| 배치 처리 완료 | 1시간 이하 | 2시간 이하 | 전체 격자 계산 |

**처리량 목표**

| 처리 시나리오 | 목표 TPS | 허용 한계 | 부하 조건 |
|---------------|----------|-----------|-----------|
| 일반 추천 요청 | 200 TPS | 100 TPS | 8시간 지속 |
| 피크 시간대 | 500 TPS | 300 TPS | 2시간 지속 |
| 배치 처리 시 | 50 TPS | 30 TPS | 일반 서비스 동시 |

---

## 4. 시스템 설계 전략

### 4.1 핵심 문제 해결 전략

**문제 1: 데이터 입도 불일치**

구 단위로 집계된 범죄 통계와 개별 매물 위치 간의 해상도 차이를 해결하기 위해 2단계 복합 분석 방법론을 채택한다.

| 단계 | 처리 대상 | 분석 방법 | 활용 데이터 |
|------|-----------|-----------|-------------|
| 1단계 | 구별 거시적 분석 | 피어슨 상관분석 | 25개구 범죄통계 + 시설물 밀도 |
| 2단계 | 좌표별 미시적 분석 | 반경 내 시설물 집계 | 개별 시설물 좌표 데이터 |

**문제 2: 매물 부족 상황 대응**

사용자 우선순위를 고려한 지능형 조건 완화 시스템을 구축한다.

| 우선순위 유형 | 절대 보존 조건 | 1차 완화 대상 | 2차 완화 대상 |
|---------------|---------------|---------------|---------------|
| 가격 우선형 | 예산 범위 | 안전 기준 | 평수 조건 |
| 안전 우선형 | 안전 임계값 | 예산 범위 | 지역 범위 |
| 평수 우선형 | 최소 평수 | 예산 범위 | 안전 기준 |
| 교통 우선형 | 역세권 거리 | 예산 범위 | 평수 조건 |

**문제 3: 추천 근거 부재**

템플릿 기반 설명 생성 시스템을 통해 추천 이유를 명확히 제시한다.

| 추천 시나리오 | 근거 템플릿 | 포함 정보 |
|---------------|-------------|-----------|
| 기본 추천 | "{우선순위}에서 {점수}점으로 상위 {순위}%" | 점수, 순위, 비교 기준 |
| 확장 추천 | "{조건} 조건을 완화하여 {개수}개 추가 발견" | 완화 내용, 추가 매물 수 |
| 경계 사례 | "인근 {구이름}에서 더 좋은 조건 발견" | 대안 지역, 개선 요소 |

### 4.2 아키텍처 설계 원칙

**성능과 정확성의 균형**

두 가지 상반된 아키텍처를 동시 구현하여 상황별 최적 선택을 지원한다.

| 아키텍처 유형 | 설계 원칙 | 적용 시나리오 | 예상 성능 |
|---------------|-----------|---------------|-----------|
| 실시간 조회 시스템 | 정확성 최우선 | 매물 상세 검색 | 응답: 1-3초, 정확도: 100% |
| 배치 격자 시스템 | 성능 최우선 | 일반 추천 조회 | 응답: 0.1초, 정확도: 95% |

**확장성 확보 전략**

| 확장 영역 | 설계 방식 | 확장 계획 |
|-----------|-----------|-----------|
| 지역 확장 | 지역 코드 기반 모듈화 | 부산, 인천 등 순차 확대 |
| 데이터 추가 | 플러그인 아키텍처 | 교통량, 소음도 등 신규 지표 |
| 알고리즘 개선 | 전략 패턴 적용 | 머신러닝, 딥러닝 알고리즘 |

### 4.3 통계 분석 설계

**피어슨 상관분석 적용**

서울시 25개 자치구를 분석 단위로 하여 범죄율과 환경 요소 간 상관관계를 분석한다.

| 분석 변수 | 변수 유형 | 데이터 소스 | 정규화 방법 |
|-----------|-----------|-------------|-------------|
| 구별 범죄율 | 종속변수 | 5대범죄 발생 현황 | Min-Max 스케일링 |
| CCTV 밀도 | 독립변수 | CCTV 설치 현황 | 면적당 개수 |
| 유흥업소 밀도 | 독립변수 | 유흥업소 현황 | 면적당 개수 |
| 편의점 밀도 | 독립변수 | 카카오맵 API | 면적당 개수 |
| 경찰시설 개수 | 독립변수 | 경찰시설 표준데이터 | 구별 절대 개수 |

**가중치 산출 방법론**

상관계수의 절댓값과 통계적 유의성을 기준으로 가중치를 결정한다.

| 상관계수 범위 | 가중치 수준 | 통계적 해석 | 활용 방안 |
|---------------|-------------|-------------|-----------|
| |r| ≥ 0.7 | 높음 (70-100) | 강한 상관관계 | 주요 지표로 활용 |
| 0.5 ≤ |r| < 0.7 | 중간 (40-69) | 중간 상관관계 | 보조 지표로 활용 |
| 0.3 ≤ |r| < 0.5 | 낮음 (10-39) | 약한 상관관계 | 참고 지표로 활용 |
| |r| < 0.3 | 제외 (0) | 상관관계 없음 | 분석 대상 제외 |

---

## 5. 개발 계획

### 5.1 전체 개발 일정

**프로젝트 타임라인**

| 주차 | 기간 | 주요 마일스톤 | 핵심 산출물 | 담당자 | 완료 기준 |
|------|------|---------------|-------------|---------|-----------|
| 1-2주 | 1-14일 | 데이터 인프라 구축 | ERD, 인덱스 설계서 | DB 엔지니어 | 전체 테이블 생성 완료 |
| 3-4주 | 15-28일 | 좌표 시스템 구축 | 지오코딩 모듈 | 백엔드 개발자 | 19종 데이터 좌표 변환 |
| 5-6주 | 29-42일 | 통계 분석 구현 | 상관분석 엔진 | 데이터 분석가 | 25개구 가중치 도출 |
| 7-8주 | 43-56일 | 추천 로직 개발 | 폴백 시스템 | 백엔드 개발자 | API 테스트 통과 |
| 9-10주 | 57-70일 | 성능 최적화 | 캐싱 시스템 | 시스템 엔지니어 | 성능 목표 달성 |
| 11-12주 | 71-84일 | 아키텍처 비교 | 성능 분석 보고서 | 전체 팀 | 최종 검수 완료 |

### 5.2 Phase별 상세 계획

**Phase 1: 데이터 인프라 구축 (1-2주)**

*작업 범위 및 산출물*

| 작업명 | 상세 내용 | 예상 소요시간 | 산출물 | 검증 기준 |
|--------|-----------|---------------|---------|-----------|
| ERD 설계 | 19종 데이터 정규화 및 관계 정의 | 3일 | 논리/물리 ERD | DBA 검토 승인 |
| 테이블 생성 | DDL 작성 및 실행 | 2일 | DDL 스크립트 | 전체 테이블 생성 확인 |
| 인덱스 설계 | 성능 최적화를 위한 인덱스 전략 수립 | 3일 | 인덱스 설계서 | 쿼리 성능 테스트 |
| 데이터 적재 | CSV 로더 및 API 수집기 구현 | 4일 | 데이터 로딩 모듈 | 19종 데이터 적재 완료 |
| 품질 검증 | 데이터 일관성 및 완전성 검사 | 2일 | 품질 검증 보고서 | 품질 기준 95% 충족 |

*기술적 세부 요구사항*

| 구성요소 | 기술 사양 | 설계 기준 | 성능 목표 |
|----------|-----------|-----------|-----------|
| 좌표 인덱스 | Oracle Spatial Index | R-tree 구조 | 반경 검색 < 100ms |
| 복합 인덱스 | 구별 + 가격 + 면적 | Composite Index | 필터링 쿼리 < 50ms |
| 파티셔닝 | 월별 데이터 분할 | Range Partitioning | 배치 처리 최적화 |

**Phase 2: 좌표 시스템 구축 (3-4주)**

*카카오맵 API 연동 전략*

| 처리 단계 | 작업 내용 | API 호출량 | 예상 비용 | 최적화 방안 |
|-----------|-----------|-----------|-----------|-------------|
| 주소 표준화 | 시설물 주소 정제 | - | - | 정규식 패턴 매칭 |
| 좌표 변환 | 주소 → 위경도 변환 | 50,000건 | 무료 한도 내 | 배치 처리로 최적화 |
| 좌표 검증 | 서울시 경계 내 위치 확인 | - | - | 경계 폴리곤 검사 |
| 데이터 저장 | 좌표 테이블 업데이트 | - | - | 트랜잭션 단위 처리 |

*지오코딩 품질 관리*

| 품질 지표 | 목표 수준 | 검증 방법 | 개선 방안 |
|-----------|-----------|-----------|-----------|
| 좌표 정확도 | 95% 이상 | 샘플 현장 확인 | 수동 보정 |
| 변환 성공률 | 98% 이상 | API 응답 상태 | 주소 표준화 강화 |
| 중복 제거 | 100% | 좌표 클러스터링 | 반경 10m 내 통합 |

**Phase 3: 통계 분석 구현 (5-6주)**

*상관분석 구현 명세*

| 분석 단계 | 처리 방법 | 활용 라이브러리 | 출력 형식 |
|-----------|-----------|----------------|-----------|
| 데이터 준비 | 구별 집계 및 정규화 | Apache Commons Math | 25×N 행렬 |
| 상관계수 계산 | 피어슨 상관분석 | PearsonsCorrelation | 상관계수 매트릭스 |
| 유의성 검정 | p-value 계산 | TTest | 유의성 판정 결과 |
| 가중치 산출 | 상관계수 기반 정규화 | 자체 구현 | 가중치 설정 테이블 |

*통계 분석 품질 기준*

| 품질 항목 | 기준 값 | 검증 방법 | 대응 방안 |
|-----------|---------|-----------|-----------|
| 표본 크기 | n=25 (25개구) | 자동 검증 | 고정값 |
| 유의수준 | p < 0.05 | t-검정 | 유의하지 않은 변수 제외 |
| 다중공선성 | VIF < 10 | 분산팽창계수 | 상관도 높은 변수 제거 |

**Phase 4: 추천 로직 개발 (7-8주)**

*폴백 시스템 구현 명세*

| 폴백 단계 | 처리 로직 | 완화 기준 | 중단 조건 |
|-----------|-----------|-----------|-----------|
| 1단계 검색 | 기본 조건 적용 | - | 매물 3개 이상 |
| 2단계 확장 | 3순위 조건 완화 | 사용자 설정 범위 | 매물 3개 이상 |
| 3단계 확장 | 2순위 조건 완화 | 사용자 설정 범위 | 매물 1개 이상 |
| 최종 처리 | 전체 지역 대안 제시 | 1순위 조건 유지 | 항상 실행 |

*API 엔드포인트 설계*

| 엔드포인트 | HTTP 메서드 | 요청 파라미터 | 응답 형식 |
|-------------|-------------|---------------|-----------|
| /api/recommendations | POST | 조건, 우선순위 | JSON 추천 결과 |
| /api/safety-score | GET | 좌표 | JSON 점수 정보 |
| /api/fallback-status | GET | 검색 ID | JSON 확장 이력 |

### 5.3 테스트 계획

**단위 테스트 범위**

| 테스트 대상 | 테스트 시나리오 | 검증 기준 | 자동화 여부 |
|-------------|----------------|-----------|-------------|
| 상관분석 엔진 | 25개구 데이터 처리 | 계수 정확도 ±0.01 | 자동 |
| 폴백 로직 | 우선순위별 확장 | 조건 완화 순서 | 자동 |
| 지오코딩 | 좌표 변환 정확도 | 위치 오차 < 100m | 자동 |
| 성능 측정 | 응답시간 측정 | 목표 시간 준수 | 자동 |

**통합 테스트 시나리오**

| 시나리오 | 테스트 데이터 | 예상 결과 | 성공 기준 |
|----------|---------------|-----------|-----------|
| 정상 추천 | 일반적 조건 | 3개구 추천 | 응답시간 < 1초 |
| 매물 부족 | 까다로운 조건 | 확장 검색