# 안전성 점수 산출을 위한 데이터 분석 프로세스 명세서

**프로젝트명**: 부동산 추천 시스템 - 안전성 점수 산출 분석  
**문서 버전**: 2.0  
**작성일**: 2025.09.01  
**작성자**: 정범진  

---

## 1. 개요

### 1.1 목적

본 명세서는 부동산 추천 시스템의 핵심 구성 요소인 안전성 점수 모델의 가중치 도출을 위한 데이터 분석 프로세스를 정의한다. 서울시 25개 자치구의 환경 요인과 범죄율 간의 피어슨 상관관계 분석을 통해 객관적이고 재현 가능한 안전성 점수 산출 근거를 확립하며, 통계적으로 유의미한 환경 요인을 식별하여 1인 가구 사용자의 체감 안전성을 정량화할 수 있는 분석 프레임워크를 제시한다.

**1인 가구 특화 안전성 평가의 필요성**

1인 가구는 일반적인 가구 형태와 구별되는 고유한 안전 취약성을 갖는다. 야간 귀가 시 동행자 없이 혼자 이동해야 하는 상황, 주거지 내 외부 위협에 대한 단독 대응의 어려움, 응급상황 발생 시 즉시 도움을 요청할 수 있는 주변 인프라의 중요성 등이 대표적이다. 이러한 1인 가구만의 특수한 안전 요구사항을 반영하기 위해서는 기존의 일반적인 범죄 통계를 넘어선 맞춤형 안전성 지표가 필요하다.

특히 심야 시간대 자연적 감시 기능을 수행하는 24시간 편의점의 밀도, 야간 조도 확보를 위한 가로등 분포, 음주 관련 위험 요소인 유흥업소 집중도 등은 1인 가구의 생활 패턴과 직접적으로 연관된 환경 요인들이다. 본 분석은 이러한 요인들과 실제 범죄 발생률 간의 상관관계를 정량적으로 규명함으로써 1인 가구 중심의 안전성 평가 체계를 구축하고자 한다.

### 1.2 범위

본 명세서는 분석용 데이터셋 구축부터 최종 가중치 산출까지의 전 과정을 포함한다. 분석 대상은 서울시 25개 자치구이며, 환경 안전 요소와 범죄율 간 피어슨 상관분석, 탐색적 데이터 분석, 이상치 처리, 통계적 유의성 검증, 비즈니스 로직 타당성 검토 및 해석을 다룬다. 산출된 가중치의 실제 추천 시스템 적용, 사용자 인터페이스 개발, 실시간 데이터 수집 로직은 본 명세서의 범위에서 제외된다.

**분석 모델의 한계와 적용 범위**

본 분석은 구 단위 집계 데이터를 기반으로 하는 간접 추정 모델의 특성상 일정한 한계를 갖는다. 사용자가 실제로 체감하는 안전도는 구체적인 거주 위치, 개별 건물의 보안 상태, 주변 미시 환경 등에 크게 좌우되지만, 공공데이터의 제약으로 인해 이러한 세밀한 정보는 직접 반영할 수 없다.

이러한 한계를 보완하기 위해 본 분석에서는 거시적 통계(구별 범죄율)와 미시적 환경 지표(시설물 밀도)를 결합한 복합 접근법을 채택한다. 구 단위 범죄 통계는 해당 지역의 전반적 치안 수준을 나타내는 객관적 지표로 활용하고, 개별 시설물의 분포 밀도는 실제 거주 환경의 안전 인프라 수준을 간접적으로 추정하는 보정 요인으로 활용한다.

따라서 본 분석을 통해 도출된 안전성 점수는 절대적인 안전도가 아닌 상대적 비교 지표로 해석되어야 하며, 최종 주거지 선택 시에는 개별 매물의 구체적 환경 조건과 함께 종합적으로 고려되어야 한다.

### 1.3 기반 문서

본 명세서는 부동산 추천 시스템 안전성 점수 설계서의 학술적 근거 및 분석 방법론을 기초로 하며, 안전성 점수 데이터 연동 명세서의 데이터 소스 및 수집 전략을 참조한다. 전체 프로젝트 맥락은 프로젝트 기획서의 비즈니스 요구사항을 준수한다.

---

## 2. 분석 환경

### 2.1 기술 스택

분석 환경은 Java LTS 기반의 Spring Boot 프레임워크를 사용한다. 통계 분석은 Apache Commons Math 라이브러리를 활용하여 피어슨 상관분석과 기술 통계를 수행한다. 데이터 처리는 JPA/Hibernate를 통해 복합 쿼리 및 집계 함수를 처리하며, Oracle Database를 사용한다. 분석 결과는 Redis에 캐싱하여 저장한다.

분석 과정의 상세한 기록은 SLF4J와 Logback을 통해 관리한다.

### 2.2 데이터 소스

분석에 사용되는 데이터는 총 20개 테이블로 구성되며, 모든 테이블은 ANALYSIS_ 접두사를 통해 운영 데이터와 구분된다.

**범죄 통계 데이터**
- ANALYSIS_CRIME_STATISTICS: 서울시 25개 자치구별 5대 범죄 발생 현황

**환경 안전 시설 데이터 (18개 테이블)**
- 공식적 감시 시설: ANALYSIS_CCTV_STATISTICS, ANALYSIS_POLICE_STATIONS
- 자연적 감시 시설: ANALYSIS_CONVENIENCE_STORES, ANALYSIS_BANKS, ANALYSIS_HOSPITALS
- 기타 환경 요인: 유흥업소, 교육시설, 교통시설 등 관련 테이블

**인구 통계 데이터**
- ANALYSIS_POPULATION_DENSITY: 자치구별 인구 수 및 인구 밀도 정보

모든 데이터는 분석 전용 스키마에서 관리되며, 각 테이블은 자치구 정보를 통해 데이터 연결이 가능하도록 구성된다.

---

## 3. 분석 데이터셋 정의

### 3.1 분석 단위

분석의 기본 단위는 서울시 25개 자치구(강남구, 강동구, 강북구, 강서구, 관악구, 광진구, 구로구, 금천구, 노원구, 도봉구, 동대문구, 동작구, 마포구, 서대문구, 서초구, 성동구, 성북구, 송파구, 양천구, 영등포구, 용산구, 은평구, 종로구, 중구, 중랑구)이다. 표본 크기 25개는 피어슨 상관분석의 최소 요구 기준인 20개 이상을 충족하며, 자치구별 행정 통계의 일관성과 신뢰성을 보장한다. 공공데이터 제공 단위와의 정합성을 확보하여 데이터 품질을 유지한다.

**데이터 해상도 한계와 보완 전략**

구 단위 집계 데이터는 사용자가 실제로 체감하는 초지역적(Hyper-local) 안전 정보와 상당한 해상도 차이를 보인다. 사용자는 "집에서 지하철역까지의 경로 안전성"이나 "반경 500m 내 위험 요소"와 같은 구체적 정보를 필요로 하지만, 공공데이터는 구 전체의 평균적 특성만을 제공한다.

이러한 한계를 극복하기 위해 본 분석에서는 간접 추정 모델 기반 복합 접근법을 채택한다. 환경설계를 통한 범죄예방 이론(CPTED, Crime Prevention Through Environmental Design)의 학술적 근거에 기반하여 거시적 데이터(구별 범죄율)로 지역의 기본적 치안 환경을 파악하고, 미시적 데이터(시설물 밀도)로 실제 생활권 내 안전 인프라 수준을 보정하는 2단계 복합 분석 방식을 적용한다.

이를 통해 구 단위 통계의 공간적 한계를 최대한 보완하면서도 공공데이터의 객관성과 일관성을 확보할 수 있는 현실적 대안을 제공한다.

### 3.2 종속 변수 정의

**변수명**: CRIME_RATE_PER_1000

**정의**: 각 자치구의 인구 1,000명당 5대 범죄 발생률

**산출 방식**
```
범죄율 = (자치구별 5대범죄 발생건수 ÷ 자치구별 인구수) × 1,000
```

**범죄 범위**
살인, 강도, 강간/강제추행, 절도, 폭력으로 구성되며, 경찰청 공식 범죄 통계 분류를 준용한다.

**데이터 처리**
Min-Max 스케일링을 통해 0~1 범위로 정규화하여 분석에 활용한다.

### 3.3 독립 변수 정의

독립 변수는 총 19개로 구성되며, 각각은 구별 시설물 개수 또는 밀도를 나타낸다. 환경 안전 시설 18개 변수는 기반 문서에서 정의된 시설물들을 대상으로 한다.

**이론적 근거**

각 환경 요인은 환경설계를 통한 범죄예방 이론과 지역 안전 지수 구축 방법론에 기반하여 선정되었다.

**공식적 감시 이론**: CCTV와 경찰서/지구대/파출소는 공권력에 의한 직접적 감시 기능을 담당한다. 이들 시설은 범죄자의 심리적 위축을 유도하고 범죄 발생 시 신속한 대응 체계를 제공함으로써 범죄 억제 효과를 발휘한다. 특히 CCTV는 범죄 예방과 동시에 사건 발생 시 증거 확보를 통한 검거율 향상에 기여한다.

**자연적 감시 이론**: 24시간 편의점, 은행, 병원은 심야 시간대 자연적 감시 효과를 제공한다. 이들 시설은 야간에도 사람의 왕래가 지속되어 "감시의 눈" 역할을 수행하며, 특히 1인 가구의 심야 귀가 시 안전감을 제공하는 핵심 요소이다. 가로등은 야간 조도 확보를 통한 범죄 심리 위축 효과를 담당하며, 피해자의 시야 확보로 인한 범죄 예방 효과를 제공한다.

**사회적 무질서 이론**: 유흥업소, 단란주점, 모텔은 범죄 발생 위험이 높은 환경을 나타낸다. 이들 시설은 음주 관련 폭력 및 성범죄 발생 가능성을 높이며, 지역의 전반적 무질서 수준을 반영하는 지표로 활용된다. PC방과 노래방은 사회적 무질서 지표로 분류되며, 24시간 운영과 청소년 집합 특성으로 인한 잠재적 위험 요소를 나타낸다.

**활력도 이론**: 지하철역, 대형마트, 학교는 유동인구와 지역 활력도 지표로 활용된다. 적정 수준의 유동인구는 자연적 감시 효과를 강화하지만, 과도한 집중은 범죄 대상 증가 요인이 될 수 있는 이중적 특성을 갖는다. 이들 시설의 영향은 시간대와 위치에 따라 복합적으로 작용한다.

**데이터 집계 방식**
- 시설물 데이터: 각 테이블에서 자치구별 시설 개수를 집계
- 인구 데이터: ANALYSIS_POPULATION_DENSITY 테이블에서 직접 참조 (단위: 명/㎢)

---

## 4. 8단계 분석 프로세스

### 4.1 선행 데이터 검증

분석 시작 전 필요한 모든 데이터가 정상적으로 준비되었는지 프로그램적으로 확인하여 분석 과정의 실패를 사전에 방지한다. 테이블 존재 여부를 확인하여 필요한 20개 ANALYSIS_ 테이블이 모두 존재하는지 검증하며, 반환값이 20이 아닐 경우 프로세스를 중단하고 경고를 로깅한다.

자치구 데이터 무결성을 확인하여 각 테이블에 25개 자치구 데이터가 모두 존재하는지 검증한다. 각 테이블의 자치구 수가 25가 아닐 경우 해당 테이블명과 누락된 자치구명을 로깅한다. 주요 컬럼의 NULL 값 존재 여부를 확인하며, NULL 값이 발견될 경우 경고를 로깅하고 NULL 처리 방안을 적용한다.

검증 실패 시 대응 방안으로는 테이블 누락 시 프로세스를 즉시 중단하고 관리자에게 알림을 발송하며, 자치구 데이터가 누락된 경우 해당 구의 데이터를 0으로 처리하거나 분석 범위에서 제외한다. NULL 값이 존재할 경우 기본값으로 0을 대체하거나 해당 레코드를 제외 처리한다.

### 4.2 데이터 집계

25개 자치구별로 모든 독립변수와 종속변수의 값을 하나의 통합 데이터셋으로 집계한다. 20개의 ANALYSIS_ 테이블(범죄 통계 1개, 환경 시설 18개, 인구 통계 1개)을 입력으로 사용한다.

각 테이블의 자치구 정보를 기준으로 데이터를 분류하며, 시설물 테이블의 경우 자치구별 개수를 집계한다. 범죄 통계와 인구 데이터를 결합하여 인구 1,000명당 범죄율을 계산하고, NULL 값은 0으로 처리하여 누락된 시설 개수를 보정한다.

데이터 품질 검증 과정에서는 25개 자치구가 모두 존재하는지 확인하고, 각 변수별 음수값이나 극단값 존재 여부를 확인하며, 자치구명의 일관성을 검증한다. 최종 산출물은 25행(자치구)과 20열(변수)로 구성된 분석용 데이터셋이다.

### 4.3 탐색적 데이터 분석

데이터의 통계적 특성을 파악하고 피어슨 상관분석의 전제 조건인 선형성을 검토하여 분석의 신뢰도를 높인다. 25×20 크기의 원본 집계 데이터셋을 입력으로 사용한다.

선형성 검토는 피어슨 상관계수가 선형 관계만을 측정하므로 비선형 관계가 있는 변수를 놓치지 않기 위해 수행된다. 각 독립변수와 종속변수 간의 산점도 패턴을 분석하여 선형성을 확인한다. 변환 전략으로는 지수적 증가/감소 패턴에 로그 변환, 포물선 패턴에 제곱근 변환, 반비례 관계에 역수 변환을 적용한다.

### 4.4 데이터 정규화

서로 다른 단위와 규모를 가진 변수들을 동일한 0~1 범위로 정규화하여 상관분석의 정확성을 향상시킨다. 탐색적 데이터 분석 과정을 거친 25×20 데이터셋을 입력으로 사용한다.

Min-Max 정규화 공식인 (원본값 - 최솟값) / (최댓값 - 최솟값)을 적용하며, 각 변수별 최솟값과 최댓값을 계산하여 개별 정규화를 수행한다. 모든 변수에 대해 동일한 정규화 방식을 적용한다.

최종 산출물은 모든 변수값이 0~1 범위로 스케일링된 25×20 데이터셋이다.

### 4.5 피어슨 상관계수 계산

종속변수인 범죄율과 각 독립변수인 환경 요인 간의 선형 상관관계 강도 및 방향을 측정한다. 정규화된 25×20 데이터셋을 입력으로 사용한다.

Apache Commons Math 라이브러리를 사용하여 종속변수 배열과 각 독립변수 배열 간의 피어슨 상관계수를 계산한다. 각 상관계수에 대한 p-value를 계산하여 통계적 유의성을 검증하며, t-검정을 통해 해당 상관관계가 우연에 의한 것인지 통계적으로 의미 있는 관계인지를 판단한다. 최종 산출물은 19개 독립변수의 피어슨 상관계수와 p-value이다.

### 4.6 통계적 유의성 검증

계산된 상관계수가 우연에 의한 것이 아닌 통계적으로 의미 있는 관계임을 검증한다. 19개 독립변수의 피어슨 상관계수 값과 p-value를 입력으로 사용한다.

검증 기준은 유의수준 α = 0.05를 적용하며, p-value < 0.05와 |r| ≥ 0.3(중간 이상의 상관관계 강도)를 조건으로 한다. 상관관계 강도는 |r| ≥ 0.7을 강한 상관관계, 0.5 ≤ |r| < 0.7을 중간 상관관계, 0.3 ≤ |r| < 0.5를 약한 상관관계, |r| < 0.3을 상관관계 없음으로 분류한다.

안전 기여 방향은 r > 0인 경우 범죄율과 양의 상관관계로 안전에 부정적 영향을, r < 0인 경우 범죄율과 음의 상관관계로 안전에 긍정적 영향을 미치는 것으로 분류한다.

19개 변수를 동시 검정할 때 1종 오류 증가 문제를 해결하기 위해 다중 검정 보정을 적용한다. Bonferroni 보정에서는 조정된 α = 0.05 / 19 = 0.0026을 사용하며, False Discovery Rate 보정도 고려한다. 최종 산출물은 통계적으로 유의미한 변수들의 목록과 각각의 검증 상태이다.

### 4.7 최종 가중치 산출

유의성이 검증된 변수들의 상관계수를 기반으로 안전성 점수 계산에 사용할 최종 가중치를 도출한다. 유의성 검증을 통과한 변수들의 피어슨 상관계수 값을 입력으로 사용한다.

가중치 산출 공식은 두 단계로 구성된다. 먼저 기본 가중치를 |r| × 100으로 계산하고, 정규화된 가중치를 (기본 가중치 / 전체 기본 가중치의 합) × 100으로 계산한다.

처리 과정에서는 유의미한 변수들만 필터링하여 기본 가중치를 계산하고, 전체 기본 가중치 합계를 구하여 각 변수의 정규화 가중치를 산출한다. 최종 가중치 합이 100%가 되도록 조정한다.

가중치 검증 과정에서는 모든 최종 가중치의 합이 100%인지 확인하고, 상관계수 절댓값이 큰 변수가 더 높은 가중치를 갖는지 검증한다. 최종 산출물은 각 환경 요인별 정규화된 가중치이며, 전체 합은 100%이다.

### 4.8 결과 검토 및 해석

통계적으로 도출된 가중치가 비즈니스적으로 합리적인지 최종 검토한다. 최종 가중치 산출 결과를 입력으로 사용한다.

상위 가중치 변수에 대한 해석을 생성하여 각 변수의 가중치, 상관계수, 비즈니스적 의미를 분석한다. 유흥업소 밀도가 높은 가중치를 보일 경우 음주 관련 폭력 및 성범죄 위험이 높은 환경적 특성으로 해석하며, CCTV 밀도가 높은 가중치를 보일 경우 공식적 감시 기능의 범죄 억제 효과로 해석한다.

상식 검증을 통해 역인과관계를 검토한다. 경찰서 수와 범죄율의 양의 상관관계가 나타날 경우 범죄가 많은 위험 지역에 경찰서가 집중 배치되는 역인과관계일 가능성을 검토한다. 병원 수와 범죄율의 양의 상관관계가 나타날 경우 상업지역 집중으로 인한 유동인구 증가가 원인일 수 있음을 고려한다.

비즈니스 로직 적합성 검증에서는 기대 방향과 일치하는지(CCTV는 음의 상관, 유흥업소는 양의 상관), 예상 외 결과에 대한 합리적 해석이 가능한지, 너무 강한 상관관계로 인한 다중공선성 의심이 필요한지 검토한다.

최종 의사결정 기준은 통계적 유의성(p-value < 0.0026), 비즈니스 타당성(상식적 해석 가능성), 실용적 적용성(사용자에게 설명 가능한 근거)이다. 비즈니스 로직에 맞지 않는 변수의 경우 가중치를 조정하거나 제외하며, 조정된 가중치를 재정규화한다.

최종 결정 사항은 각 변수별 채택/기각 이유, 가중치 조정 근거, 모델의 한계점 및 주의사항을 포함하여 상세히 문서화한다. 최종 산출물은 확정된 가중치 목록, 비즈니스 타당성 검증 결과, 모델 적용 시 주의사항 및 제한사항이다.

---

## 5. 산출물 명세

### 5.1 분석 결과 산출물

분석 프로세스를 통해 도출되어야 할 최종 산출물은 추천 시스템의 안전성 점수 계산에 직접 활용할 수 있는 환경 요인별 가중치와 그 산출 근거를 포함한다. 이러한 결과물은 통계적 엄밀성과 비즈니스 타당성을 모두 충족해야 하며, 향후 모델 개선과 검증을 위한 추적 가능한 형태로 구성되어야 한다.

**포함되어야 할 핵심 내용**

- **통계 분석 결과**
  - 피어슨 상관계수 (-1 ~ +1 범위)
  - 통계적 유의확률 (원본 p-value 및 다중검정 보정 p-value)
  - 유의성 판정 결과

- **환경 요인 분류**
  - 상관관계 강도 구분 (강함/중간/약함/무관)
  - 안전성 기여 방향 (긍정/부정/중립)

- **가중치 정보**
  - 통계적 분석 기반 산출 가중치
  - 비즈니스 검증 후 최종 확정 가중치

- **분석 메타데이터**
  - 분석 수행 일시
  - 분석 모델 버전

**산출물 구성 근거**

각 환경 요인별 가중치 결정 과정의 투명성을 보장하기 위해 통계적 분석 단계에서 산출된 원본 가중치와 비즈니스 검증을 거쳐 조정된 최종 가중치를 구분하여 관리한다. 이는 추후 가중치 조정의 합리성을 검증하고, 모델 개선 시 의사결정 근거로 활용하기 위함이다.

다중 검정 보정을 통한 엄밀한 통계적 검증 과정과 그 결과를 명시함으로써 분석의 학술적 신뢰성을 확보한다. 19개 환경 변수에 대한 동시 검정에서 발생할 수 있는 1종 오류를 적절히 통제했음을 증명하는 중요한 근거가 된다.

환경 요인의 안전성 기여 방향과 상관관계 강도 분류는 사용자에게 추천 근거를 설명할 때 직관적이고 이해하기 쉬운 형태로 제공하기 위한 필수 요소이다. 이를 통해 추천 시스템의 투명성과 설명 가능성을 향상시킬 수 있다.

분석 시점과 버전 정보의 체계적 관리는 모델의 지속적 개선과 성능 추적을 위한 기반이 되며, 동일 조건에서의 재현 가능성을 보장하는 핵심 요소이다.

### 5.2 해석 기준

통계적 신뢰도는 다중 검정 보정을 적용한 엄격한 기준에 따라 네 가지 등급으로 분류된다. 최고 신뢰도 변수는 |r| ≥ 0.7이고 p < 0.001인 경우로, 범죄율과 가장 밀접한 관련이 있는 환경 요인이며 안전성 점수에서 가장 높은 가중치를 부여받는다. 높은 신뢰도 변수는 0.5 ≤ |r| < 0.7이고 p < 0.0026인 경우로, 중간-높은 수준의 가중치를 부여받는다.

보통 신뢰도 변수는 0.3 ≤ |r| < 0.5이고 p < 0.0026인 경우로, 낮은 수준의 가중치를 부여받으며 다른 높은 신뢰도 변수의 보조 역할을 한다. 신뢰도 부족 변수는 |r| < 0.3이거나 p ≥ 0.0026인 경우로, 가중치 0을 부여받아 안전성 점수 계산에서 제외된다.

비즈니스 적용성 평가는 해석의 명확성에 따라 구분된다. 직관적 해석이 가능한 경우는 유흥업소 증가가 위험 증가로, CCTV 증가가 안전 증가로 해석되는 경우이다. 주의가 필요한 해석은 병원 증가가 위험 증가로 나타나는 경우로, 상업지역 집중 효과로 설명된다. 역인과관계가 의심되는 경우는 경찰서 증가가 위험 증가로 나타나는 경우로, 위험지역에 경찰서가 집중 배치되는 현상으로 해석된다.

---

## 결론

본 명세서는 부동산 추천 시스템의 안전성 점수 산출을 위한 데이터 분석 프로세스를 8단계로 체계화하여 제시하였다. 서울시 25개 자치구의 환경 요인과 범죄율 간의 피어슨 상관관계 분석을 통해 객관적이고 재현 가능한 가중치 도출 방법론을 확립하였으며, 다중 검정 보정을 통한 학술적 엄밀성과 비즈니스 검증을 통한 실용적 타당성을 모두 고려한 분석 프레임워크를 구축하였다.

이 프로세스를 통해 도출된 환경 요인별 가중치는 1인 가구 사용자의 체감 안전성을 정량화하는 핵심 지표로 활용되며, 추천 시스템의 신뢰성과 설명 가능성을 보장하는 기반이 된다. 향후 이 명세서에 기반한 분석 시스템 구현과 지속적인 모델 개선을 통해 사용자 중심의 안전성 평가 체계를 완성할 수 있을 것으로 기대된다.