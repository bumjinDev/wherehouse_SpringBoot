# 부동산 추천 시스템 UI 개선 명세서

프로젝트명: WhereHouse 부동산 추천 UI 개선  
문서 버전: 1.0  
작성일: 2025년 9월 16일  

---

## 1. 개선 목표

현재 UI를 백엔드 API의 `RecommendationRequestDto` 스펙에 맞게 개선하여 완전한 기능을 제공하는 사용자 인터페이스 구현

### 1.1. 현재 UI 문제점 분석
- 임대유형 선택: 전세/월세만 있음 (API는 CHARTER/MONTHLY 요구)
- 우선순위 설정 기능 완전 누락
- 유연성 설정(budgetFlexibility, minSafetyScore, absoluteMinArea) 없음
- 월세의 경우 보증금 외에 월세금 입력 필드 부족
- 평수 입력 오타: "평의: 40-70 만원" → 정확한 평수 단위 필요

---

## 2. API 요구사항 매핑

### 2.1. 필수 입력 필드 (Required Fields)
| API 필드 | 현재 UI | 개선 필요사항 |
|---------|---------|-------------|
| `leaseType` | "전세/월세" 버튼 | "CHARTER/MONTHLY"로 매핑 필요 |
| `budgetMin` | "보증금(최대): 2100-4500 만원" | 최소/최대 분리 필요 |
| `budgetMax` | 위와 동일 | 위와 동일 |
| `areaMin` | "평의: 40-70 만원" | 정확한 평수 입력으로 수정 |
| `areaMax` | 위와 동일 | 위와 동일 |
| `priority1` | **누락** | **신규 추가 필요** |
| `priority2` | **누락** | **신규 추가 필요** |
| `priority3` | **누락** | **신규 추가 필요** |

### 2.2. 필수 추가 필드 (Required Additional Fields)
| API 필드 | 현재 UI | 개선 필요사항 |
|---------|---------|-------------|
| `budgetFlexibility` | 없음 | 신규 추가 - 예산 유연성(%) |
| `minSafetyScore` | 없음 | 신규 추가 - 최소 안전 점수 |
| `absoluteMinArea` | 없음 | 신규 추가 - 절대 최소 평수 |

---

## 3. 개선된 UI 설계

### 3.1. 전체 레이아웃 구조
```
┌─────────────────────────────────┐
│        거주지 추천              │
├─────────────────────────────────┤
│  1. 기본 조건                   │
│     ├ 임대 유형 선택            │
│     ├ 예산 범위                 │
│     └ 평수 범위                 │
├─────────────────────────────────┤
│  2. 우선순위 설정              │
│     ├ 1순위: [드롭다운]         │
│     ├ 2순위: [드롭다운]         │
│     └ 3순위: [드롭다운]         │
├─────────────────────────────────┤
│  3. 유연성 설정                │
│     ├ 예산 유연성               │
│     ├ 최소 안전 점수            │
│     └ 절대 최소 평수            │
├─────────────────────────────────┤
│     [추천 결과 확인]            │
└─────────────────────────────────┘
```

### 3.2. 섹션 1: 기본 조건 개선

#### 3.2.1. 임대 유형 선택
**현재**: "전세/월세" 토글 버튼  
**개선**: 내부 로직에서 CHARTER/MONTHLY 매핑 처리  
**표시**: 사용자에게는 기존과 동일하게 "전세/월세" 표시

#### 3.2.2. 예산 범위 입력
**현재**: "보증금(최대): 2100-4500 만원" 단일 표시  
**개선**: 분리된 최소/최대 입력 필드  
- 최소 예산: 숫자 입력 필드
- 최대 예산: 숫자 입력 필드  
- 단위: "만원" 고정 표시

**월세 추가 필드**:
- 월세 선택 시 추가 필드 노출
- 월세 범위 별도 입력 (최소/최대)

#### 3.2.3. 평수 범위 입력
**현재**: "평의: 40-70 만원" (오타 포함)  
**개선**: 정확한 평수 입력
- 최소 평수: 소수점 입력 가능 필드
- 최대 평수: 소수점 입력 가능 필드
- 단위: "평" 고정 표시

### 3.3. 섹션 2: 우선순위 설정 (신규 추가)

#### 3.3.1. 우선순위 선택 옵션
**선택 가능한 옵션**:
1. PRICE - "가격 (저렴한 매물 우선)"
2. SAFETY - "안전성 (치안이 좋은 지역 우선)"  
3. SPACE - "공간 (넓은 평수 우선)"

#### 3.3.2. 우선순위 가중치 표시
- 1순위: 60% 가중치 표시
- 2순위: 30% 가중치 표시  
- 3순위: 10% 가중치 표시

#### 3.3.3. 중복 선택 방지
**검증 규칙**: 동일한 우선순위 중복 선택 불가  
**에러 메시지**: "각각 다른 우선순위를 선택해 주세요"

### 3.4. 섹션 3: 유연성 설정 (신규 추가)

#### 3.4.1. 예산 유연성 (budgetFlexibility)
**입력 방식**: 슬라이더 (0% ~ 50%)  
**기본값**: 10%  
**설명**: "매물이 부족할 때 최대 예산을 얼마나 초과할 수 있는지"  
**표시**: 실시간 백분율 값 표시

#### 3.4.2. 최소 안전 점수 (minSafetyScore)
**입력 방식**: 슬라이더 (0점 ~ 100점)  
**기본값**: 70점  
**설명**: "안전성을 중시한다면 높게 설정하세요"  
**표시**: 실시간 점수 표시

#### 3.4.3. 절대 최소 평수 (absoluteMinArea)
**입력 방식**: 숫자 입력 필드  
**기본값**: 비어있음 (0으로 전송)  
**설명**: "이 평수보다 작은 매물은 절대 추천받지 않습니다"  
**단위**: "평" 표시

---

## 4. 사용자 경험 개선 사항

### 4.1. 반응형 동작
**임대유형 변경 시**:
- 전세 선택: 월세 관련 필드 숨김
- 월세 선택: 월세 범위 필드 노출

**우선순위 변경 시**:  
- 이미 선택된 옵션은 다른 드롭다운에서 비활성화
- 실시간 중복 검증

### 4.2. 사용자 안내
**도움말 텍스트**:
- 각 섹션별 간단한 설명 제공
- 유연성 설정 항목별 구체적 안내

**플레이스홀더**:
- 숫자 입력 필드에 예시 값 표시
- 적절한 범위 힌트 제공

---

## 별첨. JavaScript 입력 검증 항목

### A.1. 필수 필드 검증 목록
**빈 값 검증**:
- budgetMin: 최소 예산 입력 확인
- budgetMax: 최대 예산 입력 확인  
- areaMin: 최소 평수 입력 확인
- areaMax: 최대 평수 입력 확인
- priority1: 1순위 우선순위 선택 확인
- priority2: 2순위 우선순위 선택 확인
- priority3: 3순위 우선순위 선택 확인

### A.2. 범위 논리 검증 목록
**예산 범위 검증**:
- budgetMin ≤ budgetMax 확인
- budgetMin > 0 확인 (양수)
- budgetMax > 0 확인 (양수)

**평수 범위 검증**:
- areaMin ≤ areaMax 확인  
- areaMin > 0 확인 (양수)
- areaMax > 0 확인 (양수)
- 소수점 둘째 자리까지만 허용

### A.3. 우선순위 중복 검증 목록
**중복 선택 방지**:
- priority1 ≠ priority2 확인
- priority2 ≠ priority3 확인  
- priority1 ≠ priority3 확인
- 3개 값이 모두 다른지 Set을 이용한 검증

### A.4. 데이터 타입 검증 목록
**숫자 타입 검증**:
- budgetMin: parseInt() 처리 가능 여부
- budgetMax: parseInt() 처리 가능 여부
- areaMin: parseFloat() 처리 가능 여부  
- areaMax: parseFloat() 처리 가능 여부
- budgetFlexibility: parseInt() 처리 가능 여부 (0-50 범위)
- minSafetyScore: parseInt() 처리 가능 여부 (0-100 범위)
- absoluteMinArea: parseFloat() 처리 가능 여부

**문자열 타입 검증**:
- leaseType: "CHARTER" 또는 "MONTHLY" 확인
- priority1/2/3: "PRICE", "SAFETY", "SPACE" 중 하나 확인

### A.5. 에러 메시지 정의 목록
**필수 입력 에러**:
- "최소 예산을 입력해주세요"
- "최대 예산을 입력해주세요"  
- "최소 평수를 입력해주세요"
- "최대 평수를 입력해주세요"
- "모든 우선순위를 선택해주세요"

**범위 논리 에러**:
- "최소 예산은 최대 예산보다 작아야 합니다"
- "최소 평수는 최대 평수보다 작아야 합니다"
- "양수만 입력 가능합니다"

**중복 선택 에러**:
- "각각 다른 우선순위를 선택해주세요"

### A.6. 실시간 검증 트리거 목록
**input 이벤트**:
- 숫자 입력 필드: 실시간 범위 검증
- 범위 슬라이더: 실시간 값 표시

**change 이벤트**:
- 우선순위 선택: 즉시 중복 검증
- 임대유형 변경: UI 필드 표시/숨김

**submit 이벤트**:  
- 전체 검증 수행 후 API 호출 여부 결정