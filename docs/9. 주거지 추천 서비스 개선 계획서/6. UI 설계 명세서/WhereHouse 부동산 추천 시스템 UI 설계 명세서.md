# WhereHouse 부동산 추천 시스템 기술 명세서

**프로젝트**: WhereHouse - 서울시 맞춤형 부동산 추천 플랫폼  
**문서 분류**: 기술 백서 (Technical White Paper)  
**문서 버전**: 2.0  
**작성일**: 2025년 1월 19일

---

## 목차

1. [개요](#개요)
2. [시스템 아키텍처](#시스템-아키텍처)
3. [사용자 인터페이스 설계](#사용자-인터페이스-설계)
4. [데이터 처리 및 검증](#데이터-처리-및-검증)
5. [시각화 및 상호작용](#시각화-및-상호작용)
6. [기능별 상세 구현 명세](#기능별-상세-구현-명세)
7. [기술 스택 및 의존성](#기술-스택-및-의존성)

---

## 개요

### 시스템 목적

WhereHouse는 서울시 부동산 시장의 복잡한 의사결정 과정을 체계화하고 개인화된 추천을 제공하는 웹 기반 플랫폼이다. 사용자의 다양한 제약조건과 선호도를 정량적으로 분석하여 최적의 거주지 선택을 지원한다.

### 핵심 가치 제안

**개인화 추천 엔진**: 사용자별 상이한 우선순위(가격, 안전성, 공간)를 수치화하여 맞춤형 결과 생성  
**지역 중심 접근**: 개별 매물이 아닌 지역구 단위의 종합적 거주 환경 평가  
**투명한 의사결정**: 추천 과정과 근거를 완전 공개하여 사용자 신뢰도 확보  
**현실적 대안 제시**: 이상적 조건 불만족 시 합리적 타협점 사전 설정

---

## 시스템 아키텍처

### 전체 구조

WhereHouse는 **단일 페이지 애플리케이션(SPA)** 구조를 채택하여 사용자 경험의 연속성을 보장한다. 시스템은 크게 세 개의 주요 레이어로 구성된다.

**프레젠테이션 레이어**: 사용자 인터페이스 및 상호작용 처리  
**비즈니스 로직 레이어**: 입력 검증, 데이터 변환, 상태 관리  
**데이터 레이어**: 외부 API 통신, 지도 서비스 연동

### 화면 구성 요소

**주 화면**: 전체 화면을 덮는 카카오맵 배경 위에 좌측 사이드바 패널 오버레이  
**사이드바**: 480px 고정 너비의 수직 스크롤 패널로 모든 사용자 인터페이스 포함  
**모달 시스템**: 상세 정보 표시를 위한 다층 오버레이 구조

### 상태 관리

시스템은 **상태 기반 화면 전환** 방식을 사용한다. 주요 상태는 다음과 같다:

- **입력 단계**: 사용자 조건 수집 상태
- **전세 결과**: 전세 추천 결과 표시 상태  
- **월세 결과**: 월세 추천 결과 표시 상태
- **상세 탐색**: 모달을 통한 세부 정보 탐색 상태

---

## 사용자 인터페이스 설계

### 입력 시스템 설계 철학

사용자 입력은 **점진적 정보 수집(Progressive Disclosure)** 원칙을 따른다. 복잡한 부동산 의사결정을 인지적 부담 없이 단계별로 분해하여 처리한다.

### 3단계 입력 프로세스

#### 1단계: 객관적 제약조건 설정

**임대 유형 선택**: 전세와 월세의 근본적 차이로 인한 최우선 분기점  
**예산 범위**: 부동산 선택의 가장 현실적 제약조건  
**주거 공간**: 생활에 필요한 물리적 공간 요구사항

월세 선택 시 보증금 외에 월세 범위를 추가로 수집하는 **조건부 입력** 구조를 적용하여 임대 유형별 특성을 정확히 반영한다.

#### 2단계: 개인 가치관 반영

사용자의 **다기준 의사결정** 성향을 정량화하기 위해 명시적 우선순위 설정을 도입했다.

**우선순위 옵션**:
- **PRICE**: 예산 효율성을 최우선하는 실용적 접근
- **SAFETY**: 안전한 거주 환경을 중시하는 안정 추구형  
- **SPACE**: 충분한 생활 공간 확보를 우선하는 여유 추구형

**가중치 체계**: 1순위 60%, 2순위 30%, 3순위 10%로 설정하여 명확한 선호 차등을 반영한다.

#### 3단계: 유연성 및 예외 처리

부동산 시장의 현실적 제약을 인정하고 사용자가 **사전 타협 기준**을 설정할 수 있도록 한다.

**예산 유연성**: 매물 부족 시 예산 초과 허용 범위 (0-50%)  
**안전 기준**: 절대 하회할 수 없는 최소 안전 점수 (0-100점)  
**공간 하한**: 생활 가능한 절대 최소 평수

### 실시간 검증 시스템

모든 입력 필드에 **즉시 피드백** 메커니즘을 적용하여 사용자가 입력 완료 전에 오류를 인지할 수 있도록 한다.

**검증 유형**:
- **형식 검증**: 데이터 타입, 범위, 필수 여부
- **논리 검증**: 최소값-최대값 관계, 우선순위 중복
- **일관성 검증**: 전체 입력 데이터의 상호 모순 여부

---

## 데이터 처리 및 검증

### 입력 데이터 변환

사용자 입력은 임대 유형에 따라 **다른 의미와 구조**를 갖는다. 시스템은 이를 자동으로 감지하여 적절한 데이터 변환을 수행한다.

**전세 모드**: `budgetMin/Max`를 전세금 범위로 해석  
**월세 모드**: `budgetMin/Max`를 보증금 범위로, `monthlyRentMin/Max`를 월세 범위로 해석

### API 통신 구조

시스템은 **임대 유형별 분리된 엔드포인트**를 사용하여 백엔드와 통신한다. 이는 서버 측에서 전세와 월세의 서로 다른 추천 알고리즘을 적용할 수 있도록 한다.

**전세 전용 엔드포인트**: `/api/recommendations/charter-districts`  
**월세 전용 엔드포인트**: `/api/recommendations/monthly-districts`

### 응답 데이터 처리

백엔드로부터 받은 추천 결과는 **계층적 구조**를 갖는다:

**지역구 레벨**: 추천 순위, 종합 점수, 세부 점수, 요약 설명  
**매물 레벨**: 개별 매물의 상세 정보 및 추천 점수

시스템은 이 계층 구조를 활용하여 **단계적 정보 공개** 방식으로 사용자에게 결과를 제시한다.

---

## 시각화 및 상호작용

### 지도 통합

카카오맵 API를 활용한 **지역 중심 시각화**가 시스템의 핵심 차별화 요소다. 단순한 매물 위치 표시가 아닌, 추천된 지역구 전체를 시각적으로 강조하여 **지역 기반 의사결정**을 지원한다.

**폴리곤 시각화**: 추천된 지역구를 반투명 색상으로 하이라이트  
**상호작용**: 폴리곤 클릭 시 해당 지역구의 상세 정보 모달 자동 표시  
**사용자 조작 제한**: 줌, 드래그 등 불필요한 지도 조작 기능 비활성화

### 다층 모달 시스템

복잡한 부동산 정보를 **계층적으로 탐색**할 수 있도록 두 가지 유형의 모달을 제공한다.

**매물 목록 모달**: 선택한 지역구 내 추천 매물들의 구체적 정보  
**상세 순위 모달**: 지역구의 정량적 평가 지표 및 근거

각 모달은 독립적으로 작동하며, 동시에 여러 모달이 열릴 수 있도록 **모달 스택 관리** 시스템을 구현했다.

### 결과 표시 체계

추천 결과는 **전세와 월세로 완전 분리**된 화면에서 표시된다. 이는 두 임대 유형의 서로 다른 특성과 고려사항을 명확히 구분하기 위함이다.

**공통 요소**: 순위, 지역구명, 추천 점수, 대표 매물 정보  
**차별화 요소**: 가격 표시 형식, 추천 근거, 세부 탐색 옵션

각 지역구 카드에서 **두 가지 탐색 경로**를 제공한다:
- 정량적 근거 확인: 상세 순위 정보 모달
- 구체적 매물 탐색: 매물 목록 모달

---

## 기능별 상세 구현 명세

### 전세 요청 시스템

#### 전세 입력 인터페이스 구조

전세 요청은 WhereHouse 시스템의 **기본 추천 모드**로, 한국 부동산 시장의 주요 거래 방식을 반영한다. 전세 모드에서는 단일 보증금(전세금) 기반의 간소화된 입력 구조를 제공한다.

**핵심 입력 요소**:
- **전세금 범위**: 최소/최대 전세금 설정 (만원 단위)
- **희망 평수**: 거주 공간 크기 범위 설정 (평 단위, 소수점 가능)
- **우선순위 매트릭스**: 가격, 안전성, 공간 중 3단계 우선순위
- **유연성 파라미터**: 예산 초과 허용도, 최소 안전 기준, 절대 최소 평수

**전세만의 특화 로직**:
- 월세 관련 입력 필드 완전 숨김 처리
- 전세금을 단일 가격 변수로 처리하는 단순화된 검증
- 전세 시장 특성을 반영한 유연성 범위 조정 (보증금의 상대적 고액성 고려)

#### 전세 데이터 검증 체계

**1차 검증 - 개별 필드 수준**:
- 전세금 범위의 논리적 일관성 (최소 ≤ 최대)
- 평수 범위의 물리적 타당성 (양수, 현실적 범위)
- 우선순위의 중복 방지 및 완전성

**2차 검증 - 비즈니스 로직 수준**:
- 전세 시장 평균 대비 입력값의 현실성 평가
- 선택된 우선순위와 예산 범위의 상호 모순 감지
- 지역별 전세 시세 데이터를 고려한 실현 가능성 검증

**3차 검증 - 시스템 통합 수준**:
- 백엔드 전세 추천 엔진과의 데이터 형식 호환성
- API 페이로드 크기 및 구조 최적화
- 네트워크 오류 상황에 대한 견고성 확보

### 월세 요청 시스템

#### 월세 입력 인터페이스 구조

월세 요청은 전세 대비 **이중 가격 구조**를 가지는 복합적 입력 시스템이다. 보증금과 월세를 독립적으로 처리하면서도 상호 연관성을 유지하는 정교한 설계가 요구된다.

**확장된 입력 요소**:
- **보증금 범위**: 초기 납입 보증금 최소/최대 설정
- **월세 범위**: 월별 임대료 최소/최대 설정
- **평수 및 우선순위**: 전세와 동일한 구조 유지
- **월세 특화 유연성**: 보증금-월세 전환 비율 고려 옵션

**월세 고유 복잡성 처리**:
- 보증금과 월세의 **트레이드오프 관계** 반영
- 사용자의 현금 흐름 선호도 파악
- 장기 거주 시 총 비용 계산을 위한 기간 설정

#### 월세 동적 UI 시스템

**조건부 필드 표시 메커니즘**:
- 임대 유형 선택 시 월세 전용 입력 필드 자동 노출
- 부드러운 애니메이션 전환 효과로 사용자 인지 부담 최소화
- 전세 모드 복귀 시 월세 데이터 자동 초기화

**실시간 계산 및 피드백**:
- 보증금-월세 조합의 **월간 부담액** 실시간 표시
- 연간 총 주거비용 자동 계산 및 예산 대비 비교
- 시장 평균 대비 입력값의 경쟁력 즉시 피드백

#### 월세 특화 검증 로직

**이중 가격 구조 검증**:
- 보증금과 월세 각각의 독립적 범위 검증
- 두 가격 요소 간의 **경제적 합리성** 검증
- 지역별 월세 시장 데이터와의 정합성 확인

**현금 흐름 분석**:
- 사용자의 월별 가처분소득 대비 월세 부담률 계산
- 보증금 조달 능력과 월세 부담 능력의 균형점 탐색
- 장기 거주 시나리오별 총비용 시뮬레이션

### 추천 결과 표시 시스템

#### 결과 화면 전환 메커니즘

**상태 기반 화면 관리**:
- 입력 완료 시 즉시 해당 임대 유형별 전용 결과 화면으로 전환
- 전세/월세 결과 화면의 **완전 분리** 구조로 혼동 방지
- 뒤로가기 기능을 통한 매끄러운 재입력 지원

**로딩 및 에러 처리**:
- API 요청 중 사용자 피드백을 위한 로딩 상태 표시
- 네트워크 오류 시 구체적 오류 유형별 안내 메시지
- 검색 결과 부족 시 조건 완화 제안 시스템

#### 지역구 추천 카드 시스템

**계층적 정보 구조**:
- **1차 정보**: 순위, 지역구명, 종합 추천 점수
- **2차 정보**: 대표 매물 가격, 핵심 추천 근거
- **3차 정보**: 상세 탐색을 위한 액션 버튼

**시각적 계층화**:
- 추천 순위별 시각적 차별화 (색상, 크기, 배치)
- 중요 정보의 시각적 강조 (가격, 점수 하이라이트)
- 일관된 카드 레이아웃으로 비교 용이성 확보

**반응형 적응**:
- 화면 크기별 카드 레이아웃 최적화
- 터치 기반 상호작용 지원
- 접근성 가이드라인 준수 (키보드 내비게이션, 스크린 리더 지원)

#### 추천 근거 투명성 시스템

**점수 산출 근거 공개**:
- 사용자 설정 우선순위의 **가중치 적용 과정** 시각화
- 지역구별 세부 점수 (가격, 안전성, 공간) 분해 표시
- 추천 알고리즘의 의사결정 과정 단계별 설명

**비교 기준 명시**:
- 서울시 전체 평균 대비 해당 지역구의 상대적 위치
- 사용자 입력 조건 대비 매칭도 수치화
- 유사 조건 사용자들의 선택 패턴 참조 정보

### 지역구 추천 정보 시스템

#### 상세 순위 모달 구조

**종합 분석 대시보드**:
- 선택 지역구의 **다차원 성능 지표** 시각화
- 서울시 25개 지역구 대비 상대적 순위 표시
- 시간대별, 계절별 지역구 특성 변화 추이

**정량적 지표 체계**:
- **매물 비용 점수**: 동일 예산 대비 가성비 우수성 (0-100점)
- **평수 점수**: 동일 가격 대비 공간 확보 능력 (0-100점)
- **주거지 추천 점수**: 종합 거주 환경 만족도 (0-100점)

**시각화 요소**:
- 프로그레스 바를 통한 점수 직관적 표현
- 색상 코딩으로 우수/보통/개선 필요 영역 구분
- 애니메이션 효과로 점수 변화 과정 표현

#### 지역구 특성 분석 시스템

**거주 환경 종합 평가**:
- 치안 안전도, 교통 접근성, 교육 인프라, 상업 시설 밀도
- 인구 구성, 연령대별 거주 만족도, 재거주 의향률
- 향후 개발 계획, 지가 상승률, 임대료 변동성

**개인화 매칭 분석**:
- 사용자 입력 우선순위 대비 지역구 적합성 스코어링
- 유사 프로필 사용자들의 해당 지역구 만족도 데이터
- 사용자 라이프스타일 예측 기반 장기 만족도 전망

**비교 컨텍스트 제공**:
- 타 후보 지역구 대비 상대적 장단점 분석
- 예산 조정 시 접근 가능한 대안 지역구 제시
- 시기별 임대료 변동성을 고려한 최적 계약 타이밍 제안

#### 지역구 데이터 통계 표시

**점수 시각화 시스템**:
- 3개 핵심 지표의 프로그레스 바 형태 표시
- 각 점수별 색상 코딩을 통한 직관적 이해 지원
- 서울시 평균 대비 상대적 위치 표시

### 상세 매물 정보 시스템

#### 매물 목록 모달 구조

**매물 카탈로그 시스템**:
- 선택 지역구 내 **추천 순위 기반 매물 리스트**
- 개별 매물의 종합 점수 및 세부 평가 항목
- 사용자 우선순위 반영 **개인화 추천 점수** 표시

**매물 정보 표준화**:
- **기본 정보**: 매물명, 주소, 가격, 임대 조건
- **물리적 특성**: 평수, 방 구조, 건축 연도, 층수
- **추천 근거**: 개별 매물이 추천된 구체적 이유

**비교 기능**:
- 동일 지역구 내 매물 간 상대 비교 표
- 가격 대비 성능 분석 차트
- 사용자 조건 만족도 매트릭스

#### 매물 상세 분석 체계

**개별 매물 평가 시스템**:
- **가격 경쟁력**: 동일 조건 매물 대비 가성비 분석
- **공간 효율성**: 평수 대비 실사용 공간 최적화 정도
- **매물 기본 정보**: 건축연도, 층수, 주소 등 객관적 데이터

**매물 표시 정보**:
- 임대료, 평수, 건축연도, 층수 등 핵심 정보
- 개별 매물의 추천 점수 및 순위
- 매물명과 정확한 주소 정보

#### 매물 정보 표시 체계

**기본 표시 정보**:
- 매물명, 주소, 가격 정보 (전세금 또는 보증금/월세)
- 평수, 건축연도, 층수 등 객체 정보
- 임대유형 및 매물별 추천 점수

**정렬 및 필터링**:
- 추천 점수 기준 내림차순 정렬
- 지역구별 매물 그룹핑 표시
- 사용자 조건 부합도에 따른 우선순위 배치

---

## 기술 스택 및 의존성

### 프론트엔드 기술

**핵심 기술**: HTML5, CSS3, ES6+ JavaScript  
**UI 프레임워크**: Bootstrap 5 (반응형 컴포넌트)  
**지도 서비스**: 카카오맵 JavaScript API v2  
**HTTP 통신**: Fetch API (비동기 처리)

### 외부 서비스 의존성

**카카오맵 API**: 지도 표시, 폴리곤 렌더링, 좌표 변환  
**GitHub Raw API**: 정밀한 서울시 행정구역 경계 데이터 (선택적)  
**백엔드 API**: 추천 알고리즘 및 매물 데이터 제공

---

## 결론

WhereHouse 부동산 추천 시스템은 복잡한 부동산 의사결정 과정을 **체계적이고 투명한 디지털 경험**으로 변환하는 것을 목표로 한다. 사용자 중심 설계, 견고한 기술 구조, 확장 가능한 아키텍처를 통해 부동산 정보 서비스의 새로운 패러다임을 제시한다.

본 시스템의 핵심 혁신은 **개인화된 가치 반영**과 **지역 중심 접근**을 통해 기존 매물 나열식 서비스와 차별화된 의미 있는 추천을 제공한다는 점이다. 이는 사용자가 단순히 조건에 맞는 매물을 찾는 것이 아니라, 자신에게 최적화된 생활 환경을 발견할 수 있도록 돕는다.

---

*본 기술 명세서는 WhereHouse 시스템의 설계 철학과 구현 원칙을 담고 있으며, 향후 시스템 발전 방향의 기준점 역할을 한다.*