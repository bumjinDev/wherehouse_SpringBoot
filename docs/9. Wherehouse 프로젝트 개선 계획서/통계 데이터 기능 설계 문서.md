# 통계 데이터 기능 설계 문서

## 1. 가격(시세) 관련 통계

사용자가 가장 궁금해하는 '돈'과 관련된 직접적인 정보를 제공하여 합리적인 의사결정을 돕는 통계 기능이다.

### 1.1 기본 시세 정보
사용자가 선택한 지역(구/동)의 평균, 중간값, 최고/최저 전세 및 월세 정보를 제공한다. 이를 통해 사용자는 자신의 예산이 해당 지역에서 어느 정도 수준인지 직관적으로 파악할 수 있다.

### 1.2 가격 변동성(Volatility)
Elasticsearch의 통계 집계 기능(Extended Stats)을 활용하여 지역별 시세의 표준편차를 계산한다.

**사용자 가치**: 변동성이 낮으면 '안정적인 거주지', 높으면 '투자 가치가 있을 수 있으나 리스크가 있는 지역'으로 해석할 수 있는 근거를 제공한다.

### 1.3 가성비 지표
'평당 평균 가격' (전세/월세)을 계산하여 제공한다. 크기가 다른 여러 매물을 비교할 때, 어느 곳이 실질적으로 더 경제적인지 판단할 수 있는 객관적인 기준이 된다.

## 2. 안전 관련 통계

단순히 '안전하다'가 아닌, 데이터를 통해 왜 안전한지를 투명하게 보여주는 통계 기능이다.

### 2.1 지역 안전도 비교
사용자가 선택한 특정 매물의 **'복합 안전성 점수'**와 해당 매물이 속한 동(neighborhood) 및 구(district)의 평균 안전성 점수를 함께 표시한다.

**사용자 가치**: "이 집은 이 동네 평균보다 CCTV가 많아 안전 점수가 높다"와 같이, 추천의 근거를 구체적인 수치로 제시하여 신뢰도를 높일 수 있다.

### 2.2 안전 요소별 상세 점수
'복합 안전성 점수'를 구성하는 각 항목(e.g., CCTV 밀도, 파출소 접근성, 상권 활성도)의 점수를 개별적으로 표시한다.

**사용자 가치**: 사용자가 중요하게 생각하는 안전 요소(e.g., '나는 밤길이 중요하니 조명 점수가 높은 곳이 좋다')를 직접 확인하고 판단할 수 있도록 지원한다.

## 3. 시장 동향 관련 통계

부동산 시장의 전반적인 흐름을 파악하여, 사용자가 더 넓은 시야를 가질 수 있도록 돕는 통계 기능이다.

### 3.1 월별/분기별 거래량 추이
특정 지역의 부동산 거래량이 시간에 따라 어떻게 변하는지를 시각화(차트)하여 표시한다.

**사용자 가치**: 현재 시장이 활발한 시기인지, 침체기인지를 파악하여 계약 시점을 조율하는 데 참고할 수 있다.

### 3.2 평균 가격 변동 추이
부동산 API를 통해 수집한 데이터를 기반으로, 지난 1~3년간의 평균 시세 변화를 표시한다.

**사용자 가치**: 해당 지역의 가격이 꾸준히 오르고 있는지, 정체되어 있는지 혹은 하락세인지를 파악하여 미래 가치를 예측하는 데 도움을 준다.

## 4. 기술적 구현

이 모든 통계 데이터는 Elasticsearch의 집계(Aggregations) 기능을 활용하면 데이터베이스에 큰 부하를 주지 않고도 효율적으로 계산하고 제공할 수 있다.