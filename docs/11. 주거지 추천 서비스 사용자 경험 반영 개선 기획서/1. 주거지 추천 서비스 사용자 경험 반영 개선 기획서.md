# 주거지 추천 서비스 사용자 경험 반영 개선 기획서

## 프로젝트 개요

**목표**: 실거주자의 경험을 수집하여 추천 시스템의 정확도를 높이고, 대규모 리뷰 데이터 축적 상황에서도 실시간 추천 성능을 유지한다.

**핵심 질문**: "정량적 공공데이터만으로는 반영할 수 없는 실제 거주 경험을 어떻게 추천 시스템에 통합할 것인가?"

**접근 방식**: 매물별 리뷰 시스템을 구축하여 실거주자의 정성적 평가를 수집하고, 키워드 추출 및 점수화를 통해 기존 정량적 데이터와 통합한다.

---

## 현재 상태 분석

### 기존의 구체적 문제점

| 구현 부분 | 현재 로직 | 문제점 | 비즈니스 영향 |
|-----------|-----------|--------|---------------|
| **데이터 기반 추천** | 서울시 공공데이터(CCTV, 범죄통계, 교통, 인구밀도)만으로 지역구 추천 | 실제 거주 경험 데이터 부재 | 사용자가 체감하는 실제 거주 환경과 추천 결과의 괴리 발생 |
| **평가 항목** | 안전성, 교통, 편의시설 점수만 산출 | 소음, 채광, 이웃 등 정성적 요소 반영 불가 | 실거주 만족도에 영향을 주는 핵심 요소들이 추천에서 누락됨 |
| **점수 산출** | 정량적 데이터만으로 점수 계산 후 사용자 우선순위 가중치 반영 | 데이터와 실제 체감의 괴리 | 추천 시스템에 대한 신뢰도 저하 및 사용자 만족도 감소 |

### 기존의 기술적 한계점

**데이터 유형의 제한**
- 정량적 공공데이터만 활용 가능한 구조
- 비정형 텍스트 데이터 처리 기능 부재

**피드백 루프 부재**
- 사용자의 실제 거주 경험이 시스템에 반영되지 않음
- 추천 결과에 대한 검증 및 개선 메커니즘 부재

**평가 차원의 단순성**
- 공공데이터로 측정 가능한 항목으로만 평가 제한
- 실거주자가 중요하게 생각하는 정성적 요소 배제

### 개선 목표

**1차 목표: 사용자 경험 데이터 수집 체계 구축**
- 매물별 리뷰 작성 기능 구현
- 별점(1~5점) 평가 시스템 구축
- 거주 기간 정보 수집

**2차 목표: 리뷰 데이터 기반 추천 정확도 향상**
- 리뷰 텍스트에서 키워드 자동 추출
- 키워드 기반 점수 산출 로직 개발
- 기존 공공데이터 점수와 리뷰 점수 통합

---

## 새로운 비즈니스 로직 설계

### 리뷰 기반 추천 점수 통합 상세 설명

**단계 1: 리뷰 데이터 수집**
매물에 대한 실거주자의 별점 평가(1~5점), 자유 형식의 텍스트 리뷰, 거주 기간 정보를 수집한다.

**결과 판단 기준**: 매물당 리뷰 5개 이상 축적 여부

**성공 케이스 처리 (리뷰 5개 이상)**
리뷰 점수를 산출하여 기존 점수와 통합한다. 최종 점수 = (기존 점수 × 70%) + (리뷰 점수 × 30%)

**실패 케이스 처리 (리뷰 5개 미만)**
소수 리뷰로 인한 편향을 방지하기 위해 리뷰 점수를 추천에 반영하지 않고 기존 점수를 그대로 사용한다.

**단계 2: 키워드 추출 및 점수화**
리뷰 텍스트에서 교통, 소음, 채광, 편의시설 관련 키워드를 추출하여 긍정 키워드는 +1점, 부정 키워드는 -1점으로 점수화한다.

**결과 판단 기준**: 추가 필요

**단계 3: 추천 점수 통합**
리뷰 점수 = (평균 별점 / 5) × 100 공식으로 산출한 점수를 기존 공공데이터 기반 점수와 통합한다.

**결과 판단 기준**: 추가 필요

### 핵심 비즈니스 규칙

**규칙 1: 최소 리뷰 수 기준 및 실시간 통계 갱신**
매물당 리뷰 5개 미만일 경우 추천 점수에 미반영하며, 리뷰 5개 이상일 경우에만 리뷰 점수를 30% 비율로 반영한다. 이는 소수 리뷰로 인한 편향을 방지하고 통계적 신뢰도를 확보하기 위함이다. 리뷰 작성 시 평균 별점과 리뷰 개수는 실시간으로 갱신되어야 하며, 다수의 사용자가 동시에 리뷰를 남기는 상황에서도 통계 데이터의 정합성이 보장되어야 한다.

**규칙 2: 키워드 점수화 규칙**
긍정 키워드("조용하다", "밝다", "가깝다", "편리하다")는 +1점, 부정 키워드("시끄럽다", "어둡다", "불편하다", "멀다")는 -1점, 특정 키워드 없이 사실만 나열한 중립 리뷰는 0점으로 처리한다.

**규칙 3: 리뷰 점수 산출 공식**
리뷰 점수 = (평균 별점 / 5) × 100으로 계산하여 0~100점 범위의 점수로 정규화한다.

**규칙 4: 최종 점수 통합 공식**
리뷰 5개 미만인 경우 기존 점수를 그대로 사용하고, 리뷰 5개 이상인 경우 (기존 점수 × 70%) + (리뷰 점수 × 30%)로 최종 점수를 산출한다.

### 데이터 모델 설계

**Review (매물 리뷰)**
```json
{
  "reviewId": "리뷰 고유 ID",
  "propertyId": "매물 ID (외래키)",
  "userId": "작성자 ID",
  "rating": "별점 (1~5)",
  "reviewText": "텍스트 리뷰 내용",
  "residencePeriod": "거주 기간 (예: 2년)",
  "createdAt": "작성 시각",
  "keywords": {
    "traffic": "교통 관련 점수 (+1/-1/0)",
    "noise": "소음 관련 점수 (+1/-1/0)",
    "lighting": "채광 관련 점수 (+1/-1/0)",
    "convenience": "편의시설 관련 점수 (+1/-1/0)"
  }
}
```

**PropertyScore (매물별 통합 점수)**
```json
{
  "propertyId": "매물 ID",
  "baseScore": "공공데이터 기반 기존 점수",
  "reviewCount": "리뷰 개수",
  "averageRating": "평균 별점",
  "reviewScore": "리뷰 점수 ((평균 별점 / 5) × 100)",
  "finalScore": "최종 통합 점수",
  "isReviewApplied": "리뷰 점수 반영 여부 (리뷰 5개 이상 여부)"
}
```

---

## UI/UX 연동 방식 및 정보 표시 전략

### 매물 상세 페이지 정보 표시 구조

**영역 1: 리뷰 작성 영역 (상단)**
사용자가 매물에 대한 리뷰를 작성할 수 있는 입력 영역으로, 별점 선택(1~5점), 텍스트 리뷰 입력, 거주 기간 입력 기능을 제공한다.

- 실거주자 예시: "4점 선택 + '역세권이라 출퇴근 편리하지만 층간소음이 심함' 입력 + 거주기간 '2년' 입력 → 제출"
- 추천 서비스 이용자 예시: 리뷰 조회만 수행

**영역 2: 리뷰 목록 영역 (중단)**
매물에 작성된 리뷰 목록을 최신순으로 정렬하여 표시하며, 평균 별점 및 리뷰 통계 정보를 함께 제공한다.

**세부 영역 2-1: 통계 정보**
평균 별점(5점 만점), 총 리뷰 개수, 리뷰 점수 반영 여부(5개 이상/미만) 표시

**세부 영역 2-2: 개별 리뷰 카드**
- 작성자 정보 및 거주 기간
- 별점 및 작성 일자
- 리뷰 텍스트 내용

**영역 3: 추천 점수 영역 (하단)**
추가 필요

### 키워드 추출 및 표시 로직

**자동 키워드 추출**
리뷰 제출 시 텍스트에서 교통("역세권", "버스 접근성"), 소음("층간소음", "외부 소음"), 채광("일조량", "밝기"), 편의시설("마트", "병원", "학교") 관련 키워드를 자동으로 추출하고 긍정/부정 점수를 부여한다.

**키워드 기반 필터링**
추가 필요

**특수 케이스 처리**
리뷰 5개 미만인 매물의 경우 "리뷰 데이터 부족으로 리뷰 점수가 추천에 반영되지 않습니다" 안내 메시지를 표시한다.

---

## 기대 효과

### 서비스 개선 효과
- 실거주자 피드백 반영으로 추천 시스템 신뢰도 향상
- 정량 데이터와 정성 데이터 통합 제공으로 사용자 의사결정 지원 강화
- 데이터와 실제 체감의 괴리 감소
- 매물별 리뷰 데이터베이스 축적을 통한 데이터 자산 확보
- 향후 AI 분석 가능한 텍스트 데이터 확보

### 기술적 효과

**대용량 데이터 처리 성능**
- 수백만 건의 리뷰 데이터가 축적된 상황에서도 매물별 리뷰 조회 시 200ms 이내 응답 보장
- 빈번한 쓰기(리뷰 작성)와 읽기(조회) 트래픽이 공존하는 환경에서의 데이터 정합성 확보

**복잡도 증가**
- N:M 관계 모델링 및 비정형 데이터 처리 경험 축적
- 동시성 제어 및 트랜잭션 관리 경험

**성능 최적화**
- 읽기 성능 개선 전략 학습 및 비동기 처리 경험 확보
- 대용량 데이터 인덱싱 전략 수립

**시스템 통합**
- 기존 시스템과 신규 기능의 통합 경험 확보

---

## 부록

### 용어 정의
- **리뷰 점수**: 매물에 작성된 리뷰의 평균 별점을 기반으로 산출한 0~100점 범위의 점수
- **최종 점수**: 공공데이터 기반 기존 점수와 리뷰 점수를 가중 평균하여 산출한 통합 점수
- **키워드 점수화**: 리뷰 텍스트에서 추출한 키워드의 긍정/부정 성향을 점수로 변환하는 과정

### 참고 자료
추가 필요

### 작성자 정보
추가 필요