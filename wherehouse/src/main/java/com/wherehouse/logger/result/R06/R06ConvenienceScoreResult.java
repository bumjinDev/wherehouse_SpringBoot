package com.wherehouse.logger.result.R06;

import lombok.Builder;
import lombok.Data;

import java.util.Map;

/**
 * R-06 서브 루틴: 편의성 점수 계산 결과
 *
 * 15개 편의시설 카테고리별 점수를 계산하고,
 * 평균을 내어 최종 편의성 점수를 산출한 결과를 기록한다.
 *
 * 카테고리별 계산 방식:
 * - CS2(편의점): 인구 만명당 개수 × 10
 * - CE7(카페): 개수 × 2
 * - FD6(음식점): 개수 × 1
 * - SW8(지하철역): 거리 기반 (500m 이내 100점)
 * - MT1(대형마트): 개수 × 10
 * - BK9(은행): 개수 × 5
 * - PM9(약국): 개수 × 8
 * - HP8(병원): 거리 + 개수 복합
 * - PO3(공공기관): 개수 × 3
 * - CT1(문화시설): 개수 × 4
 * - PK6(주차장): 개수 × 3
 * - OL7(주유소): 개수 × 5
 * - SC4(학교): 개수 × 2
 * - AC5(학원): 개수 × 1
 * - AT4(관광명소): 개수 × 3
 *
 * 최종 점수 = 모든 카테고리 점수 합계 / 카테고리 개수
 */
@Data
@Builder
public class R06ConvenienceScoreResult {

    // ============================================
    // 카테고리별 점수
    // ============================================

    /**
     * 카테고리별 개별 점수 (0-100)
     *
     * Key: 카테고리 코드 (예: "CS2", "FD6")
     * Value: 해당 카테고리의 점수
     *
     * 예시:
     * {
     *   "CS2": 45.2,   // 편의점 점수
     *   "FD6": 68.0,   // 음식점 점수
     *   "CE7": 80.0,   // 카페 점수
     *   "SW8": 100.0,  // 지하철역 점수
     *   ...
     * }
     *
     * 용도: 카테고리별 점수 추적, 디버깅, 분석
     */
    private Map<String, Double> categoryScores;

    /**
     * 카테고리 코드 -> 한글명 매핑
     *
     * Key: 카테고리 코드 (예: "CS2", "FD6")
     * Value: 한글 카테고리명
     *
     * 예시:
     * {
     *   "CS2": "편의점",
     *   "FD6": "음식점",
     *   "CE7": "카페",
     *   "SW8": "지하철역",
     *   ...
     * }
     *
     * 용도: 로그 가독성 향상
     */
    private Map<String, String> categoryNames;

    // ============================================
    // 구별 인구 정보
    // ============================================

    /**
     * 현재 위치의 구 이름
     *
     * 예시: "중구", "강남구", "마포구"
     *
     * 주소에서 추출 (extractGu 메서드 사용)
     *
     * 편의점 점수 계산 시 인구수 조회에 사용
     */
    private String currentGu;

    /**
     * 해당 구의 인구수
     *
     * 예시:
     * - 중구: 131,214
     * - 강남구: 563,215
     * - 송파구: 656,310
     *
     * 편의점 점수 계산 시 사용:
     * 편의점 점수 = (개수 / (인구 / 10000)) × 10
     *
     * 기본값: 400,000 (구 정보 없을 때)
     */
    private Integer guPopulation;

    // ============================================
    // 최종 점수
    // ============================================

    /**
     * 편의성 최종 점수 (0-100)
     *
     * 계산: 모든 카테고리 점수 합계 / 카테고리 개수
     *
     * 예시: 67.89
     *
     * 이 점수는 R-06 메인에서 종합 점수 계산 시 사용됨
     */
    private double finalScore;

    /**
     * 편의성 점수 계산 성공 여부
     * - true: 정상 계산
     * - false: 예외 발생 (거의 발생하지 않음)
     */
    private boolean isSuccess;
}