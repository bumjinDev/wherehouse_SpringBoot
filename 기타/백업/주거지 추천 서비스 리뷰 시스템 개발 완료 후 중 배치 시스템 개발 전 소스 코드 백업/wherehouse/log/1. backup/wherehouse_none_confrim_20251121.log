2025-11-21 19:19:16.357 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-11-21 19:19:16.388 [main] INFO  c.wherehouse.WherehouseApplication - Starting WherehouseApplication using Java 17.0.11 with PID 20076 (E:\devSpace\SpringBootProjects\wherehouse_SpringBoot-master\wherehouse\build\classes\java\main started by wjdqj in E:\devSpace\SpringBootProjects\wherehouse_SpringBoot-master\wherehouse)
2025-11-21 19:19:16.389 [main] INFO  c.wherehouse.WherehouseApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-21 19:19:16.987 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-21 19:19:16.988 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2025-11-21 19:19:17.023 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.BoardEntityRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:19:17.024 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.CommentEntityRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:19:17.024 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.ArrestRateRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:19:17.025 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.CctvGeoRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:19:17.026 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.PoliceOfficeGeoRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:19:17.027 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.JWT.Repository.UserEntityRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:19:17.027 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.members.dao.MemberEntityRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:19:17.028 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisCrimeRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:19:17.029 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisEntertainmentRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:19:17.030 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisPopulationDensityRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:19:17.030 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.restapi.mapdata.dao.MapDataEntityRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:19:17.030 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 39 ms. Found 0 Elasticsearch repository interfaces.
2025-11-21 19:19:17.035 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-21 19:19:17.035 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2025-11-21 19:19:17.045 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.BoardEntityRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:19:17.046 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.CommentEntityRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:19:17.046 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.ArrestRateRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:19:17.046 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.CctvGeoRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:19:17.046 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.PoliceOfficeGeoRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:19:17.046 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.JWT.Repository.UserEntityRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:19:17.046 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.members.dao.MemberEntityRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:19:17.046 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisCrimeRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:19:17.046 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisEntertainmentRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:19:17.046 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisPopulationDensityRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:19:17.047 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.restapi.mapdata.dao.MapDataEntityRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:19:17.047 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11 ms. Found 0 Reactive Elasticsearch repository interfaces.
2025-11-21 19:19:17.059 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-21 19:19:17.060 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-11-21 19:19:17.070 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.BoardEntityRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:19:17.071 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.CommentEntityRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:19:17.071 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.ArrestRateRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:19:17.071 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.CctvGeoRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:19:17.071 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.PoliceOfficeGeoRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:19:17.071 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.JWT.Repository.UserEntityRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:19:17.071 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.members.dao.MemberEntityRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:19:17.071 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisCrimeRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:19:17.072 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisEntertainmentRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:19:17.072 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisPopulationDensityRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:19:17.072 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.restapi.mapdata.dao.MapDataEntityRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:19:17.072 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 0 JDBC repository interfaces.
2025-11-21 19:19:17.078 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-21 19:19:17.078 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-21 19:19:17.175 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 94 ms. Found 11 JPA repository interfaces.
2025-11-21 19:19:17.187 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-21 19:19:17.188 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-21 19:19:17.205 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.BoardEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:19:17.206 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.CommentEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:19:17.206 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.ArrestRateRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:19:17.206 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.CctvGeoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:19:17.206 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.PoliceOfficeGeoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:19:17.206 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.JWT.Repository.UserEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:19:17.206 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.members.dao.MemberEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:19:17.207 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisCrimeRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:19:17.207 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisEntertainmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:19:17.207 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisPopulationDensityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:19:17.207 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.restapi.mapdata.dao.MapDataEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:19:17.207 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
2025-11-21 19:19:17.667 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8185 (http)
2025-11-21 19:19:17.674 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8185"]
2025-11-21 19:19:17.677 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-21 19:19:17.677 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.31]
2025-11-21 19:19:17.814 [main] INFO  o.apache.jasper.servlet.TldScanner - At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.
2025-11-21 19:19:17.818 [main] INFO  o.a.c.c.C.[.[.[/wherehouse] - Initializing Spring embedded WebApplicationContext
2025-11-21 19:19:17.818 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1399 ms
2025-11-21 19:19:17.954 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-21 19:19:17.989 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-11-21 19:19:18.017 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-21 19:19:18.239 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-21 19:19:18.259 [main] WARN  com.zaxxer.hikari.HikariConfig - HikariPool-1 - idleTimeout has been set but has no effect because the pool is operating as a fixed size pool.
2025-11-21 19:19:18.260 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-21 19:19:18.422 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection oracle.jdbc.driver.T4CConnection@625db0e0
2025-11-21 19:19:18.424 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-21 19:19:18.507 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: OracleDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-21 19:19:19.372 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-21 19:19:19.375 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-21 19:19:19.533 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-21 19:19:20.440 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name userAuthenticationProvider
2025-11-21 19:19:20.441 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-11-21 19:19:21.106 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8185"]
2025-11-21 19:19:21.121 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8185 (http) with context path '/wherehouse'
2025-11-21 19:19:21.133 [main] INFO  c.wherehouse.WherehouseApplication - Started WherehouseApplication in 5.11 seconds (process running for 5.537)
2025-11-21 19:20:33.544 [http-nio-8185-exec-2] INFO  o.a.c.c.C.[.[.[/wherehouse] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-21 19:20:33.544 [http-nio-8185-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-21 19:20:33.546 [http-nio-8185-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-11-21 19:20:33.655 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:20:33.655 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.4979, longitude=127.0276, radius=500)
2025-11-21 19:20:33.656 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:20:33.656 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.4979, longitude=127.0276, radius=500
2025-11-21 19:20:33.663 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:33.658203700Z","nanoTime":26019671234700,"traceId":"5d95222b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:20:33.664 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:20:33.664 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.4979, lon=127.0276
2025-11-21 19:20:33.665 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:33.664304700Z","nanoTime":26019678593800,"traceId":"5d95222b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:20:33.679 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:33.667204200Z","nanoTime":26019681222500,"traceId":"5d95222b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":2628700,"duration_ms":2,"resultData":{"latitude":37.4979,"longitude":127.0276,"precision":7,"centerHash":"wydm6d6","adjacentHashes":["wydm6d6","wydm6dd","wydm6de","wydm6d7","wydm6d5","wydm6d4","wydm6d1","wydm6d3","wydm6d9"],"errorMessage":null,"success":true}}
2025-11-21 19:20:33.679 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm6d6, wydm6dd, wydm6de, wydm6d7, wydm6d5, wydm6d4, wydm6d1, wydm6d3, wydm6d9]
2025-11-21 19:20:33.679 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm6d6
2025-11-21 19:20:33.680 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:33.679213900Z","nanoTime":26019693487200,"traceId":"5d95222b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":22252500,"duration_ms":22,"resultData":{"requestLatitude":37.4979,"requestLongitude":127.0276,"requestRadius":500,"centerGeohashId":"wydm6d6","nineBlockGeohashes":["wydm6d6","wydm6dd","wydm6de","wydm6d7","wydm6d5","wydm6d4","wydm6d1","wydm6d3","wydm6d9"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:20:33.680 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:33.680206100Z","nanoTime":26019694771700,"traceId":"5d95222b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:20:33.681 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:20:33.682 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm6d6
2025-11-21 19:20:33.982 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 299.3235ms)
2025-11-21 19:20:33.982 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:20:33.987 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:20:33.987 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:20:33.987 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 4.6637ms, 역직렬화: 0.0ms
2025-11-21 19:20:33.987 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:20:33.991 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:33.987203900Z","nanoTime":26020001520800,"traceId":"5d95222b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":306749100,"duration_ms":306,"resultData":{"centerGeohashId":"wydm6d6","nineBlockGeohashes":["wydm6d6","wydm6dd","wydm6de","wydm6d7","wydm6d5","wydm6d4","wydm6d1","wydm6d3","wydm6d9"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm6d6","hit":false,"valueSize":0,"l1CacheGetDurationNs":299323500,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm6d6","cacheKey":"data:wydm6d6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":600800},{"geohashId":"wydm6dd","cacheKey":"data:wydm6dd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":597800},{"geohashId":"wydm6de","cacheKey":"data:wydm6de:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":440800},{"geohashId":"wydm6d7","cacheKey":"data:wydm6d7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":255200},{"geohashId":"wydm6d5","cacheKey":"data:wydm6d5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":270400},{"geohashId":"wydm6d4","cacheKey":"data:wydm6d4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":245900},{"geohashId":"wydm6d1","cacheKey":"data:wydm6d1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":305600},{"geohashId":"wydm6d3","cacheKey":"data:wydm6d3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":341400},{"geohashId":"wydm6d9","cacheKey":"data:wydm6d9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":293600}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":4663700,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:20:33.991 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:33.991208600Z","nanoTime":26020005494600,"traceId":"5d95222b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:20:33.991 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:20:33.992 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:20:34.131 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 50건
2025-11-21 19:20:34.146 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:20:34.146 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 6개
2025-11-21 19:20:34.152 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:34.146204500Z","nanoTime":26020160314100,"traceId":"5d95222b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":154819500,"duration_ms":154,"resultData":{"inputCctvMissGrids":["wydm6d6","wydm6dd","wydm6de","wydm6d7","wydm6d5","wydm6d4","wydm6d1","wydm6d3","wydm6d9"],"cctvQueryResult":{"queryGeohashIds":["wydm6d6","wydm6dd","wydm6de","wydm6d7","wydm6d5","wydm6d4","wydm6d1","wydm6d3","wydm6d9"],"totalRowsReturned":50,"rowsPerGrid":{"wydm6d9":20,"wydm6d4":5,"wydm6dd":16,"wydm6d3":2,"wydm6d1":3,"wydm6d6":4},"queryExecutionTimeNs":137205400,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm6d9","cacheKey":"data:wydm6d9:cctv","dataCount":20,"dataSize":2782,"errorMessage":null,"success":true},{"geohashId":"wydm6d4","cacheKey":"data:wydm6d4:cctv","dataCount":5,"dataSize":700,"errorMessage":null,"success":true},{"geohashId":"wydm6dd","cacheKey":"data:wydm6dd:cctv","dataCount":16,"dataSize":2182,"errorMessage":null,"success":true},{"geohashId":"wydm6d3","cacheKey":"data:wydm6d3:cctv","dataCount":2,"dataSize":278,"errorMessage":null,"success":true},{"geohashId":"wydm6d1","cacheKey":"data:wydm6d1:cctv","dataCount":3,"dataSize":421,"errorMessage":null,"success":true},{"geohashId":"wydm6d6","cacheKey":"data:wydm6d6:cctv","dataCount":4,"dataSize":557,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:20:34.152 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:34.152205300Z","nanoTime":26020166357800,"traceId":"5d95222b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:20:34.152 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:20:34.154 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.4979, 127.0276)
2025-11-21 19:20:34.155 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:20:34.727 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:20:34.728 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:20:34.731 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:20:35.801 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:20:35.803 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:20:35.803 [http-nio-8185-exec-2] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:20:35.803 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:20:35.803 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:20:35.803 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:20:35.803 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:20:35.808 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:35.803907200Z","nanoTime":26021818311700,"traceId":"5d95222b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":1651953900,"duration_ms":1651,"resultData":{"latitude":37.4979,"longitude":127.0276,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":1648314100,"addressApiResult":{"cached":false,"cacheKey":"address:37.4979:127.0276","roadAddress":"주소 없음","jibunAddress":"서울 서초구 서초동 1373","responseSize":58,"executionTimeNs":574176300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":295000,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.4979:127.0276:500","categoryCount":15,"placesByCategory":{"CT1":12,"AT4":4,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":1,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":141,"responseSize":16415,"executionTimeNs":1073842800,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:20:35.808 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:35.808905400Z","nanoTime":26021822974400,"traceId":"5d95222b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:20:35.808 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:20:35.809 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:20:35.810 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 50개
2025-11-21 19:20:35.810 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 50개 (총 카메라 대수: 65대)
2025-11-21 19:20:35.810 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:20:35.926 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 구로구  고척로1길 34 오류지구대 (거리: 1161m)
2025-11-21 19:20:35.926 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:20:35.927 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:20:35.928 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:20:35.928 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:20:35.931 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:35.928906600Z","nanoTime":26021943168100,"traceId":"5d95222b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":120193700,"duration_ms":120,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":50,"totalCctvAfterFilter":50,"totalCameraCount":65,"filterRate":1.0,"filterExecutionTimeNs":80600,"success":true},"policeQuery":{"queryDurationNs":115962000,"found":true,"nearestAddress":"서울특별시 구로구  고척로1길 34 오류지구대","nearestDistance":1160.5521098113045,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":12,"AT4":4,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":1,"FD6":15,"PK6":15,"PM9":15},"placesAfterFilter":{"CT1":12,"AT4":4,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":1,"FD6":15,"PK6":15,"PM9":15},"totalBeforeFilter":141,"totalAfterFilter":141,"filterRate":1.0,"filterExecutionTimeNs":466300,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:20:35.931 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:35.931910800Z","nanoTime":26021946396500,"traceId":"5d95222b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:20:35.931 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:20:35.934 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 40.00, 편의성: 39.91, 종합: 39.96
2025-11-21 19:20:35.936 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:35.934913400Z","nanoTime":26021949114000,"traceId":"5d95222b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":2717500,"duration_ms":2,"resultData":{"safetyScore":{"policeDistanceScore":0.0,"policeDistance":1160.5521098113045,"cctvScore":100.0,"cctvCount":50,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":40.0,"success":true},"convenienceScore":{"categoryScores":{"CT1":48.0,"AT4":12.0,"CS2":3.75,"SC4":2.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":3.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":39.910714285714285,"success":true},"overallScore":39.95535714285714,"errorMessage":null,"success":true}}
2025-11-21 19:20:35.937 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:35.937903400Z","nanoTime":26021951826700,"traceId":"5d95222b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:20:35.937 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:20:35.939 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 구로구  고척로1길 34 오류지구대, latitude=37.487521, longitude=127.028986, geohashId=wydm687)
2025-11-21 19:20:35.939 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 1160.5521098113045
2025-11-21 19:20:35.954 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm6d6
2025-11-21 19:20:35.954 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:20:35.956 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:35.954911400Z","nanoTime":26021969035700,"traceId":"5d95222b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":17209000,"duration_ms":17,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["지하철역이(가) 41m 내에 있습니다."],"warnings":["가장 가까운 파출소가 1km 이상 떨어져 있습니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm6d6","dataSize":23775,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":23775,"errorMessage":null,"success":true}}
2025-11-21 19:20:35.956 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:20:44.247 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:20:44.248 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5547, longitude=126.9707, radius=500)
2025-11-21 19:20:44.248 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:20:44.248 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5547, longitude=126.9707, radius=500
2025-11-21 19:20:44.248 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:44.248706500Z","nanoTime":26030262697800,"traceId":"41a9f7d4","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:20:44.248 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:20:44.248 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5547, lon=126.9707
2025-11-21 19:20:44.248 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:44.248706500Z","nanoTime":26030262890700,"traceId":"41a9f7d4","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:20:44.248 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:44.248706500Z","nanoTime":26030263021300,"traceId":"41a9f7d4","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":130600,"duration_ms":0,"resultData":{"latitude":37.5547,"longitude":126.9707,"precision":7,"centerHash":"wydm9k9","adjacentHashes":["wydm9k9","wydm9kc","wydm9kf","wydm9kd","wydm9k6","wydm9k3","wydm9k2","wydm9k8","wydm9kb"],"errorMessage":null,"success":true}}
2025-11-21 19:20:44.248 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9k9, wydm9kc, wydm9kf, wydm9kd, wydm9k6, wydm9k3, wydm9k2, wydm9k8, wydm9kb]
2025-11-21 19:20:44.248 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9k9
2025-11-21 19:20:44.248 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:44.248706500Z","nanoTime":26030263242500,"traceId":"41a9f7d4","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":544700,"duration_ms":0,"resultData":{"requestLatitude":37.5547,"requestLongitude":126.9707,"requestRadius":500,"centerGeohashId":"wydm9k9","nineBlockGeohashes":["wydm9k9","wydm9kc","wydm9kf","wydm9kd","wydm9k6","wydm9k3","wydm9k2","wydm9k8","wydm9kb"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:20:44.248 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:44.248706500Z","nanoTime":26030263382200,"traceId":"41a9f7d4","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:20:44.249 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:20:44.249 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9k9
2025-11-21 19:20:44.249 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.6611ms)
2025-11-21 19:20:44.249 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:20:44.252 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:20:44.252 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:20:44.252 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.3347ms, 역직렬화: 0.0ms
2025-11-21 19:20:44.252 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:20:44.253 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:44.252705700Z","nanoTime":26030266935800,"traceId":"41a9f7d4","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3553600,"duration_ms":3,"resultData":{"centerGeohashId":"wydm9k9","nineBlockGeohashes":["wydm9k9","wydm9kc","wydm9kf","wydm9kd","wydm9k6","wydm9k3","wydm9k2","wydm9k8","wydm9kb"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9k9","hit":false,"valueSize":0,"l1CacheGetDurationNs":661100,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9k9","cacheKey":"data:wydm9k9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":473300},{"geohashId":"wydm9kc","cacheKey":"data:wydm9kc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":337900},{"geohashId":"wydm9kf","cacheKey":"data:wydm9kf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":228600},{"geohashId":"wydm9kd","cacheKey":"data:wydm9kd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":206200},{"geohashId":"wydm9k6","cacheKey":"data:wydm9k6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":201600},{"geohashId":"wydm9k3","cacheKey":"data:wydm9k3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":177600},{"geohashId":"wydm9k2","cacheKey":"data:wydm9k2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":179300},{"geohashId":"wydm9k8","cacheKey":"data:wydm9k8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":215000},{"geohashId":"wydm9kb","cacheKey":"data:wydm9kb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":238200}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2334700,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:20:44.253 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:44.253703900Z","nanoTime":26030268179200,"traceId":"41a9f7d4","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:20:44.253 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:20:44.253 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:20:44.257 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 2건
2025-11-21 19:20:44.258 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:20:44.258 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 1개
2025-11-21 19:20:44.259 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:44.258705200Z","nanoTime":26030273222000,"traceId":"41a9f7d4","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5042800,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydm9k9","wydm9kc","wydm9kf","wydm9kd","wydm9k6","wydm9k3","wydm9k2","wydm9k8","wydm9kb"],"cctvQueryResult":{"queryGeohashIds":["wydm9k9","wydm9kc","wydm9kf","wydm9kd","wydm9k6","wydm9k3","wydm9k2","wydm9k8","wydm9kb"],"totalRowsReturned":2,"rowsPerGrid":{"wydm9kf":2},"queryExecutionTimeNs":3830800,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9kf","cacheKey":"data:wydm9kf:cctv","dataCount":2,"dataSize":260,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:20:44.259 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:44.259703700Z","nanoTime":26030273584100,"traceId":"41a9f7d4","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:20:44.259 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:20:44.259 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5547, 126.9707)
2025-11-21 19:20:44.259 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:20:44.355 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:20:44.355 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:20:44.356 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:20:45.467 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:20:45.467 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:20:45.467 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 중구
2025-11-21 19:20:45.468 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 미스 - DB 조회
2025-11-21 19:20:45.483 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 성공 및 캐싱 완료 - 중구: 0.866910799
2025-11-21 19:20:45.483 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:20:45.483 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:20:45.483 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:20:45.483 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.866910799
2025-11-21 19:20:45.484 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:45.483619300Z","nanoTime":26031498163000,"traceId":"41a9f7d4","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":1224578900,"duration_ms":1224,"resultData":{"latitude":37.5547,"longitude":126.9707,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":1224359800,"addressApiResult":{"cached":false,"cacheKey":"address:37.5547:126.9707","roadAddress":"서울특별시 중구 한강대로 405","jibunAddress":"서울 중구 봉래동2가 122-11","responseSize":73,"executionTimeNs":96109200,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":"arrest_rate:중구","guName":"중구","arrestRate":0.866910799,"dataFound":true,"executionTimeNs":16230100,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5547:126.9707:500","categoryCount":15,"placesByCategory":{"CT1":9,"AT4":1,"CS2":15,"SC4":1,"MT1":2,"BK9":15,"HP8":15,"AC5":13,"CE7":15,"SW8":5,"PO3":8,"FD6":15,"PK6":15,"OL7":2,"PM9":8},"totalPlaces":139,"responseSize":16203,"executionTimeNs":1112020500,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:20:45.484 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:45.484618200Z","nanoTime":26031498729300,"traceId":"41a9f7d4","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:20:45.484 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:20:45.484 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:20:45.484 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 2개
2025-11-21 19:20:45.484 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 2개 (총 카메라 대수: 5대)
2025-11-21 19:20:45.484 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:20:45.551 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  다동길 11 (거리: 247m)
2025-11-21 19:20:45.551 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:20:45.551 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:20:45.551 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:20:45.551 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:20:45.552 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:45.551622100Z","nanoTime":26031566041500,"traceId":"41a9f7d4","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":67312200,"duration_ms":67,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":2,"totalCctvAfterFilter":2,"totalCameraCount":5,"filterRate":1.0,"filterExecutionTimeNs":8700,"success":true},"policeQuery":{"queryDurationNs":66396400,"found":true,"nearestAddress":"서울특별시 중구  다동길 11","nearestDistance":246.54394034384907,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":9,"AT4":1,"CS2":15,"SC4":1,"MT1":2,"BK9":15,"HP8":15,"AC5":13,"CE7":15,"SW8":5,"PO3":8,"FD6":15,"PK6":15,"OL7":2,"PM9":8},"placesAfterFilter":{"CT1":9,"AT4":1,"CS2":15,"SC4":1,"MT1":2,"BK9":15,"HP8":15,"AC5":13,"CE7":15,"SW8":5,"PO3":8,"FD6":15,"PK6":15,"OL7":2,"PM9":8},"totalBeforeFilter":139,"totalAfterFilter":139,"filterRate":1.0,"filterExecutionTimeNs":286900,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:20:45.552 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:45.552624400Z","nanoTime":26031566591100,"traceId":"41a9f7d4","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:20:45.552 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:20:45.552 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 49.43, 편의성: 36.56, 종합: 43.00
2025-11-21 19:20:45.553 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:45.552624400Z","nanoTime":26031567171100,"traceId":"41a9f7d4","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":580000,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":69.18200745701887,"policeDistance":246.54394034384907,"cctvScore":6.666666666666667,"cctvCount":2,"arrestRateScore":86.6910799,"arrestRate":0.866910799,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":49.42859287377233,"success":true},"convenienceScore":{"categoryScores":{"CT1":36.0,"AT4":3.0,"CS2":11.431706982486624,"SC4":2.0,"MT1":20.0,"BK9":75.0,"HP8":100.0,"AC5":13.0,"CE7":30.0,"SW8":100.0,"PO3":24.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":64.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"중구","guPopulation":131214,"finalScore":36.56211379883244,"success":true},"overallScore":42.99535333630239,"errorMessage":null,"success":true}}
2025-11-21 19:20:45.553 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:45.553618400Z","nanoTime":26031567497000,"traceId":"41a9f7d4","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:20:45.553 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:20:45.553 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  다동길 11, latitude=37.556808, longitude=126.971567, geohashId=wydm9m1)
2025-11-21 19:20:45.553 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 246.54394034384907
2025-11-21 19:20:45.554 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9k9
2025-11-21 19:20:45.554 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:20:45.555 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:45.554620500Z","nanoTime":26031569199800,"traceId":"41a9f7d4","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1702800,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["카페이(가) 43m 내에 있습니다."],"warnings":["CCTV 설치 대수가 적은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm9k9","dataSize":17677,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17677,"errorMessage":null,"success":true}}
2025-11-21 19:20:45.555 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:20:51.929 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:20:51.929 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5572, longitude=126.9239, radius=500)
2025-11-21 19:20:51.929 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:20:51.929 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5572, longitude=126.9239, radius=500
2025-11-21 19:20:51.929 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:51.929231200Z","nanoTime":26037943793500,"traceId":"bc578820","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:20:51.929 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:20:51.929 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5572, lon=126.9239
2025-11-21 19:20:51.930 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:51.930224Z","nanoTime":26037943975800,"traceId":"bc578820","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:20:51.930 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:51.930224Z","nanoTime":26037944187900,"traceId":"bc578820","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":212100,"duration_ms":0,"resultData":{"latitude":37.5572,"longitude":126.9239,"precision":7,"centerHash":"wydm8jp","adjacentHashes":["wydm8jp","wydm8jr","wydm8m2","wydm8m0","wydm8kb","wydm8hz","wydm8hy","wydm8jn","wydm8jq"],"errorMessage":null,"success":true}}
2025-11-21 19:20:51.930 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm8jp, wydm8jr, wydm8m2, wydm8m0, wydm8kb, wydm8hz, wydm8hy, wydm8jn, wydm8jq]
2025-11-21 19:20:51.930 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm8jp
2025-11-21 19:20:51.930 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:51.930224Z","nanoTime":26037944437600,"traceId":"bc578820","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":644100,"duration_ms":0,"resultData":{"requestLatitude":37.5572,"requestLongitude":126.9239,"requestRadius":500,"centerGeohashId":"wydm8jp","nineBlockGeohashes":["wydm8jp","wydm8jr","wydm8m2","wydm8m0","wydm8kb","wydm8hz","wydm8hy","wydm8jn","wydm8jq"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:20:51.930 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:51.930224Z","nanoTime":26037944570200,"traceId":"bc578820","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:20:51.930 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:20:51.930 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm8jp
2025-11-21 19:20:51.931 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5595ms)
2025-11-21 19:20:51.931 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:20:51.933 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:20:51.933 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:20:51.933 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.2606ms, 역직렬화: 0.0ms
2025-11-21 19:20:51.933 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:20:51.934 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:51.933202700Z","nanoTime":26037947812300,"traceId":"bc578820","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3242100,"duration_ms":3,"resultData":{"centerGeohashId":"wydm8jp","nineBlockGeohashes":["wydm8jp","wydm8jr","wydm8m2","wydm8m0","wydm8kb","wydm8hz","wydm8hy","wydm8jn","wydm8jq"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm8jp","hit":false,"valueSize":0,"l1CacheGetDurationNs":559500,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm8jp","cacheKey":"data:wydm8jp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":305600},{"geohashId":"wydm8jr","cacheKey":"data:wydm8jr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":253600},{"geohashId":"wydm8m2","cacheKey":"data:wydm8m2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":263300},{"geohashId":"wydm8m0","cacheKey":"data:wydm8m0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":252000},{"geohashId":"wydm8kb","cacheKey":"data:wydm8kb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":229200},{"geohashId":"wydm8hz","cacheKey":"data:wydm8hz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":206900},{"geohashId":"wydm8hy","cacheKey":"data:wydm8hy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":266600},{"geohashId":"wydm8jn","cacheKey":"data:wydm8jn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":210600},{"geohashId":"wydm8jq","cacheKey":"data:wydm8jq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":199100}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2260600,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:20:51.934 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:51.934226500Z","nanoTime":26037948248700,"traceId":"bc578820","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:20:51.934 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:20:51.934 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:20:51.939 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 19건
2025-11-21 19:20:51.943 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:20:51.943 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:20:51.944 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:51.943237500Z","nanoTime":26037957730200,"traceId":"bc578820","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":9481500,"duration_ms":9,"resultData":{"inputCctvMissGrids":["wydm8jp","wydm8jr","wydm8m2","wydm8m0","wydm8kb","wydm8hz","wydm8hy","wydm8jn","wydm8jq"],"cctvQueryResult":{"queryGeohashIds":["wydm8jp","wydm8jr","wydm8m2","wydm8m0","wydm8kb","wydm8hz","wydm8hy","wydm8jn","wydm8jq"],"totalRowsReturned":19,"rowsPerGrid":{"wydm8jp":2,"wydm8jn":2,"wydm8m0":2,"wydm8jr":3,"wydm8jq":1,"wydm8kb":1,"wydm8hz":7,"wydm8hy":1},"queryExecutionTimeNs":5274100,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm8jp","cacheKey":"data:wydm8jp:cctv","dataCount":2,"dataSize":256,"errorMessage":null,"success":true},{"geohashId":"wydm8jn","cacheKey":"data:wydm8jn:cctv","dataCount":2,"dataSize":256,"errorMessage":null,"success":true},{"geohashId":"wydm8m0","cacheKey":"data:wydm8m0:cctv","dataCount":2,"dataSize":255,"errorMessage":null,"success":true},{"geohashId":"wydm8jr","cacheKey":"data:wydm8jr:cctv","dataCount":3,"dataSize":381,"errorMessage":null,"success":true},{"geohashId":"wydm8jq","cacheKey":"data:wydm8jq:cctv","dataCount":1,"dataSize":128,"errorMessage":null,"success":true},{"geohashId":"wydm8kb","cacheKey":"data:wydm8kb:cctv","dataCount":1,"dataSize":127,"errorMessage":null,"success":true},{"geohashId":"wydm8hz","cacheKey":"data:wydm8hz:cctv","dataCount":7,"dataSize":893,"errorMessage":null,"success":true},{"geohashId":"wydm8hy","cacheKey":"data:wydm8hy:cctv","dataCount":1,"dataSize":128,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:20:51.944 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:51.944203900Z","nanoTime":26037958268100,"traceId":"bc578820","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:20:51.944 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:20:51.944 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5572, 126.9239)
2025-11-21 19:20:51.944 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:20:52.055 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:20:52.056 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:20:52.056 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:20:53.120 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:20:53.120 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:20:53.120 [http-nio-8185-exec-5] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:20:53.120 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:20:53.120 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:20:53.120 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:20:53.120 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:20:53.120 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:53.120128200Z","nanoTime":26039134472900,"traceId":"bc578820","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":1176204800,"duration_ms":1176,"resultData":{"latitude":37.5572,"longitude":126.9239,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":1175934400,"addressApiResult":{"cached":false,"cacheKey":"address:37.5572:126.9239","roadAddress":"주소 없음","jibunAddress":"서울 마포구 동교동 192-44","responseSize":60,"executionTimeNs":111830400,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":55300,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5572:126.9239:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":10,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":3,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalPlaces":154,"responseSize":17877,"executionTimeNs":1064048700,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:20:53.121 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:53.120128200Z","nanoTime":26039134870400,"traceId":"bc578820","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:20:53.121 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:20:53.121 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:20:53.121 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 19개
2025-11-21 19:20:53.121 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 19개 (총 카메라 대수: 44대)
2025-11-21 19:20:53.121 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:20:53.186 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 마포구  매봉산로 76 (거리: 349m)
2025-11-21 19:20:53.186 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:20:53.186 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:20:53.187 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:20:53.187 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:20:53.187 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:53.187134900Z","nanoTime":26039200998000,"traceId":"bc578820","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":66127600,"duration_ms":66,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":19,"totalCctvAfterFilter":19,"totalCameraCount":44,"filterRate":1.0,"filterExecutionTimeNs":17100,"success":true},"policeQuery":{"queryDurationNs":65457500,"found":true,"nearestAddress":"서울특별시 마포구  매봉산로 76","nearestDistance":348.70022805484854,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":10,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":3,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"placesAfterFilter":{"CT1":14,"AT4":10,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":3,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalBeforeFilter":154,"totalAfterFilter":153,"filterRate":0.9935064935064936,"filterExecutionTimeNs":133800,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:20:53.187 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:53.187134900Z","nanoTime":26039201338100,"traceId":"bc578820","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:20:53.187 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:20:53.187 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 42.26, 편의성: 39.72, 종합: 40.99
2025-11-21 19:20:53.188 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:53.187134900Z","nanoTime":26039201737500,"traceId":"bc578820","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":399400,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":56.41247149314393,"policeDistance":348.70022805484854,"cctvScore":63.33333333333333,"cctvCount":19,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":42.257074781276515,"success":true},"convenienceScore":{"categoryScores":{"CT1":56.0,"AT4":30.0,"CS2":3.75,"SC4":2.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":39.71666666666667,"success":true},"overallScore":40.98687072397159,"errorMessage":null,"success":true}}
2025-11-21 19:20:53.188 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:53.188135400Z","nanoTime":26039202064600,"traceId":"bc578820","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:20:53.188 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:20:53.188 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 마포구  매봉산로 76, latitude=37.560334, longitude=126.923761, geohashId=wydm8jx)
2025-11-21 19:20:53.188 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 348.70022805484854
2025-11-21 19:20:53.189 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm8jp
2025-11-21 19:20:53.189 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:20:53.190 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:53.189131800Z","nanoTime":26039203762900,"traceId":"bc578820","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1698300,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["병원이(가) 20m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm8jp","dataSize":20956,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20956,"errorMessage":null,"success":true}}
2025-11-21 19:20:53.190 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:20:58.544 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:20:58.544 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5326, longitude=126.9135, radius=500)
2025-11-21 19:20:58.544 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:20:58.544 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5326, longitude=126.9135, radius=500
2025-11-21 19:20:58.544 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:58.544054100Z","nanoTime":26044558214200,"traceId":"2d99f17e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:20:58.544 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:20:58.544 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5326, lon=126.9135
2025-11-21 19:20:58.544 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:58.544054100Z","nanoTime":26044558358500,"traceId":"2d99f17e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:20:58.544 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:58.544054100Z","nanoTime":26044558477800,"traceId":"2d99f17e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":119300,"duration_ms":0,"resultData":{"latitude":37.5326,"longitude":126.9135,"precision":7,"centerHash":"wydjxbx","adjacentHashes":["wydjxbx","wydjxbz","wydm80b","wydm808","wydm802","wydjxbr","wydjxbq","wydjxbw","wydjxby"],"errorMessage":null,"success":true}}
2025-11-21 19:20:58.544 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydjxbx, wydjxbz, wydm80b, wydm808, wydm802, wydjxbr, wydjxbq, wydjxbw, wydjxby]
2025-11-21 19:20:58.544 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydjxbx
2025-11-21 19:20:58.544 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:58.544054100Z","nanoTime":26044558660200,"traceId":"2d99f17e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":446000,"duration_ms":0,"resultData":{"requestLatitude":37.5326,"requestLongitude":126.9135,"requestRadius":500,"centerGeohashId":"wydjxbx","nineBlockGeohashes":["wydjxbx","wydjxbz","wydm80b","wydm808","wydm802","wydjxbr","wydjxbq","wydjxbw","wydjxby"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:20:58.545 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:58.544054100Z","nanoTime":26044558775700,"traceId":"2d99f17e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:20:58.545 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:20:58.545 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydjxbx
2025-11-21 19:20:58.545 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.6054ms)
2025-11-21 19:20:58.545 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:20:58.547 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:20:58.548 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:20:58.548 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.1571ms, 역직렬화: 0.0ms
2025-11-21 19:20:58.548 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:20:58.548 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:58.548043100Z","nanoTime":26044561960800,"traceId":"2d99f17e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3185100,"duration_ms":3,"resultData":{"centerGeohashId":"wydjxbx","nineBlockGeohashes":["wydjxbx","wydjxbz","wydm80b","wydm808","wydm802","wydjxbr","wydjxbq","wydjxbw","wydjxby"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydjxbx","hit":false,"valueSize":0,"l1CacheGetDurationNs":605400,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydjxbx","cacheKey":"data:wydjxbx:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":332500},{"geohashId":"wydjxbz","cacheKey":"data:wydjxbz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":401300},{"geohashId":"wydm80b","cacheKey":"data:wydm80b:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":253100},{"geohashId":"wydm808","cacheKey":"data:wydm808:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":188300},{"geohashId":"wydm802","cacheKey":"data:wydm802:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":172400},{"geohashId":"wydjxbr","cacheKey":"data:wydjxbr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":147600},{"geohashId":"wydjxbq","cacheKey":"data:wydjxbq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":158600},{"geohashId":"wydjxbw","cacheKey":"data:wydjxbw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":256900},{"geohashId":"wydjxby","cacheKey":"data:wydjxby:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":169700}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2157100,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:20:58.548 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:58.548043100Z","nanoTime":26044562325900,"traceId":"2d99f17e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:20:58.548 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:20:58.548 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:20:58.552 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 2건
2025-11-21 19:20:58.553 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:20:58.553 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 1개
2025-11-21 19:20:58.554 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:58.553049900Z","nanoTime":26044567552500,"traceId":"2d99f17e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5226600,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydjxbx","wydjxbz","wydm80b","wydm808","wydm802","wydjxbr","wydjxbq","wydjxbw","wydjxby"],"cctvQueryResult":{"queryGeohashIds":["wydjxbx","wydjxbz","wydm80b","wydm808","wydm802","wydjxbr","wydjxbq","wydjxbw","wydjxby"],"totalRowsReturned":2,"rowsPerGrid":{"wydjxbq":2},"queryExecutionTimeNs":4034100,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydjxbq","cacheKey":"data:wydjxbq:cctv","dataCount":2,"dataSize":272,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:20:58.554 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:58.554043700Z","nanoTime":26044568446900,"traceId":"2d99f17e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:20:58.554 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:20:58.554 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5326, 126.9135)
2025-11-21 19:20:58.555 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:20:58.615 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:20:58.615 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:20:58.615 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:20:59.787 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:20:59.787 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:20:59.787 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 영등포구
2025-11-21 19:20:59.788 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 미스 - DB 조회
2025-11-21 19:20:59.791 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 성공 및 캐싱 완료 - 영등포구: 0.721231491
2025-11-21 19:20:59.791 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:20:59.791 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:20:59.791 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:20:59.791 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.721231491
2025-11-21 19:20:59.791 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:59.791490300Z","nanoTime":26045805937000,"traceId":"2d99f17e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":1237490100,"duration_ms":1237,"resultData":{"latitude":37.5326,"longitude":126.9135,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":1237276000,"addressApiResult":{"cached":false,"cacheKey":"address:37.5326:126.9135","roadAddress":"서울특별시 영등포구 의사당대로 1","jibunAddress":"서울 영등포구 여의도동 1","responseSize":70,"executionTimeNs":61138300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":"arrest_rate:영등포구","guName":"영등포구","arrestRate":0.721231491,"dataFound":true,"executionTimeNs":4168900,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5326:126.9135:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":9,"CS2":0,"SC4":0,"MT1":1,"BK9":14,"HP8":2,"AC5":0,"CE7":4,"SW8":0,"PO3":0,"FD6":9,"PK6":6,"OL7":0,"PM9":1},"totalPlaces":47,"responseSize":5608,"executionTimeNs":1171968800,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:20:59.791 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:59.791490300Z","nanoTime":26045806186700,"traceId":"2d99f17e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:20:59.792 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:20:59.792 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:20:59.792 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 2개
2025-11-21 19:20:59.792 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 2개 (총 카메라 대수: 2대)
2025-11-21 19:20:59.792 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:20:59.855 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구  경인로 759 (거리: 1085m)
2025-11-21 19:20:59.855 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:20:59.855 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:20:59.855 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 9개 카테고리
2025-11-21 19:20:59.855 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:20:59.856 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:59.856413600Z","nanoTime":26045870177200,"traceId":"2d99f17e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":63990500,"duration_ms":63,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":2,"totalCctvAfterFilter":2,"totalCameraCount":2,"filterRate":1.0,"filterExecutionTimeNs":4700,"success":true},"policeQuery":{"queryDurationNs":63511800,"found":true,"nearestAddress":"서울특별시 영등포구  경인로 759","nearestDistance":1084.99359027666,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"AT4":9,"BK9":14,"HP8":2,"CE7":4,"FD6":9,"PK6":6,"MT1":1,"PM9":1},"placesAfterFilter":{"CT1":1,"AT4":9,"BK9":14,"HP8":2,"CE7":4,"FD6":9,"PK6":6,"MT1":1,"PM9":1},"totalBeforeFilter":47,"totalAfterFilter":47,"filterRate":1.0,"filterExecutionTimeNs":63400,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:20:59.856 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:59.856413600Z","nanoTime":26045870556900,"traceId":"2d99f17e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:20:59.856 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:20:59.856 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 24.30, 편의성: 24.89, 종합: 24.60
2025-11-21 19:20:59.856 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:59.856413600Z","nanoTime":26045870950400,"traceId":"2d99f17e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":393500,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":0.0,"policeDistance":1084.99359027666,"cctvScore":6.666666666666667,"cctvCount":2,"arrestRateScore":72.12314909999999,"arrestRate":0.721231491,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":24.303611396666664,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"AT4":27.0,"BK9":70.0,"HP8":70.0,"CE7":8.0,"FD6":9.0,"PK6":18.0,"MT1":10.0,"PM9":8.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"영등포구","guPopulation":397173,"finalScore":24.88888888888889,"success":true},"overallScore":24.596250142777777,"errorMessage":null,"success":true}}
2025-11-21 19:20:59.857 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:59.857408900Z","nanoTime":26045871160000,"traceId":"2d99f17e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:20:59.857 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:20:59.857 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구  경인로 759, latitude=37.533614, longitude=126.901262, geohashId=wydjx8y)
2025-11-21 19:20:59.857 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 1084.99359027666
2025-11-21 19:20:59.858 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydjxbx
2025-11-21 19:20:59.858 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:20:59.858 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:20:59.858487400Z","nanoTime":26045872378100,"traceId":"2d99f17e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1218100,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["음식점이(가) 103m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","가장 가까운 파출소가 1km 이상 떨어져 있습니다.","CCTV 설치 대수가 적은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydjxbx","dataSize":7205,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":7205,"errorMessage":null,"success":true}}
2025-11-21 19:20:59.858 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:21:04.811 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:21:04.811 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5133, longitude=127.1, radius=500)
2025-11-21 19:21:04.811 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:21:04.811 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5133, longitude=127.1, radius=500
2025-11-21 19:21:04.811 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:04.811612500Z","nanoTime":26050825694200,"traceId":"b3c73500","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:21:04.811 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:21:04.811 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5133, lon=127.1
2025-11-21 19:21:04.811 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:04.811612500Z","nanoTime":26050825883400,"traceId":"b3c73500","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:21:04.811 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:04.811612500Z","nanoTime":26050826004100,"traceId":"b3c73500","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":120700,"duration_ms":0,"resultData":{"latitude":37.5133,"longitude":127.1,"precision":7,"centerHash":"wydmkjp","adjacentHashes":["wydmkjp","wydmkjr","wydmkm2","wydmkm0","wydmkkb","wydmkhz","wydmkhy","wydmkjn","wydmkjq"],"errorMessage":null,"success":true}}
2025-11-21 19:21:04.811 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmkjp, wydmkjr, wydmkm2, wydmkm0, wydmkkb, wydmkhz, wydmkhy, wydmkjn, wydmkjq]
2025-11-21 19:21:04.811 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmkjp
2025-11-21 19:21:04.811 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:04.811612500Z","nanoTime":26050826222800,"traceId":"b3c73500","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":528600,"duration_ms":0,"resultData":{"requestLatitude":37.5133,"requestLongitude":127.1,"requestRadius":500,"centerGeohashId":"wydmkjp","nineBlockGeohashes":["wydmkjp","wydmkjr","wydmkm2","wydmkm0","wydmkkb","wydmkhz","wydmkhy","wydmkjn","wydmkjq"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:21:04.812 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:04.812612300Z","nanoTime":26050826379000,"traceId":"b3c73500","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:21:04.812 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:21:04.812 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmkjp
2025-11-21 19:21:04.812 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.652ms)
2025-11-21 19:21:04.812 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:21:04.814 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:21:04.814 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:21:04.814 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.8463ms, 역직렬화: 0.0ms
2025-11-21 19:21:04.814 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:21:04.815 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:04.814612100Z","nanoTime":26050829284400,"traceId":"b3c73500","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2905400,"duration_ms":2,"resultData":{"centerGeohashId":"wydmkjp","nineBlockGeohashes":["wydmkjp","wydmkjr","wydmkm2","wydmkm0","wydmkkb","wydmkhz","wydmkhy","wydmkjn","wydmkjq"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmkjp","hit":false,"valueSize":0,"l1CacheGetDurationNs":652000,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmkjp","cacheKey":"data:wydmkjp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":301600},{"geohashId":"wydmkjr","cacheKey":"data:wydmkjr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":186800},{"geohashId":"wydmkm2","cacheKey":"data:wydmkm2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":154900},{"geohashId":"wydmkm0","cacheKey":"data:wydmkm0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":195700},{"geohashId":"wydmkkb","cacheKey":"data:wydmkkb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":184200},{"geohashId":"wydmkhz","cacheKey":"data:wydmkhz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":162100},{"geohashId":"wydmkhy","cacheKey":"data:wydmkhy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":184600},{"geohashId":"wydmkjn","cacheKey":"data:wydmkjn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":171200},{"geohashId":"wydmkjq","cacheKey":"data:wydmkjq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":237000}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1846300,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:21:04.815 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:04.815619100Z","nanoTime":26050829799700,"traceId":"b3c73500","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:21:04.815 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:21:04.815 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:21:04.820 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 21건
2025-11-21 19:21:04.823 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:21:04.823 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 5개
2025-11-21 19:21:04.823 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:04.823618600Z","nanoTime":26050837746000,"traceId":"b3c73500","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":7946300,"duration_ms":7,"resultData":{"inputCctvMissGrids":["wydmkjp","wydmkjr","wydmkm2","wydmkm0","wydmkkb","wydmkhz","wydmkhy","wydmkjn","wydmkjq"],"cctvQueryResult":{"queryGeohashIds":["wydmkjp","wydmkjr","wydmkm2","wydmkm0","wydmkkb","wydmkhz","wydmkhy","wydmkjn","wydmkjq"],"totalRowsReturned":21,"rowsPerGrid":{"wydmkm2":1,"wydmkjq":15,"wydmkhy":1,"wydmkhz":1,"wydmkm0":3},"queryExecutionTimeNs":5159900,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmkm2","cacheKey":"data:wydmkm2:cctv","dataCount":1,"dataSize":136,"errorMessage":null,"success":true},{"geohashId":"wydmkjq","cacheKey":"data:wydmkjq:cctv","dataCount":15,"dataSize":1996,"errorMessage":null,"success":true},{"geohashId":"wydmkhy","cacheKey":"data:wydmkhy:cctv","dataCount":1,"dataSize":154,"errorMessage":null,"success":true},{"geohashId":"wydmkhz","cacheKey":"data:wydmkhz:cctv","dataCount":1,"dataSize":145,"errorMessage":null,"success":true},{"geohashId":"wydmkm0","cacheKey":"data:wydmkm0:cctv","dataCount":3,"dataSize":447,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:21:04.823 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:04.823618600Z","nanoTime":26050838023800,"traceId":"b3c73500","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:21:04.823 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:21:04.823 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5133, 127.1)
2025-11-21 19:21:04.824 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:21:04.923 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:21:04.923 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:21:04.923 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:21:06.035 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:21:06.035 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:21:06.035 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 송파구
2025-11-21 19:21:06.036 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 미스 - DB 조회
2025-11-21 19:21:06.040 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 성공 및 캐싱 완료 - 송파구: 0.657451864
2025-11-21 19:21:06.040 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:21:06.040 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:21:06.040 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:21:06.040 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.657451864
2025-11-21 19:21:06.041 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:06.040671500Z","nanoTime":26052055406500,"traceId":"b3c73500","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":1217382700,"duration_ms":1217,"resultData":{"latitude":37.5133,"longitude":127.1,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":1217186600,"addressApiResult":{"cached":false,"cacheKey":"address:37.5133:127.1","roadAddress":"서울특별시 송파구 올림픽로 지하 265","jibunAddress":"서울 송파구 신천동 8","responseSize":71,"executionTimeNs":99805900,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":"arrest_rate:송파구","guName":"송파구","arrestRate":0.657451864,"dataFound":true,"executionTimeNs":4979700,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5133:127.1:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":5,"CS2":15,"SC4":2,"MT1":4,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":2,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":150,"responseSize":17627,"executionTimeNs":1112401000,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:21:06.041 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:06.041672500Z","nanoTime":26052055757800,"traceId":"b3c73500","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:21:06.041 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:21:06.041 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:21:06.041 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 21개
2025-11-21 19:21:06.041 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 21개 (총 카메라 대수: 30대)
2025-11-21 19:21:06.041 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:21:06.109 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 양천구  중앙로32길 65 (거리: 1344m)
2025-11-21 19:21:06.109 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:21:06.109 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:21:06.109 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:21:06.109 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:21:06.109 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:06.109680500Z","nanoTime":26052123933000,"traceId":"b3c73500","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":68175200,"duration_ms":68,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":21,"totalCctvAfterFilter":21,"totalCameraCount":30,"filterRate":1.0,"filterExecutionTimeNs":13700,"success":true},"policeQuery":{"queryDurationNs":67594300,"found":true,"nearestAddress":"서울특별시 양천구  중앙로32길 65","nearestDistance":1343.589020595067,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":5,"CS2":15,"SC4":2,"MT1":4,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":2,"FD6":15,"PK6":15,"PM9":15},"placesAfterFilter":{"CT1":15,"AT4":5,"CS2":15,"SC4":2,"MT1":4,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":2,"FD6":15,"PK6":15,"PM9":15},"totalBeforeFilter":150,"totalAfterFilter":150,"filterRate":1.0,"filterExecutionTimeNs":170600,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:21:06.109 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:06.109680500Z","nanoTime":26052124246900,"traceId":"b3c73500","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:21:06.109 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:21:06.110 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 47.72, 편의성: 43.38, 종합: 45.55
2025-11-21 19:21:06.110 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:06.110668500Z","nanoTime":26052124652300,"traceId":"b3c73500","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":405400,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":0.0,"policeDistance":1343.589020595067,"cctvScore":70.0,"cctvCount":21,"arrestRateScore":65.7451864,"arrestRate":0.657451864,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":47.723555919999995,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":15.0,"CS2":2.285505325227408,"SC4":4.0,"MT1":40.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":6.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"송파구","guPopulation":656310,"finalScore":43.3775360946591,"success":true},"overallScore":45.550546007329544,"errorMessage":null,"success":true}}
2025-11-21 19:21:06.110 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:06.110668500Z","nanoTime":26052124928200,"traceId":"b3c73500","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:21:06.110 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:21:06.110 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 양천구  중앙로32길 65, latitude=37.502675, longitude=127.092746, geohashId=wydmk54)
2025-11-21 19:21:06.110 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 1343.589020595067
2025-11-21 19:21:06.111 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmkjp
2025-11-21 19:21:06.111 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:21:06.111 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:06.111675500Z","nanoTime":26052126283000,"traceId":"b3c73500","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1354800,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["지하철역이(가) 20m 내에 있습니다."],"warnings":["가장 가까운 파출소가 1km 이상 떨어져 있습니다."],"cacheWrite":{"cacheKey":"dto:wydmkjp","dataSize":21721,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":21721,"errorMessage":null,"success":true}}
2025-11-21 19:21:06.111 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:21:09.384 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:21:09.384 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5637, longitude=126.983, radius=500)
2025-11-21 19:21:09.384 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:21:09.384 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5637, longitude=126.983, radius=500
2025-11-21 19:21:09.384 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:09.384622700Z","nanoTime":26055399117100,"traceId":"19522106","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:21:09.384 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:21:09.384 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5637, lon=126.983
2025-11-21 19:21:09.385 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:09.384622700Z","nanoTime":26055399328100,"traceId":"19522106","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:21:09.385 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:09.385621800Z","nanoTime":26055399502900,"traceId":"19522106","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":174800,"duration_ms":0,"resultData":{"latitude":37.5637,"longitude":126.983,"precision":7,"centerHash":"wydm9w6","adjacentHashes":["wydm9w6","wydm9wd","wydm9we","wydm9w7","wydm9w5","wydm9w4","wydm9w1","wydm9w3","wydm9w9"],"errorMessage":null,"success":true}}
2025-11-21 19:21:09.385 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9w6, wydm9wd, wydm9we, wydm9w7, wydm9w5, wydm9w4, wydm9w1, wydm9w3, wydm9w9]
2025-11-21 19:21:09.385 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9w6
2025-11-21 19:21:09.385 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:09.385621800Z","nanoTime":26055399670200,"traceId":"19522106","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":553100,"duration_ms":0,"resultData":{"requestLatitude":37.5637,"requestLongitude":126.983,"requestRadius":500,"centerGeohashId":"wydm9w6","nineBlockGeohashes":["wydm9w6","wydm9wd","wydm9we","wydm9w7","wydm9w5","wydm9w4","wydm9w1","wydm9w3","wydm9w9"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:21:09.385 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:09.385621800Z","nanoTime":26055399765000,"traceId":"19522106","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:21:09.385 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:21:09.385 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9w6
2025-11-21 19:21:09.385 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4862ms)
2025-11-21 19:21:09.385 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:21:09.388 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:21:09.388 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:21:09.388 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.3358ms, 역직렬화: 0.0ms
2025-11-21 19:21:09.388 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:21:09.388 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:09.388623900Z","nanoTime":26055402876600,"traceId":"19522106","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3111600,"duration_ms":3,"resultData":{"centerGeohashId":"wydm9w6","nineBlockGeohashes":["wydm9w6","wydm9wd","wydm9we","wydm9w7","wydm9w5","wydm9w4","wydm9w1","wydm9w3","wydm9w9"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9w6","hit":false,"valueSize":0,"l1CacheGetDurationNs":486200,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9w6","cacheKey":"data:wydm9w6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":323400},{"geohashId":"wydm9wd","cacheKey":"data:wydm9wd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":198100},{"geohashId":"wydm9we","cacheKey":"data:wydm9we:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":248200},{"geohashId":"wydm9w7","cacheKey":"data:wydm9w7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":310100},{"geohashId":"wydm9w5","cacheKey":"data:wydm9w5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":289300},{"geohashId":"wydm9w4","cacheKey":"data:wydm9w4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":195500},{"geohashId":"wydm9w1","cacheKey":"data:wydm9w1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":171200},{"geohashId":"wydm9w3","cacheKey":"data:wydm9w3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":150100},{"geohashId":"wydm9w9","cacheKey":"data:wydm9w9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":378000}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2335800,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:21:09.388 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:09.388623900Z","nanoTime":26055403142100,"traceId":"19522106","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:21:09.388 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:21:09.388 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:21:09.392 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 9건
2025-11-21 19:21:09.395 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:21:09.395 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 6개
2025-11-21 19:21:09.396 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:09.395625100Z","nanoTime":26055410302700,"traceId":"19522106","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":7160600,"duration_ms":7,"resultData":{"inputCctvMissGrids":["wydm9w6","wydm9wd","wydm9we","wydm9w7","wydm9w5","wydm9w4","wydm9w1","wydm9w3","wydm9w9"],"cctvQueryResult":{"queryGeohashIds":["wydm9w6","wydm9wd","wydm9we","wydm9w7","wydm9w5","wydm9w4","wydm9w1","wydm9w3","wydm9w9"],"totalRowsReturned":9,"rowsPerGrid":{"wydm9w4":1,"wydm9w3":1,"wydm9w7":3,"wydm9w6":1,"wydm9w5":2,"wydm9we":1},"queryExecutionTimeNs":4018800,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9w4","cacheKey":"data:wydm9w4:cctv","dataCount":1,"dataSize":131,"errorMessage":null,"success":true},{"geohashId":"wydm9w3","cacheKey":"data:wydm9w3:cctv","dataCount":1,"dataSize":126,"errorMessage":null,"success":true},{"geohashId":"wydm9w7","cacheKey":"data:wydm9w7:cctv","dataCount":3,"dataSize":386,"errorMessage":null,"success":true},{"geohashId":"wydm9w6","cacheKey":"data:wydm9w6:cctv","dataCount":1,"dataSize":130,"errorMessage":null,"success":true},{"geohashId":"wydm9w5","cacheKey":"data:wydm9w5:cctv","dataCount":2,"dataSize":259,"errorMessage":null,"success":true},{"geohashId":"wydm9we","cacheKey":"data:wydm9we:cctv","dataCount":1,"dataSize":132,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:21:09.396 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:09.396622200Z","nanoTime":26055410623700,"traceId":"19522106","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:21:09.396 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:21:09.396 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5637, 126.983)
2025-11-21 19:21:09.396 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:21:09.471 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:21:09.471 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:21:09.472 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:21:10.600 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:21:10.600 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:21:10.600 [http-nio-8185-exec-4] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:21:10.600 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:21:10.600 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:21:10.600 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:21:10.600 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:21:10.600 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:10.600881Z","nanoTime":26056615307800,"traceId":"19522106","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":1204684100,"duration_ms":1204,"resultData":{"latitude":37.5637,"longitude":126.983,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":1204522000,"addressApiResult":{"cached":false,"cacheKey":"address:37.5637:126.983","roadAddress":"주소 없음","jibunAddress":"서울 중구 명동1가 54-19","responseSize":59,"executionTimeNs":74928000,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":30100,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5637:126.983:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":6,"CS2":15,"SC4":0,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":15,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":158,"responseSize":18282,"executionTimeNs":1129563900,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:21:10.600 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:10.600881Z","nanoTime":26056615548600,"traceId":"19522106","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:21:10.600 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:21:10.600 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:21:10.601 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 9개
2025-11-21 19:21:10.601 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 9개 (총 카메라 대수: 25대)
2025-11-21 19:21:10.601 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:21:10.667 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  통일로 13 (거리: 86m)
2025-11-21 19:21:10.667 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:21:10.667 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:21:10.668 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 12개 카테고리
2025-11-21 19:21:10.668 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:21:10.668 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:10.668879300Z","nanoTime":26056682826700,"traceId":"19522106","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":67278100,"duration_ms":67,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":9,"totalCctvAfterFilter":9,"totalCameraCount":25,"filterRate":1.0,"filterExecutionTimeNs":8300,"success":true},"policeQuery":{"queryDurationNs":66764200,"found":true,"nearestAddress":"서울특별시 중구  통일로 13","nearestDistance":85.80535563833556,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":6,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SW8":2,"PO3":15,"FD6":15,"PK6":15,"PM9":15},"placesAfterFilter":{"CT1":15,"AT4":6,"BK9":14,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SW8":2,"PO3":15,"FD6":15,"PK6":15,"PM9":15},"totalBeforeFilter":158,"totalAfterFilter":157,"filterRate":0.9936708860759493,"filterExecutionTimeNs":130300,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:21:10.668 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:10.668879300Z","nanoTime":26056683100700,"traceId":"19522106","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:21:10.668 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:21:10.668 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 38.78, 편의성: 50.15, 종합: 44.46
2025-11-21 19:21:10.668 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:10.668879300Z","nanoTime":26056683372900,"traceId":"19522106","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":272200,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":89.27433054520806,"policeDistance":85.80535563833556,"cctvScore":30.0,"cctvCount":9,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":38.78229916356241,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":18.0,"BK9":70.0,"HP8":100.0,"CS2":3.75,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":45.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":50.145833333333336,"success":true},"overallScore":44.46406624844788,"errorMessage":null,"success":true}}
2025-11-21 19:21:10.668 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:10.668879300Z","nanoTime":26056683536600,"traceId":"19522106","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:21:10.668 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:21:10.668 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  통일로 13, latitude=37.563587, longitude=126.983963, geohashId=wydm9w4)
2025-11-21 19:21:10.668 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 85.80535563833556
2025-11-21 19:21:10.670 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9w6
2025-11-21 19:21:10.670 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:21:10.670 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:10.670995300Z","nanoTime":26056684931000,"traceId":"19522106","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1394400,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["문화시설이(가) 43m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm9w6","dataSize":19969,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19969,"errorMessage":null,"success":true}}
2025-11-21 19:21:10.670 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:21:17.224 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:21:17.224 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5559, longitude=126.9368, radius=500)
2025-11-21 19:21:17.224 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:21:17.224 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5559, longitude=126.9368, radius=500
2025-11-21 19:21:17.224 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:17.224024500Z","nanoTime":26063238447500,"traceId":"d5730568","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:21:17.224 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:21:17.224 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5559, lon=126.9368
2025-11-21 19:21:17.224 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:17.224024500Z","nanoTime":26063238613300,"traceId":"d5730568","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:21:17.225 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:17.224024500Z","nanoTime":26063238739200,"traceId":"d5730568","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":125900,"duration_ms":0,"resultData":{"latitude":37.5559,"longitude":126.9368,"precision":7,"centerHash":"wydm8sb","adjacentHashes":["wydm8sb","wydm8t0","wydm8t1","wydm8sc","wydm8s9","wydm8s8","wydm8kx","wydm8kz","wydm8mp"],"errorMessage":null,"success":true}}
2025-11-21 19:21:17.225 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm8sb, wydm8t0, wydm8t1, wydm8sc, wydm8s9, wydm8s8, wydm8kx, wydm8kz, wydm8mp]
2025-11-21 19:21:17.225 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm8sb
2025-11-21 19:21:17.225 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:17.225022400Z","nanoTime":26063238965700,"traceId":"d5730568","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":518200,"duration_ms":0,"resultData":{"requestLatitude":37.5559,"requestLongitude":126.9368,"requestRadius":500,"centerGeohashId":"wydm8sb","nineBlockGeohashes":["wydm8sb","wydm8t0","wydm8t1","wydm8sc","wydm8s9","wydm8s8","wydm8kx","wydm8kz","wydm8mp"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:21:17.225 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:17.225022400Z","nanoTime":26063239110900,"traceId":"d5730568","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:21:17.225 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:21:17.225 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm8sb
2025-11-21 19:21:17.225 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.547ms)
2025-11-21 19:21:17.226 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:21:17.228 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:21:17.228 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:21:17.228 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.9878ms, 역직렬화: 0.0ms
2025-11-21 19:21:17.228 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:21:17.228 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:17.228024300Z","nanoTime":26063241984600,"traceId":"d5730568","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2873700,"duration_ms":2,"resultData":{"centerGeohashId":"wydm8sb","nineBlockGeohashes":["wydm8sb","wydm8t0","wydm8t1","wydm8sc","wydm8s9","wydm8s8","wydm8kx","wydm8kz","wydm8mp"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm8sb","hit":false,"valueSize":0,"l1CacheGetDurationNs":547000,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm8sb","cacheKey":"data:wydm8sb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":245900},{"geohashId":"wydm8t0","cacheKey":"data:wydm8t0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":259700},{"geohashId":"wydm8t1","cacheKey":"data:wydm8t1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":162700},{"geohashId":"wydm8sc","cacheKey":"data:wydm8sc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":159500},{"geohashId":"wydm8s9","cacheKey":"data:wydm8s9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":132100},{"geohashId":"wydm8s8","cacheKey":"data:wydm8s8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":271500},{"geohashId":"wydm8kx","cacheKey":"data:wydm8kx:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":243700},{"geohashId":"wydm8kz","cacheKey":"data:wydm8kz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":209900},{"geohashId":"wydm8mp","cacheKey":"data:wydm8mp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":225100}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1987800,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:21:17.228 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:17.228024300Z","nanoTime":26063242320800,"traceId":"d5730568","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:21:17.228 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:21:17.228 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:21:17.233 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 20건
2025-11-21 19:21:17.236 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:21:17.236 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:21:17.237 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:17.236023400Z","nanoTime":26063250640100,"traceId":"d5730568","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":8319300,"duration_ms":8,"resultData":{"inputCctvMissGrids":["wydm8sb","wydm8t0","wydm8t1","wydm8sc","wydm8s9","wydm8s8","wydm8kx","wydm8kz","wydm8mp"],"cctvQueryResult":{"queryGeohashIds":["wydm8sb","wydm8t0","wydm8t1","wydm8sc","wydm8s9","wydm8s8","wydm8kx","wydm8kz","wydm8mp"],"totalRowsReturned":20,"rowsPerGrid":{"wydm8s9":2,"wydm8s8":2,"wydm8mp":4,"wydm8kx":2,"wydm8t1":4,"wydm8t0":2,"wydm8sc":2,"wydm8kz":1,"wydm8sb":1},"queryExecutionTimeNs":4965500,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm8s9","cacheKey":"data:wydm8s9:cctv","dataCount":2,"dataSize":257,"errorMessage":null,"success":true},{"geohashId":"wydm8s8","cacheKey":"data:wydm8s8:cctv","dataCount":2,"dataSize":255,"errorMessage":null,"success":true},{"geohashId":"wydm8mp","cacheKey":"data:wydm8mp:cctv","dataCount":4,"dataSize":408,"errorMessage":null,"success":true},{"geohashId":"wydm8kx","cacheKey":"data:wydm8kx:cctv","dataCount":2,"dataSize":257,"errorMessage":null,"success":true},{"geohashId":"wydm8t1","cacheKey":"data:wydm8t1:cctv","dataCount":4,"dataSize":409,"errorMessage":null,"success":true},{"geohashId":"wydm8t0","cacheKey":"data:wydm8t0:cctv","dataCount":2,"dataSize":205,"errorMessage":null,"success":true},{"geohashId":"wydm8sc","cacheKey":"data:wydm8sc:cctv","dataCount":2,"dataSize":205,"errorMessage":null,"success":true},{"geohashId":"wydm8kz","cacheKey":"data:wydm8kz:cctv","dataCount":1,"dataSize":103,"errorMessage":null,"success":true},{"geohashId":"wydm8sb","cacheKey":"data:wydm8sb:cctv","dataCount":1,"dataSize":103,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:21:17.237 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:17.237035500Z","nanoTime":26063251107900,"traceId":"d5730568","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:21:17.237 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:21:17.237 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5559, 126.9368)
2025-11-21 19:21:17.237 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:21:17.338 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:21:17.346 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:21:17.346 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:21:18.451 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:21:18.451 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:21:18.451 [http-nio-8185-exec-9] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:21:18.451 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:21:18.451 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:21:18.451 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:21:18.451 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:21:18.451 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:18.451499100Z","nanoTime":26064465816200,"traceId":"d5730568","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":1214708300,"duration_ms":1214,"resultData":{"latitude":37.5559,"longitude":126.9368,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":1214560000,"addressApiResult":{"cached":false,"cacheKey":"address:37.5559:126.9368","roadAddress":"주소 없음","jibunAddress":"서울 서대문구 창천동 30-16","responseSize":60,"executionTimeNs":109256700,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":37400,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5559:126.9368:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":4,"CS2":15,"SC4":3,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":4,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":151,"responseSize":17447,"executionTimeNs":1105265900,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:21:18.451 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:18.451499100Z","nanoTime":26064466089600,"traceId":"d5730568","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:21:18.451 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:21:18.451 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:21:18.451 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 20개
2025-11-21 19:21:18.451 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 20개 (총 카메라 대수: 63대)
2025-11-21 19:21:18.452 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:21:18.517 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 서대문구  독립문로 25-1 (거리: 622m)
2025-11-21 19:21:18.517 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:21:18.517 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:21:18.518 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:21:18.518 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:21:18.518 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:18.518074100Z","nanoTime":26064531985900,"traceId":"d5730568","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":65896300,"duration_ms":65,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":20,"totalCctvAfterFilter":20,"totalCameraCount":63,"filterRate":1.0,"filterExecutionTimeNs":15000,"success":true},"policeQuery":{"queryDurationNs":65383900,"found":true,"nearestAddress":"서울특별시 서대문구  독립문로 25-1","nearestDistance":621.8601203772246,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":4,"CS2":15,"SC4":3,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":4,"FD6":15,"PK6":15,"PM9":15},"placesAfterFilter":{"CT1":15,"AT4":4,"CS2":15,"SC4":3,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":4,"FD6":15,"PK6":15,"PM9":15},"totalBeforeFilter":151,"totalAfterFilter":151,"filterRate":1.0,"filterExecutionTimeNs":124700,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:21:18.518 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:18.518074100Z","nanoTime":26064532335200,"traceId":"d5730568","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:21:18.518 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:21:18.518 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 33.35, 편의성: 43.13, 종합: 38.24
2025-11-21 19:21:18.518 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:18.518074100Z","nanoTime":26064532663500,"traceId":"d5730568","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":328300,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":22.267484952846928,"policeDistance":621.8601203772246,"cctvScore":66.66666666666666,"cctvCount":20,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":33.346912152520744,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":12.0,"CS2":3.75,"SC4":6.0,"MT1":30.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":12.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":43.125,"success":true},"overallScore":38.23595607626037,"errorMessage":null,"success":true}}
2025-11-21 19:21:18.519 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:18.519068Z","nanoTime":26064532837300,"traceId":"d5730568","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:21:18.519 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:21:18.519 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 서대문구  독립문로 25-1, latitude=37.558552, longitude=126.943011, geohashId=wydm8tm)
2025-11-21 19:21:18.519 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 621.8601203772246
2025-11-21 19:21:18.520 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm8sb
2025-11-21 19:21:18.520 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:21:18.520 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:18.520067900Z","nanoTime":26064534079500,"traceId":"d5730568","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1242200,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["관광명소이(가) 23m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm8sb","dataSize":20041,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20041,"errorMessage":null,"success":true}}
2025-11-21 19:21:18.520 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:21:23.754 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:21:23.754 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.572, longitude=126.9769, radius=500)
2025-11-21 19:21:23.754 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:21:23.754 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.572, longitude=126.9769, radius=500
2025-11-21 19:21:23.754 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:23.754005300Z","nanoTime":26069768090100,"traceId":"eb0bc93d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:21:23.754 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:21:23.754 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.572, lon=126.9769
2025-11-21 19:21:23.754 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:23.754005300Z","nanoTime":26069768273500,"traceId":"eb0bc93d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:21:23.754 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:23.754005300Z","nanoTime":26069768441800,"traceId":"eb0bc93d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":168300,"duration_ms":0,"resultData":{"latitude":37.572,"longitude":126.9769,"precision":7,"centerHash":"wydm9rv","adjacentHashes":["wydm9rv","wydmc2j","wydmc2n","wydm9ry","wydm9rw","wydm9rt","wydm9rs","wydm9ru","wydmc2h"],"errorMessage":null,"success":true}}
2025-11-21 19:21:23.754 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9rv, wydmc2j, wydmc2n, wydm9ry, wydm9rw, wydm9rt, wydm9rs, wydm9ru, wydmc2h]
2025-11-21 19:21:23.754 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9rv
2025-11-21 19:21:23.755 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:23.754005300Z","nanoTime":26069768690800,"traceId":"eb0bc93d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":600700,"duration_ms":0,"resultData":{"requestLatitude":37.572,"requestLongitude":126.9769,"requestRadius":500,"centerGeohashId":"wydm9rv","nineBlockGeohashes":["wydm9rv","wydmc2j","wydmc2n","wydm9ry","wydm9rw","wydm9rt","wydm9rs","wydm9ru","wydmc2h"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:21:23.755 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:23.755005800Z","nanoTime":26069768871100,"traceId":"eb0bc93d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:21:23.755 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:21:23.755 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9rv
2025-11-21 19:21:23.755 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.6639ms)
2025-11-21 19:21:23.756 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:21:23.759 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:21:23.759 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:21:23.759 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 3.0299ms, 역직렬화: 0.0ms
2025-11-21 19:21:23.759 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:21:23.759 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:23.759008600Z","nanoTime":26069772993300,"traceId":"eb0bc93d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":4122200,"duration_ms":4,"resultData":{"centerGeohashId":"wydm9rv","nineBlockGeohashes":["wydm9rv","wydmc2j","wydmc2n","wydm9ry","wydm9rw","wydm9rt","wydm9rs","wydm9ru","wydmc2h"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9rv","hit":false,"valueSize":0,"l1CacheGetDurationNs":663900,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9rv","cacheKey":"data:wydm9rv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":437100},{"geohashId":"wydmc2j","cacheKey":"data:wydmc2j:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":360000},{"geohashId":"wydmc2n","cacheKey":"data:wydmc2n:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":233000},{"geohashId":"wydm9ry","cacheKey":"data:wydm9ry:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":347300},{"geohashId":"wydm9rw","cacheKey":"data:wydm9rw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":241600},{"geohashId":"wydm9rt","cacheKey":"data:wydm9rt:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":300300},{"geohashId":"wydm9rs","cacheKey":"data:wydm9rs:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":583200},{"geohashId":"wydm9ru","cacheKey":"data:wydm9ru:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":187000},{"geohashId":"wydmc2h","cacheKey":"data:wydmc2h:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":171300}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":3029900,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:21:23.759 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:23.759008600Z","nanoTime":26069773233800,"traceId":"eb0bc93d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:21:23.759 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:21:23.759 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:21:23.763 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 4건
2025-11-21 19:21:23.764 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:21:23.764 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 3개
2025-11-21 19:21:23.765 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:23.764007600Z","nanoTime":26069778743600,"traceId":"eb0bc93d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5509800,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydm9rv","wydmc2j","wydmc2n","wydm9ry","wydm9rw","wydm9rt","wydm9rs","wydm9ru","wydmc2h"],"cctvQueryResult":{"queryGeohashIds":["wydm9rv","wydmc2j","wydmc2n","wydm9ry","wydm9rw","wydm9rt","wydm9rs","wydm9ru","wydmc2h"],"totalRowsReturned":4,"rowsPerGrid":{"wydm9rw":1,"wydm9rt":2,"wydm9rs":1},"queryExecutionTimeNs":3834500,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9rw","cacheKey":"data:wydm9rw:cctv","dataCount":1,"dataSize":135,"errorMessage":null,"success":true},{"geohashId":"wydm9rt","cacheKey":"data:wydm9rt:cctv","dataCount":2,"dataSize":241,"errorMessage":null,"success":true},{"geohashId":"wydm9rs","cacheKey":"data:wydm9rs:cctv","dataCount":1,"dataSize":124,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:21:23.765 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:23.765006Z","nanoTime":26069778958200,"traceId":"eb0bc93d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:21:23.765 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:21:23.765 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.572, 126.9769)
2025-11-21 19:21:23.765 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:21:23.846 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:21:23.846 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:21:23.846 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:21:24.936 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:21:24.936 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:21:24.936 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 종로구
2025-11-21 19:21:24.936 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 미스 - DB 조회
2025-11-21 19:21:24.941 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 성공 및 캐싱 완료 - 종로구: 0.939777079
2025-11-21 19:21:24.941 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:21:24.941 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:21:24.941 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:21:24.941 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.939777079
2025-11-21 19:21:24.941 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:24.941122200Z","nanoTime":26070955235700,"traceId":"eb0bc93d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":1176277500,"duration_ms":1176,"resultData":{"latitude":37.572,"longitude":126.9769,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":1176136400,"addressApiResult":{"cached":false,"cacheKey":"address:37.572:126.9769","roadAddress":"서울특별시 종로구 세종대로 지하 175","jibunAddress":"서울 종로구 세종로 81-3","responseSize":74,"executionTimeNs":81962000,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":"arrest_rate:종로구","guName":"종로구","arrestRate":0.939777079,"dataFound":true,"executionTimeNs":4753200,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.572:126.9769:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":1,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":15,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":154,"responseSize":17820,"executionTimeNs":1089421200,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:21:24.941 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:24.941122200Z","nanoTime":26070955454100,"traceId":"eb0bc93d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:21:24.941 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:21:24.941 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:21:24.941 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 4개
2025-11-21 19:21:24.941 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 4개 (총 카메라 대수: 9대)
2025-11-21 19:21:24.941 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:21:25.010 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 종로구  사직로9길 1 (거리: 198m)
2025-11-21 19:21:25.010 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:21:25.010 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:21:25.010 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:21:25.010 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:21:25.011 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:25.010224400Z","nanoTime":26071024915600,"traceId":"eb0bc93d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":69461500,"duration_ms":69,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":4,"totalCctvAfterFilter":4,"totalCameraCount":9,"filterRate":1.0,"filterExecutionTimeNs":6800,"success":true},"policeQuery":{"queryDurationNs":68984900,"found":true,"nearestAddress":"서울특별시 종로구  사직로9길 1","nearestDistance":197.94829056886178,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":1,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":15,"FD6":15,"PK6":15,"PM9":15},"placesAfterFilter":{"CT1":15,"AT4":1,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":15,"FD6":15,"PK6":15,"PM9":15},"totalBeforeFilter":154,"totalAfterFilter":154,"filterRate":1.0,"filterExecutionTimeNs":120900,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:21:25.011 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:25.011219900Z","nanoTime":26071025145800,"traceId":"eb0bc93d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:21:25.011 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:21:25.011 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 56.10, 편의성: 43.57, 종합: 49.84
2025-11-21 19:21:25.011 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:25.011219900Z","nanoTime":26071025435400,"traceId":"eb0bc93d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":289600,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":75.25646367889227,"policeDistance":197.94829056886178,"cctvScore":13.333333333333334,"cctvCount":4,"arrestRateScore":93.9777079,"arrestRate":0.939777079,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":56.10358480700101,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":3.0,"CS2":10.026201807389977,"SC4":2.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":45.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"종로구","guPopulation":149608,"finalScore":43.57330012909928,"success":true},"overallScore":49.83844246805015,"errorMessage":null,"success":true}}
2025-11-21 19:21:25.011 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:25.011219900Z","nanoTime":26071025690700,"traceId":"eb0bc93d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:21:25.011 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:21:25.011 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 종로구  사직로9길 1, latitude=37.572588, longitude=126.97902, geohashId=wydm9rz)
2025-11-21 19:21:25.011 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 197.94829056886178
2025-11-21 19:21:25.013 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9rv
2025-11-21 19:21:25.013 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:21:25.013 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:25.013248400Z","nanoTime":26071027096000,"traceId":"eb0bc93d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1405300,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["지하철역이(가) 57m 내에 있습니다."],"warnings":["CCTV 설치 대수가 적은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm9rv","dataSize":19238,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19238,"errorMessage":null,"success":true}}
2025-11-21 19:21:25.013 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:21:28.410 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:21:28.410 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5403, longitude=127.0695, radius=500)
2025-11-21 19:21:28.410 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:21:28.410 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5403, longitude=127.0695, radius=500
2025-11-21 19:21:28.410 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:28.410039100Z","nanoTime":26074424299500,"traceId":"dbb24181","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:21:28.410 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:21:28.410 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5403, lon=127.0695
2025-11-21 19:21:28.410 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:28.410039100Z","nanoTime":26074424575000,"traceId":"dbb24181","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:21:28.411 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:28.410039100Z","nanoTime":26074424707000,"traceId":"dbb24181","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":132000,"duration_ms":0,"resultData":{"latitude":37.5403,"longitude":127.0695,"precision":7,"centerHash":"wydmed1","adjacentHashes":["wydmed1","wydmed3","wydmed6","wydmed4","wydme9f","wydme9c","wydme9b","wydmed0","wydmed2"],"errorMessage":null,"success":true}}
2025-11-21 19:21:28.411 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmed1, wydmed3, wydmed6, wydmed4, wydme9f, wydme9c, wydme9b, wydmed0, wydmed2]
2025-11-21 19:21:28.411 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmed1
2025-11-21 19:21:28.411 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:28.411035200Z","nanoTime":26074424951100,"traceId":"dbb24181","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":651600,"duration_ms":0,"resultData":{"requestLatitude":37.5403,"requestLongitude":127.0695,"requestRadius":500,"centerGeohashId":"wydmed1","nineBlockGeohashes":["wydmed1","wydmed3","wydmed6","wydmed4","wydme9f","wydme9c","wydme9b","wydmed0","wydmed2"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:21:28.411 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:28.411035200Z","nanoTime":26074425041700,"traceId":"dbb24181","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:21:28.411 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:21:28.411 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmed1
2025-11-21 19:21:28.411 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4214ms)
2025-11-21 19:21:28.411 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:21:28.413 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:21:28.413 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:21:28.413 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.5174ms, 역직렬화: 0.0ms
2025-11-21 19:21:28.413 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:21:28.413 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:28.413049100Z","nanoTime":26074427218800,"traceId":"dbb24181","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2177100,"duration_ms":2,"resultData":{"centerGeohashId":"wydmed1","nineBlockGeohashes":["wydmed1","wydmed3","wydmed6","wydmed4","wydme9f","wydme9c","wydme9b","wydmed0","wydmed2"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmed1","hit":false,"valueSize":0,"l1CacheGetDurationNs":421400,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmed1","cacheKey":"data:wydmed1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":222100},{"geohashId":"wydmed3","cacheKey":"data:wydmed3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":125900},{"geohashId":"wydmed6","cacheKey":"data:wydmed6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":111900},{"geohashId":"wydmed4","cacheKey":"data:wydmed4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":153000},{"geohashId":"wydme9f","cacheKey":"data:wydme9f:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":290000},{"geohashId":"wydme9c","cacheKey":"data:wydme9c:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":175200},{"geohashId":"wydme9b","cacheKey":"data:wydme9b:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":114500},{"geohashId":"wydmed0","cacheKey":"data:wydmed0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":109200},{"geohashId":"wydmed2","cacheKey":"data:wydmed2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":155600}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1517400,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:21:28.413 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:28.413049100Z","nanoTime":26074427445500,"traceId":"dbb24181","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:21:28.413 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:21:28.413 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:21:28.418 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 26건
2025-11-21 19:21:28.421 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:21:28.421 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:21:28.421 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:28.421032400Z","nanoTime":26074435512100,"traceId":"dbb24181","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":8066600,"duration_ms":8,"resultData":{"inputCctvMissGrids":["wydmed1","wydmed3","wydmed6","wydmed4","wydme9f","wydme9c","wydme9b","wydmed0","wydmed2"],"cctvQueryResult":{"queryGeohashIds":["wydmed1","wydmed3","wydmed6","wydmed4","wydme9f","wydme9c","wydme9b","wydmed0","wydmed2"],"totalRowsReturned":26,"rowsPerGrid":{"wydme9c":5,"wydmed0":2,"wydme9f":1,"wydmed1":4,"wydme9b":4,"wydmed6":2,"wydmed2":1,"wydmed3":2,"wydmed4":5},"queryExecutionTimeNs":4768600,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydme9c","cacheKey":"data:wydme9c:cctv","dataCount":5,"dataSize":551,"errorMessage":null,"success":true},{"geohashId":"wydmed0","cacheKey":"data:wydmed0:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydme9f","cacheKey":"data:wydme9f:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmed1","cacheKey":"data:wydmed1:cctv","dataCount":4,"dataSize":399,"errorMessage":null,"success":true},{"geohashId":"wydme9b","cacheKey":"data:wydme9b:cctv","dataCount":4,"dataSize":401,"errorMessage":null,"success":true},{"geohashId":"wydmed6","cacheKey":"data:wydmed6:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydmed2","cacheKey":"data:wydmed2:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmed3","cacheKey":"data:wydmed3:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydmed4","cacheKey":"data:wydmed4:cctv","dataCount":5,"dataSize":501,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:21:28.422 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:28.422035400Z","nanoTime":26074435882300,"traceId":"dbb24181","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:21:28.422 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:21:28.422 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5403, 127.0695)
2025-11-21 19:21:28.422 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:21:28.494 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:21:28.494 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:21:28.494 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:21:29.564 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:21:29.565 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:21:29.565 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 광진구
2025-11-21 19:21:29.565 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 미스 - DB 조회
2025-11-21 19:21:29.570 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 성공 및 캐싱 완료 - 광진구: 0.672940923
2025-11-21 19:21:29.570 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:21:29.570 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:21:29.570 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:21:29.570 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.672940923
2025-11-21 19:21:29.570 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:29.570718900Z","nanoTime":26075585037500,"traceId":"dbb24181","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":1149155200,"duration_ms":1149,"resultData":{"latitude":37.5403,"longitude":127.0695,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":1148927000,"addressApiResult":{"cached":false,"cacheKey":"address:37.5403:127.0695","roadAddress":"서울특별시 광진구 아차산로 243","jibunAddress":"서울 광진구 화양동 7-3","responseSize":70,"executionTimeNs":72886300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":"arrest_rate:광진구","guName":"광진구","arrestRate":0.672940923,"dataFound":true,"executionTimeNs":5397200,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5403:127.0695:500","categoryCount":15,"placesByCategory":{"CT1":10,"AT4":4,"CS2":15,"SC4":0,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":0,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":138,"responseSize":16047,"executionTimeNs":1070643500,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:21:29.570 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:29.570718900Z","nanoTime":26075585381100,"traceId":"dbb24181","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:21:29.570 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:21:29.570 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:21:29.570 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 26개
2025-11-21 19:21:29.571 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 26개 (총 카메라 대수: 26대)
2025-11-21 19:21:29.571 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:21:29.634 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구 사당로17나길 4 (거리: 712m)
2025-11-21 19:21:29.634 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:21:29.634 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:21:29.634 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 12개 카테고리
2025-11-21 19:21:29.634 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:21:29.635 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:29.634725300Z","nanoTime":26075649446600,"traceId":"dbb24181","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":64065500,"duration_ms":64,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":26,"totalCctvAfterFilter":26,"totalCameraCount":26,"filterRate":1.0,"filterExecutionTimeNs":15700,"success":true},"policeQuery":{"queryDurationNs":63582200,"found":true,"nearestAddress":"서울특별시 동작구 사당로17나길 4","nearestDistance":712.1978057885286,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":10,"AT4":4,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SW8":2,"FD6":15,"PK6":15,"MT1":2,"PM9":15},"placesAfterFilter":{"CT1":10,"AT4":4,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SW8":2,"FD6":15,"PK6":15,"MT1":2,"PM9":15},"totalBeforeFilter":138,"totalAfterFilter":138,"filterRate":1.0,"filterExecutionTimeNs":110900,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:21:29.635 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:29.635727900Z","nanoTime":26075649662500,"traceId":"dbb24181","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:21:29.635 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:21:29.635 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 58.15, 편의성: 46.36, 종합: 52.25
2025-11-21 19:21:29.635 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:29.635727900Z","nanoTime":26075650001700,"traceId":"dbb24181","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":339200,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":10.975274276433922,"policeDistance":712.1978057885286,"cctvScore":86.66666666666667,"cctvCount":26,"arrestRateScore":67.2940923,"arrestRate":0.672940923,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":58.147476639596846,"success":true},"convenienceScore":{"categoryScores":{"CT1":40.0,"AT4":12.0,"BK9":75.0,"HP8":100.0,"CS2":4.339624824968466,"AC5":15.0,"CE7":30.0,"SW8":100.0,"FD6":15.0,"PK6":45.0,"MT1":20.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"광진구","guPopulation":345652,"finalScore":46.36163540208071,"success":true},"overallScore":52.25455602083878,"errorMessage":null,"success":true}}
2025-11-21 19:21:29.635 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:29.635727900Z","nanoTime":26075650161700,"traceId":"dbb24181","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:21:29.635 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:21:29.635 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구 사당로17나길 4, latitude=37.546541, longitude=127.071316, geohashId=wydmee4)
2025-11-21 19:21:29.635 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 712.1978057885286
2025-11-21 19:21:29.637 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmed1
2025-11-21 19:21:29.637 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:21:29.637 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:29.637718800Z","nanoTime":26075651846500,"traceId":"dbb24181","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1684800,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["학원이(가) 28m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmed1","dataSize":18753,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":18753,"errorMessage":null,"success":true}}
2025-11-21 19:21:29.637 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:21:34.024 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:21:34.024 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5344, longitude=126.9944, radius=500)
2025-11-21 19:21:34.024 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:21:34.024 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5344, longitude=126.9944, radius=500
2025-11-21 19:21:34.024 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:34.024324700Z","nanoTime":26080038819100,"traceId":"e17c84a0","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:21:34.024 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:21:34.024 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5344, lon=126.9944
2025-11-21 19:21:34.024 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:34.024324700Z","nanoTime":26080038952200,"traceId":"e17c84a0","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:21:34.025 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:34.024324700Z","nanoTime":26080039046200,"traceId":"e17c84a0","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":94000,"duration_ms":0,"resultData":{"latitude":37.5344,"longitude":126.9944,"precision":7,"centerHash":"wydm9bf","adjacentHashes":["wydm9bf","wydm9c4","wydm9c5","wydm9bg","wydm9be","wydm9bd","wydm9b9","wydm9bc","wydm9c1"],"errorMessage":null,"success":true}}
2025-11-21 19:21:34.025 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9bf, wydm9c4, wydm9c5, wydm9bg, wydm9be, wydm9bd, wydm9b9, wydm9bc, wydm9c1]
2025-11-21 19:21:34.025 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9bf
2025-11-21 19:21:34.025 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:34.025338300Z","nanoTime":26080039192500,"traceId":"e17c84a0","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":373400,"duration_ms":0,"resultData":{"requestLatitude":37.5344,"requestLongitude":126.9944,"requestRadius":500,"centerGeohashId":"wydm9bf","nineBlockGeohashes":["wydm9bf","wydm9c4","wydm9c5","wydm9bg","wydm9be","wydm9bd","wydm9b9","wydm9bc","wydm9c1"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:21:34.025 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:34.025338300Z","nanoTime":26080039282600,"traceId":"e17c84a0","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:21:34.025 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:21:34.025 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9bf
2025-11-21 19:21:34.025 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4622ms)
2025-11-21 19:21:34.025 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:21:34.027 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:21:34.027 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:21:34.027 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.5337ms, 역직렬화: 0.0ms
2025-11-21 19:21:34.027 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:21:34.027 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:34.027321200Z","nanoTime":26080041535900,"traceId":"e17c84a0","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2253300,"duration_ms":2,"resultData":{"centerGeohashId":"wydm9bf","nineBlockGeohashes":["wydm9bf","wydm9c4","wydm9c5","wydm9bg","wydm9be","wydm9bd","wydm9b9","wydm9bc","wydm9c1"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9bf","hit":false,"valueSize":0,"l1CacheGetDurationNs":462200,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9bf","cacheKey":"data:wydm9bf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":280700},{"geohashId":"wydm9c4","cacheKey":"data:wydm9c4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":147200},{"geohashId":"wydm9c5","cacheKey":"data:wydm9c5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":138900},{"geohashId":"wydm9bg","cacheKey":"data:wydm9bg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":111900},{"geohashId":"wydm9be","cacheKey":"data:wydm9be:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":110000},{"geohashId":"wydm9bd","cacheKey":"data:wydm9bd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":144200},{"geohashId":"wydm9b9","cacheKey":"data:wydm9b9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":246400},{"geohashId":"wydm9bc","cacheKey":"data:wydm9bc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":161500},{"geohashId":"wydm9c1","cacheKey":"data:wydm9c1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":128600}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1533700,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:21:34.027 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:34.027321200Z","nanoTime":26080041735300,"traceId":"e17c84a0","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:21:34.027 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:21:34.027 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:21:34.032 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 19건
2025-11-21 19:21:34.035 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:21:34.035 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:21:34.035 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:34.035320300Z","nanoTime":26080049201500,"traceId":"e17c84a0","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":7466200,"duration_ms":7,"resultData":{"inputCctvMissGrids":["wydm9bf","wydm9c4","wydm9c5","wydm9bg","wydm9be","wydm9bd","wydm9b9","wydm9bc","wydm9c1"],"cctvQueryResult":{"queryGeohashIds":["wydm9bf","wydm9c4","wydm9c5","wydm9bg","wydm9be","wydm9bd","wydm9b9","wydm9bc","wydm9c1"],"totalRowsReturned":19,"rowsPerGrid":{"wydm9bg":3,"wydm9bf":2,"wydm9be":3,"wydm9bd":2,"wydm9c5":1,"wydm9b9":3,"wydm9bc":2,"wydm9c4":1,"wydm9c1":2},"queryExecutionTimeNs":4468800,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9bg","cacheKey":"data:wydm9bg:cctv","dataCount":3,"dataSize":431,"errorMessage":null,"success":true},{"geohashId":"wydm9bf","cacheKey":"data:wydm9bf:cctv","dataCount":2,"dataSize":289,"errorMessage":null,"success":true},{"geohashId":"wydm9be","cacheKey":"data:wydm9be:cctv","dataCount":3,"dataSize":442,"errorMessage":null,"success":true},{"geohashId":"wydm9bd","cacheKey":"data:wydm9bd:cctv","dataCount":2,"dataSize":290,"errorMessage":null,"success":true},{"geohashId":"wydm9c5","cacheKey":"data:wydm9c5:cctv","dataCount":1,"dataSize":147,"errorMessage":null,"success":true},{"geohashId":"wydm9b9","cacheKey":"data:wydm9b9:cctv","dataCount":3,"dataSize":431,"errorMessage":null,"success":true},{"geohashId":"wydm9bc","cacheKey":"data:wydm9bc:cctv","dataCount":2,"dataSize":296,"errorMessage":null,"success":true},{"geohashId":"wydm9c4","cacheKey":"data:wydm9c4:cctv","dataCount":1,"dataSize":145,"errorMessage":null,"success":true},{"geohashId":"wydm9c1","cacheKey":"data:wydm9c1:cctv","dataCount":2,"dataSize":292,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:21:34.035 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:34.035320300Z","nanoTime":26080049394800,"traceId":"e17c84a0","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:21:34.035 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:21:34.035 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5344, 126.9944)
2025-11-21 19:21:34.035 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:21:34.101 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:21:34.101 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:21:34.101 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:21:35.172 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:21:35.172 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:21:35.172 [http-nio-8185-exec-1] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:21:35.172 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:21:35.172 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:21:35.172 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:21:35.172 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:21:35.172 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:35.172959400Z","nanoTime":26081187343500,"traceId":"e17c84a0","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":1137948700,"duration_ms":1137,"resultData":{"latitude":37.5344,"longitude":126.9944,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":1137828500,"addressApiResult":{"cached":false,"cacheKey":"address:37.5344:126.9944","roadAddress":"주소 없음","jibunAddress":"서울 용산구 이태원동 127-10","responseSize":61,"executionTimeNs":66207300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":35200,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5344:126.9944:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":7,"CS2":15,"SC4":1,"MT1":0,"BK9":15,"HP8":15,"AC5":14,"CE7":15,"SW8":1,"PO3":15,"FD6":15,"PK6":15,"OL7":0,"PM9":5},"totalPlaces":148,"responseSize":17040,"executionTimeNs":1071586000,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:21:35.172 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:35.172959400Z","nanoTime":26081187581900,"traceId":"e17c84a0","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:21:35.172 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:21:35.172 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:21:35.172 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 19개
2025-11-21 19:21:35.173 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 19개 (총 카메라 대수: 66대)
2025-11-21 19:21:35.173 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:21:35.238 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: "서울특별시 용산구  후암로16나길 17, 용중지구대" (거리: 10m)
2025-11-21 19:21:35.238 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:21:35.238 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:21:35.239 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 19:21:35.239 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:21:35.239 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:35.239939800Z","nanoTime":26081253915000,"traceId":"e17c84a0","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":66333100,"duration_ms":66,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":19,"totalCctvAfterFilter":19,"totalCameraCount":66,"filterRate":1.0,"filterExecutionTimeNs":13800,"success":true},"policeQuery":{"queryDurationNs":65669200,"found":true,"nearestAddress":"\"서울특별시 용산구  후암로16나길 17, 용중지구대\"","nearestDistance":9.921457375807954,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":7,"CS2":15,"SC4":1,"BK9":15,"HP8":15,"AC5":14,"CE7":15,"SW8":1,"PO3":15,"FD6":15,"PK6":15,"PM9":5},"placesAfterFilter":{"CT1":15,"AT4":7,"CS2":15,"SC4":1,"BK9":15,"HP8":15,"AC5":14,"CE7":15,"SW8":1,"PO3":15,"FD6":15,"PK6":15,"PM9":5},"totalBeforeFilter":148,"totalAfterFilter":148,"filterRate":1.0,"filterExecutionTimeNs":211500,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:21:35.239 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:35.239939800Z","nanoTime":26081254231100,"traceId":"e17c84a0","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:21:35.239 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:21:35.239 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 54.96, 편의성: 42.37, 종합: 48.66
2025-11-21 19:21:35.240 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:35.239939800Z","nanoTime":26081254573800,"traceId":"e17c84a0","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":342700,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":98.75981782802401,"policeDistance":9.921457375807954,"cctvScore":63.33333333333333,"cctvCount":19,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":54.96127868174054,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":21.0,"CS2":3.75,"SC4":2.0,"BK9":75.0,"HP8":100.0,"AC5":14.0,"CE7":30.0,"SW8":100.0,"PO3":45.0,"FD6":15.0,"PK6":45.0,"PM9":40.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":42.36538461538461,"success":true},"overallScore":48.663331648562576,"errorMessage":null,"success":true}}
2025-11-21 19:21:35.240 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:35.240941800Z","nanoTime":26081254781400,"traceId":"e17c84a0","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:21:35.240 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:21:35.240 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address="서울특별시 용산구  후암로16나길 17, 용중지구대", latitude=37.534311, longitude=126.994408, geohashId=wydm9bf)
2025-11-21 19:21:35.240 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 9.921457375807954
2025-11-21 19:21:35.241 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9bf
2025-11-21 19:21:35.241 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:21:35.241 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:35.241949800Z","nanoTime":26081256041900,"traceId":"e17c84a0","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1260500,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["약국이(가) 13m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm9bf","dataSize":20540,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20540,"errorMessage":null,"success":true}}
2025-11-21 19:21:35.241 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:21:39.546 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:21:39.546 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5446, longitude=127.0558, radius=500)
2025-11-21 19:21:39.546 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:21:39.546 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5446, longitude=127.0558, radius=500
2025-11-21 19:21:39.546 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:39.546550700Z","nanoTime":26085561034900,"traceId":"4e4be05b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:21:39.546 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:21:39.546 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5446, lon=127.0558
2025-11-21 19:21:39.546 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:39.546550700Z","nanoTime":26085561144600,"traceId":"4e4be05b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:21:39.547 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:39.546550700Z","nanoTime":26085561275700,"traceId":"4e4be05b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":131100,"duration_ms":0,"resultData":{"latitude":37.5446,"longitude":127.0558,"precision":7,"centerHash":"wydme4z","adjacentHashes":["wydme4z","wydme5p","wydme70","wydme6b","wydme68","wydme4x","wydme4w","wydme4y","wydme5n"],"errorMessage":null,"success":true}}
2025-11-21 19:21:39.547 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydme4z, wydme5p, wydme70, wydme6b, wydme68, wydme4x, wydme4w, wydme4y, wydme5n]
2025-11-21 19:21:39.547 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydme4z
2025-11-21 19:21:39.547 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:39.547543900Z","nanoTime":26085561514200,"traceId":"4e4be05b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":479300,"duration_ms":0,"resultData":{"requestLatitude":37.5446,"requestLongitude":127.0558,"requestRadius":500,"centerGeohashId":"wydme4z","nineBlockGeohashes":["wydme4z","wydme5p","wydme70","wydme6b","wydme68","wydme4x","wydme4w","wydme4y","wydme5n"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:21:39.547 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:39.547543900Z","nanoTime":26085561612600,"traceId":"4e4be05b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:21:39.547 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:21:39.547 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydme4z
2025-11-21 19:21:39.547 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4826ms)
2025-11-21 19:21:39.547 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:21:39.549 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:21:39.549 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:21:39.549 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.4124ms, 역직렬화: 0.0ms
2025-11-21 19:21:39.549 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:21:39.549 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:39.549543200Z","nanoTime":26085563739700,"traceId":"4e4be05b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2127100,"duration_ms":2,"resultData":{"centerGeohashId":"wydme4z","nineBlockGeohashes":["wydme4z","wydme5p","wydme70","wydme6b","wydme68","wydme4x","wydme4w","wydme4y","wydme5n"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydme4z","hit":false,"valueSize":0,"l1CacheGetDurationNs":482600,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydme4z","cacheKey":"data:wydme4z:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":201000},{"geohashId":"wydme5p","cacheKey":"data:wydme5p:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":209300},{"geohashId":"wydme70","cacheKey":"data:wydme70:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":188700},{"geohashId":"wydme6b","cacheKey":"data:wydme6b:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":125500},{"geohashId":"wydme68","cacheKey":"data:wydme68:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":174100},{"geohashId":"wydme4x","cacheKey":"data:wydme4x:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":117500},{"geohashId":"wydme4w","cacheKey":"data:wydme4w:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":116900},{"geohashId":"wydme4y","cacheKey":"data:wydme4y:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":107900},{"geohashId":"wydme5n","cacheKey":"data:wydme5n:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":108000}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1412400,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:21:39.549 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:39.549543200Z","nanoTime":26085563905500,"traceId":"4e4be05b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:21:39.549 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:21:39.549 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:21:39.554 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 21건
2025-11-21 19:21:39.557 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:21:39.557 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:21:39.557 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:39.557546800Z","nanoTime":26085571707500,"traceId":"4e4be05b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":7802000,"duration_ms":7,"resultData":{"inputCctvMissGrids":["wydme4z","wydme5p","wydme70","wydme6b","wydme68","wydme4x","wydme4w","wydme4y","wydme5n"],"cctvQueryResult":{"queryGeohashIds":["wydme4z","wydme5p","wydme70","wydme6b","wydme68","wydme4x","wydme4w","wydme4y","wydme5n"],"totalRowsReturned":21,"rowsPerGrid":{"wydme6b":1,"wydme4z":1,"wydme5n":3,"wydme70":2,"wydme68":3,"wydme4w":3,"wydme4x":3,"wydme4y":5},"queryExecutionTimeNs":5058300,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydme6b","cacheKey":"data:wydme6b:cctv","dataCount":1,"dataSize":136,"errorMessage":null,"success":true},{"geohashId":"wydme4z","cacheKey":"data:wydme4z:cctv","dataCount":1,"dataSize":136,"errorMessage":null,"success":true},{"geohashId":"wydme5n","cacheKey":"data:wydme5n:cctv","dataCount":3,"dataSize":403,"errorMessage":null,"success":true},{"geohashId":"wydme70","cacheKey":"data:wydme70:cctv","dataCount":2,"dataSize":265,"errorMessage":null,"success":true},{"geohashId":"wydme68","cacheKey":"data:wydme68:cctv","dataCount":3,"dataSize":336,"errorMessage":null,"success":true},{"geohashId":"wydme4w","cacheKey":"data:wydme4w:cctv","dataCount":3,"dataSize":404,"errorMessage":null,"success":true},{"geohashId":"wydme4x","cacheKey":"data:wydme4x:cctv","dataCount":3,"dataSize":400,"errorMessage":null,"success":true},{"geohashId":"wydme4y","cacheKey":"data:wydme4y:cctv","dataCount":5,"dataSize":642,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:21:39.557 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:39.557546800Z","nanoTime":26085571943400,"traceId":"4e4be05b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:21:39.557 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:21:39.557 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5446, 127.0558)
2025-11-21 19:21:39.557 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:21:39.617 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:21:39.617 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:21:39.617 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:21:40.716 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:21:40.716 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:21:40.716 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 19:21:40.717 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 미스 - DB 조회
2025-11-21 19:21:40.720 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 성공 및 캐싱 완료 - 성동구: 0.745164096
2025-11-21 19:21:40.720 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:21:40.720 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:21:40.720 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:21:40.720 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 19:21:40.720 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:40.720030100Z","nanoTime":26086734264500,"traceId":"4e4be05b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":1162321100,"duration_ms":1162,"resultData":{"latitude":37.5446,"longitude":127.0558,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":1162170500,"addressApiResult":{"cached":false,"cacheKey":"address:37.5446:127.0558","roadAddress":"서울특별시 성동구 아차산로 100","jibunAddress":"서울 성동구 성수동2가 300-1","responseSize":74,"executionTimeNs":59028000,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":3724500,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5446:127.0558:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":4,"CS2":15,"SC4":0,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":15,"OL7":1,"PM9":8},"totalPlaces":138,"responseSize":15916,"executionTimeNs":1099418000,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:21:40.720 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:40.720030100Z","nanoTime":26086734466900,"traceId":"4e4be05b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:21:40.720 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:21:40.720 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:21:40.720 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 21개
2025-11-21 19:21:40.720 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 21개 (총 카메라 대수: 67대)
2025-11-21 19:21:40.720 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:21:40.784 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구  당산로 221 (거리: 406m)
2025-11-21 19:21:40.784 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:21:40.784 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:21:40.785 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:21:40.785 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:21:40.785 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:40.785032700Z","nanoTime":26086799068700,"traceId":"4e4be05b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":64601800,"duration_ms":64,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":21,"totalCctvAfterFilter":21,"totalCameraCount":67,"filterRate":1.0,"filterExecutionTimeNs":13600,"success":true},"policeQuery":{"queryDurationNs":63924200,"found":true,"nearestAddress":"서울특별시 영등포구  당산로 221","nearestDistance":405.63099651108564,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":4,"CS2":15,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":15,"OL7":1,"PM9":8},"placesAfterFilter":{"CT1":15,"AT4":4,"CS2":15,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":15,"OL7":1,"PM9":8},"totalBeforeFilter":138,"totalAfterFilter":138,"filterRate":1.0,"filterExecutionTimeNs":328600,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:21:40.785 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:40.785032700Z","nanoTime":26086799298600,"traceId":"4e4be05b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:21:40.785 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:21:40.785 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 65.14, 편의성: 38.95, 종합: 52.05
2025-11-21 19:21:40.785 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:40.785032700Z","nanoTime":26086799591600,"traceId":"4e4be05b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":293000,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":49.296125436114295,"policeDistance":405.63099651108564,"cctvScore":70.0,"cctvCount":21,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":65.14376051083428,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":12.0,"CS2":5.333162672127825,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":64.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":38.952368762294846,"success":true},"overallScore":52.04806463656456,"errorMessage":null,"success":true}}
2025-11-21 19:21:40.786 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:40.786029600Z","nanoTime":26086799886700,"traceId":"4e4be05b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:21:40.786 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:21:40.786 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구  당산로 221, latitude=37.548221, longitude=127.055242, geohashId=wydme5q)
2025-11-21 19:21:40.786 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 405.63099651108564
2025-11-21 19:21:40.787 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydme4z
2025-11-21 19:21:40.787 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:21:40.787 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:40.787034800Z","nanoTime":26086801460400,"traceId":"4e4be05b","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1573700,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["지하철역이(가) 24m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydme4z","dataSize":19088,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19088,"errorMessage":null,"success":true}}
2025-11-21 19:21:40.787 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:21:43.949 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:21:43.949 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5709, longitude=126.992, radius=500)
2025-11-21 19:21:43.949 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:21:43.949 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5709, longitude=126.992, radius=500
2025-11-21 19:21:43.950 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:43.950035100Z","nanoTime":26089963782600,"traceId":"d88f87e7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:21:43.950 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:21:43.950 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5709, lon=126.992
2025-11-21 19:21:43.950 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:43.950035100Z","nanoTime":26089963926700,"traceId":"d88f87e7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:21:43.950 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:43.950035100Z","nanoTime":26089964028000,"traceId":"d88f87e7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":101300,"duration_ms":0,"resultData":{"latitude":37.5709,"longitude":126.992,"precision":7,"centerHash":"wydm9z8","adjacentHashes":["wydm9z8","wydm9zb","wydm9zc","wydm9z9","wydm9z3","wydm9z2","wydm9xr","wydm9xx","wydm9xz"],"errorMessage":null,"success":true}}
2025-11-21 19:21:43.950 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9z8, wydm9zb, wydm9zc, wydm9z9, wydm9z3, wydm9z2, wydm9xr, wydm9xx, wydm9xz]
2025-11-21 19:21:43.950 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9z8
2025-11-21 19:21:43.950 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:43.950035100Z","nanoTime":26089964170700,"traceId":"d88f87e7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":388100,"duration_ms":0,"resultData":{"requestLatitude":37.5709,"requestLongitude":126.992,"requestRadius":500,"centerGeohashId":"wydm9z8","nineBlockGeohashes":["wydm9z8","wydm9zb","wydm9zc","wydm9z9","wydm9z3","wydm9z2","wydm9xr","wydm9xx","wydm9xz"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:21:43.950 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:43.950035100Z","nanoTime":26089964267900,"traceId":"d88f87e7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:21:43.950 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:21:43.950 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9z8
2025-11-21 19:21:43.951 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.535ms)
2025-11-21 19:21:43.951 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:21:43.953 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:21:43.953 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:21:43.953 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.7692ms, 역직렬화: 0.0ms
2025-11-21 19:21:43.953 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:21:43.953 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:43.953035700Z","nanoTime":26089966889000,"traceId":"d88f87e7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2621100,"duration_ms":2,"resultData":{"centerGeohashId":"wydm9z8","nineBlockGeohashes":["wydm9z8","wydm9zb","wydm9zc","wydm9z9","wydm9z3","wydm9z2","wydm9xr","wydm9xx","wydm9xz"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9z8","hit":false,"valueSize":0,"l1CacheGetDurationNs":535000,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9z8","cacheKey":"data:wydm9z8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":297000},{"geohashId":"wydm9zb","cacheKey":"data:wydm9zb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":169600},{"geohashId":"wydm9zc","cacheKey":"data:wydm9zc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":129500},{"geohashId":"wydm9z9","cacheKey":"data:wydm9z9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":162400},{"geohashId":"wydm9z3","cacheKey":"data:wydm9z3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":169400},{"geohashId":"wydm9z2","cacheKey":"data:wydm9z2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":171600},{"geohashId":"wydm9xr","cacheKey":"data:wydm9xr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":184900},{"geohashId":"wydm9xx","cacheKey":"data:wydm9xx:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":246600},{"geohashId":"wydm9xz","cacheKey":"data:wydm9xz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":172100}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1769200,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:21:43.953 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:43.953035700Z","nanoTime":26089967073200,"traceId":"d88f87e7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:21:43.953 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:21:43.953 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:21:43.957 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 20건
2025-11-21 19:21:43.960 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:21:43.960 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:21:43.961 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:43.960032600Z","nanoTime":26089974654700,"traceId":"d88f87e7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":7581500,"duration_ms":7,"resultData":{"inputCctvMissGrids":["wydm9z8","wydm9zb","wydm9zc","wydm9z9","wydm9z3","wydm9z2","wydm9xr","wydm9xx","wydm9xz"],"cctvQueryResult":{"queryGeohashIds":["wydm9z8","wydm9zb","wydm9zc","wydm9z9","wydm9z3","wydm9z2","wydm9xr","wydm9xx","wydm9xz"],"totalRowsReturned":20,"rowsPerGrid":{"wydm9xz":5,"wydm9z3":2,"wydm9z2":2,"wydm9zb":4,"wydm9xr":2,"wydm9xx":1,"wydm9z9":2,"wydm9z8":2},"queryExecutionTimeNs":4500100,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9xz","cacheKey":"data:wydm9xz:cctv","dataCount":5,"dataSize":639,"errorMessage":null,"success":true},{"geohashId":"wydm9z3","cacheKey":"data:wydm9z3:cctv","dataCount":2,"dataSize":258,"errorMessage":null,"success":true},{"geohashId":"wydm9z2","cacheKey":"data:wydm9z2:cctv","dataCount":2,"dataSize":226,"errorMessage":null,"success":true},{"geohashId":"wydm9zb","cacheKey":"data:wydm9zb:cctv","dataCount":4,"dataSize":483,"errorMessage":null,"success":true},{"geohashId":"wydm9xr","cacheKey":"data:wydm9xr:cctv","dataCount":2,"dataSize":226,"errorMessage":null,"success":true},{"geohashId":"wydm9xx","cacheKey":"data:wydm9xx:cctv","dataCount":1,"dataSize":132,"errorMessage":null,"success":true},{"geohashId":"wydm9z9","cacheKey":"data:wydm9z9:cctv","dataCount":2,"dataSize":231,"errorMessage":null,"success":true},{"geohashId":"wydm9z8","cacheKey":"data:wydm9z8:cctv","dataCount":2,"dataSize":241,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:21:43.961 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:43.961045400Z","nanoTime":26089974888800,"traceId":"d88f87e7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:21:43.961 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:21:43.961 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5709, 126.992)
2025-11-21 19:21:43.961 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:21:44.039 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:21:44.040 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:21:44.040 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:21:45.229 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:21:45.229 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:21:45.229 [http-nio-8185-exec-3] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:21:45.229 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:21:45.229 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:21:45.229 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:21:45.229 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:21:45.230 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:45.229009Z","nanoTime":26091243731600,"traceId":"d88f87e7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":1268842800,"duration_ms":1268,"resultData":{"latitude":37.5709,"longitude":126.992,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":1268684200,"addressApiResult":{"cached":false,"cacheKey":"address:37.5709:126.992","roadAddress":"주소 없음","jibunAddress":"서울 종로구 묘동 20-5","responseSize":57,"executionTimeNs":79849400,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":38400,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5709:126.992:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":14,"CS2":15,"SC4":0,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":5,"FD6":15,"PK6":15,"OL7":0,"PM9":9},"totalPlaces":152,"responseSize":17628,"executionTimeNs":1188796400,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:21:45.230 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:45.230006900Z","nanoTime":26091244066600,"traceId":"d88f87e7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:21:45.230 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:21:45.230 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:21:45.230 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 20개
2025-11-21 19:21:45.230 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 20개 (총 카메라 대수: 45대)
2025-11-21 19:21:45.230 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:21:45.295 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 종로구  종로17길 4 종로2가파출소 (거리: 275m)
2025-11-21 19:21:45.295 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:21:45.295 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:21:45.295 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 12개 카테고리
2025-11-21 19:21:45.295 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:21:45.295 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:45.295013900Z","nanoTime":26091309332200,"traceId":"d88f87e7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":65265600,"duration_ms":65,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":20,"totalCctvAfterFilter":20,"totalCameraCount":45,"filterRate":1.0,"filterExecutionTimeNs":15100,"success":true},"policeQuery":{"queryDurationNs":64643500,"found":true,"nearestAddress":"서울특별시 종로구  종로17길 4 종로2가파출소","nearestDistance":274.91169467788285,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":14,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SW8":4,"PO3":5,"FD6":15,"PK6":15,"PM9":9},"placesAfterFilter":{"CT1":15,"AT4":14,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SW8":4,"PO3":5,"FD6":15,"PK6":15,"PM9":9},"totalBeforeFilter":152,"totalAfterFilter":152,"filterRate":1.0,"filterExecutionTimeNs":162600,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:21:45.295 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:45.295013900Z","nanoTime":26091309596500,"traceId":"d88f87e7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:21:45.295 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:21:45.296 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 46.36, 편의성: 47.73, 종합: 47.04
2025-11-21 19:21:45.296 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:45.296013Z","nanoTime":26091309958200,"traceId":"d88f87e7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":361700,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":65.63603816526464,"policeDistance":274.91169467788285,"cctvScore":66.66666666666666,"cctvCount":20,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":46.35747811624606,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":42.0,"BK9":75.0,"HP8":100.0,"CS2":3.75,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":15.0,"FD6":15.0,"PK6":45.0,"PM9":72.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":47.729166666666664,"success":true},"overallScore":47.04332239145636,"errorMessage":null,"success":true}}
2025-11-21 19:21:45.296 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:45.296013Z","nanoTime":26091310201600,"traceId":"d88f87e7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:21:45.296 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:21:45.296 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 종로구  종로17길 4 종로2가파출소, latitude=37.570504, longitude=126.988921, geohashId=wydm9xw)
2025-11-21 19:21:45.296 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 274.91169467788285
2025-11-21 19:21:45.298 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9z8
2025-11-21 19:21:45.298 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:21:45.298 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:45.298005900Z","nanoTime":26091311959100,"traceId":"d88f87e7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1757500,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["병원이(가) 27m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm9z8","dataSize":20168,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20168,"errorMessage":null,"success":true}}
2025-11-21 19:21:45.298 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:21:48.444 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:21:48.444 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5276, longitude=127.0397, radius=500)
2025-11-21 19:21:48.444 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:21:48.444 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5276, longitude=127.0397, radius=500
2025-11-21 19:21:48.444 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:48.444143500Z","nanoTime":26094458611300,"traceId":"6f4d9b6e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:21:48.444 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:21:48.444 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5276, lon=127.0397
2025-11-21 19:21:48.444 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:48.444143500Z","nanoTime":26094458745900,"traceId":"6f4d9b6e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:21:48.445 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:48.444143500Z","nanoTime":26094458855600,"traceId":"6f4d9b6e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":109700,"duration_ms":0,"resultData":{"latitude":37.5276,"longitude":127.0397,"precision":7,"centerHash":"wydm6ze","adjacentHashes":["wydm6ze","wydm6zg","wydm6zu","wydm6zs","wydm6zk","wydm6z7","wydm6z6","wydm6zd","wydm6zf"],"errorMessage":null,"success":true}}
2025-11-21 19:21:48.445 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm6ze, wydm6zg, wydm6zu, wydm6zs, wydm6zk, wydm6z7, wydm6z6, wydm6zd, wydm6zf]
2025-11-21 19:21:48.445 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm6ze
2025-11-21 19:21:48.445 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:48.445145Z","nanoTime":26094459039400,"traceId":"6f4d9b6e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":428100,"duration_ms":0,"resultData":{"requestLatitude":37.5276,"requestLongitude":127.0397,"requestRadius":500,"centerGeohashId":"wydm6ze","nineBlockGeohashes":["wydm6ze","wydm6zg","wydm6zu","wydm6zs","wydm6zk","wydm6z7","wydm6z6","wydm6zd","wydm6zf"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:21:48.445 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:48.445145Z","nanoTime":26094459125200,"traceId":"6f4d9b6e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:21:48.445 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:21:48.445 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm6ze
2025-11-21 19:21:48.445 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4655ms)
2025-11-21 19:21:48.445 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:21:48.447 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:21:48.447 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:21:48.447 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.3845ms, 역직렬화: 0.0ms
2025-11-21 19:21:48.447 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:21:48.447 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:48.447151900Z","nanoTime":26094461222500,"traceId":"6f4d9b6e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2097300,"duration_ms":2,"resultData":{"centerGeohashId":"wydm6ze","nineBlockGeohashes":["wydm6ze","wydm6zg","wydm6zu","wydm6zs","wydm6zk","wydm6z7","wydm6z6","wydm6zd","wydm6zf"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm6ze","hit":false,"valueSize":0,"l1CacheGetDurationNs":465500,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm6ze","cacheKey":"data:wydm6ze:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":231800},{"geohashId":"wydm6zg","cacheKey":"data:wydm6zg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":161800},{"geohashId":"wydm6zu","cacheKey":"data:wydm6zu:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":131500},{"geohashId":"wydm6zs","cacheKey":"data:wydm6zs:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":127000},{"geohashId":"wydm6zk","cacheKey":"data:wydm6zk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":166700},{"geohashId":"wydm6z7","cacheKey":"data:wydm6z7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":161500},{"geohashId":"wydm6z6","cacheKey":"data:wydm6z6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":121500},{"geohashId":"wydm6zd","cacheKey":"data:wydm6zd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":109300},{"geohashId":"wydm6zf","cacheKey":"data:wydm6zf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":117900}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1384500,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:21:48.447 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:48.447151900Z","nanoTime":26094461447700,"traceId":"6f4d9b6e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:21:48.447 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:21:48.447 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:21:48.453 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 48건
2025-11-21 19:21:48.455 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:21:48.456 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:21:48.456 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:48.456146Z","nanoTime":26094469998100,"traceId":"6f4d9b6e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":8550400,"duration_ms":8,"resultData":{"inputCctvMissGrids":["wydm6ze","wydm6zg","wydm6zu","wydm6zs","wydm6zk","wydm6z7","wydm6z6","wydm6zd","wydm6zf"],"cctvQueryResult":{"queryGeohashIds":["wydm6ze","wydm6zg","wydm6zu","wydm6zs","wydm6zk","wydm6z7","wydm6z6","wydm6zd","wydm6zf"],"totalRowsReturned":48,"rowsPerGrid":{"wydm6z6":3,"wydm6zf":3,"wydm6ze":9,"wydm6zu":3,"wydm6zd":6,"wydm6zs":6,"wydm6z7":6,"wydm6zg":6,"wydm6zk":6},"queryExecutionTimeNs":5579200,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm6z6","cacheKey":"data:wydm6z6:cctv","dataCount":3,"dataSize":406,"errorMessage":null,"success":true},{"geohashId":"wydm6zf","cacheKey":"data:wydm6zf:cctv","dataCount":3,"dataSize":409,"errorMessage":null,"success":true},{"geohashId":"wydm6ze","cacheKey":"data:wydm6ze:cctv","dataCount":9,"dataSize":1225,"errorMessage":null,"success":true},{"geohashId":"wydm6zu","cacheKey":"data:wydm6zu:cctv","dataCount":3,"dataSize":406,"errorMessage":null,"success":true},{"geohashId":"wydm6zd","cacheKey":"data:wydm6zd:cctv","dataCount":6,"dataSize":823,"errorMessage":null,"success":true},{"geohashId":"wydm6zs","cacheKey":"data:wydm6zs:cctv","dataCount":6,"dataSize":805,"errorMessage":null,"success":true},{"geohashId":"wydm6z7","cacheKey":"data:wydm6z7:cctv","dataCount":6,"dataSize":814,"errorMessage":null,"success":true},{"geohashId":"wydm6zg","cacheKey":"data:wydm6zg:cctv","dataCount":6,"dataSize":814,"errorMessage":null,"success":true},{"geohashId":"wydm6zk","cacheKey":"data:wydm6zk:cctv","dataCount":6,"dataSize":808,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:21:48.456 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:48.456146Z","nanoTime":26094470219700,"traceId":"6f4d9b6e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:21:48.456 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:21:48.456 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5276, 127.0397)
2025-11-21 19:21:48.456 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:21:48.568 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:21:48.568 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:21:48.568 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:21:49.653 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:21:49.653 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:21:49.653 [http-nio-8185-exec-5] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:21:49.653 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:21:49.653 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:21:49.653 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:21:49.653 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:21:49.654 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:49.653913800Z","nanoTime":26095668563800,"traceId":"6f4d9b6e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":1198344100,"duration_ms":1198,"resultData":{"latitude":37.5276,"longitude":127.0397,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":1198208400,"addressApiResult":{"cached":false,"cacheKey":"address:37.5276:127.0397","roadAddress":"주소 없음","jibunAddress":"서울 강남구 신사동 668-33","responseSize":60,"executionTimeNs":112521300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":42300,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5276:127.0397:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":6,"CS2":15,"SC4":2,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":1,"FD6":15,"PK6":15,"OL7":0,"PM9":14},"totalPlaces":146,"responseSize":16938,"executionTimeNs":1085644800,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:21:49.654 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:49.654920800Z","nanoTime":26095668812900,"traceId":"6f4d9b6e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:21:49.654 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:21:49.654 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:21:49.654 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 48개
2025-11-21 19:21:49.654 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 48개 (총 카메라 대수: 141대)
2025-11-21 19:21:49.654 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:21:49.719 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 강남구 학동로 169 (거리: 409m)
2025-11-21 19:21:49.719 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:21:49.719 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:21:49.719 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:21:49.719 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:21:49.719 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:49.719916500Z","nanoTime":26095734268000,"traceId":"6f4d9b6e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":65455100,"duration_ms":65,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":48,"totalCctvAfterFilter":48,"totalCameraCount":141,"filterRate":1.0,"filterExecutionTimeNs":26200,"success":true},"policeQuery":{"queryDurationNs":64977900,"found":true,"nearestAddress":"서울특별시 강남구 학동로 169","nearestDistance":408.97969932762777,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":6,"CS2":15,"SC4":2,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":1,"FD6":15,"PK6":15,"PM9":14},"placesAfterFilter":{"CT1":15,"AT4":6,"CS2":15,"SC4":2,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":1,"FD6":15,"PK6":15,"PM9":14},"totalBeforeFilter":146,"totalAfterFilter":146,"filterRate":1.0,"filterExecutionTimeNs":123000,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:21:49.719 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:49.719916500Z","nanoTime":26095734467400,"traceId":"6f4d9b6e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:21:49.719 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:21:49.720 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 54.66, 편의성: 42.05, 종합: 48.36
2025-11-21 19:21:49.720 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:49.720916500Z","nanoTime":26095734730700,"traceId":"6f4d9b6e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":263300,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":48.87753758404653,"policeDistance":408.97969932762777,"cctvScore":100.0,"cctvCount":48,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":54.663261275213955,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":18.0,"CS2":3.75,"SC4":4.0,"MT1":20.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":3.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":42.05357142857143,"success":true},"overallScore":48.35841635189269,"errorMessage":null,"success":true}}
2025-11-21 19:21:49.720 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:49.720916500Z","nanoTime":26095734864100,"traceId":"6f4d9b6e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:21:49.720 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:21:49.720 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 강남구 학동로 169, latitude=37.529343, longitude=127.035616, geohashId=wydmdb0)
2025-11-21 19:21:49.720 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 408.97969932762777
2025-11-21 19:21:49.721 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm6ze
2025-11-21 19:21:49.721 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:21:49.721 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:49.721918800Z","nanoTime":26095736265300,"traceId":"6f4d9b6e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1401200,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["은행이(가) 17m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm6ze","dataSize":23732,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":23732,"errorMessage":null,"success":true}}
2025-11-21 19:21:49.721 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:21:52.893 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:21:52.893 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5087, longitude=127.0633, radius=500)
2025-11-21 19:21:52.893 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:21:52.893 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5087, longitude=127.0633, radius=500
2025-11-21 19:21:52.893 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:52.893508Z","nanoTime":26098907520200,"traceId":"da141549","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:21:52.893 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:21:52.893 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5087, lon=127.0633
2025-11-21 19:21:52.893 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:52.893508Z","nanoTime":26098907639000,"traceId":"da141549","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:21:52.893 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:52.893508Z","nanoTime":26098907733800,"traceId":"da141549","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":94800,"duration_ms":0,"resultData":{"latitude":37.5087,"longitude":127.0633,"precision":7,"centerHash":"wydm7kk","adjacentHashes":["wydm7kk","wydm7ks","wydm7kt","wydm7km","wydm7kj","wydm7kh","wydm7k5","wydm7k7","wydm7ke"],"errorMessage":null,"success":true}}
2025-11-21 19:21:52.893 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm7kk, wydm7ks, wydm7kt, wydm7km, wydm7kj, wydm7kh, wydm7k5, wydm7k7, wydm7ke]
2025-11-21 19:21:52.893 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm7kk
2025-11-21 19:21:52.893 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:52.893508Z","nanoTime":26098907891400,"traceId":"da141549","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":371200,"duration_ms":0,"resultData":{"requestLatitude":37.5087,"requestLongitude":127.0633,"requestRadius":500,"centerGeohashId":"wydm7kk","nineBlockGeohashes":["wydm7kk","wydm7ks","wydm7kt","wydm7km","wydm7kj","wydm7kh","wydm7k5","wydm7k7","wydm7ke"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:21:52.893 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:52.893508Z","nanoTime":26098907978000,"traceId":"da141549","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:21:52.893 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:21:52.893 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm7kk
2025-11-21 19:21:52.894 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4322ms)
2025-11-21 19:21:52.894 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:21:52.895 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:21:52.895 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:21:52.895 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.3109ms, 역직렬화: 0.0ms
2025-11-21 19:21:52.895 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:21:52.895 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:52.895505200Z","nanoTime":26098910002200,"traceId":"da141549","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2024200,"duration_ms":2,"resultData":{"centerGeohashId":"wydm7kk","nineBlockGeohashes":["wydm7kk","wydm7ks","wydm7kt","wydm7km","wydm7kj","wydm7kh","wydm7k5","wydm7k7","wydm7ke"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm7kk","hit":false,"valueSize":0,"l1CacheGetDurationNs":432200,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm7kk","cacheKey":"data:wydm7kk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":249900},{"geohashId":"wydm7ks","cacheKey":"data:wydm7ks:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":181100},{"geohashId":"wydm7kt","cacheKey":"data:wydm7kt:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":135000},{"geohashId":"wydm7km","cacheKey":"data:wydm7km:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":113800},{"geohashId":"wydm7kj","cacheKey":"data:wydm7kj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":110800},{"geohashId":"wydm7kh","cacheKey":"data:wydm7kh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":110700},{"geohashId":"wydm7k5","cacheKey":"data:wydm7k5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":115300},{"geohashId":"wydm7k7","cacheKey":"data:wydm7k7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":118600},{"geohashId":"wydm7ke","cacheKey":"data:wydm7ke:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":115600}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1310900,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:21:52.895 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:52.895505200Z","nanoTime":26098910184400,"traceId":"da141549","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:21:52.895 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:21:52.895 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:21:52.899 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 16건
2025-11-21 19:21:52.901 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:21:52.901 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 6개
2025-11-21 19:21:52.902 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:52.902507400Z","nanoTime":26098916259100,"traceId":"da141549","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6074700,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydm7kk","wydm7ks","wydm7kt","wydm7km","wydm7kj","wydm7kh","wydm7k5","wydm7k7","wydm7ke"],"cctvQueryResult":{"queryGeohashIds":["wydm7kk","wydm7ks","wydm7kt","wydm7km","wydm7kj","wydm7kh","wydm7k5","wydm7k7","wydm7ke"],"totalRowsReturned":16,"rowsPerGrid":{"wydm7k5":3,"wydm7ke":2,"wydm7kh":3,"wydm7k7":3,"wydm7km":3,"wydm7kk":2},"queryExecutionTimeNs":3907700,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm7k5","cacheKey":"data:wydm7k5:cctv","dataCount":3,"dataSize":412,"errorMessage":null,"success":true},{"geohashId":"wydm7ke","cacheKey":"data:wydm7ke:cctv","dataCount":2,"dataSize":271,"errorMessage":null,"success":true},{"geohashId":"wydm7kh","cacheKey":"data:wydm7kh:cctv","dataCount":3,"dataSize":409,"errorMessage":null,"success":true},{"geohashId":"wydm7k7","cacheKey":"data:wydm7k7:cctv","dataCount":3,"dataSize":409,"errorMessage":null,"success":true},{"geohashId":"wydm7km","cacheKey":"data:wydm7km:cctv","dataCount":3,"dataSize":412,"errorMessage":null,"success":true},{"geohashId":"wydm7kk","cacheKey":"data:wydm7kk:cctv","dataCount":2,"dataSize":273,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:21:52.902 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:52.902507400Z","nanoTime":26098916468400,"traceId":"da141549","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:21:52.902 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:21:52.902 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5087, 127.0633)
2025-11-21 19:21:52.902 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:21:53.002 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:21:53.002 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:21:53.002 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:21:54.039 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:21:54.039 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:21:54.039 [http-nio-8185-exec-6] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:21:54.039 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:21:54.039 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:21:54.039 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:21:54.039 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:21:54.039 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:54.039976500Z","nanoTime":26100054101700,"traceId":"da141549","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":1137633300,"duration_ms":1137,"resultData":{"latitude":37.5087,"longitude":127.0633,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":1137477400,"addressApiResult":{"cached":false,"cacheKey":"address:37.5087:127.0633","roadAddress":"주소 없음","jibunAddress":"서울 강남구 대치동 1011","responseSize":58,"executionTimeNs":99604100,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":58200,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5087:127.0633:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":1,"CS2":15,"SC4":3,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":5,"FD6":15,"PK6":15,"OL7":1,"PM9":12},"totalPlaces":143,"responseSize":16733,"executionTimeNs":1037815100,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:21:54.039 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:54.039976500Z","nanoTime":26100054408600,"traceId":"da141549","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:21:54.039 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:21:54.039 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:21:54.039 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 16개
2025-11-21 19:21:54.039 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 16개 (총 카메라 대수: 42대)
2025-11-21 19:21:54.039 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:21:54.106 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중랑구  사가정로41길 45 (면목3.8파출소) (거리: 732m)
2025-11-21 19:21:54.106 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:21:54.106 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:21:54.106 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:21:54.106 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:21:54.106 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:54.106333200Z","nanoTime":26100120507700,"traceId":"da141549","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":66099100,"duration_ms":66,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":16,"totalCctvAfterFilter":16,"totalCameraCount":42,"filterRate":1.0,"filterExecutionTimeNs":12000,"success":true},"policeQuery":{"queryDurationNs":65631600,"found":true,"nearestAddress":"서울특별시 중랑구  사가정로41길 45 (면목3.8파출소)","nearestDistance":731.8782490022119,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":1,"CS2":15,"SC4":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":5,"FD6":15,"PK6":15,"OL7":1,"PM9":12},"placesAfterFilter":{"CT1":15,"AT4":1,"CS2":15,"SC4":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":5,"FD6":15,"PK6":15,"OL7":1,"PM9":12},"totalBeforeFilter":143,"totalAfterFilter":143,"filterRate":1.0,"filterExecutionTimeNs":123700,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:21:54.106 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:54.106333200Z","nanoTime":26100120719500,"traceId":"da141549","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:21:54.106 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:21:54.106 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 23.89, 편의성: 40.63, 종합: 32.26
2025-11-21 19:21:54.107 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:54.106333200Z","nanoTime":26100121023200,"traceId":"da141549","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":303700,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":8.515218874723516,"policeDistance":731.8782490022119,"cctvScore":53.333333333333336,"cctvCount":16,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":23.88789899575039,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":3.0,"CS2":3.75,"SC4":6.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":15.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":96.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":40.625,"success":true},"overallScore":32.256449497875195,"errorMessage":null,"success":true}}
2025-11-21 19:21:54.107 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:54.107340100Z","nanoTime":26100121234000,"traceId":"da141549","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:21:54.107 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:21:54.107 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중랑구  사가정로41길 45 (면목3.8파출소), latitude=37.514908, longitude=127.060543, geohashId=wydm7m6)
2025-11-21 19:21:54.107 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 731.8782490022119
2025-11-21 19:21:54.108 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm7kk
2025-11-21 19:21:54.108 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:21:54.108 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:54.108340300Z","nanoTime":26100122513900,"traceId":"da141549","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1279900,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["지하철역이(가) 28m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm7kk","dataSize":20053,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20053,"errorMessage":null,"success":true}}
2025-11-21 19:21:54.108 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:21:57.033 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:21:57.033 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5612, longitude=127.0377, radius=500)
2025-11-21 19:21:57.033 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:21:57.033 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5612, longitude=127.0377, radius=500
2025-11-21 19:21:57.033 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:57.033010800Z","nanoTime":26103047214900,"traceId":"2d850537","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:21:57.033 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:21:57.033 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5612, lon=127.0377
2025-11-21 19:21:57.033 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:57.033010800Z","nanoTime":26103047345900,"traceId":"2d850537","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:21:57.033 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:57.033010800Z","nanoTime":26103047443300,"traceId":"2d850537","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":97400,"duration_ms":0,"resultData":{"latitude":37.5612,"longitude":127.0377,"precision":7,"centerHash":"wydmdvf","adjacentHashes":["wydmdvf","wydmdy4","wydmdy5","wydmdvg","wydmdve","wydmdvd","wydmdv9","wydmdvc","wydmdy1"],"errorMessage":null,"success":true}}
2025-11-21 19:21:57.033 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdvf, wydmdy4, wydmdy5, wydmdvg, wydmdve, wydmdvd, wydmdv9, wydmdvc, wydmdy1]
2025-11-21 19:21:57.033 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdvf
2025-11-21 19:21:57.033 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:57.033010800Z","nanoTime":26103047641700,"traceId":"2d850537","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":426800,"duration_ms":0,"resultData":{"requestLatitude":37.5612,"requestLongitude":127.0377,"requestRadius":500,"centerGeohashId":"wydmdvf","nineBlockGeohashes":["wydmdvf","wydmdy4","wydmdy5","wydmdvg","wydmdve","wydmdvd","wydmdv9","wydmdvc","wydmdy1"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:21:57.034 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:57.033010800Z","nanoTime":26103047746000,"traceId":"2d850537","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:21:57.034 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:21:57.034 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdvf
2025-11-21 19:21:57.034 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4437ms)
2025-11-21 19:21:57.034 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:21:57.035 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:21:57.035 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:21:57.035 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.2408ms, 역직렬화: 0.0ms
2025-11-21 19:21:57.035 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:21:57.036 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:57.035010100Z","nanoTime":26103049674200,"traceId":"2d850537","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1928200,"duration_ms":1,"resultData":{"centerGeohashId":"wydmdvf","nineBlockGeohashes":["wydmdvf","wydmdy4","wydmdy5","wydmdvg","wydmdve","wydmdvd","wydmdv9","wydmdvc","wydmdy1"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdvf","hit":false,"valueSize":0,"l1CacheGetDurationNs":443700,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdvf","cacheKey":"data:wydmdvf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":283800},{"geohashId":"wydmdy4","cacheKey":"data:wydmdy4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":128700},{"geohashId":"wydmdy5","cacheKey":"data:wydmdy5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":131300},{"geohashId":"wydmdvg","cacheKey":"data:wydmdvg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":103900},{"geohashId":"wydmdve","cacheKey":"data:wydmdve:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":107100},{"geohashId":"wydmdvd","cacheKey":"data:wydmdvd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":114200},{"geohashId":"wydmdv9","cacheKey":"data:wydmdv9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":108700},{"geohashId":"wydmdvc","cacheKey":"data:wydmdvc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":106400},{"geohashId":"wydmdy1","cacheKey":"data:wydmdy1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":98400}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1240800,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:21:57.036 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:57.036016800Z","nanoTime":26103049941900,"traceId":"2d850537","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:21:57.036 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:21:57.036 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:21:57.040 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 21건
2025-11-21 19:21:57.041 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:21:57.042 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 6개
2025-11-21 19:21:57.042 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:57.042008900Z","nanoTime":26103055781800,"traceId":"2d850537","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5839900,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydmdvf","wydmdy4","wydmdy5","wydmdvg","wydmdve","wydmdvd","wydmdv9","wydmdvc","wydmdy1"],"cctvQueryResult":{"queryGeohashIds":["wydmdvf","wydmdy4","wydmdy5","wydmdvg","wydmdve","wydmdvd","wydmdv9","wydmdvc","wydmdy1"],"totalRowsReturned":21,"rowsPerGrid":{"wydmdy5":3,"wydmdvc":5,"wydmdy1":3,"wydmdv9":1,"wydmdve":6,"wydmdvg":3},"queryExecutionTimeNs":3786100,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdy5","cacheKey":"data:wydmdy5:cctv","dataCount":3,"dataSize":399,"errorMessage":null,"success":true},{"geohashId":"wydmdvc","cacheKey":"data:wydmdvc:cctv","dataCount":5,"dataSize":660,"errorMessage":null,"success":true},{"geohashId":"wydmdy1","cacheKey":"data:wydmdy1:cctv","dataCount":3,"dataSize":383,"errorMessage":null,"success":true},{"geohashId":"wydmdv9","cacheKey":"data:wydmdv9:cctv","dataCount":1,"dataSize":133,"errorMessage":null,"success":true},{"geohashId":"wydmdve","cacheKey":"data:wydmdve:cctv","dataCount":6,"dataSize":728,"errorMessage":null,"success":true},{"geohashId":"wydmdvg","cacheKey":"data:wydmdvg:cctv","dataCount":3,"dataSize":395,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:21:57.042 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:57.042008900Z","nanoTime":26103055969000,"traceId":"2d850537","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:21:57.042 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:21:57.042 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5612, 127.0377)
2025-11-21 19:21:57.042 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:21:57.123 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:21:57.123 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:21:57.123 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:21:58.199 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:21:58.199 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:21:58.199 [http-nio-8185-exec-8] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:21:58.199 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:21:58.199 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:21:58.199 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:21:58.199 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:21:58.199 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:58.199884500Z","nanoTime":26104214128100,"traceId":"2d850537","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":1158159100,"duration_ms":1158,"resultData":{"latitude":37.5612,"longitude":127.0377,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":1158028300,"addressApiResult":{"cached":false,"cacheKey":"address:37.5612:127.0377","roadAddress":"주소 없음","jibunAddress":"서울 성동구 행당동 168-151","responseSize":61,"executionTimeNs":81812100,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":34200,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5612:127.0377:500","categoryCount":15,"placesByCategory":{"CT1":6,"AT4":3,"CS2":15,"SC4":3,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":7,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalPlaces":147,"responseSize":17057,"executionTimeNs":1076182000,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:21:58.199 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:58.199884500Z","nanoTime":26104214385400,"traceId":"2d850537","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:21:58.199 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:21:58.199 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:21:58.199 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 21개
2025-11-21 19:21:58.199 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 21개 (총 카메라 대수: 64대)
2025-11-21 19:21:58.199 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:21:58.268 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구  선유로 95 (거리: 375m)
2025-11-21 19:21:58.268 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:21:58.268 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:21:58.269 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:21:58.269 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:21:58.269 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:58.269885Z","nanoTime":26104283809200,"traceId":"2d850537","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":69423800,"duration_ms":69,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":21,"totalCctvAfterFilter":21,"totalCameraCount":64,"filterRate":1.0,"filterExecutionTimeNs":15900,"success":true},"policeQuery":{"queryDurationNs":68913600,"found":true,"nearestAddress":"서울특별시 영등포구  선유로 95","nearestDistance":374.7953776933087,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":6,"AT4":3,"CS2":15,"SC4":3,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":7,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"placesAfterFilter":{"CT1":6,"AT4":3,"CS2":15,"SC4":3,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":7,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalBeforeFilter":147,"totalAfterFilter":147,"filterRate":1.0,"filterExecutionTimeNs":163200,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:21:58.269 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:58.269885Z","nanoTime":26104284128900,"traceId":"2d850537","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:21:58.269 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:21:58.269 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 43.95, 편의성: 38.58, 종합: 41.26
2025-11-21 19:21:58.269 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:58.269885Z","nanoTime":26104284410700,"traceId":"2d850537","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":281800,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":53.15057778833642,"policeDistance":374.7953776933087,"cctvScore":70.0,"cctvCount":21,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":43.94517333650093,"success":true},"convenienceScore":{"categoryScores":{"CT1":24.0,"AT4":9.0,"CS2":3.75,"SC4":6.0,"MT1":30.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":21.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":38.583333333333336,"success":true},"overallScore":41.26425333491713,"errorMessage":null,"success":true}}
2025-11-21 19:21:58.270 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:58.270868500Z","nanoTime":26104284621500,"traceId":"2d850537","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:21:58.270 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:21:58.270 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구  선유로 95, latitude=37.560301, longitude=127.041798, geohashId=wydmdvt)
2025-11-21 19:21:58.270 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 374.7953776933087
2025-11-21 19:21:58.271 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdvf
2025-11-21 19:21:58.271 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:21:58.271 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:21:58.271887100Z","nanoTime":26104285949300,"traceId":"2d850537","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1327800,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["공공기관이(가) 27m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdvf","dataSize":20502,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20502,"errorMessage":null,"success":true}}
2025-11-21 19:21:58.271 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:22:01.728 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:22:01.728 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.4764, longitude=126.9814, radius=500)
2025-11-21 19:22:01.728 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:22:01.728 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.4764, longitude=126.9814, radius=500
2025-11-21 19:22:01.728 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:01.728484800Z","nanoTime":26107742774700,"traceId":"a20b9902","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:22:01.728 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:22:01.728 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.4764, lon=126.9814
2025-11-21 19:22:01.728 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:01.728484800Z","nanoTime":26107742914800,"traceId":"a20b9902","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:22:01.730 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:01.728484800Z","nanoTime":26107743002600,"traceId":"a20b9902","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":87800,"duration_ms":0,"resultData":{"latitude":37.4764,"longitude":126.9814,"precision":7,"centerHash":"wydm1w3","adjacentHashes":["wydm1w3","wydm1w9","wydm1wd","wydm1w6","wydm1w4","wydm1w1","wydm1w0","wydm1w2","wydm1w8"],"errorMessage":null,"success":true}}
2025-11-21 19:22:01.730 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm1w3, wydm1w9, wydm1wd, wydm1w6, wydm1w4, wydm1w1, wydm1w0, wydm1w2, wydm1w8]
2025-11-21 19:22:01.730 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm1w3
2025-11-21 19:22:01.731 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:01.730481900Z","nanoTime":26107744742100,"traceId":"a20b9902","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":1967400,"duration_ms":1,"resultData":{"requestLatitude":37.4764,"requestLongitude":126.9814,"requestRadius":500,"centerGeohashId":"wydm1w3","nineBlockGeohashes":["wydm1w3","wydm1w9","wydm1wd","wydm1w6","wydm1w4","wydm1w1","wydm1w0","wydm1w2","wydm1w8"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:22:01.731 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:01.731564200Z","nanoTime":26107745718900,"traceId":"a20b9902","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:22:01.731 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:22:01.731 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm1w3
2025-11-21 19:22:01.732 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.6146ms)
2025-11-21 19:22:01.732 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:22:01.734 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:22:01.734 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:22:01.734 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.2386ms, 역직렬화: 0.0ms
2025-11-21 19:22:01.734 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:22:01.737 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:01.734483300Z","nanoTime":26107748866400,"traceId":"a20b9902","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3147500,"duration_ms":3,"resultData":{"centerGeohashId":"wydm1w3","nineBlockGeohashes":["wydm1w3","wydm1w9","wydm1wd","wydm1w6","wydm1w4","wydm1w1","wydm1w0","wydm1w2","wydm1w8"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm1w3","hit":false,"valueSize":0,"l1CacheGetDurationNs":614600,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm1w3","cacheKey":"data:wydm1w3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":317200},{"geohashId":"wydm1w9","cacheKey":"data:wydm1w9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":346600},{"geohashId":"wydm1wd","cacheKey":"data:wydm1wd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":282300},{"geohashId":"wydm1w6","cacheKey":"data:wydm1w6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":249600},{"geohashId":"wydm1w4","cacheKey":"data:wydm1w4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":234400},{"geohashId":"wydm1w1","cacheKey":"data:wydm1w1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":164100},{"geohashId":"wydm1w0","cacheKey":"data:wydm1w0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":159400},{"geohashId":"wydm1w2","cacheKey":"data:wydm1w2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":176900},{"geohashId":"wydm1w8","cacheKey":"data:wydm1w8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":197400}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2238600,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:22:01.737 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:01.737482700Z","nanoTime":26107752118500,"traceId":"a20b9902","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:22:01.738 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:22:01.738 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:22:01.744 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 60건
2025-11-21 19:22:01.748 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:22:01.748 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:22:01.750 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:01.748483Z","nanoTime":26107762490200,"traceId":"a20b9902","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":10371700,"duration_ms":10,"resultData":{"inputCctvMissGrids":["wydm1w3","wydm1w9","wydm1wd","wydm1w6","wydm1w4","wydm1w1","wydm1w0","wydm1w2","wydm1w8"],"cctvQueryResult":{"queryGeohashIds":["wydm1w3","wydm1w9","wydm1wd","wydm1w6","wydm1w4","wydm1w1","wydm1w0","wydm1w2","wydm1w8"],"totalRowsReturned":60,"rowsPerGrid":{"wydm1w4":1,"wydm1wd":18,"wydm1w3":3,"wydm1w2":5,"wydm1w1":4,"wydm1w8":4,"wydm1w6":3,"wydm1w9":20,"wydm1w0":2},"queryExecutionTimeNs":6400200,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm1w4","cacheKey":"data:wydm1w4:cctv","dataCount":1,"dataSize":138,"errorMessage":null,"success":true},{"geohashId":"wydm1wd","cacheKey":"data:wydm1wd:cctv","dataCount":18,"dataSize":2491,"errorMessage":null,"success":true},{"geohashId":"wydm1w3","cacheKey":"data:wydm1w3:cctv","dataCount":3,"dataSize":376,"errorMessage":null,"success":true},{"geohashId":"wydm1w2","cacheKey":"data:wydm1w2:cctv","dataCount":5,"dataSize":573,"errorMessage":null,"success":true},{"geohashId":"wydm1w1","cacheKey":"data:wydm1w1:cctv","dataCount":4,"dataSize":553,"errorMessage":null,"success":true},{"geohashId":"wydm1w8","cacheKey":"data:wydm1w8:cctv","dataCount":4,"dataSize":579,"errorMessage":null,"success":true},{"geohashId":"wydm1w6","cacheKey":"data:wydm1w6:cctv","dataCount":3,"dataSize":415,"errorMessage":null,"success":true},{"geohashId":"wydm1w9","cacheKey":"data:wydm1w9:cctv","dataCount":20,"dataSize":2767,"errorMessage":null,"success":true},{"geohashId":"wydm1w0","cacheKey":"data:wydm1w0:cctv","dataCount":2,"dataSize":197,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:22:01.750 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:01.750483200Z","nanoTime":26107764901100,"traceId":"a20b9902","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:22:01.750 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:22:01.750 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.4764, 126.9814)
2025-11-21 19:22:01.751 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:22:01.828 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:22:01.828 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:22:01.828 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:22:02.946 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:22:02.947 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:22:02.947 [http-nio-8185-exec-4] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:22:02.947 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:22:02.947 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:22:02.947 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:22:02.947 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:22:02.949 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:02.947092Z","nanoTime":26108960978100,"traceId":"a20b9902","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":1196077000,"duration_ms":1196,"resultData":{"latitude":37.4764,"longitude":126.9814,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":1195930100,"addressApiResult":{"cached":false,"cacheKey":"address:37.4764:126.9814","roadAddress":"주소 없음","jibunAddress":"서울 관악구 남현동 1130-1","responseSize":60,"executionTimeNs":78206200,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":45500,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.4764:126.9814:500","categoryCount":15,"placesByCategory":{"CT1":5,"AT4":3,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":3,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"totalPlaces":137,"responseSize":15882,"executionTimeNs":1117678400,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:22:02.949 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:02.949091Z","nanoTime":26108963703800,"traceId":"a20b9902","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:22:02.949 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:22:02.949 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:22:02.949 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 60개
2025-11-21 19:22:02.949 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 60개 (총 카메라 대수: 78대)
2025-11-21 19:22:02.949 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:22:03.015 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 송파구 위례순환로 369 (거리: 345m)
2025-11-21 19:22:03.015 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:22:03.015 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:22:03.015 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:22:03.015 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:22:03.017 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:03.015091800Z","nanoTime":26109029842000,"traceId":"a20b9902","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":66138200,"duration_ms":66,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":60,"totalCctvAfterFilter":60,"totalCameraCount":78,"filterRate":1.0,"filterExecutionTimeNs":26100,"success":true},"policeQuery":{"queryDurationNs":65698300,"found":true,"nearestAddress":"서울특별시 송파구 위례순환로 369","nearestDistance":345.1132241530111,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":5,"AT4":3,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":3,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"placesAfterFilter":{"CT1":5,"AT4":3,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":3,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"totalBeforeFilter":137,"totalAfterFilter":137,"filterRate":1.0,"filterExecutionTimeNs":114700,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:22:03.017 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:03.017098100Z","nanoTime":26109031749700,"traceId":"a20b9902","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:22:03.017 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:22:03.018 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 57.06, 편의성: 36.25, 종합: 46.65
2025-11-21 19:22:03.020 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:03.018104400Z","nanoTime":26109032028800,"traceId":"a20b9902","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":279100,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":56.86084698087362,"policeDistance":345.1132241530111,"cctvScore":100.0,"cctvCount":60,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":57.05825409426208,"success":true},"convenienceScore":{"categoryScores":{"CT1":20.0,"AT4":9.0,"CS2":3.75,"SC4":2.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":36.25,"success":true},"overallScore":46.65412704713104,"errorMessage":null,"success":true}}
2025-11-21 19:22:03.020 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:03.020093900Z","nanoTime":26109033962400,"traceId":"a20b9902","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:22:03.020 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:22:03.020 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 송파구 위례순환로 369, latitude=37.479447, longitude=126.982144, geohashId=wydm1wc)
2025-11-21 19:22:03.020 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 345.1132241530111
2025-11-21 19:22:03.021 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm1w3
2025-11-21 19:22:03.021 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:22:03.022 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:03.021093200Z","nanoTime":26109035406800,"traceId":"a20b9902","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1444400,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["지하철역이(가) 23m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm1w3","dataSize":24095,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":24095,"errorMessage":null,"success":true}}
2025-11-21 19:22:03.022 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:22:06.690 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:22:06.690 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.4815, longitude=126.8826, radius=500)
2025-11-21 19:22:06.690 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:22:06.690 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.4815, longitude=126.8826, radius=500
2025-11-21 19:22:06.690 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:06.690884400Z","nanoTime":26112705089100,"traceId":"4d2b3d71","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:22:06.690 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:22:06.690 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.4815, lon=126.8826
2025-11-21 19:22:06.690 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:06.690884400Z","nanoTime":26112705255500,"traceId":"4d2b3d71","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:22:06.690 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:06.690884400Z","nanoTime":26112705328100,"traceId":"4d2b3d71","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":72600,"duration_ms":0,"resultData":{"latitude":37.4815,"longitude":126.8826,"precision":7,"centerHash":"wydjpr3","adjacentHashes":["wydjpr3","wydjpr9","wydjprd","wydjpr6","wydjpr4","wydjpr1","wydjpr0","wydjpr2","wydjpr8"],"errorMessage":null,"success":true}}
2025-11-21 19:22:06.690 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydjpr3, wydjpr9, wydjprd, wydjpr6, wydjpr4, wydjpr1, wydjpr0, wydjpr2, wydjpr8]
2025-11-21 19:22:06.690 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydjpr3
2025-11-21 19:22:06.690 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:06.690884400Z","nanoTime":26112705539200,"traceId":"4d2b3d71","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":450100,"duration_ms":0,"resultData":{"requestLatitude":37.4815,"requestLongitude":126.8826,"requestRadius":500,"centerGeohashId":"wydjpr3","nineBlockGeohashes":["wydjpr3","wydjpr9","wydjprd","wydjpr6","wydjpr4","wydjpr1","wydjpr0","wydjpr2","wydjpr8"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:22:06.691 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:06.691884Z","nanoTime":26112705643400,"traceId":"4d2b3d71","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:22:06.691 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:22:06.691 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydjpr3
2025-11-21 19:22:06.691 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4247ms)
2025-11-21 19:22:06.691 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:22:06.692 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:22:06.692 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:22:06.692 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.2859ms, 역직렬화: 0.0ms
2025-11-21 19:22:06.692 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:22:06.693 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:06.692883800Z","nanoTime":26112707592000,"traceId":"4d2b3d71","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1948600,"duration_ms":1,"resultData":{"centerGeohashId":"wydjpr3","nineBlockGeohashes":["wydjpr3","wydjpr9","wydjprd","wydjpr6","wydjpr4","wydjpr1","wydjpr0","wydjpr2","wydjpr8"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydjpr3","hit":false,"valueSize":0,"l1CacheGetDurationNs":424700,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydjpr3","cacheKey":"data:wydjpr3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":279500},{"geohashId":"wydjpr9","cacheKey":"data:wydjpr9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":141200},{"geohashId":"wydjprd","cacheKey":"data:wydjprd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":123800},{"geohashId":"wydjpr6","cacheKey":"data:wydjpr6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":111100},{"geohashId":"wydjpr4","cacheKey":"data:wydjpr4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":109300},{"geohashId":"wydjpr1","cacheKey":"data:wydjpr1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":108100},{"geohashId":"wydjpr0","cacheKey":"data:wydjpr0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":134100},{"geohashId":"wydjpr2","cacheKey":"data:wydjpr2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":112700},{"geohashId":"wydjpr8","cacheKey":"data:wydjpr8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":110300}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1285900,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:22:06.693 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:06.693883Z","nanoTime":26112707855300,"traceId":"4d2b3d71","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:22:06.693 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:22:06.693 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:22:06.697 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 17건
2025-11-21 19:22:06.699 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:22:06.699 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 7개
2025-11-21 19:22:06.700 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:06.699885300Z","nanoTime":26112714464100,"traceId":"4d2b3d71","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6608800,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydjpr3","wydjpr9","wydjprd","wydjpr6","wydjpr4","wydjpr1","wydjpr0","wydjpr2","wydjpr8"],"cctvQueryResult":{"queryGeohashIds":["wydjpr3","wydjpr9","wydjprd","wydjpr6","wydjpr4","wydjpr1","wydjpr0","wydjpr2","wydjpr8"],"totalRowsReturned":17,"rowsPerGrid":{"wydjpr0":1,"wydjpr1":1,"wydjprd":3,"wydjpr3":2,"wydjpr8":1,"wydjpr9":6,"wydjpr6":3},"queryExecutionTimeNs":3868100,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydjpr0","cacheKey":"data:wydjpr0:cctv","dataCount":1,"dataSize":133,"errorMessage":null,"success":true},{"geohashId":"wydjpr1","cacheKey":"data:wydjpr1:cctv","dataCount":1,"dataSize":134,"errorMessage":null,"success":true},{"geohashId":"wydjprd","cacheKey":"data:wydjprd:cctv","dataCount":3,"dataSize":399,"errorMessage":null,"success":true},{"geohashId":"wydjpr3","cacheKey":"data:wydjpr3:cctv","dataCount":2,"dataSize":265,"errorMessage":null,"success":true},{"geohashId":"wydjpr8","cacheKey":"data:wydjpr8:cctv","dataCount":1,"dataSize":133,"errorMessage":null,"success":true},{"geohashId":"wydjpr9","cacheKey":"data:wydjpr9:cctv","dataCount":6,"dataSize":797,"errorMessage":null,"success":true},{"geohashId":"wydjpr6","cacheKey":"data:wydjpr6:cctv","dataCount":3,"dataSize":400,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:22:06.700 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:06.700884Z","nanoTime":26112714696200,"traceId":"4d2b3d71","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:22:06.700 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:22:06.700 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.4815, 126.8826)
2025-11-21 19:22:06.700 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:22:06.783 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:22:06.783 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:22:06.783 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:22:07.936 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:22:07.936 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:22:07.936 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 금천구
2025-11-21 19:22:07.936 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 미스 - DB 조회
2025-11-21 19:22:07.940 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 성공 및 캐싱 완료 - 금천구: 0.715492589
2025-11-21 19:22:07.941 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:22:07.941 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:22:07.941 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:22:07.941 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.715492589
2025-11-21 19:22:07.941 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:07.941641600Z","nanoTime":26113955591600,"traceId":"4d2b3d71","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":1240895400,"duration_ms":1240,"resultData":{"latitude":37.4815,"longitude":126.8826,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":1240760600,"addressApiResult":{"cached":false,"cacheKey":"address:37.4815:126.8826","roadAddress":"서울특별시 금천구 벚꽃로 309","jibunAddress":"서울 금천구 가산동 468-4","responseSize":71,"executionTimeNs":82678700,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":"arrest_rate:금천구","guName":"금천구","arrestRate":0.715492589,"dataFound":true,"executionTimeNs":4692400,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.4815:126.8826:500","categoryCount":15,"placesByCategory":{"CT1":5,"AT4":1,"CS2":15,"SC4":1,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":0,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalPlaces":133,"responseSize":15515,"executionTimeNs":1153389500,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:22:07.941 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:07.941641600Z","nanoTime":26113955960800,"traceId":"4d2b3d71","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:22:07.941 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:22:07.941 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:22:07.941 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 17개
2025-11-21 19:22:07.941 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 17개 (총 카메라 대수: 52대)
2025-11-21 19:22:07.941 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:22:08.006 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 강북구  한천로 969 (거리: 512m)
2025-11-21 19:22:08.006 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:22:08.006 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:22:08.006 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:22:08.006 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:22:08.006 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:08.006721100Z","nanoTime":26114021054500,"traceId":"4d2b3d71","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":65093700,"duration_ms":65,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":17,"totalCctvAfterFilter":17,"totalCameraCount":52,"filterRate":1.0,"filterExecutionTimeNs":12900,"success":true},"policeQuery":{"queryDurationNs":64652100,"found":true,"nearestAddress":"서울특별시 강북구  한천로 969","nearestDistance":511.5439425320286,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":5,"AT4":1,"CS2":15,"SC4":1,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"placesAfterFilter":{"CT1":5,"AT4":1,"CS2":15,"SC4":1,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalBeforeFilter":133,"totalAfterFilter":133,"filterRate":1.0,"filterExecutionTimeNs":113800,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:22:08.006 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:08.006721100Z","nanoTime":26114021350900,"traceId":"4d2b3d71","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:22:08.006 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:22:08.007 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 54.95, 편의성: 39.02, 종합: 46.98
2025-11-21 19:22:08.007 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:08.007709500Z","nanoTime":26114021603000,"traceId":"4d2b3d71","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":252100,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":36.057007183496424,"policeDistance":511.5439425320286,"cctvScore":56.666666666666664,"cctvCount":17,"arrestRateScore":71.5492589,"arrestRate":0.715492589,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":54.94854649171559,"success":true},"convenienceScore":{"categoryScores":{"CT1":20.0,"AT4":3.0,"CS2":6.274312962730581,"SC4":2.0,"MT1":30.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"금천구","guPopulation":239070,"finalScore":39.01959378305219,"success":true},"overallScore":46.98407013738389,"errorMessage":null,"success":true}}
2025-11-21 19:22:08.007 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:08.007709500Z","nanoTime":26114021806600,"traceId":"4d2b3d71","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:22:08.007 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:22:08.007 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 강북구  한천로 969, latitude=37.479934, longitude=126.888051, geohashId=wydjprj)
2025-11-21 19:22:08.007 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 511.5439425320286
2025-11-21 19:22:08.008 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydjpr3
2025-11-21 19:22:08.008 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:22:08.008 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:08.008718Z","nanoTime":26114022867300,"traceId":"4d2b3d71","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1060700,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["지하철역이(가) 4m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydjpr3","dataSize":18815,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":18815,"errorMessage":null,"success":true}}
2025-11-21 19:22:08.008 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:22:10.524 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:22:10.524 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5245, longitude=126.896, radius=500)
2025-11-21 19:22:10.524 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:22:10.524 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5245, longitude=126.896, radius=500
2025-11-21 19:22:10.524 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:10.524990600Z","nanoTime":26116539456500,"traceId":"9d3e5d65","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:22:10.524 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:22:10.524 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5245, lon=126.896
2025-11-21 19:22:10.524 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:10.524990600Z","nanoTime":26116539541500,"traceId":"9d3e5d65","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:22:10.524 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:10.524990600Z","nanoTime":26116539602400,"traceId":"9d3e5d65","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":60900,"duration_ms":0,"resultData":{"latitude":37.5245,"longitude":126.896,"precision":7,"centerHash":"wydjrx4","adjacentHashes":["wydjrx4","wydjrx6","wydjrx7","wydjrx5","wydjrwg","wydjrwf","wydjrwc","wydjrx1","wydjrx3"],"errorMessage":null,"success":true}}
2025-11-21 19:22:10.524 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydjrx4, wydjrx6, wydjrx7, wydjrx5, wydjrwg, wydjrwf, wydjrwc, wydjrx1, wydjrx3]
2025-11-21 19:22:10.525 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydjrx4
2025-11-21 19:22:10.525 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:10.525984700Z","nanoTime":26116539776200,"traceId":"9d3e5d65","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":319700,"duration_ms":0,"resultData":{"requestLatitude":37.5245,"requestLongitude":126.896,"requestRadius":500,"centerGeohashId":"wydjrx4","nineBlockGeohashes":["wydjrx4","wydjrx6","wydjrx7","wydjrx5","wydjrwg","wydjrwf","wydjrwc","wydjrx1","wydjrx3"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:22:10.525 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:10.525984700Z","nanoTime":26116539849200,"traceId":"9d3e5d65","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:22:10.525 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:22:10.525 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydjrx4
2025-11-21 19:22:10.525 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4529ms)
2025-11-21 19:22:10.525 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:22:10.528 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:22:10.528 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:22:10.528 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.4773ms, 역직렬화: 0.0ms
2025-11-21 19:22:10.528 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:22:10.528 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:10.528984600Z","nanoTime":26116543088400,"traceId":"9d3e5d65","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3239200,"duration_ms":3,"resultData":{"centerGeohashId":"wydjrx4","nineBlockGeohashes":["wydjrx4","wydjrx6","wydjrx7","wydjrx5","wydjrwg","wydjrwf","wydjrwc","wydjrx1","wydjrx3"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydjrx4","hit":false,"valueSize":0,"l1CacheGetDurationNs":452900,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydjrx4","cacheKey":"data:wydjrx4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":246200},{"geohashId":"wydjrx6","cacheKey":"data:wydjrx6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":269300},{"geohashId":"wydjrx7","cacheKey":"data:wydjrx7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":289100},{"geohashId":"wydjrx5","cacheKey":"data:wydjrx5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":257300},{"geohashId":"wydjrwg","cacheKey":"data:wydjrwg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":272200},{"geohashId":"wydjrwf","cacheKey":"data:wydjrwf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":292800},{"geohashId":"wydjrwc","cacheKey":"data:wydjrwc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":264900},{"geohashId":"wydjrx1","cacheKey":"data:wydjrx1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":263200},{"geohashId":"wydjrx3","cacheKey":"data:wydjrx3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":223100}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2477300,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:22:10.528 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:10.528984600Z","nanoTime":26116543280900,"traceId":"9d3e5d65","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:22:10.528 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:22:10.528 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:22:10.533 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 55건
2025-11-21 19:22:10.536 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:22:10.536 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:22:10.537 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:10.536454900Z","nanoTime":26116551189000,"traceId":"9d3e5d65","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":7908100,"duration_ms":7,"resultData":{"inputCctvMissGrids":["wydjrx4","wydjrx6","wydjrx7","wydjrx5","wydjrwg","wydjrwf","wydjrwc","wydjrx1","wydjrx3"],"cctvQueryResult":{"queryGeohashIds":["wydjrx4","wydjrx6","wydjrx7","wydjrx5","wydjrwg","wydjrwf","wydjrwc","wydjrx1","wydjrx3"],"totalRowsReturned":55,"rowsPerGrid":{"wydjrx1":7,"wydjrx5":11,"wydjrx4":5,"wydjrx3":2,"wydjrwg":13,"wydjrwf":6,"wydjrx7":8,"wydjrx6":3},"queryExecutionTimeNs":5200500,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydjrx1","cacheKey":"data:wydjrx1:cctv","dataCount":7,"dataSize":880,"errorMessage":null,"success":true},{"geohashId":"wydjrx5","cacheKey":"data:wydjrx5:cctv","dataCount":11,"dataSize":1387,"errorMessage":null,"success":true},{"geohashId":"wydjrx4","cacheKey":"data:wydjrx4:cctv","dataCount":5,"dataSize":630,"errorMessage":null,"success":true},{"geohashId":"wydjrx3","cacheKey":"data:wydjrx3:cctv","dataCount":2,"dataSize":257,"errorMessage":null,"success":true},{"geohashId":"wydjrwg","cacheKey":"data:wydjrwg:cctv","dataCount":13,"dataSize":1671,"errorMessage":null,"success":true},{"geohashId":"wydjrwf","cacheKey":"data:wydjrwf:cctv","dataCount":6,"dataSize":765,"errorMessage":null,"success":true},{"geohashId":"wydjrx7","cacheKey":"data:wydjrx7:cctv","dataCount":8,"dataSize":1033,"errorMessage":null,"success":true},{"geohashId":"wydjrx6","cacheKey":"data:wydjrx6:cctv","dataCount":3,"dataSize":381,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:22:10.537 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:10.537455400Z","nanoTime":26116551366900,"traceId":"9d3e5d65","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:22:10.537 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:22:10.537 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5245, 126.896)
2025-11-21 19:22:10.537 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:22:10.618 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:22:10.618 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:22:10.619 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:22:11.665 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:22:11.665 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:22:11.665 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 영등포구
2025-11-21 19:22:11.669 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 영등포구
2025-11-21 19:22:11.669 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:22:11.669 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:22:11.669 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:22:11.669 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.721231491
2025-11-21 19:22:11.669 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:11.669034300Z","nanoTime":26117683304700,"traceId":"9d3e5d65","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":1131937800,"duration_ms":1131,"resultData":{"latitude":37.5245,"longitude":126.896,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":1131815900,"addressApiResult":{"cached":false,"cacheKey":"address:37.5245:126.896","roadAddress":"서울특별시 영등포구 양산로 111","jibunAddress":"서울 영등포구 당산동3가 370-4","responseSize":75,"executionTimeNs":81911500,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:영등포구","guName":"영등포구","arrestRate":0.721231491,"dataFound":true,"executionTimeNs":3760400,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5245:126.896:500","categoryCount":15,"placesByCategory":{"CT1":3,"AT4":0,"CS2":15,"SC4":0,"MT1":4,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":5,"FD6":15,"PK6":15,"OL7":0,"PM9":11},"totalPlaces":130,"responseSize":15121,"executionTimeNs":1046144000,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:22:11.669 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:11.669034300Z","nanoTime":26117683498000,"traceId":"9d3e5d65","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:22:11.669 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:22:11.669 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:22:11.669 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 55개
2025-11-21 19:22:11.669 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 55개 (총 카메라 대수: 55대)
2025-11-21 19:22:11.669 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:22:11.734 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구  여의공원로 120 여의도지구대 (거리: 591m)
2025-11-21 19:22:11.735 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:22:11.735 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:22:11.735 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 12개 카테고리
2025-11-21 19:22:11.735 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:22:11.735 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:11.735031400Z","nanoTime":26117749083000,"traceId":"9d3e5d65","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":65585000,"duration_ms":65,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":55,"totalCctvAfterFilter":55,"totalCameraCount":55,"filterRate":1.0,"filterExecutionTimeNs":27500,"success":true},"policeQuery":{"queryDurationNs":65065400,"found":true,"nearestAddress":"서울특별시 영등포구  여의공원로 120 여의도지구대","nearestDistance":591.2514435977744,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":3,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SW8":2,"PO3":5,"FD6":15,"PK6":15,"MT1":4,"PM9":11},"placesAfterFilter":{"CT1":3,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SW8":2,"PO3":5,"FD6":15,"PK6":15,"MT1":4,"PM9":11},"totalBeforeFilter":130,"totalAfterFilter":130,"filterRate":1.0,"filterExecutionTimeNs":123100,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:22:11.735 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:11.735031400Z","nanoTime":26117749316600,"traceId":"9d3e5d65","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:22:11.735 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:22:11.735 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 69.47, 편의성: 44.90, 종합: 57.18
2025-11-21 19:22:11.735 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:11.735031400Z","nanoTime":26117749635700,"traceId":"9d3e5d65","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":319100,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":26.093569550278207,"policeDistance":591.2514435977744,"cctvScore":100.0,"cctvCount":55,"arrestRateScore":72.12314909999999,"arrestRate":0.721231491,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":69.46501559508346,"success":true},"convenienceScore":{"categoryScores":{"CT1":12.0,"BK9":75.0,"HP8":100.0,"CS2":3.7766917690779582,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":15.0,"FD6":15.0,"PK6":45.0,"MT1":40.0,"PM9":88.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"영등포구","guPopulation":397173,"finalScore":44.898057647423165,"success":true},"overallScore":57.181536621253315,"errorMessage":null,"success":true}}
2025-11-21 19:22:11.736 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:11.736029600Z","nanoTime":26117749899600,"traceId":"9d3e5d65","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:22:11.736 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:22:11.736 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구  여의공원로 120 여의도지구대, latitude=37.522721, longitude=126.889682, geohashId=wydjrqy)
2025-11-21 19:22:11.736 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 591.2514435977744
2025-11-21 19:22:11.737 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydjrx4
2025-11-21 19:22:11.737 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:22:11.737 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:11.737041400Z","nanoTime":26117751216300,"traceId":"9d3e5d65","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1316700,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 15m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydjrx4","dataSize":21713,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":21713,"errorMessage":null,"success":true}}
2025-11-21 19:22:11.737 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:22:14.710 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:22:14.710 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5048, longitude=127.0491, radius=500)
2025-11-21 19:22:14.710 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:22:14.710 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5048, longitude=127.0491, radius=500
2025-11-21 19:22:14.710 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:14.710663400Z","nanoTime":26120724885200,"traceId":"7aa00089","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:22:14.710 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:22:14.710 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5048, lon=127.0491
2025-11-21 19:22:14.710 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:14.710663400Z","nanoTime":26120724963900,"traceId":"7aa00089","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:22:14.710 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:14.710663400Z","nanoTime":26120725021700,"traceId":"7aa00089","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":57800,"duration_ms":0,"resultData":{"latitude":37.5048,"longitude":127.0491,"precision":7,"centerHash":"wydm75d","adjacentHashes":["wydm75d","wydm75f","wydm75g","wydm75e","wydm757","wydm756","wydm753","wydm759","wydm75c"],"errorMessage":null,"success":true}}
2025-11-21 19:22:14.710 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm75d, wydm75f, wydm75g, wydm75e, wydm757, wydm756, wydm753, wydm759, wydm75c]
2025-11-21 19:22:14.710 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm75d
2025-11-21 19:22:14.710 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:14.710663400Z","nanoTime":26120725251200,"traceId":"7aa00089","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":366000,"duration_ms":0,"resultData":{"requestLatitude":37.5048,"requestLongitude":127.0491,"requestRadius":500,"centerGeohashId":"wydm75d","nineBlockGeohashes":["wydm75d","wydm75f","wydm75g","wydm75e","wydm757","wydm756","wydm753","wydm759","wydm75c"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:22:14.710 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:14.710663400Z","nanoTime":26120725370800,"traceId":"7aa00089","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:22:14.710 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:22:14.710 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm75d
2025-11-21 19:22:14.711 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4213ms)
2025-11-21 19:22:14.711 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:22:14.712 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:22:14.712 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:22:14.712 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.1468ms, 역직렬화: 0.0ms
2025-11-21 19:22:14.712 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:22:14.712 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:14.712663400Z","nanoTime":26120727160900,"traceId":"7aa00089","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1790100,"duration_ms":1,"resultData":{"centerGeohashId":"wydm75d","nineBlockGeohashes":["wydm75d","wydm75f","wydm75g","wydm75e","wydm757","wydm756","wydm753","wydm759","wydm75c"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm75d","hit":false,"valueSize":0,"l1CacheGetDurationNs":421300,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm75d","cacheKey":"data:wydm75d:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":234300},{"geohashId":"wydm75f","cacheKey":"data:wydm75f:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":126600},{"geohashId":"wydm75g","cacheKey":"data:wydm75g:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":116000},{"geohashId":"wydm75e","cacheKey":"data:wydm75e:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":106100},{"geohashId":"wydm757","cacheKey":"data:wydm757:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":98600},{"geohashId":"wydm756","cacheKey":"data:wydm756:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":105600},{"geohashId":"wydm753","cacheKey":"data:wydm753:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":104400},{"geohashId":"wydm759","cacheKey":"data:wydm759:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":102500},{"geohashId":"wydm75c","cacheKey":"data:wydm75c:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":102100}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1146800,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:22:14.712 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:14.712663400Z","nanoTime":26120727310100,"traceId":"7aa00089","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:22:14.712 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:22:14.712 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:22:14.716 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 31건
2025-11-21 19:22:14.718 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:22:14.719 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 7개
2025-11-21 19:22:14.719 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:14.719663800Z","nanoTime":26120733446900,"traceId":"7aa00089","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6136800,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydm75d","wydm75f","wydm75g","wydm75e","wydm757","wydm756","wydm753","wydm759","wydm75c"],"cctvQueryResult":{"queryGeohashIds":["wydm75d","wydm75f","wydm75g","wydm75e","wydm757","wydm756","wydm753","wydm759","wydm75c"],"totalRowsReturned":31,"rowsPerGrid":{"wydm759":3,"wydm75d":3,"wydm753":3,"wydm757":3,"wydm75g":8,"wydm75f":5,"wydm75e":6},"queryExecutionTimeNs":3781700,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm759","cacheKey":"data:wydm759:cctv","dataCount":3,"dataSize":412,"errorMessage":null,"success":true},{"geohashId":"wydm75d","cacheKey":"data:wydm75d:cctv","dataCount":3,"dataSize":412,"errorMessage":null,"success":true},{"geohashId":"wydm753","cacheKey":"data:wydm753:cctv","dataCount":3,"dataSize":412,"errorMessage":null,"success":true},{"geohashId":"wydm757","cacheKey":"data:wydm757:cctv","dataCount":3,"dataSize":406,"errorMessage":null,"success":true},{"geohashId":"wydm75g","cacheKey":"data:wydm75g:cctv","dataCount":8,"dataSize":1093,"errorMessage":null,"success":true},{"geohashId":"wydm75f","cacheKey":"data:wydm75f:cctv","dataCount":5,"dataSize":679,"errorMessage":null,"success":true},{"geohashId":"wydm75e","cacheKey":"data:wydm75e:cctv","dataCount":6,"dataSize":823,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:22:14.719 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:14.719663800Z","nanoTime":26120733657700,"traceId":"7aa00089","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:22:14.719 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:22:14.719 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5048, 127.0491)
2025-11-21 19:22:14.719 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:22:14.810 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:22:14.810 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:22:14.811 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:22:15.890 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:22:15.890 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:22:15.890 [http-nio-8185-exec-7] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:22:15.890 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:22:15.890 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:22:15.890 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:22:15.890 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:22:15.890 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:15.890045Z","nanoTime":26121904234500,"traceId":"7aa00089","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":1170576800,"duration_ms":1170,"resultData":{"latitude":37.5048,"longitude":127.0491,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":1170441000,"addressApiResult":{"cached":false,"cacheKey":"address:37.5048:127.0491","roadAddress":"주소 없음","jibunAddress":"서울 강남구 삼성동 172-66","responseSize":60,"executionTimeNs":91523400,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":36200,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5048:127.0491:500","categoryCount":15,"placesByCategory":{"CT1":5,"AT4":0,"CS2":15,"SC4":3,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":0,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":130,"responseSize":15054,"executionTimeNs":1078881400,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:22:15.890 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:15.890045Z","nanoTime":26121904473000,"traceId":"7aa00089","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:22:15.890 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:22:15.890 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:22:15.890 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 31개
2025-11-21 19:22:15.890 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 31개 (총 카메라 대수: 105대)
2025-11-21 19:22:15.890 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:22:15.955 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 은평구  통일로 737 (거리: 611m)
2025-11-21 19:22:15.955 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:22:15.955 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:22:15.956 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 11개 카테고리
2025-11-21 19:22:15.956 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:22:15.956 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:15.956048600Z","nanoTime":26121969858400,"traceId":"7aa00089","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":65385400,"duration_ms":65,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":31,"totalCctvAfterFilter":31,"totalCameraCount":105,"filterRate":1.0,"filterExecutionTimeNs":19500,"success":true},"policeQuery":{"queryDurationNs":64941700,"found":true,"nearestAddress":"서울특별시 은평구  통일로 737","nearestDistance":611.435347972041,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":5,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SC4":3,"SW8":2,"FD6":15,"PK6":15,"PM9":15},"placesAfterFilter":{"CT1":5,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SC4":3,"SW8":2,"FD6":15,"PK6":15,"PM9":15},"totalBeforeFilter":130,"totalAfterFilter":130,"filterRate":1.0,"filterExecutionTimeNs":109800,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:22:15.956 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:15.956048600Z","nanoTime":26121970064100,"traceId":"7aa00089","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:22:15.956 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:22:15.956 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 47.07, 편의성: 46.34, 종합: 46.71
2025-11-21 19:22:15.956 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:15.956048600Z","nanoTime":26121970325700,"traceId":"7aa00089","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":261600,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":23.57058150349488,"policeDistance":611.435347972041,"cctvScore":100.0,"cctvCount":31,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":47.07117445104846,"success":true},"convenienceScore":{"categoryScores":{"CT1":20.0,"BK9":75.0,"HP8":100.0,"CS2":3.75,"AC5":15.0,"CE7":30.0,"SC4":6.0,"SW8":100.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":46.34090909090909,"success":true},"overallScore":46.70604177097878,"errorMessage":null,"success":true}}
2025-11-21 19:22:15.956 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:15.956048600Z","nanoTime":26121970472600,"traceId":"7aa00089","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:22:15.956 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:22:15.956 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 은평구  통일로 737, latitude=37.501333, longitude=127.04372, geohashId=wydm6fy)
2025-11-21 19:22:15.956 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 611.435347972041
2025-11-21 19:22:15.957 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm75d
2025-11-21 19:22:15.957 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:22:15.957 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:15.957048400Z","nanoTime":26121971644800,"traceId":"7aa00089","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1172200,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["병원이(가) 19m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm75d","dataSize":19645,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19645,"errorMessage":null,"success":true}}
2025-11-21 19:22:15.957 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:22:18.633 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:22:18.633 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.4854, longitude=126.9013, radius=500)
2025-11-21 19:22:18.633 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:22:18.633 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.4854, longitude=126.9013, radius=500
2025-11-21 19:22:18.633 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:18.633319700Z","nanoTime":26124647922300,"traceId":"b7201ab3","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:22:18.633 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:22:18.633 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.4854, lon=126.9013
2025-11-21 19:22:18.633 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:18.633319700Z","nanoTime":26124647996800,"traceId":"b7201ab3","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:22:18.634 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:18.633319700Z","nanoTime":26124648046200,"traceId":"b7201ab3","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":49400,"duration_ms":0,"resultData":{"latitude":37.4854,"longitude":126.9013,"precision":7,"centerHash":"wydjr8n","adjacentHashes":["wydjr8n","wydjr8q","wydjr8r","wydjr8p","wydjpxz","wydjpxy","wydjpxv","wydjr8j","wydjr8m"],"errorMessage":null,"success":true}}
2025-11-21 19:22:18.634 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydjr8n, wydjr8q, wydjr8r, wydjr8p, wydjpxz, wydjpxy, wydjpxv, wydjr8j, wydjr8m]
2025-11-21 19:22:18.634 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydjr8n
2025-11-21 19:22:18.634 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:18.634318300Z","nanoTime":26124648202000,"traceId":"b7201ab3","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":279700,"duration_ms":0,"resultData":{"requestLatitude":37.4854,"requestLongitude":126.9013,"requestRadius":500,"centerGeohashId":"wydjr8n","nineBlockGeohashes":["wydjr8n","wydjr8q","wydjr8r","wydjr8p","wydjpxz","wydjpxy","wydjpxv","wydjr8j","wydjr8m"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:22:18.634 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:18.634318300Z","nanoTime":26124648300000,"traceId":"b7201ab3","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:22:18.634 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:22:18.634 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydjr8n
2025-11-21 19:22:18.634 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4145ms)
2025-11-21 19:22:18.634 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:22:18.636 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:22:18.636 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:22:18.636 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.4ms, 역직렬화: 0.0ms
2025-11-21 19:22:18.636 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:22:18.636 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:18.636313400Z","nanoTime":26124650345900,"traceId":"b7201ab3","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2045900,"duration_ms":2,"resultData":{"centerGeohashId":"wydjr8n","nineBlockGeohashes":["wydjr8n","wydjr8q","wydjr8r","wydjr8p","wydjpxz","wydjpxy","wydjpxv","wydjr8j","wydjr8m"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydjr8n","hit":false,"valueSize":0,"l1CacheGetDurationNs":414500,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydjr8n","cacheKey":"data:wydjr8n:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":193900},{"geohashId":"wydjr8q","cacheKey":"data:wydjr8q:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":129000},{"geohashId":"wydjr8r","cacheKey":"data:wydjr8r:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":112800},{"geohashId":"wydjr8p","cacheKey":"data:wydjr8p:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":210400},{"geohashId":"wydjpxz","cacheKey":"data:wydjpxz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":174000},{"geohashId":"wydjpxy","cacheKey":"data:wydjpxy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":171100},{"geohashId":"wydjpxv","cacheKey":"data:wydjpxv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":120000},{"geohashId":"wydjr8j","cacheKey":"data:wydjr8j:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":110100},{"geohashId":"wydjr8m","cacheKey":"data:wydjr8m:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":113300}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1400000,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:22:18.636 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:18.636313400Z","nanoTime":26124650517700,"traceId":"b7201ab3","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:22:18.636 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:22:18.636 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:22:18.640 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 59건
2025-11-21 19:22:18.643 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:22:18.643 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:22:18.643 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:18.643311700Z","nanoTime":26124657739400,"traceId":"b7201ab3","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":7221700,"duration_ms":7,"resultData":{"inputCctvMissGrids":["wydjr8n","wydjr8q","wydjr8r","wydjr8p","wydjpxz","wydjpxy","wydjpxv","wydjr8j","wydjr8m"],"cctvQueryResult":{"queryGeohashIds":["wydjr8n","wydjr8q","wydjr8r","wydjr8p","wydjpxz","wydjpxy","wydjpxv","wydjr8j","wydjr8m"],"totalRowsReturned":59,"rowsPerGrid":{"wydjr8p":7,"wydjr8q":12,"wydjr8n":2,"wydjpxv":2,"wydjr8r":11,"wydjpxz":2,"wydjpxy":5,"wydjr8m":8,"wydjr8j":10},"queryExecutionTimeNs":4191600,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydjr8p","cacheKey":"data:wydjr8p:cctv","dataCount":7,"dataSize":987,"errorMessage":null,"success":true},{"geohashId":"wydjr8q","cacheKey":"data:wydjr8q:cctv","dataCount":12,"dataSize":1593,"errorMessage":null,"success":true},{"geohashId":"wydjr8n","cacheKey":"data:wydjr8n:cctv","dataCount":2,"dataSize":255,"errorMessage":null,"success":true},{"geohashId":"wydjpxv","cacheKey":"data:wydjpxv:cctv","dataCount":2,"dataSize":271,"errorMessage":null,"success":true},{"geohashId":"wydjr8r","cacheKey":"data:wydjr8r:cctv","dataCount":11,"dataSize":1489,"errorMessage":null,"success":true},{"geohashId":"wydjpxz","cacheKey":"data:wydjpxz:cctv","dataCount":2,"dataSize":272,"errorMessage":null,"success":true},{"geohashId":"wydjpxy","cacheKey":"data:wydjpxy:cctv","dataCount":5,"dataSize":685,"errorMessage":null,"success":true},{"geohashId":"wydjr8m","cacheKey":"data:wydjr8m:cctv","dataCount":8,"dataSize":1036,"errorMessage":null,"success":true},{"geohashId":"wydjr8j","cacheKey":"data:wydjr8j:cctv","dataCount":10,"dataSize":1360,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:22:18.643 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:18.643311700Z","nanoTime":26124657983800,"traceId":"b7201ab3","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:22:18.643 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:22:18.643 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.4854, 126.9013)
2025-11-21 19:22:18.644 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:22:18.751 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:22:18.751 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:22:18.752 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:22:20.014 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:22:20.014 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:22:20.014 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 구로구
2025-11-21 19:22:20.015 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 미스 - DB 조회
2025-11-21 19:22:20.019 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 성공 및 캐싱 완료 - 구로구: 0.704705259
2025-11-21 19:22:20.019 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:22:20.019 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:22:20.019 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:22:20.019 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.704705259
2025-11-21 19:22:20.019 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:20.019889600Z","nanoTime":26126033865000,"traceId":"b7201ab3","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":1375881200,"duration_ms":1375,"resultData":{"latitude":37.4854,"longitude":126.9013,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":1375724400,"addressApiResult":{"cached":false,"cacheKey":"address:37.4854:126.9013","roadAddress":"서울특별시 구로구 도림천로 477","jibunAddress":"서울 구로구 구로동 810-3","responseSize":72,"executionTimeNs":108179100,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":"arrest_rate:구로구","guName":"구로구","arrestRate":0.704705259,"dataFound":true,"executionTimeNs":4306800,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.4854:126.9013:500","categoryCount":15,"placesByCategory":{"CT1":3,"AT4":3,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":14},"totalPlaces":131,"responseSize":15332,"executionTimeNs":1263238500,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:22:20.019 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:20.019889600Z","nanoTime":26126034060000,"traceId":"b7201ab3","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:22:20.019 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:22:20.019 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:22:20.019 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 59개
2025-11-21 19:22:20.019 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 59개 (총 카메라 대수: 73대)
2025-11-21 19:22:20.019 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:22:20.083 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구  동작대로9길 35 (거리: 433m)
2025-11-21 19:22:20.083 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:22:20.083 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:22:20.084 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:22:20.084 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:22:20.084 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:20.084887900Z","nanoTime":26126098745100,"traceId":"b7201ab3","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":64685100,"duration_ms":64,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":59,"totalCctvAfterFilter":59,"totalCameraCount":73,"filterRate":1.0,"filterExecutionTimeNs":26800,"success":true},"policeQuery":{"queryDurationNs":64154500,"found":true,"nearestAddress":"서울특별시 동작구  동작대로9길 35","nearestDistance":432.65409157883056,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":3,"AT4":3,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":14},"placesAfterFilter":{"CT1":3,"AT4":3,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":14},"totalBeforeFilter":131,"totalAfterFilter":131,"filterRate":1.0,"filterExecutionTimeNs":160300,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:22:20.084 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:20.084887900Z","nanoTime":26126098913500,"traceId":"b7201ab3","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:22:20.084 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:22:20.084 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 74.92, 편의성: 35.18, 종합: 55.05
2025-11-21 19:22:20.084 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:20.084887900Z","nanoTime":26126099117900,"traceId":"b7201ab3","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":204400,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":45.91823855264618,"policeDistance":432.65409157883056,"cctvScore":100.0,"cctvCount":59,"arrestRateScore":70.4705259,"arrestRate":0.704705259,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":74.91662933579386,"success":true},"convenienceScore":{"categoryScores":{"CT1":12.0,"AT4":9.0,"CS2":3.6415191446799833,"SC4":2.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":6.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"구로구","guPopulation":411916,"finalScore":35.176101276312,"success":true},"overallScore":55.04636530605293,"errorMessage":null,"success":true}}
2025-11-21 19:22:20.084 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:20.084887900Z","nanoTime":26126099257400,"traceId":"b7201ab3","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:22:20.084 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:22:20.084 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구  동작대로9길 35, latitude=37.486642, longitude=126.905947, geohashId=wydjrb4)
2025-11-21 19:22:20.084 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 432.65409157883056
2025-11-21 19:22:20.086 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydjr8n
2025-11-21 19:22:20.086 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:22:20.086 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:22:20.086889700Z","nanoTime":26126100804600,"traceId":"b7201ab3","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1547200,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["지하철역이(가) 22m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydjr8n","dataSize":23586,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":23586,"errorMessage":null,"success":true}}
2025-11-21 19:22:20.086 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:22:37.511 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-21 19:22:37.513 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-21 19:22:37.521 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
