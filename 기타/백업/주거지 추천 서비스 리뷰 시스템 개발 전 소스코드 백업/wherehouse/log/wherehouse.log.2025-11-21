2025-11-21 19:40:40.649 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-11-21 19:40:40.689 [main] INFO  c.wherehouse.WherehouseApplication - Starting WherehouseApplication using Java 17.0.11 with PID 3480 (E:\devSpace\SpringBootProjects\wherehouse_SpringBoot-master\wherehouse\build\classes\java\main started by wjdqj in E:\devSpace\SpringBootProjects\wherehouse_SpringBoot-master\wherehouse)
2025-11-21 19:40:40.690 [main] INFO  c.wherehouse.WherehouseApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-21 19:40:41.436 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-21 19:40:41.439 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2025-11-21 19:40:41.477 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.BoardEntityRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:40:41.478 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.CommentEntityRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:40:41.479 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.ArrestRateRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:40:41.480 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.CctvGeoRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:40:41.480 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.PoliceOfficeGeoRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:40:41.481 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.JWT.Repository.UserEntityRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:40:41.482 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.members.dao.MemberEntityRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:40:41.483 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisCrimeRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:40:41.484 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisEntertainmentRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:40:41.485 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisPopulationDensityRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:40:41.485 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.restapi.mapdata.dao.MapDataEntityRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:40:41.486 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 43 ms. Found 0 Elasticsearch repository interfaces.
2025-11-21 19:40:41.490 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-21 19:40:41.490 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2025-11-21 19:40:41.501 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.BoardEntityRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:40:41.502 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.CommentEntityRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:40:41.502 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.ArrestRateRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:40:41.502 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.CctvGeoRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:40:41.502 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.PoliceOfficeGeoRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:40:41.502 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.JWT.Repository.UserEntityRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:40:41.502 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.members.dao.MemberEntityRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:40:41.502 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisCrimeRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:40:41.503 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisEntertainmentRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:40:41.503 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisPopulationDensityRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:40:41.503 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.restapi.mapdata.dao.MapDataEntityRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:40:41.503 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 0 Reactive Elasticsearch repository interfaces.
2025-11-21 19:40:41.520 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-21 19:40:41.520 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-11-21 19:40:41.533 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.BoardEntityRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:40:41.533 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.CommentEntityRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:40:41.534 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.ArrestRateRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:40:41.534 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.CctvGeoRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:40:41.534 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.PoliceOfficeGeoRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:40:41.534 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.JWT.Repository.UserEntityRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:40:41.534 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.members.dao.MemberEntityRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:40:41.534 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisCrimeRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:40:41.535 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisEntertainmentRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:40:41.535 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisPopulationDensityRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:40:41.535 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.restapi.mapdata.dao.MapDataEntityRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:40:41.535 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 0 JDBC repository interfaces.
2025-11-21 19:40:41.542 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-21 19:40:41.543 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-21 19:40:41.659 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 114 ms. Found 11 JPA repository interfaces.
2025-11-21 19:40:41.677 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-21 19:40:41.678 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-21 19:40:41.701 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.BoardEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:40:41.701 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.CommentEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:40:41.701 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.ArrestRateRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:40:41.701 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.CctvGeoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:40:41.701 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.PoliceOfficeGeoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:40:41.702 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.JWT.Repository.UserEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:40:41.702 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.members.dao.MemberEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:40:41.702 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisCrimeRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:40:41.702 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisEntertainmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:40:41.702 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisPopulationDensityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:40:41.702 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.restapi.mapdata.dao.MapDataEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:40:41.702 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 16 ms. Found 0 Redis repository interfaces.
2025-11-21 19:40:42.201 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8185 (http)
2025-11-21 19:40:42.208 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8185"]
2025-11-21 19:40:42.212 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-21 19:40:42.212 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.31]
2025-11-21 19:40:42.361 [main] INFO  o.apache.jasper.servlet.TldScanner - At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.
2025-11-21 19:40:42.366 [main] INFO  o.a.c.c.C.[.[.[/wherehouse] - Initializing Spring embedded WebApplicationContext
2025-11-21 19:40:42.366 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1634 ms
2025-11-21 19:40:42.510 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-21 19:40:42.549 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-11-21 19:40:42.574 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-21 19:40:42.788 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-21 19:40:42.807 [main] WARN  com.zaxxer.hikari.HikariConfig - HikariPool-1 - idleTimeout has been set but has no effect because the pool is operating as a fixed size pool.
2025-11-21 19:40:42.808 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-21 19:40:42.973 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection oracle.jdbc.driver.T4CConnection@2d8087da
2025-11-21 19:40:42.974 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-21 19:40:43.059 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: OracleDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-21 19:40:44.099 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-21 19:40:44.101 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-21 19:40:44.253 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-21 19:40:45.200 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name userAuthenticationProvider
2025-11-21 19:40:45.200 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-11-21 19:40:45.894 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8185"]
2025-11-21 19:40:45.909 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8185 (http) with context path '/wherehouse'
2025-11-21 19:40:45.921 [main] INFO  c.wherehouse.WherehouseApplication - Started WherehouseApplication in 5.673 seconds (process running for 6.227)
2025-11-21 19:42:10.654 [http-nio-8185-exec-2] INFO  o.a.c.c.C.[.[.[/wherehouse] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-21 19:42:10.654 [http-nio-8185-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-21 19:42:10.656 [http-nio-8185-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-11-21 19:42:10.780 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:42:10.780 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.4979, longitude=127.0276, radius=500)
2025-11-21 19:42:10.780 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:42:10.780 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.4979, longitude=127.0276, radius=500
2025-11-21 19:42:10.788 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:10.783222100Z","nanoTime":27316796163400,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:42:10.789 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:42:10.789 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.4979, lon=127.0276
2025-11-21 19:42:10.791 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:10.790245900Z","nanoTime":27316804090800,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:42:10.808 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:10.793233300Z","nanoTime":27316807443400,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":3352600,"duration_ms":3,"resultData":{"latitude":37.4979,"longitude":127.0276,"precision":7,"centerHash":"wydm6d6","adjacentHashes":["wydm6d6","wydm6dd","wydm6de","wydm6d7","wydm6d5","wydm6d4","wydm6d1","wydm6d3","wydm6d9"],"errorMessage":null,"success":true}}
2025-11-21 19:42:10.808 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm6d6, wydm6dd, wydm6de, wydm6d7, wydm6d5, wydm6d4, wydm6d1, wydm6d3, wydm6d9]
2025-11-21 19:42:10.808 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm6d6
2025-11-21 19:42:10.810 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:10.808223Z","nanoTime":27316822758400,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":26595000,"duration_ms":26,"resultData":{"requestLatitude":37.4979,"requestLongitude":127.0276,"requestRadius":500,"centerGeohashId":"wydm6d6","nineBlockGeohashes":["wydm6d6","wydm6dd","wydm6de","wydm6d7","wydm6d5","wydm6d4","wydm6d1","wydm6d3","wydm6d9"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:42:10.810 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:10.810219400Z","nanoTime":27316824203300,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:42:10.811 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:42:10.811 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm6d6
2025-11-21 19:42:11.138 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 326.0818ms)
2025-11-21 19:42:11.139 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:42:11.155 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:42:11.155 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:42:11.155 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 16.0942ms, 역직렬화: 0.0ms
2025-11-21 19:42:11.155 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:42:11.160 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:11.155212900Z","nanoTime":27317169668100,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":345464800,"duration_ms":345,"resultData":{"centerGeohashId":"wydm6d6","nineBlockGeohashes":["wydm6d6","wydm6dd","wydm6de","wydm6d7","wydm6d5","wydm6d4","wydm6d1","wydm6d3","wydm6d9"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm6d6","hit":false,"valueSize":0,"l1CacheGetDurationNs":326081800,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm6d6","cacheKey":"data:wydm6d6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":698600},{"geohashId":"wydm6dd","cacheKey":"data:wydm6dd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":899400},{"geohashId":"wydm6de","cacheKey":"data:wydm6de:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":756400},{"geohashId":"wydm6d7","cacheKey":"data:wydm6d7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":412400},{"geohashId":"wydm6d5","cacheKey":"data:wydm6d5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":429400},{"geohashId":"wydm6d4","cacheKey":"data:wydm6d4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":410000},{"geohashId":"wydm6d1","cacheKey":"data:wydm6d1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":426400},{"geohashId":"wydm6d3","cacheKey":"data:wydm6d3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":295000},{"geohashId":"wydm6d9","cacheKey":"data:wydm6d9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":241700}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":16094200,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:42:11.160 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:11.160213700Z","nanoTime":27317174647400,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:42:11.160 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:42:11.162 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:42:11.299 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 50건
2025-11-21 19:42:11.314 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:42:11.315 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 6개
2025-11-21 19:42:11.320 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:11.315030400Z","nanoTime":27317329106700,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":154459300,"duration_ms":154,"resultData":{"inputCctvMissGrids":["wydm6d6","wydm6dd","wydm6de","wydm6d7","wydm6d5","wydm6d4","wydm6d1","wydm6d3","wydm6d9"],"cctvQueryResult":{"queryGeohashIds":["wydm6d6","wydm6dd","wydm6de","wydm6d7","wydm6d5","wydm6d4","wydm6d1","wydm6d3","wydm6d9"],"totalRowsReturned":50,"rowsPerGrid":{"wydm6d9":20,"wydm6d4":5,"wydm6dd":16,"wydm6d3":2,"wydm6d1":3,"wydm6d6":4},"queryExecutionTimeNs":135615500,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm6d9","cacheKey":"data:wydm6d9:cctv","dataCount":20,"dataSize":2782,"errorMessage":null,"success":true},{"geohashId":"wydm6d4","cacheKey":"data:wydm6d4:cctv","dataCount":5,"dataSize":700,"errorMessage":null,"success":true},{"geohashId":"wydm6dd","cacheKey":"data:wydm6dd:cctv","dataCount":16,"dataSize":2182,"errorMessage":null,"success":true},{"geohashId":"wydm6d3","cacheKey":"data:wydm6d3:cctv","dataCount":2,"dataSize":278,"errorMessage":null,"success":true},{"geohashId":"wydm6d1","cacheKey":"data:wydm6d1:cctv","dataCount":3,"dataSize":421,"errorMessage":null,"success":true},{"geohashId":"wydm6d6","cacheKey":"data:wydm6d6:cctv","dataCount":4,"dataSize":557,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:42:11.320 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:11.320030400Z","nanoTime":27317334282600,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:42:11.320 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:42:11.322 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.4979, 127.0276)
2025-11-21 19:42:11.323 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:42:11.885 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:42:11.887 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:42:11.889 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:42:11.889 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.4979, 127.0276), 반경: 500m
2025-11-21 19:42:12.077 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:42:12.078 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 141건
2025-11-21 19:42:12.085 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:42:12.086 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:42:12.086 [http-nio-8185-exec-2] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:42:12.086 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:42:12.086 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:42:12.086 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:42:12.086 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:42:12.092 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:12.086251200Z","nanoTime":27318100712500,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":766429900,"duration_ms":766,"resultData":{"latitude":37.4979,"longitude":127.0276,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":762944100,"addressApiResult":{"cached":false,"cacheKey":"address:37.4979:127.0276","roadAddress":"주소 없음","jibunAddress":"서울 서초구 서초동 1373","responseSize":58,"executionTimeNs":564273300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":208700,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.4979:127.0276:500","categoryCount":15,"placesByCategory":{"CT1":12,"AT4":4,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":1,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":141,"responseSize":16415,"executionTimeNs":198462100,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:12.092 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:12.092230800Z","nanoTime":27318106808200,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:42:12.092 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:42:12.093 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:42:12.094 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 50개
2025-11-21 19:42:12.094 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 50개 (총 카메라 대수: 65대)
2025-11-21 19:42:12.095 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:42:12.227 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 구로구  고척로1길 34 오류지구대 (거리: 1161m)
2025-11-21 19:42:12.227 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:42:12.228 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:42:12.229 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:42:12.229 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:42:12.232 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:12.229230700Z","nanoTime":27318243323300,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":136515100,"duration_ms":136,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":50,"totalCctvAfterFilter":50,"totalCameraCount":65,"filterRate":1.0,"filterExecutionTimeNs":115100,"success":true},"policeQuery":{"queryDurationNs":131249000,"found":true,"nearestAddress":"서울특별시 구로구  고척로1길 34 오류지구대","nearestDistance":1160.5521098113045,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":12,"AT4":4,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":1,"FD6":15,"PK6":15,"PM9":15},"placesAfterFilter":{"CT1":12,"AT4":4,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":1,"FD6":15,"PK6":15,"PM9":15},"totalBeforeFilter":141,"totalAfterFilter":141,"filterRate":1.0,"filterExecutionTimeNs":579800,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:12.232 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:12.232233500Z","nanoTime":27318246880100,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:42:12.233 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:42:12.235 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 40.00, 편의성: 39.91, 종합: 39.96
2025-11-21 19:42:12.239 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:12.235233600Z","nanoTime":27318249714900,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":2834800,"duration_ms":2,"resultData":{"safetyScore":{"policeDistanceScore":0.0,"policeDistance":1160.5521098113045,"cctvScore":100.0,"cctvCount":50,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":40.0,"success":true},"convenienceScore":{"categoryScores":{"CT1":48.0,"AT4":12.0,"CS2":3.75,"SC4":2.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":3.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":39.910714285714285,"success":true},"overallScore":39.95535714285714,"errorMessage":null,"success":true}}
2025-11-21 19:42:12.239 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:12.239379400Z","nanoTime":27318253615600,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:42:12.239 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:42:12.241 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 구로구  고척로1길 34 오류지구대, latitude=37.487521, longitude=127.028986, geohashId=wydm687)
2025-11-21 19:42:12.242 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 1160.5521098113045
2025-11-21 19:42:12.258 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm6d6
2025-11-21 19:42:12.258 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:42:12.259 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:12.258385400Z","nanoTime":27318272470700,"traceId":"e5748c59","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":18855100,"duration_ms":18,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["지하철역이(가) 41m 내에 있습니다."],"warnings":["가장 가까운 파출소가 1km 이상 떨어져 있습니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm6d6","dataSize":23775,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":23775,"errorMessage":null,"success":true}}
2025-11-21 19:42:12.259 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:42:18.250 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:42:18.251 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5547, longitude=126.9707, radius=500)
2025-11-21 19:42:18.251 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:42:18.251 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5547, longitude=126.9707, radius=500
2025-11-21 19:42:18.251 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.251485700Z","nanoTime":27324265593000,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:42:18.251 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:42:18.251 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5547, lon=126.9707
2025-11-21 19:42:18.251 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.251485700Z","nanoTime":27324265833900,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:42:18.251 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.251485700Z","nanoTime":27324266009100,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":175200,"duration_ms":0,"resultData":{"latitude":37.5547,"longitude":126.9707,"precision":7,"centerHash":"wydm9k9","adjacentHashes":["wydm9k9","wydm9kc","wydm9kf","wydm9kd","wydm9k6","wydm9k3","wydm9k2","wydm9k8","wydm9kb"],"errorMessage":null,"success":true}}
2025-11-21 19:42:18.252 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9k9, wydm9kc, wydm9kf, wydm9kd, wydm9k6, wydm9k3, wydm9k2, wydm9k8, wydm9kb]
2025-11-21 19:42:18.252 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9k9
2025-11-21 19:42:18.252 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.252470600Z","nanoTime":27324266370300,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":777300,"duration_ms":0,"resultData":{"requestLatitude":37.5547,"requestLongitude":126.9707,"requestRadius":500,"centerGeohashId":"wydm9k9","nineBlockGeohashes":["wydm9k9","wydm9kc","wydm9kf","wydm9kd","wydm9k6","wydm9k3","wydm9k2","wydm9k8","wydm9kb"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:42:18.252 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.252470600Z","nanoTime":27324266571500,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:42:18.252 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:42:18.252 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9k9
2025-11-21 19:42:18.253 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.714ms)
2025-11-21 19:42:18.253 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:42:18.256 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:42:18.256 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:42:18.256 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.9122ms, 역직렬화: 0.0ms
2025-11-21 19:42:18.257 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:42:18.258 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.257037900Z","nanoTime":27324270910100,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":4338600,"duration_ms":4,"resultData":{"centerGeohashId":"wydm9k9","nineBlockGeohashes":["wydm9k9","wydm9kc","wydm9kf","wydm9kd","wydm9k6","wydm9k3","wydm9k2","wydm9k8","wydm9kb"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9k9","hit":false,"valueSize":0,"l1CacheGetDurationNs":714000,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9k9","cacheKey":"data:wydm9k9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":382800},{"geohashId":"wydm9kc","cacheKey":"data:wydm9kc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":283200},{"geohashId":"wydm9kf","cacheKey":"data:wydm9kf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":386200},{"geohashId":"wydm9kd","cacheKey":"data:wydm9kd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":325400},{"geohashId":"wydm9k6","cacheKey":"data:wydm9k6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":435200},{"geohashId":"wydm9k3","cacheKey":"data:wydm9k3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":301100},{"geohashId":"wydm9k2","cacheKey":"data:wydm9k2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":260600},{"geohashId":"wydm9k8","cacheKey":"data:wydm9k8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":249100},{"geohashId":"wydm9kb","cacheKey":"data:wydm9kb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":200600}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2912200,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:42:18.258 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.258100600Z","nanoTime":27324272290200,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:42:18.258 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:42:18.258 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:42:18.263 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 2건
2025-11-21 19:42:18.265 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:42:18.265 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 1개
2025-11-21 19:42:18.265 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.265087Z","nanoTime":27324279048800,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6758600,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydm9k9","wydm9kc","wydm9kf","wydm9kd","wydm9k6","wydm9k3","wydm9k2","wydm9k8","wydm9kb"],"cctvQueryResult":{"queryGeohashIds":["wydm9k9","wydm9kc","wydm9kf","wydm9kd","wydm9k6","wydm9k3","wydm9k2","wydm9k8","wydm9kb"],"totalRowsReturned":2,"rowsPerGrid":{"wydm9kf":2},"queryExecutionTimeNs":5186700,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9kf","cacheKey":"data:wydm9kf:cctv","dataCount":2,"dataSize":260,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:42:18.265 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.265617500Z","nanoTime":27324279542600,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:42:18.265 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:42:18.265 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5547, 126.9707)
2025-11-21 19:42:18.266 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:42:18.358 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:42:18.358 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:42:18.358 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:42:18.358 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5547, 126.9707), 반경: 500m
2025-11-21 19:42:18.452 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:42:18.452 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 139건
2025-11-21 19:42:18.454 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:42:18.455 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:42:18.455 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 중구
2025-11-21 19:42:18.455 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 미스 - DB 조회
2025-11-21 19:42:18.472 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 성공 및 캐싱 완료 - 중구: 0.866910799
2025-11-21 19:42:18.472 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:42:18.472 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:42:18.472 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:42:18.472 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.866910799
2025-11-21 19:42:18.473 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.472736900Z","nanoTime":27324487286600,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":207744000,"duration_ms":207,"resultData":{"latitude":37.5547,"longitude":126.9707,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":207425000,"addressApiResult":{"cached":false,"cacheKey":"address:37.5547:126.9707","roadAddress":"서울특별시 중구 한강대로 405","jibunAddress":"서울 중구 봉래동2가 122-11","responseSize":73,"executionTimeNs":92771500,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":"arrest_rate:중구","guName":"중구","arrestRate":0.866910799,"dataFound":true,"executionTimeNs":17671700,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5547:126.9707:500","categoryCount":15,"placesByCategory":{"CT1":9,"AT4":1,"CS2":15,"SC4":1,"MT1":2,"BK9":15,"HP8":15,"AC5":13,"CE7":15,"SW8":5,"PO3":8,"FD6":15,"PK6":15,"OL7":2,"PM9":8},"totalPlaces":139,"responseSize":16203,"executionTimeNs":96981800,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:18.473 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.473745400Z","nanoTime":27324487853900,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:42:18.473 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:42:18.473 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:42:18.473 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 2개
2025-11-21 19:42:18.473 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 2개 (총 카메라 대수: 5대)
2025-11-21 19:42:18.473 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:42:18.543 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  다동길 11 (거리: 247m)
2025-11-21 19:42:18.543 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:42:18.543 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:42:18.543 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:42:18.543 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:42:18.544 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.543737600Z","nanoTime":27324558284100,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":70430200,"duration_ms":70,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":2,"totalCctvAfterFilter":2,"totalCameraCount":5,"filterRate":1.0,"filterExecutionTimeNs":8300,"success":true},"policeQuery":{"queryDurationNs":69527900,"found":true,"nearestAddress":"서울특별시 중구  다동길 11","nearestDistance":246.54394034384907,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":9,"AT4":1,"CS2":15,"SC4":1,"MT1":2,"BK9":15,"HP8":15,"AC5":13,"CE7":15,"SW8":5,"PO3":8,"FD6":15,"PK6":15,"OL7":2,"PM9":8},"placesAfterFilter":{"CT1":9,"AT4":1,"CS2":15,"SC4":1,"MT1":2,"BK9":15,"HP8":15,"AC5":13,"CE7":15,"SW8":5,"PO3":8,"FD6":15,"PK6":15,"OL7":2,"PM9":8},"totalBeforeFilter":139,"totalAfterFilter":139,"filterRate":1.0,"filterExecutionTimeNs":275200,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:18.544 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.544718300Z","nanoTime":27324558994000,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:42:18.544 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:42:18.545 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 49.43, 편의성: 36.56, 종합: 43.00
2025-11-21 19:42:18.545 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.545719500Z","nanoTime":27324559784300,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":790300,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":69.18200745701887,"policeDistance":246.54394034384907,"cctvScore":6.666666666666667,"cctvCount":2,"arrestRateScore":86.6910799,"arrestRate":0.866910799,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":49.42859287377233,"success":true},"convenienceScore":{"categoryScores":{"CT1":36.0,"AT4":3.0,"CS2":11.431706982486624,"SC4":2.0,"MT1":20.0,"BK9":75.0,"HP8":100.0,"AC5":13.0,"CE7":30.0,"SW8":100.0,"PO3":24.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":64.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"중구","guPopulation":131214,"finalScore":36.56211379883244,"success":true},"overallScore":42.99535333630239,"errorMessage":null,"success":true}}
2025-11-21 19:42:18.545 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.545719500Z","nanoTime":27324560214000,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:42:18.545 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:42:18.545 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  다동길 11, latitude=37.556808, longitude=126.971567, geohashId=wydm9m1)
2025-11-21 19:42:18.545 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 246.54394034384907
2025-11-21 19:42:18.547 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9k9
2025-11-21 19:42:18.548 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:42:18.548 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:18.548721800Z","nanoTime":27324562549800,"traceId":"09966b04","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":2335800,"duration_ms":2,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["카페이(가) 43m 내에 있습니다."],"warnings":["CCTV 설치 대수가 적은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm9k9","dataSize":17677,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17677,"errorMessage":null,"success":true}}
2025-11-21 19:42:18.548 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:42:28.198 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:42:28.198 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5572, longitude=126.9239, radius=500)
2025-11-21 19:42:28.198 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:42:28.198 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5572, longitude=126.9239, radius=500
2025-11-21 19:42:28.198 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.198289600Z","nanoTime":27334212691900,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:42:28.198 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:42:28.198 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5572, lon=126.9239
2025-11-21 19:42:28.198 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.198289600Z","nanoTime":27334212902400,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:42:28.199 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.199269600Z","nanoTime":27334213051800,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":149400,"duration_ms":0,"resultData":{"latitude":37.5572,"longitude":126.9239,"precision":7,"centerHash":"wydm8jp","adjacentHashes":["wydm8jp","wydm8jr","wydm8m2","wydm8m0","wydm8kb","wydm8hz","wydm8hy","wydm8jn","wydm8jq"],"errorMessage":null,"success":true}}
2025-11-21 19:42:28.199 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm8jp, wydm8jr, wydm8m2, wydm8m0, wydm8kb, wydm8hz, wydm8hy, wydm8jn, wydm8jq]
2025-11-21 19:42:28.199 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm8jp
2025-11-21 19:42:28.199 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.199269600Z","nanoTime":27334213308400,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":616500,"duration_ms":0,"resultData":{"requestLatitude":37.5572,"requestLongitude":126.9239,"requestRadius":500,"centerGeohashId":"wydm8jp","nineBlockGeohashes":["wydm8jp","wydm8jr","wydm8m2","wydm8m0","wydm8kb","wydm8hz","wydm8hy","wydm8jn","wydm8jq"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:42:28.199 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.199269600Z","nanoTime":27334213454500,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:42:28.199 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:42:28.199 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm8jp
2025-11-21 19:42:28.200 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5557ms)
2025-11-21 19:42:28.200 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:42:28.202 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:42:28.202 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:42:28.202 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.484ms, 역직렬화: 0.0ms
2025-11-21 19:42:28.202 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:42:28.203 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.202289100Z","nanoTime":27334216985000,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3530500,"duration_ms":3,"resultData":{"centerGeohashId":"wydm8jp","nineBlockGeohashes":["wydm8jp","wydm8jr","wydm8m2","wydm8m0","wydm8kb","wydm8hz","wydm8hy","wydm8jn","wydm8jq"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm8jp","hit":false,"valueSize":0,"l1CacheGetDurationNs":555700,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm8jp","cacheKey":"data:wydm8jp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":367600},{"geohashId":"wydm8jr","cacheKey":"data:wydm8jr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":303300},{"geohashId":"wydm8m2","cacheKey":"data:wydm8m2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":348900},{"geohashId":"wydm8m0","cacheKey":"data:wydm8m0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":217600},{"geohashId":"wydm8kb","cacheKey":"data:wydm8kb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":241300},{"geohashId":"wydm8hz","cacheKey":"data:wydm8hz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":245000},{"geohashId":"wydm8hy","cacheKey":"data:wydm8hy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":252300},{"geohashId":"wydm8jn","cacheKey":"data:wydm8jn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":220900},{"geohashId":"wydm8jq","cacheKey":"data:wydm8jq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":206100}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2484000,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:42:28.203 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.203273500Z","nanoTime":27334217642200,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:42:28.203 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:42:28.203 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:42:28.209 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 19건
2025-11-21 19:42:28.214 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:42:28.214 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:42:28.214 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.214270Z","nanoTime":27334228261800,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":10619600,"duration_ms":10,"resultData":{"inputCctvMissGrids":["wydm8jp","wydm8jr","wydm8m2","wydm8m0","wydm8kb","wydm8hz","wydm8hy","wydm8jn","wydm8jq"],"cctvQueryResult":{"queryGeohashIds":["wydm8jp","wydm8jr","wydm8m2","wydm8m0","wydm8kb","wydm8hz","wydm8hy","wydm8jn","wydm8jq"],"totalRowsReturned":19,"rowsPerGrid":{"wydm8jp":2,"wydm8jn":2,"wydm8m0":2,"wydm8jr":3,"wydm8jq":1,"wydm8kb":1,"wydm8hz":7,"wydm8hy":1},"queryExecutionTimeNs":5785200,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm8jp","cacheKey":"data:wydm8jp:cctv","dataCount":2,"dataSize":256,"errorMessage":null,"success":true},{"geohashId":"wydm8jn","cacheKey":"data:wydm8jn:cctv","dataCount":2,"dataSize":256,"errorMessage":null,"success":true},{"geohashId":"wydm8m0","cacheKey":"data:wydm8m0:cctv","dataCount":2,"dataSize":255,"errorMessage":null,"success":true},{"geohashId":"wydm8jr","cacheKey":"data:wydm8jr:cctv","dataCount":3,"dataSize":381,"errorMessage":null,"success":true},{"geohashId":"wydm8jq","cacheKey":"data:wydm8jq:cctv","dataCount":1,"dataSize":128,"errorMessage":null,"success":true},{"geohashId":"wydm8kb","cacheKey":"data:wydm8kb:cctv","dataCount":1,"dataSize":127,"errorMessage":null,"success":true},{"geohashId":"wydm8hz","cacheKey":"data:wydm8hz:cctv","dataCount":7,"dataSize":893,"errorMessage":null,"success":true},{"geohashId":"wydm8hy","cacheKey":"data:wydm8hy:cctv","dataCount":1,"dataSize":128,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:42:28.214 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.214270Z","nanoTime":27334228632500,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:42:28.214 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:42:28.214 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5572, 126.9239)
2025-11-21 19:42:28.215 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:42:28.322 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:42:28.322 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:42:28.323 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:42:28.323 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5572, 126.9239), 반경: 500m
2025-11-21 19:42:28.413 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:42:28.414 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 154건
2025-11-21 19:42:28.415 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:42:28.415 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:42:28.415 [http-nio-8185-exec-5] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:42:28.415 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:42:28.416 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:42:28.416 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:42:28.416 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:42:28.416 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.416217200Z","nanoTime":27334430225100,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":201592600,"duration_ms":201,"resultData":{"latitude":37.5572,"longitude":126.9239,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":201215200,"addressApiResult":{"cached":false,"cacheKey":"address:37.5572:126.9239","roadAddress":"주소 없음","jibunAddress":"서울 마포구 동교동 192-44","responseSize":60,"executionTimeNs":108461200,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":53000,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5572:126.9239:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":10,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":3,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalPlaces":154,"responseSize":17877,"executionTimeNs":92701000,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:28.416 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.416217200Z","nanoTime":27334430629900,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:42:28.416 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:42:28.416 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:42:28.416 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 19개
2025-11-21 19:42:28.416 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 19개 (총 카메라 대수: 44대)
2025-11-21 19:42:28.416 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:42:28.489 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 마포구  매봉산로 76 (거리: 349m)
2025-11-21 19:42:28.489 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:42:28.489 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:42:28.489 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:42:28.489 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:42:28.490 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.490216900Z","nanoTime":27334503974100,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":73344200,"duration_ms":73,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":19,"totalCctvAfterFilter":19,"totalCameraCount":44,"filterRate":1.0,"filterExecutionTimeNs":22300,"success":true},"policeQuery":{"queryDurationNs":72572100,"found":true,"nearestAddress":"서울특별시 마포구  매봉산로 76","nearestDistance":348.70022805484854,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":10,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":3,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"placesAfterFilter":{"CT1":14,"AT4":10,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":3,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalBeforeFilter":154,"totalAfterFilter":153,"filterRate":0.9935064935064936,"filterExecutionTimeNs":153500,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:28.490 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.490216900Z","nanoTime":27334504389600,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:42:28.490 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:42:28.490 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 42.26, 편의성: 39.72, 종합: 40.99
2025-11-21 19:42:28.491 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.490216900Z","nanoTime":27334504810900,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":421300,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":56.41247149314393,"policeDistance":348.70022805484854,"cctvScore":63.33333333333333,"cctvCount":19,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":42.257074781276515,"success":true},"convenienceScore":{"categoryScores":{"CT1":56.0,"AT4":30.0,"CS2":3.75,"SC4":2.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":39.71666666666667,"success":true},"overallScore":40.98687072397159,"errorMessage":null,"success":true}}
2025-11-21 19:42:28.491 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.491216700Z","nanoTime":27334505084900,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:42:28.491 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:42:28.491 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 마포구  매봉산로 76, latitude=37.560334, longitude=126.923761, geohashId=wydm8jx)
2025-11-21 19:42:28.491 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 348.70022805484854
2025-11-21 19:42:28.492 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm8jp
2025-11-21 19:42:28.492 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:42:28.493 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:28.492214400Z","nanoTime":27334506923200,"traceId":"713b8877","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1838300,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["병원이(가) 20m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm8jp","dataSize":20956,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20956,"errorMessage":null,"success":true}}
2025-11-21 19:42:28.493 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:42:34.579 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:42:34.579 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5326, longitude=126.9135, radius=500)
2025-11-21 19:42:34.579 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:42:34.579 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5326, longitude=126.9135, radius=500
2025-11-21 19:42:34.579 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.579405300Z","nanoTime":27340593726300,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:42:34.579 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:42:34.579 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5326, lon=126.9135
2025-11-21 19:42:34.579 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.579405300Z","nanoTime":27340593933900,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:42:34.580 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.579405300Z","nanoTime":27340594060900,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":127000,"duration_ms":0,"resultData":{"latitude":37.5326,"longitude":126.9135,"precision":7,"centerHash":"wydjxbx","adjacentHashes":["wydjxbx","wydjxbz","wydm80b","wydm808","wydm802","wydjxbr","wydjxbq","wydjxbw","wydjxby"],"errorMessage":null,"success":true}}
2025-11-21 19:42:34.580 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydjxbx, wydjxbz, wydm80b, wydm808, wydm802, wydjxbr, wydjxbq, wydjxbw, wydjxby]
2025-11-21 19:42:34.580 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydjxbx
2025-11-21 19:42:34.580 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.580391700Z","nanoTime":27340594315200,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":588900,"duration_ms":0,"resultData":{"requestLatitude":37.5326,"requestLongitude":126.9135,"requestRadius":500,"centerGeohashId":"wydjxbx","nineBlockGeohashes":["wydjxbx","wydjxbz","wydm80b","wydm808","wydm802","wydjxbr","wydjxbq","wydjxbw","wydjxby"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:42:34.580 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.580391700Z","nanoTime":27340594465300,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:42:34.580 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:42:34.580 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydjxbx
2025-11-21 19:42:34.581 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.7633ms)
2025-11-21 19:42:34.581 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:42:34.583 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:42:34.583 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:42:34.583 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.3751ms, 역직렬화: 0.0ms
2025-11-21 19:42:34.583 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:42:34.584 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.583407600Z","nanoTime":27340597986000,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3520700,"duration_ms":3,"resultData":{"centerGeohashId":"wydjxbx","nineBlockGeohashes":["wydjxbx","wydjxbz","wydm80b","wydm808","wydm802","wydjxbr","wydjxbq","wydjxbw","wydjxby"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydjxbx","hit":false,"valueSize":0,"l1CacheGetDurationNs":763300,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydjxbx","cacheKey":"data:wydjxbx:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":496200},{"geohashId":"wydjxbz","cacheKey":"data:wydjxbz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":253200},{"geohashId":"wydm80b","cacheKey":"data:wydm80b:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":248800},{"geohashId":"wydm808","cacheKey":"data:wydm808:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":214600},{"geohashId":"wydm802","cacheKey":"data:wydm802:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":147700},{"geohashId":"wydjxbr","cacheKey":"data:wydjxbr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":197700},{"geohashId":"wydjxbq","cacheKey":"data:wydjxbq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":238000},{"geohashId":"wydjxbw","cacheKey":"data:wydjxbw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":228100},{"geohashId":"wydjxby","cacheKey":"data:wydjxby:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":269200}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2375100,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:42:34.584 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.584396600Z","nanoTime":27340598343400,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:42:34.584 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:42:34.584 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:42:34.589 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 2건
2025-11-21 19:42:34.589 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:42:34.589 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 1개
2025-11-21 19:42:34.590 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.590387200Z","nanoTime":27340604138300,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5794900,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydjxbx","wydjxbz","wydm80b","wydm808","wydm802","wydjxbr","wydjxbq","wydjxbw","wydjxby"],"cctvQueryResult":{"queryGeohashIds":["wydjxbx","wydjxbz","wydm80b","wydm808","wydm802","wydjxbr","wydjxbq","wydjxbw","wydjxby"],"totalRowsReturned":2,"rowsPerGrid":{"wydjxbq":2},"queryExecutionTimeNs":4690800,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydjxbq","cacheKey":"data:wydjxbq:cctv","dataCount":2,"dataSize":272,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:42:34.591 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.591387200Z","nanoTime":27340605218700,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:42:34.591 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:42:34.591 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5326, 126.9135)
2025-11-21 19:42:34.591 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:42:34.707 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:42:34.707 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:42:34.707 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:42:34.707 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5326, 126.9135), 반경: 500m
2025-11-21 19:42:34.784 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:42:34.785 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 47건
2025-11-21 19:42:34.786 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:42:34.786 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:42:34.786 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 영등포구
2025-11-21 19:42:34.787 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 미스 - DB 조회
2025-11-21 19:42:34.790 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 성공 및 캐싱 완료 - 영등포구: 0.721231491
2025-11-21 19:42:34.790 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:42:34.790 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:42:34.790 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:42:34.790 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.721231491
2025-11-21 19:42:34.791 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.790465500Z","nanoTime":27340805221900,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":200003200,"duration_ms":200,"resultData":{"latitude":37.5326,"longitude":126.9135,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":199811400,"addressApiResult":{"cached":false,"cacheKey":"address:37.5326:126.9135","roadAddress":"서울특별시 영등포구 의사당대로 1","jibunAddress":"서울 영등포구 여의도동 1","responseSize":70,"executionTimeNs":116276700,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":"arrest_rate:영등포구","guName":"영등포구","arrestRate":0.721231491,"dataFound":true,"executionTimeNs":4362500,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5326:126.9135:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":9,"CS2":0,"SC4":0,"MT1":1,"BK9":14,"HP8":2,"AC5":0,"CE7":4,"SW8":0,"PO3":0,"FD6":9,"PK6":6,"OL7":0,"PM9":1},"totalPlaces":47,"responseSize":5608,"executionTimeNs":79172200,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:34.791 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.791485Z","nanoTime":27340805601400,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:42:34.791 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:42:34.791 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:42:34.791 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 2개
2025-11-21 19:42:34.791 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 2개 (총 카메라 대수: 2대)
2025-11-21 19:42:34.791 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:42:34.862 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구  경인로 759 (거리: 1085m)
2025-11-21 19:42:34.862 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:42:34.862 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:42:34.863 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 9개 카테고리
2025-11-21 19:42:34.863 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:42:34.863 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.863470Z","nanoTime":27340877337100,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":71735700,"duration_ms":71,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":2,"totalCctvAfterFilter":2,"totalCameraCount":2,"filterRate":1.0,"filterExecutionTimeNs":4800,"success":true},"policeQuery":{"queryDurationNs":71051400,"found":true,"nearestAddress":"서울특별시 영등포구  경인로 759","nearestDistance":1084.99359027666,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"AT4":9,"BK9":14,"HP8":2,"CE7":4,"FD6":9,"PK6":6,"MT1":1,"PM9":1},"placesAfterFilter":{"CT1":1,"AT4":9,"BK9":14,"HP8":2,"CE7":4,"FD6":9,"PK6":6,"MT1":1,"PM9":1},"totalBeforeFilter":47,"totalAfterFilter":47,"filterRate":1.0,"filterExecutionTimeNs":83500,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:34.863 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.863470Z","nanoTime":27340877777300,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:42:34.863 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:42:34.863 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 24.30, 편의성: 24.89, 종합: 24.60
2025-11-21 19:42:34.864 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.863470Z","nanoTime":27340878189000,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":411700,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":0.0,"policeDistance":1084.99359027666,"cctvScore":6.666666666666667,"cctvCount":2,"arrestRateScore":72.12314909999999,"arrestRate":0.721231491,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":24.303611396666664,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"AT4":27.0,"BK9":70.0,"HP8":70.0,"CE7":8.0,"FD6":9.0,"PK6":18.0,"MT1":10.0,"PM9":8.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"영등포구","guPopulation":397173,"finalScore":24.88888888888889,"success":true},"overallScore":24.596250142777777,"errorMessage":null,"success":true}}
2025-11-21 19:42:34.864 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.864469400Z","nanoTime":27340878506800,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:42:34.864 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:42:34.864 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구  경인로 759, latitude=37.533614, longitude=126.901262, geohashId=wydjx8y)
2025-11-21 19:42:34.864 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 1084.99359027666
2025-11-21 19:42:34.865 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydjxbx
2025-11-21 19:42:34.865 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:42:34.865 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:34.865468700Z","nanoTime":27340879744300,"traceId":"0694cf7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1237500,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["음식점이(가) 103m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","가장 가까운 파출소가 1km 이상 떨어져 있습니다.","CCTV 설치 대수가 적은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydjxbx","dataSize":7205,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":7205,"errorMessage":null,"success":true}}
2025-11-21 19:42:34.865 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:42:39.118 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:42:39.118 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5133, longitude=127.1, radius=500)
2025-11-21 19:42:39.118 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:42:39.118 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5133, longitude=127.1, radius=500
2025-11-21 19:42:39.118 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.118411200Z","nanoTime":27345132507300,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:42:39.118 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:42:39.118 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5133, lon=127.1
2025-11-21 19:42:39.118 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.118411200Z","nanoTime":27345132723400,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:42:39.118 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.118411200Z","nanoTime":27345132895300,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":171900,"duration_ms":0,"resultData":{"latitude":37.5133,"longitude":127.1,"precision":7,"centerHash":"wydmkjp","adjacentHashes":["wydmkjp","wydmkjr","wydmkm2","wydmkm0","wydmkkb","wydmkhz","wydmkhy","wydmkjn","wydmkjq"],"errorMessage":null,"success":true}}
2025-11-21 19:42:39.118 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmkjp, wydmkjr, wydmkm2, wydmkm0, wydmkkb, wydmkhz, wydmkhy, wydmkjn, wydmkjq]
2025-11-21 19:42:39.119 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmkjp
2025-11-21 19:42:39.119 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.119416600Z","nanoTime":27345133228600,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":721300,"duration_ms":0,"resultData":{"requestLatitude":37.5133,"requestLongitude":127.1,"requestRadius":500,"centerGeohashId":"wydmkjp","nineBlockGeohashes":["wydmkjp","wydmkjr","wydmkm2","wydmkm0","wydmkkb","wydmkhz","wydmkhy","wydmkjn","wydmkjq"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:42:39.119 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.119416600Z","nanoTime":27345133415800,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:42:39.119 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:42:39.119 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmkjp
2025-11-21 19:42:39.120 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.6369ms)
2025-11-21 19:42:39.120 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:42:39.122 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:42:39.122 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:42:39.122 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.5305ms, 역직렬화: 0.0ms
2025-11-21 19:42:39.122 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:42:39.123 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.123411500Z","nanoTime":27345137173600,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3757800,"duration_ms":3,"resultData":{"centerGeohashId":"wydmkjp","nineBlockGeohashes":["wydmkjp","wydmkjr","wydmkm2","wydmkm0","wydmkkb","wydmkhz","wydmkhy","wydmkjn","wydmkjq"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmkjp","hit":false,"valueSize":0,"l1CacheGetDurationNs":636900,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmkjp","cacheKey":"data:wydmkjp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":375700},{"geohashId":"wydmkjr","cacheKey":"data:wydmkjr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":219800},{"geohashId":"wydmkm2","cacheKey":"data:wydmkm2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":183300},{"geohashId":"wydmkm0","cacheKey":"data:wydmkm0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":278100},{"geohashId":"wydmkkb","cacheKey":"data:wydmkkb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":204700},{"geohashId":"wydmkhz","cacheKey":"data:wydmkhz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":168100},{"geohashId":"wydmkhy","cacheKey":"data:wydmkhy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":360500},{"geohashId":"wydmkjn","cacheKey":"data:wydmkjn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":349600},{"geohashId":"wydmkjq","cacheKey":"data:wydmkjq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":301600}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2530500,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:42:39.123 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.123411500Z","nanoTime":27345137564400,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:42:39.123 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:42:39.123 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:42:39.129 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 21건
2025-11-21 19:42:39.131 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:42:39.131 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 5개
2025-11-21 19:42:39.132 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.131417300Z","nanoTime":27345145974500,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":8410100,"duration_ms":8,"resultData":{"inputCctvMissGrids":["wydmkjp","wydmkjr","wydmkm2","wydmkm0","wydmkkb","wydmkhz","wydmkhy","wydmkjn","wydmkjq"],"cctvQueryResult":{"queryGeohashIds":["wydmkjp","wydmkjr","wydmkm2","wydmkm0","wydmkkb","wydmkhz","wydmkhy","wydmkjn","wydmkjq"],"totalRowsReturned":21,"rowsPerGrid":{"wydmkm2":1,"wydmkjq":15,"wydmkhy":1,"wydmkhz":1,"wydmkm0":3},"queryExecutionTimeNs":5555000,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmkm2","cacheKey":"data:wydmkm2:cctv","dataCount":1,"dataSize":136,"errorMessage":null,"success":true},{"geohashId":"wydmkjq","cacheKey":"data:wydmkjq:cctv","dataCount":15,"dataSize":1996,"errorMessage":null,"success":true},{"geohashId":"wydmkhy","cacheKey":"data:wydmkhy:cctv","dataCount":1,"dataSize":154,"errorMessage":null,"success":true},{"geohashId":"wydmkhz","cacheKey":"data:wydmkhz:cctv","dataCount":1,"dataSize":145,"errorMessage":null,"success":true},{"geohashId":"wydmkm0","cacheKey":"data:wydmkm0:cctv","dataCount":3,"dataSize":447,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:42:39.132 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.132413200Z","nanoTime":27345146433100,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:42:39.132 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:42:39.132 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5133, 127.1)
2025-11-21 19:42:39.132 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:42:39.194 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:42:39.194 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:42:39.195 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:42:39.195 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5133, 127.1), 반경: 500m
2025-11-21 19:42:39.284 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:42:39.284 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 150건
2025-11-21 19:42:39.286 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:42:39.286 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:42:39.286 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 송파구
2025-11-21 19:42:39.286 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 미스 - DB 조회
2025-11-21 19:42:39.289 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 성공 및 캐싱 완료 - 송파구: 0.657451864
2025-11-21 19:42:39.290 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:42:39.290 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:42:39.290 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:42:39.290 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.657451864
2025-11-21 19:42:39.290 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.290437200Z","nanoTime":27345304280600,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":157847500,"duration_ms":157,"resultData":{"latitude":37.5133,"longitude":127.1,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":157643200,"addressApiResult":{"cached":false,"cacheKey":"address:37.5133:127.1","roadAddress":"서울특별시 송파구 올림픽로 지하 265","jibunAddress":"서울 송파구 신천동 8","responseSize":71,"executionTimeNs":62861600,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":"arrest_rate:송파구","guName":"송파구","arrestRate":0.657451864,"dataFound":true,"executionTimeNs":3871100,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5133:127.1:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":5,"CS2":15,"SC4":2,"MT1":4,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":2,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":150,"responseSize":17627,"executionTimeNs":90910500,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:39.290 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.290437200Z","nanoTime":27345304660100,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:42:39.290 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:42:39.290 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:42:39.290 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 21개
2025-11-21 19:42:39.290 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 21개 (총 카메라 대수: 30대)
2025-11-21 19:42:39.290 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:42:39.363 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 양천구  중앙로32길 65 (거리: 1344m)
2025-11-21 19:42:39.364 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:42:39.364 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:42:39.364 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:42:39.364 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:42:39.364 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.364433500Z","nanoTime":27345378630200,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":73970100,"duration_ms":73,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":21,"totalCctvAfterFilter":21,"totalCameraCount":30,"filterRate":1.0,"filterExecutionTimeNs":14600,"success":true},"policeQuery":{"queryDurationNs":73245000,"found":true,"nearestAddress":"서울특별시 양천구  중앙로32길 65","nearestDistance":1343.589020595067,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":5,"CS2":15,"SC4":2,"MT1":4,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":2,"FD6":15,"PK6":15,"PM9":15},"placesAfterFilter":{"CT1":15,"AT4":5,"CS2":15,"SC4":2,"MT1":4,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":2,"FD6":15,"PK6":15,"PM9":15},"totalBeforeFilter":150,"totalAfterFilter":150,"filterRate":1.0,"filterExecutionTimeNs":181500,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:39.365 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.364433500Z","nanoTime":27345379112700,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:42:39.365 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:42:39.365 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 47.72, 편의성: 43.38, 종합: 45.55
2025-11-21 19:42:39.365 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.365435800Z","nanoTime":27345379597500,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":484800,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":0.0,"policeDistance":1343.589020595067,"cctvScore":70.0,"cctvCount":21,"arrestRateScore":65.7451864,"arrestRate":0.657451864,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":47.723555919999995,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":15.0,"CS2":2.285505325227408,"SC4":4.0,"MT1":40.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":6.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"송파구","guPopulation":656310,"finalScore":43.3775360946591,"success":true},"overallScore":45.550546007329544,"errorMessage":null,"success":true}}
2025-11-21 19:42:39.365 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.365435800Z","nanoTime":27345379907200,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:42:39.365 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:42:39.365 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 양천구  중앙로32길 65, latitude=37.502675, longitude=127.092746, geohashId=wydmk54)
2025-11-21 19:42:39.365 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 1343.589020595067
2025-11-21 19:42:39.367 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmkjp
2025-11-21 19:42:39.367 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:42:39.368 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:39.367434500Z","nanoTime":27345382017300,"traceId":"867b115a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":2110100,"duration_ms":2,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["지하철역이(가) 20m 내에 있습니다."],"warnings":["가장 가까운 파출소가 1km 이상 떨어져 있습니다."],"cacheWrite":{"cacheKey":"dto:wydmkjp","dataSize":21721,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":21721,"errorMessage":null,"success":true}}
2025-11-21 19:42:39.368 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:42:43.529 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:42:43.529 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5637, longitude=126.983, radius=500)
2025-11-21 19:42:43.529 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:42:43.529 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5637, longitude=126.983, radius=500
2025-11-21 19:42:43.529 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.529623100Z","nanoTime":27349543739200,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:42:43.529 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:42:43.529 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5637, lon=126.983
2025-11-21 19:42:43.529 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.529623100Z","nanoTime":27349543935900,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:42:43.529 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.529623100Z","nanoTime":27349544125200,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":189300,"duration_ms":0,"resultData":{"latitude":37.5637,"longitude":126.983,"precision":7,"centerHash":"wydm9w6","adjacentHashes":["wydm9w6","wydm9wd","wydm9we","wydm9w7","wydm9w5","wydm9w4","wydm9w1","wydm9w3","wydm9w9"],"errorMessage":null,"success":true}}
2025-11-21 19:42:43.529 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9w6, wydm9wd, wydm9we, wydm9w7, wydm9w5, wydm9w4, wydm9w1, wydm9w3, wydm9w9]
2025-11-21 19:42:43.529 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9w6
2025-11-21 19:42:43.530 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.529623100Z","nanoTime":27349544341200,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":602000,"duration_ms":0,"resultData":{"requestLatitude":37.5637,"requestLongitude":126.983,"requestRadius":500,"centerGeohashId":"wydm9w6","nineBlockGeohashes":["wydm9w6","wydm9wd","wydm9we","wydm9w7","wydm9w5","wydm9w4","wydm9w1","wydm9w3","wydm9w9"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:42:43.530 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.530624600Z","nanoTime":27349544564900,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:42:43.530 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:42:43.530 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9w6
2025-11-21 19:42:43.530 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5621ms)
2025-11-21 19:42:43.530 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:42:43.533 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:42:43.533 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:42:43.533 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.2882ms, 역직렬화: 0.0ms
2025-11-21 19:42:43.533 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:42:43.534 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.533109500Z","nanoTime":27349547746500,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3181600,"duration_ms":3,"resultData":{"centerGeohashId":"wydm9w6","nineBlockGeohashes":["wydm9w6","wydm9wd","wydm9we","wydm9w7","wydm9w5","wydm9w4","wydm9w1","wydm9w3","wydm9w9"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9w6","hit":false,"valueSize":0,"l1CacheGetDurationNs":562100,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9w6","cacheKey":"data:wydm9w6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":275700},{"geohashId":"wydm9wd","cacheKey":"data:wydm9wd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":216300},{"geohashId":"wydm9we","cacheKey":"data:wydm9we:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":274400},{"geohashId":"wydm9w7","cacheKey":"data:wydm9w7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":245700},{"geohashId":"wydm9w5","cacheKey":"data:wydm9w5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":232100},{"geohashId":"wydm9w4","cacheKey":"data:wydm9w4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":255400},{"geohashId":"wydm9w1","cacheKey":"data:wydm9w1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":217500},{"geohashId":"wydm9w3","cacheKey":"data:wydm9w3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":217400},{"geohashId":"wydm9w9","cacheKey":"data:wydm9w9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":277600}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2288200,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:42:43.534 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.534120600Z","nanoTime":27349548042300,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:42:43.534 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:42:43.534 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:42:43.538 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 9건
2025-11-21 19:42:43.541 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:42:43.541 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 6개
2025-11-21 19:42:43.541 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.541121600Z","nanoTime":27349555123600,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":7081300,"duration_ms":7,"resultData":{"inputCctvMissGrids":["wydm9w6","wydm9wd","wydm9we","wydm9w7","wydm9w5","wydm9w4","wydm9w1","wydm9w3","wydm9w9"],"cctvQueryResult":{"queryGeohashIds":["wydm9w6","wydm9wd","wydm9we","wydm9w7","wydm9w5","wydm9w4","wydm9w1","wydm9w3","wydm9w9"],"totalRowsReturned":9,"rowsPerGrid":{"wydm9w4":1,"wydm9w3":1,"wydm9w7":3,"wydm9w6":1,"wydm9w5":2,"wydm9we":1},"queryExecutionTimeNs":4257100,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9w4","cacheKey":"data:wydm9w4:cctv","dataCount":1,"dataSize":131,"errorMessage":null,"success":true},{"geohashId":"wydm9w3","cacheKey":"data:wydm9w3:cctv","dataCount":1,"dataSize":126,"errorMessage":null,"success":true},{"geohashId":"wydm9w7","cacheKey":"data:wydm9w7:cctv","dataCount":3,"dataSize":386,"errorMessage":null,"success":true},{"geohashId":"wydm9w6","cacheKey":"data:wydm9w6:cctv","dataCount":1,"dataSize":130,"errorMessage":null,"success":true},{"geohashId":"wydm9w5","cacheKey":"data:wydm9w5:cctv","dataCount":2,"dataSize":259,"errorMessage":null,"success":true},{"geohashId":"wydm9we","cacheKey":"data:wydm9we:cctv","dataCount":1,"dataSize":132,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:42:43.541 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.541121600Z","nanoTime":27349555399100,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:42:43.541 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:42:43.541 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5637, 126.983)
2025-11-21 19:42:43.542 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:42:43.644 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:42:43.644 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:42:43.644 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:42:43.644 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5637, 126.983), 반경: 500m
2025-11-21 19:42:43.734 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:42:43.734 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 158건
2025-11-21 19:42:43.736 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:42:43.736 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:42:43.736 [http-nio-8185-exec-7] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:42:43.736 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:42:43.736 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:42:43.736 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:42:43.736 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:42:43.736 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.736961900Z","nanoTime":27349751297200,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":195898100,"duration_ms":195,"resultData":{"latitude":37.5637,"longitude":126.983,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":195690600,"addressApiResult":{"cached":false,"cacheKey":"address:37.5637:126.983","roadAddress":"주소 없음","jibunAddress":"서울 중구 명동1가 54-19","responseSize":59,"executionTimeNs":102641300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":57000,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5637:126.983:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":6,"CS2":15,"SC4":0,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":15,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":158,"responseSize":18282,"executionTimeNs":92992300,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:43.737 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.737961100Z","nanoTime":27349751729700,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:42:43.737 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:42:43.737 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:42:43.737 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 9개
2025-11-21 19:42:43.737 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 9개 (총 카메라 대수: 25대)
2025-11-21 19:42:43.737 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:42:43.808 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  통일로 13 (거리: 86m)
2025-11-21 19:42:43.808 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:42:43.808 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:42:43.808 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 12개 카테고리
2025-11-21 19:42:43.808 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:42:43.808 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.808980500Z","nanoTime":27349823244000,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":71514300,"duration_ms":71,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":9,"totalCctvAfterFilter":9,"totalCameraCount":25,"filterRate":1.0,"filterExecutionTimeNs":10200,"success":true},"policeQuery":{"queryDurationNs":70831000,"found":true,"nearestAddress":"서울특별시 중구  통일로 13","nearestDistance":85.80535563833556,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":6,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SW8":2,"PO3":15,"FD6":15,"PK6":15,"PM9":15},"placesAfterFilter":{"CT1":15,"AT4":6,"BK9":14,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SW8":2,"PO3":15,"FD6":15,"PK6":15,"PM9":15},"totalBeforeFilter":158,"totalAfterFilter":157,"filterRate":0.9936708860759493,"filterExecutionTimeNs":164000,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:43.808 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.808980500Z","nanoTime":27349823479000,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:42:43.808 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:42:43.809 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 38.78, 편의성: 50.15, 종합: 44.46
2025-11-21 19:42:43.809 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.809966700Z","nanoTime":27349823941100,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":462100,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":89.27433054520806,"policeDistance":85.80535563833556,"cctvScore":30.0,"cctvCount":9,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":38.78229916356241,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":18.0,"BK9":70.0,"HP8":100.0,"CS2":3.75,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":45.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":50.145833333333336,"success":true},"overallScore":44.46406624844788,"errorMessage":null,"success":true}}
2025-11-21 19:42:43.809 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.809966700Z","nanoTime":27349824213500,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:42:43.809 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:42:43.809 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  통일로 13, latitude=37.563587, longitude=126.983963, geohashId=wydm9w4)
2025-11-21 19:42:43.809 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 85.80535563833556
2025-11-21 19:42:43.810 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9w6
2025-11-21 19:42:43.811 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:42:43.811 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:43.811960100Z","nanoTime":27349825780300,"traceId":"0f584451","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1566800,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["문화시설이(가) 43m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm9w6","dataSize":19969,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19969,"errorMessage":null,"success":true}}
2025-11-21 19:42:43.811 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:42:47.549 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:42:47.549 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5559, longitude=126.9368, radius=500)
2025-11-21 19:42:47.549 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:42:47.549 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5559, longitude=126.9368, radius=500
2025-11-21 19:42:47.549 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.549798200Z","nanoTime":27353563870900,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:42:47.549 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:42:47.549 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5559, lon=126.9368
2025-11-21 19:42:47.549 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.549798200Z","nanoTime":27353564062500,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:42:47.549 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.549798200Z","nanoTime":27353564187600,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":125100,"duration_ms":0,"resultData":{"latitude":37.5559,"longitude":126.9368,"precision":7,"centerHash":"wydm8sb","adjacentHashes":["wydm8sb","wydm8t0","wydm8t1","wydm8sc","wydm8s9","wydm8s8","wydm8kx","wydm8kz","wydm8mp"],"errorMessage":null,"success":true}}
2025-11-21 19:42:47.549 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm8sb, wydm8t0, wydm8t1, wydm8sc, wydm8s9, wydm8s8, wydm8kx, wydm8kz, wydm8mp]
2025-11-21 19:42:47.549 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm8sb
2025-11-21 19:42:47.550 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.549798200Z","nanoTime":27353564418700,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":547800,"duration_ms":0,"resultData":{"requestLatitude":37.5559,"requestLongitude":126.9368,"requestRadius":500,"centerGeohashId":"wydm8sb","nineBlockGeohashes":["wydm8sb","wydm8t0","wydm8t1","wydm8sc","wydm8s9","wydm8s8","wydm8kx","wydm8kz","wydm8mp"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:42:47.550 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.550801800Z","nanoTime":27353564693100,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:42:47.550 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:42:47.550 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm8sb
2025-11-21 19:42:47.551 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5807ms)
2025-11-21 19:42:47.551 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:42:47.553 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:42:47.553 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:42:47.553 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.609ms, 역직렬화: 0.0ms
2025-11-21 19:42:47.553 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:42:47.554 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.553484500Z","nanoTime":27353568172600,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3479500,"duration_ms":3,"resultData":{"centerGeohashId":"wydm8sb","nineBlockGeohashes":["wydm8sb","wydm8t0","wydm8t1","wydm8sc","wydm8s9","wydm8s8","wydm8kx","wydm8kz","wydm8mp"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm8sb","hit":false,"valueSize":0,"l1CacheGetDurationNs":580700,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm8sb","cacheKey":"data:wydm8sb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":252600},{"geohashId":"wydm8t0","cacheKey":"data:wydm8t0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":381000},{"geohashId":"wydm8t1","cacheKey":"data:wydm8t1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":332300},{"geohashId":"wydm8sc","cacheKey":"data:wydm8sc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":287200},{"geohashId":"wydm8s9","cacheKey":"data:wydm8s9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":256100},{"geohashId":"wydm8s8","cacheKey":"data:wydm8s8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":194000},{"geohashId":"wydm8kx","cacheKey":"data:wydm8kx:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":297200},{"geohashId":"wydm8kz","cacheKey":"data:wydm8kz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":248800},{"geohashId":"wydm8mp","cacheKey":"data:wydm8mp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":289500}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2609000,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:42:47.554 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.554489800Z","nanoTime":27353568461000,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:42:47.554 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:42:47.554 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:42:47.559 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 20건
2025-11-21 19:42:47.563 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:42:47.563 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:42:47.563 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.563492700Z","nanoTime":27353577925700,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":9464700,"duration_ms":9,"resultData":{"inputCctvMissGrids":["wydm8sb","wydm8t0","wydm8t1","wydm8sc","wydm8s9","wydm8s8","wydm8kx","wydm8kz","wydm8mp"],"cctvQueryResult":{"queryGeohashIds":["wydm8sb","wydm8t0","wydm8t1","wydm8sc","wydm8s9","wydm8s8","wydm8kx","wydm8kz","wydm8mp"],"totalRowsReturned":20,"rowsPerGrid":{"wydm8s9":2,"wydm8s8":2,"wydm8mp":4,"wydm8kx":2,"wydm8t1":4,"wydm8t0":2,"wydm8sc":2,"wydm8kz":1,"wydm8sb":1},"queryExecutionTimeNs":5404200,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm8s9","cacheKey":"data:wydm8s9:cctv","dataCount":2,"dataSize":257,"errorMessage":null,"success":true},{"geohashId":"wydm8s8","cacheKey":"data:wydm8s8:cctv","dataCount":2,"dataSize":255,"errorMessage":null,"success":true},{"geohashId":"wydm8mp","cacheKey":"data:wydm8mp:cctv","dataCount":4,"dataSize":408,"errorMessage":null,"success":true},{"geohashId":"wydm8kx","cacheKey":"data:wydm8kx:cctv","dataCount":2,"dataSize":257,"errorMessage":null,"success":true},{"geohashId":"wydm8t1","cacheKey":"data:wydm8t1:cctv","dataCount":4,"dataSize":409,"errorMessage":null,"success":true},{"geohashId":"wydm8t0","cacheKey":"data:wydm8t0:cctv","dataCount":2,"dataSize":205,"errorMessage":null,"success":true},{"geohashId":"wydm8sc","cacheKey":"data:wydm8sc:cctv","dataCount":2,"dataSize":205,"errorMessage":null,"success":true},{"geohashId":"wydm8kz","cacheKey":"data:wydm8kz:cctv","dataCount":1,"dataSize":103,"errorMessage":null,"success":true},{"geohashId":"wydm8sb","cacheKey":"data:wydm8sb:cctv","dataCount":1,"dataSize":103,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:42:47.564 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.563492700Z","nanoTime":27353578233300,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:42:47.564 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:42:47.564 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5559, 126.9368)
2025-11-21 19:42:47.564 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:42:47.666 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:42:47.666 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:42:47.667 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:42:47.667 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5559, 126.9368), 반경: 500m
2025-11-21 19:42:47.752 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:42:47.752 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 151건
2025-11-21 19:42:47.753 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:42:47.753 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:42:47.753 [http-nio-8185-exec-9] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:42:47.753 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:42:47.753 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:42:47.753 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:42:47.753 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:42:47.754 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.753450100Z","nanoTime":27353768029200,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":189795900,"duration_ms":189,"resultData":{"latitude":37.5559,"longitude":126.9368,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":189596100,"addressApiResult":{"cached":false,"cacheKey":"address:37.5559:126.9368","roadAddress":"주소 없음","jibunAddress":"서울 서대문구 창천동 30-16","responseSize":60,"executionTimeNs":102249500,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":41000,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5559:126.9368:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":4,"CS2":15,"SC4":3,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":4,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":151,"responseSize":17447,"executionTimeNs":87305600,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:47.754 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.754451Z","nanoTime":27353768374800,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:42:47.754 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:42:47.754 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:42:47.754 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 20개
2025-11-21 19:42:47.754 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 20개 (총 카메라 대수: 63대)
2025-11-21 19:42:47.754 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:42:47.823 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 서대문구  독립문로 25-1 (거리: 622m)
2025-11-21 19:42:47.823 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:42:47.823 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:42:47.823 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:42:47.823 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:42:47.824 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.823450900Z","nanoTime":27353838049600,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":69674800,"duration_ms":69,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":20,"totalCctvAfterFilter":20,"totalCameraCount":63,"filterRate":1.0,"filterExecutionTimeNs":14400,"success":true},"policeQuery":{"queryDurationNs":69167900,"found":true,"nearestAddress":"서울특별시 서대문구  독립문로 25-1","nearestDistance":621.8601203772246,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":4,"CS2":15,"SC4":3,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":4,"FD6":15,"PK6":15,"PM9":15},"placesAfterFilter":{"CT1":15,"AT4":4,"CS2":15,"SC4":3,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":4,"FD6":15,"PK6":15,"PM9":15},"totalBeforeFilter":151,"totalAfterFilter":151,"filterRate":1.0,"filterExecutionTimeNs":130700,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:47.824 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.824470800Z","nanoTime":27353838406400,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:42:47.824 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:42:47.824 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 33.35, 편의성: 43.13, 종합: 38.24
2025-11-21 19:42:47.824 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.824470800Z","nanoTime":27353838717900,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":311500,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":22.267484952846928,"policeDistance":621.8601203772246,"cctvScore":66.66666666666666,"cctvCount":20,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":33.346912152520744,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":12.0,"CS2":3.75,"SC4":6.0,"MT1":30.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":12.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":43.125,"success":true},"overallScore":38.23595607626037,"errorMessage":null,"success":true}}
2025-11-21 19:42:47.824 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.824470800Z","nanoTime":27353838904600,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:42:47.824 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:42:47.824 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 서대문구  독립문로 25-1, latitude=37.558552, longitude=126.943011, geohashId=wydm8tm)
2025-11-21 19:42:47.824 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 621.8601203772246
2025-11-21 19:42:47.826 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm8sb
2025-11-21 19:42:47.826 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:42:47.826 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:47.826456400Z","nanoTime":27353840837100,"traceId":"84b3ad79","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1932500,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["관광명소이(가) 23m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm8sb","dataSize":20041,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20041,"errorMessage":null,"success":true}}
2025-11-21 19:42:47.826 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:42:52.306 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:42:52.306 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.572, longitude=126.9769, radius=500)
2025-11-21 19:42:52.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:42:52.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.572, longitude=126.9769, radius=500
2025-11-21 19:42:52.306 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.306552900Z","nanoTime":27358320525700,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:42:52.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:42:52.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.572, lon=126.9769
2025-11-21 19:42:52.306 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.306552900Z","nanoTime":27358320699200,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:42:52.306 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.306552900Z","nanoTime":27358320886300,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":187100,"duration_ms":0,"resultData":{"latitude":37.572,"longitude":126.9769,"precision":7,"centerHash":"wydm9rv","adjacentHashes":["wydm9rv","wydmc2j","wydmc2n","wydm9ry","wydm9rw","wydm9rt","wydm9rs","wydm9ru","wydmc2h"],"errorMessage":null,"success":true}}
2025-11-21 19:42:52.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9rv, wydmc2j, wydmc2n, wydm9ry, wydm9rw, wydm9rt, wydm9rs, wydm9ru, wydmc2h]
2025-11-21 19:42:52.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9rv
2025-11-21 19:42:52.306 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.306552900Z","nanoTime":27358321160000,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":634300,"duration_ms":0,"resultData":{"requestLatitude":37.572,"requestLongitude":126.9769,"requestRadius":500,"centerGeohashId":"wydm9rv","nineBlockGeohashes":["wydm9rv","wydmc2j","wydmc2n","wydm9ry","wydm9rw","wydm9rt","wydm9rs","wydm9ru","wydmc2h"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:42:52.306 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.306552900Z","nanoTime":27358321272000,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:42:52.307 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:42:52.307 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9rv
2025-11-21 19:42:52.307 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.6097ms)
2025-11-21 19:42:52.307 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:42:52.309 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:42:52.309 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:42:52.309 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.8802ms, 역직렬화: 0.0ms
2025-11-21 19:42:52.309 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:42:52.309 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.309642300Z","nanoTime":27358324020300,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2748300,"duration_ms":2,"resultData":{"centerGeohashId":"wydm9rv","nineBlockGeohashes":["wydm9rv","wydmc2j","wydmc2n","wydm9ry","wydm9rw","wydm9rt","wydm9rs","wydm9ru","wydmc2h"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9rv","hit":false,"valueSize":0,"l1CacheGetDurationNs":609700,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9rv","cacheKey":"data:wydm9rv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":300100},{"geohashId":"wydmc2j","cacheKey":"data:wydmc2j:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":208300},{"geohashId":"wydmc2n","cacheKey":"data:wydmc2n:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":217900},{"geohashId":"wydm9ry","cacheKey":"data:wydm9ry:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":166300},{"geohashId":"wydm9rw","cacheKey":"data:wydm9rw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":192900},{"geohashId":"wydm9rt","cacheKey":"data:wydm9rt:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":217900},{"geohashId":"wydm9rs","cacheKey":"data:wydm9rs:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":162200},{"geohashId":"wydm9ru","cacheKey":"data:wydm9ru:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":159900},{"geohashId":"wydmc2h","cacheKey":"data:wydmc2h:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":157000}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1880200,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:42:52.310 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.309642300Z","nanoTime":27358324285900,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:42:52.310 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:42:52.310 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:42:52.314 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 4건
2025-11-21 19:42:52.315 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:42:52.315 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 3개
2025-11-21 19:42:52.315 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.315556400Z","nanoTime":27358330020200,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5734300,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydm9rv","wydmc2j","wydmc2n","wydm9ry","wydm9rw","wydm9rt","wydm9rs","wydm9ru","wydmc2h"],"cctvQueryResult":{"queryGeohashIds":["wydm9rv","wydmc2j","wydmc2n","wydm9ry","wydm9rw","wydm9rt","wydm9rs","wydm9ru","wydmc2h"],"totalRowsReturned":4,"rowsPerGrid":{"wydm9rw":1,"wydm9rt":2,"wydm9rs":1},"queryExecutionTimeNs":4133000,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9rw","cacheKey":"data:wydm9rw:cctv","dataCount":1,"dataSize":135,"errorMessage":null,"success":true},{"geohashId":"wydm9rt","cacheKey":"data:wydm9rt:cctv","dataCount":2,"dataSize":241,"errorMessage":null,"success":true},{"geohashId":"wydm9rs","cacheKey":"data:wydm9rs:cctv","dataCount":1,"dataSize":124,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:42:52.315 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.315556400Z","nanoTime":27358330212700,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:42:52.315 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:42:52.315 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.572, 126.9769)
2025-11-21 19:42:52.316 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:42:52.400 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:42:52.400 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:42:52.400 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:42:52.400 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.572, 126.9769), 반경: 500m
2025-11-21 19:42:52.509 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:42:52.509 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 154건
2025-11-21 19:42:52.510 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:42:52.510 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:42:52.510 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 종로구
2025-11-21 19:42:52.510 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 미스 - DB 조회
2025-11-21 19:42:52.514 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 성공 및 캐싱 완료 - 종로구: 0.939777079
2025-11-21 19:42:52.515 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:42:52.515 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:42:52.515 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:42:52.515 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.939777079
2025-11-21 19:42:52.515 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.515347100Z","nanoTime":27358529205300,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":198992600,"duration_ms":198,"resultData":{"latitude":37.572,"longitude":126.9769,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":198844200,"addressApiResult":{"cached":false,"cacheKey":"address:37.572:126.9769","roadAddress":"서울특별시 종로구 세종대로 지하 175","jibunAddress":"서울 종로구 세종로 81-3","responseSize":74,"executionTimeNs":84020200,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":"arrest_rate:종로구","guName":"종로구","arrestRate":0.939777079,"dataFound":true,"executionTimeNs":4332700,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.572:126.9769:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":1,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":15,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":154,"responseSize":17820,"executionTimeNs":110491300,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:52.515 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.515347100Z","nanoTime":27358529468500,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:42:52.515 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:42:52.515 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:42:52.515 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 4개
2025-11-21 19:42:52.515 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 4개 (총 카메라 대수: 9대)
2025-11-21 19:42:52.515 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:42:52.585 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 종로구  사직로9길 1 (거리: 198m)
2025-11-21 19:42:52.585 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:42:52.585 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:42:52.585 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:42:52.585 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:42:52.586 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.585375Z","nanoTime":27358600012700,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":70544200,"duration_ms":70,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":4,"totalCctvAfterFilter":4,"totalCameraCount":9,"filterRate":1.0,"filterExecutionTimeNs":6900,"success":true},"policeQuery":{"queryDurationNs":70062400,"found":true,"nearestAddress":"서울특별시 종로구  사직로9길 1","nearestDistance":197.94829056886178,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":1,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":15,"FD6":15,"PK6":15,"PM9":15},"placesAfterFilter":{"CT1":15,"AT4":1,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":15,"FD6":15,"PK6":15,"PM9":15},"totalBeforeFilter":154,"totalAfterFilter":154,"filterRate":1.0,"filterExecutionTimeNs":135400,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:52.586 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.586371200Z","nanoTime":27358600318400,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:42:52.586 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:42:52.586 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 56.10, 편의성: 43.57, 종합: 49.84
2025-11-21 19:42:52.586 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.586371200Z","nanoTime":27358600628100,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":309700,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":75.25646367889227,"policeDistance":197.94829056886178,"cctvScore":13.333333333333334,"cctvCount":4,"arrestRateScore":93.9777079,"arrestRate":0.939777079,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":56.10358480700101,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":3.0,"CS2":10.026201807389977,"SC4":2.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":45.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"종로구","guPopulation":149608,"finalScore":43.57330012909928,"success":true},"overallScore":49.83844246805015,"errorMessage":null,"success":true}}
2025-11-21 19:42:52.586 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.586371200Z","nanoTime":27358600902500,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:42:52.586 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:42:52.586 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 종로구  사직로9길 1, latitude=37.572588, longitude=126.97902, geohashId=wydm9rz)
2025-11-21 19:42:52.586 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 197.94829056886178
2025-11-21 19:42:52.588 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9rv
2025-11-21 19:42:52.588 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:42:52.588 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:52.588372800Z","nanoTime":27358602741600,"traceId":"96579d7f","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1839100,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["지하철역이(가) 57m 내에 있습니다."],"warnings":["CCTV 설치 대수가 적은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm9rv","dataSize":19238,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19238,"errorMessage":null,"success":true}}
2025-11-21 19:42:52.588 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:42:56.810 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:42:56.810 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5403, longitude=127.0695, radius=500)
2025-11-21 19:42:56.810 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:42:56.810 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5403, longitude=127.0695, radius=500
2025-11-21 19:42:56.810 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:56.810118600Z","nanoTime":27362824638600,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:42:56.810 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:42:56.810 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5403, lon=127.0695
2025-11-21 19:42:56.810 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:56.810118600Z","nanoTime":27362824831100,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:42:56.811 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:56.811121600Z","nanoTime":27362824929100,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":98000,"duration_ms":0,"resultData":{"latitude":37.5403,"longitude":127.0695,"precision":7,"centerHash":"wydmed1","adjacentHashes":["wydmed1","wydmed3","wydmed6","wydmed4","wydme9f","wydme9c","wydme9b","wydmed0","wydmed2"],"errorMessage":null,"success":true}}
2025-11-21 19:42:56.811 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmed1, wydmed3, wydmed6, wydmed4, wydme9f, wydme9c, wydme9b, wydmed0, wydmed2]
2025-11-21 19:42:56.811 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmed1
2025-11-21 19:42:56.811 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:56.811121600Z","nanoTime":27362825134900,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":496300,"duration_ms":0,"resultData":{"requestLatitude":37.5403,"requestLongitude":127.0695,"requestRadius":500,"centerGeohashId":"wydmed1","nineBlockGeohashes":["wydmed1","wydmed3","wydmed6","wydmed4","wydme9f","wydme9c","wydme9b","wydmed0","wydmed2"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:42:56.811 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:56.811121600Z","nanoTime":27362825220000,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:42:56.811 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:42:56.811 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmed1
2025-11-21 19:42:56.811 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4911ms)
2025-11-21 19:42:56.811 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:42:56.813 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:42:56.813 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:42:56.813 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.8198ms, 역직렬화: 0.0ms
2025-11-21 19:42:56.813 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:42:56.814 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:56.813118500Z","nanoTime":27362827802300,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2582300,"duration_ms":2,"resultData":{"centerGeohashId":"wydmed1","nineBlockGeohashes":["wydmed1","wydmed3","wydmed6","wydmed4","wydme9f","wydme9c","wydme9b","wydmed0","wydmed2"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmed1","hit":false,"valueSize":0,"l1CacheGetDurationNs":491100,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmed1","cacheKey":"data:wydmed1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":312200},{"geohashId":"wydmed3","cacheKey":"data:wydmed3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":215000},{"geohashId":"wydmed6","cacheKey":"data:wydmed6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":152800},{"geohashId":"wydmed4","cacheKey":"data:wydmed4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":134800},{"geohashId":"wydme9f","cacheKey":"data:wydme9f:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":136300},{"geohashId":"wydme9c","cacheKey":"data:wydme9c:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":186200},{"geohashId":"wydme9b","cacheKey":"data:wydme9b:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":217900},{"geohashId":"wydmed0","cacheKey":"data:wydmed0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":206200},{"geohashId":"wydmed2","cacheKey":"data:wydmed2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":194700}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1819800,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:42:56.814 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:56.814127700Z","nanoTime":27362828029600,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:42:56.814 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:42:56.814 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:42:56.818 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 26건
2025-11-21 19:42:56.822 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:42:56.822 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:42:56.822 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:56.822125700Z","nanoTime":27362835999000,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":7969400,"duration_ms":7,"resultData":{"inputCctvMissGrids":["wydmed1","wydmed3","wydmed6","wydmed4","wydme9f","wydme9c","wydme9b","wydmed0","wydmed2"],"cctvQueryResult":{"queryGeohashIds":["wydmed1","wydmed3","wydmed6","wydmed4","wydme9f","wydme9c","wydme9b","wydmed0","wydmed2"],"totalRowsReturned":26,"rowsPerGrid":{"wydme9c":5,"wydmed0":2,"wydme9f":1,"wydmed1":4,"wydme9b":4,"wydmed6":2,"wydmed2":1,"wydmed3":2,"wydmed4":5},"queryExecutionTimeNs":4607400,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydme9c","cacheKey":"data:wydme9c:cctv","dataCount":5,"dataSize":551,"errorMessage":null,"success":true},{"geohashId":"wydmed0","cacheKey":"data:wydmed0:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydme9f","cacheKey":"data:wydme9f:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmed1","cacheKey":"data:wydmed1:cctv","dataCount":4,"dataSize":399,"errorMessage":null,"success":true},{"geohashId":"wydme9b","cacheKey":"data:wydme9b:cctv","dataCount":4,"dataSize":401,"errorMessage":null,"success":true},{"geohashId":"wydmed6","cacheKey":"data:wydmed6:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydmed2","cacheKey":"data:wydmed2:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmed3","cacheKey":"data:wydmed3:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydmed4","cacheKey":"data:wydmed4:cctv","dataCount":5,"dataSize":501,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:42:56.822 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:56.822125700Z","nanoTime":27362836282700,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:42:56.822 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:42:56.822 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5403, 127.0695)
2025-11-21 19:42:56.822 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:42:56.902 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:42:56.902 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:42:56.903 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:42:56.903 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5403, 127.0695), 반경: 500m
2025-11-21 19:42:56.999 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:42:56.999 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 138건
2025-11-21 19:42:57.000 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:42:57.000 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:42:57.000 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 광진구
2025-11-21 19:42:57.001 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 미스 - DB 조회
2025-11-21 19:42:57.004 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 성공 및 캐싱 완료 - 광진구: 0.672940923
2025-11-21 19:42:57.004 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:42:57.004 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:42:57.004 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:42:57.004 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.672940923
2025-11-21 19:42:57.004 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:57.004124300Z","nanoTime":27363018622000,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":182339300,"duration_ms":182,"resultData":{"latitude":37.5403,"longitude":127.0695,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":182200700,"addressApiResult":{"cached":false,"cacheKey":"address:37.5403:127.0695","roadAddress":"서울특별시 광진구 아차산로 243","jibunAddress":"서울 광진구 화양동 7-3","responseSize":70,"executionTimeNs":80928600,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":"arrest_rate:광진구","guName":"광진구","arrestRate":0.672940923,"dataFound":true,"executionTimeNs":3963300,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5403:127.0695:500","categoryCount":15,"placesByCategory":{"CT1":10,"AT4":4,"CS2":15,"SC4":0,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":0,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":138,"responseSize":16047,"executionTimeNs":97308800,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:57.005 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:57.005106Z","nanoTime":27363018869600,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:42:57.005 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:42:57.005 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:42:57.005 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 26개
2025-11-21 19:42:57.005 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 26개 (총 카메라 대수: 26대)
2025-11-21 19:42:57.005 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:42:57.076 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구 사당로17나길 4 (거리: 712m)
2025-11-21 19:42:57.076 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:42:57.076 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:42:57.076 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 12개 카테고리
2025-11-21 19:42:57.076 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:42:57.076 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:57.076104600Z","nanoTime":27363090284900,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":71415300,"duration_ms":71,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":26,"totalCctvAfterFilter":26,"totalCameraCount":26,"filterRate":1.0,"filterExecutionTimeNs":18800,"success":true},"policeQuery":{"queryDurationNs":70777300,"found":true,"nearestAddress":"서울특별시 동작구 사당로17나길 4","nearestDistance":712.1978057885286,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":10,"AT4":4,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SW8":2,"FD6":15,"PK6":15,"MT1":2,"PM9":15},"placesAfterFilter":{"CT1":10,"AT4":4,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SW8":2,"FD6":15,"PK6":15,"MT1":2,"PM9":15},"totalBeforeFilter":138,"totalAfterFilter":138,"filterRate":1.0,"filterExecutionTimeNs":161700,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:42:57.076 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:57.076104600Z","nanoTime":27363090627600,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:42:57.076 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:42:57.077 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 58.15, 편의성: 46.36, 종합: 52.25
2025-11-21 19:42:57.077 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:57.077108900Z","nanoTime":27363091007600,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":380000,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":10.975274276433922,"policeDistance":712.1978057885286,"cctvScore":86.66666666666667,"cctvCount":26,"arrestRateScore":67.2940923,"arrestRate":0.672940923,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":58.147476639596846,"success":true},"convenienceScore":{"categoryScores":{"CT1":40.0,"AT4":12.0,"BK9":75.0,"HP8":100.0,"CS2":4.339624824968466,"AC5":15.0,"CE7":30.0,"SW8":100.0,"FD6":15.0,"PK6":45.0,"MT1":20.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"광진구","guPopulation":345652,"finalScore":46.36163540208071,"success":true},"overallScore":52.25455602083878,"errorMessage":null,"success":true}}
2025-11-21 19:42:57.077 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:57.077108900Z","nanoTime":27363091224700,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:42:57.077 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:42:57.077 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구 사당로17나길 4, latitude=37.546541, longitude=127.071316, geohashId=wydmee4)
2025-11-21 19:42:57.077 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 712.1978057885286
2025-11-21 19:42:57.079 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmed1
2025-11-21 19:42:57.079 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:42:57.079 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:42:57.079108500Z","nanoTime":27363093197600,"traceId":"4692300d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1972900,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["학원이(가) 28m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmed1","dataSize":18753,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":18753,"errorMessage":null,"success":true}}
2025-11-21 19:42:57.079 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:43:01.012 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:43:01.012 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5344, longitude=126.9944, radius=500)
2025-11-21 19:43:01.012 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:43:01.012 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5344, longitude=126.9944, radius=500
2025-11-21 19:43:01.013 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.013843100Z","nanoTime":27367027603800,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:43:01.013 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:43:01.013 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5344, lon=126.9944
2025-11-21 19:43:01.013 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.013843100Z","nanoTime":27367027814700,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:43:01.013 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.013843100Z","nanoTime":27367027914300,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":99600,"duration_ms":0,"resultData":{"latitude":37.5344,"longitude":126.9944,"precision":7,"centerHash":"wydm9bf","adjacentHashes":["wydm9bf","wydm9c4","wydm9c5","wydm9bg","wydm9be","wydm9bd","wydm9b9","wydm9bc","wydm9c1"],"errorMessage":null,"success":true}}
2025-11-21 19:43:01.013 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9bf, wydm9c4, wydm9c5, wydm9bg, wydm9be, wydm9bd, wydm9b9, wydm9bc, wydm9c1]
2025-11-21 19:43:01.013 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9bf
2025-11-21 19:43:01.013 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.013843100Z","nanoTime":27367028064600,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":460800,"duration_ms":0,"resultData":{"requestLatitude":37.5344,"requestLongitude":126.9944,"requestRadius":500,"centerGeohashId":"wydm9bf","nineBlockGeohashes":["wydm9bf","wydm9c4","wydm9c5","wydm9bg","wydm9be","wydm9bd","wydm9b9","wydm9bc","wydm9c1"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:43:01.013 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.013843100Z","nanoTime":27367028148300,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:43:01.013 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:43:01.013 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9bf
2025-11-21 19:43:01.014 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5419ms)
2025-11-21 19:43:01.014 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:43:01.016 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:43:01.016 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:43:01.016 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.9489ms, 역직렬화: 0.0ms
2025-11-21 19:43:01.016 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:43:01.016 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.016823200Z","nanoTime":27367030939600,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2791300,"duration_ms":2,"resultData":{"centerGeohashId":"wydm9bf","nineBlockGeohashes":["wydm9bf","wydm9c4","wydm9c5","wydm9bg","wydm9be","wydm9bd","wydm9b9","wydm9bc","wydm9c1"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9bf","hit":false,"valueSize":0,"l1CacheGetDurationNs":541900,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9bf","cacheKey":"data:wydm9bf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":291600},{"geohashId":"wydm9c4","cacheKey":"data:wydm9c4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":249300},{"geohashId":"wydm9c5","cacheKey":"data:wydm9c5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":247100},{"geohashId":"wydm9bg","cacheKey":"data:wydm9bg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":250000},{"geohashId":"wydm9be","cacheKey":"data:wydm9be:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":186900},{"geohashId":"wydm9bd","cacheKey":"data:wydm9bd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":178700},{"geohashId":"wydm9b9","cacheKey":"data:wydm9b9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":174800},{"geohashId":"wydm9bc","cacheKey":"data:wydm9bc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":156400},{"geohashId":"wydm9c1","cacheKey":"data:wydm9c1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":139800}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1948900,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:43:01.016 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.016823200Z","nanoTime":27367031144900,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:43:01.016 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:43:01.016 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:43:01.021 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 19건
2025-11-21 19:43:01.023 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:43:01.023 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:43:01.024 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.023828600Z","nanoTime":27367038531700,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":7386800,"duration_ms":7,"resultData":{"inputCctvMissGrids":["wydm9bf","wydm9c4","wydm9c5","wydm9bg","wydm9be","wydm9bd","wydm9b9","wydm9bc","wydm9c1"],"cctvQueryResult":{"queryGeohashIds":["wydm9bf","wydm9c4","wydm9c5","wydm9bg","wydm9be","wydm9bd","wydm9b9","wydm9bc","wydm9c1"],"totalRowsReturned":19,"rowsPerGrid":{"wydm9bg":3,"wydm9bf":2,"wydm9be":3,"wydm9bd":2,"wydm9c5":1,"wydm9b9":3,"wydm9bc":2,"wydm9c4":1,"wydm9c1":2},"queryExecutionTimeNs":4644500,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9bg","cacheKey":"data:wydm9bg:cctv","dataCount":3,"dataSize":431,"errorMessage":null,"success":true},{"geohashId":"wydm9bf","cacheKey":"data:wydm9bf:cctv","dataCount":2,"dataSize":289,"errorMessage":null,"success":true},{"geohashId":"wydm9be","cacheKey":"data:wydm9be:cctv","dataCount":3,"dataSize":442,"errorMessage":null,"success":true},{"geohashId":"wydm9bd","cacheKey":"data:wydm9bd:cctv","dataCount":2,"dataSize":290,"errorMessage":null,"success":true},{"geohashId":"wydm9c5","cacheKey":"data:wydm9c5:cctv","dataCount":1,"dataSize":147,"errorMessage":null,"success":true},{"geohashId":"wydm9b9","cacheKey":"data:wydm9b9:cctv","dataCount":3,"dataSize":431,"errorMessage":null,"success":true},{"geohashId":"wydm9bc","cacheKey":"data:wydm9bc:cctv","dataCount":2,"dataSize":296,"errorMessage":null,"success":true},{"geohashId":"wydm9c4","cacheKey":"data:wydm9c4:cctv","dataCount":1,"dataSize":145,"errorMessage":null,"success":true},{"geohashId":"wydm9c1","cacheKey":"data:wydm9c1:cctv","dataCount":2,"dataSize":292,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:43:01.024 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.024823900Z","nanoTime":27367038769200,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:43:01.024 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:43:01.024 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5344, 126.9944)
2025-11-21 19:43:01.024 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:43:01.106 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:43:01.106 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:43:01.106 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:43:01.106 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5344, 126.9944), 반경: 500m
2025-11-21 19:43:01.191 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:43:01.191 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 148건
2025-11-21 19:43:01.192 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:43:01.192 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:43:01.192 [http-nio-8185-exec-1] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:43:01.192 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:43:01.192 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:43:01.192 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:43:01.192 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:43:01.192 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.192505600Z","nanoTime":27367207103300,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":168334100,"duration_ms":168,"resultData":{"latitude":37.5344,"longitude":126.9944,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":168173500,"addressApiResult":{"cached":false,"cacheKey":"address:37.5344:126.9944","roadAddress":"주소 없음","jibunAddress":"서울 용산구 이태원동 127-10","responseSize":61,"executionTimeNs":81384900,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":42200,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5344:126.9944:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":7,"CS2":15,"SC4":1,"MT1":0,"BK9":15,"HP8":15,"AC5":14,"CE7":15,"SW8":1,"PO3":15,"FD6":15,"PK6":15,"OL7":0,"PM9":5},"totalPlaces":148,"responseSize":17040,"executionTimeNs":86746400,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:01.193 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.193521900Z","nanoTime":27367207327700,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:43:01.193 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:43:01.193 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:43:01.193 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 19개
2025-11-21 19:43:01.193 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 19개 (총 카메라 대수: 66대)
2025-11-21 19:43:01.193 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:43:01.265 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: "서울특별시 용산구  후암로16나길 17, 용중지구대" (거리: 10m)
2025-11-21 19:43:01.265 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:43:01.265 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:43:01.266 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 19:43:01.266 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:43:01.266 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.266502500Z","nanoTime":27367280357400,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":73029700,"duration_ms":73,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":19,"totalCctvAfterFilter":19,"totalCameraCount":66,"filterRate":1.0,"filterExecutionTimeNs":11400,"success":true},"policeQuery":{"queryDurationNs":72478500,"found":true,"nearestAddress":"\"서울특별시 용산구  후암로16나길 17, 용중지구대\"","nearestDistance":9.921457375807954,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":7,"CS2":15,"SC4":1,"BK9":15,"HP8":15,"AC5":14,"CE7":15,"SW8":1,"PO3":15,"FD6":15,"PK6":15,"PM9":5},"placesAfterFilter":{"CT1":15,"AT4":7,"CS2":15,"SC4":1,"BK9":15,"HP8":15,"AC5":14,"CE7":15,"SW8":1,"PO3":15,"FD6":15,"PK6":15,"PM9":5},"totalBeforeFilter":148,"totalAfterFilter":148,"filterRate":1.0,"filterExecutionTimeNs":169700,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:01.266 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.266502500Z","nanoTime":27367280646200,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:43:01.266 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:43:01.266 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 54.96, 편의성: 42.37, 종합: 48.66
2025-11-21 19:43:01.266 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.266502500Z","nanoTime":27367280984900,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":338700,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":98.75981782802401,"policeDistance":9.921457375807954,"cctvScore":63.33333333333333,"cctvCount":19,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":54.96127868174054,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":21.0,"CS2":3.75,"SC4":2.0,"BK9":75.0,"HP8":100.0,"AC5":14.0,"CE7":30.0,"SW8":100.0,"PO3":45.0,"FD6":15.0,"PK6":45.0,"PM9":40.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":42.36538461538461,"success":true},"overallScore":48.663331648562576,"errorMessage":null,"success":true}}
2025-11-21 19:43:01.266 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.266502500Z","nanoTime":27367281187600,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:43:01.266 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:43:01.266 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address="서울특별시 용산구  후암로16나길 17, 용중지구대", latitude=37.534311, longitude=126.994408, geohashId=wydm9bf)
2025-11-21 19:43:01.267 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 9.921457375807954
2025-11-21 19:43:01.268 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9bf
2025-11-21 19:43:01.268 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:43:01.268 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:01.268510300Z","nanoTime":27367283052300,"traceId":"15ad8f5b","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1864700,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["약국이(가) 13m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm9bf","dataSize":20540,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20540,"errorMessage":null,"success":true}}
2025-11-21 19:43:01.269 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:43:05.717 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:43:05.717 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5446, longitude=127.0558, radius=500)
2025-11-21 19:43:05.717 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:43:05.717 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5446, longitude=127.0558, radius=500
2025-11-21 19:43:05.717 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.717838900Z","nanoTime":27371732156900,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:43:05.717 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:43:05.717 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5446, lon=127.0558
2025-11-21 19:43:05.717 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.717838900Z","nanoTime":27371732290900,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:43:05.717 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.717838900Z","nanoTime":27371732393700,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":102800,"duration_ms":0,"resultData":{"latitude":37.5446,"longitude":127.0558,"precision":7,"centerHash":"wydme4z","adjacentHashes":["wydme4z","wydme5p","wydme70","wydme6b","wydme68","wydme4x","wydme4w","wydme4y","wydme5n"],"errorMessage":null,"success":true}}
2025-11-21 19:43:05.717 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydme4z, wydme5p, wydme70, wydme6b, wydme68, wydme4x, wydme4w, wydme4y, wydme5n]
2025-11-21 19:43:05.718 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydme4z
2025-11-21 19:43:05.718 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.718821200Z","nanoTime":27371732621500,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":464600,"duration_ms":0,"resultData":{"requestLatitude":37.5446,"requestLongitude":127.0558,"requestRadius":500,"centerGeohashId":"wydme4z","nineBlockGeohashes":["wydme4z","wydme5p","wydme70","wydme6b","wydme68","wydme4x","wydme4w","wydme4y","wydme5n"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:43:05.718 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.718821200Z","nanoTime":27371732751800,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:43:05.718 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:43:05.718 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydme4z
2025-11-21 19:43:05.718 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4632ms)
2025-11-21 19:43:05.718 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:43:05.720 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:43:05.720 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:43:05.720 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.5079ms, 역직렬화: 0.0ms
2025-11-21 19:43:05.720 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:43:05.720 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.720822200Z","nanoTime":27371734992800,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2241000,"duration_ms":2,"resultData":{"centerGeohashId":"wydme4z","nineBlockGeohashes":["wydme4z","wydme5p","wydme70","wydme6b","wydme68","wydme4x","wydme4w","wydme4y","wydme5n"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydme4z","hit":false,"valueSize":0,"l1CacheGetDurationNs":463200,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydme4z","cacheKey":"data:wydme4z:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":225800},{"geohashId":"wydme5p","cacheKey":"data:wydme5p:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":252800},{"geohashId":"wydme70","cacheKey":"data:wydme70:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":190400},{"geohashId":"wydme6b","cacheKey":"data:wydme6b:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":163100},{"geohashId":"wydme68","cacheKey":"data:wydme68:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":130300},{"geohashId":"wydme4x","cacheKey":"data:wydme4x:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":123900},{"geohashId":"wydme4w","cacheKey":"data:wydme4w:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":123500},{"geohashId":"wydme4y","cacheKey":"data:wydme4y:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":119700},{"geohashId":"wydme5n","cacheKey":"data:wydme5n:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":118900}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1507900,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:43:05.720 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.720822200Z","nanoTime":27371735173600,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:43:05.720 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:43:05.720 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:43:05.726 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 21건
2025-11-21 19:43:05.729 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:43:05.729 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:43:05.730 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.729825200Z","nanoTime":27371744301000,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":9127400,"duration_ms":9,"resultData":{"inputCctvMissGrids":["wydme4z","wydme5p","wydme70","wydme6b","wydme68","wydme4x","wydme4w","wydme4y","wydme5n"],"cctvQueryResult":{"queryGeohashIds":["wydme4z","wydme5p","wydme70","wydme6b","wydme68","wydme4x","wydme4w","wydme4y","wydme5n"],"totalRowsReturned":21,"rowsPerGrid":{"wydme6b":1,"wydme4z":1,"wydme5n":3,"wydme70":2,"wydme68":3,"wydme4w":3,"wydme4x":3,"wydme4y":5},"queryExecutionTimeNs":5476700,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydme6b","cacheKey":"data:wydme6b:cctv","dataCount":1,"dataSize":136,"errorMessage":null,"success":true},{"geohashId":"wydme4z","cacheKey":"data:wydme4z:cctv","dataCount":1,"dataSize":136,"errorMessage":null,"success":true},{"geohashId":"wydme5n","cacheKey":"data:wydme5n:cctv","dataCount":3,"dataSize":403,"errorMessage":null,"success":true},{"geohashId":"wydme70","cacheKey":"data:wydme70:cctv","dataCount":2,"dataSize":265,"errorMessage":null,"success":true},{"geohashId":"wydme68","cacheKey":"data:wydme68:cctv","dataCount":3,"dataSize":336,"errorMessage":null,"success":true},{"geohashId":"wydme4w","cacheKey":"data:wydme4w:cctv","dataCount":3,"dataSize":404,"errorMessage":null,"success":true},{"geohashId":"wydme4x","cacheKey":"data:wydme4x:cctv","dataCount":3,"dataSize":400,"errorMessage":null,"success":true},{"geohashId":"wydme4y","cacheKey":"data:wydme4y:cctv","dataCount":5,"dataSize":642,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:43:05.730 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.730830300Z","nanoTime":27371744649900,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:43:05.730 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:43:05.730 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5446, 127.0558)
2025-11-21 19:43:05.730 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:43:05.789 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:43:05.789 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:43:05.790 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:43:05.790 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5446, 127.0558), 반경: 500m
2025-11-21 19:43:05.871 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:43:05.871 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 138건
2025-11-21 19:43:05.872 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:43:05.872 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:43:05.872 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 19:43:05.872 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 미스 - DB 조회
2025-11-21 19:43:05.875 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 성공 및 캐싱 완료 - 성동구: 0.745164096
2025-11-21 19:43:05.875 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:43:05.875 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:43:05.875 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:43:05.875 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 19:43:05.876 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.875940800Z","nanoTime":27371890596000,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":145946100,"duration_ms":145,"resultData":{"latitude":37.5446,"longitude":127.0558,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":145783700,"addressApiResult":{"cached":false,"cacheKey":"address:37.5446:127.0558","roadAddress":"서울특별시 성동구 아차산로 100","jibunAddress":"서울 성동구 성수동2가 300-1","responseSize":74,"executionTimeNs":59369900,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":3244700,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5446:127.0558:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":4,"CS2":15,"SC4":0,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":15,"OL7":1,"PM9":8},"totalPlaces":138,"responseSize":15916,"executionTimeNs":83169100,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:05.876 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.876946700Z","nanoTime":27371890919300,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:43:05.876 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:43:05.876 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:43:05.876 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 21개
2025-11-21 19:43:05.876 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 21개 (총 카메라 대수: 67대)
2025-11-21 19:43:05.876 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:43:05.945 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구  당산로 221 (거리: 406m)
2025-11-21 19:43:05.945 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:43:05.945 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:43:05.945 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:43:05.945 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:43:05.946 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.945948200Z","nanoTime":27371960622300,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":69703000,"duration_ms":69,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":21,"totalCctvAfterFilter":21,"totalCameraCount":67,"filterRate":1.0,"filterExecutionTimeNs":26000,"success":true},"policeQuery":{"queryDurationNs":69148800,"found":true,"nearestAddress":"서울특별시 영등포구  당산로 221","nearestDistance":405.63099651108564,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":4,"CS2":15,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":15,"OL7":1,"PM9":8},"placesAfterFilter":{"CT1":15,"AT4":4,"CS2":15,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":15,"OL7":1,"PM9":8},"totalBeforeFilter":138,"totalAfterFilter":138,"filterRate":1.0,"filterExecutionTimeNs":147800,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:05.946 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.946942600Z","nanoTime":27371960945600,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:43:05.946 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:43:05.946 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 65.14, 편의성: 38.95, 종합: 52.05
2025-11-21 19:43:05.946 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.946942600Z","nanoTime":27371961298000,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":352400,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":49.296125436114295,"policeDistance":405.63099651108564,"cctvScore":70.0,"cctvCount":21,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":65.14376051083428,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":12.0,"CS2":5.333162672127825,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":64.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":38.952368762294846,"success":true},"overallScore":52.04806463656456,"errorMessage":null,"success":true}}
2025-11-21 19:43:05.946 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.946942600Z","nanoTime":27371961543900,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:43:05.947 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:43:05.947 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구  당산로 221, latitude=37.548221, longitude=127.055242, geohashId=wydme5q)
2025-11-21 19:43:05.947 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 405.63099651108564
2025-11-21 19:43:05.948 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydme4z
2025-11-21 19:43:05.948 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:43:05.950 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:05.948944800Z","nanoTime":27371963693500,"traceId":"80174d73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":2149600,"duration_ms":2,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["지하철역이(가) 24m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydme4z","dataSize":19088,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19088,"errorMessage":null,"success":true}}
2025-11-21 19:43:05.950 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:43:10.902 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:43:10.902 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5709, longitude=126.992, radius=500)
2025-11-21 19:43:10.902 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:43:10.902 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5709, longitude=126.992, radius=500
2025-11-21 19:43:10.902 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:10.902610200Z","nanoTime":27376916870500,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:43:10.902 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:43:10.902 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5709, lon=126.992
2025-11-21 19:43:10.902 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:10.902610200Z","nanoTime":27376917007100,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:43:10.902 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:10.902610200Z","nanoTime":27376917105000,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":97900,"duration_ms":0,"resultData":{"latitude":37.5709,"longitude":126.992,"precision":7,"centerHash":"wydm9z8","adjacentHashes":["wydm9z8","wydm9zb","wydm9zc","wydm9z9","wydm9z3","wydm9z2","wydm9xr","wydm9xx","wydm9xz"],"errorMessage":null,"success":true}}
2025-11-21 19:43:10.902 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9z8, wydm9zb, wydm9zc, wydm9z9, wydm9z3, wydm9z2, wydm9xr, wydm9xx, wydm9xz]
2025-11-21 19:43:10.902 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9z8
2025-11-21 19:43:10.903 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:10.902610200Z","nanoTime":27376917326800,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":456300,"duration_ms":0,"resultData":{"requestLatitude":37.5709,"requestLongitude":126.992,"requestRadius":500,"centerGeohashId":"wydm9z8","nineBlockGeohashes":["wydm9z8","wydm9zb","wydm9zc","wydm9z9","wydm9z3","wydm9z2","wydm9xr","wydm9xx","wydm9xz"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:43:10.903 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:10.903609100Z","nanoTime":27376917461500,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:43:10.903 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:43:10.903 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9z8
2025-11-21 19:43:10.903 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.6074ms)
2025-11-21 19:43:10.903 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:43:10.906 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:43:10.906 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:43:10.906 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.6617ms, 역직렬화: 0.0ms
2025-11-21 19:43:10.906 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:43:10.907 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:10.906877Z","nanoTime":27376921040800,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3579300,"duration_ms":3,"resultData":{"centerGeohashId":"wydm9z8","nineBlockGeohashes":["wydm9z8","wydm9zb","wydm9zc","wydm9z9","wydm9z3","wydm9z2","wydm9xr","wydm9xx","wydm9xz"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9z8","hit":false,"valueSize":0,"l1CacheGetDurationNs":607400,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9z8","cacheKey":"data:wydm9z8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":453100},{"geohashId":"wydm9zb","cacheKey":"data:wydm9zb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":325400},{"geohashId":"wydm9zc","cacheKey":"data:wydm9zc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":334100},{"geohashId":"wydm9z9","cacheKey":"data:wydm9z9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":303400},{"geohashId":"wydm9z3","cacheKey":"data:wydm9z3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":288000},{"geohashId":"wydm9z2","cacheKey":"data:wydm9z2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":231700},{"geohashId":"wydm9xr","cacheKey":"data:wydm9xr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":213800},{"geohashId":"wydm9xx","cacheKey":"data:wydm9xx:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":221900},{"geohashId":"wydm9xz","cacheKey":"data:wydm9xz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":194500}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2661700,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:43:10.907 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:10.907419800Z","nanoTime":27376921360000,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:43:10.907 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:43:10.907 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:43:10.912 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 20건
2025-11-21 19:43:10.915 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:43:10.915 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:43:10.915 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:10.915803600Z","nanoTime":27376929783700,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":8423700,"duration_ms":8,"resultData":{"inputCctvMissGrids":["wydm9z8","wydm9zb","wydm9zc","wydm9z9","wydm9z3","wydm9z2","wydm9xr","wydm9xx","wydm9xz"],"cctvQueryResult":{"queryGeohashIds":["wydm9z8","wydm9zb","wydm9zc","wydm9z9","wydm9z3","wydm9z2","wydm9xr","wydm9xx","wydm9xz"],"totalRowsReturned":20,"rowsPerGrid":{"wydm9xz":5,"wydm9z3":2,"wydm9z2":2,"wydm9zb":4,"wydm9xr":2,"wydm9xx":1,"wydm9z9":2,"wydm9z8":2},"queryExecutionTimeNs":4915500,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9xz","cacheKey":"data:wydm9xz:cctv","dataCount":5,"dataSize":639,"errorMessage":null,"success":true},{"geohashId":"wydm9z3","cacheKey":"data:wydm9z3:cctv","dataCount":2,"dataSize":258,"errorMessage":null,"success":true},{"geohashId":"wydm9z2","cacheKey":"data:wydm9z2:cctv","dataCount":2,"dataSize":226,"errorMessage":null,"success":true},{"geohashId":"wydm9zb","cacheKey":"data:wydm9zb:cctv","dataCount":4,"dataSize":483,"errorMessage":null,"success":true},{"geohashId":"wydm9xr","cacheKey":"data:wydm9xr:cctv","dataCount":2,"dataSize":226,"errorMessage":null,"success":true},{"geohashId":"wydm9xx","cacheKey":"data:wydm9xx:cctv","dataCount":1,"dataSize":132,"errorMessage":null,"success":true},{"geohashId":"wydm9z9","cacheKey":"data:wydm9z9:cctv","dataCount":2,"dataSize":231,"errorMessage":null,"success":true},{"geohashId":"wydm9z8","cacheKey":"data:wydm9z8:cctv","dataCount":2,"dataSize":241,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:43:10.916 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:10.915803600Z","nanoTime":27376930059600,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:43:10.916 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:43:10.916 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5709, 126.992)
2025-11-21 19:43:10.916 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:43:10.967 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:43:10.967 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:43:10.967 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:43:10.967 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5709, 126.992), 반경: 500m
2025-11-21 19:43:11.053 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:43:11.053 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 152건
2025-11-21 19:43:11.054 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:43:11.055 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:43:11.055 [http-nio-8185-exec-6] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:43:11.055 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:43:11.055 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:43:11.055 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:43:11.055 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:43:11.055 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:11.055694900Z","nanoTime":27377069603500,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":139543900,"duration_ms":139,"resultData":{"latitude":37.5709,"longitude":126.992,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":139356800,"addressApiResult":{"cached":false,"cacheKey":"address:37.5709:126.992","roadAddress":"주소 없음","jibunAddress":"서울 종로구 묘동 20-5","responseSize":57,"executionTimeNs":51738900,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":73400,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5709:126.992:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":14,"CS2":15,"SC4":0,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":5,"FD6":15,"PK6":15,"OL7":0,"PM9":9},"totalPlaces":152,"responseSize":17628,"executionTimeNs":87544500,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:11.055 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:11.055694900Z","nanoTime":27377069955100,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:43:11.055 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:43:11.055 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:43:11.055 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 20개
2025-11-21 19:43:11.055 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 20개 (총 카메라 대수: 45대)
2025-11-21 19:43:11.055 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:43:11.124 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 종로구  종로17길 4 종로2가파출소 (거리: 275m)
2025-11-21 19:43:11.124 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:43:11.124 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:43:11.124 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 12개 카테고리
2025-11-21 19:43:11.124 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:43:11.124 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:11.124714300Z","nanoTime":27377139104500,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":69149400,"duration_ms":69,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":20,"totalCctvAfterFilter":20,"totalCameraCount":45,"filterRate":1.0,"filterExecutionTimeNs":15900,"success":true},"policeQuery":{"queryDurationNs":68640500,"found":true,"nearestAddress":"서울특별시 종로구  종로17길 4 종로2가파출소","nearestDistance":274.91169467788285,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":14,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SW8":4,"PO3":5,"FD6":15,"PK6":15,"PM9":9},"placesAfterFilter":{"CT1":15,"AT4":14,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SW8":4,"PO3":5,"FD6":15,"PK6":15,"PM9":9},"totalBeforeFilter":152,"totalAfterFilter":152,"filterRate":1.0,"filterExecutionTimeNs":142300,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:11.124 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:11.124714300Z","nanoTime":27377139310400,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:43:11.124 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:43:11.125 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 46.36, 편의성: 47.73, 종합: 47.04
2025-11-21 19:43:11.125 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:11.125712200Z","nanoTime":27377139632700,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":322300,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":65.63603816526464,"policeDistance":274.91169467788285,"cctvScore":66.66666666666666,"cctvCount":20,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":46.35747811624606,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":42.0,"BK9":75.0,"HP8":100.0,"CS2":3.75,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":15.0,"FD6":15.0,"PK6":45.0,"PM9":72.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":47.729166666666664,"success":true},"overallScore":47.04332239145636,"errorMessage":null,"success":true}}
2025-11-21 19:43:11.125 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:11.125712200Z","nanoTime":27377139813000,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:43:11.125 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:43:11.125 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 종로구  종로17길 4 종로2가파출소, latitude=37.570504, longitude=126.988921, geohashId=wydm9xw)
2025-11-21 19:43:11.125 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 274.91169467788285
2025-11-21 19:43:11.126 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9z8
2025-11-21 19:43:11.126 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:43:11.126 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:11.126712500Z","nanoTime":27377141192300,"traceId":"c3b70168","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1379300,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["병원이(가) 27m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm9z8","dataSize":20168,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20168,"errorMessage":null,"success":true}}
2025-11-21 19:43:11.126 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:43:15.217 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:43:15.217 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5276, longitude=127.0397, radius=500)
2025-11-21 19:43:15.218 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:43:15.218 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5276, longitude=127.0397, radius=500
2025-11-21 19:43:15.218 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.218468600Z","nanoTime":27381232291900,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:43:15.218 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:43:15.218 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5276, lon=127.0397
2025-11-21 19:43:15.218 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.218468600Z","nanoTime":27381232438500,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:43:15.218 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.218468600Z","nanoTime":27381232616500,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":178000,"duration_ms":0,"resultData":{"latitude":37.5276,"longitude":127.0397,"precision":7,"centerHash":"wydm6ze","adjacentHashes":["wydm6ze","wydm6zg","wydm6zu","wydm6zs","wydm6zk","wydm6z7","wydm6z6","wydm6zd","wydm6zf"],"errorMessage":null,"success":true}}
2025-11-21 19:43:15.218 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm6ze, wydm6zg, wydm6zu, wydm6zs, wydm6zk, wydm6z7, wydm6z6, wydm6zd, wydm6zf]
2025-11-21 19:43:15.218 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm6ze
2025-11-21 19:43:15.218 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.218468600Z","nanoTime":27381232813300,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":521400,"duration_ms":0,"resultData":{"requestLatitude":37.5276,"requestLongitude":127.0397,"requestRadius":500,"centerGeohashId":"wydm6ze","nineBlockGeohashes":["wydm6ze","wydm6zg","wydm6zu","wydm6zs","wydm6zk","wydm6z7","wydm6z6","wydm6zd","wydm6zf"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:43:15.218 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.218468600Z","nanoTime":27381232882900,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:43:15.218 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:43:15.218 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm6ze
2025-11-21 19:43:15.219 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5818ms)
2025-11-21 19:43:15.219 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:43:15.220 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:43:15.220 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:43:15.220 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.4861ms, 역직렬화: 0.0ms
2025-11-21 19:43:15.220 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:43:15.221 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.221469Z","nanoTime":27381235220800,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2337900,"duration_ms":2,"resultData":{"centerGeohashId":"wydm6ze","nineBlockGeohashes":["wydm6ze","wydm6zg","wydm6zu","wydm6zs","wydm6zk","wydm6z7","wydm6z6","wydm6zd","wydm6zf"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm6ze","hit":false,"valueSize":0,"l1CacheGetDurationNs":581800,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm6ze","cacheKey":"data:wydm6ze:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":249400},{"geohashId":"wydm6zg","cacheKey":"data:wydm6zg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":204700},{"geohashId":"wydm6zu","cacheKey":"data:wydm6zu:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":145700},{"geohashId":"wydm6zs","cacheKey":"data:wydm6zs:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":147100},{"geohashId":"wydm6zk","cacheKey":"data:wydm6zk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":151700},{"geohashId":"wydm6z7","cacheKey":"data:wydm6z7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":141300},{"geohashId":"wydm6z6","cacheKey":"data:wydm6z6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":130500},{"geohashId":"wydm6zd","cacheKey":"data:wydm6zd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":130500},{"geohashId":"wydm6zf","cacheKey":"data:wydm6zf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":127700}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1486100,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:43:15.221 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.221469Z","nanoTime":27381235411800,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:43:15.221 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:43:15.221 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:43:15.226 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 48건
2025-11-21 19:43:15.229 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:43:15.229 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:43:15.230 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.229468900Z","nanoTime":27381244128400,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":8716600,"duration_ms":8,"resultData":{"inputCctvMissGrids":["wydm6ze","wydm6zg","wydm6zu","wydm6zs","wydm6zk","wydm6z7","wydm6z6","wydm6zd","wydm6zf"],"cctvQueryResult":{"queryGeohashIds":["wydm6ze","wydm6zg","wydm6zu","wydm6zs","wydm6zk","wydm6z7","wydm6z6","wydm6zd","wydm6zf"],"totalRowsReturned":48,"rowsPerGrid":{"wydm6z6":3,"wydm6zf":3,"wydm6ze":9,"wydm6zu":3,"wydm6zd":6,"wydm6zs":6,"wydm6z7":6,"wydm6zg":6,"wydm6zk":6},"queryExecutionTimeNs":5474100,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm6z6","cacheKey":"data:wydm6z6:cctv","dataCount":3,"dataSize":406,"errorMessage":null,"success":true},{"geohashId":"wydm6zf","cacheKey":"data:wydm6zf:cctv","dataCount":3,"dataSize":409,"errorMessage":null,"success":true},{"geohashId":"wydm6ze","cacheKey":"data:wydm6ze:cctv","dataCount":9,"dataSize":1225,"errorMessage":null,"success":true},{"geohashId":"wydm6zu","cacheKey":"data:wydm6zu:cctv","dataCount":3,"dataSize":406,"errorMessage":null,"success":true},{"geohashId":"wydm6zd","cacheKey":"data:wydm6zd:cctv","dataCount":6,"dataSize":823,"errorMessage":null,"success":true},{"geohashId":"wydm6zs","cacheKey":"data:wydm6zs:cctv","dataCount":6,"dataSize":805,"errorMessage":null,"success":true},{"geohashId":"wydm6z7","cacheKey":"data:wydm6z7:cctv","dataCount":6,"dataSize":814,"errorMessage":null,"success":true},{"geohashId":"wydm6zg","cacheKey":"data:wydm6zg:cctv","dataCount":6,"dataSize":814,"errorMessage":null,"success":true},{"geohashId":"wydm6zk","cacheKey":"data:wydm6zk:cctv","dataCount":6,"dataSize":808,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:43:15.230 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.230468300Z","nanoTime":27381244526300,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:43:15.230 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:43:15.230 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5276, 127.0397)
2025-11-21 19:43:15.230 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:43:15.308 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:43:15.308 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:43:15.309 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:43:15.309 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5276, 127.0397), 반경: 500m
2025-11-21 19:43:15.397 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:43:15.397 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 146건
2025-11-21 19:43:15.398 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:43:15.399 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:43:15.399 [http-nio-8185-exec-5] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:43:15.399 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:43:15.399 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:43:15.399 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:43:15.399 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:43:15.399 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.399584Z","nanoTime":27381413460600,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":168934300,"duration_ms":168,"resultData":{"latitude":37.5276,"longitude":127.0397,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":168779600,"addressApiResult":{"cached":false,"cacheKey":"address:37.5276:127.0397","roadAddress":"주소 없음","jibunAddress":"서울 강남구 신사동 668-33","responseSize":60,"executionTimeNs":78300300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":28500,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5276:127.0397:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":6,"CS2":15,"SC4":2,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":1,"FD6":15,"PK6":15,"OL7":0,"PM9":14},"totalPlaces":146,"responseSize":16938,"executionTimeNs":90450800,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:15.399 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.399584Z","nanoTime":27381413675800,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:43:15.399 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:43:15.399 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:43:15.399 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 48개
2025-11-21 19:43:15.399 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 48개 (총 카메라 대수: 141대)
2025-11-21 19:43:15.399 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:43:15.480 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 강남구 학동로 169 (거리: 409m)
2025-11-21 19:43:15.480 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:43:15.480 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:43:15.480 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:43:15.480 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:43:15.480 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.480184700Z","nanoTime":27381494363500,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":80687700,"duration_ms":80,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":48,"totalCctvAfterFilter":48,"totalCameraCount":141,"filterRate":1.0,"filterExecutionTimeNs":19600,"success":true},"policeQuery":{"queryDurationNs":80169000,"found":true,"nearestAddress":"서울특별시 강남구 학동로 169","nearestDistance":408.97969932762777,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":6,"CS2":15,"SC4":2,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":1,"FD6":15,"PK6":15,"PM9":14},"placesAfterFilter":{"CT1":15,"AT4":6,"CS2":15,"SC4":2,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":1,"FD6":15,"PK6":15,"PM9":14},"totalBeforeFilter":146,"totalAfterFilter":146,"filterRate":1.0,"filterExecutionTimeNs":177800,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:15.480 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.480184700Z","nanoTime":27381494635800,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:43:15.480 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:43:15.481 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 54.66, 편의성: 42.05, 종합: 48.36
2025-11-21 19:43:15.481 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.481157300Z","nanoTime":27381494988600,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":352800,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":48.87753758404653,"policeDistance":408.97969932762777,"cctvScore":100.0,"cctvCount":48,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":54.663261275213955,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":18.0,"CS2":3.75,"SC4":4.0,"MT1":20.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":3.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":42.05357142857143,"success":true},"overallScore":48.35841635189269,"errorMessage":null,"success":true}}
2025-11-21 19:43:15.481 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.481157300Z","nanoTime":27381495261700,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:43:15.481 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:43:15.481 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 강남구 학동로 169, latitude=37.529343, longitude=127.035616, geohashId=wydmdb0)
2025-11-21 19:43:15.481 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 408.97969932762777
2025-11-21 19:43:15.483 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm6ze
2025-11-21 19:43:15.483 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:43:15.483 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:15.483110300Z","nanoTime":27381497462800,"traceId":"e5b69683","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":2201100,"duration_ms":2,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["은행이(가) 17m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm6ze","dataSize":23732,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":23732,"errorMessage":null,"success":true}}
2025-11-21 19:43:15.483 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:43:20.135 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:43:20.135 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5087, longitude=127.0633, radius=500)
2025-11-21 19:43:20.135 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:43:20.135 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5087, longitude=127.0633, radius=500
2025-11-21 19:43:20.135 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:20.135583800Z","nanoTime":27386149702200,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:43:20.135 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:43:20.135 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5087, lon=127.0633
2025-11-21 19:43:20.135 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:20.135583800Z","nanoTime":27386149838800,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:43:20.135 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:20.135583800Z","nanoTime":27386149945600,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":106800,"duration_ms":0,"resultData":{"latitude":37.5087,"longitude":127.0633,"precision":7,"centerHash":"wydm7kk","adjacentHashes":["wydm7kk","wydm7ks","wydm7kt","wydm7km","wydm7kj","wydm7kh","wydm7k5","wydm7k7","wydm7ke"],"errorMessage":null,"success":true}}
2025-11-21 19:43:20.135 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm7kk, wydm7ks, wydm7kt, wydm7km, wydm7kj, wydm7kh, wydm7k5, wydm7k7, wydm7ke]
2025-11-21 19:43:20.135 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm7kk
2025-11-21 19:43:20.135 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:20.135583800Z","nanoTime":27386150151400,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":449200,"duration_ms":0,"resultData":{"requestLatitude":37.5087,"requestLongitude":127.0633,"requestRadius":500,"centerGeohashId":"wydm7kk","nineBlockGeohashes":["wydm7kk","wydm7ks","wydm7kt","wydm7km","wydm7kj","wydm7kh","wydm7k5","wydm7k7","wydm7ke"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:43:20.135 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:20.135583800Z","nanoTime":27386150236500,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:43:20.135 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:43:20.135 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm7kk
2025-11-21 19:43:20.136 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4667ms)
2025-11-21 19:43:20.136 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:43:20.138 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:43:20.138 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:43:20.138 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.6331ms, 역직렬화: 0.0ms
2025-11-21 19:43:20.138 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:43:20.138 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:20.138583400Z","nanoTime":27386152565300,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2328800,"duration_ms":2,"resultData":{"centerGeohashId":"wydm7kk","nineBlockGeohashes":["wydm7kk","wydm7ks","wydm7kt","wydm7km","wydm7kj","wydm7kh","wydm7k5","wydm7k7","wydm7ke"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm7kk","hit":false,"valueSize":0,"l1CacheGetDurationNs":466700,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm7kk","cacheKey":"data:wydm7kk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":290100},{"geohashId":"wydm7ks","cacheKey":"data:wydm7ks:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":173300},{"geohashId":"wydm7kt","cacheKey":"data:wydm7kt:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":145800},{"geohashId":"wydm7km","cacheKey":"data:wydm7km:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":134800},{"geohashId":"wydm7kj","cacheKey":"data:wydm7kj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":126700},{"geohashId":"wydm7kh","cacheKey":"data:wydm7kh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":178000},{"geohashId":"wydm7k5","cacheKey":"data:wydm7k5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":157600},{"geohashId":"wydm7k7","cacheKey":"data:wydm7k7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":172100},{"geohashId":"wydm7ke","cacheKey":"data:wydm7ke:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":192900}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1633100,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:43:20.138 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:20.138583400Z","nanoTime":27386152740900,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:43:20.138 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:43:20.138 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:43:20.143 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 16건
2025-11-21 19:43:20.144 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:43:20.144 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 6개
2025-11-21 19:43:20.145 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:20.144603100Z","nanoTime":27386159311100,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6570200,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydm7kk","wydm7ks","wydm7kt","wydm7km","wydm7kj","wydm7kh","wydm7k5","wydm7k7","wydm7ke"],"cctvQueryResult":{"queryGeohashIds":["wydm7kk","wydm7ks","wydm7kt","wydm7km","wydm7kj","wydm7kh","wydm7k5","wydm7k7","wydm7ke"],"totalRowsReturned":16,"rowsPerGrid":{"wydm7k5":3,"wydm7ke":2,"wydm7kh":3,"wydm7k7":3,"wydm7km":3,"wydm7kk":2},"queryExecutionTimeNs":4582300,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm7k5","cacheKey":"data:wydm7k5:cctv","dataCount":3,"dataSize":412,"errorMessage":null,"success":true},{"geohashId":"wydm7ke","cacheKey":"data:wydm7ke:cctv","dataCount":2,"dataSize":271,"errorMessage":null,"success":true},{"geohashId":"wydm7kh","cacheKey":"data:wydm7kh:cctv","dataCount":3,"dataSize":409,"errorMessage":null,"success":true},{"geohashId":"wydm7k7","cacheKey":"data:wydm7k7:cctv","dataCount":3,"dataSize":409,"errorMessage":null,"success":true},{"geohashId":"wydm7km","cacheKey":"data:wydm7km:cctv","dataCount":3,"dataSize":412,"errorMessage":null,"success":true},{"geohashId":"wydm7kk","cacheKey":"data:wydm7kk:cctv","dataCount":2,"dataSize":273,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:43:20.145 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:20.145585400Z","nanoTime":27386159504300,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:43:20.145 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:43:20.145 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5087, 127.0633)
2025-11-21 19:43:20.145 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:43:20.208 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:43:20.208 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:43:20.208 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:43:20.208 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5087, 127.0633), 반경: 500m
2025-11-21 19:43:21.246 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:43:21.247 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 143건
2025-11-21 19:43:21.248 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:43:21.248 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:43:21.248 [http-nio-8185-exec-4] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:43:21.248 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:43:21.248 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:43:21.248 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:43:21.248 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:43:21.248 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:21.248420100Z","nanoTime":27387262556500,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":1103052200,"duration_ms":1103,"resultData":{"latitude":37.5087,"longitude":127.0633,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":1102923000,"addressApiResult":{"cached":false,"cacheKey":"address:37.5087:127.0633","roadAddress":"주소 없음","jibunAddress":"서울 강남구 대치동 1011","responseSize":58,"executionTimeNs":63063300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":36800,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5087:127.0633:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":1,"CS2":15,"SC4":3,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":5,"FD6":15,"PK6":15,"OL7":1,"PM9":12},"totalPlaces":143,"responseSize":16733,"executionTimeNs":1039822900,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:21.248 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:21.248420100Z","nanoTime":27387262755200,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:43:21.248 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:43:21.248 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:43:21.248 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 16개
2025-11-21 19:43:21.248 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 16개 (총 카메라 대수: 42대)
2025-11-21 19:43:21.248 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:43:21.314 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중랑구  사가정로41길 45 (면목3.8파출소) (거리: 732m)
2025-11-21 19:43:21.314 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:43:21.314 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:43:21.314 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:43:21.314 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:43:21.315 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:21.314411800Z","nanoTime":27387329143800,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":66388600,"duration_ms":66,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":16,"totalCctvAfterFilter":16,"totalCameraCount":42,"filterRate":1.0,"filterExecutionTimeNs":13100,"success":true},"policeQuery":{"queryDurationNs":65935100,"found":true,"nearestAddress":"서울특별시 중랑구  사가정로41길 45 (면목3.8파출소)","nearestDistance":731.8782490022119,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":1,"CS2":15,"SC4":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":5,"FD6":15,"PK6":15,"OL7":1,"PM9":12},"placesAfterFilter":{"CT1":15,"AT4":1,"CS2":15,"SC4":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":5,"FD6":15,"PK6":15,"OL7":1,"PM9":12},"totalBeforeFilter":143,"totalAfterFilter":143,"filterRate":1.0,"filterExecutionTimeNs":122400,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:21.315 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:21.315407500Z","nanoTime":27387329459000,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:43:21.315 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:43:21.315 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 23.89, 편의성: 40.63, 종합: 32.26
2025-11-21 19:43:21.315 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:21.315407500Z","nanoTime":27387329849600,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":390600,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":8.515218874723516,"policeDistance":731.8782490022119,"cctvScore":53.333333333333336,"cctvCount":16,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":23.88789899575039,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":3.0,"CS2":3.75,"SC4":6.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":15.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":96.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":40.625,"success":true},"overallScore":32.256449497875195,"errorMessage":null,"success":true}}
2025-11-21 19:43:21.315 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:21.315407500Z","nanoTime":27387330050100,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:43:21.315 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:43:21.315 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중랑구  사가정로41길 45 (면목3.8파출소), latitude=37.514908, longitude=127.060543, geohashId=wydm7m6)
2025-11-21 19:43:21.316 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 731.8782490022119
2025-11-21 19:43:21.317 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm7kk
2025-11-21 19:43:21.317 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:43:21.317 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:21.317433900Z","nanoTime":27387331711700,"traceId":"1dba7ba2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1661600,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["지하철역이(가) 28m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm7kk","dataSize":20053,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20053,"errorMessage":null,"success":true}}
2025-11-21 19:43:21.317 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:43:25.014 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:43:25.014 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5612, longitude=127.0377, radius=500)
2025-11-21 19:43:25.014 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:43:25.014 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5612, longitude=127.0377, radius=500
2025-11-21 19:43:25.017 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.014507Z","nanoTime":27391029104600,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:43:25.017 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:43:25.017 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5612, lon=127.0377
2025-11-21 19:43:25.018 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.018511900Z","nanoTime":27391032271100,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:43:25.018 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.018511900Z","nanoTime":27391032399800,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":128700,"duration_ms":0,"resultData":{"latitude":37.5612,"longitude":127.0377,"precision":7,"centerHash":"wydmdvf","adjacentHashes":["wydmdvf","wydmdy4","wydmdy5","wydmdvg","wydmdve","wydmdvd","wydmdv9","wydmdvc","wydmdy1"],"errorMessage":null,"success":true}}
2025-11-21 19:43:25.018 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdvf, wydmdy4, wydmdy5, wydmdvg, wydmdve, wydmdvd, wydmdv9, wydmdvc, wydmdy1]
2025-11-21 19:43:25.018 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdvf
2025-11-21 19:43:25.018 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.018511900Z","nanoTime":27391032578000,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":3473400,"duration_ms":3,"resultData":{"requestLatitude":37.5612,"requestLongitude":127.0377,"requestRadius":500,"centerGeohashId":"wydmdvf","nineBlockGeohashes":["wydmdvf","wydmdy4","wydmdy5","wydmdvg","wydmdve","wydmdvd","wydmdv9","wydmdvc","wydmdy1"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:43:25.018 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.018511900Z","nanoTime":27391032670300,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:43:25.018 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:43:25.018 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdvf
2025-11-21 19:43:25.018 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4638ms)
2025-11-21 19:43:25.019 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:43:25.020 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:43:25.020 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:43:25.020 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.7466ms, 역직렬화: 0.0ms
2025-11-21 19:43:25.020 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:43:25.021 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.020487500Z","nanoTime":27391035234700,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2564400,"duration_ms":2,"resultData":{"centerGeohashId":"wydmdvf","nineBlockGeohashes":["wydmdvf","wydmdy4","wydmdy5","wydmdvg","wydmdve","wydmdvd","wydmdv9","wydmdvc","wydmdy1"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdvf","hit":false,"valueSize":0,"l1CacheGetDurationNs":463800,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdvf","cacheKey":"data:wydmdvf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":262800},{"geohashId":"wydmdy4","cacheKey":"data:wydmdy4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":203900},{"geohashId":"wydmdy5","cacheKey":"data:wydmdy5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":191100},{"geohashId":"wydmdvg","cacheKey":"data:wydmdvg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":165200},{"geohashId":"wydmdve","cacheKey":"data:wydmdve:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":182600},{"geohashId":"wydmdvd","cacheKey":"data:wydmdvd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":194300},{"geohashId":"wydmdv9","cacheKey":"data:wydmdv9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":162500},{"geohashId":"wydmdvc","cacheKey":"data:wydmdvc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":147000},{"geohashId":"wydmdy1","cacheKey":"data:wydmdy1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":161000}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1746600,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:43:25.021 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.021491800Z","nanoTime":27391035543500,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:43:25.021 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:43:25.021 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:43:25.025 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 21건
2025-11-21 19:43:25.027 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:43:25.027 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 6개
2025-11-21 19:43:25.027 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.027506300Z","nanoTime":27391041515300,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5971800,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydmdvf","wydmdy4","wydmdy5","wydmdvg","wydmdve","wydmdvd","wydmdv9","wydmdvc","wydmdy1"],"cctvQueryResult":{"queryGeohashIds":["wydmdvf","wydmdy4","wydmdy5","wydmdvg","wydmdve","wydmdvd","wydmdv9","wydmdvc","wydmdy1"],"totalRowsReturned":21,"rowsPerGrid":{"wydmdy5":3,"wydmdvc":5,"wydmdy1":3,"wydmdv9":1,"wydmdve":6,"wydmdvg":3},"queryExecutionTimeNs":3909000,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdy5","cacheKey":"data:wydmdy5:cctv","dataCount":3,"dataSize":399,"errorMessage":null,"success":true},{"geohashId":"wydmdvc","cacheKey":"data:wydmdvc:cctv","dataCount":5,"dataSize":660,"errorMessage":null,"success":true},{"geohashId":"wydmdy1","cacheKey":"data:wydmdy1:cctv","dataCount":3,"dataSize":383,"errorMessage":null,"success":true},{"geohashId":"wydmdv9","cacheKey":"data:wydmdv9:cctv","dataCount":1,"dataSize":133,"errorMessage":null,"success":true},{"geohashId":"wydmdve","cacheKey":"data:wydmdve:cctv","dataCount":6,"dataSize":728,"errorMessage":null,"success":true},{"geohashId":"wydmdvg","cacheKey":"data:wydmdvg:cctv","dataCount":3,"dataSize":395,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:43:25.027 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.027506300Z","nanoTime":27391041793200,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:43:25.027 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:43:25.027 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5612, 127.0377)
2025-11-21 19:43:25.027 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:43:25.106 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:43:25.106 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:43:25.107 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:43:25.107 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5612, 127.0377), 반경: 500m
2025-11-21 19:43:25.189 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:43:25.189 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 147건
2025-11-21 19:43:25.191 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:43:25.191 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:43:25.191 [http-nio-8185-exec-3] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:43:25.191 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:43:25.191 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:43:25.191 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:43:25.191 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:43:25.191 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.191883900Z","nanoTime":27391205971900,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":164178700,"duration_ms":164,"resultData":{"latitude":37.5612,"longitude":127.0377,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":163903800,"addressApiResult":{"cached":false,"cacheKey":"address:37.5612:127.0377","roadAddress":"주소 없음","jibunAddress":"서울 성동구 행당동 168-151","responseSize":61,"executionTimeNs":79404400,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":65900,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5612:127.0377:500","categoryCount":15,"placesByCategory":{"CT1":6,"AT4":3,"CS2":15,"SC4":3,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":7,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalPlaces":147,"responseSize":17057,"executionTimeNs":84433500,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:25.191 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.191883900Z","nanoTime":27391206388900,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:43:25.191 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:43:25.191 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:43:25.191 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 21개
2025-11-21 19:43:25.191 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 21개 (총 카메라 대수: 64대)
2025-11-21 19:43:25.191 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:43:25.261 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구  선유로 95 (거리: 375m)
2025-11-21 19:43:25.261 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:43:25.261 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:43:25.261 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:43:25.261 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:43:25.261 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.261866800Z","nanoTime":27391275990900,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":69602000,"duration_ms":69,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":21,"totalCctvAfterFilter":21,"totalCameraCount":64,"filterRate":1.0,"filterExecutionTimeNs":16100,"success":true},"policeQuery":{"queryDurationNs":69104700,"found":true,"nearestAddress":"서울특별시 영등포구  선유로 95","nearestDistance":374.7953776933087,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":6,"AT4":3,"CS2":15,"SC4":3,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":7,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"placesAfterFilter":{"CT1":6,"AT4":3,"CS2":15,"SC4":3,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":7,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalBeforeFilter":147,"totalAfterFilter":147,"filterRate":1.0,"filterExecutionTimeNs":138800,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:25.261 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.261866800Z","nanoTime":27391276234600,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:43:25.261 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:43:25.261 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 43.95, 편의성: 38.58, 종합: 41.26
2025-11-21 19:43:25.262 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.261866800Z","nanoTime":27391276555600,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":321000,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":53.15057778833642,"policeDistance":374.7953776933087,"cctvScore":70.0,"cctvCount":21,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":43.94517333650093,"success":true},"convenienceScore":{"categoryScores":{"CT1":24.0,"AT4":9.0,"CS2":3.75,"SC4":6.0,"MT1":30.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":21.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":38.583333333333336,"success":true},"overallScore":41.26425333491713,"errorMessage":null,"success":true}}
2025-11-21 19:43:25.262 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.262883300Z","nanoTime":27391276700100,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:43:25.262 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:43:25.262 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구  선유로 95, latitude=37.560301, longitude=127.041798, geohashId=wydmdvt)
2025-11-21 19:43:25.262 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 374.7953776933087
2025-11-21 19:43:25.263 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdvf
2025-11-21 19:43:25.263 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:43:25.263 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:25.263868300Z","nanoTime":27391278308600,"traceId":"c1bfac2f","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1608500,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["공공기관이(가) 27m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdvf","dataSize":20502,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20502,"errorMessage":null,"success":true}}
2025-11-21 19:43:25.263 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:43:29.585 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:43:29.585 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.4764, longitude=126.9814, radius=500)
2025-11-21 19:43:29.585 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:43:29.585 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.4764, longitude=126.9814, radius=500
2025-11-21 19:43:29.585 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.585532900Z","nanoTime":27395599805400,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:43:29.585 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:43:29.585 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.4764, lon=126.9814
2025-11-21 19:43:29.585 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.585532900Z","nanoTime":27395599937200,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:43:29.586 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.585532900Z","nanoTime":27395600028600,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":91400,"duration_ms":0,"resultData":{"latitude":37.4764,"longitude":126.9814,"precision":7,"centerHash":"wydm1w3","adjacentHashes":["wydm1w3","wydm1w9","wydm1wd","wydm1w6","wydm1w4","wydm1w1","wydm1w0","wydm1w2","wydm1w8"],"errorMessage":null,"success":true}}
2025-11-21 19:43:29.586 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm1w3, wydm1w9, wydm1wd, wydm1w6, wydm1w4, wydm1w1, wydm1w0, wydm1w2, wydm1w8]
2025-11-21 19:43:29.586 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm1w3
2025-11-21 19:43:29.587 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.586533300Z","nanoTime":27395600910000,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":1104600,"duration_ms":1,"resultData":{"requestLatitude":37.4764,"requestLongitude":126.9814,"requestRadius":500,"centerGeohashId":"wydm1w3","nineBlockGeohashes":["wydm1w3","wydm1w9","wydm1wd","wydm1w6","wydm1w4","wydm1w1","wydm1w0","wydm1w2","wydm1w8"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:43:29.587 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.587532800Z","nanoTime":27395601671400,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:43:29.587 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:43:29.587 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm1w3
2025-11-21 19:43:29.587 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4456ms)
2025-11-21 19:43:29.587 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:43:29.589 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:43:29.589 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:43:29.589 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.6714ms, 역직렬화: 0.0ms
2025-11-21 19:43:29.589 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:43:29.592 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.589535600Z","nanoTime":27395604027300,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2355900,"duration_ms":2,"resultData":{"centerGeohashId":"wydm1w3","nineBlockGeohashes":["wydm1w3","wydm1w9","wydm1wd","wydm1w6","wydm1w4","wydm1w1","wydm1w0","wydm1w2","wydm1w8"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm1w3","hit":false,"valueSize":0,"l1CacheGetDurationNs":445600,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm1w3","cacheKey":"data:wydm1w3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":263500},{"geohashId":"wydm1w9","cacheKey":"data:wydm1w9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":210700},{"geohashId":"wydm1wd","cacheKey":"data:wydm1wd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":168700},{"geohashId":"wydm1w6","cacheKey":"data:wydm1w6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":138400},{"geohashId":"wydm1w4","cacheKey":"data:wydm1w4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":152700},{"geohashId":"wydm1w1","cacheKey":"data:wydm1w1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":133100},{"geohashId":"wydm1w0","cacheKey":"data:wydm1w0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":185400},{"geohashId":"wydm1w2","cacheKey":"data:wydm1w2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":153200},{"geohashId":"wydm1w8","cacheKey":"data:wydm1w8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":170200}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1671400,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:43:29.592 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.592534800Z","nanoTime":27395606934200,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:43:29.592 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:43:29.592 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:43:29.599 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 60건
2025-11-21 19:43:29.602 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:43:29.602 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:43:29.604 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.602532Z","nanoTime":27395616409200,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":9475000,"duration_ms":9,"resultData":{"inputCctvMissGrids":["wydm1w3","wydm1w9","wydm1wd","wydm1w6","wydm1w4","wydm1w1","wydm1w0","wydm1w2","wydm1w8"],"cctvQueryResult":{"queryGeohashIds":["wydm1w3","wydm1w9","wydm1wd","wydm1w6","wydm1w4","wydm1w1","wydm1w0","wydm1w2","wydm1w8"],"totalRowsReturned":60,"rowsPerGrid":{"wydm1w4":1,"wydm1wd":18,"wydm1w3":3,"wydm1w2":5,"wydm1w1":4,"wydm1w8":4,"wydm1w6":3,"wydm1w9":20,"wydm1w0":2},"queryExecutionTimeNs":6245700,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm1w4","cacheKey":"data:wydm1w4:cctv","dataCount":1,"dataSize":138,"errorMessage":null,"success":true},{"geohashId":"wydm1wd","cacheKey":"data:wydm1wd:cctv","dataCount":18,"dataSize":2491,"errorMessage":null,"success":true},{"geohashId":"wydm1w3","cacheKey":"data:wydm1w3:cctv","dataCount":3,"dataSize":376,"errorMessage":null,"success":true},{"geohashId":"wydm1w2","cacheKey":"data:wydm1w2:cctv","dataCount":5,"dataSize":573,"errorMessage":null,"success":true},{"geohashId":"wydm1w1","cacheKey":"data:wydm1w1:cctv","dataCount":4,"dataSize":553,"errorMessage":null,"success":true},{"geohashId":"wydm1w8","cacheKey":"data:wydm1w8:cctv","dataCount":4,"dataSize":579,"errorMessage":null,"success":true},{"geohashId":"wydm1w6","cacheKey":"data:wydm1w6:cctv","dataCount":3,"dataSize":415,"errorMessage":null,"success":true},{"geohashId":"wydm1w9","cacheKey":"data:wydm1w9:cctv","dataCount":20,"dataSize":2767,"errorMessage":null,"success":true},{"geohashId":"wydm1w0","cacheKey":"data:wydm1w0:cctv","dataCount":2,"dataSize":197,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:43:29.604 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.604532Z","nanoTime":27395618726000,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:43:29.604 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:43:29.604 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.4764, 126.9814)
2025-11-21 19:43:29.605 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:43:29.685 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:43:29.685 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:43:29.685 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:43:29.685 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.4764, 126.9814), 반경: 500m
2025-11-21 19:43:29.776 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:43:29.776 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 137건
2025-11-21 19:43:29.777 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:43:29.777 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:43:29.777 [http-nio-8185-exec-7] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:43:29.777 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:43:29.777 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:43:29.777 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:43:29.777 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:43:29.780 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.777712900Z","nanoTime":27395792290600,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":173564600,"duration_ms":173,"resultData":{"latitude":37.4764,"longitude":126.9814,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":173414400,"addressApiResult":{"cached":false,"cacheKey":"address:37.4764:126.9814","roadAddress":"주소 없음","jibunAddress":"서울 관악구 남현동 1130-1","responseSize":60,"executionTimeNs":81139800,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":38800,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.4764:126.9814:500","categoryCount":15,"placesByCategory":{"CT1":5,"AT4":3,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":3,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"totalPlaces":137,"responseSize":15882,"executionTimeNs":92235800,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:29.781 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.781731600Z","nanoTime":27395795553400,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:43:29.781 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:43:29.781 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:43:29.781 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 60개
2025-11-21 19:43:29.781 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 60개 (총 카메라 대수: 78대)
2025-11-21 19:43:29.781 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:43:29.850 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 송파구 위례순환로 369 (거리: 345m)
2025-11-21 19:43:29.850 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:43:29.850 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:43:29.850 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:43:29.850 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:43:29.852 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.850735Z","nanoTime":27395864797400,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":69244000,"duration_ms":69,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":60,"totalCctvAfterFilter":60,"totalCameraCount":78,"filterRate":1.0,"filterExecutionTimeNs":29700,"success":true},"policeQuery":{"queryDurationNs":68724300,"found":true,"nearestAddress":"서울특별시 송파구 위례순환로 369","nearestDistance":345.1132241530111,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":5,"AT4":3,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":3,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"placesAfterFilter":{"CT1":5,"AT4":3,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":3,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"totalBeforeFilter":137,"totalAfterFilter":137,"filterRate":1.0,"filterExecutionTimeNs":127100,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:29.852 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.852714Z","nanoTime":27395866961200,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:43:29.852 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:43:29.852 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 57.06, 편의성: 36.25, 종합: 46.65
2025-11-21 19:43:29.855 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.852714Z","nanoTime":27395867239300,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":278100,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":56.86084698087362,"policeDistance":345.1132241530111,"cctvScore":100.0,"cctvCount":60,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":57.05825409426208,"success":true},"convenienceScore":{"categoryScores":{"CT1":20.0,"AT4":9.0,"CS2":3.75,"SC4":2.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":36.25,"success":true},"overallScore":46.65412704713104,"errorMessage":null,"success":true}}
2025-11-21 19:43:29.855 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.855712800Z","nanoTime":27395870297600,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:43:29.855 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:43:29.855 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 송파구 위례순환로 369, latitude=37.479447, longitude=126.982144, geohashId=wydm1wc)
2025-11-21 19:43:29.856 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 345.1132241530111
2025-11-21 19:43:29.857 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm1w3
2025-11-21 19:43:29.857 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:43:29.859 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:29.857732100Z","nanoTime":27395872230300,"traceId":"f153f37c","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1932700,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["지하철역이(가) 23m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm1w3","dataSize":24095,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":24095,"errorMessage":null,"success":true}}
2025-11-21 19:43:29.859 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:43:33.705 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:43:33.705 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.4815, longitude=126.8826, radius=500)
2025-11-21 19:43:33.705 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:43:33.705 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.4815, longitude=126.8826, radius=500
2025-11-21 19:43:33.705 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.705973500Z","nanoTime":27399720111900,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:43:33.705 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:43:33.705 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.4815, lon=126.8826
2025-11-21 19:43:33.705 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.705973500Z","nanoTime":27399720299900,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:43:33.705 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.705973500Z","nanoTime":27399720367400,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":67500,"duration_ms":0,"resultData":{"latitude":37.4815,"longitude":126.8826,"precision":7,"centerHash":"wydjpr3","adjacentHashes":["wydjpr3","wydjpr9","wydjprd","wydjpr6","wydjpr4","wydjpr1","wydjpr0","wydjpr2","wydjpr8"],"errorMessage":null,"success":true}}
2025-11-21 19:43:33.705 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydjpr3, wydjpr9, wydjprd, wydjpr6, wydjpr4, wydjpr1, wydjpr0, wydjpr2, wydjpr8]
2025-11-21 19:43:33.705 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydjpr3
2025-11-21 19:43:33.705 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.705973500Z","nanoTime":27399720524100,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":412200,"duration_ms":0,"resultData":{"requestLatitude":37.4815,"requestLongitude":126.8826,"requestRadius":500,"centerGeohashId":"wydjpr3","nineBlockGeohashes":["wydjpr3","wydjpr9","wydjprd","wydjpr6","wydjpr4","wydjpr1","wydjpr0","wydjpr2","wydjpr8"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:43:33.705 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.705973500Z","nanoTime":27399720627200,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:43:33.705 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:43:33.705 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydjpr3
2025-11-21 19:43:33.707 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5088ms)
2025-11-21 19:43:33.707 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:43:33.708 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:43:33.708 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:43:33.709 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.7248ms, 역직렬화: 0.0ms
2025-11-21 19:43:33.709 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:43:33.709 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.709325900Z","nanoTime":27399723118300,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2491100,"duration_ms":2,"resultData":{"centerGeohashId":"wydjpr3","nineBlockGeohashes":["wydjpr3","wydjpr9","wydjprd","wydjpr6","wydjpr4","wydjpr1","wydjpr0","wydjpr2","wydjpr8"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydjpr3","hit":false,"valueSize":0,"l1CacheGetDurationNs":508800,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydjpr3","cacheKey":"data:wydjpr3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":363300},{"geohashId":"wydjpr9","cacheKey":"data:wydjpr9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":164500},{"geohashId":"wydjprd","cacheKey":"data:wydjprd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":210000},{"geohashId":"wydjpr6","cacheKey":"data:wydjpr6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":160100},{"geohashId":"wydjpr4","cacheKey":"data:wydjpr4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":162400},{"geohashId":"wydjpr1","cacheKey":"data:wydjpr1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":170400},{"geohashId":"wydjpr0","cacheKey":"data:wydjpr0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":132800},{"geohashId":"wydjpr2","cacheKey":"data:wydjpr2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":135700},{"geohashId":"wydjpr8","cacheKey":"data:wydjpr8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":164600}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1724800,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:43:33.709 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.709325900Z","nanoTime":27399723378300,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:43:33.709 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:43:33.709 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:43:33.713 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 17건
2025-11-21 19:43:33.716 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:43:33.716 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 7개
2025-11-21 19:43:33.716 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.716335100Z","nanoTime":27399730442600,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":7064300,"duration_ms":7,"resultData":{"inputCctvMissGrids":["wydjpr3","wydjpr9","wydjprd","wydjpr6","wydjpr4","wydjpr1","wydjpr0","wydjpr2","wydjpr8"],"cctvQueryResult":{"queryGeohashIds":["wydjpr3","wydjpr9","wydjprd","wydjpr6","wydjpr4","wydjpr1","wydjpr0","wydjpr2","wydjpr8"],"totalRowsReturned":17,"rowsPerGrid":{"wydjpr0":1,"wydjpr1":1,"wydjprd":3,"wydjpr3":2,"wydjpr8":1,"wydjpr9":6,"wydjpr6":3},"queryExecutionTimeNs":4086000,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydjpr0","cacheKey":"data:wydjpr0:cctv","dataCount":1,"dataSize":133,"errorMessage":null,"success":true},{"geohashId":"wydjpr1","cacheKey":"data:wydjpr1:cctv","dataCount":1,"dataSize":134,"errorMessage":null,"success":true},{"geohashId":"wydjprd","cacheKey":"data:wydjprd:cctv","dataCount":3,"dataSize":399,"errorMessage":null,"success":true},{"geohashId":"wydjpr3","cacheKey":"data:wydjpr3:cctv","dataCount":2,"dataSize":265,"errorMessage":null,"success":true},{"geohashId":"wydjpr8","cacheKey":"data:wydjpr8:cctv","dataCount":1,"dataSize":133,"errorMessage":null,"success":true},{"geohashId":"wydjpr9","cacheKey":"data:wydjpr9:cctv","dataCount":6,"dataSize":797,"errorMessage":null,"success":true},{"geohashId":"wydjpr6","cacheKey":"data:wydjpr6:cctv","dataCount":3,"dataSize":400,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:43:33.716 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.716335100Z","nanoTime":27399730663200,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:43:33.716 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:43:33.716 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.4815, 126.8826)
2025-11-21 19:43:33.716 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:43:33.825 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:43:33.825 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:43:33.826 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:43:33.826 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.4815, 126.8826), 반경: 500m
2025-11-21 19:43:33.915 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:43:33.915 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 133건
2025-11-21 19:43:33.917 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:43:33.917 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:43:33.917 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 금천구
2025-11-21 19:43:33.917 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 미스 - DB 조회
2025-11-21 19:43:33.921 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 성공 및 캐싱 완료 - 금천구: 0.715492589
2025-11-21 19:43:33.921 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:43:33.921 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:43:33.921 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:43:33.921 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.715492589
2025-11-21 19:43:33.921 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.921080400Z","nanoTime":27399935328200,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":204665000,"duration_ms":204,"resultData":{"latitude":37.4815,"longitude":126.8826,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":204537300,"addressApiResult":{"cached":false,"cacheKey":"address:37.4815:126.8826","roadAddress":"서울특별시 금천구 벚꽃로 309","jibunAddress":"서울 금천구 가산동 468-4","responseSize":71,"executionTimeNs":109155800,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":"arrest_rate:금천구","guName":"금천구","arrestRate":0.715492589,"dataFound":true,"executionTimeNs":4232500,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.4815:126.8826:500","categoryCount":15,"placesByCategory":{"CT1":5,"AT4":1,"CS2":15,"SC4":1,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":0,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalPlaces":133,"responseSize":15515,"executionTimeNs":91149000,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:33.921 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.921080400Z","nanoTime":27399935793100,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:43:33.921 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:43:33.922 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:43:33.922 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 17개
2025-11-21 19:43:33.922 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 17개 (총 카메라 대수: 52대)
2025-11-21 19:43:33.922 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:43:33.994 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 강북구  한천로 969 (거리: 512m)
2025-11-21 19:43:33.994 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:43:33.994 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:43:33.995 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:43:33.995 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:43:33.995 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.995083300Z","nanoTime":27400008907900,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":73114800,"duration_ms":73,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":17,"totalCctvAfterFilter":17,"totalCameraCount":52,"filterRate":1.0,"filterExecutionTimeNs":14200,"success":true},"policeQuery":{"queryDurationNs":72598500,"found":true,"nearestAddress":"서울특별시 강북구  한천로 969","nearestDistance":511.5439425320286,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":5,"AT4":1,"CS2":15,"SC4":1,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"placesAfterFilter":{"CT1":5,"AT4":1,"CS2":15,"SC4":1,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalBeforeFilter":133,"totalAfterFilter":133,"filterRate":1.0,"filterExecutionTimeNs":155500,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:33.995 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.995083300Z","nanoTime":27400009346500,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:43:33.995 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:43:33.995 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 54.95, 편의성: 39.02, 종합: 46.98
2025-11-21 19:43:33.995 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.995083300Z","nanoTime":27400009564500,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":218000,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":36.057007183496424,"policeDistance":511.5439425320286,"cctvScore":56.666666666666664,"cctvCount":17,"arrestRateScore":71.5492589,"arrestRate":0.715492589,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":54.94854649171559,"success":true},"convenienceScore":{"categoryScores":{"CT1":20.0,"AT4":3.0,"CS2":6.274312962730581,"SC4":2.0,"MT1":30.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"금천구","guPopulation":239070,"finalScore":39.01959378305219,"success":true},"overallScore":46.98407013738389,"errorMessage":null,"success":true}}
2025-11-21 19:43:33.995 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.995083300Z","nanoTime":27400009780900,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:43:33.995 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:43:33.995 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 강북구  한천로 969, latitude=37.479934, longitude=126.888051, geohashId=wydjprj)
2025-11-21 19:43:33.996 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 511.5439425320286
2025-11-21 19:43:33.996 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydjpr3
2025-11-21 19:43:33.996 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:43:33.997 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:33.996099600Z","nanoTime":27400010824900,"traceId":"464e29c1","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1044000,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["지하철역이(가) 4m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydjpr3","dataSize":18815,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":18815,"errorMessage":null,"success":true}}
2025-11-21 19:43:33.997 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:43:37.603 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:43:37.604 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5245, longitude=126.896, radius=500)
2025-11-21 19:43:37.604 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:43:37.604 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5245, longitude=126.896, radius=500
2025-11-21 19:43:37.604 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.604144600Z","nanoTime":27403618045100,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:43:37.604 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:43:37.604 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5245, lon=126.896
2025-11-21 19:43:37.604 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.604144600Z","nanoTime":27403618118700,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:43:37.604 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.604144600Z","nanoTime":27403618181900,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":63200,"duration_ms":0,"resultData":{"latitude":37.5245,"longitude":126.896,"precision":7,"centerHash":"wydjrx4","adjacentHashes":["wydjrx4","wydjrx6","wydjrx7","wydjrx5","wydjrwg","wydjrwf","wydjrwc","wydjrx1","wydjrx3"],"errorMessage":null,"success":true}}
2025-11-21 19:43:37.604 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydjrx4, wydjrx6, wydjrx7, wydjrx5, wydjrwg, wydjrwf, wydjrwc, wydjrx1, wydjrx3]
2025-11-21 19:43:37.604 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydjrx4
2025-11-21 19:43:37.604 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.604144600Z","nanoTime":27403618341900,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":296800,"duration_ms":0,"resultData":{"requestLatitude":37.5245,"requestLongitude":126.896,"requestRadius":500,"centerGeohashId":"wydjrx4","nineBlockGeohashes":["wydjrx4","wydjrx6","wydjrx7","wydjrx5","wydjrwg","wydjrwf","wydjrwc","wydjrx1","wydjrx3"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:43:37.604 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.604144600Z","nanoTime":27403618395100,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:43:37.604 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:43:37.604 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydjrx4
2025-11-21 19:43:37.604 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4403ms)
2025-11-21 19:43:37.605 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:43:37.607 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:43:37.607 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:43:37.607 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.1137ms, 역직렬화: 0.0ms
2025-11-21 19:43:37.607 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:43:37.607 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.607129300Z","nanoTime":27403621162000,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2766900,"duration_ms":2,"resultData":{"centerGeohashId":"wydjrx4","nineBlockGeohashes":["wydjrx4","wydjrx6","wydjrx7","wydjrx5","wydjrwg","wydjrwf","wydjrwc","wydjrx1","wydjrx3"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydjrx4","hit":false,"valueSize":0,"l1CacheGetDurationNs":440300,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydjrx4","cacheKey":"data:wydjrx4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":279200},{"geohashId":"wydjrx6","cacheKey":"data:wydjrx6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":219700},{"geohashId":"wydjrx7","cacheKey":"data:wydjrx7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":202500},{"geohashId":"wydjrx5","cacheKey":"data:wydjrx5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":261700},{"geohashId":"wydjrwg","cacheKey":"data:wydjrwg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":212100},{"geohashId":"wydjrwf","cacheKey":"data:wydjrwf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":209100},{"geohashId":"wydjrwc","cacheKey":"data:wydjrwc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":202800},{"geohashId":"wydjrx1","cacheKey":"data:wydjrx1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":228500},{"geohashId":"wydjrx3","cacheKey":"data:wydjrx3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":221500}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2113700,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:43:37.607 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.607129300Z","nanoTime":27403621324000,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:43:37.607 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:43:37.607 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:43:37.612 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 55건
2025-11-21 19:43:37.615 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:43:37.615 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:43:37.615 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.615128200Z","nanoTime":27403629300400,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":7976400,"duration_ms":7,"resultData":{"inputCctvMissGrids":["wydjrx4","wydjrx6","wydjrx7","wydjrx5","wydjrwg","wydjrwf","wydjrwc","wydjrx1","wydjrx3"],"cctvQueryResult":{"queryGeohashIds":["wydjrx4","wydjrx6","wydjrx7","wydjrx5","wydjrwg","wydjrwf","wydjrwc","wydjrx1","wydjrx3"],"totalRowsReturned":55,"rowsPerGrid":{"wydjrx1":7,"wydjrx5":11,"wydjrx4":5,"wydjrx3":2,"wydjrwg":13,"wydjrwf":6,"wydjrx7":8,"wydjrx6":3},"queryExecutionTimeNs":5014700,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydjrx1","cacheKey":"data:wydjrx1:cctv","dataCount":7,"dataSize":880,"errorMessage":null,"success":true},{"geohashId":"wydjrx5","cacheKey":"data:wydjrx5:cctv","dataCount":11,"dataSize":1387,"errorMessage":null,"success":true},{"geohashId":"wydjrx4","cacheKey":"data:wydjrx4:cctv","dataCount":5,"dataSize":630,"errorMessage":null,"success":true},{"geohashId":"wydjrx3","cacheKey":"data:wydjrx3:cctv","dataCount":2,"dataSize":257,"errorMessage":null,"success":true},{"geohashId":"wydjrwg","cacheKey":"data:wydjrwg:cctv","dataCount":13,"dataSize":1671,"errorMessage":null,"success":true},{"geohashId":"wydjrwf","cacheKey":"data:wydjrwf:cctv","dataCount":6,"dataSize":765,"errorMessage":null,"success":true},{"geohashId":"wydjrx7","cacheKey":"data:wydjrx7:cctv","dataCount":8,"dataSize":1033,"errorMessage":null,"success":true},{"geohashId":"wydjrx6","cacheKey":"data:wydjrx6:cctv","dataCount":3,"dataSize":381,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:43:37.615 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.615128200Z","nanoTime":27403629466500,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:43:37.615 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:43:37.615 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5245, 126.896)
2025-11-21 19:43:37.615 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:43:37.694 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:43:37.694 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:43:37.695 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:43:37.695 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5245, 126.896), 반경: 500m
2025-11-21 19:43:37.801 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:43:37.801 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 130건
2025-11-21 19:43:37.802 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:43:37.802 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:43:37.802 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 영등포구
2025-11-21 19:43:37.807 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 영등포구
2025-11-21 19:43:37.808 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:43:37.808 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:43:37.808 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:43:37.808 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.721231491
2025-11-21 19:43:37.808 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.808652800Z","nanoTime":27403822469900,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":193003400,"duration_ms":193,"resultData":{"latitude":37.5245,"longitude":126.896,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":192879100,"addressApiResult":{"cached":false,"cacheKey":"address:37.5245:126.896","roadAddress":"서울특별시 영등포구 양산로 111","jibunAddress":"서울 영등포구 당산동3가 370-4","responseSize":75,"executionTimeNs":79288400,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:영등포구","guName":"영등포구","arrestRate":0.721231491,"dataFound":true,"executionTimeNs":5123100,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5245:126.896:500","categoryCount":15,"placesByCategory":{"CT1":3,"AT4":0,"CS2":15,"SC4":0,"MT1":4,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":5,"FD6":15,"PK6":15,"OL7":0,"PM9":11},"totalPlaces":130,"responseSize":15121,"executionTimeNs":108467600,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:37.808 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.808652800Z","nanoTime":27403822706000,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:43:37.808 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:43:37.808 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:43:37.808 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 55개
2025-11-21 19:43:37.808 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 55개 (총 카메라 대수: 55대)
2025-11-21 19:43:37.808 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:43:37.881 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구  여의공원로 120 여의도지구대 (거리: 591m)
2025-11-21 19:43:37.882 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:43:37.882 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:43:37.882 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 12개 카테고리
2025-11-21 19:43:37.882 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:43:37.882 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.882650300Z","nanoTime":27403896761600,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":74055600,"duration_ms":74,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":55,"totalCctvAfterFilter":55,"totalCameraCount":55,"filterRate":1.0,"filterExecutionTimeNs":28000,"success":true},"policeQuery":{"queryDurationNs":73539800,"found":true,"nearestAddress":"서울특별시 영등포구  여의공원로 120 여의도지구대","nearestDistance":591.2514435977744,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":3,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SW8":2,"PO3":5,"FD6":15,"PK6":15,"MT1":4,"PM9":11},"placesAfterFilter":{"CT1":3,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SW8":2,"PO3":5,"FD6":15,"PK6":15,"MT1":4,"PM9":11},"totalBeforeFilter":130,"totalAfterFilter":130,"filterRate":1.0,"filterExecutionTimeNs":161700,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:37.882 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.882650300Z","nanoTime":27403897055600,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:43:37.882 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:43:37.882 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 69.47, 편의성: 44.90, 종합: 57.18
2025-11-21 19:43:37.883 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.882650300Z","nanoTime":27403897333900,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":278300,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":26.093569550278207,"policeDistance":591.2514435977744,"cctvScore":100.0,"cctvCount":55,"arrestRateScore":72.12314909999999,"arrestRate":0.721231491,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":69.46501559508346,"success":true},"convenienceScore":{"categoryScores":{"CT1":12.0,"BK9":75.0,"HP8":100.0,"CS2":3.7766917690779582,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":15.0,"FD6":15.0,"PK6":45.0,"MT1":40.0,"PM9":88.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"영등포구","guPopulation":397173,"finalScore":44.898057647423165,"success":true},"overallScore":57.181536621253315,"errorMessage":null,"success":true}}
2025-11-21 19:43:37.883 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.883649900Z","nanoTime":27403897637200,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:43:37.883 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:43:37.883 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구  여의공원로 120 여의도지구대, latitude=37.522721, longitude=126.889682, geohashId=wydjrqy)
2025-11-21 19:43:37.883 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 591.2514435977744
2025-11-21 19:43:37.884 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydjrx4
2025-11-21 19:43:37.884 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:43:37.884 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:37.884650700Z","nanoTime":27403899066000,"traceId":"ecca5a4a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1428800,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 15m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydjrx4","dataSize":21713,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":21713,"errorMessage":null,"success":true}}
2025-11-21 19:43:37.884 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:43:41.281 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:43:41.281 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5048, longitude=127.0491, radius=500)
2025-11-21 19:43:41.281 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:43:41.281 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5048, longitude=127.0491, radius=500
2025-11-21 19:43:41.281 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.281846100Z","nanoTime":27407295782600,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:43:41.281 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:43:41.281 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5048, lon=127.0491
2025-11-21 19:43:41.281 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.281846100Z","nanoTime":27407295882500,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:43:41.281 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.281846100Z","nanoTime":27407295946100,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":63600,"duration_ms":0,"resultData":{"latitude":37.5048,"longitude":127.0491,"precision":7,"centerHash":"wydm75d","adjacentHashes":["wydm75d","wydm75f","wydm75g","wydm75e","wydm757","wydm756","wydm753","wydm759","wydm75c"],"errorMessage":null,"success":true}}
2025-11-21 19:43:41.281 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm75d, wydm75f, wydm75g, wydm75e, wydm757, wydm756, wydm753, wydm759, wydm75c]
2025-11-21 19:43:41.281 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm75d
2025-11-21 19:43:41.281 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.281846100Z","nanoTime":27407296074900,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":292300,"duration_ms":0,"resultData":{"requestLatitude":37.5048,"requestLongitude":127.0491,"requestRadius":500,"centerGeohashId":"wydm75d","nineBlockGeohashes":["wydm75d","wydm75f","wydm75g","wydm75e","wydm757","wydm756","wydm753","wydm759","wydm75c"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:43:41.281 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.281846100Z","nanoTime":27407296141800,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:43:41.281 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:43:41.281 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm75d
2025-11-21 19:43:41.282 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4481ms)
2025-11-21 19:43:41.282 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:43:41.283 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:43:41.283 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:43:41.283 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.5745ms, 역직렬화: 0.0ms
2025-11-21 19:43:41.283 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:43:41.283 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.283828900Z","nanoTime":27407298411100,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2269300,"duration_ms":2,"resultData":{"centerGeohashId":"wydm75d","nineBlockGeohashes":["wydm75d","wydm75f","wydm75g","wydm75e","wydm757","wydm756","wydm753","wydm759","wydm75c"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm75d","hit":false,"valueSize":0,"l1CacheGetDurationNs":448100,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm75d","cacheKey":"data:wydm75d:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":235200},{"geohashId":"wydm75f","cacheKey":"data:wydm75f:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":170300},{"geohashId":"wydm75g","cacheKey":"data:wydm75g:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":136700},{"geohashId":"wydm75e","cacheKey":"data:wydm75e:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":178200},{"geohashId":"wydm757","cacheKey":"data:wydm757:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":208400},{"geohashId":"wydm756","cacheKey":"data:wydm756:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":156200},{"geohashId":"wydm753","cacheKey":"data:wydm753:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":132500},{"geohashId":"wydm759","cacheKey":"data:wydm759:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":134600},{"geohashId":"wydm75c","cacheKey":"data:wydm75c:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":154000}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1574500,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:43:41.284 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.284828800Z","nanoTime":27407298584000,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:43:41.284 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:43:41.284 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:43:41.287 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 31건
2025-11-21 19:43:41.289 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:43:41.290 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 7개
2025-11-21 19:43:41.290 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.290834900Z","nanoTime":27407304639400,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6055400,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydm75d","wydm75f","wydm75g","wydm75e","wydm757","wydm756","wydm753","wydm759","wydm75c"],"cctvQueryResult":{"queryGeohashIds":["wydm75d","wydm75f","wydm75g","wydm75e","wydm757","wydm756","wydm753","wydm759","wydm75c"],"totalRowsReturned":31,"rowsPerGrid":{"wydm759":3,"wydm75d":3,"wydm753":3,"wydm757":3,"wydm75g":8,"wydm75f":5,"wydm75e":6},"queryExecutionTimeNs":3774100,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm759","cacheKey":"data:wydm759:cctv","dataCount":3,"dataSize":412,"errorMessage":null,"success":true},{"geohashId":"wydm75d","cacheKey":"data:wydm75d:cctv","dataCount":3,"dataSize":412,"errorMessage":null,"success":true},{"geohashId":"wydm753","cacheKey":"data:wydm753:cctv","dataCount":3,"dataSize":412,"errorMessage":null,"success":true},{"geohashId":"wydm757","cacheKey":"data:wydm757:cctv","dataCount":3,"dataSize":406,"errorMessage":null,"success":true},{"geohashId":"wydm75g","cacheKey":"data:wydm75g:cctv","dataCount":8,"dataSize":1093,"errorMessage":null,"success":true},{"geohashId":"wydm75f","cacheKey":"data:wydm75f:cctv","dataCount":5,"dataSize":679,"errorMessage":null,"success":true},{"geohashId":"wydm75e","cacheKey":"data:wydm75e:cctv","dataCount":6,"dataSize":823,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:43:41.290 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.290834900Z","nanoTime":27407304811500,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:43:41.290 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:43:41.290 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5048, 127.0491)
2025-11-21 19:43:41.290 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:43:41.387 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:43:41.387 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:43:41.388 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:43:41.388 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5048, 127.0491), 반경: 500m
2025-11-21 19:43:41.470 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:43:41.470 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 130건
2025-11-21 19:43:41.471 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:43:41.471 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:43:41.471 [http-nio-8185-exec-10] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:43:41.471 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:43:41.471 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:43:41.471 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:43:41.471 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:43:41.472 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.471419800Z","nanoTime":27407486048200,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":181236700,"duration_ms":181,"resultData":{"latitude":37.5048,"longitude":127.0491,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":181140900,"addressApiResult":{"cached":false,"cacheKey":"address:37.5048:127.0491","roadAddress":"주소 없음","jibunAddress":"서울 강남구 삼성동 172-66","responseSize":60,"executionTimeNs":97593500,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":29500,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5048:127.0491:500","categoryCount":15,"placesByCategory":{"CT1":5,"AT4":0,"CS2":15,"SC4":3,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":0,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":130,"responseSize":15054,"executionTimeNs":83517900,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:41.472 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.472414700Z","nanoTime":27407486215200,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:43:41.472 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:43:41.472 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:43:41.472 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 31개
2025-11-21 19:43:41.472 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 31개 (총 카메라 대수: 105대)
2025-11-21 19:43:41.472 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:43:41.541 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 은평구  통일로 737 (거리: 611m)
2025-11-21 19:43:41.541 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:43:41.542 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:43:41.542 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 11개 카테고리
2025-11-21 19:43:41.542 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:43:41.542 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.542447300Z","nanoTime":27407556386100,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":70170900,"duration_ms":70,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":31,"totalCctvAfterFilter":31,"totalCameraCount":105,"filterRate":1.0,"filterExecutionTimeNs":19100,"success":true},"policeQuery":{"queryDurationNs":69715400,"found":true,"nearestAddress":"서울특별시 은평구  통일로 737","nearestDistance":611.435347972041,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":5,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SC4":3,"SW8":2,"FD6":15,"PK6":15,"PM9":15},"placesAfterFilter":{"CT1":5,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SC4":3,"SW8":2,"FD6":15,"PK6":15,"PM9":15},"totalBeforeFilter":130,"totalAfterFilter":130,"filterRate":1.0,"filterExecutionTimeNs":125500,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:41.542 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.542447300Z","nanoTime":27407556639100,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:43:41.542 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:43:41.542 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 47.07, 편의성: 46.34, 종합: 46.71
2025-11-21 19:43:41.542 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.542447300Z","nanoTime":27407556952700,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":313600,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":23.57058150349488,"policeDistance":611.435347972041,"cctvScore":100.0,"cctvCount":31,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":47.07117445104846,"success":true},"convenienceScore":{"categoryScores":{"CT1":20.0,"BK9":75.0,"HP8":100.0,"CS2":3.75,"AC5":15.0,"CE7":30.0,"SC4":6.0,"SW8":100.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":46.34090909090909,"success":true},"overallScore":46.70604177097878,"errorMessage":null,"success":true}}
2025-11-21 19:43:41.542 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.542447300Z","nanoTime":27407557081200,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:43:41.542 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:43:41.542 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 은평구  통일로 737, latitude=37.501333, longitude=127.04372, geohashId=wydm6fy)
2025-11-21 19:43:41.542 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 611.435347972041
2025-11-21 19:43:41.544 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm75d
2025-11-21 19:43:41.544 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:43:41.544 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:41.544420700Z","nanoTime":27407558368800,"traceId":"d05d3011","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1287600,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["병원이(가) 19m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm75d","dataSize":19645,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19645,"errorMessage":null,"success":true}}
2025-11-21 19:43:41.544 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:43:44.913 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:43:44.913 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.4854, longitude=126.9013, radius=500)
2025-11-21 19:43:44.914 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:43:44.914 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.4854, longitude=126.9013, radius=500
2025-11-21 19:43:44.914 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:44.914582800Z","nanoTime":27410928401500,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:43:44.914 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:43:44.914 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.4854, lon=126.9013
2025-11-21 19:43:44.914 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:44.914582800Z","nanoTime":27410928498700,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:43:44.914 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:44.914582800Z","nanoTime":27410928606900,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":108200,"duration_ms":0,"resultData":{"latitude":37.4854,"longitude":126.9013,"precision":7,"centerHash":"wydjr8n","adjacentHashes":["wydjr8n","wydjr8q","wydjr8r","wydjr8p","wydjpxz","wydjpxy","wydjpxv","wydjr8j","wydjr8m"],"errorMessage":null,"success":true}}
2025-11-21 19:43:44.914 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydjr8n, wydjr8q, wydjr8r, wydjr8p, wydjpxz, wydjpxy, wydjpxv, wydjr8j, wydjr8m]
2025-11-21 19:43:44.914 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydjr8n
2025-11-21 19:43:44.914 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:44.914582800Z","nanoTime":27410928801600,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":400100,"duration_ms":0,"resultData":{"requestLatitude":37.4854,"requestLongitude":126.9013,"requestRadius":500,"centerGeohashId":"wydjr8n","nineBlockGeohashes":["wydjr8n","wydjr8q","wydjr8r","wydjr8p","wydjpxz","wydjpxy","wydjpxv","wydjr8j","wydjr8m"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:43:44.914 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:44.914582800Z","nanoTime":27410928889900,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:43:44.914 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:43:44.914 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydjr8n
2025-11-21 19:43:44.915 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4513ms)
2025-11-21 19:43:44.915 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:43:44.916 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:43:44.916 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:43:44.916 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.2526ms, 역직렬화: 0.0ms
2025-11-21 19:43:44.916 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:43:44.916 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:44.916581500Z","nanoTime":27410930821000,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1931100,"duration_ms":1,"resultData":{"centerGeohashId":"wydjr8n","nineBlockGeohashes":["wydjr8n","wydjr8q","wydjr8r","wydjr8p","wydjpxz","wydjpxy","wydjpxv","wydjr8j","wydjr8m"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydjr8n","hit":false,"valueSize":0,"l1CacheGetDurationNs":451300,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydjr8n","cacheKey":"data:wydjr8n:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":256500},{"geohashId":"wydjr8q","cacheKey":"data:wydjr8q:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":138600},{"geohashId":"wydjr8r","cacheKey":"data:wydjr8r:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":123400},{"geohashId":"wydjr8p","cacheKey":"data:wydjr8p:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":113000},{"geohashId":"wydjpxz","cacheKey":"data:wydjpxz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":112500},{"geohashId":"wydjpxy","cacheKey":"data:wydjpxy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":112900},{"geohashId":"wydjpxv","cacheKey":"data:wydjpxv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":120300},{"geohashId":"wydjr8j","cacheKey":"data:wydjr8j:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":113200},{"geohashId":"wydjr8m","cacheKey":"data:wydjr8m:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":112100}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1252600,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:43:44.916 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:44.916581500Z","nanoTime":27410930955900,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:43:44.916 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:43:44.916 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:43:44.921 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 59건
2025-11-21 19:43:44.925 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:43:44.925 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:43:44.925 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:44.925582900Z","nanoTime":27410939552800,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":8596900,"duration_ms":8,"resultData":{"inputCctvMissGrids":["wydjr8n","wydjr8q","wydjr8r","wydjr8p","wydjpxz","wydjpxy","wydjpxv","wydjr8j","wydjr8m"],"cctvQueryResult":{"queryGeohashIds":["wydjr8n","wydjr8q","wydjr8r","wydjr8p","wydjpxz","wydjpxy","wydjpxv","wydjr8j","wydjr8m"],"totalRowsReturned":59,"rowsPerGrid":{"wydjr8p":7,"wydjr8q":12,"wydjr8n":2,"wydjpxv":2,"wydjr8r":11,"wydjpxz":2,"wydjpxy":5,"wydjr8m":8,"wydjr8j":10},"queryExecutionTimeNs":5264600,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydjr8p","cacheKey":"data:wydjr8p:cctv","dataCount":7,"dataSize":987,"errorMessage":null,"success":true},{"geohashId":"wydjr8q","cacheKey":"data:wydjr8q:cctv","dataCount":12,"dataSize":1593,"errorMessage":null,"success":true},{"geohashId":"wydjr8n","cacheKey":"data:wydjr8n:cctv","dataCount":2,"dataSize":255,"errorMessage":null,"success":true},{"geohashId":"wydjpxv","cacheKey":"data:wydjpxv:cctv","dataCount":2,"dataSize":271,"errorMessage":null,"success":true},{"geohashId":"wydjr8r","cacheKey":"data:wydjr8r:cctv","dataCount":11,"dataSize":1489,"errorMessage":null,"success":true},{"geohashId":"wydjpxz","cacheKey":"data:wydjpxz:cctv","dataCount":2,"dataSize":272,"errorMessage":null,"success":true},{"geohashId":"wydjpxy","cacheKey":"data:wydjpxy:cctv","dataCount":5,"dataSize":685,"errorMessage":null,"success":true},{"geohashId":"wydjr8m","cacheKey":"data:wydjr8m:cctv","dataCount":8,"dataSize":1036,"errorMessage":null,"success":true},{"geohashId":"wydjr8j","cacheKey":"data:wydjr8j:cctv","dataCount":10,"dataSize":1360,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:43:44.925 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:44.925582900Z","nanoTime":27410939799300,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:43:44.925 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:43:44.925 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.4854, 126.9013)
2025-11-21 19:43:44.925 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:43:44.991 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:43:44.991 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:43:44.991 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:43:44.991 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.4854, 126.9013), 반경: 500m
2025-11-21 19:43:45.084 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:43:45.084 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 131건
2025-11-21 19:43:45.085 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:43:45.085 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:43:45.085 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 구로구
2025-11-21 19:43:45.085 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 미스 - DB 조회
2025-11-21 19:43:45.089 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 성공 및 캐싱 완료 - 구로구: 0.704705259
2025-11-21 19:43:45.089 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:43:45.089 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:43:45.089 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:43:45.089 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.704705259
2025-11-21 19:43:45.089 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:45.089672400Z","nanoTime":27411104223700,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":164424400,"duration_ms":164,"resultData":{"latitude":37.4854,"longitude":126.9013,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":164269500,"addressApiResult":{"cached":false,"cacheKey":"address:37.4854:126.9013","roadAddress":"서울특별시 구로구 도림천로 477","jibunAddress":"서울 구로구 구로동 810-3","responseSize":72,"executionTimeNs":65438100,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":"arrest_rate:구로구","guName":"구로구","arrestRate":0.704705259,"dataFound":true,"executionTimeNs":4332300,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.4854:126.9013:500","categoryCount":15,"placesByCategory":{"CT1":3,"AT4":3,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":14},"totalPlaces":131,"responseSize":15332,"executionTimeNs":94499100,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:45.090 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:45.090665700Z","nanoTime":27411104422200,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:43:45.090 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:43:45.090 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:43:45.090 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 59개
2025-11-21 19:43:45.090 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 59개 (총 카메라 대수: 73대)
2025-11-21 19:43:45.090 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:43:45.159 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구  동작대로9길 35 (거리: 433m)
2025-11-21 19:43:45.160 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:43:45.160 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:43:45.160 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:43:45.160 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:43:45.160 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:45.160665300Z","nanoTime":27411174682900,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":70260700,"duration_ms":70,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":59,"totalCctvAfterFilter":59,"totalCameraCount":73,"filterRate":1.0,"filterExecutionTimeNs":32500,"success":true},"policeQuery":{"queryDurationNs":69685500,"found":true,"nearestAddress":"서울특별시 동작구  동작대로9길 35","nearestDistance":432.65409157883056,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":3,"AT4":3,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":14},"placesAfterFilter":{"CT1":3,"AT4":3,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":14},"totalBeforeFilter":131,"totalAfterFilter":131,"filterRate":1.0,"filterExecutionTimeNs":183700,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:43:45.160 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:45.160665300Z","nanoTime":27411174898500,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:43:45.160 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:43:45.160 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 74.92, 편의성: 35.18, 종합: 55.05
2025-11-21 19:43:45.160 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:45.160665300Z","nanoTime":27411175122400,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":223900,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":45.91823855264618,"policeDistance":432.65409157883056,"cctvScore":100.0,"cctvCount":59,"arrestRateScore":70.4705259,"arrestRate":0.704705259,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":74.91662933579386,"success":true},"convenienceScore":{"categoryScores":{"CT1":12.0,"AT4":9.0,"CS2":3.6415191446799833,"SC4":2.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":6.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"구로구","guPopulation":411916,"finalScore":35.176101276312,"success":true},"overallScore":55.04636530605293,"errorMessage":null,"success":true}}
2025-11-21 19:43:45.160 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:45.160665300Z","nanoTime":27411175243900,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:43:45.160 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:43:45.160 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구  동작대로9길 35, latitude=37.486642, longitude=126.905947, geohashId=wydjrb4)
2025-11-21 19:43:45.160 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 432.65409157883056
2025-11-21 19:43:45.162 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydjr8n
2025-11-21 19:43:45.162 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:43:45.162 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:43:45.162670900Z","nanoTime":27411176565700,"traceId":"fcfa3244","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1321800,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["지하철역이(가) 22m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydjr8n","dataSize":23586,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":23586,"errorMessage":null,"success":true}}
2025-11-21 19:43:45.162 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:43:58.470 [SpringApplicationShutdownHook] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 스레드 풀 종료 시작
2025-11-21 19:43:58.471 [SpringApplicationShutdownHook] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 스레드 풀 종료 완료
2025-11-21 19:43:58.472 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-21 19:43:58.474 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-21 19:43:58.481 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-21 19:53:08.239 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-11-21 19:53:08.268 [main] INFO  c.wherehouse.WherehouseApplication - Starting WherehouseApplication using Java 17.0.11 with PID 16348 (E:\devSpace\SpringBootProjects\wherehouse_SpringBoot-master\wherehouse\build\classes\java\main started by wjdqj in E:\devSpace\SpringBootProjects\wherehouse_SpringBoot-master\wherehouse)
2025-11-21 19:53:08.268 [main] INFO  c.wherehouse.WherehouseApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-21 19:53:08.869 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-21 19:53:08.870 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2025-11-21 19:53:08.905 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.BoardEntityRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:53:08.906 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.CommentEntityRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:53:08.907 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.ArrestRateRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:53:08.907 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.CctvGeoRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:53:08.908 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.PoliceOfficeGeoRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:53:08.909 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.JWT.Repository.UserEntityRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:53:08.909 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.members.dao.MemberEntityRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:53:08.910 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisCrimeRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:53:08.911 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisEntertainmentRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:53:08.912 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisPopulationDensityRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:53:08.912 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.restapi.mapdata.dao.MapDataEntityRepository; If you want this repository to be a Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ElasticsearchRepository
2025-11-21 19:53:08.913 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 39 ms. Found 0 Elasticsearch repository interfaces.
2025-11-21 19:53:08.917 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-21 19:53:08.917 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2025-11-21 19:53:08.928 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.BoardEntityRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:53:08.928 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.CommentEntityRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:53:08.928 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.ArrestRateRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:53:08.928 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.CctvGeoRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:53:08.928 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.PoliceOfficeGeoRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:53:08.928 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.JWT.Repository.UserEntityRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:53:08.928 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.members.dao.MemberEntityRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:53:08.928 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisCrimeRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:53:08.928 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisEntertainmentRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:53:08.929 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisPopulationDensityRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:53:08.929 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Reactive Elasticsearch - Could not safely identify store assignment for repository candidate interface com.wherehouse.restapi.mapdata.dao.MapDataEntityRepository; If you want this repository to be a Reactive Elasticsearch repository, consider annotating your entities with one of these annotations: org.springframework.data.elasticsearch.annotations.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.elasticsearch.repository.ReactiveElasticsearchRepository
2025-11-21 19:53:08.929 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11 ms. Found 0 Reactive Elasticsearch repository interfaces.
2025-11-21 19:53:08.943 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-21 19:53:08.943 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2025-11-21 19:53:08.954 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.BoardEntityRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:53:08.954 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.CommentEntityRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:53:08.954 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.ArrestRateRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:53:08.954 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.CctvGeoRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:53:08.954 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.PoliceOfficeGeoRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:53:08.954 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.JWT.Repository.UserEntityRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:53:08.954 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.members.dao.MemberEntityRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:53:08.955 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisCrimeRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:53:08.955 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisEntertainmentRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:53:08.955 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisPopulationDensityRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:53:08.955 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.wherehouse.restapi.mapdata.dao.MapDataEntityRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2025-11-21 19:53:08.955 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 0 JDBC repository interfaces.
2025-11-21 19:53:08.961 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-21 19:53:08.961 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-21 19:53:09.066 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 103 ms. Found 11 JPA repository interfaces.
2025-11-21 19:53:09.077 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-21 19:53:09.079 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-21 19:53:09.095 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.BoardEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:53:09.096 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.board.dao.CommentEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:53:09.096 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.ArrestRateRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:53:09.096 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.CctvGeoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:53:09.096 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.information.dao.PoliceOfficeGeoRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:53:09.096 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.JWT.Repository.UserEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:53:09.096 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.members.dao.MemberEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:53:09.096 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisCrimeRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:53:09.096 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisEntertainmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:53:09.096 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.recommand.batch.repository.AnalysisPopulationDensityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:53:09.097 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.wherehouse.restapi.mapdata.dao.MapDataEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-21 19:53:09.097 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
2025-11-21 19:53:09.589 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8185 (http)
2025-11-21 19:53:09.598 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8185"]
2025-11-21 19:53:09.602 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-21 19:53:09.603 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.31]
2025-11-21 19:53:09.788 [main] INFO  o.apache.jasper.servlet.TldScanner - At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.
2025-11-21 19:53:09.793 [main] INFO  o.a.c.c.C.[.[.[/wherehouse] - Initializing Spring embedded WebApplicationContext
2025-11-21 19:53:09.794 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1496 ms
2025-11-21 19:53:09.956 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-21 19:53:09.995 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-11-21 19:53:10.021 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-21 19:53:10.311 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-21 19:53:10.332 [main] WARN  com.zaxxer.hikari.HikariConfig - HikariPool-1 - idleTimeout has been set but has no effect because the pool is operating as a fixed size pool.
2025-11-21 19:53:10.333 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-21 19:53:10.497 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection oracle.jdbc.driver.T4CConnection@4f7ef948
2025-11-21 19:53:10.498 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-21 19:53:10.585 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: OracleDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-21 19:53:11.521 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-21 19:53:11.525 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-21 19:53:11.684 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-21 19:53:12.630 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name userAuthenticationProvider
2025-11-21 19:53:12.631 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-11-21 19:53:13.357 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8185"]
2025-11-21 19:53:13.374 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8185 (http) with context path '/wherehouse'
2025-11-21 19:53:13.388 [main] INFO  c.wherehouse.WherehouseApplication - Started WherehouseApplication in 5.497 seconds (process running for 5.911)
2025-11-21 19:53:21.405 [http-nio-8185-exec-1] INFO  o.a.c.c.C.[.[.[/wherehouse] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-21 19:53:21.406 [http-nio-8185-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-21 19:53:21.408 [http-nio-8185-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-11-21 19:53:21.564 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:21.564 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56596098772487, longitude=127.00667816650197, radius=500)
2025-11-21 19:53:21.564 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:21.564 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56596098772487, longitude=127.00667816650197, radius=500
2025-11-21 19:53:21.572 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:21.566415400Z","nanoTime":27987580386600,"traceId":"375cd594","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:21.574 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:21.574 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56596098772487, lon=127.00667816650197
2025-11-21 19:53:21.576 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:21.574053300Z","nanoTime":27987589116600,"traceId":"375cd594","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:21.595 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:21.579286Z","nanoTime":27987593792700,"traceId":"375cd594","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":4676100,"duration_ms":4,"resultData":{"latitude":37.56596098772487,"longitude":127.00667816650197,"precision":7,"centerHash":"wydmdne","adjacentHashes":["wydmdne","wydmdng","wydmdnu","wydmdns","wydmdnk","wydmdn7","wydmdn6","wydmdnd","wydmdnf"],"errorMessage":null,"success":true}}
2025-11-21 19:53:21.595 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdne, wydmdng, wydmdnu, wydmdns, wydmdnk, wydmdn7, wydmdn6, wydmdnd, wydmdnf]
2025-11-21 19:53:21.595 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdne
2025-11-21 19:53:21.598 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:21.595104Z","nanoTime":27987610481000,"traceId":"375cd594","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":30094400,"duration_ms":30,"resultData":{"requestLatitude":37.56596098772487,"requestLongitude":127.00667816650197,"requestRadius":500,"centerGeohashId":"wydmdne","nineBlockGeohashes":["wydmdne","wydmdng","wydmdnu","wydmdns","wydmdnk","wydmdn7","wydmdn6","wydmdnd","wydmdnf"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:21.598 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:21.598347200Z","nanoTime":27987612462700,"traceId":"375cd594","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:21.599 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:21.600 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdne
2025-11-21 19:53:21.877 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 276.9739ms)
2025-11-21 19:53:21.878 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:21.883 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:21.883 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:53:21.883 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 5.1991ms, 역직렬화: 0.0ms
2025-11-21 19:53:21.883 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:21.888 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:21.883396500Z","nanoTime":27987898042500,"traceId":"375cd594","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":285579800,"duration_ms":285,"resultData":{"centerGeohashId":"wydmdne","nineBlockGeohashes":["wydmdne","wydmdng","wydmdnu","wydmdns","wydmdnk","wydmdn7","wydmdn6","wydmdnd","wydmdnf"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdne","hit":false,"valueSize":0,"l1CacheGetDurationNs":276973900,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdne","cacheKey":"data:wydmdne:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":811100},{"geohashId":"wydmdng","cacheKey":"data:wydmdng:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":514400},{"geohashId":"wydmdnu","cacheKey":"data:wydmdnu:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":520700},{"geohashId":"wydmdns","cacheKey":"data:wydmdns:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":387900},{"geohashId":"wydmdnk","cacheKey":"data:wydmdnk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":346300},{"geohashId":"wydmdn7","cacheKey":"data:wydmdn7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":480800},{"geohashId":"wydmdn6","cacheKey":"data:wydmdn6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":429000},{"geohashId":"wydmdnd","cacheKey":"data:wydmdnd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":275100},{"geohashId":"wydmdnf","cacheKey":"data:wydmdnf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":304400}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":5199100,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:53:21.888 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:21.888587500Z","nanoTime":27987902604700,"traceId":"375cd594","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:21.888 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:21.889 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:53:21.986 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 16건
2025-11-21 19:53:22.003 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:22.003 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:53:22.003 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:22.003195100Z","nanoTime":27988021497200,"traceId":"375cd594","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":118892500,"duration_ms":118,"resultData":{"inputCctvMissGrids":["wydmdne","wydmdng","wydmdnu","wydmdns","wydmdnk","wydmdn7","wydmdn6","wydmdnd","wydmdnf"],"cctvQueryResult":{"queryGeohashIds":["wydmdne","wydmdng","wydmdnu","wydmdns","wydmdnk","wydmdn7","wydmdn6","wydmdnd","wydmdnf"],"totalRowsReturned":16,"rowsPerGrid":{"wydmdnk":4,"wydmdne":3,"wydmdnu":1,"wydmdn6":2,"wydmdnf":1,"wydmdn7":1,"wydmdng":2,"wydmdnd":2},"queryExecutionTimeNs":103256300,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdnk","cacheKey":"data:wydmdnk:cctv","dataCount":4,"dataSize":521,"errorMessage":null,"success":true},{"geohashId":"wydmdne","cacheKey":"data:wydmdne:cctv","dataCount":3,"dataSize":393,"errorMessage":null,"success":true},{"geohashId":"wydmdnu","cacheKey":"data:wydmdnu:cctv","dataCount":1,"dataSize":132,"errorMessage":null,"success":true},{"geohashId":"wydmdn6","cacheKey":"data:wydmdn6:cctv","dataCount":2,"dataSize":259,"errorMessage":null,"success":true},{"geohashId":"wydmdnf","cacheKey":"data:wydmdnf:cctv","dataCount":1,"dataSize":130,"errorMessage":null,"success":true},{"geohashId":"wydmdn7","cacheKey":"data:wydmdn7:cctv","dataCount":1,"dataSize":132,"errorMessage":null,"success":true},{"geohashId":"wydmdng","cacheKey":"data:wydmdng:cctv","dataCount":2,"dataSize":263,"errorMessage":null,"success":true},{"geohashId":"wydmdnd","cacheKey":"data:wydmdnd:cctv","dataCount":2,"dataSize":262,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:22.003 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:22.003195100Z","nanoTime":27988025968200,"traceId":"375cd594","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:22.003 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:22.003 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56596098772487, 127.00667816650197)
2025-11-21 19:53:22.003 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:22.508 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:22.509 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:22.512 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:22.512 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56596098772487, 127.00667816650197), 반경: 500m
2025-11-21 19:53:22.698 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:22.698 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 155건
2025-11-21 19:53:22.708 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:22.709 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:22.709 [http-nio-8185-exec-1] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:53:22.709 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:22.709 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:22.709 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:22.709 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:53:22.712 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:22.709476Z","nanoTime":27988723898500,"traceId":"375cd594","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":697930300,"duration_ms":697,"resultData":{"latitude":37.56596098772487,"longitude":127.00667816650197,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":694894800,"addressApiResult":{"cached":false,"cacheKey":"address:37.56596098772487:127.00667816650197","roadAddress":"주소 없음","jibunAddress":"서울 중구 을지로6가 22-4","responseSize":59,"executionTimeNs":496110500,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":201900,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56596098772487:127.00667816650197:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":11,"CS2":15,"SC4":2,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":5,"FD6":15,"PK6":15,"OL7":1,"PM9":12},"totalPlaces":155,"responseSize":18133,"executionTimeNs":198582400,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:22.713 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:22.713641500Z","nanoTime":27988727631100,"traceId":"375cd594","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:22.713 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:22.714 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:22.715 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 16개
2025-11-21 19:53:22.715 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 16개 (총 카메라 대수: 44대)
2025-11-21 19:53:22.715 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:22.833 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  을지로 234 (거리: 248m)
2025-11-21 19:53:22.833 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:22.834 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:22.835 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:53:22.835 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:22.835 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:22.835679Z","nanoTime":27988849849100,"traceId":"375cd594","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":122218000,"duration_ms":122,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":16,"totalCctvAfterFilter":16,"totalCameraCount":44,"filterRate":1.0,"filterExecutionTimeNs":96600,"success":true},"policeQuery":{"queryDurationNs":117633900,"found":true,"nearestAddress":"서울특별시 중구  을지로 234","nearestDistance":248.03942438682748,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":11,"CS2":15,"SC4":2,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":5,"FD6":15,"PK6":15,"OL7":1,"PM9":12},"placesAfterFilter":{"CT1":15,"AT4":11,"CS2":15,"SC4":2,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":5,"FD6":15,"PK6":15,"OL7":1,"PM9":12},"totalBeforeFilter":155,"totalAfterFilter":155,"filterRate":1.0,"filterExecutionTimeNs":506800,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:22.835 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:22.835679Z","nanoTime":27988852796000,"traceId":"375cd594","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:22.835 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:22.835 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 42.03, 편의성: 40.45, 종합: 41.24
2025-11-21 19:53:22.844 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:22.835679Z","nanoTime":27988855566400,"traceId":"375cd594","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":2770400,"duration_ms":2,"resultData":{"safetyScore":{"policeDistanceScore":68.99507195164657,"policeDistance":248.03942438682748,"cctvScore":53.333333333333336,"cctvCount":16,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":42.03185491882731,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":33.0,"CS2":3.75,"SC4":4.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":15.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":96.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":40.45,"success":true},"overallScore":41.240927459413655,"errorMessage":null,"success":true}}
2025-11-21 19:53:22.844 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:22.844606600Z","nanoTime":27988858632200,"traceId":"375cd594","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:22.844 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:22.846 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  을지로 234, latitude=37.566476, longitude=127.00394, geohashId=wydmdnc)
2025-11-21 19:53:22.846 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 248.03942438682748
2025-11-21 19:53:22.860 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdne
2025-11-21 19:53:22.860 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:22.861 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:22.860866300Z","nanoTime":27988874820100,"traceId":"375cd594","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":16187900,"duration_ms":16,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 13m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdne","dataSize":21348,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":21348,"errorMessage":null,"success":true}}
2025-11-21 19:53:22.861 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:23.337 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:23.337 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56134803132987, longitude=127.0032143768601, radius=500)
2025-11-21 19:53:23.337 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:23.337 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56134803132987, longitude=127.0032143768601, radius=500
2025-11-21 19:53:23.338 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:23.337040900Z","nanoTime":27989351730200,"traceId":"767613d3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:23.338 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:23.338 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56134803132987, lon=127.0032143768601
2025-11-21 19:53:23.338 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:23.338036900Z","nanoTime":27989351926800,"traceId":"767613d3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:23.338 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:23.338036900Z","nanoTime":27989352043100,"traceId":"767613d3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":116300,"duration_ms":0,"resultData":{"latitude":37.56134803132987,"longitude":127.0032143768601,"precision":7,"centerHash":"wydmdjb","adjacentHashes":["wydmdjb","wydmdn0","wydmdn1","wydmdjc","wydmdj9","wydmdj8","wydm9vx","wydm9vz","wydm9yp"],"errorMessage":null,"success":true}}
2025-11-21 19:53:23.338 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdjb, wydmdn0, wydmdn1, wydmdjc, wydmdj9, wydmdj8, wydm9vx, wydm9vz, wydm9yp]
2025-11-21 19:53:23.338 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdjb
2025-11-21 19:53:23.338 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:23.338366100Z","nanoTime":27989352423000,"traceId":"767613d3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":692800,"duration_ms":0,"resultData":{"requestLatitude":37.56134803132987,"requestLongitude":127.0032143768601,"requestRadius":500,"centerGeohashId":"wydmdjb","nineBlockGeohashes":["wydmdjb","wydmdn0","wydmdn1","wydmdjc","wydmdj9","wydmdj8","wydm9vx","wydm9vz","wydm9yp"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:23.338 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:23.338366100Z","nanoTime":27989352647100,"traceId":"767613d3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:23.338 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:23.338 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdjb
2025-11-21 19:53:23.338 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.6762ms)
2025-11-21 19:53:23.338 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:23.341 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:23.342 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:53:23.342 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.5872ms, 역직렬화: 0.0ms
2025-11-21 19:53:23.342 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:23.343 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:23.342431600Z","nanoTime":27989356368100,"traceId":"767613d3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3721000,"duration_ms":3,"resultData":{"centerGeohashId":"wydmdjb","nineBlockGeohashes":["wydmdjb","wydmdn0","wydmdn1","wydmdjc","wydmdj9","wydmdj8","wydm9vx","wydm9vz","wydm9yp"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdjb","hit":false,"valueSize":0,"l1CacheGetDurationNs":676200,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdjb","cacheKey":"data:wydmdjb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":458900},{"geohashId":"wydmdn0","cacheKey":"data:wydmdn0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":326000},{"geohashId":"wydmdn1","cacheKey":"data:wydmdn1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":301500},{"geohashId":"wydmdjc","cacheKey":"data:wydmdjc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":199900},{"geohashId":"wydmdj9","cacheKey":"data:wydmdj9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":293900},{"geohashId":"wydmdj8","cacheKey":"data:wydmdj8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":212400},{"geohashId":"wydm9vx","cacheKey":"data:wydm9vx:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":222600},{"geohashId":"wydm9vz","cacheKey":"data:wydm9vz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":271300},{"geohashId":"wydm9yp","cacheKey":"data:wydm9yp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":224900}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2587200,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:53:23.343 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:23.343422200Z","nanoTime":27989357502200,"traceId":"767613d3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:23.343 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:23.343 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:53:23.351 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 26건
2025-11-21 19:53:23.357 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:23.357 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:53:23.359 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:23.357610Z","nanoTime":27989372386700,"traceId":"767613d3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":14884500,"duration_ms":14,"resultData":{"inputCctvMissGrids":["wydmdjb","wydmdn0","wydmdn1","wydmdjc","wydmdj9","wydmdj8","wydm9vx","wydm9vz","wydm9yp"],"cctvQueryResult":{"queryGeohashIds":["wydmdjb","wydmdn0","wydmdn1","wydmdjc","wydmdj9","wydmdj8","wydm9vx","wydm9vz","wydm9yp"],"totalRowsReturned":26,"rowsPerGrid":{"wydm9vz":5,"wydm9vx":4,"wydmdj8":4,"wydmdjb":1,"wydm9yp":4,"wydmdjc":4,"wydmdn1":1,"wydmdj9":2,"wydmdn0":1},"queryExecutionTimeNs":7913200,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9vz","cacheKey":"data:wydm9vz:cctv","dataCount":5,"dataSize":648,"errorMessage":null,"success":true},{"geohashId":"wydm9vx","cacheKey":"data:wydm9vx:cctv","dataCount":4,"dataSize":519,"errorMessage":null,"success":true},{"geohashId":"wydmdj8","cacheKey":"data:wydmdj8:cctv","dataCount":4,"dataSize":529,"errorMessage":null,"success":true},{"geohashId":"wydmdjb","cacheKey":"data:wydmdjb:cctv","dataCount":1,"dataSize":130,"errorMessage":null,"success":true},{"geohashId":"wydm9yp","cacheKey":"data:wydm9yp:cctv","dataCount":4,"dataSize":517,"errorMessage":null,"success":true},{"geohashId":"wydmdjc","cacheKey":"data:wydmdjc:cctv","dataCount":4,"dataSize":525,"errorMessage":null,"success":true},{"geohashId":"wydmdn1","cacheKey":"data:wydmdn1:cctv","dataCount":1,"dataSize":131,"errorMessage":null,"success":true},{"geohashId":"wydmdj9","cacheKey":"data:wydmdj9:cctv","dataCount":2,"dataSize":266,"errorMessage":null,"success":true},{"geohashId":"wydmdn0","cacheKey":"data:wydmdn0:cctv","dataCount":1,"dataSize":132,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:23.359 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:23.359620500Z","nanoTime":27989374207800,"traceId":"767613d3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:23.359 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:23.359 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56134803132987, 127.0032143768601)
2025-11-21 19:53:23.359 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:23.457 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:23.457 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:23.458 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:23.458 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56134803132987, 127.0032143768601), 반경: 500m
2025-11-21 19:53:23.544 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:23.544 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 142건
2025-11-21 19:53:23.549 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:23.549 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:23.549 [http-nio-8185-exec-5] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:53:23.549 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:23.549 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:23.549 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:23.549 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:53:23.551 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:23.549618300Z","nanoTime":27989564852200,"traceId":"767613d3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":190644400,"duration_ms":190,"resultData":{"latitude":37.56134803132987,"longitude":127.0032143768601,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":190398200,"addressApiResult":{"cached":false,"cacheKey":"address:37.56134803132987:127.0032143768601","roadAddress":"주소 없음","jibunAddress":"서울 중구 장충동2가 162-1","responseSize":60,"executionTimeNs":96952500,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":141400,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56134803132987:127.0032143768601:500","categoryCount":15,"placesByCategory":{"CT1":14,"AT4":5,"CS2":15,"SC4":2,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":7,"FD6":15,"PK6":15,"OL7":2,"PM9":5},"totalPlaces":142,"responseSize":16463,"executionTimeNs":93304300,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:23.552 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:23.551585300Z","nanoTime":27989565667400,"traceId":"767613d3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:23.552 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:23.552 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:23.552 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 26개
2025-11-21 19:53:23.552 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 26개 (총 카메라 대수: 71대)
2025-11-21 19:53:23.552 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:23.623 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  동호로 261 (거리: 320m)
2025-11-21 19:53:23.624 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:23.624 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:23.624 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:53:23.624 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:23.624 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:23.624304700Z","nanoTime":27989638552300,"traceId":"767613d3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":72884900,"duration_ms":72,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":26,"totalCctvAfterFilter":26,"totalCameraCount":71,"filterRate":1.0,"filterExecutionTimeNs":207300,"success":true},"policeQuery":{"queryDurationNs":71443200,"found":true,"nearestAddress":"서울특별시 중구  동호로 261","nearestDistance":319.7915433580272,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":14,"AT4":5,"CS2":15,"SC4":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":7,"FD6":15,"PK6":15,"OL7":2,"PM9":5},"placesAfterFilter":{"CT1":14,"AT4":5,"CS2":15,"SC4":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":7,"FD6":15,"PK6":15,"OL7":2,"PM9":5},"totalBeforeFilter":142,"totalAfterFilter":142,"filterRate":1.0,"filterExecutionTimeNs":301300,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:23.624 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:23.624304700Z","nanoTime":27989638950200,"traceId":"767613d3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:23.625 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:23.625 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 52.67, 편의성: 37.84, 종합: 45.26
2025-11-21 19:53:23.625 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:23.625296300Z","nanoTime":27989639450500,"traceId":"767613d3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":500300,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":60.026057080246595,"policeDistance":319.7915433580272,"cctvScore":86.66666666666667,"cctvCount":26,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":52.67448379074065,"success":true},"convenienceScore":{"categoryScores":{"CT1":56.0,"AT4":15.0,"CS2":3.75,"SC4":4.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":21.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":40.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":37.839285714285715,"success":true},"overallScore":45.25688475251319,"errorMessage":null,"success":true}}
2025-11-21 19:53:23.625 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:23.625887400Z","nanoTime":27989639869400,"traceId":"767613d3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:23.625 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:23.625 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  동호로 261, latitude=37.558764, longitude=127.004807, geohashId=wydmdj6)
2025-11-21 19:53:23.625 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 319.7915433580272
2025-11-21 19:53:23.627 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdjb
2025-11-21 19:53:23.627 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:23.627 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:23.627905100Z","nanoTime":27989642654800,"traceId":"767613d3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":2785400,"duration_ms":2,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["주차장이(가) 61m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdjb","dataSize":20533,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20533,"errorMessage":null,"success":true}}
2025-11-21 19:53:23.627 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:24.278 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:24.278 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.557293570774085, longitude=126.99796282928024, radius=500)
2025-11-21 19:53:24.278 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:24.278 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.557293570774085, longitude=126.99796282928024, radius=500
2025-11-21 19:53:24.278 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:24.278891200Z","nanoTime":27990294201200,"traceId":"d0cc12f9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:24.278 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:24.278 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.557293570774085, lon=126.99796282928024
2025-11-21 19:53:24.278 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:24.278891200Z","nanoTime":27990294406400,"traceId":"d0cc12f9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:24.280 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:24.278891200Z","nanoTime":27990294563400,"traceId":"d0cc12f9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":157000,"duration_ms":0,"resultData":{"latitude":37.557293570774085,"longitude":126.99796282928024,"precision":7,"centerHash":"wydm9vj","adjacentHashes":["wydm9vj","wydm9vm","wydm9vq","wydm9vn","wydm9uy","wydm9uv","wydm9uu","wydm9vh","wydm9vk"],"errorMessage":null,"success":true}}
2025-11-21 19:53:24.280 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9vj, wydm9vm, wydm9vq, wydm9vn, wydm9uy, wydm9uv, wydm9uu, wydm9vh, wydm9vk]
2025-11-21 19:53:24.280 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9vj
2025-11-21 19:53:24.280 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:24.280893700Z","nanoTime":27990294873900,"traceId":"d0cc12f9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":672700,"duration_ms":0,"resultData":{"requestLatitude":37.557293570774085,"requestLongitude":126.99796282928024,"requestRadius":500,"centerGeohashId":"wydm9vj","nineBlockGeohashes":["wydm9vj","wydm9vm","wydm9vq","wydm9vn","wydm9uy","wydm9uv","wydm9uu","wydm9vh","wydm9vk"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:24.280 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:24.280893700Z","nanoTime":27990295003300,"traceId":"d0cc12f9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:24.280 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:24.280 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9vj
2025-11-21 19:53:24.280 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.6072ms)
2025-11-21 19:53:24.280 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:24.282 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:24.284 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:53:24.284 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.1438ms, 역직렬화: 0.0ms
2025-11-21 19:53:24.284 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:24.284 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:24.284187900Z","nanoTime":27990298223500,"traceId":"d0cc12f9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3220200,"duration_ms":3,"resultData":{"centerGeohashId":"wydm9vj","nineBlockGeohashes":["wydm9vj","wydm9vm","wydm9vq","wydm9vn","wydm9uy","wydm9uv","wydm9uu","wydm9vh","wydm9vk"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9vj","hit":false,"valueSize":0,"l1CacheGetDurationNs":607200,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9vj","cacheKey":"data:wydm9vj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":332100},{"geohashId":"wydm9vm","cacheKey":"data:wydm9vm:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":319600},{"geohashId":"wydm9vq","cacheKey":"data:wydm9vq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":252600},{"geohashId":"wydm9vn","cacheKey":"data:wydm9vn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":164500},{"geohashId":"wydm9uy","cacheKey":"data:wydm9uy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":161700},{"geohashId":"wydm9uv","cacheKey":"data:wydm9uv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":158000},{"geohashId":"wydm9uu","cacheKey":"data:wydm9uu:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":255800},{"geohashId":"wydm9vh","cacheKey":"data:wydm9vh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":192100},{"geohashId":"wydm9vk","cacheKey":"data:wydm9vk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":238400}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2143800,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:53:24.284 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:24.284875500Z","nanoTime":27990298920400,"traceId":"d0cc12f9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:24.284 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:24.284 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:53:24.289 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 8건
2025-11-21 19:53:24.292 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:24.292 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 5개
2025-11-21 19:53:24.292 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:24.292599600Z","nanoTime":27990307040400,"traceId":"d0cc12f9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":8120000,"duration_ms":8,"resultData":{"inputCctvMissGrids":["wydm9vj","wydm9vm","wydm9vq","wydm9vn","wydm9uy","wydm9uv","wydm9uu","wydm9vh","wydm9vk"],"cctvQueryResult":{"queryGeohashIds":["wydm9vj","wydm9vm","wydm9vq","wydm9vn","wydm9uy","wydm9uv","wydm9uu","wydm9vh","wydm9vk"],"totalRowsReturned":8,"rowsPerGrid":{"wydm9vk":2,"wydm9vh":2,"wydm9vm":2,"wydm9vq":1,"wydm9uu":1},"queryExecutionTimeNs":5376100,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9vk","cacheKey":"data:wydm9vk:cctv","dataCount":2,"dataSize":261,"errorMessage":null,"success":true},{"geohashId":"wydm9vh","cacheKey":"data:wydm9vh:cctv","dataCount":2,"dataSize":262,"errorMessage":null,"success":true},{"geohashId":"wydm9vm","cacheKey":"data:wydm9vm:cctv","dataCount":2,"dataSize":262,"errorMessage":null,"success":true},{"geohashId":"wydm9vq","cacheKey":"data:wydm9vq:cctv","dataCount":1,"dataSize":134,"errorMessage":null,"success":true},{"geohashId":"wydm9uu","cacheKey":"data:wydm9uu:cctv","dataCount":1,"dataSize":133,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:24.293 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:24.293598700Z","nanoTime":27990307367700,"traceId":"d0cc12f9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:24.293 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:24.293 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.557293570774085, 126.99796282928024)
2025-11-21 19:53:24.293 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:24.399 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:24.399 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:24.399 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:24.399 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.557293570774085, 126.99796282928024), 반경: 500m
2025-11-21 19:53:24.577 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:24.577 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 109건
2025-11-21 19:53:24.579 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:24.579 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:24.579 [http-nio-8185-exec-4] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:53:24.579 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:24.579 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:24.579 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:24.579 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:53:24.579 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:24.579657500Z","nanoTime":27990593990400,"traceId":"d0cc12f9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":286622700,"duration_ms":286,"resultData":{"latitude":37.557293570774085,"longitude":126.99796282928024,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":286364600,"addressApiResult":{"cached":false,"cacheKey":"address:37.557293570774085:126.99796282928024","roadAddress":"주소 없음","jibunAddress":"서울 중구 장충동2가 산 14-48","responseSize":62,"executionTimeNs":106035900,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":60800,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.557293570774085:126.99796282928024:500","categoryCount":15,"placesByCategory":{"CT1":13,"AT4":2,"CS2":15,"SC4":1,"MT1":0,"BK9":15,"HP8":8,"AC5":6,"CE7":15,"SW8":0,"PO3":1,"FD6":15,"PK6":15,"OL7":0,"PM9":3},"totalPlaces":109,"responseSize":12653,"executionTimeNs":180267900,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:24.579 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:24.579657500Z","nanoTime":27990594304500,"traceId":"d0cc12f9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:24.579 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:24.580 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:24.580 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 8개
2025-11-21 19:53:24.580 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 8개 (총 카메라 대수: 20대)
2025-11-21 19:53:24.580 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:24.649 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  동호로 261 (거리: 625m)
2025-11-21 19:53:24.649 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:24.649 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:24.649 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 12개 카테고리
2025-11-21 19:53:24.649 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:24.650 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:24.649493200Z","nanoTime":27990664023400,"traceId":"d0cc12f9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":69718900,"duration_ms":69,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":8,"totalCctvAfterFilter":8,"totalCameraCount":20,"filterRate":1.0,"filterExecutionTimeNs":19300,"success":true},"policeQuery":{"queryDurationNs":69095200,"found":true,"nearestAddress":"서울특별시 중구  동호로 261","nearestDistance":625.0653319602038,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":13,"AT4":2,"BK9":15,"HP8":8,"CS2":15,"AC5":6,"CE7":15,"SC4":1,"PO3":1,"FD6":15,"PK6":15,"PM9":3},"placesAfterFilter":{"CT1":13,"AT4":2,"BK9":15,"HP8":8,"CS2":15,"AC5":6,"CE7":15,"SC4":1,"PO3":1,"FD6":15,"PK6":15,"PM9":3},"totalBeforeFilter":109,"totalAfterFilter":109,"filterRate":1.0,"filterExecutionTimeNs":105600,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:24.650 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:24.650494800Z","nanoTime":27990664486400,"traceId":"d0cc12f9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:24.650 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:24.651 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 17.23, 편의성: 30.15, 종합: 23.69
2025-11-21 19:53:24.651 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:24.651046900Z","nanoTime":27990664924900,"traceId":"d0cc12f9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":438500,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":21.866833504974522,"policeDistance":625.0653319602038,"cctvScore":26.666666666666668,"cctvCount":8,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":17.226716718159025,"success":true},"convenienceScore":{"categoryScores":{"CT1":52.0,"AT4":6.0,"BK9":75.0,"HP8":100.0,"CS2":3.75,"AC5":6.0,"CE7":30.0,"SC4":2.0,"PO3":3.0,"FD6":15.0,"PK6":45.0,"PM9":24.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":30.145833333333332,"success":true},"overallScore":23.686275025746177,"errorMessage":null,"success":true}}
2025-11-21 19:53:24.651 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:24.651046900Z","nanoTime":27990665203200,"traceId":"d0cc12f9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:24.651 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:24.651 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  동호로 261, latitude=37.558764, longitude=127.004807, geohashId=wydmdj6)
2025-11-21 19:53:24.651 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 625.0653319602038
2025-11-21 19:53:24.652 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9vj
2025-11-21 19:53:24.652 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:24.652 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:24.652488300Z","nanoTime":27990666739900,"traceId":"d0cc12f9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1536700,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 126m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm9vj","dataSize":14670,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":14670,"errorMessage":null,"success":true}}
2025-11-21 19:53:24.652 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:25.226 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:25.226 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55388740303863, longitude=127.0098911453819, radius=500)
2025-11-21 19:53:25.227 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:25.227 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55388740303863, longitude=127.0098911453819, radius=500
2025-11-21 19:53:25.227 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:25.227939600Z","nanoTime":27991241919100,"traceId":"639ee08c","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:25.227 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:25.227 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55388740303863, lon=127.0098911453819
2025-11-21 19:53:25.227 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:25.227939600Z","nanoTime":27991242154200,"traceId":"639ee08c","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:25.227 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:25.227939600Z","nanoTime":27991242284800,"traceId":"639ee08c","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":130600,"duration_ms":0,"resultData":{"latitude":37.55388740303863,"longitude":127.0098911453819,"precision":7,"centerHash":"wydmdhm","adjacentHashes":["wydmdhm","wydmdht","wydmdhw","wydmdhq","wydmdhn","wydmdhj","wydmdhh","wydmdhk","wydmdhs"],"errorMessage":null,"success":true}}
2025-11-21 19:53:25.227 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdhm, wydmdht, wydmdhw, wydmdhq, wydmdhn, wydmdhj, wydmdhh, wydmdhk, wydmdhs]
2025-11-21 19:53:25.227 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdhm
2025-11-21 19:53:25.228 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:25.227939600Z","nanoTime":27991242515600,"traceId":"639ee08c","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":596500,"duration_ms":0,"resultData":{"requestLatitude":37.55388740303863,"requestLongitude":127.0098911453819,"requestRadius":500,"centerGeohashId":"wydmdhm","nineBlockGeohashes":["wydmdhm","wydmdht","wydmdhw","wydmdhq","wydmdhn","wydmdhj","wydmdhh","wydmdhk","wydmdhs"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:25.228 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:25.228865100Z","nanoTime":27991242691000,"traceId":"639ee08c","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:25.228 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:25.228 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdhm
2025-11-21 19:53:25.228 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.7209ms)
2025-11-21 19:53:25.228 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:25.230 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:25.230 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:53:25.230 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.1886ms, 역직렬화: 0.0ms
2025-11-21 19:53:25.230 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:25.230 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:25.230881500Z","nanoTime":27991245980500,"traceId":"639ee08c","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3289500,"duration_ms":3,"resultData":{"centerGeohashId":"wydmdhm","nineBlockGeohashes":["wydmdhm","wydmdht","wydmdhw","wydmdhq","wydmdhn","wydmdhj","wydmdhh","wydmdhk","wydmdhs"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdhm","hit":false,"valueSize":0,"l1CacheGetDurationNs":720900,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdhm","cacheKey":"data:wydmdhm:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":407400},{"geohashId":"wydmdht","cacheKey":"data:wydmdht:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":261200},{"geohashId":"wydmdhw","cacheKey":"data:wydmdhw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":204900},{"geohashId":"wydmdhq","cacheKey":"data:wydmdhq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":204100},{"geohashId":"wydmdhn","cacheKey":"data:wydmdhn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":208900},{"geohashId":"wydmdhj","cacheKey":"data:wydmdhj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":197900},{"geohashId":"wydmdhh","cacheKey":"data:wydmdhh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":226200},{"geohashId":"wydmdhk","cacheKey":"data:wydmdhk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":209700},{"geohashId":"wydmdhs","cacheKey":"data:wydmdhs:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":173900}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2188600,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:53:25.230 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:25.230881500Z","nanoTime":27991246397000,"traceId":"639ee08c","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:25.230 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:25.230 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:53:25.239 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 29건
2025-11-21 19:53:25.242 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:25.244 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:53:25.244 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:25.244749Z","nanoTime":27991258608500,"traceId":"639ee08c","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":12211500,"duration_ms":12,"resultData":{"inputCctvMissGrids":["wydmdhm","wydmdht","wydmdhw","wydmdhq","wydmdhn","wydmdhj","wydmdhh","wydmdhk","wydmdhs"],"cctvQueryResult":{"queryGeohashIds":["wydmdhm","wydmdht","wydmdhw","wydmdhq","wydmdhn","wydmdhj","wydmdhh","wydmdhk","wydmdhs"],"totalRowsReturned":29,"rowsPerGrid":{"wydmdhs":5,"wydmdht":3,"wydmdhq":5,"wydmdhk":4,"wydmdhn":5,"wydmdhw":2,"wydmdhh":2,"wydmdhj":3},"queryExecutionTimeNs":7103000,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdhs","cacheKey":"data:wydmdhs:cctv","dataCount":5,"dataSize":654,"errorMessage":null,"success":true},{"geohashId":"wydmdht","cacheKey":"data:wydmdht:cctv","dataCount":3,"dataSize":391,"errorMessage":null,"success":true},{"geohashId":"wydmdhq","cacheKey":"data:wydmdhq:cctv","dataCount":5,"dataSize":649,"errorMessage":null,"success":true},{"geohashId":"wydmdhk","cacheKey":"data:wydmdhk:cctv","dataCount":4,"dataSize":520,"errorMessage":null,"success":true},{"geohashId":"wydmdhn","cacheKey":"data:wydmdhn:cctv","dataCount":5,"dataSize":652,"errorMessage":null,"success":true},{"geohashId":"wydmdhw","cacheKey":"data:wydmdhw:cctv","dataCount":2,"dataSize":260,"errorMessage":null,"success":true},{"geohashId":"wydmdhh","cacheKey":"data:wydmdhh:cctv","dataCount":2,"dataSize":261,"errorMessage":null,"success":true},{"geohashId":"wydmdhj","cacheKey":"data:wydmdhj:cctv","dataCount":3,"dataSize":392,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:25.244 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:25.244749Z","nanoTime":27991259244900,"traceId":"639ee08c","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:25.244 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:25.244 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.55388740303863, 127.0098911453819)
2025-11-21 19:53:25.246 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:25.319 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:25.319 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:25.319 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:25.321 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.55388740303863, 127.0098911453819), 반경: 500m
2025-11-21 19:53:25.425 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:25.425 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 138건
2025-11-21 19:53:25.427 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:25.427 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:25.427 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 중구
2025-11-21 19:53:25.433 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 중구
2025-11-21 19:53:25.433 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:25.433 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:25.433 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:25.433 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.866910799
2025-11-21 19:53:25.434 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:25.433655800Z","nanoTime":27991448399600,"traceId":"639ee08c","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":189154700,"duration_ms":189,"resultData":{"latitude":37.55388740303863,"longitude":127.0098911453819,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":188818400,"addressApiResult":{"cached":false,"cacheKey":"address:37.55388740303863:127.0098911453819","roadAddress":"서울특별시 중구 다산로 111","jibunAddress":"서울 중구 신당동 361-24","responseSize":70,"executionTimeNs":75339500,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:중구","guName":"중구","arrestRate":0.866910799,"dataFound":true,"executionTimeNs":6649500,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.55388740303863:127.0098911453819:500","categoryCount":15,"placesByCategory":{"CT1":5,"AT4":1,"CS2":15,"SC4":3,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":6,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalPlaces":138,"responseSize":15873,"executionTimeNs":106829400,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:25.434 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:25.434871700Z","nanoTime":27991448866700,"traceId":"639ee08c","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:25.434 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:25.434 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:25.434 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 29개
2025-11-21 19:53:25.434 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 29개 (총 카메라 대수: 63대)
2025-11-21 19:53:25.434 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:25.508 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: "서울특별시 중구  동호로 5길 15, 약수지구대" (거리: 293m)
2025-11-21 19:53:25.508 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:25.508 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:25.509 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:53:25.509 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:25.509 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:25.509927300Z","nanoTime":27991523751900,"traceId":"639ee08c","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":74885200,"duration_ms":74,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":29,"totalCctvAfterFilter":29,"totalCameraCount":63,"filterRate":1.0,"filterExecutionTimeNs":32300,"success":true},"policeQuery":{"queryDurationNs":74212600,"found":true,"nearestAddress":"\"서울특별시 중구  동호로 5길 15, 약수지구대\"","nearestDistance":292.71103234352415,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":5,"AT4":1,"CS2":15,"SC4":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":6,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"placesAfterFilter":{"CT1":5,"AT4":1,"CS2":15,"SC4":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":6,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalBeforeFilter":138,"totalAfterFilter":138,"filterRate":1.0,"filterExecutionTimeNs":136200,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:25.509 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:25.509927300Z","nanoTime":27991524069100,"traceId":"639ee08c","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:25.509 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:25.509 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 83.70, 편의성: 38.82, 종합: 61.26
2025-11-21 19:53:25.510 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:25.509927300Z","nanoTime":27991524511300,"traceId":"639ee08c","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":442200,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":63.41112095705949,"policeDistance":292.71103234352415,"cctvScore":96.66666666666667,"cctvCount":29,"arrestRateScore":86.6910799,"arrestRate":0.866910799,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":83.69732692378452,"success":true},"convenienceScore":{"categoryScores":{"CT1":20.0,"AT4":3.0,"CS2":11.431706982486624,"SC4":6.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":18.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"중구","guPopulation":131214,"finalScore":38.816550498749045,"success":true},"overallScore":61.256938711266784,"errorMessage":null,"success":true}}
2025-11-21 19:53:25.510 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:25.510936100Z","nanoTime":27991524901700,"traceId":"639ee08c","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:25.510 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:25.510 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address="서울특별시 중구  동호로 5길 15, 약수지구대", latitude=37.552144, longitude=127.012379, geohashId=wydmdhp)
2025-11-21 19:53:25.510 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 292.71103234352415
2025-11-21 19:53:25.511 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdhm
2025-11-21 19:53:25.511 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:25.511 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:25.511412300Z","nanoTime":27991526775800,"traceId":"639ee08c","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1874100,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["이 지역은 안전 인프라가 잘 갖춰져 있습니다.","약국이(가) 8m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdhm","dataSize":20125,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20125,"errorMessage":null,"success":true}}
2025-11-21 19:53:25.513 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:26.056 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:26.057 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55215584740823, longitude=127.02202256692462, radius=500)
2025-11-21 19:53:26.057 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:26.057 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55215584740823, longitude=127.02202256692462, radius=500
2025-11-21 19:53:26.057 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:26.057642500Z","nanoTime":27992071535100,"traceId":"7382c335","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:26.057 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:26.057 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55215584740823, lon=127.02202256692462
2025-11-21 19:53:26.057 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:26.057642500Z","nanoTime":27992071741000,"traceId":"7382c335","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:26.058 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:26.057642500Z","nanoTime":27992071889900,"traceId":"7382c335","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":148900,"duration_ms":0,"resultData":{"latitude":37.55215584740823,"longitude":127.02202256692462,"precision":7,"centerHash":"wydmdkn","adjacentHashes":["wydmdkn","wydmdkq","wydmdkr","wydmdkp","wydmd7z","wydmd7y","wydmd7v","wydmdkj","wydmdkm"],"errorMessage":null,"success":true}}
2025-11-21 19:53:26.058 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdkn, wydmdkq, wydmdkr, wydmdkp, wydmd7z, wydmd7y, wydmd7v, wydmdkj, wydmdkm]
2025-11-21 19:53:26.058 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdkn
2025-11-21 19:53:26.058 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:26.058211900Z","nanoTime":27992072237100,"traceId":"7382c335","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":702000,"duration_ms":0,"resultData":{"requestLatitude":37.55215584740823,"requestLongitude":127.02202256692462,"requestRadius":500,"centerGeohashId":"wydmdkn","nineBlockGeohashes":["wydmdkn","wydmdkq","wydmdkr","wydmdkp","wydmd7z","wydmd7y","wydmd7v","wydmdkj","wydmdkm"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:26.058 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:26.058211900Z","nanoTime":27992072418500,"traceId":"7382c335","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:26.058 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:26.058 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdkn
2025-11-21 19:53:26.058 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.7625ms)
2025-11-21 19:53:26.058 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:26.060 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:26.062 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:53:26.062 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.4868ms, 역직렬화: 0.0ms
2025-11-21 19:53:26.062 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:26.062 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:26.062226100Z","nanoTime":27992076209900,"traceId":"7382c335","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3791400,"duration_ms":3,"resultData":{"centerGeohashId":"wydmdkn","nineBlockGeohashes":["wydmdkn","wydmdkq","wydmdkr","wydmdkp","wydmd7z","wydmd7y","wydmd7v","wydmdkj","wydmdkm"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdkn","hit":false,"valueSize":0,"l1CacheGetDurationNs":762500,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdkn","cacheKey":"data:wydmdkn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":417000},{"geohashId":"wydmdkq","cacheKey":"data:wydmdkq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":405500},{"geohashId":"wydmdkr","cacheKey":"data:wydmdkr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":250800},{"geohashId":"wydmdkp","cacheKey":"data:wydmdkp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":179500},{"geohashId":"wydmd7z","cacheKey":"data:wydmd7z:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":196000},{"geohashId":"wydmd7y","cacheKey":"data:wydmd7y:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":301000},{"geohashId":"wydmd7v","cacheKey":"data:wydmd7v:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":251500},{"geohashId":"wydmdkj","cacheKey":"data:wydmdkj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":209000},{"geohashId":"wydmdkm","cacheKey":"data:wydmdkm:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":196900}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2486800,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:53:26.063 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:26.062640900Z","nanoTime":27992076765600,"traceId":"7382c335","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:26.063 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:26.063 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:53:26.068 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 27건
2025-11-21 19:53:26.074 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:26.074 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:53:26.074 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:26.074736600Z","nanoTime":27992089474700,"traceId":"7382c335","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":12709100,"duration_ms":12,"resultData":{"inputCctvMissGrids":["wydmdkn","wydmdkq","wydmdkr","wydmdkp","wydmd7z","wydmd7y","wydmd7v","wydmdkj","wydmdkm"],"cctvQueryResult":{"queryGeohashIds":["wydmdkn","wydmdkq","wydmdkr","wydmdkp","wydmd7z","wydmd7y","wydmd7v","wydmdkj","wydmdkm"],"totalRowsReturned":27,"rowsPerGrid":{"wydmdkr":4,"wydmd7z":4,"wydmdkn":5,"wydmdkp":1,"wydmdkq":1,"wydmd7v":4,"wydmdkj":3,"wydmd7y":1,"wydmdkm":4},"queryExecutionTimeNs":6702900,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdkr","cacheKey":"data:wydmdkr:cctv","dataCount":4,"dataSize":525,"errorMessage":null,"success":true},{"geohashId":"wydmd7z","cacheKey":"data:wydmd7z:cctv","dataCount":4,"dataSize":527,"errorMessage":null,"success":true},{"geohashId":"wydmdkn","cacheKey":"data:wydmdkn:cctv","dataCount":5,"dataSize":658,"errorMessage":null,"success":true},{"geohashId":"wydmdkp","cacheKey":"data:wydmdkp:cctv","dataCount":1,"dataSize":133,"errorMessage":null,"success":true},{"geohashId":"wydmdkq","cacheKey":"data:wydmdkq:cctv","dataCount":1,"dataSize":132,"errorMessage":null,"success":true},{"geohashId":"wydmd7v","cacheKey":"data:wydmd7v:cctv","dataCount":4,"dataSize":534,"errorMessage":null,"success":true},{"geohashId":"wydmdkj","cacheKey":"data:wydmdkj:cctv","dataCount":3,"dataSize":398,"errorMessage":null,"success":true},{"geohashId":"wydmd7y","cacheKey":"data:wydmd7y:cctv","dataCount":1,"dataSize":132,"errorMessage":null,"success":true},{"geohashId":"wydmdkm","cacheKey":"data:wydmdkm:cctv","dataCount":4,"dataSize":530,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:26.074 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:26.074736600Z","nanoTime":27992089803300,"traceId":"7382c335","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:26.074 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:26.074 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.55215584740823, 127.02202256692462)
2025-11-21 19:53:26.074 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:26.169 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:26.169 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:26.169 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:26.169 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.55215584740823, 127.02202256692462), 반경: 500m
2025-11-21 19:53:26.267 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:26.267 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 131건
2025-11-21 19:53:26.268 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:26.268 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:26.268 [http-nio-8185-exec-7] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:53:26.268 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:26.268 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:26.268 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:26.268 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:53:26.268 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:26.268191500Z","nanoTime":27992284242900,"traceId":"7382c335","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":194439600,"duration_ms":194,"resultData":{"latitude":37.55215584740823,"longitude":127.02202256692462,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":194174200,"addressApiResult":{"cached":false,"cacheKey":"address:37.55215584740823:127.02202256692462","roadAddress":"주소 없음","jibunAddress":"서울 성동구 금호동2가 707","responseSize":59,"executionTimeNs":93718200,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":77000,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.55215584740823:127.02202256692462:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":2,"CS2":15,"SC4":2,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":4,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":131,"responseSize":15248,"executionTimeNs":100379000,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:26.268 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:26.268191500Z","nanoTime":27992284759200,"traceId":"7382c335","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:26.271 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:26.271 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:26.271 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 27개
2025-11-21 19:53:26.271 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 27개 (총 카메라 대수: 82대)
2025-11-21 19:53:26.271 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:26.342 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 성동구  광나루로2길 35 성수지구대 (거리: 357m)
2025-11-21 19:53:26.343 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:26.343 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:26.343 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:53:26.343 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:26.344 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:26.343930200Z","nanoTime":27992358070400,"traceId":"7382c335","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":73311200,"duration_ms":73,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":27,"totalCctvAfterFilter":27,"totalCameraCount":82,"filterRate":1.0,"filterExecutionTimeNs":20900,"success":true},"policeQuery":{"queryDurationNs":72556900,"found":true,"nearestAddress":"서울특별시 성동구  광나루로2길 35 성수지구대","nearestDistance":357.196484561499,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"AT4":2,"CS2":15,"SC4":2,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":4,"FD6":15,"PK6":15,"PM9":15},"placesAfterFilter":{"CT1":1,"AT4":2,"CS2":15,"SC4":2,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":4,"FD6":15,"PK6":15,"PM9":15},"totalBeforeFilter":131,"totalAfterFilter":131,"filterRate":1.0,"filterExecutionTimeNs":187900,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:26.344 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:26.344679600Z","nanoTime":27992358696900,"traceId":"7382c335","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:26.344 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:26.344 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 52.61, 편의성: 37.13, 종합: 44.87
2025-11-21 19:53:26.344 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:26.344679600Z","nanoTime":27992359315000,"traceId":"7382c335","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":618100,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":55.350439429812624,"policeDistance":357.196484561499,"cctvScore":90.0,"cctvCount":27,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":52.60513182894378,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"AT4":6.0,"CS2":3.75,"SC4":4.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":12.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":37.125,"success":true},"overallScore":44.86506591447189,"errorMessage":null,"success":true}}
2025-11-21 19:53:26.344 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:26.344679600Z","nanoTime":27992359610300,"traceId":"7382c335","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:26.344 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:26.344 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 성동구  광나루로2길 35 성수지구대, latitude=37.554742, longitude=127.019619, geohashId=wydmdks)
2025-11-21 19:53:26.344 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 357.196484561499
2025-11-21 19:53:26.346 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdkn
2025-11-21 19:53:26.346 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:26.346 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:26.346695500Z","nanoTime":27992361545000,"traceId":"7382c335","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1934700,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["학원이(가) 96m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdkn","dataSize":19540,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19540,"errorMessage":null,"success":true}}
2025-11-21 19:53:26.346 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:26.946 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:26.946 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55408247133138, longitude=127.0290171196949, radius=500)
2025-11-21 19:53:26.946 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:26.946 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55408247133138, longitude=127.0290171196949, radius=500
2025-11-21 19:53:26.946 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:26.946030100Z","nanoTime":27992960225500,"traceId":"938ea12b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:26.946 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:26.946 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55408247133138, lon=127.0290171196949
2025-11-21 19:53:26.946 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:26.946030100Z","nanoTime":27992960386000,"traceId":"938ea12b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:26.946 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:26.946030100Z","nanoTime":27992960538400,"traceId":"938ea12b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":152400,"duration_ms":0,"resultData":{"latitude":37.55408247133138,"longitude":127.0290171196949,"precision":7,"centerHash":"wydmdse","adjacentHashes":["wydmdse","wydmdsg","wydmdsu","wydmdss","wydmdsk","wydmds7","wydmds6","wydmdsd","wydmdsf"],"errorMessage":null,"success":true}}
2025-11-21 19:53:26.946 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdse, wydmdsg, wydmdsu, wydmdss, wydmdsk, wydmds7, wydmds6, wydmdsd, wydmdsf]
2025-11-21 19:53:26.946 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdse
2025-11-21 19:53:26.946 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:26.946938600Z","nanoTime":27992960806000,"traceId":"938ea12b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":580500,"duration_ms":0,"resultData":{"requestLatitude":37.55408247133138,"requestLongitude":127.0290171196949,"requestRadius":500,"centerGeohashId":"wydmdse","nineBlockGeohashes":["wydmdse","wydmdsg","wydmdsu","wydmdss","wydmdsk","wydmds7","wydmds6","wydmdsd","wydmdsf"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:26.946 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:26.946938600Z","nanoTime":27992960955600,"traceId":"938ea12b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:26.946 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:26.946 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdse
2025-11-21 19:53:26.946 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.8697ms)
2025-11-21 19:53:26.946 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:26.949 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:26.949 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:53:26.949 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.4358ms, 역직렬화: 0.0ms
2025-11-21 19:53:26.949 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:26.950 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:26.949927400Z","nanoTime":27992964598200,"traceId":"938ea12b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3642600,"duration_ms":3,"resultData":{"centerGeohashId":"wydmdse","nineBlockGeohashes":["wydmdse","wydmdsg","wydmdsu","wydmdss","wydmdsk","wydmds7","wydmds6","wydmdsd","wydmdsf"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdse","hit":false,"valueSize":0,"l1CacheGetDurationNs":869700,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdse","cacheKey":"data:wydmdse:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":342700},{"geohashId":"wydmdsg","cacheKey":"data:wydmdsg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":241800},{"geohashId":"wydmdsu","cacheKey":"data:wydmdsu:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":196200},{"geohashId":"wydmdss","cacheKey":"data:wydmdss:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":174200},{"geohashId":"wydmdsk","cacheKey":"data:wydmdsk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":277800},{"geohashId":"wydmds7","cacheKey":"data:wydmds7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":332600},{"geohashId":"wydmds6","cacheKey":"data:wydmds6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":249000},{"geohashId":"wydmdsd","cacheKey":"data:wydmdsd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":233600},{"geohashId":"wydmdsf","cacheKey":"data:wydmdsf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":312000}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2435800,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:53:26.950 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:26.950938100Z","nanoTime":27992964890500,"traceId":"938ea12b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:26.950 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:26.950 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:53:26.954 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 13건
2025-11-21 19:53:26.958 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:26.958 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 4개
2025-11-21 19:53:26.958 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:26.958615900Z","nanoTime":27992972691400,"traceId":"938ea12b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":7800900,"duration_ms":7,"resultData":{"inputCctvMissGrids":["wydmdse","wydmdsg","wydmdsu","wydmdss","wydmdsk","wydmds7","wydmds6","wydmdsd","wydmdsf"],"cctvQueryResult":{"queryGeohashIds":["wydmdse","wydmdsg","wydmdsu","wydmdss","wydmdsk","wydmds7","wydmds6","wydmdsd","wydmdsf"],"totalRowsReturned":13,"rowsPerGrid":{"wydmdsk":8,"wydmds6":2,"wydmds7":2,"wydmdsd":1},"queryExecutionTimeNs":5182000,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdsk","cacheKey":"data:wydmdsk:cctv","dataCount":8,"dataSize":1060,"errorMessage":null,"success":true},{"geohashId":"wydmds6","cacheKey":"data:wydmds6:cctv","dataCount":2,"dataSize":267,"errorMessage":null,"success":true},{"geohashId":"wydmds7","cacheKey":"data:wydmds7:cctv","dataCount":2,"dataSize":268,"errorMessage":null,"success":true},{"geohashId":"wydmdsd","cacheKey":"data:wydmdsd:cctv","dataCount":1,"dataSize":133,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:26.958 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:26.958615900Z","nanoTime":27992973029400,"traceId":"938ea12b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:26.958 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:26.958 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.55408247133138, 127.0290171196949)
2025-11-21 19:53:26.958 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:27.034 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:27.034 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:27.034 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:27.034 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.55408247133138, 127.0290171196949), 반경: 500m
2025-11-21 19:53:27.121 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:27.121 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 115건
2025-11-21 19:53:27.121 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:27.121 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:27.121 [http-nio-8185-exec-8] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:53:27.121 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:27.121 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:27.121 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:27.121 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:53:27.123 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:27.121745300Z","nanoTime":27993137405000,"traceId":"938ea12b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":164375600,"duration_ms":164,"resultData":{"latitude":37.55408247133138,"longitude":127.0290171196949,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":164150000,"addressApiResult":{"cached":false,"cacheKey":"address:37.55408247133138:127.0290171196949","roadAddress":"주소 없음","jibunAddress":"서울 성동구 행당동 324-334","responseSize":61,"executionTimeNs":75799400,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":52400,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.55408247133138:127.0290171196949:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":0,"CS2":10,"SC4":3,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":5,"FD6":15,"PK6":11,"OL7":0,"PM9":9},"totalPlaces":115,"responseSize":13440,"executionTimeNs":88298200,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:27.123 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:27.123757600Z","nanoTime":27993137926000,"traceId":"938ea12b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:27.123 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:27.123 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:27.123 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 13개
2025-11-21 19:53:27.123 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 13개 (총 카메라 대수: 36대)
2025-11-21 19:53:27.123 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:27.191 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구 영신로20길 11 (거리: 372m)
2025-11-21 19:53:27.191 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:27.191 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:27.191 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 12개 카테고리
2025-11-21 19:53:27.191 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:27.191 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:27.191839700Z","nanoTime":27993205723900,"traceId":"938ea12b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":67797900,"duration_ms":67,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":13,"totalCctvAfterFilter":13,"totalCameraCount":36,"filterRate":1.0,"filterExecutionTimeNs":15300,"success":true},"policeQuery":{"queryDurationNs":66990200,"found":true,"nearestAddress":"서울특별시 영등포구 영신로20길 11","nearestDistance":372.4015713840596,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"BK9":15,"HP8":15,"CS2":10,"AC5":15,"CE7":15,"SC4":3,"SW8":1,"PO3":5,"FD6":15,"PK6":11,"MT1":1,"PM9":9},"placesAfterFilter":{"BK9":15,"HP8":15,"CS2":10,"AC5":15,"CE7":15,"SC4":3,"SW8":1,"PO3":5,"FD6":15,"PK6":11,"MT1":1,"PM9":9},"totalBeforeFilter":115,"totalAfterFilter":115,"filterRate":1.0,"filterExecutionTimeNs":172900,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:27.191 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:27.191839700Z","nanoTime":27993206170000,"traceId":"938ea12b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:27.191 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:27.191 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 33.37, 편의성: 39.46, 종합: 36.41
2025-11-21 19:53:27.191 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:27.191839700Z","nanoTime":27993206661800,"traceId":"938ea12b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":491800,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":53.44980357699255,"policeDistance":372.4015713840596,"cctvScore":43.333333333333336,"cctvCount":13,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":33.3682744064311,"success":true},"convenienceScore":{"categoryScores":{"BK9":75.0,"HP8":100.0,"CS2":2.5,"AC5":15.0,"CE7":30.0,"SC4":6.0,"SW8":100.0,"PO3":15.0,"FD6":15.0,"PK6":33.0,"MT1":10.0,"PM9":72.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":39.458333333333336,"success":true},"overallScore":36.41330386988221,"errorMessage":null,"success":true}}
2025-11-21 19:53:27.191 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:27.191839700Z","nanoTime":27993206967200,"traceId":"938ea12b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:27.191 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:27.191 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구 영신로20길 11, latitude=37.557429, longitude=127.028852, geohashId=wydmdt5)
2025-11-21 19:53:27.191 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 372.4015713840596
2025-11-21 19:53:27.193 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdse
2025-11-21 19:53:27.193 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:27.193 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:27.193854100Z","nanoTime":27993208807300,"traceId":"938ea12b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1840100,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["음식점이(가) 130m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdse","dataSize":16174,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":16174,"errorMessage":null,"success":true}}
2025-11-21 19:53:27.193 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:27.682 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:27.682 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55662154989689, longitude=127.03537854653459, radius=500)
2025-11-21 19:53:27.682 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:27.682 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55662154989689, longitude=127.03537854653459, radius=500
2025-11-21 19:53:27.682 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:27.682438800Z","nanoTime":27993696618500,"traceId":"3d65ab23","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:27.682 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:27.682 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55662154989689, lon=127.03537854653459
2025-11-21 19:53:27.682 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:27.682438800Z","nanoTime":27993696758400,"traceId":"3d65ab23","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:27.682 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:27.682438800Z","nanoTime":27993696864000,"traceId":"3d65ab23","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":105600,"duration_ms":0,"resultData":{"latitude":37.55662154989689,"longitude":127.03537854653459,"precision":7,"centerHash":"wydmdub","adjacentHashes":["wydmdub","wydmdv0","wydmdv1","wydmduc","wydmdu9","wydmdu8","wydmdsx","wydmdsz","wydmdtp"],"errorMessage":null,"success":true}}
2025-11-21 19:53:27.682 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdub, wydmdv0, wydmdv1, wydmduc, wydmdu9, wydmdu8, wydmdsx, wydmdsz, wydmdtp]
2025-11-21 19:53:27.682 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdub
2025-11-21 19:53:27.682 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:27.682438800Z","nanoTime":27993697067600,"traceId":"3d65ab23","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":449100,"duration_ms":0,"resultData":{"requestLatitude":37.55662154989689,"requestLongitude":127.03537854653459,"requestRadius":500,"centerGeohashId":"wydmdub","nineBlockGeohashes":["wydmdub","wydmdv0","wydmdv1","wydmduc","wydmdu9","wydmdu8","wydmdsx","wydmdsz","wydmdtp"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:27.683 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:27.683433Z","nanoTime":27993697191700,"traceId":"3d65ab23","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:27.683 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:27.683 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdub
2025-11-21 19:53:27.683 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.7634ms)
2025-11-21 19:53:27.684 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:27.687 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:27.687 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:53:27.687 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 3.0602ms, 역직렬화: 0.0ms
2025-11-21 19:53:27.687 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:27.687 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:27.687414400Z","nanoTime":27993701543000,"traceId":"3d65ab23","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":4351300,"duration_ms":4,"resultData":{"centerGeohashId":"wydmdub","nineBlockGeohashes":["wydmdub","wydmdv0","wydmdv1","wydmduc","wydmdu9","wydmdu8","wydmdsx","wydmdsz","wydmdtp"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdub","hit":false,"valueSize":0,"l1CacheGetDurationNs":763400,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdub","cacheKey":"data:wydmdub:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":545000},{"geohashId":"wydmdv0","cacheKey":"data:wydmdv0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":399300},{"geohashId":"wydmdv1","cacheKey":"data:wydmdv1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":290300},{"geohashId":"wydmduc","cacheKey":"data:wydmduc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":208400},{"geohashId":"wydmdu9","cacheKey":"data:wydmdu9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":175200},{"geohashId":"wydmdu8","cacheKey":"data:wydmdu8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":206900},{"geohashId":"wydmdsx","cacheKey":"data:wydmdsx:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":224900},{"geohashId":"wydmdsz","cacheKey":"data:wydmdsz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":360100},{"geohashId":"wydmdtp","cacheKey":"data:wydmdtp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":532200}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":3060200,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:53:27.687 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:27.687414400Z","nanoTime":27993701898100,"traceId":"3d65ab23","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:27.687 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:27.687 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:53:27.694 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 16건
2025-11-21 19:53:27.699 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:27.699 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 6개
2025-11-21 19:53:27.699 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:27.699633400Z","nanoTime":27993713836300,"traceId":"3d65ab23","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":11938200,"duration_ms":11,"resultData":{"inputCctvMissGrids":["wydmdub","wydmdv0","wydmdv1","wydmduc","wydmdu9","wydmdu8","wydmdsx","wydmdsz","wydmdtp"],"cctvQueryResult":{"queryGeohashIds":["wydmdub","wydmdv0","wydmdv1","wydmduc","wydmdu9","wydmdu8","wydmdsx","wydmdsz","wydmdtp"],"totalRowsReturned":16,"rowsPerGrid":{"wydmdtp":2,"wydmdub":1,"wydmduc":2,"wydmdsz":6,"wydmdv0":3,"wydmdu8":2},"queryExecutionTimeNs":7004300,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdtp","cacheKey":"data:wydmdtp:cctv","dataCount":2,"dataSize":262,"errorMessage":null,"success":true},{"geohashId":"wydmdub","cacheKey":"data:wydmdub:cctv","dataCount":1,"dataSize":134,"errorMessage":null,"success":true},{"geohashId":"wydmduc","cacheKey":"data:wydmduc:cctv","dataCount":2,"dataSize":268,"errorMessage":null,"success":true},{"geohashId":"wydmdsz","cacheKey":"data:wydmdsz:cctv","dataCount":6,"dataSize":774,"errorMessage":null,"success":true},{"geohashId":"wydmdv0","cacheKey":"data:wydmdv0:cctv","dataCount":3,"dataSize":399,"errorMessage":null,"success":true},{"geohashId":"wydmdu8","cacheKey":"data:wydmdu8:cctv","dataCount":2,"dataSize":259,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:27.699 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:27.699633400Z","nanoTime":27993714176200,"traceId":"3d65ab23","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:27.699 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:27.699 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.55662154989689, 127.03537854653459)
2025-11-21 19:53:27.700 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:27.808 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:27.808 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:27.808 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:27.808 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.55662154989689, 127.03537854653459), 반경: 500m
2025-11-21 19:53:27.894 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:27.894 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 123건
2025-11-21 19:53:27.896 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:27.896 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:27.896 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 19:53:27.898 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 성동구
2025-11-21 19:53:27.898 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:27.898 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:27.898 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:27.898 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 19:53:27.898 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:27.898236700Z","nanoTime":27993912685000,"traceId":"3d65ab23","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":198508800,"duration_ms":198,"resultData":{"latitude":37.55662154989689,"longitude":127.03537854653459,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":198330100,"addressApiResult":{"cached":false,"cacheKey":"address:37.55662154989689:127.03537854653459","roadAddress":"서울특별시 성동구 고산자로 164","jibunAddress":"서울 성동구 행당동 349","responseSize":70,"executionTimeNs":107940900,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":1077800,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.55662154989689:127.03537854653459:500","categoryCount":15,"placesByCategory":{"CT1":5,"AT4":0,"CS2":11,"SC4":3,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":0,"PO3":4,"FD6":15,"PK6":15,"OL7":0,"PM9":9},"totalPlaces":123,"responseSize":14312,"executionTimeNs":89311400,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:27.899 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:27.899252500Z","nanoTime":27993913031200,"traceId":"3d65ab23","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:27.899 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:27.899 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:27.899 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 16개
2025-11-21 19:53:27.899 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 16개 (총 카메라 대수: 51대)
2025-11-21 19:53:27.899 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:27.968 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구 영신로20길 11 (거리: 582m)
2025-11-21 19:53:27.968 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:27.968 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:27.969 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 12개 카테고리
2025-11-21 19:53:27.969 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:27.969 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:27.969456800Z","nanoTime":27993983294700,"traceId":"3d65ab23","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":70263500,"duration_ms":70,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":16,"totalCctvAfterFilter":16,"totalCameraCount":51,"filterRate":1.0,"filterExecutionTimeNs":10400,"success":true},"policeQuery":{"queryDurationNs":69682700,"found":true,"nearestAddress":"서울특별시 영등포구 영신로20길 11","nearestDistance":582.2753187231032,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":5,"BK9":15,"HP8":15,"CS2":11,"AC5":15,"CE7":15,"SC4":3,"PO3":4,"FD6":15,"PK6":15,"MT1":1,"PM9":9},"placesAfterFilter":{"CT1":5,"BK9":15,"HP8":15,"CS2":11,"AC5":15,"CE7":15,"SC4":3,"PO3":4,"FD6":15,"PK6":14,"MT1":1,"PM9":9},"totalBeforeFilter":123,"totalAfterFilter":122,"filterRate":0.991869918699187,"filterExecutionTimeNs":134600,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:27.969 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:27.969456800Z","nanoTime":27993983601700,"traceId":"3d65ab23","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:27.969 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:27.969 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 51.85, 편의성: 33.41, 종합: 42.63
2025-11-21 19:53:27.969 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:27.969456800Z","nanoTime":27993983982700,"traceId":"3d65ab23","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":381000,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":27.215585159612104,"policeDistance":582.2753187231032,"cctvScore":53.333333333333336,"cctvCount":16,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":51.852931761216965,"success":true},"convenienceScore":{"categoryScores":{"CT1":20.0,"BK9":75.0,"HP8":100.0,"CS2":3.910985959560405,"AC5":15.0,"CE7":30.0,"SC4":6.0,"PO3":12.0,"FD6":15.0,"PK6":42.0,"MT1":10.0,"PM9":72.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":33.40924882996337,"success":true},"overallScore":42.63109029559017,"errorMessage":null,"success":true}}
2025-11-21 19:53:27.969 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:27.969456800Z","nanoTime":27993984202700,"traceId":"3d65ab23","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:27.969 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:27.969 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구 영신로20길 11, latitude=37.557429, longitude=127.028852, geohashId=wydmdt5)
2025-11-21 19:53:27.969 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 582.2753187231032
2025-11-21 19:53:27.971 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdub
2025-11-21 19:53:27.971 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:27.971 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:27.971467700Z","nanoTime":27993985778500,"traceId":"3d65ab23","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1575800,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["학교이(가) 66m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdub","dataSize":17032,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17032,"errorMessage":null,"success":true}}
2025-11-21 19:53:27.971 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:28.422 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:28.424 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56155876597708, longitude=127.03619579569005, radius=500)
2025-11-21 19:53:28.424 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:28.424 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56155876597708, longitude=127.03619579569005, radius=500
2025-11-21 19:53:28.424 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:28.424059100Z","nanoTime":27994438020100,"traceId":"f5bd247f","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:28.424 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:28.424 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56155876597708, lon=127.03619579569005
2025-11-21 19:53:28.424 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:28.424059100Z","nanoTime":27994438193700,"traceId":"f5bd247f","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:28.424 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:28.424059100Z","nanoTime":27994438390300,"traceId":"f5bd247f","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":196600,"duration_ms":0,"resultData":{"latitude":37.56155876597708,"longitude":127.03619579569005,"precision":7,"centerHash":"wydmdvb","adjacentHashes":["wydmdvb","wydmdy0","wydmdy1","wydmdvc","wydmdv9","wydmdv8","wydmdtx","wydmdtz","wydmdwp"],"errorMessage":null,"success":true}}
2025-11-21 19:53:28.424 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdvb, wydmdy0, wydmdy1, wydmdvc, wydmdv9, wydmdv8, wydmdtx, wydmdtz, wydmdwp]
2025-11-21 19:53:28.424 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdvb
2025-11-21 19:53:28.425 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:28.424059100Z","nanoTime":27994438709500,"traceId":"f5bd247f","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":689400,"duration_ms":0,"resultData":{"requestLatitude":37.56155876597708,"requestLongitude":127.03619579569005,"requestRadius":500,"centerGeohashId":"wydmdvb","nineBlockGeohashes":["wydmdvb","wydmdy0","wydmdy1","wydmdvc","wydmdv9","wydmdv8","wydmdtx","wydmdtz","wydmdwp"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:28.425 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:28.425059800Z","nanoTime":27994438868800,"traceId":"f5bd247f","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:28.425 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:28.425 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdvb
2025-11-21 19:53:28.425 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.6216ms)
2025-11-21 19:53:28.425 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:28.432 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:28.432 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 3개, 미스: 6개
2025-11-21 19:53:28.432 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 6.7588ms, 역직렬화: 1.9027ms
2025-11-21 19:53:28.432 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:28.432 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:28.432277100Z","nanoTime":27994446591900,"traceId":"f5bd247f","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":7723100,"duration_ms":7,"resultData":{"centerGeohashId":"wydmdvb","nineBlockGeohashes":["wydmdvb","wydmdy0","wydmdy1","wydmdvc","wydmdv9","wydmdv8","wydmdtx","wydmdtz","wydmdwp"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdvb","hit":false,"valueSize":0,"l1CacheGetDurationNs":621600,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdvb","cacheKey":"data:wydmdvb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":375500},{"geohashId":"wydmdy0","cacheKey":"data:wydmdy0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":328400},{"geohashId":"wydmdy1","cacheKey":"data:wydmdy1:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":383,"l2CacheGetDurationNs":1131400},{"geohashId":"wydmdvc","cacheKey":"data:wydmdvc:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":660,"l2CacheGetDurationNs":999200},{"geohashId":"wydmdv9","cacheKey":"data:wydmdv9:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":133,"l2CacheGetDurationNs":668600},{"geohashId":"wydmdv8","cacheKey":"data:wydmdv8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":385300},{"geohashId":"wydmdtx","cacheKey":"data:wydmdtx:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":363600},{"geohashId":"wydmdtz","cacheKey":"data:wydmdtz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":244600},{"geohashId":"wydmdwp","cacheKey":"data:wydmdwp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":174600}],"l2TotalHits":3,"l2TotalMisses":6,"l2CacheTotalDurationNs":6758800,"l2JsonDeserializeTotalDurationNs":1902700,"errorMessage":null,"success":true}}
2025-11-21 19:53:28.432 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:28.432277100Z","nanoTime":27994446942700,"traceId":"f5bd247f","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:28.433 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:28.433 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 6개
2025-11-21 19:53:28.438 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 20건
2025-11-21 19:53:28.440 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:28.440 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:53:28.440 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:28.440832400Z","nanoTime":27994454919300,"traceId":"f5bd247f","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":7976600,"duration_ms":7,"resultData":{"inputCctvMissGrids":["wydmdvb","wydmdy0","wydmdv8","wydmdtx","wydmdtz","wydmdwp"],"cctvQueryResult":{"queryGeohashIds":["wydmdvb","wydmdy0","wydmdv8","wydmdtx","wydmdtz","wydmdwp"],"totalRowsReturned":20,"rowsPerGrid":{"wydmdvb":7,"wydmdwp":3,"wydmdtx":3,"wydmdtz":4,"wydmdv8":3},"queryExecutionTimeNs":5753600,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdvb","cacheKey":"data:wydmdvb:cctv","dataCount":7,"dataSize":881,"errorMessage":null,"success":true},{"geohashId":"wydmdwp","cacheKey":"data:wydmdwp:cctv","dataCount":3,"dataSize":362,"errorMessage":null,"success":true},{"geohashId":"wydmdtx","cacheKey":"data:wydmdtx:cctv","dataCount":3,"dataSize":392,"errorMessage":null,"success":true},{"geohashId":"wydmdtz","cacheKey":"data:wydmdtz:cctv","dataCount":4,"dataSize":529,"errorMessage":null,"success":true},{"geohashId":"wydmdv8","cacheKey":"data:wydmdv8:cctv","dataCount":3,"dataSize":396,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:28.440 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:28.440832400Z","nanoTime":27994455175200,"traceId":"f5bd247f","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:28.440 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:28.440 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56155876597708, 127.03619579569005)
2025-11-21 19:53:28.440 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:28.537 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:28.537 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:28.537 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:28.537 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56155876597708, 127.03619579569005), 반경: 500m
2025-11-21 19:53:28.626 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:28.628 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 144건
2025-11-21 19:53:28.629 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:28.629 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:28.629 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 19:53:28.629 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 성동구
2025-11-21 19:53:28.629 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:28.629 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:28.629 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:28.629 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 19:53:28.629 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:28.629200100Z","nanoTime":27994644917400,"traceId":"f5bd247f","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":189742200,"duration_ms":189,"resultData":{"latitude":37.56155876597708,"longitude":127.03619579569005,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":189527300,"addressApiResult":{"cached":false,"cacheKey":"address:37.56155876597708:127.03619579569005","roadAddress":"서울특별시 성동구 왕십리광장로 9","jibunAddress":"서울 성동구 행당동 192-8","responseSize":72,"executionTimeNs":95747100,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":1155400,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56155876597708:127.03619579569005:500","categoryCount":15,"placesByCategory":{"CT1":5,"AT4":3,"CS2":15,"SC4":1,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":7,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalPlaces":144,"responseSize":16710,"executionTimeNs":92624800,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:28.629 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:28.629200100Z","nanoTime":27994645306200,"traceId":"f5bd247f","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:28.629 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:28.629 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:28.629 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 29개
2025-11-21 19:53:28.629 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 29개 (총 카메라 대수: 96대)
2025-11-21 19:53:28.629 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:28.704 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구  선유로 95 (거리: 513m)
2025-11-21 19:53:28.704 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:28.704 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:28.704 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:53:28.704 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:28.704 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:28.704710800Z","nanoTime":27994718797200,"traceId":"f5bd247f","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":73491000,"duration_ms":73,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":29,"totalCctvAfterFilter":29,"totalCameraCount":96,"filterRate":1.0,"filterExecutionTimeNs":20700,"success":true},"policeQuery":{"queryDurationNs":72825600,"found":true,"nearestAddress":"서울특별시 영등포구  선유로 95","nearestDistance":513.2287659764762,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":5,"AT4":3,"CS2":15,"SC4":1,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":7,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"placesAfterFilter":{"CT1":5,"AT4":3,"CS2":15,"SC4":1,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":7,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalBeforeFilter":144,"totalAfterFilter":144,"filterRate":1.0,"filterExecutionTimeNs":198500,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:28.704 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:28.704710800Z","nanoTime":27994719161400,"traceId":"f5bd247f","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:28.704 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:28.704 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 71.78, 편의성: 38.16, 종합: 54.97
2025-11-21 19:53:28.704 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:28.704710800Z","nanoTime":27994719695200,"traceId":"f5bd247f","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":533800,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":35.846404252940474,"policeDistance":513.2287659764762,"cctvScore":96.66666666666667,"cctvCount":29,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":71.77551082254881,"success":true},"convenienceScore":{"categoryScores":{"CT1":20.0,"AT4":9.0,"CS2":5.333162672127825,"SC4":2.0,"MT1":30.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":21.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":38.15554417814186,"success":true},"overallScore":54.96552750034533,"errorMessage":null,"success":true}}
2025-11-21 19:53:28.704 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:28.704710800Z","nanoTime":27994720081000,"traceId":"f5bd247f","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:28.704 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:28.704 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구  선유로 95, latitude=37.560301, longitude=127.041798, geohashId=wydmdvt)
2025-11-21 19:53:28.704 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 513.2287659764762
2025-11-21 19:53:28.706 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdvb
2025-11-21 19:53:28.706 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:28.706 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:28.706729300Z","nanoTime":27994722154300,"traceId":"f5bd247f","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":2073300,"duration_ms":2,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["공공기관이(가) 36m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdvb","dataSize":21004,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":21004,"errorMessage":null,"success":true}}
2025-11-21 19:53:28.708 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:29.209 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:29.209 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.565160661912614, longitude=127.04246815605553, radius=500)
2025-11-21 19:53:29.209 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:29.209 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.565160661912614, longitude=127.04246815605553, radius=500
2025-11-21 19:53:29.209 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:29.209588500Z","nanoTime":27995224077200,"traceId":"68495123","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:29.209 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:29.209 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.565160661912614, lon=127.04246815605553
2025-11-21 19:53:29.209 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:29.209588500Z","nanoTime":27995224328200,"traceId":"68495123","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:29.210 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:29.210685400Z","nanoTime":27995224446100,"traceId":"68495123","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":117900,"duration_ms":0,"resultData":{"latitude":37.565160661912614,"longitude":127.04246815605553,"precision":7,"centerHash":"wydmdyt","adjacentHashes":["wydmdyt","wydmdyv","wydmdyy","wydmdyw","wydmdyq","wydmdym","wydmdyk","wydmdys","wydmdyu"],"errorMessage":null,"success":true}}
2025-11-21 19:53:29.210 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdyt, wydmdyv, wydmdyy, wydmdyw, wydmdyq, wydmdym, wydmdyk, wydmdys, wydmdyu]
2025-11-21 19:53:29.210 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdyt
2025-11-21 19:53:29.210 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:29.210685400Z","nanoTime":27995224696200,"traceId":"68495123","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":619000,"duration_ms":0,"resultData":{"requestLatitude":37.565160661912614,"requestLongitude":127.04246815605553,"requestRadius":500,"centerGeohashId":"wydmdyt","nineBlockGeohashes":["wydmdyt","wydmdyv","wydmdyy","wydmdyw","wydmdyq","wydmdym","wydmdyk","wydmdys","wydmdyu"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:29.210 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:29.210685400Z","nanoTime":27995224816900,"traceId":"68495123","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:29.210 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:29.210 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdyt
2025-11-21 19:53:29.211 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.469ms)
2025-11-21 19:53:29.211 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:29.211 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:29.211 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:53:29.211 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.5742ms, 역직렬화: 0.0ms
2025-11-21 19:53:29.211 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:29.211 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:29.211701Z","nanoTime":27995227153300,"traceId":"68495123","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2336400,"duration_ms":2,"resultData":{"centerGeohashId":"wydmdyt","nineBlockGeohashes":["wydmdyt","wydmdyv","wydmdyy","wydmdyw","wydmdyq","wydmdym","wydmdyk","wydmdys","wydmdyu"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdyt","hit":false,"valueSize":0,"l1CacheGetDurationNs":469000,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdyt","cacheKey":"data:wydmdyt:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":299000},{"geohashId":"wydmdyv","cacheKey":"data:wydmdyv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":215200},{"geohashId":"wydmdyy","cacheKey":"data:wydmdyy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":156800},{"geohashId":"wydmdyw","cacheKey":"data:wydmdyw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":149100},{"geohashId":"wydmdyq","cacheKey":"data:wydmdyq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":140800},{"geohashId":"wydmdym","cacheKey":"data:wydmdym:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":135400},{"geohashId":"wydmdyk","cacheKey":"data:wydmdyk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":121800},{"geohashId":"wydmdys","cacheKey":"data:wydmdys:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":161000},{"geohashId":"wydmdyu","cacheKey":"data:wydmdyu:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":115300}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1574200,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:53:29.211 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:29.211701Z","nanoTime":27995227387300,"traceId":"68495123","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:29.211 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:29.211 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:53:29.219 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 25건
2025-11-21 19:53:29.219 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:29.219 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:53:29.219 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:29.219989300Z","nanoTime":27995236682100,"traceId":"68495123","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":9294800,"duration_ms":9,"resultData":{"inputCctvMissGrids":["wydmdyt","wydmdyv","wydmdyy","wydmdyw","wydmdyq","wydmdym","wydmdyk","wydmdys","wydmdyu"],"cctvQueryResult":{"queryGeohashIds":["wydmdyt","wydmdyv","wydmdyy","wydmdyw","wydmdyq","wydmdym","wydmdyk","wydmdys","wydmdyu"],"totalRowsReturned":25,"rowsPerGrid":{"wydmdyt":7,"wydmdyv":1,"wydmdyw":1,"wydmdyq":3,"wydmdys":2,"wydmdym":2,"wydmdyy":5,"wydmdyk":4},"queryExecutionTimeNs":5913800,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdyt","cacheKey":"data:wydmdyt:cctv","dataCount":7,"dataSize":891,"errorMessage":null,"success":true},{"geohashId":"wydmdyv","cacheKey":"data:wydmdyv:cctv","dataCount":1,"dataSize":134,"errorMessage":null,"success":true},{"geohashId":"wydmdyw","cacheKey":"data:wydmdyw:cctv","dataCount":1,"dataSize":133,"errorMessage":null,"success":true},{"geohashId":"wydmdyq","cacheKey":"data:wydmdyq:cctv","dataCount":3,"dataSize":397,"errorMessage":null,"success":true},{"geohashId":"wydmdys","cacheKey":"data:wydmdys:cctv","dataCount":2,"dataSize":265,"errorMessage":null,"success":true},{"geohashId":"wydmdym","cacheKey":"data:wydmdym:cctv","dataCount":2,"dataSize":266,"errorMessage":null,"success":true},{"geohashId":"wydmdyy","cacheKey":"data:wydmdyy:cctv","dataCount":5,"dataSize":657,"errorMessage":null,"success":true},{"geohashId":"wydmdyk","cacheKey":"data:wydmdyk:cctv","dataCount":4,"dataSize":527,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:29.219 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:29.219989300Z","nanoTime":27995237018600,"traceId":"68495123","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:29.219 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:29.219 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.565160661912614, 127.04246815605553)
2025-11-21 19:53:29.219 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:29.319 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:29.319 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:29.319 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:29.319 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.565160661912614, 127.04246815605553), 반경: 500m
2025-11-21 19:53:29.408 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:29.408 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 105건
2025-11-21 19:53:29.409 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:29.409 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:29.409 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 19:53:29.409 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 성동구
2025-11-21 19:53:29.412 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:29.412 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:29.412 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:29.412 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 19:53:29.412 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:29.412085100Z","nanoTime":27995426260500,"traceId":"68495123","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":189241900,"duration_ms":189,"resultData":{"latitude":37.565160661912614,"longitude":127.04246815605553,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":188638000,"addressApiResult":{"cached":false,"cacheKey":"address:37.565160661912614:127.04246815605553","roadAddress":"서울특별시 성동구 마조로18길 6","jibunAddress":"서울 성동구 마장동 793-2","responseSize":72,"executionTimeNs":96654900,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":1271900,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.565160661912614:127.04246815605553:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":1,"CS2":15,"SC4":5,"MT1":0,"BK9":10,"HP8":9,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":11,"OL7":1,"PM9":5},"totalPlaces":105,"responseSize":12134,"executionTimeNs":90711200,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:29.412 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:29.412085100Z","nanoTime":27995426624100,"traceId":"68495123","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:29.412 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:29.412 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:29.412 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 25개
2025-11-21 19:53:29.412 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 25개 (총 카메라 대수: 73대)
2025-11-21 19:53:29.412 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:29.503 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구  선유로 95 (거리: 544m)
2025-11-21 19:53:29.503 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:29.503 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:29.503 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 19:53:29.503 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:29.503 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:29.503631Z","nanoTime":27995520288900,"traceId":"68495123","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":93664800,"duration_ms":93,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":25,"totalCctvAfterFilter":25,"totalCameraCount":73,"filterRate":1.0,"filterExecutionTimeNs":19400,"success":true},"policeQuery":{"queryDurationNs":93092900,"found":true,"nearestAddress":"서울특별시 영등포구  선유로 95","nearestDistance":543.5886831730538,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"AT4":1,"CS2":15,"SC4":5,"BK9":10,"HP8":9,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":11,"OL7":1,"PM9":5},"placesAfterFilter":{"AT4":1,"CS2":15,"SC4":5,"BK9":10,"HP8":9,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":11,"OL7":1,"PM9":5},"totalBeforeFilter":105,"totalAfterFilter":105,"filterRate":1.0,"filterExecutionTimeNs":130000,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:29.503 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:29.503631Z","nanoTime":27995520583400,"traceId":"68495123","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:29.503 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:29.503 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 65.30, 편의성: 31.72, 종합: 48.51
2025-11-21 19:53:29.503 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:29.503631Z","nanoTime":27995520909500,"traceId":"68495123","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":326100,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":32.05141460336827,"policeDistance":543.5886831730538,"cctvScore":83.33333333333334,"cctvCount":25,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":65.30368059434382,"success":true},"convenienceScore":{"categoryScores":{"AT4":3.0,"CS2":5.333162672127825,"SC4":10.0,"BK9":50.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":6.0,"FD6":15.0,"PK6":33.0,"OL7":5.0,"PM9":40.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":31.71793559016368,"success":true},"overallScore":48.51080809225375,"errorMessage":null,"success":true}}
2025-11-21 19:53:29.503 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:29.503631Z","nanoTime":27995521050000,"traceId":"68495123","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:29.503 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:29.503 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구  선유로 95, latitude=37.560301, longitude=127.041798, geohashId=wydmdvt)
2025-11-21 19:53:29.503 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 543.5886831730538
2025-11-21 19:53:29.503 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdyt
2025-11-21 19:53:29.503 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:29.508 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:29.503631Z","nanoTime":27995522386200,"traceId":"68495123","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1336200,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["음식점이(가) 34m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdyt","dataSize":15995,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":15995,"errorMessage":null,"success":true}}
2025-11-21 19:53:29.508 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:30.450 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:30.450 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5646943160408, longitude=127.03592566310257, radius=500)
2025-11-21 19:53:30.450 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:30.450 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5646943160408, longitude=127.03592566310257, radius=500
2025-11-21 19:53:30.450 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:30.450593900Z","nanoTime":27996464546600,"traceId":"e92d1ae7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:30.450 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:30.450 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5646943160408, lon=127.03592566310257
2025-11-21 19:53:30.450 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:30.450593900Z","nanoTime":27996464696600,"traceId":"e92d1ae7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:30.450 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:30.450593900Z","nanoTime":27996464795100,"traceId":"e92d1ae7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":98500,"duration_ms":0,"resultData":{"latitude":37.5646943160408,"longitude":127.03592566310257,"precision":7,"centerHash":"wydmdy2","adjacentHashes":["wydmdy2","wydmdy8","wydmdy9","wydmdy3","wydmdy1","wydmdy0","wydmdwp","wydmdwr","wydmdwx"],"errorMessage":null,"success":true}}
2025-11-21 19:53:30.450 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdy2, wydmdy8, wydmdy9, wydmdy3, wydmdy1, wydmdy0, wydmdwp, wydmdwr, wydmdwx]
2025-11-21 19:53:30.450 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdy2
2025-11-21 19:53:30.450 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:30.450593900Z","nanoTime":27996464985200,"traceId":"e92d1ae7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":438600,"duration_ms":0,"resultData":{"requestLatitude":37.5646943160408,"requestLongitude":127.03592566310257,"requestRadius":500,"centerGeohashId":"wydmdy2","nineBlockGeohashes":["wydmdy2","wydmdy8","wydmdy9","wydmdy3","wydmdy1","wydmdy0","wydmdwp","wydmdwr","wydmdwx"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:30.450 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:30.450593900Z","nanoTime":27996465095500,"traceId":"e92d1ae7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:30.450 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:30.451 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdy2
2025-11-21 19:53:30.451 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5729ms)
2025-11-21 19:53:30.451 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:30.454 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:30.454 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 2개, 미스: 7개
2025-11-21 19:53:30.455 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 3.0257ms, 역직렬화: 0.3085ms
2025-11-21 19:53:30.455 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:30.455 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:30.455274Z","nanoTime":27996469070200,"traceId":"e92d1ae7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3974700,"duration_ms":3,"resultData":{"centerGeohashId":"wydmdy2","nineBlockGeohashes":["wydmdy2","wydmdy8","wydmdy9","wydmdy3","wydmdy1","wydmdy0","wydmdwp","wydmdwr","wydmdwx"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdy2","hit":false,"valueSize":0,"l1CacheGetDurationNs":572900,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdy2","cacheKey":"data:wydmdy2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":344500},{"geohashId":"wydmdy8","cacheKey":"data:wydmdy8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":220400},{"geohashId":"wydmdy9","cacheKey":"data:wydmdy9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":223900},{"geohashId":"wydmdy3","cacheKey":"data:wydmdy3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":183100},{"geohashId":"wydmdy1","cacheKey":"data:wydmdy1:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":383,"l2CacheGetDurationNs":559600},{"geohashId":"wydmdy0","cacheKey":"data:wydmdy0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":252200},{"geohashId":"wydmdwp","cacheKey":"data:wydmdwp:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":362,"l2CacheGetDurationNs":379100},{"geohashId":"wydmdwr","cacheKey":"data:wydmdwr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":265900},{"geohashId":"wydmdwx","cacheKey":"data:wydmdwx:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":194100}],"l2TotalHits":2,"l2TotalMisses":7,"l2CacheTotalDurationNs":3025700,"l2JsonDeserializeTotalDurationNs":308500,"errorMessage":null,"success":true}}
2025-11-21 19:53:30.455 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:30.455274Z","nanoTime":27996469457000,"traceId":"e92d1ae7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:30.455 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:30.455 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 7개
2025-11-21 19:53:30.461 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 19건
2025-11-21 19:53:30.463 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:30.463 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:53:30.464 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:30.463067800Z","nanoTime":27996477693800,"traceId":"e92d1ae7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":8236800,"duration_ms":8,"resultData":{"inputCctvMissGrids":["wydmdy2","wydmdy8","wydmdy9","wydmdy3","wydmdy0","wydmdwr","wydmdwx"],"cctvQueryResult":{"queryGeohashIds":["wydmdy2","wydmdy8","wydmdy9","wydmdy3","wydmdy0","wydmdwr","wydmdwx"],"totalRowsReturned":19,"rowsPerGrid":{"wydmdwr":6,"wydmdy2":3,"wydmdy3":2,"wydmdy8":1,"wydmdy9":1,"wydmdwx":6},"queryExecutionTimeNs":5982800,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdwr","cacheKey":"data:wydmdwr:cctv","dataCount":6,"dataSize":776,"errorMessage":null,"success":true},{"geohashId":"wydmdy2","cacheKey":"data:wydmdy2:cctv","dataCount":3,"dataSize":386,"errorMessage":null,"success":true},{"geohashId":"wydmdy3","cacheKey":"data:wydmdy3:cctv","dataCount":2,"dataSize":257,"errorMessage":null,"success":true},{"geohashId":"wydmdy8","cacheKey":"data:wydmdy8:cctv","dataCount":1,"dataSize":133,"errorMessage":null,"success":true},{"geohashId":"wydmdy9","cacheKey":"data:wydmdy9:cctv","dataCount":1,"dataSize":134,"errorMessage":null,"success":true},{"geohashId":"wydmdwx","cacheKey":"data:wydmdwx:cctv","dataCount":6,"dataSize":785,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:30.464 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:30.464060200Z","nanoTime":27996477920500,"traceId":"e92d1ae7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:30.464 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:30.464 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5646943160408, 127.03592566310257)
2025-11-21 19:53:30.464 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:30.559 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:30.559 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:30.560 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:30.560 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5646943160408, 127.03592566310257), 반경: 500m
2025-11-21 19:53:30.650 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:30.650 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 135건
2025-11-21 19:53:30.651 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:30.651 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:30.651 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 19:53:30.652 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 성동구
2025-11-21 19:53:30.652 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:30.652 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:30.652 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:30.652 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 19:53:30.652 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:30.652343100Z","nanoTime":27996666918900,"traceId":"e92d1ae7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":188998400,"duration_ms":188,"resultData":{"latitude":37.5646943160408,"longitude":127.03592566310257,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":188815300,"addressApiResult":{"cached":false,"cacheKey":"address:37.5646943160408:127.03592566310257","roadAddress":"서울특별시 성동구 고산자로 279","jibunAddress":"서울 성동구 도선동 13","responseSize":69,"executionTimeNs":96152800,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":803300,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5646943160408:127.03592566310257:500","categoryCount":15,"placesByCategory":{"CT1":3,"AT4":2,"CS2":15,"SC4":2,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":6,"FD6":15,"PK6":15,"OL7":1,"PM9":11},"totalPlaces":135,"responseSize":15677,"executionTimeNs":91859200,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:30.652 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:30.652343100Z","nanoTime":27996667262400,"traceId":"e92d1ae7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:30.652 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:30.652 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:30.652 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 25개
2025-11-21 19:53:30.652 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 25개 (총 카메라 대수: 77대)
2025-11-21 19:53:30.652 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:30.722 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구 대림로 197 (거리: 362m)
2025-11-21 19:53:30.722 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:30.722 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:30.722 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:53:30.722 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:30.722 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:30.722616900Z","nanoTime":27996737290600,"traceId":"e92d1ae7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":70028200,"duration_ms":70,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":25,"totalCctvAfterFilter":25,"totalCameraCount":77,"filterRate":1.0,"filterExecutionTimeNs":21300,"success":true},"policeQuery":{"queryDurationNs":69380100,"found":true,"nearestAddress":"서울특별시 영등포구 대림로 197","nearestDistance":362.10453058353755,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":3,"AT4":2,"CS2":15,"SC4":2,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":6,"FD6":15,"PK6":15,"OL7":1,"PM9":11},"placesAfterFilter":{"CT1":3,"AT4":2,"CS2":15,"SC4":2,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":6,"FD6":15,"PK6":15,"OL7":1,"PM9":11},"totalBeforeFilter":135,"totalAfterFilter":135,"filterRate":1.0,"filterExecutionTimeNs":219000,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:30.722 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:30.722616900Z","nanoTime":27996737733800,"traceId":"e92d1ae7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:30.722 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:30.722 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 72.11, 편의성: 35.89, 종합: 54.00
2025-11-21 19:53:30.722 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:30.722616900Z","nanoTime":27996738182200,"traceId":"e92d1ae7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":448400,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":54.736933677057806,"policeDistance":362.10453058353755,"cctvScore":83.33333333333334,"cctvCount":25,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":72.10933631645068,"success":true},"convenienceScore":{"categoryScores":{"CT1":12.0,"AT4":6.0,"CS2":5.333162672127825,"SC4":4.0,"MT1":20.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":18.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":88.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":35.888877511475194,"success":true},"overallScore":53.99910691396293,"errorMessage":null,"success":true}}
2025-11-21 19:53:30.724 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:30.724630100Z","nanoTime":27996738428600,"traceId":"e92d1ae7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:30.724 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:30.724 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구 대림로 197, latitude=37.566665, longitude=127.032655, geohashId=wydmdwy)
2025-11-21 19:53:30.724 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 362.10453058353755
2025-11-21 19:53:30.726 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdy2
2025-11-21 19:53:30.726 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:30.726 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:30.726189900Z","nanoTime":27996740499500,"traceId":"e92d1ae7","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":2070900,"duration_ms":2,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["음식점이(가) 23m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdy2","dataSize":19615,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19615,"errorMessage":null,"success":true}}
2025-11-21 19:53:30.726 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:31.494 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:31.494 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56219264672053, longitude=127.02363272747361, radius=500)
2025-11-21 19:53:31.494 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:31.494 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56219264672053, longitude=127.02363272747361, radius=500
2025-11-21 19:53:31.494 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:31.494179300Z","nanoTime":27997508733700,"traceId":"3086f43a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:31.494 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:31.494 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56219264672053, lon=127.02363272747361
2025-11-21 19:53:31.494 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:31.494179300Z","nanoTime":27997508861100,"traceId":"3086f43a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:31.495 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:31.495182900Z","nanoTime":27997508941800,"traceId":"3086f43a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":80700,"duration_ms":0,"resultData":{"latitude":37.56219264672053,"longitude":127.02363272747361,"precision":7,"centerHash":"wydmdmz","adjacentHashes":["wydmdmz","wydmdqp","wydmdw0","wydmdtb","wydmdt8","wydmdmx","wydmdmw","wydmdmy","wydmdqn"],"errorMessage":null,"success":true}}
2025-11-21 19:53:31.495 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdmz, wydmdqp, wydmdw0, wydmdtb, wydmdt8, wydmdmx, wydmdmw, wydmdmy, wydmdqn]
2025-11-21 19:53:31.495 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdmz
2025-11-21 19:53:31.495 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:31.495182900Z","nanoTime":27997509089200,"traceId":"3086f43a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":355500,"duration_ms":0,"resultData":{"requestLatitude":37.56219264672053,"requestLongitude":127.02363272747361,"requestRadius":500,"centerGeohashId":"wydmdmz","nineBlockGeohashes":["wydmdmz","wydmdqp","wydmdw0","wydmdtb","wydmdt8","wydmdmx","wydmdmw","wydmdmy","wydmdqn"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:31.495 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:31.495182900Z","nanoTime":27997509175100,"traceId":"3086f43a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:31.495 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:31.495 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdmz
2025-11-21 19:53:31.495 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5234ms)
2025-11-21 19:53:31.495 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:31.495 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:31.495 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:53:31.495 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.6306ms, 역직렬화: 0.0ms
2025-11-21 19:53:31.495 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:31.497 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:31.495878700Z","nanoTime":27997511594000,"traceId":"3086f43a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2418900,"duration_ms":2,"resultData":{"centerGeohashId":"wydmdmz","nineBlockGeohashes":["wydmdmz","wydmdqp","wydmdw0","wydmdtb","wydmdt8","wydmdmx","wydmdmw","wydmdmy","wydmdqn"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdmz","hit":false,"valueSize":0,"l1CacheGetDurationNs":523400,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdmz","cacheKey":"data:wydmdmz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":375900},{"geohashId":"wydmdqp","cacheKey":"data:wydmdqp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":259200},{"geohashId":"wydmdw0","cacheKey":"data:wydmdw0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":142400},{"geohashId":"wydmdtb","cacheKey":"data:wydmdtb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":133800},{"geohashId":"wydmdt8","cacheKey":"data:wydmdt8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":129800},{"geohashId":"wydmdmx","cacheKey":"data:wydmdmx:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":132000},{"geohashId":"wydmdmw","cacheKey":"data:wydmdmw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":125700},{"geohashId":"wydmdmy","cacheKey":"data:wydmdmy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":138600},{"geohashId":"wydmdqn","cacheKey":"data:wydmdqn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":135800}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1630600,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:53:31.497 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:31.497888500Z","nanoTime":27997511859600,"traceId":"3086f43a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:31.497 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:31.497 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:53:31.503 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 21건
2025-11-21 19:53:31.506 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:31.506 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:53:31.506 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:31.506304800Z","nanoTime":27997521171300,"traceId":"3086f43a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":9311700,"duration_ms":9,"resultData":{"inputCctvMissGrids":["wydmdmz","wydmdqp","wydmdw0","wydmdtb","wydmdt8","wydmdmx","wydmdmw","wydmdmy","wydmdqn"],"cctvQueryResult":{"queryGeohashIds":["wydmdmz","wydmdqp","wydmdw0","wydmdtb","wydmdt8","wydmdmx","wydmdmw","wydmdmy","wydmdqn"],"totalRowsReturned":21,"rowsPerGrid":{"wydmdmx":1,"wydmdmy":2,"wydmdmz":2,"wydmdqn":5,"wydmdtb":1,"wydmdw0":5,"wydmdt8":1,"wydmdqp":4},"queryExecutionTimeNs":5531900,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdmx","cacheKey":"data:wydmdmx:cctv","dataCount":1,"dataSize":134,"errorMessage":null,"success":true},{"geohashId":"wydmdmy","cacheKey":"data:wydmdmy:cctv","dataCount":2,"dataSize":262,"errorMessage":null,"success":true},{"geohashId":"wydmdmz","cacheKey":"data:wydmdmz:cctv","dataCount":2,"dataSize":267,"errorMessage":null,"success":true},{"geohashId":"wydmdqn","cacheKey":"data:wydmdqn:cctv","dataCount":5,"dataSize":654,"errorMessage":null,"success":true},{"geohashId":"wydmdtb","cacheKey":"data:wydmdtb:cctv","dataCount":1,"dataSize":132,"errorMessage":null,"success":true},{"geohashId":"wydmdw0","cacheKey":"data:wydmdw0:cctv","dataCount":5,"dataSize":654,"errorMessage":null,"success":true},{"geohashId":"wydmdt8","cacheKey":"data:wydmdt8:cctv","dataCount":1,"dataSize":136,"errorMessage":null,"success":true},{"geohashId":"wydmdqp","cacheKey":"data:wydmdqp:cctv","dataCount":4,"dataSize":522,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:31.506 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:31.506304800Z","nanoTime":27997521366300,"traceId":"3086f43a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:31.506 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:31.506 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56219264672053, 127.02363272747361)
2025-11-21 19:53:31.506 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:31.568 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:31.568 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:31.568 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:31.569 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56219264672053, 127.02363272747361), 반경: 500m
2025-11-21 19:53:31.657 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:31.657 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 125건
2025-11-21 19:53:31.658 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:31.658 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:31.658 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 중구
2025-11-21 19:53:31.660 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 중구
2025-11-21 19:53:31.660 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:31.660 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:31.660 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:31.660 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.866910799
2025-11-21 19:53:31.660 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:31.660403500Z","nanoTime":27997674580400,"traceId":"3086f43a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":153214100,"duration_ms":153,"resultData":{"latitude":37.56219264672053,"longitude":127.02363272747361,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":153065600,"addressApiResult":{"cached":false,"cacheKey":"address:37.56219264672053:127.02363272747361","roadAddress":"서울특별시 중구 퇴계로90길 74","jibunAddress":"서울 중구 신당동 851","responseSize":69,"executionTimeNs":61670700,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:중구","guName":"중구","arrestRate":0.866910799,"dataFound":true,"executionTimeNs":1215900,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56219264672053:127.02363272747361:500","categoryCount":15,"placesByCategory":{"CT1":2,"AT4":3,"CS2":15,"SC4":3,"MT1":0,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":0,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":10},"totalPlaces":125,"responseSize":14533,"executionTimeNs":90179000,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:31.660 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:31.660403500Z","nanoTime":27997674992400,"traceId":"3086f43a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:31.660 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:31.660 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:31.660 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 21개
2025-11-21 19:53:31.660 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 21개 (총 카메라 대수: 62대)
2025-11-21 19:53:31.660 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:31.733 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구 영신로20길 11 (거리: 702m)
2025-11-21 19:53:31.733 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:31.733 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:31.733 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 19:53:31.733 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:31.733 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:31.733552600Z","nanoTime":27997748091400,"traceId":"3086f43a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":73099000,"duration_ms":73,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":21,"totalCctvAfterFilter":21,"totalCameraCount":62,"filterRate":1.0,"filterExecutionTimeNs":23400,"success":true},"policeQuery":{"queryDurationNs":72435900,"found":true,"nearestAddress":"서울특별시 영등포구 영신로20길 11","nearestDistance":701.5904435939243,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":2,"AT4":3,"CS2":15,"SC4":3,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":10},"placesAfterFilter":{"CT1":2,"AT4":3,"CS2":15,"SC4":3,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":10},"totalBeforeFilter":125,"totalAfterFilter":125,"filterRate":1.0,"filterExecutionTimeNs":194900,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:31.733 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:31.733552600Z","nanoTime":27997748413800,"traceId":"3086f43a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:31.733 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:31.733 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 57.70, 편의성: 30.80, 종합: 44.25
2025-11-21 19:53:31.733 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:31.733552600Z","nanoTime":27997748779600,"traceId":"3086f43a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":365800,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":12.301194550759462,"policeDistance":701.5904435939243,"cctvScore":70.0,"cctvCount":21,"arrestRateScore":86.6910799,"arrestRate":0.866910799,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":57.69768233522784,"success":true},"convenienceScore":{"categoryScores":{"CT1":8.0,"AT4":9.0,"CS2":11.431706982486624,"SC4":6.0,"BK9":70.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"PO3":6.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":80.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"중구","guPopulation":131214,"finalScore":30.802438998652818,"success":true},"overallScore":44.25006066694033,"errorMessage":null,"success":true}}
2025-11-21 19:53:31.733 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:31.733552600Z","nanoTime":27997749080300,"traceId":"3086f43a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:31.733 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:31.735 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구 영신로20길 11, latitude=37.557429, longitude=127.028852, geohashId=wydmdt5)
2025-11-21 19:53:31.735 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 701.5904435939243
2025-11-21 19:53:31.737 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdmz
2025-11-21 19:53:31.737 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:31.737 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:31.737060600Z","nanoTime":27997751020200,"traceId":"3086f43a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1939900,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 97m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdmz","dataSize":17975,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17975,"errorMessage":null,"success":true}}
2025-11-21 19:53:31.737 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:32.216 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:32.216 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.562626038249796, longitude=127.01851693784573, radius=500)
2025-11-21 19:53:32.217 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:32.217 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.562626038249796, longitude=127.01851693784573, radius=500
2025-11-21 19:53:32.217 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:32.217325Z","nanoTime":27998231118300,"traceId":"b1ac2106","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:32.217 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:32.217 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.562626038249796, lon=127.01851693784573
2025-11-21 19:53:32.217 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:32.217325Z","nanoTime":27998231323700,"traceId":"b1ac2106","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:32.217 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:32.217325Z","nanoTime":27998231416800,"traceId":"b1ac2106","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":93100,"duration_ms":0,"resultData":{"latitude":37.562626038249796,"longitude":127.01851693784573,"precision":7,"centerHash":"wydmdqh","adjacentHashes":["wydmdqh","wydmdqk","wydmdqm","wydmdqj","wydmdmv","wydmdmu","wydmdmg","wydmdq5","wydmdq7"],"errorMessage":null,"success":true}}
2025-11-21 19:53:32.217 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdqh, wydmdqk, wydmdqm, wydmdqj, wydmdmv, wydmdmu, wydmdmg, wydmdq5, wydmdq7]
2025-11-21 19:53:32.217 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdqh
2025-11-21 19:53:32.217 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:32.217325Z","nanoTime":27998231727900,"traceId":"b1ac2106","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":609600,"duration_ms":0,"resultData":{"requestLatitude":37.562626038249796,"requestLongitude":127.01851693784573,"requestRadius":500,"centerGeohashId":"wydmdqh","nineBlockGeohashes":["wydmdqh","wydmdqk","wydmdqm","wydmdqj","wydmdmv","wydmdmu","wydmdmg","wydmdq5","wydmdq7"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:32.217 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:32.217992700Z","nanoTime":27998231876500,"traceId":"b1ac2106","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:32.217 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:32.217 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdqh
2025-11-21 19:53:32.218 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5787ms)
2025-11-21 19:53:32.218 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:32.220 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:32.220 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:53:32.220 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.1622ms, 역직렬화: 0.0ms
2025-11-21 19:53:32.220 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:32.220 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:32.220894100Z","nanoTime":27998234907100,"traceId":"b1ac2106","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3030600,"duration_ms":3,"resultData":{"centerGeohashId":"wydmdqh","nineBlockGeohashes":["wydmdqh","wydmdqk","wydmdqm","wydmdqj","wydmdmv","wydmdmu","wydmdmg","wydmdq5","wydmdq7"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdqh","hit":false,"valueSize":0,"l1CacheGetDurationNs":578700,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdqh","cacheKey":"data:wydmdqh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":177600},{"geohashId":"wydmdqk","cacheKey":"data:wydmdqk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":121500},{"geohashId":"wydmdqm","cacheKey":"data:wydmdqm:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":338400},{"geohashId":"wydmdqj","cacheKey":"data:wydmdqj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":287400},{"geohashId":"wydmdmv","cacheKey":"data:wydmdmv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":191800},{"geohashId":"wydmdmu","cacheKey":"data:wydmdmu:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":337000},{"geohashId":"wydmdmg","cacheKey":"data:wydmdmg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":271400},{"geohashId":"wydmdq5","cacheKey":"data:wydmdq5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":178500},{"geohashId":"wydmdq7","cacheKey":"data:wydmdq7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":166200}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2162200,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:53:32.220 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:32.220894100Z","nanoTime":27998235218500,"traceId":"b1ac2106","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:32.220 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:32.221 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:53:32.225 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 35건
2025-11-21 19:53:32.229 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:32.229 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:53:32.229 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:32.229714700Z","nanoTime":27998243483300,"traceId":"b1ac2106","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":8264800,"duration_ms":8,"resultData":{"inputCctvMissGrids":["wydmdqh","wydmdqk","wydmdqm","wydmdqj","wydmdmv","wydmdmu","wydmdmg","wydmdq5","wydmdq7"],"cctvQueryResult":{"queryGeohashIds":["wydmdqh","wydmdqk","wydmdqm","wydmdqj","wydmdmv","wydmdmu","wydmdmg","wydmdq5","wydmdq7"],"totalRowsReturned":35,"rowsPerGrid":{"wydmdqm":2,"wydmdqh":1,"wydmdmu":4,"wydmdmv":5,"wydmdqj":5,"wydmdmg":2,"wydmdqk":6,"wydmdq5":5,"wydmdq7":5},"queryExecutionTimeNs":4455400,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdqm","cacheKey":"data:wydmdqm:cctv","dataCount":2,"dataSize":261,"errorMessage":null,"success":true},{"geohashId":"wydmdqh","cacheKey":"data:wydmdqh:cctv","dataCount":1,"dataSize":130,"errorMessage":null,"success":true},{"geohashId":"wydmdmu","cacheKey":"data:wydmdmu:cctv","dataCount":4,"dataSize":485,"errorMessage":null,"success":true},{"geohashId":"wydmdmv","cacheKey":"data:wydmdmv:cctv","dataCount":5,"dataSize":644,"errorMessage":null,"success":true},{"geohashId":"wydmdqj","cacheKey":"data:wydmdqj:cctv","dataCount":5,"dataSize":648,"errorMessage":null,"success":true},{"geohashId":"wydmdmg","cacheKey":"data:wydmdmg:cctv","dataCount":2,"dataSize":260,"errorMessage":null,"success":true},{"geohashId":"wydmdqk","cacheKey":"data:wydmdqk:cctv","dataCount":6,"dataSize":780,"errorMessage":null,"success":true},{"geohashId":"wydmdq5","cacheKey":"data:wydmdq5:cctv","dataCount":5,"dataSize":649,"errorMessage":null,"success":true},{"geohashId":"wydmdq7","cacheKey":"data:wydmdq7:cctv","dataCount":5,"dataSize":651,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:32.229 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:32.229714700Z","nanoTime":27998243771200,"traceId":"b1ac2106","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:32.229 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:32.229 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.562626038249796, 127.01851693784573)
2025-11-21 19:53:32.229 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:32.317 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:32.318 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:32.318 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:32.318 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.562626038249796, 127.01851693784573), 반경: 500m
2025-11-21 19:53:32.406 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:32.406 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 152건
2025-11-21 19:53:32.408 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:32.408 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:32.408 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 중구
2025-11-21 19:53:32.409 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 중구
2025-11-21 19:53:32.409 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:32.409 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:32.409 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:32.409 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.866910799
2025-11-21 19:53:32.409 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:32.409869800Z","nanoTime":27998424086500,"traceId":"b1ac2106","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":180315300,"duration_ms":180,"resultData":{"latitude":37.562626038249796,"longitude":127.01851693784573,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":180037700,"addressApiResult":{"cached":false,"cacheKey":"address:37.562626038249796:127.01851693784573","roadAddress":"서울특별시 중구 다산로42다길 37","jibunAddress":"서울 중구 신당동 52-230","responseSize":73,"executionTimeNs":88596000,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:중구","guName":"중구","arrestRate":0.866910799,"dataFound":true,"executionTimeNs":968900,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.562626038249796:127.01851693784573:500","categoryCount":15,"placesByCategory":{"CT1":8,"AT4":7,"CS2":15,"SC4":4,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":6,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"totalPlaces":152,"responseSize":17499,"executionTimeNs":90472800,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:32.409 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:32.409869800Z","nanoTime":27998424487500,"traceId":"b1ac2106","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:32.409 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:32.409 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:32.410 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 35개
2025-11-21 19:53:32.410 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 35개 (총 카메라 대수: 101대)
2025-11-21 19:53:32.410 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:32.487 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: "서울특별시 중구  다산로 248 (신당동, 신당파출소)" (거리: 328m)
2025-11-21 19:53:32.487 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:32.487 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:32.487 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:53:32.487 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:32.487 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:32.487002600Z","nanoTime":27998501727300,"traceId":"b1ac2106","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":77239800,"duration_ms":77,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":35,"totalCctvAfterFilter":35,"totalCameraCount":101,"filterRate":1.0,"filterExecutionTimeNs":23700,"success":true},"policeQuery":{"queryDurationNs":76399400,"found":true,"nearestAddress":"\"서울특별시 중구  다산로 248 (신당동, 신당파출소)\"","nearestDistance":327.76005264112973,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":8,"AT4":7,"CS2":15,"SC4":4,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":6,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"placesAfterFilter":{"CT1":8,"AT4":7,"CS2":15,"SC4":4,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":6,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"totalBeforeFilter":152,"totalAfterFilter":152,"filterRate":1.0,"filterExecutionTimeNs":206600,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:32.487 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:32.487002600Z","nanoTime":27998502088200,"traceId":"b1ac2106","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:32.487 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:32.487 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 83.72, 편의성: 39.36, 종합: 61.54
2025-11-21 19:53:32.487 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:32.487002600Z","nanoTime":27998502476900,"traceId":"b1ac2106","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":388700,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":59.02999341985878,"policeDistance":327.76005264112973,"cctvScore":100.0,"cctvCount":35,"arrestRateScore":86.6910799,"arrestRate":0.866910799,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":83.71632199595763,"success":true},"convenienceScore":{"categoryScores":{"CT1":32.0,"AT4":21.0,"CS2":11.431706982486624,"SC4":8.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":18.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"중구","guPopulation":131214,"finalScore":39.36211379883244,"success":true},"overallScore":61.539217897395034,"errorMessage":null,"success":true}}
2025-11-21 19:53:32.489 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:32.487002600Z","nanoTime":27998502769100,"traceId":"b1ac2106","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:32.489 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:32.489 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address="서울특별시 중구  다산로 248 (신당동, 신당파출소)", latitude=37.56504, longitude=127.016383, geohashId=wydmdqd)
2025-11-21 19:53:32.489 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 327.76005264112973
2025-11-21 19:53:32.489 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdqh
2025-11-21 19:53:32.491 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:32.491 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:32.491043600Z","nanoTime":27998504875300,"traceId":"b1ac2106","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":2106200,"duration_ms":2,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["이 지역은 안전 인프라가 잘 갖춰져 있습니다.","문화시설이(가) 60m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdqh","dataSize":22405,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":22405,"errorMessage":null,"success":true}}
2025-11-21 19:53:32.491 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:32.901 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:32.901 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.560374619384156, longitude=127.00946191581694, radius=500)
2025-11-21 19:53:32.901 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:32.901 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.560374619384156, longitude=127.00946191581694, radius=500
2025-11-21 19:53:32.901 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:32.901328Z","nanoTime":27998915518500,"traceId":"a1bb38b9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:32.901 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:32.901 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.560374619384156, lon=127.00946191581694
2025-11-21 19:53:32.901 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:32.901328Z","nanoTime":27998915655600,"traceId":"a1bb38b9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:32.901 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:32.901328Z","nanoTime":27998915753000,"traceId":"a1bb38b9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":97400,"duration_ms":0,"resultData":{"latitude":37.560374619384156,"longitude":127.00946191581694,"precision":7,"centerHash":"wydmdjt","adjacentHashes":["wydmdjt","wydmdjv","wydmdjy","wydmdjw","wydmdjq","wydmdjm","wydmdjk","wydmdjs","wydmdju"],"errorMessage":null,"success":true}}
2025-11-21 19:53:32.901 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdjt, wydmdjv, wydmdjy, wydmdjw, wydmdjq, wydmdjm, wydmdjk, wydmdjs, wydmdju]
2025-11-21 19:53:32.901 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdjt
2025-11-21 19:53:32.901 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:32.901328Z","nanoTime":27998915932600,"traceId":"a1bb38b9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":414100,"duration_ms":0,"resultData":{"requestLatitude":37.560374619384156,"requestLongitude":127.00946191581694,"requestRadius":500,"centerGeohashId":"wydmdjt","nineBlockGeohashes":["wydmdjt","wydmdjv","wydmdjy","wydmdjw","wydmdjq","wydmdjm","wydmdjk","wydmdjs","wydmdju"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:32.901 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:32.901328Z","nanoTime":27998916012300,"traceId":"a1bb38b9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:32.901 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:32.901 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdjt
2025-11-21 19:53:32.902 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.384ms)
2025-11-21 19:53:32.902 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:32.903 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:32.904 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:53:32.904 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.7125ms, 역직렬화: 0.0ms
2025-11-21 19:53:32.904 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:32.904 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:32.904529900Z","nanoTime":27998918409000,"traceId":"a1bb38b9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2396700,"duration_ms":2,"resultData":{"centerGeohashId":"wydmdjt","nineBlockGeohashes":["wydmdjt","wydmdjv","wydmdjy","wydmdjw","wydmdjq","wydmdjm","wydmdjk","wydmdjs","wydmdju"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdjt","hit":false,"valueSize":0,"l1CacheGetDurationNs":384000,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdjt","cacheKey":"data:wydmdjt:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":245400},{"geohashId":"wydmdjv","cacheKey":"data:wydmdjv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":192200},{"geohashId":"wydmdjy","cacheKey":"data:wydmdjy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":252600},{"geohashId":"wydmdjw","cacheKey":"data:wydmdjw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":187900},{"geohashId":"wydmdjq","cacheKey":"data:wydmdjq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":196800},{"geohashId":"wydmdjm","cacheKey":"data:wydmdjm:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":155600},{"geohashId":"wydmdjk","cacheKey":"data:wydmdjk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":132900},{"geohashId":"wydmdjs","cacheKey":"data:wydmdjs:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":140100},{"geohashId":"wydmdju","cacheKey":"data:wydmdju:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":134900}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1712500,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:53:32.904 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:32.904529900Z","nanoTime":27998918811600,"traceId":"a1bb38b9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:32.904 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:32.904 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:53:32.909 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 27건
2025-11-21 19:53:32.911 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:32.911 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:53:32.911 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:32.911168700Z","nanoTime":27998925297000,"traceId":"a1bb38b9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6485400,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydmdjt","wydmdjv","wydmdjy","wydmdjw","wydmdjq","wydmdjm","wydmdjk","wydmdjs","wydmdju"],"cctvQueryResult":{"queryGeohashIds":["wydmdjt","wydmdjv","wydmdjy","wydmdjw","wydmdjq","wydmdjm","wydmdjk","wydmdjs","wydmdju"],"totalRowsReturned":27,"rowsPerGrid":{"wydmdju":5,"wydmdjv":5,"wydmdjw":2,"wydmdjq":3,"wydmdjs":3,"wydmdjt":1,"wydmdjm":3,"wydmdjy":5},"queryExecutionTimeNs":4086300,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdju","cacheKey":"data:wydmdju:cctv","dataCount":5,"dataSize":653,"errorMessage":null,"success":true},{"geohashId":"wydmdjv","cacheKey":"data:wydmdjv:cctv","dataCount":5,"dataSize":649,"errorMessage":null,"success":true},{"geohashId":"wydmdjw","cacheKey":"data:wydmdjw:cctv","dataCount":2,"dataSize":257,"errorMessage":null,"success":true},{"geohashId":"wydmdjq","cacheKey":"data:wydmdjq:cctv","dataCount":3,"dataSize":389,"errorMessage":null,"success":true},{"geohashId":"wydmdjs","cacheKey":"data:wydmdjs:cctv","dataCount":3,"dataSize":393,"errorMessage":null,"success":true},{"geohashId":"wydmdjt","cacheKey":"data:wydmdjt:cctv","dataCount":1,"dataSize":131,"errorMessage":null,"success":true},{"geohashId":"wydmdjm","cacheKey":"data:wydmdjm:cctv","dataCount":3,"dataSize":389,"errorMessage":null,"success":true},{"geohashId":"wydmdjy","cacheKey":"data:wydmdjy:cctv","dataCount":5,"dataSize":648,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:32.911 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:32.911168700Z","nanoTime":27998925525100,"traceId":"a1bb38b9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:32.911 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:32.911 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.560374619384156, 127.00946191581694)
2025-11-21 19:53:32.911 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:33.008 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:33.008 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:33.010 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:33.010 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.560374619384156, 127.00946191581694), 반경: 500m
2025-11-21 19:53:33.090 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:33.090 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 128건
2025-11-21 19:53:33.094 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:33.095 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:33.095 [http-nio-8185-exec-4] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:53:33.095 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:33.095 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:33.095 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:33.095 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:53:33.095 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:33.095917300Z","nanoTime":27999109975200,"traceId":"a1bb38b9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":184450100,"duration_ms":184,"resultData":{"latitude":37.560374619384156,"longitude":127.00946191581694,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":184209100,"addressApiResult":{"cached":false,"cacheKey":"address:37.560374619384156:127.00946191581694","roadAddress":"주소 없음","jibunAddress":"서울 중구 장충동1가 89-1","responseSize":59,"executionTimeNs":98428800,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":120900,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.560374619384156:127.00946191581694:500","categoryCount":15,"placesByCategory":{"CT1":4,"AT4":3,"CS2":15,"SC4":3,"MT1":0,"BK9":9,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":6,"FD6":15,"PK6":15,"OL7":3,"PM9":7},"totalPlaces":128,"responseSize":14737,"executionTimeNs":85659400,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:33.095 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:33.095917300Z","nanoTime":27999110454200,"traceId":"a1bb38b9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:33.095 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:33.095 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:33.095 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 27개
2025-11-21 19:53:33.096 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 27개 (총 카메라 대수: 84대)
2025-11-21 19:53:33.096 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:33.181 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  동호로 261 (거리: 448m)
2025-11-21 19:53:33.181 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:33.181 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:33.181 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:53:33.181 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:33.181 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:33.181165700Z","nanoTime":27999196682600,"traceId":"a1bb38b9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":86228400,"duration_ms":86,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":27,"totalCctvAfterFilter":27,"totalCameraCount":84,"filterRate":1.0,"filterExecutionTimeNs":22800,"success":true},"policeQuery":{"queryDurationNs":85592100,"found":true,"nearestAddress":"서울특별시 중구  동호로 261","nearestDistance":447.6963177263024,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":4,"AT4":3,"CS2":15,"SC4":3,"BK9":9,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":6,"FD6":15,"PK6":15,"OL7":3,"PM9":7},"placesAfterFilter":{"CT1":4,"AT4":3,"CS2":15,"SC4":3,"BK9":9,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":6,"FD6":15,"PK6":15,"OL7":3,"PM9":7},"totalBeforeFilter":128,"totalAfterFilter":128,"filterRate":1.0,"filterExecutionTimeNs":134800,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:33.181 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:33.181165700Z","nanoTime":27999196919000,"traceId":"a1bb38b9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:33.181 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:33.181 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 49.21, 편의성: 33.84, 종합: 41.53
2025-11-21 19:53:33.181 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:33.181165700Z","nanoTime":27999197199300,"traceId":"a1bb38b9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":280300,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":44.0379602842122,"policeDistance":447.6963177263024,"cctvScore":90.0,"cctvCount":27,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":49.21138808526366,"success":true},"convenienceScore":{"categoryScores":{"CT1":16.0,"AT4":9.0,"CS2":3.75,"SC4":6.0,"BK9":45.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":18.0,"FD6":15.0,"PK6":45.0,"OL7":15.0,"PM9":56.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":33.839285714285715,"success":true},"overallScore":41.525336899774686,"errorMessage":null,"success":true}}
2025-11-21 19:53:33.181 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:33.181165700Z","nanoTime":27999197334200,"traceId":"a1bb38b9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:33.181 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:33.181 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  동호로 261, latitude=37.558764, longitude=127.004807, geohashId=wydmdj6)
2025-11-21 19:53:33.181 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 447.6963177263024
2025-11-21 19:53:33.181 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdjt
2025-11-21 19:53:33.181 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:33.181 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:33.181165700Z","nanoTime":27999199183800,"traceId":"a1bb38b9","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1849600,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["카페이(가) 32m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdjt","dataSize":18765,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":18765,"errorMessage":null,"success":true}}
2025-11-21 19:53:33.181 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:33.657 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:33.657 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.562014805587175, longitude=127.0012902895344, radius=500)
2025-11-21 19:53:33.658 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:33.658 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.562014805587175, longitude=127.0012902895344, radius=500
2025-11-21 19:53:33.658 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:33.658674500Z","nanoTime":27999672485100,"traceId":"230d86e3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:33.658 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:33.658 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.562014805587175, lon=127.0012902895344
2025-11-21 19:53:33.658 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:33.658674500Z","nanoTime":27999672591700,"traceId":"230d86e3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:33.658 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:33.658674500Z","nanoTime":27999672672700,"traceId":"230d86e3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":81000,"duration_ms":0,"resultData":{"latitude":37.562014805587175,"longitude":127.0012902895344,"precision":7,"centerHash":"wydm9vz","adjacentHashes":["wydm9vz","wydm9yp","wydmdn0","wydmdjb","wydmdj8","wydm9vx","wydm9vw","wydm9vy","wydm9yn"],"errorMessage":null,"success":true}}
2025-11-21 19:53:33.658 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9vz, wydm9yp, wydmdn0, wydmdjb, wydmdj8, wydm9vx, wydm9vw, wydm9vy, wydm9yn]
2025-11-21 19:53:33.658 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9vz
2025-11-21 19:53:33.658 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:33.658674500Z","nanoTime":27999672804200,"traceId":"230d86e3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":319100,"duration_ms":0,"resultData":{"requestLatitude":37.562014805587175,"requestLongitude":127.0012902895344,"requestRadius":500,"centerGeohashId":"wydm9vz","nineBlockGeohashes":["wydm9vz","wydm9yp","wydmdn0","wydmdjb","wydmdj8","wydm9vx","wydm9vw","wydm9vy","wydm9yn"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:33.658 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:33.658674500Z","nanoTime":27999672875200,"traceId":"230d86e3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:33.658 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:33.658 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9vz
2025-11-21 19:53:33.658 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4339ms)
2025-11-21 19:53:33.659 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:33.666 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:33.666 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 6개, 미스: 3개
2025-11-21 19:53:33.666 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 7.345ms, 역직렬화: 2.6525ms
2025-11-21 19:53:33.666 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:33.666 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:33.666493700Z","nanoTime":27999681050300,"traceId":"230d86e3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":8175100,"duration_ms":8,"resultData":{"centerGeohashId":"wydm9vz","nineBlockGeohashes":["wydm9vz","wydm9yp","wydmdn0","wydmdjb","wydmdj8","wydm9vx","wydm9vw","wydm9vy","wydm9yn"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9vz","hit":false,"valueSize":0,"l1CacheGetDurationNs":433900,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9vz","cacheKey":"data:wydm9vz:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":648,"l2CacheGetDurationNs":944000},{"geohashId":"wydm9yp","cacheKey":"data:wydm9yp:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":517,"l2CacheGetDurationNs":1082700},{"geohashId":"wydmdn0","cacheKey":"data:wydmdn0:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":132,"l2CacheGetDurationNs":592500},{"geohashId":"wydmdjb","cacheKey":"data:wydmdjb:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":130,"l2CacheGetDurationNs":401800},{"geohashId":"wydmdj8","cacheKey":"data:wydmdj8:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":529,"l2CacheGetDurationNs":470800},{"geohashId":"wydm9vx","cacheKey":"data:wydm9vx:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":519,"l2CacheGetDurationNs":595800},{"geohashId":"wydm9vw","cacheKey":"data:wydm9vw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":189500},{"geohashId":"wydm9vy","cacheKey":"data:wydm9vy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":131000},{"geohashId":"wydm9yn","cacheKey":"data:wydm9yn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":135800}],"l2TotalHits":6,"l2TotalMisses":3,"l2CacheTotalDurationNs":7345000,"l2JsonDeserializeTotalDurationNs":2652500,"errorMessage":null,"success":true}}
2025-11-21 19:53:33.666 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:33.666493700Z","nanoTime":27999681304300,"traceId":"230d86e3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:33.666 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:33.666 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 3개
2025-11-21 19:53:33.670 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 3건
2025-11-21 19:53:33.672 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:33.672 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:53:33.672 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:33.672523900Z","nanoTime":27999686452000,"traceId":"230d86e3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5147700,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydm9vw","wydm9vy","wydm9yn"],"cctvQueryResult":{"queryGeohashIds":["wydm9vw","wydm9vy","wydm9yn"],"totalRowsReturned":3,"rowsPerGrid":{"wydm9yn":1,"wydm9vy":2},"queryExecutionTimeNs":3797500,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9yn","cacheKey":"data:wydm9yn:cctv","dataCount":1,"dataSize":131,"errorMessage":null,"success":true},{"geohashId":"wydm9vy","cacheKey":"data:wydm9vy:cctv","dataCount":2,"dataSize":259,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:33.672 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:33.672523900Z","nanoTime":27999686652800,"traceId":"230d86e3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:33.672 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:33.672 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.562014805587175, 127.0012902895344)
2025-11-21 19:53:33.672 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:33.745 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:33.745 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:33.747 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:33.747 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.562014805587175, 127.0012902895344), 반경: 500m
2025-11-21 19:53:33.876 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:33.876 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 140건
2025-11-21 19:53:33.880 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:33.880 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:33.880 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 중구
2025-11-21 19:53:33.880 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 중구
2025-11-21 19:53:33.880 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:33.880 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:33.880 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:33.880 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.866910799
2025-11-21 19:53:33.880 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:33.880010100Z","nanoTime":27999895113200,"traceId":"230d86e3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":208460400,"duration_ms":208,"resultData":{"latitude":37.562014805587175,"longitude":127.0012902895344,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":208304600,"addressApiResult":{"cached":false,"cacheKey":"address:37.562014805587175:127.0012902895344","roadAddress":"서울특별시 중구 퇴계로50길 13","jibunAddress":"서울 중구 장충동2가 173-7","responseSize":73,"executionTimeNs":74172700,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:중구","guName":"중구","arrestRate":0.866910799,"dataFound":true,"executionTimeNs":1056800,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.562014805587175:127.0012902895344:500","categoryCount":15,"placesByCategory":{"CT1":13,"AT4":5,"CS2":15,"SC4":2,"MT1":0,"BK9":15,"HP8":15,"AC5":12,"CE7":15,"SW8":2,"PO3":8,"FD6":15,"PK6":15,"OL7":1,"PM9":7},"totalPlaces":140,"responseSize":16198,"executionTimeNs":133075100,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:33.880 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:33.880010100Z","nanoTime":27999895490100,"traceId":"230d86e3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:33.880 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:33.880 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:33.880 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 22개
2025-11-21 19:53:33.880 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 22개 (총 카메라 대수: 65대)
2025-11-21 19:53:33.880 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:33.956 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  동호로 261 (거리: 476m)
2025-11-21 19:53:33.956 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:33.956 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:33.956 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:53:33.956 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:33.956 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:33.956814300Z","nanoTime":27999970922900,"traceId":"230d86e3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":75432800,"duration_ms":75,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":22,"totalCctvAfterFilter":22,"totalCameraCount":65,"filterRate":1.0,"filterExecutionTimeNs":17700,"success":true},"policeQuery":{"queryDurationNs":74940300,"found":true,"nearestAddress":"서울특별시 중구  동호로 261","nearestDistance":476.1845201731641,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":13,"AT4":5,"CS2":15,"SC4":2,"BK9":15,"HP8":15,"AC5":12,"CE7":15,"SW8":2,"PO3":8,"FD6":15,"PK6":15,"OL7":1,"PM9":7},"placesAfterFilter":{"CT1":13,"AT4":5,"CS2":15,"SC4":2,"BK9":15,"HP8":15,"AC5":12,"CE7":15,"SW8":2,"PO3":8,"FD6":15,"PK6":15,"OL7":1,"PM9":7},"totalBeforeFilter":140,"totalAfterFilter":140,"filterRate":1.0,"filterExecutionTimeNs":133600,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:33.956 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:33.956814300Z","nanoTime":27999971134200,"traceId":"230d86e3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:33.956 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:33.956 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 67.48, 편의성: 38.89, 종합: 53.19
2025-11-21 19:53:33.957 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:33.956814300Z","nanoTime":27999971426900,"traceId":"230d86e3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":292700,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":40.476934978354485,"policeDistance":476.1845201731641,"cctvScore":73.33333333333333,"cctvCount":22,"arrestRateScore":86.6910799,"arrestRate":0.866910799,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":67.48373779683968,"success":true},"convenienceScore":{"categoryScores":{"CT1":52.0,"AT4":15.0,"CS2":11.431706982486624,"SC4":4.0,"BK9":75.0,"HP8":100.0,"AC5":12.0,"CE7":30.0,"SW8":100.0,"PO3":24.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":56.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"중구","guPopulation":131214,"finalScore":38.887979070177614,"success":true},"overallScore":53.18585843350864,"errorMessage":null,"success":true}}
2025-11-21 19:53:33.957 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:33.957810400Z","nanoTime":27999971632900,"traceId":"230d86e3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:33.957 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:33.957 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  동호로 261, latitude=37.558764, longitude=127.004807, geohashId=wydmdj6)
2025-11-21 19:53:33.957 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 476.1845201731641
2025-11-21 19:53:33.958 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9vz
2025-11-21 19:53:33.958 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:33.958 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:33.958811600Z","nanoTime":27999972879000,"traceId":"230d86e3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1246100,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["학원이(가) 44m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydm9vz","dataSize":19747,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19747,"errorMessage":null,"success":true}}
2025-11-21 19:53:33.958 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:34.655 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:34.655 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56273518785956, longitude=126.99001713749446, radius=500)
2025-11-21 19:53:34.655 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:34.655 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56273518785956, longitude=126.99001713749446, radius=500
2025-11-21 19:53:34.655 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:34.655091400Z","nanoTime":28000669494300,"traceId":"340483ff","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:34.655 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:34.655 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56273518785956, lon=126.99001713749446
2025-11-21 19:53:34.655 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:34.655091400Z","nanoTime":28000669602100,"traceId":"340483ff","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:34.655 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:34.655091400Z","nanoTime":28000669705600,"traceId":"340483ff","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":103500,"duration_ms":0,"resultData":{"latitude":37.56273518785956,"longitude":126.99001713749446,"precision":7,"centerHash":"wydm9wp","adjacentHashes":["wydm9wp","wydm9wr","wydm9y2","wydm9y0","wydm9vb","wydm9tz","wydm9ty","wydm9wn","wydm9wq"],"errorMessage":null,"success":true}}
2025-11-21 19:53:34.656 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9wp, wydm9wr, wydm9y2, wydm9y0, wydm9vb, wydm9tz, wydm9ty, wydm9wn, wydm9wq]
2025-11-21 19:53:34.656 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9wp
2025-11-21 19:53:34.656 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:34.656091Z","nanoTime":28000669937500,"traceId":"340483ff","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":443200,"duration_ms":0,"resultData":{"requestLatitude":37.56273518785956,"requestLongitude":126.99001713749446,"requestRadius":500,"centerGeohashId":"wydm9wp","nineBlockGeohashes":["wydm9wp","wydm9wr","wydm9y2","wydm9y0","wydm9vb","wydm9tz","wydm9ty","wydm9wn","wydm9wq"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:34.656 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:34.656091Z","nanoTime":28000670034600,"traceId":"340483ff","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:34.656 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:34.656 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9wp
2025-11-21 19:53:34.656 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4602ms)
2025-11-21 19:53:34.656 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:34.657 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:34.657 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:53:34.657 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.8715ms, 역직렬화: 0.0ms
2025-11-21 19:53:34.657 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:34.657 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:34.657091800Z","nanoTime":28000672673900,"traceId":"340483ff","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2639300,"duration_ms":2,"resultData":{"centerGeohashId":"wydm9wp","nineBlockGeohashes":["wydm9wp","wydm9wr","wydm9y2","wydm9y0","wydm9vb","wydm9tz","wydm9ty","wydm9wn","wydm9wq"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9wp","hit":false,"valueSize":0,"l1CacheGetDurationNs":460200,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9wp","cacheKey":"data:wydm9wp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":285800},{"geohashId":"wydm9wr","cacheKey":"data:wydm9wr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":295100},{"geohashId":"wydm9y2","cacheKey":"data:wydm9y2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":263300},{"geohashId":"wydm9y0","cacheKey":"data:wydm9y0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":128700},{"geohashId":"wydm9vb","cacheKey":"data:wydm9vb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":230100},{"geohashId":"wydm9tz","cacheKey":"data:wydm9tz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":148200},{"geohashId":"wydm9ty","cacheKey":"data:wydm9ty:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":106400},{"geohashId":"wydm9wn","cacheKey":"data:wydm9wn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":213100},{"geohashId":"wydm9wq","cacheKey":"data:wydm9wq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":126100}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1871500,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:53:34.657 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:34.657091800Z","nanoTime":28000673022200,"traceId":"340483ff","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:34.657 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:34.657 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:53:34.662 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 14건
2025-11-21 19:53:34.666 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:34.666 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 7개
2025-11-21 19:53:34.667 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:34.666063700Z","nanoTime":28000680792600,"traceId":"340483ff","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":7770400,"duration_ms":7,"resultData":{"inputCctvMissGrids":["wydm9wp","wydm9wr","wydm9y2","wydm9y0","wydm9vb","wydm9tz","wydm9ty","wydm9wn","wydm9wq"],"cctvQueryResult":{"queryGeohashIds":["wydm9wp","wydm9wr","wydm9y2","wydm9y0","wydm9vb","wydm9tz","wydm9ty","wydm9wn","wydm9wq"],"totalRowsReturned":14,"rowsPerGrid":{"wydm9ty":1,"wydm9y2":4,"wydm9y0":1,"wydm9tz":1,"wydm9vb":3,"wydm9wr":2,"wydm9wq":2},"queryExecutionTimeNs":4311000,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9ty","cacheKey":"data:wydm9ty:cctv","dataCount":1,"dataSize":131,"errorMessage":null,"success":true},{"geohashId":"wydm9y2","cacheKey":"data:wydm9y2:cctv","dataCount":4,"dataSize":513,"errorMessage":null,"success":true},{"geohashId":"wydm9y0","cacheKey":"data:wydm9y0:cctv","dataCount":1,"dataSize":128,"errorMessage":null,"success":true},{"geohashId":"wydm9tz","cacheKey":"data:wydm9tz:cctv","dataCount":1,"dataSize":129,"errorMessage":null,"success":true},{"geohashId":"wydm9vb","cacheKey":"data:wydm9vb:cctv","dataCount":3,"dataSize":388,"errorMessage":null,"success":true},{"geohashId":"wydm9wr","cacheKey":"data:wydm9wr:cctv","dataCount":2,"dataSize":260,"errorMessage":null,"success":true},{"geohashId":"wydm9wq","cacheKey":"data:wydm9wq:cctv","dataCount":2,"dataSize":260,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:34.667 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:34.667066800Z","nanoTime":28000681019700,"traceId":"340483ff","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:34.667 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:34.667 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56273518785956, 126.99001713749446)
2025-11-21 19:53:34.667 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:34.780 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:34.780 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:34.780 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:34.780 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56273518785956, 126.99001713749446), 반경: 500m
2025-11-21 19:53:34.860 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:34.860 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 159건
2025-11-21 19:53:34.862 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:34.862 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:34.862 [http-nio-8185-exec-7] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:53:34.862 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:34.862 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:34.862 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:34.862 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:53:34.864 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:34.862044300Z","nanoTime":28000877580100,"traceId":"340483ff","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":196560400,"duration_ms":196,"resultData":{"latitude":37.56273518785956,"longitude":126.99001713749446,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":196407300,"addressApiResult":{"cached":false,"cacheKey":"address:37.56273518785956:126.99001713749446","roadAddress":"주소 없음","jibunAddress":"서울 중구 충무로2가 111","responseSize":58,"executionTimeNs":113328200,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":57800,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56273518785956:126.99001713749446:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":8,"CS2":15,"SC4":2,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":5,"PO3":8,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalPlaces":159,"responseSize":18347,"executionTimeNs":83021300,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:34.864 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:34.864057Z","nanoTime":28000878024600,"traceId":"340483ff","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:34.864 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:34.864 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:34.864 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 14개
2025-11-21 19:53:34.864 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 14개 (총 카메라 대수: 38대)
2025-11-21 19:53:34.864 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:34.933 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  퇴계로 178 (거리: 248m)
2025-11-21 19:53:34.933 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:34.933 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:34.933 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:53:34.933 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:34.933 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:34.933231Z","nanoTime":28000947498200,"traceId":"340483ff","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":69473600,"duration_ms":69,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":14,"totalCctvAfterFilter":14,"totalCameraCount":38,"filterRate":1.0,"filterExecutionTimeNs":12900,"success":true},"policeQuery":{"queryDurationNs":68778500,"found":true,"nearestAddress":"서울특별시 중구  퇴계로 178","nearestDistance":248.00632183192522,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":8,"CS2":15,"SC4":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":5,"PO3":8,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"placesAfterFilter":{"CT1":15,"AT4":8,"CS2":15,"SC4":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":5,"PO3":8,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalBeforeFilter":159,"totalAfterFilter":159,"filterRate":1.0,"filterExecutionTimeNs":222400,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:34.933 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:34.933231Z","nanoTime":28000947844000,"traceId":"340483ff","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:34.933 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:34.933 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 39.37, 편의성: 42.91, 종합: 41.14
2025-11-21 19:53:34.933 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:34.933231Z","nanoTime":28000948244400,"traceId":"340483ff","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":400400,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":68.99920977100935,"policeDistance":248.00632183192522,"cctvScore":46.666666666666664,"cctvCount":14,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":39.36642959796947,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":24.0,"CS2":3.75,"SC4":4.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":24.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":42.910714285714285,"success":true},"overallScore":41.138571941841874,"errorMessage":null,"success":true}}
2025-11-21 19:53:34.933 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:34.933231Z","nanoTime":28000948433800,"traceId":"340483ff","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:34.933 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:34.933 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  퇴계로 178, latitude=37.56088, longitude=126.991579, geohashId=wydm9v8)
2025-11-21 19:53:34.933 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 248.00632183192522
2025-11-21 19:53:34.935 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9wp
2025-11-21 19:53:34.935 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:34.935 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:34.935239900Z","nanoTime":28000950520100,"traceId":"340483ff","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":2086300,"duration_ms":2,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["학원이(가) 32m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm9wp","dataSize":20751,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20751,"errorMessage":null,"success":true}}
2025-11-21 19:53:34.935 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:35.359 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:35.359 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56287853886699, longitude=126.9829543994309, radius=500)
2025-11-21 19:53:35.359 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:35.359 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56287853886699, longitude=126.9829543994309, radius=500
2025-11-21 19:53:35.359 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:35.359497300Z","nanoTime":28001373694300,"traceId":"c2552bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:35.359 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:35.359 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56287853886699, lon=126.9829543994309
2025-11-21 19:53:35.359 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:35.359497300Z","nanoTime":28001373856600,"traceId":"c2552bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:35.360 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:35.359497300Z","nanoTime":28001373939400,"traceId":"c2552bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":82800,"duration_ms":0,"resultData":{"latitude":37.56287853886699,"longitude":126.9829543994309,"precision":7,"centerHash":"wydm9w4","adjacentHashes":["wydm9w4","wydm9w6","wydm9w7","wydm9w5","wydm9tg","wydm9tf","wydm9tc","wydm9w1","wydm9w3"],"errorMessage":null,"success":true}}
2025-11-21 19:53:35.360 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9w4, wydm9w6, wydm9w7, wydm9w5, wydm9tg, wydm9tf, wydm9tc, wydm9w1, wydm9w3]
2025-11-21 19:53:35.360 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9w4
2025-11-21 19:53:35.362 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:35.360630800Z","nanoTime":28001374751900,"traceId":"c2552bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":1057600,"duration_ms":1,"resultData":{"requestLatitude":37.56287853886699,"requestLongitude":126.9829543994309,"requestRadius":500,"centerGeohashId":"wydm9w4","nineBlockGeohashes":["wydm9w4","wydm9w6","wydm9w7","wydm9w5","wydm9tg","wydm9tf","wydm9tc","wydm9w1","wydm9w3"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:35.362 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:35.362348800Z","nanoTime":28001376419300,"traceId":"c2552bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:35.362 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:35.362 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9w4
2025-11-21 19:53:35.362 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4973ms)
2025-11-21 19:53:35.362 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:35.365 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:35.365 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 5개, 미스: 4개
2025-11-21 19:53:35.365 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 3.2217ms, 역직렬화: 0.3711ms
2025-11-21 19:53:35.365 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:35.367 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:35.366739200Z","nanoTime":28001380490100,"traceId":"c2552bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":4070800,"duration_ms":4,"resultData":{"centerGeohashId":"wydm9w4","nineBlockGeohashes":["wydm9w4","wydm9w6","wydm9w7","wydm9w5","wydm9tg","wydm9tf","wydm9tc","wydm9w1","wydm9w3"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9w4","hit":false,"valueSize":0,"l1CacheGetDurationNs":497300,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9w4","cacheKey":"data:wydm9w4:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":131,"l2CacheGetDurationNs":369100},{"geohashId":"wydm9w6","cacheKey":"data:wydm9w6:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":130,"l2CacheGetDurationNs":584300},{"geohashId":"wydm9w7","cacheKey":"data:wydm9w7:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":386,"l2CacheGetDurationNs":470600},{"geohashId":"wydm9w5","cacheKey":"data:wydm9w5:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":259,"l2CacheGetDurationNs":351900},{"geohashId":"wydm9tg","cacheKey":"data:wydm9tg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":110100},{"geohashId":"wydm9tf","cacheKey":"data:wydm9tf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":144400},{"geohashId":"wydm9tc","cacheKey":"data:wydm9tc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":165600},{"geohashId":"wydm9w1","cacheKey":"data:wydm9w1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":170400},{"geohashId":"wydm9w3","cacheKey":"data:wydm9w3:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":126,"l2CacheGetDurationNs":378700}],"l2TotalHits":5,"l2TotalMisses":4,"l2CacheTotalDurationNs":3221700,"l2JsonDeserializeTotalDurationNs":371100,"errorMessage":null,"success":true}}
2025-11-21 19:53:35.368 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:35.367580600Z","nanoTime":28001382380000,"traceId":"c2552bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:35.368 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:35.368 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 4개
2025-11-21 19:53:35.372 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 3건
2025-11-21 19:53:35.372 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:35.372 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 7개
2025-11-21 19:53:35.374 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:35.372685500Z","nanoTime":28001388426500,"traceId":"c2552bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6046500,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydm9tg","wydm9tf","wydm9tc","wydm9w1"],"cctvQueryResult":{"queryGeohashIds":["wydm9tg","wydm9tf","wydm9tc","wydm9w1"],"totalRowsReturned":3,"rowsPerGrid":{"wydm9tg":1,"wydm9tf":2},"queryExecutionTimeNs":4906000,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9tg","cacheKey":"data:wydm9tg:cctv","dataCount":1,"dataSize":129,"errorMessage":null,"success":true},{"geohashId":"wydm9tf","cacheKey":"data:wydm9tf:cctv","dataCount":2,"dataSize":262,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:35.374 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:35.374703700Z","nanoTime":28001389398100,"traceId":"c2552bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:35.374 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:35.374 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56287853886699, 126.9829543994309)
2025-11-21 19:53:35.374 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:35.477 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:35.477 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:35.477 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:35.477 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56287853886699, 126.9829543994309), 반경: 500m
2025-11-21 19:53:35.567 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:35.567 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 161건
2025-11-21 19:53:35.567 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:35.567 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:35.567 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 중구
2025-11-21 19:53:35.567 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 중구
2025-11-21 19:53:35.567 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:35.567 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:35.567 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:35.567 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.866910799
2025-11-21 19:53:35.575 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:35.567524900Z","nanoTime":28001586712200,"traceId":"c2552bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":197314100,"duration_ms":197,"resultData":{"latitude":37.56287853886699,"longitude":126.9829543994309,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":197124000,"addressApiResult":{"cached":false,"cacheKey":"address:37.56287853886699:126.9829543994309","roadAddress":"서울특별시 중구 명동2길 27","jibunAddress":"서울 중구 명동2가 83-7","responseSize":69,"executionTimeNs":102453200,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:중구","guName":"중구","arrestRate":0.866910799,"dataFound":true,"executionTimeNs":1165600,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56287853886699:126.9829543994309:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":8,"CS2":15,"SC4":1,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":15,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":161,"responseSize":18630,"executionTimeNs":93505200,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:35.575 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:35.575331900Z","nanoTime":28001590441000,"traceId":"c2552bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:35.575 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:35.575 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:35.575 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 11개
2025-11-21 19:53:35.575 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 11개 (총 카메라 대수: 31대)
2025-11-21 19:53:35.575 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:35.651 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  통일로 13 (거리: 119m)
2025-11-21 19:53:35.651 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:35.651 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:35.651 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 19:53:35.651 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:35.651 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:35.651091Z","nanoTime":28001668651400,"traceId":"c2552bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":78210400,"duration_ms":78,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":11,"totalCctvAfterFilter":11,"totalCameraCount":31,"filterRate":1.0,"filterExecutionTimeNs":10800,"success":true},"policeQuery":{"queryDurationNs":77559300,"found":true,"nearestAddress":"서울특별시 중구  통일로 13","nearestDistance":118.78174262852505,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":8,"CS2":15,"SC4":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":15,"FD6":15,"PK6":15,"PM9":15},"placesAfterFilter":{"CT1":15,"AT4":8,"CS2":15,"SC4":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":15,"FD6":15,"PK6":14,"PM9":15},"totalBeforeFilter":161,"totalAfterFilter":160,"filterRate":0.9937888198757764,"filterExecutionTimeNs":164000,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:35.651 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:35.651091Z","nanoTime":28001670980800,"traceId":"c2552bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:35.651 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:35.651 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 66.22, 편의성: 47.65, 종합: 56.93
2025-11-21 19:53:35.658 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:35.651091Z","nanoTime":28001671447300,"traceId":"c2552bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":466500,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":85.15228217143436,"policeDistance":118.78174262852505,"cctvScore":36.666666666666664,"cctvCount":11,"arrestRateScore":86.6910799,"arrestRate":0.866910799,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":66.21967528809698,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":24.0,"CS2":11.431706982486624,"SC4":2.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":45.0,"FD6":15.0,"PK6":42.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"중구","guPopulation":131214,"finalScore":47.648592844806664,"success":true},"overallScore":56.93413406645182,"errorMessage":null,"success":true}}
2025-11-21 19:53:35.658 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:35.658191100Z","nanoTime":28001674818700,"traceId":"c2552bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:35.658 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:35.658 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  통일로 13, latitude=37.563587, longitude=126.983963, geohashId=wydm9w4)
2025-11-21 19:53:35.658 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 118.78174262852505
2025-11-21 19:53:35.658 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9w4
2025-11-21 19:53:35.658 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:35.664 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:35.658191100Z","nanoTime":28001676625200,"traceId":"c2552bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1806500,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["공공기관이(가) 22m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydm9w4","dataSize":20544,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20544,"errorMessage":null,"success":true}}
2025-11-21 19:53:35.664 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:36.140 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:36.141 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.561345636864125, longitude=126.97600535677962, radius=500)
2025-11-21 19:53:36.141 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:36.141 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.561345636864125, longitude=126.97600535677962, radius=500
2025-11-21 19:53:36.141 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:36.141064100Z","nanoTime":28002155046300,"traceId":"f8cec67c","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:36.141 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:36.141 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.561345636864125, lon=126.97600535677962
2025-11-21 19:53:36.141 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:36.141064100Z","nanoTime":28002155250400,"traceId":"f8cec67c","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:36.141 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:36.141064100Z","nanoTime":28002155299700,"traceId":"f8cec67c","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":49300,"duration_ms":0,"resultData":{"latitude":37.561345636864125,"longitude":126.97600535677962,"precision":7,"centerHash":"wydm9mv","adjacentHashes":["wydm9mv","wydm9qj","wydm9qn","wydm9my","wydm9mw","wydm9mt","wydm9ms","wydm9mu","wydm9qh"],"errorMessage":null,"success":true}}
2025-11-21 19:53:36.141 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9mv, wydm9qj, wydm9qn, wydm9my, wydm9mw, wydm9mt, wydm9ms, wydm9mu, wydm9qh]
2025-11-21 19:53:36.141 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9mv
2025-11-21 19:53:36.141 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:36.141064100Z","nanoTime":28002155472500,"traceId":"f8cec67c","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":426200,"duration_ms":0,"resultData":{"requestLatitude":37.561345636864125,"requestLongitude":126.97600535677962,"requestRadius":500,"centerGeohashId":"wydm9mv","nineBlockGeohashes":["wydm9mv","wydm9qj","wydm9qn","wydm9my","wydm9mw","wydm9mt","wydm9ms","wydm9mu","wydm9qh"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:36.141 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:36.141064100Z","nanoTime":28002155549400,"traceId":"f8cec67c","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:36.141 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:36.141 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9mv
2025-11-21 19:53:36.142 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4188ms)
2025-11-21 19:53:36.142 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:36.144 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:36.144 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:53:36.144 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.0679ms, 역직렬화: 0.0ms
2025-11-21 19:53:36.144 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:36.144 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:36.144062800Z","nanoTime":28002158341100,"traceId":"f8cec67c","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2791700,"duration_ms":2,"resultData":{"centerGeohashId":"wydm9mv","nineBlockGeohashes":["wydm9mv","wydm9qj","wydm9qn","wydm9my","wydm9mw","wydm9mt","wydm9ms","wydm9mu","wydm9qh"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9mv","hit":false,"valueSize":0,"l1CacheGetDurationNs":418800,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9mv","cacheKey":"data:wydm9mv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":231700},{"geohashId":"wydm9qj","cacheKey":"data:wydm9qj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":163400},{"geohashId":"wydm9qn","cacheKey":"data:wydm9qn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":160400},{"geohashId":"wydm9my","cacheKey":"data:wydm9my:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":150400},{"geohashId":"wydm9mw","cacheKey":"data:wydm9mw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":419800},{"geohashId":"wydm9mt","cacheKey":"data:wydm9mt:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":179600},{"geohashId":"wydm9ms","cacheKey":"data:wydm9ms:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":166500},{"geohashId":"wydm9mu","cacheKey":"data:wydm9mu:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":263200},{"geohashId":"wydm9qh","cacheKey":"data:wydm9qh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":262400}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2067900,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:53:36.144 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:36.144734800Z","nanoTime":28002158779500,"traceId":"f8cec67c","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:36.144 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:36.144 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:53:36.149 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 16건
2025-11-21 19:53:36.151 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:36.151 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:53:36.151 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:36.151595900Z","nanoTime":28002166061900,"traceId":"f8cec67c","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":7282400,"duration_ms":7,"resultData":{"inputCctvMissGrids":["wydm9mv","wydm9qj","wydm9qn","wydm9my","wydm9mw","wydm9mt","wydm9ms","wydm9mu","wydm9qh"],"cctvQueryResult":{"queryGeohashIds":["wydm9mv","wydm9qj","wydm9qn","wydm9my","wydm9mw","wydm9mt","wydm9ms","wydm9mu","wydm9qh"],"totalRowsReturned":16,"rowsPerGrid":{"wydm9qj":2,"wydm9mu":2,"wydm9mt":1,"wydm9qh":1,"wydm9ms":2,"wydm9qn":2,"wydm9my":4,"wydm9mw":2},"queryExecutionTimeNs":4737500,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9qj","cacheKey":"data:wydm9qj:cctv","dataCount":2,"dataSize":258,"errorMessage":null,"success":true},{"geohashId":"wydm9mu","cacheKey":"data:wydm9mu:cctv","dataCount":2,"dataSize":260,"errorMessage":null,"success":true},{"geohashId":"wydm9mt","cacheKey":"data:wydm9mt:cctv","dataCount":1,"dataSize":129,"errorMessage":null,"success":true},{"geohashId":"wydm9qh","cacheKey":"data:wydm9qh:cctv","dataCount":1,"dataSize":129,"errorMessage":null,"success":true},{"geohashId":"wydm9ms","cacheKey":"data:wydm9ms:cctv","dataCount":2,"dataSize":259,"errorMessage":null,"success":true},{"geohashId":"wydm9qn","cacheKey":"data:wydm9qn:cctv","dataCount":2,"dataSize":256,"errorMessage":null,"success":true},{"geohashId":"wydm9my","cacheKey":"data:wydm9my:cctv","dataCount":4,"dataSize":511,"errorMessage":null,"success":true},{"geohashId":"wydm9mw","cacheKey":"data:wydm9mw:cctv","dataCount":2,"dataSize":258,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:36.151 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:36.151595900Z","nanoTime":28002166374900,"traceId":"f8cec67c","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:36.151 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:36.151 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.561345636864125, 126.97600535677962)
2025-11-21 19:53:36.151 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:36.256 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:36.258 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:36.258 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:36.258 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.561345636864125, 126.97600535677962), 반경: 500m
2025-11-21 19:53:36.352 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:36.352 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 165건
2025-11-21 19:53:36.354 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:36.354 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:36.354 [http-nio-8185-exec-9] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:53:36.354 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:36.354 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:36.354 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:36.354 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:53:36.356 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:36.354623300Z","nanoTime":28002370020000,"traceId":"f8cec67c","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":203645100,"duration_ms":203,"resultData":{"latitude":37.561345636864125,"longitude":126.97600535677962,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":203487300,"addressApiResult":{"cached":false,"cacheKey":"address:37.561345636864125:126.97600535677962","roadAddress":"주소 없음","jibunAddress":"서울 중구 태평로2가 113-1","responseSize":60,"executionTimeNs":106100400,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":55400,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.561345636864125:126.97600535677962:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":11,"CS2":15,"SC4":0,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":15,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalPlaces":165,"responseSize":19088,"executionTimeNs":97331500,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:36.356 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:36.356643700Z","nanoTime":28002370511500,"traceId":"f8cec67c","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:36.356 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:36.356 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:36.356 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 16개
2025-11-21 19:53:36.356 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 16개 (총 카메라 대수: 43대)
2025-11-21 19:53:36.356 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:36.422 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  명동길 30 명동파출소 (거리: 262m)
2025-11-21 19:53:36.422 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:36.422 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:36.427 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 19:53:36.427 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:36.427 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:36.427775Z","nanoTime":28002441693400,"traceId":"f8cec67c","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":71181900,"duration_ms":71,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":16,"totalCctvAfterFilter":16,"totalCameraCount":43,"filterRate":1.0,"filterExecutionTimeNs":14400,"success":true},"policeQuery":{"queryDurationNs":70642700,"found":true,"nearestAddress":"서울특별시 중구  명동길 30 명동파출소","nearestDistance":261.8850684599376,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":11,"CS2":15,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":15,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"placesAfterFilter":{"CT1":15,"AT4":11,"CS2":15,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":15,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalBeforeFilter":165,"totalAfterFilter":165,"filterRate":1.0,"filterExecutionTimeNs":155500,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:36.427 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:36.427775Z","nanoTime":28002442031700,"traceId":"f8cec67c","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:36.427 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:36.427 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 41.51, 편의성: 48.21, 종합: 44.86
2025-11-21 19:53:36.428 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:36.427775Z","nanoTime":28002442317600,"traceId":"f8cec67c","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":285900,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":67.2643664425078,"policeDistance":261.8850684599376,"cctvScore":53.333333333333336,"cctvCount":16,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":41.512643266085675,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":33.0,"CS2":3.75,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":45.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":48.21153846153846,"success":true},"overallScore":44.86209086381207,"errorMessage":null,"success":true}}
2025-11-21 19:53:36.428 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:36.428788700Z","nanoTime":28002442618800,"traceId":"f8cec67c","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:36.428 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:36.428 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  명동길 30 명동파출소, latitude=37.559011, longitude=126.976397, geohashId=wydm9mm)
2025-11-21 19:53:36.428 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 261.8850684599376
2025-11-21 19:53:36.430 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9mv
2025-11-21 19:53:36.430 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:36.430 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:36.430223600Z","nanoTime":28002444261100,"traceId":"f8cec67c","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1642300,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["은행이(가) 51m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm9mv","dataSize":21734,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":21734,"errorMessage":null,"success":true}}
2025-11-21 19:53:36.430 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:36.872 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:36.872 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56101989506299, longitude=126.96996155396992, radius=500)
2025-11-21 19:53:36.872 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:36.872 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56101989506299, longitude=126.96996155396992, radius=500
2025-11-21 19:53:36.872 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:36.872398600Z","nanoTime":28002886427700,"traceId":"34e3dcc9","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:36.872 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:36.872 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56101989506299, lon=126.96996155396992
2025-11-21 19:53:36.872 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:36.872729700Z","nanoTime":28002886522300,"traceId":"34e3dcc9","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:36.872 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:36.872729700Z","nanoTime":28002886572800,"traceId":"34e3dcc9","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":50500,"duration_ms":0,"resultData":{"latitude":37.56101989506299,"longitude":126.96996155396992,"precision":7,"centerHash":"wydm9mb","adjacentHashes":["wydm9mb","wydm9q0","wydm9q1","wydm9mc","wydm9m9","wydm9m8","wydm9jx","wydm9jz","wydm9np"],"errorMessage":null,"success":true}}
2025-11-21 19:53:36.872 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9mb, wydm9q0, wydm9q1, wydm9mc, wydm9m9, wydm9m8, wydm9jx, wydm9jz, wydm9np]
2025-11-21 19:53:36.872 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9mb
2025-11-21 19:53:36.872 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:36.872729700Z","nanoTime":28002886742400,"traceId":"34e3dcc9","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":314700,"duration_ms":0,"resultData":{"requestLatitude":37.56101989506299,"requestLongitude":126.96996155396992,"requestRadius":500,"centerGeohashId":"wydm9mb","nineBlockGeohashes":["wydm9mb","wydm9q0","wydm9q1","wydm9mc","wydm9m9","wydm9m8","wydm9jx","wydm9jz","wydm9np"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:36.872 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:36.872729700Z","nanoTime":28002886821900,"traceId":"34e3dcc9","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:36.872 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:36.872 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9mb
2025-11-21 19:53:36.873 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.519ms)
2025-11-21 19:53:36.873 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:36.876 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:36.876 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:53:36.876 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.4859ms, 역직렬화: 0.0ms
2025-11-21 19:53:36.876 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:36.876 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:36.876039Z","nanoTime":28002890163100,"traceId":"34e3dcc9","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3341200,"duration_ms":3,"resultData":{"centerGeohashId":"wydm9mb","nineBlockGeohashes":["wydm9mb","wydm9q0","wydm9q1","wydm9mc","wydm9m9","wydm9m8","wydm9jx","wydm9jz","wydm9np"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9mb","hit":false,"valueSize":0,"l1CacheGetDurationNs":519000,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9mb","cacheKey":"data:wydm9mb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":395100},{"geohashId":"wydm9q0","cacheKey":"data:wydm9q0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":239900},{"geohashId":"wydm9q1","cacheKey":"data:wydm9q1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":141400},{"geohashId":"wydm9mc","cacheKey":"data:wydm9mc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":210900},{"geohashId":"wydm9m9","cacheKey":"data:wydm9m9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":228800},{"geohashId":"wydm9m8","cacheKey":"data:wydm9m8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":291300},{"geohashId":"wydm9jx","cacheKey":"data:wydm9jx:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":363300},{"geohashId":"wydm9jz","cacheKey":"data:wydm9jz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":189700},{"geohashId":"wydm9np","cacheKey":"data:wydm9np:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":308400}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2485900,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:53:36.876 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:36.876039Z","nanoTime":28002890414000,"traceId":"34e3dcc9","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:36.876 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:36.876 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:53:36.878 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 19건
2025-11-21 19:53:36.880 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:36.880 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 7개
2025-11-21 19:53:36.880 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:36.880226700Z","nanoTime":28002895451200,"traceId":"34e3dcc9","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5037200,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydm9mb","wydm9q0","wydm9q1","wydm9mc","wydm9m9","wydm9m8","wydm9jx","wydm9jz","wydm9np"],"cctvQueryResult":{"queryGeohashIds":["wydm9mb","wydm9q0","wydm9q1","wydm9mc","wydm9m9","wydm9m8","wydm9jx","wydm9jz","wydm9np"],"totalRowsReturned":19,"rowsPerGrid":{"wydm9mb":1,"wydm9m9":2,"wydm9m8":5,"wydm9jz":3,"wydm9q1":4,"wydm9q0":1,"wydm9jx":3},"queryExecutionTimeNs":3076000,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9mb","cacheKey":"data:wydm9mb:cctv","dataCount":1,"dataSize":131,"errorMessage":null,"success":true},{"geohashId":"wydm9m9","cacheKey":"data:wydm9m9:cctv","dataCount":2,"dataSize":253,"errorMessage":null,"success":true},{"geohashId":"wydm9m8","cacheKey":"data:wydm9m8:cctv","dataCount":5,"dataSize":649,"errorMessage":null,"success":true},{"geohashId":"wydm9jz","cacheKey":"data:wydm9jz:cctv","dataCount":3,"dataSize":384,"errorMessage":null,"success":true},{"geohashId":"wydm9q1","cacheKey":"data:wydm9q1:cctv","dataCount":4,"dataSize":514,"errorMessage":null,"success":true},{"geohashId":"wydm9q0","cacheKey":"data:wydm9q0:cctv","dataCount":1,"dataSize":130,"errorMessage":null,"success":true},{"geohashId":"wydm9jx","cacheKey":"data:wydm9jx:cctv","dataCount":3,"dataSize":388,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:36.880 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:36.880226700Z","nanoTime":28002895638500,"traceId":"34e3dcc9","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:36.880 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:36.880 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56101989506299, 126.96996155396992)
2025-11-21 19:53:36.880 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:36.943 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:36.943 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:36.943 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:36.943 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56101989506299, 126.96996155396992), 반경: 500m
2025-11-21 19:53:37.035 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:37.037 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 151건
2025-11-21 19:53:37.038 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:37.038 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:37.038 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 중구
2025-11-21 19:53:37.039 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 중구
2025-11-21 19:53:37.039 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:37.039 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:37.039 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:37.039 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.866910799
2025-11-21 19:53:37.039 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:37.039757900Z","nanoTime":28003053784400,"traceId":"34e3dcc9","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":158145900,"duration_ms":158,"resultData":{"latitude":37.56101989506299,"longitude":126.96996155396992,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":157981500,"addressApiResult":{"cached":false,"cacheKey":"address:37.56101989506299:126.96996155396992","roadAddress":"서울특별시 중구 칠패로 5","jibunAddress":"서울 중구 의주로2가 16-4","responseSize":68,"executionTimeNs":62555200,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:중구","guName":"중구","arrestRate":0.866910799,"dataFound":true,"executionTimeNs":739400,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56101989506299:126.96996155396992:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":4,"CS2":15,"SC4":1,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":15,"FD6":15,"PK6":15,"OL7":1,"PM9":9},"totalPlaces":151,"responseSize":17595,"executionTimeNs":94686900,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:37.040 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:37.040225600Z","nanoTime":28003053993300,"traceId":"34e3dcc9","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:37.040 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:37.040 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:37.040 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 19개
2025-11-21 19:53:37.040 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 19개 (총 카메라 대수: 41대)
2025-11-21 19:53:37.040 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:37.109 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  남대문시장4길 28-16 (거리: 429m)
2025-11-21 19:53:37.109 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:37.109 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:37.109 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:53:37.109 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:37.111 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:37.109022100Z","nanoTime":28003124688500,"traceId":"34e3dcc9","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":70695200,"duration_ms":70,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":19,"totalCctvAfterFilter":19,"totalCameraCount":41,"filterRate":1.0,"filterExecutionTimeNs":15400,"success":true},"policeQuery":{"queryDurationNs":70097200,"found":true,"nearestAddress":"서울특별시 중구  남대문시장4길 28-16","nearestDistance":428.918818914972,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":4,"CS2":15,"SC4":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":15,"FD6":15,"PK6":15,"OL7":1,"PM9":9},"placesAfterFilter":{"CT1":15,"AT4":4,"CS2":15,"SC4":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":15,"FD6":15,"PK6":15,"OL7":1,"PM9":9},"totalBeforeFilter":151,"totalAfterFilter":151,"filterRate":1.0,"filterExecutionTimeNs":191800,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:37.111 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:37.111031800Z","nanoTime":28003124928900,"traceId":"34e3dcc9","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:37.111 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:37.111 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 65.26, 편의성: 41.96, 종합: 53.61
2025-11-21 19:53:37.111 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:37.111031800Z","nanoTime":28003125183900,"traceId":"34e3dcc9","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":255000,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":46.3851476356285,"policeDistance":428.918818914972,"cctvScore":63.33333333333333,"cctvCount":19,"arrestRateScore":86.6910799,"arrestRate":0.866910799,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":65.25620159402189,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":12.0,"CS2":11.431706982486624,"SC4":2.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":45.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":72.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"중구","guPopulation":131214,"finalScore":41.959407641606184,"success":true},"overallScore":53.60780461781404,"errorMessage":null,"success":true}}
2025-11-21 19:53:37.111 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:37.111031800Z","nanoTime":28003125351600,"traceId":"34e3dcc9","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:37.111 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:37.111 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  남대문시장4길 28-16, latitude=37.557888, longitude=126.967121, geohashId=wydm9jn)
2025-11-21 19:53:37.111 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 428.918818914972
2025-11-21 19:53:37.111 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9mb
2025-11-21 19:53:37.113 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:37.113 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:37.113045800Z","nanoTime":28003126904300,"traceId":"34e3dcc9","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1552700,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["문화시설이(가) 51m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydm9mb","dataSize":20864,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20864,"errorMessage":null,"success":true}}
2025-11-21 19:53:37.113 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:37.625 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:37.625 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.559161925780685, longitude=126.96319419733723, radius=500)
2025-11-21 19:53:37.625 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:37.625 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.559161925780685, longitude=126.96319419733723, radius=500
2025-11-21 19:53:37.625 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:37.625442Z","nanoTime":28003639515600,"traceId":"ffd95270","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:37.625 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:37.625 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.559161925780685, lon=126.96319419733723
2025-11-21 19:53:37.625 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:37.625442Z","nanoTime":28003639634900,"traceId":"ffd95270","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:37.625 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:37.625442Z","nanoTime":28003639694500,"traceId":"ffd95270","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":59600,"duration_ms":0,"resultData":{"latitude":37.559161925780685,"longitude":126.96319419733723,"precision":7,"centerHash":"wydm9j7","adjacentHashes":["wydm9j7","wydm9je","wydm9js","wydm9jk","wydm9jh","wydm9j5","wydm9j4","wydm9j6","wydm9jd"],"errorMessage":null,"success":true}}
2025-11-21 19:53:37.625 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9j7, wydm9je, wydm9js, wydm9jk, wydm9jh, wydm9j5, wydm9j4, wydm9j6, wydm9jd]
2025-11-21 19:53:37.625 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9j7
2025-11-21 19:53:37.625 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:37.625442Z","nanoTime":28003639863900,"traceId":"ffd95270","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":348300,"duration_ms":0,"resultData":{"requestLatitude":37.559161925780685,"requestLongitude":126.96319419733723,"requestRadius":500,"centerGeohashId":"wydm9j7","nineBlockGeohashes":["wydm9j7","wydm9je","wydm9js","wydm9jk","wydm9jh","wydm9j5","wydm9j4","wydm9j6","wydm9jd"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:37.625 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:37.625442Z","nanoTime":28003639944800,"traceId":"ffd95270","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:37.625 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:37.625 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9j7
2025-11-21 19:53:37.628 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 1.7685ms)
2025-11-21 19:53:37.628 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:37.632 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:37.632 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:53:37.632 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 4.0819ms, 역직렬화: 0.0ms
2025-11-21 19:53:37.632 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:37.632 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:37.632021Z","nanoTime":28003646255700,"traceId":"ffd95270","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":6310900,"duration_ms":6,"resultData":{"centerGeohashId":"wydm9j7","nineBlockGeohashes":["wydm9j7","wydm9je","wydm9js","wydm9jk","wydm9jh","wydm9j5","wydm9j4","wydm9j6","wydm9jd"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9j7","hit":false,"valueSize":0,"l1CacheGetDurationNs":1768500,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9j7","cacheKey":"data:wydm9j7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":557700},{"geohashId":"wydm9je","cacheKey":"data:wydm9je:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":284800},{"geohashId":"wydm9js","cacheKey":"data:wydm9js:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":1529200},{"geohashId":"wydm9jk","cacheKey":"data:wydm9jk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":458700},{"geohashId":"wydm9jh","cacheKey":"data:wydm9jh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":205000},{"geohashId":"wydm9j5","cacheKey":"data:wydm9j5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":170600},{"geohashId":"wydm9j4","cacheKey":"data:wydm9j4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":219700},{"geohashId":"wydm9j6","cacheKey":"data:wydm9j6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":278600},{"geohashId":"wydm9jd","cacheKey":"data:wydm9jd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":226900}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":4081900,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:53:37.632 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:37.632021Z","nanoTime":28003646493400,"traceId":"ffd95270","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:37.632 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:37.632 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:53:37.639 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 28건
2025-11-21 19:53:37.643 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:37.643 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:53:37.643 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:37.643036300Z","nanoTime":28003657658500,"traceId":"ffd95270","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":11165100,"duration_ms":11,"resultData":{"inputCctvMissGrids":["wydm9j7","wydm9je","wydm9js","wydm9jk","wydm9jh","wydm9j5","wydm9j4","wydm9j6","wydm9jd"],"cctvQueryResult":{"queryGeohashIds":["wydm9j7","wydm9je","wydm9js","wydm9jk","wydm9jh","wydm9j5","wydm9j4","wydm9j6","wydm9jd"],"totalRowsReturned":28,"rowsPerGrid":{"wydm9js":2,"wydm9j7":3,"wydm9j6":2,"wydm9j5":7,"wydm9je":2,"wydm9j4":6,"wydm9jk":4,"wydm9jh":2},"queryExecutionTimeNs":6362100,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9js","cacheKey":"data:wydm9js:cctv","dataCount":2,"dataSize":205,"errorMessage":null,"success":true},{"geohashId":"wydm9j7","cacheKey":"data:wydm9j7:cctv","dataCount":3,"dataSize":389,"errorMessage":null,"success":true},{"geohashId":"wydm9j6","cacheKey":"data:wydm9j6:cctv","dataCount":2,"dataSize":256,"errorMessage":null,"success":true},{"geohashId":"wydm9j5","cacheKey":"data:wydm9j5:cctv","dataCount":7,"dataSize":897,"errorMessage":null,"success":true},{"geohashId":"wydm9je","cacheKey":"data:wydm9je:cctv","dataCount":2,"dataSize":205,"errorMessage":null,"success":true},{"geohashId":"wydm9j4","cacheKey":"data:wydm9j4:cctv","dataCount":6,"dataSize":757,"errorMessage":null,"success":true},{"geohashId":"wydm9jk","cacheKey":"data:wydm9jk:cctv","dataCount":4,"dataSize":517,"errorMessage":null,"success":true},{"geohashId":"wydm9jh","cacheKey":"data:wydm9jh:cctv","dataCount":2,"dataSize":257,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:37.643 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:37.643036300Z","nanoTime":28003657945000,"traceId":"ffd95270","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:37.643 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:37.643 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.559161925780685, 126.96319419733723)
2025-11-21 19:53:37.643 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:37.744 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:37.744 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:37.744 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:37.744 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.559161925780685, 126.96319419733723), 반경: 500m
2025-11-21 19:53:37.826 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:37.826 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 124건
2025-11-21 19:53:37.828 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:37.828 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:37.828 [http-nio-8185-exec-1] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:53:37.828 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:37.828 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:37.828 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:37.828 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:53:37.828 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:37.828119800Z","nanoTime":28003843146100,"traceId":"ffd95270","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":185201100,"duration_ms":185,"resultData":{"latitude":37.559161925780685,"longitude":126.96319419733723,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":185022700,"addressApiResult":{"cached":false,"cacheKey":"address:37.559161925780685:126.96319419733723","roadAddress":"주소 없음","jibunAddress":"서울 중구 중림동 728-1","responseSize":58,"executionTimeNs":101478200,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":59900,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.559161925780685:126.96319419733723:500","categoryCount":15,"placesByCategory":{"CT1":6,"AT4":3,"CS2":15,"SC4":2,"MT1":0,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":5,"FD6":15,"PK6":15,"OL7":0,"PM9":2},"totalPlaces":124,"responseSize":14410,"executionTimeNs":83484600,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:37.828 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:37.828119800Z","nanoTime":28003843484500,"traceId":"ffd95270","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:37.828 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:37.828 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:37.828 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 28개
2025-11-21 19:53:37.828 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 28개 (총 카메라 대수: 73대)
2025-11-21 19:53:37.828 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:37.904 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  남대문시장4길 28-16 (거리: 374m)
2025-11-21 19:53:37.906 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:37.906 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:37.906 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 19:53:37.906 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:37.906 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:37.906371800Z","nanoTime":28003920453500,"traceId":"ffd95270","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":76969000,"duration_ms":76,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":28,"totalCctvAfterFilter":28,"totalCameraCount":73,"filterRate":1.0,"filterExecutionTimeNs":21000,"success":true},"policeQuery":{"queryDurationNs":76321800,"found":true,"nearestAddress":"서울특별시 중구  남대문시장4길 28-16","nearestDistance":374.0023576177526,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":6,"AT4":3,"CS2":15,"SC4":2,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":5,"FD6":15,"PK6":15,"PM9":2},"placesAfterFilter":{"CT1":6,"AT4":3,"CS2":15,"SC4":2,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":5,"FD6":15,"PK6":15,"PM9":2},"totalBeforeFilter":124,"totalAfterFilter":124,"filterRate":1.0,"filterExecutionTimeNs":170300,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:37.906 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:37.906371800Z","nanoTime":28003920707600,"traceId":"ffd95270","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:37.906 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:37.906 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 53.31, 편의성: 34.37, 종합: 43.84
2025-11-21 19:53:37.907 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:37.906371800Z","nanoTime":28003921124100,"traceId":"ffd95270","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":416500,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":53.24970529778093,"policeDistance":374.0023576177526,"cctvScore":93.33333333333333,"cctvCount":28,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":53.30824492266761,"success":true},"convenienceScore":{"categoryScores":{"CT1":24.0,"AT4":9.0,"CS2":3.75,"SC4":4.0,"BK9":70.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":15.0,"FD6":15.0,"PK6":45.0,"PM9":16.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":34.36538461538461,"success":true},"overallScore":43.83681476902611,"errorMessage":null,"success":true}}
2025-11-21 19:53:37.907 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:37.907380300Z","nanoTime":28003921316400,"traceId":"ffd95270","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:37.907 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:37.907 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  남대문시장4길 28-16, latitude=37.557888, longitude=126.967121, geohashId=wydm9jn)
2025-11-21 19:53:37.907 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 374.0023576177526
2025-11-21 19:53:37.908 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9j7
2025-11-21 19:53:37.908 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:37.908 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:37.908380100Z","nanoTime":28003922837500,"traceId":"ffd95270","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1521100,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["관광명소이(가) 26m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm9j7","dataSize":18383,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":18383,"errorMessage":null,"success":true}}
2025-11-21 19:53:37.908 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:38.324 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:38.324 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5565687241656, longitude=126.96901267037633, radius=500)
2025-11-21 19:53:38.324 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:38.324 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5565687241656, longitude=126.96901267037633, radius=500
2025-11-21 19:53:38.324 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:38.324041Z","nanoTime":28004338579100,"traceId":"3403c87b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:38.324 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:38.324 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5565687241656, lon=126.96901267037633
2025-11-21 19:53:38.324 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:38.324041Z","nanoTime":28004338650000,"traceId":"3403c87b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:38.324 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:38.324041Z","nanoTime":28004338692400,"traceId":"3403c87b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":42400,"duration_ms":0,"resultData":{"latitude":37.5565687241656,"longitude":126.96901267037633,"precision":7,"centerHash":"wydm9kb","adjacentHashes":["wydm9kb","wydm9m0","wydm9m1","wydm9kc","wydm9k9","wydm9k8","wydm9hx","wydm9hz","wydm9jp"],"errorMessage":null,"success":true}}
2025-11-21 19:53:38.324 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9kb, wydm9m0, wydm9m1, wydm9kc, wydm9k9, wydm9k8, wydm9hx, wydm9hz, wydm9jp]
2025-11-21 19:53:38.325 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9kb
2025-11-21 19:53:38.325 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:38.325040400Z","nanoTime":28004338840800,"traceId":"3403c87b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":261700,"duration_ms":0,"resultData":{"requestLatitude":37.5565687241656,"requestLongitude":126.96901267037633,"requestRadius":500,"centerGeohashId":"wydm9kb","nineBlockGeohashes":["wydm9kb","wydm9m0","wydm9m1","wydm9kc","wydm9k9","wydm9k8","wydm9hx","wydm9hz","wydm9jp"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:38.325 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:38.325040400Z","nanoTime":28004338939100,"traceId":"3403c87b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:38.325 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:38.325 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9kb
2025-11-21 19:53:38.325 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5602ms)
2025-11-21 19:53:38.325 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:38.327 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:38.327 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:53:38.327 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.7232ms, 역직렬화: 0.0ms
2025-11-21 19:53:38.327 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:38.327 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:38.327445400Z","nanoTime":28004341561800,"traceId":"3403c87b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2622700,"duration_ms":2,"resultData":{"centerGeohashId":"wydm9kb","nineBlockGeohashes":["wydm9kb","wydm9m0","wydm9m1","wydm9kc","wydm9k9","wydm9k8","wydm9hx","wydm9hz","wydm9jp"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9kb","hit":false,"valueSize":0,"l1CacheGetDurationNs":560200,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9kb","cacheKey":"data:wydm9kb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":302000},{"geohashId":"wydm9m0","cacheKey":"data:wydm9m0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":237200},{"geohashId":"wydm9m1","cacheKey":"data:wydm9m1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":201000},{"geohashId":"wydm9kc","cacheKey":"data:wydm9kc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":194300},{"geohashId":"wydm9k9","cacheKey":"data:wydm9k9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":204000},{"geohashId":"wydm9k8","cacheKey":"data:wydm9k8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":124600},{"geohashId":"wydm9hx","cacheKey":"data:wydm9hx:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":91000},{"geohashId":"wydm9hz","cacheKey":"data:wydm9hz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":143600},{"geohashId":"wydm9jp","cacheKey":"data:wydm9jp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":147400}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1723200,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:53:38.327 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:38.327445400Z","nanoTime":28004341808000,"traceId":"3403c87b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:38.327 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:38.327 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:53:38.331 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 5건
2025-11-21 19:53:38.331 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:38.331 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 3개
2025-11-21 19:53:38.332 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:38.331413900Z","nanoTime":28004346069300,"traceId":"3403c87b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4261300,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydm9kb","wydm9m0","wydm9m1","wydm9kc","wydm9k9","wydm9k8","wydm9hx","wydm9hz","wydm9jp"],"cctvQueryResult":{"queryGeohashIds":["wydm9kb","wydm9m0","wydm9m1","wydm9kc","wydm9k9","wydm9k8","wydm9hx","wydm9hz","wydm9jp"],"totalRowsReturned":5,"rowsPerGrid":{"wydm9m1":1,"wydm9jp":2,"wydm9hx":2},"queryExecutionTimeNs":3013400,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9m1","cacheKey":"data:wydm9m1:cctv","dataCount":1,"dataSize":132,"errorMessage":null,"success":true},{"geohashId":"wydm9jp","cacheKey":"data:wydm9jp:cctv","dataCount":2,"dataSize":261,"errorMessage":null,"success":true},{"geohashId":"wydm9hx","cacheKey":"data:wydm9hx:cctv","dataCount":2,"dataSize":279,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:38.332 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:38.332443200Z","nanoTime":28004346325000,"traceId":"3403c87b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:38.332 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:38.332 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5565687241656, 126.96901267037633)
2025-11-21 19:53:38.332 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:38.438 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:38.440 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:38.440 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:38.440 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5565687241656, 126.96901267037633), 반경: 500m
2025-11-21 19:53:38.527 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:38.527 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 147건
2025-11-21 19:53:38.529 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:38.529 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:38.529 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 중구
2025-11-21 19:53:38.531 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 중구
2025-11-21 19:53:38.531 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:38.531 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:38.531 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:38.531 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.866910799
2025-11-21 19:53:38.531 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:38.531456800Z","nanoTime":28004545636500,"traceId":"3403c87b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":199311500,"duration_ms":199,"resultData":{"latitude":37.5565687241656,"longitude":126.96901267037633,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":199120700,"addressApiResult":{"cached":false,"cacheKey":"address:37.5565687241656:126.96901267037633","roadAddress":"서울특별시 중구 퇴계로 33","jibunAddress":"서울 중구 남대문로5가 67-4","responseSize":70,"executionTimeNs":108265300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:중구","guName":"중구","arrestRate":0.866910799,"dataFound":true,"executionTimeNs":771600,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5565687241656:126.96901267037633:500","categoryCount":15,"placesByCategory":{"CT1":14,"AT4":2,"CS2":15,"SC4":2,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":9,"FD6":15,"PK6":15,"OL7":2,"PM9":7},"totalPlaces":147,"responseSize":17134,"executionTimeNs":90083800,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:38.531 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:38.531456800Z","nanoTime":28004545966000,"traceId":"3403c87b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:38.531 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:38.531 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:38.531 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 5개
2025-11-21 19:53:38.531 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 5개 (총 카메라 대수: 17대)
2025-11-21 19:53:38.531 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:38.607 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  남대문시장4길 28-16 (거리: 222m)
2025-11-21 19:53:38.608 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:38.608 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:38.608 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:53:38.608 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:38.608 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:38.608768700Z","nanoTime":28004622970600,"traceId":"3403c87b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":77004600,"duration_ms":77,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":5,"totalCctvAfterFilter":5,"totalCameraCount":17,"filterRate":1.0,"filterExecutionTimeNs":5400,"success":true},"policeQuery":{"queryDurationNs":76304200,"found":true,"nearestAddress":"서울특별시 중구  남대문시장4길 28-16","nearestDistance":222.09290370348506,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":14,"AT4":2,"CS2":15,"SC4":2,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":9,"FD6":15,"PK6":15,"OL7":2,"PM9":7},"placesAfterFilter":{"CT1":14,"AT4":2,"CS2":15,"SC4":2,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":9,"FD6":15,"PK6":15,"OL7":2,"PM9":7},"totalBeforeFilter":147,"totalAfterFilter":147,"filterRate":1.0,"filterExecutionTimeNs":244300,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:38.608 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:38.608768700Z","nanoTime":28004623353400,"traceId":"3403c87b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:38.608 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:38.609 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 54.35, 편의성: 38.03, 종합: 46.19
2025-11-21 19:53:38.609 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:38.609796600Z","nanoTime":28004623853900,"traceId":"3403c87b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":500500,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":72.23838703706437,"policeDistance":222.09290370348506,"cctvScore":16.666666666666664,"cctvCount":5,"arrestRateScore":86.6910799,"arrestRate":0.866910799,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":54.345506747785976,"success":true},"convenienceScore":{"categoryScores":{"CT1":56.0,"AT4":6.0,"CS2":11.431706982486624,"SC4":4.0,"MT1":20.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":27.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":56.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"중구","guPopulation":131214,"finalScore":38.02878046549911,"success":true},"overallScore":46.18714360664254,"errorMessage":null,"success":true}}
2025-11-21 19:53:38.609 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:38.609796600Z","nanoTime":28004624143500,"traceId":"3403c87b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:38.609 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:38.609 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  남대문시장4길 28-16, latitude=37.557888, longitude=126.967121, geohashId=wydm9jn)
2025-11-21 19:53:38.609 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 222.09290370348506
2025-11-21 19:53:38.609 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9kb
2025-11-21 19:53:38.609 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:38.611 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:38.609796600Z","nanoTime":28004625616800,"traceId":"3403c87b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1473300,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["은행이(가) 69m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydm9kb","dataSize":18974,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":18974,"errorMessage":null,"success":true}}
2025-11-21 19:53:38.611 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:38.948 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:38.948 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.553830324207304, longitude=126.97152619843617, radius=500)
2025-11-21 19:53:38.948 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:38.948 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.553830324207304, longitude=126.97152619843617, radius=500
2025-11-21 19:53:38.948 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:38.948201900Z","nanoTime":28004962573300,"traceId":"30104faf","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:38.948 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:38.948 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.553830324207304, lon=126.97152619843617
2025-11-21 19:53:38.948 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:38.948201900Z","nanoTime":28004962659900,"traceId":"30104faf","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:38.948 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:38.948201900Z","nanoTime":28004962720700,"traceId":"30104faf","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":60800,"duration_ms":0,"resultData":{"latitude":37.553830324207304,"longitude":126.97152619843617,"precision":7,"centerHash":"wydm9k3","adjacentHashes":["wydm9k3","wydm9k9","wydm9kd","wydm9k6","wydm9k4","wydm9k1","wydm9k0","wydm9k2","wydm9k8"],"errorMessage":null,"success":true}}
2025-11-21 19:53:38.948 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9k3, wydm9k9, wydm9kd, wydm9k6, wydm9k4, wydm9k1, wydm9k0, wydm9k2, wydm9k8]
2025-11-21 19:53:38.948 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9k3
2025-11-21 19:53:38.948 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:38.948201900Z","nanoTime":28004962842300,"traceId":"30104faf","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":269000,"duration_ms":0,"resultData":{"requestLatitude":37.553830324207304,"requestLongitude":126.97152619843617,"requestRadius":500,"centerGeohashId":"wydm9k3","nineBlockGeohashes":["wydm9k3","wydm9k9","wydm9kd","wydm9k6","wydm9k4","wydm9k1","wydm9k0","wydm9k2","wydm9k8"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:38.948 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:38.948201900Z","nanoTime":28004962921400,"traceId":"30104faf","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:38.949 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:38.949 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9k3
2025-11-21 19:53:38.949 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5394ms)
2025-11-21 19:53:38.949 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:38.951 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:38.951 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:53:38.951 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.2476ms, 역직렬화: 0.0ms
2025-11-21 19:53:38.951 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:38.952 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:38.951505200Z","nanoTime":28004966173300,"traceId":"30104faf","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3251900,"duration_ms":3,"resultData":{"centerGeohashId":"wydm9k3","nineBlockGeohashes":["wydm9k3","wydm9k9","wydm9kd","wydm9k6","wydm9k4","wydm9k1","wydm9k0","wydm9k2","wydm9k8"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9k3","hit":false,"valueSize":0,"l1CacheGetDurationNs":539400,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9k3","cacheKey":"data:wydm9k3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":345800},{"geohashId":"wydm9k9","cacheKey":"data:wydm9k9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":191400},{"geohashId":"wydm9kd","cacheKey":"data:wydm9kd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":144400},{"geohashId":"wydm9k6","cacheKey":"data:wydm9k6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":163000},{"geohashId":"wydm9k4","cacheKey":"data:wydm9k4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":157300},{"geohashId":"wydm9k1","cacheKey":"data:wydm9k1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":227600},{"geohashId":"wydm9k0","cacheKey":"data:wydm9k0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":358500},{"geohashId":"wydm9k2","cacheKey":"data:wydm9k2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":274400},{"geohashId":"wydm9k8","cacheKey":"data:wydm9k8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":284800}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2247600,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:53:38.952 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:38.952504500Z","nanoTime":28004966358600,"traceId":"30104faf","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:38.952 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:38.952 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:53:38.955 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 1건
2025-11-21 19:53:38.955 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:38.955 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 1개
2025-11-21 19:53:38.955 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:38.955870100Z","nanoTime":28004969991600,"traceId":"30104faf","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":3633000,"duration_ms":3,"resultData":{"inputCctvMissGrids":["wydm9k3","wydm9k9","wydm9kd","wydm9k6","wydm9k4","wydm9k1","wydm9k0","wydm9k2","wydm9k8"],"cctvQueryResult":{"queryGeohashIds":["wydm9k3","wydm9k9","wydm9kd","wydm9k6","wydm9k4","wydm9k1","wydm9k0","wydm9k2","wydm9k8"],"totalRowsReturned":1,"rowsPerGrid":{"wydm9k4":1},"queryExecutionTimeNs":2921100,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9k4","cacheKey":"data:wydm9k4:cctv","dataCount":1,"dataSize":153,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:38.955 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:38.955870100Z","nanoTime":28004970198200,"traceId":"30104faf","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:38.955 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:38.955 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.553830324207304, 126.97152619843617)
2025-11-21 19:53:38.955 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:39.043 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:39.043 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:39.044 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:39.044 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.553830324207304, 126.97152619843617), 반경: 500m
2025-11-21 19:53:39.130 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:39.131 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 136건
2025-11-21 19:53:39.132 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:39.132 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:39.132 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 용산구
2025-11-21 19:53:39.132 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 미스 - DB 조회
2025-11-21 19:53:39.153 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 성공 및 캐싱 완료 - 용산구: 0.792969402
2025-11-21 19:53:39.153 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:39.153 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:39.153 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:39.153 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.792969402
2025-11-21 19:53:39.153 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:39.153000400Z","nanoTime":28005168341500,"traceId":"30104faf","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":198143300,"duration_ms":198,"resultData":{"latitude":37.553830324207304,"longitude":126.97152619843617,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":197981200,"addressApiResult":{"cached":false,"cacheKey":"address:37.553830324207304:126.97152619843617","roadAddress":"서울특별시 용산구 청파로 378","jibunAddress":"서울 용산구 동자동 43-205","responseSize":72,"executionTimeNs":87752800,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":"arrest_rate:용산구","guName":"용산구","arrestRate":0.792969402,"dataFound":true,"executionTimeNs":21369100,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.553830324207304:126.97152619843617:500","categoryCount":15,"placesByCategory":{"CT1":8,"AT4":1,"CS2":15,"SC4":0,"MT1":1,"BK9":15,"HP8":15,"AC5":14,"CE7":15,"SW8":5,"PO3":8,"FD6":15,"PK6":15,"OL7":2,"PM9":7},"totalPlaces":136,"responseSize":15851,"executionTimeNs":88859300,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:39.153 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:39.153000400Z","nanoTime":28005168673400,"traceId":"30104faf","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:39.153 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:39.153 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:39.153 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 1개
2025-11-21 19:53:39.155 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 1개 (총 카메라 대수: 1대)
2025-11-21 19:53:39.155 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:39.223 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  다동길 11 (거리: 331m)
2025-11-21 19:53:39.223 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:39.223 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:39.223 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:53:39.223 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:39.223 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:39.223772200Z","nanoTime":28005238659300,"traceId":"30104faf","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":69985900,"duration_ms":69,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":1,"totalCctvAfterFilter":1,"totalCameraCount":1,"filterRate":1.0,"filterExecutionTimeNs":6600,"success":true},"policeQuery":{"queryDurationNs":69334600,"found":true,"nearestAddress":"서울특별시 중구  다동길 11","nearestDistance":331.12197607542254,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":8,"AT4":1,"CS2":15,"MT1":1,"BK9":15,"HP8":15,"AC5":14,"CE7":15,"SW8":5,"PO3":8,"FD6":15,"PK6":15,"OL7":2,"PM9":7},"placesAfterFilter":{"CT1":8,"AT4":1,"CS2":15,"MT1":1,"BK9":14,"HP8":14,"AC5":14,"CE7":15,"SW8":5,"PO3":8,"FD6":15,"PK6":15,"OL7":2,"PM9":7},"totalBeforeFilter":136,"totalAfterFilter":134,"filterRate":0.9852941176470589,"filterExecutionTimeNs":175000,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:39.223 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:39.223772200Z","nanoTime":28005238979100,"traceId":"30104faf","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:39.223 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:39.223 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 42.71, 편의성: 36.85, 종합: 39.78
2025-11-21 19:53:39.223 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:39.223772200Z","nanoTime":28005239355800,"traceId":"30104faf","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":376700,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":58.60975299057218,"policeDistance":331.12197607542254,"cctvScore":3.3333333333333335,"cctvCount":1,"arrestRateScore":79.2969402,"arrestRate":0.792969402,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":42.70534129050499,"success":true},"convenienceScore":{"categoryScores":{"CT1":32.0,"AT4":3.0,"CS2":6.90754027095978,"MT1":10.0,"BK9":70.0,"HP8":100.0,"AC5":14.0,"CE7":30.0,"SW8":100.0,"PO3":24.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":56.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"용산구","guPopulation":217154,"finalScore":36.85053859078284,"success":true},"overallScore":39.77793994064392,"errorMessage":null,"success":true}}
2025-11-21 19:53:39.225 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:39.225787600Z","nanoTime":28005239572400,"traceId":"30104faf","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:39.225 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:39.225 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  다동길 11, latitude=37.556808, longitude=126.971567, geohashId=wydm9m1)
2025-11-21 19:53:39.225 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 331.12197607542254
2025-11-21 19:53:39.225 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9k3
2025-11-21 19:53:39.225 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:39.227 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:39.225787600Z","nanoTime":28005241158700,"traceId":"30104faf","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1586300,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["카페이(가) 61m 내에 있습니다."],"warnings":["CCTV 설치 대수가 적은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm9k3","dataSize":16982,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":16982,"errorMessage":null,"success":true}}
2025-11-21 19:53:39.227 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:39.729 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:39.729 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5519740184871, longitude=126.97050839173262, radius=500)
2025-11-21 19:53:39.729 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:39.729 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5519740184871, longitude=126.97050839173262, radius=500
2025-11-21 19:53:39.729 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:39.729166300Z","nanoTime":28005743639100,"traceId":"12b70eb3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:39.729 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:39.729 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5519740184871, lon=126.97050839173262
2025-11-21 19:53:39.729 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:39.729166300Z","nanoTime":28005743778500,"traceId":"12b70eb3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:39.729 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:39.729166300Z","nanoTime":28005743847800,"traceId":"12b70eb3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":69300,"duration_ms":0,"resultData":{"latitude":37.5519740184871,"longitude":126.97050839173262,"precision":7,"centerHash":"wydm9k1","adjacentHashes":["wydm9k1","wydm9k3","wydm9k6","wydm9k4","wydm97f","wydm97c","wydm97b","wydm9k0","wydm9k2"],"errorMessage":null,"success":true}}
2025-11-21 19:53:39.729 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9k1, wydm9k3, wydm9k6, wydm9k4, wydm97f, wydm97c, wydm97b, wydm9k0, wydm9k2]
2025-11-21 19:53:39.729 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9k1
2025-11-21 19:53:39.730 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:39.729166300Z","nanoTime":28005744059100,"traceId":"12b70eb3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":420000,"duration_ms":0,"resultData":{"requestLatitude":37.5519740184871,"requestLongitude":126.97050839173262,"requestRadius":500,"centerGeohashId":"wydm9k1","nineBlockGeohashes":["wydm9k1","wydm9k3","wydm9k6","wydm9k4","wydm97f","wydm97c","wydm97b","wydm9k0","wydm9k2"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:39.730 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:39.730308800Z","nanoTime":28005744150700,"traceId":"12b70eb3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:39.730 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:39.730 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9k1
2025-11-21 19:53:39.730 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.6174ms)
2025-11-21 19:53:39.730 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:39.732 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:39.732 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 1개, 미스: 8개
2025-11-21 19:53:39.732 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.0082ms, 역직렬화: 0.0841ms
2025-11-21 19:53:39.732 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:39.733 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:39.732382900Z","nanoTime":28005747049900,"traceId":"12b70eb3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2899200,"duration_ms":2,"resultData":{"centerGeohashId":"wydm9k1","nineBlockGeohashes":["wydm9k1","wydm9k3","wydm9k6","wydm9k4","wydm97f","wydm97c","wydm97b","wydm9k0","wydm9k2"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9k1","hit":false,"valueSize":0,"l1CacheGetDurationNs":617400,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9k1","cacheKey":"data:wydm9k1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":209300},{"geohashId":"wydm9k3","cacheKey":"data:wydm9k3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":278100},{"geohashId":"wydm9k6","cacheKey":"data:wydm9k6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":342600},{"geohashId":"wydm9k4","cacheKey":"data:wydm9k4:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":153,"l2CacheGetDurationNs":510500},{"geohashId":"wydm97f","cacheKey":"data:wydm97f:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":111100},{"geohashId":"wydm97c","cacheKey":"data:wydm97c:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":98400},{"geohashId":"wydm97b","cacheKey":"data:wydm97b:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":91700},{"geohashId":"wydm9k0","cacheKey":"data:wydm9k0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":105000},{"geohashId":"wydm9k2","cacheKey":"data:wydm9k2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":108700}],"l2TotalHits":1,"l2TotalMisses":8,"l2CacheTotalDurationNs":2008200,"l2JsonDeserializeTotalDurationNs":84100,"errorMessage":null,"success":true}}
2025-11-21 19:53:39.733 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:39.733402200Z","nanoTime":28005747228600,"traceId":"12b70eb3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:39.733 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:39.733 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 8개
2025-11-21 19:53:39.738 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 0건
2025-11-21 19:53:39.738 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:39.738 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 1개
2025-11-21 19:53:39.738 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:39.738077500Z","nanoTime":28005752070300,"traceId":"12b70eb3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4841700,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydm9k1","wydm9k3","wydm9k6","wydm97f","wydm97c","wydm97b","wydm9k0","wydm9k2"],"cctvQueryResult":{"queryGeohashIds":["wydm9k1","wydm9k3","wydm9k6","wydm97f","wydm97c","wydm97b","wydm9k0","wydm9k2"],"totalRowsReturned":0,"rowsPerGrid":{},"queryExecutionTimeNs":4561900,"errorMessage":null,"success":true},"cctvCacheWrites":[],"errorMessage":null,"success":true}}
2025-11-21 19:53:39.738 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:39.738077500Z","nanoTime":28005752299200,"traceId":"12b70eb3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:39.738 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:39.738 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5519740184871, 126.97050839173262)
2025-11-21 19:53:39.739 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:39.798 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:39.798 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:39.798 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:39.798 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5519740184871, 126.97050839173262), 반경: 500m
2025-11-21 19:53:39.886 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:39.886 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 128건
2025-11-21 19:53:39.886 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:39.886 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:39.886 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 용산구
2025-11-21 19:53:39.888 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 용산구
2025-11-21 19:53:39.888 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:39.888 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:39.888 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:39.888 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.792969402
2025-11-21 19:53:39.888 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:39.888793600Z","nanoTime":28005903645900,"traceId":"12b70eb3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":151346700,"duration_ms":151,"resultData":{"latitude":37.5519740184871,"longitude":126.97050839173262,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":151196800,"addressApiResult":{"cached":false,"cacheKey":"address:37.5519740184871:126.97050839173262","roadAddress":"서울특별시 용산구 청파로 378","jibunAddress":"서울 용산구 동자동 43-205","responseSize":72,"executionTimeNs":61352600,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:용산구","guName":"용산구","arrestRate":0.792969402,"dataFound":true,"executionTimeNs":1054500,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5519740184871:126.97050839173262:500","categoryCount":15,"placesByCategory":{"CT1":7,"AT4":0,"CS2":15,"SC4":0,"MT1":1,"BK9":15,"HP8":13,"AC5":12,"CE7":15,"SW8":4,"PO3":7,"FD6":15,"PK6":15,"OL7":2,"PM9":7},"totalPlaces":128,"responseSize":14911,"executionTimeNs":88789700,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:39.888 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:39.888793600Z","nanoTime":28005903887400,"traceId":"12b70eb3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:39.888 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:39.888 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:39.888 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 1개
2025-11-21 19:53:39.888 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 1개 (총 카메라 대수: 1대)
2025-11-21 19:53:39.888 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:39.955 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  다동길 11 (거리: 546m)
2025-11-21 19:53:39.956 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:39.956 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:39.956 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 19:53:39.956 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:39.956 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:39.956542700Z","nanoTime":28005970605000,"traceId":"12b70eb3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":66717600,"duration_ms":66,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":1,"totalCctvAfterFilter":1,"totalCameraCount":1,"filterRate":1.0,"filterExecutionTimeNs":7500,"success":true},"policeQuery":{"queryDurationNs":66247100,"found":true,"nearestAddress":"서울특별시 중구  다동길 11","nearestDistance":545.5547442596462,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":7,"CS2":15,"MT1":1,"BK9":15,"HP8":13,"AC5":12,"CE7":15,"SW8":4,"PO3":7,"FD6":15,"PK6":15,"OL7":2,"PM9":7},"placesAfterFilter":{"CT1":7,"CS2":15,"MT1":1,"BK9":15,"HP8":13,"AC5":12,"CE7":15,"SW8":4,"PO3":7,"FD6":14,"PK6":15,"OL7":2,"PM9":7},"totalBeforeFilter":128,"totalAfterFilter":127,"filterRate":0.9921875,"filterExecutionTimeNs":139000,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:39.956 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:39.956542700Z","nanoTime":28005970800100,"traceId":"12b70eb3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:39.956 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:39.957 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 34.66, 편의성: 39.07, 종합: 36.87
2025-11-21 19:53:39.957 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:39.957246Z","nanoTime":28005971177800,"traceId":"12b70eb3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":377700,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":31.80565696754422,"policeDistance":545.5547442596462,"cctvScore":3.3333333333333335,"cctvCount":1,"arrestRateScore":79.2969402,"arrestRate":0.792969402,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":34.6641124835966,"success":true},"convenienceScore":{"categoryScores":{"CT1":28.0,"CS2":6.90754027095978,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":12.0,"CE7":30.0,"SW8":100.0,"PO3":21.0,"FD6":14.0,"PK6":45.0,"OL7":10.0,"PM9":56.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"용산구","guPopulation":217154,"finalScore":39.06981079007383,"success":true},"overallScore":36.866961636835214,"errorMessage":null,"success":true}}
2025-11-21 19:53:39.957 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:39.957246Z","nanoTime":28005971413500,"traceId":"12b70eb3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:39.957 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:39.957 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  다동길 11, latitude=37.556808, longitude=126.971567, geohashId=wydm9m1)
2025-11-21 19:53:39.957 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 545.5547442596462
2025-11-21 19:53:39.957 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9k1
2025-11-21 19:53:39.957 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:39.957 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:39.957748800Z","nanoTime":28005973206300,"traceId":"12b70eb3","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1792800,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["은행이(가) 67m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","CCTV 설치 대수가 적은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm9k1","dataSize":16121,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":16121,"errorMessage":null,"success":true}}
2025-11-21 19:53:39.957 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:40.436 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:40.436 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55026146160737, longitude=126.96797415901925, radius=500)
2025-11-21 19:53:40.436 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:40.436 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55026146160737, longitude=126.96797415901925, radius=500
2025-11-21 19:53:40.436 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:40.436461500Z","nanoTime":28006450715000,"traceId":"72f6ba5e","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:40.436 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:40.436 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55026146160737, lon=126.96797415901925
2025-11-21 19:53:40.436 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:40.436461500Z","nanoTime":28006450823200,"traceId":"72f6ba5e","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:40.436 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:40.436461500Z","nanoTime":28006450876700,"traceId":"72f6ba5e","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":53500,"duration_ms":0,"resultData":{"latitude":37.55026146160737,"longitude":126.96797415901925,"precision":7,"centerHash":"wydm95z","adjacentHashes":["wydm95z","wydm9hp","wydm9k0","wydm97b","wydm978","wydm95x","wydm95w","wydm95y","wydm9hn"],"errorMessage":null,"success":true}}
2025-11-21 19:53:40.436 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm95z, wydm9hp, wydm9k0, wydm97b, wydm978, wydm95x, wydm95w, wydm95y, wydm9hn]
2025-11-21 19:53:40.436 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm95z
2025-11-21 19:53:40.437 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:40.436461500Z","nanoTime":28006451028600,"traceId":"72f6ba5e","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":313600,"duration_ms":0,"resultData":{"requestLatitude":37.55026146160737,"requestLongitude":126.96797415901925,"requestRadius":500,"centerGeohashId":"wydm95z","nineBlockGeohashes":["wydm95z","wydm9hp","wydm9k0","wydm97b","wydm978","wydm95x","wydm95w","wydm95y","wydm9hn"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:40.437 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:40.437307200Z","nanoTime":28006451164700,"traceId":"72f6ba5e","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:40.437 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:40.437 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm95z
2025-11-21 19:53:40.437 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5809ms)
2025-11-21 19:53:40.437 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:40.440 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:40.440 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:53:40.440 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.2248ms, 역직렬화: 0.0ms
2025-11-21 19:53:40.440 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:40.440 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:40.440268700Z","nanoTime":28006454277400,"traceId":"72f6ba5e","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3112700,"duration_ms":3,"resultData":{"centerGeohashId":"wydm95z","nineBlockGeohashes":["wydm95z","wydm9hp","wydm9k0","wydm97b","wydm978","wydm95x","wydm95w","wydm95y","wydm9hn"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm95z","hit":false,"valueSize":0,"l1CacheGetDurationNs":580900,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm95z","cacheKey":"data:wydm95z:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":396100},{"geohashId":"wydm9hp","cacheKey":"data:wydm9hp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":198200},{"geohashId":"wydm9k0","cacheKey":"data:wydm9k0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":130700},{"geohashId":"wydm97b","cacheKey":"data:wydm97b:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":108700},{"geohashId":"wydm978","cacheKey":"data:wydm978:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":224400},{"geohashId":"wydm95x","cacheKey":"data:wydm95x:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":187100},{"geohashId":"wydm95w","cacheKey":"data:wydm95w:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":445800},{"geohashId":"wydm95y","cacheKey":"data:wydm95y:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":281300},{"geohashId":"wydm9hn","cacheKey":"data:wydm9hn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":169600}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2224800,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:53:40.440 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:40.440268700Z","nanoTime":28006454492000,"traceId":"72f6ba5e","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:40.440 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:40.440 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:53:40.442 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 11건
2025-11-21 19:53:40.445 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:40.445 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 6개
2025-11-21 19:53:40.446 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:40.445908Z","nanoTime":28006460601900,"traceId":"72f6ba5e","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6109900,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydm95z","wydm9hp","wydm9k0","wydm97b","wydm978","wydm95x","wydm95w","wydm95y","wydm9hn"],"cctvQueryResult":{"queryGeohashIds":["wydm95z","wydm9hp","wydm9k0","wydm97b","wydm978","wydm95x","wydm95w","wydm95y","wydm9hn"],"totalRowsReturned":11,"rowsPerGrid":{"wydm95z":1,"wydm95y":2,"wydm95x":2,"wydm95w":1,"wydm9hp":3,"wydm9hn":2},"queryExecutionTimeNs":3737100,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm95z","cacheKey":"data:wydm95z:cctv","dataCount":1,"dataSize":143,"errorMessage":null,"success":true},{"geohashId":"wydm95y","cacheKey":"data:wydm95y:cctv","dataCount":2,"dataSize":294,"errorMessage":null,"success":true},{"geohashId":"wydm95x","cacheKey":"data:wydm95x:cctv","dataCount":2,"dataSize":278,"errorMessage":null,"success":true},{"geohashId":"wydm95w","cacheKey":"data:wydm95w:cctv","dataCount":1,"dataSize":143,"errorMessage":null,"success":true},{"geohashId":"wydm9hp","cacheKey":"data:wydm9hp:cctv","dataCount":3,"dataSize":400,"errorMessage":null,"success":true},{"geohashId":"wydm9hn","cacheKey":"data:wydm9hn:cctv","dataCount":2,"dataSize":289,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:40.446 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:40.446916200Z","nanoTime":28006460806100,"traceId":"72f6ba5e","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:40.446 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:40.446 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.55026146160737, 126.96797415901925)
2025-11-21 19:53:40.446 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:40.526 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:40.526 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:40.526 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:40.526 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.55026146160737, 126.96797415901925), 반경: 500m
2025-11-21 19:53:40.610 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:40.610 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 115건
2025-11-21 19:53:40.612 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:40.612 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:40.612 [http-nio-8185-exec-4] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:53:40.612 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:40.612 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:40.612 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:40.612 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:53:40.612 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:40.612505Z","nanoTime":28006627091000,"traceId":"72f6ba5e","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":166284900,"duration_ms":166,"resultData":{"latitude":37.55026146160737,"longitude":126.96797415901925,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":166181300,"addressApiResult":{"cached":false,"cacheKey":"address:37.55026146160737:126.96797415901925","roadAddress":"주소 없음","jibunAddress":"서울 용산구 청파동1가 1-2","responseSize":59,"executionTimeNs":79716400,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":32600,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.55026146160737:126.96797415901925:500","categoryCount":15,"placesByCategory":{"CT1":2,"AT4":0,"CS2":15,"SC4":3,"MT1":1,"BK9":15,"HP8":9,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":2,"PM9":5},"totalPlaces":115,"responseSize":13343,"executionTimeNs":86432300,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:40.612 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:40.612505Z","nanoTime":28006627341200,"traceId":"72f6ba5e","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:40.612 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:40.612 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:40.612 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 11개
2025-11-21 19:53:40.613 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 11개 (총 카메라 대수: 45대)
2025-11-21 19:53:40.613 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:40.682 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  다동길 11 (거리: 794m)
2025-11-21 19:53:40.682 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:40.682 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:40.682 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:53:40.682 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:40.682 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:40.682147400Z","nanoTime":28006696726000,"traceId":"72f6ba5e","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":69384800,"duration_ms":69,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":11,"totalCctvAfterFilter":11,"totalCameraCount":45,"filterRate":1.0,"filterExecutionTimeNs":12100,"success":true},"policeQuery":{"queryDurationNs":68685700,"found":true,"nearestAddress":"서울특별시 중구  다동길 11","nearestDistance":793.8589558195043,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":2,"CS2":15,"SC4":3,"MT1":1,"BK9":15,"HP8":9,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":2,"PM9":5},"placesAfterFilter":{"CT1":2,"CS2":15,"SC4":3,"MT1":1,"BK9":15,"HP8":9,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":2,"PM9":5},"totalBeforeFilter":115,"totalAfterFilter":115,"filterRate":1.0,"filterExecutionTimeNs":224600,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:40.682 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:40.682147400Z","nanoTime":28006697096800,"traceId":"72f6ba5e","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:40.682 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:40.682 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 14.90, 편의성: 33.13, 종합: 24.01
2025-11-21 19:53:40.682 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:40.682147400Z","nanoTime":28006697453400,"traceId":"72f6ba5e","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":356600,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":0.7676305225619586,"policeDistance":793.8589558195043,"cctvScore":36.666666666666664,"cctvCount":11,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":14.896955823435254,"success":true},"convenienceScore":{"categoryScores":{"CT1":8.0,"CS2":3.75,"SC4":6.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":6.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":40.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":33.125,"success":true},"overallScore":24.010977911717628,"errorMessage":null,"success":true}}
2025-11-21 19:53:40.682 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:40.682147400Z","nanoTime":28006697651100,"traceId":"72f6ba5e","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:40.682 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:40.682 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  다동길 11, latitude=37.556808, longitude=126.971567, geohashId=wydm9m1)
2025-11-21 19:53:40.683 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 793.8589558195043
2025-11-21 19:53:40.684 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm95z
2025-11-21 19:53:40.685 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:40.685 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:40.685411500Z","nanoTime":28006699225800,"traceId":"72f6ba5e","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1574700,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 58m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm95z","dataSize":16078,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":16078,"errorMessage":null,"success":true}}
2025-11-21 19:53:40.685 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:41.204 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:41.204 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.550710034994836, longitude=126.96152349425672, radius=500)
2025-11-21 19:53:41.204 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:41.204 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.550710034994836, longitude=126.96152349425672, radius=500
2025-11-21 19:53:41.204 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:41.204131400Z","nanoTime":28007218770300,"traceId":"67862a9e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:41.204 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:41.204 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.550710034994836, lon=126.96152349425672
2025-11-21 19:53:41.205 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:41.204131400Z","nanoTime":28007218881100,"traceId":"67862a9e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:41.205 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:41.205139400Z","nanoTime":28007218965300,"traceId":"67862a9e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":84200,"duration_ms":0,"resultData":{"latitude":37.550710034994836,"longitude":126.96152349425672,"precision":7,"centerHash":"wydm95f","adjacentHashes":["wydm95f","wydm9h4","wydm9h5","wydm95g","wydm95e","wydm95d","wydm959","wydm95c","wydm9h1"],"errorMessage":null,"success":true}}
2025-11-21 19:53:41.205 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm95f, wydm9h4, wydm9h5, wydm95g, wydm95e, wydm95d, wydm959, wydm95c, wydm9h1]
2025-11-21 19:53:41.205 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm95f
2025-11-21 19:53:41.205 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:41.205139400Z","nanoTime":28007219131700,"traceId":"67862a9e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":361400,"duration_ms":0,"resultData":{"requestLatitude":37.550710034994836,"requestLongitude":126.96152349425672,"requestRadius":500,"centerGeohashId":"wydm95f","nineBlockGeohashes":["wydm95f","wydm9h4","wydm9h5","wydm95g","wydm95e","wydm95d","wydm959","wydm95c","wydm9h1"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:41.205 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:41.205139400Z","nanoTime":28007219214200,"traceId":"67862a9e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:41.205 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:41.205 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm95f
2025-11-21 19:53:41.205 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.411ms)
2025-11-21 19:53:41.205 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:41.207 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:41.207 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:53:41.207 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.5532ms, 역직렬화: 0.0ms
2025-11-21 19:53:41.207 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:41.207 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:41.207062400Z","nanoTime":28007221460100,"traceId":"67862a9e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2245900,"duration_ms":2,"resultData":{"centerGeohashId":"wydm95f","nineBlockGeohashes":["wydm95f","wydm9h4","wydm9h5","wydm95g","wydm95e","wydm95d","wydm959","wydm95c","wydm9h1"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm95f","hit":false,"valueSize":0,"l1CacheGetDurationNs":411000,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm95f","cacheKey":"data:wydm95f:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":317900},{"geohashId":"wydm9h4","cacheKey":"data:wydm9h4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":169400},{"geohashId":"wydm9h5","cacheKey":"data:wydm9h5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":227700},{"geohashId":"wydm95g","cacheKey":"data:wydm95g:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":159000},{"geohashId":"wydm95e","cacheKey":"data:wydm95e:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":135500},{"geohashId":"wydm95d","cacheKey":"data:wydm95d:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":117000},{"geohashId":"wydm959","cacheKey":"data:wydm959:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":104500},{"geohashId":"wydm95c","cacheKey":"data:wydm95c:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":135200},{"geohashId":"wydm9h1","cacheKey":"data:wydm9h1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":103200}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1553200,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:53:41.207 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:41.207062400Z","nanoTime":28007221734700,"traceId":"67862a9e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:41.207 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:41.207 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:53:41.212 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 21건
2025-11-21 19:53:41.214 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:41.214 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:53:41.214 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:41.214060Z","nanoTime":28007228240800,"traceId":"67862a9e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6506100,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydm95f","wydm9h4","wydm9h5","wydm95g","wydm95e","wydm95d","wydm959","wydm95c","wydm9h1"],"cctvQueryResult":{"queryGeohashIds":["wydm95f","wydm9h4","wydm9h5","wydm95g","wydm95e","wydm95d","wydm959","wydm95c","wydm9h1"],"totalRowsReturned":21,"rowsPerGrid":{"wydm959":3,"wydm95g":3,"wydm9h1":1,"wydm9h5":3,"wydm9h4":2,"wydm95f":1,"wydm95e":2,"wydm95d":6},"queryExecutionTimeNs":4103900,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm959","cacheKey":"data:wydm959:cctv","dataCount":3,"dataSize":380,"errorMessage":null,"success":true},{"geohashId":"wydm95g","cacheKey":"data:wydm95g:cctv","dataCount":3,"dataSize":376,"errorMessage":null,"success":true},{"geohashId":"wydm9h1","cacheKey":"data:wydm9h1:cctv","dataCount":1,"dataSize":130,"errorMessage":null,"success":true},{"geohashId":"wydm9h5","cacheKey":"data:wydm9h5:cctv","dataCount":3,"dataSize":397,"errorMessage":null,"success":true},{"geohashId":"wydm9h4","cacheKey":"data:wydm9h4:cctv","dataCount":2,"dataSize":254,"errorMessage":null,"success":true},{"geohashId":"wydm95f","cacheKey":"data:wydm95f:cctv","dataCount":1,"dataSize":128,"errorMessage":null,"success":true},{"geohashId":"wydm95e","cacheKey":"data:wydm95e:cctv","dataCount":2,"dataSize":254,"errorMessage":null,"success":true},{"geohashId":"wydm95d","cacheKey":"data:wydm95d:cctv","dataCount":6,"dataSize":763,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:41.214 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:41.214555400Z","nanoTime":28007228559000,"traceId":"67862a9e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:41.214 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:41.214 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.550710034994836, 126.96152349425672)
2025-11-21 19:53:41.214 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:41.319 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:41.319 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:41.319 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:41.321 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.550710034994836, 126.96152349425672), 반경: 500m
2025-11-21 19:53:41.397 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:41.397 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 117건
2025-11-21 19:53:41.398 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:41.398 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:41.398 [http-nio-8185-exec-6] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:53:41.398 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:41.398 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:41.398 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:41.398 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:53:41.398 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:41.398733300Z","nanoTime":28007413268800,"traceId":"67862a9e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":184709800,"duration_ms":184,"resultData":{"latitude":37.550710034994836,"longitude":126.96152349425672,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":184573900,"addressApiResult":{"cached":false,"cacheKey":"address:37.550710034994836:126.96152349425672","roadAddress":"주소 없음","jibunAddress":"서울 마포구 공덕동 1-5","responseSize":57,"executionTimeNs":105832200,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":53800,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.550710034994836:126.96152349425672:500","categoryCount":15,"placesByCategory":{"CT1":2,"AT4":0,"CS2":15,"SC4":6,"MT1":0,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":0,"PO3":2,"FD6":15,"PK6":10,"OL7":0,"PM9":8},"totalPlaces":117,"responseSize":13554,"executionTimeNs":78687900,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:41.399 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:41.398733300Z","nanoTime":28007413488900,"traceId":"67862a9e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:41.399 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:41.399 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:41.399 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 21개
2025-11-21 19:53:41.399 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 21개 (총 카메라 대수: 46대)
2025-11-21 19:53:41.399 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:41.468 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동대문구  회기로18길 2 (거리: 671m)
2025-11-21 19:53:41.468 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:41.468 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:41.468 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 11개 카테고리
2025-11-21 19:53:41.468 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:41.468 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:41.468654500Z","nanoTime":28007482982300,"traceId":"67862a9e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":69493400,"duration_ms":69,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":21,"totalCctvAfterFilter":21,"totalCameraCount":46,"filterRate":1.0,"filterExecutionTimeNs":15900,"success":true},"policeQuery":{"queryDurationNs":68977600,"found":true,"nearestAddress":"서울특별시 동대문구  회기로18길 2","nearestDistance":670.638473704572,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":2,"BK9":14,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SC4":6,"PO3":2,"FD6":15,"PK6":10,"PM9":8},"placesAfterFilter":{"CT1":2,"BK9":14,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SC4":6,"PO3":2,"FD6":15,"PK6":10,"PM9":8},"totalBeforeFilter":117,"totalAfterFilter":117,"filterRate":1.0,"filterExecutionTimeNs":129200,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:41.468 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:41.468654500Z","nanoTime":28007483162200,"traceId":"67862a9e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:41.468 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:41.468 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 32.85, 편의성: 32.16, 종합: 32.51
2025-11-21 19:53:41.469 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:41.468654500Z","nanoTime":28007483370600,"traceId":"67862a9e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":208400,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":16.1701907869285,"policeDistance":670.638473704572,"cctvScore":70.0,"cctvCount":21,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":32.85105723607855,"success":true},"convenienceScore":{"categoryScores":{"CT1":8.0,"BK9":70.0,"HP8":100.0,"CS2":3.75,"AC5":15.0,"CE7":30.0,"SC4":12.0,"PO3":6.0,"FD6":15.0,"PK6":30.0,"PM9":64.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":32.15909090909091,"success":true},"overallScore":32.50507407258473,"errorMessage":null,"success":true}}
2025-11-21 19:53:41.469 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:41.469660700Z","nanoTime":28007483518600,"traceId":"67862a9e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:41.469 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:41.469 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동대문구  회기로18길 2, latitude=37.551807, longitude=126.954043, geohashId=wydm8uj)
2025-11-21 19:53:41.469 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 670.638473704572
2025-11-21 19:53:41.470 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm95f
2025-11-21 19:53:41.470 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:41.472 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:41.470028300Z","nanoTime":28007485744800,"traceId":"67862a9e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":2226200,"duration_ms":2,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["문화시설이(가) 33m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm95f","dataSize":16730,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":16730,"errorMessage":null,"success":true}}
2025-11-21 19:53:41.472 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:41.990 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:41.991 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55141170648401, longitude=126.9582639167706, radius=500)
2025-11-21 19:53:41.991 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:41.991 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55141170648401, longitude=126.9582639167706, radius=500
2025-11-21 19:53:41.991 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:41.991497700Z","nanoTime":28008005371100,"traceId":"17ca8af2","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:41.991 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:41.991 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55141170648401, lon=126.9582639167706
2025-11-21 19:53:41.991 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:41.991497700Z","nanoTime":28008005512200,"traceId":"17ca8af2","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:41.991 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:41.991497700Z","nanoTime":28008005596900,"traceId":"17ca8af2","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":84700,"duration_ms":0,"resultData":{"latitude":37.55141170648401,"longitude":126.9582639167706,"precision":7,"centerHash":"wydm9h0","adjacentHashes":["wydm9h0","wydm9h2","wydm9h3","wydm9h1","wydm95c","wydm95b","wydm8gz","wydm8up","wydm8ur"],"errorMessage":null,"success":true}}
2025-11-21 19:53:41.991 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9h0, wydm9h2, wydm9h3, wydm9h1, wydm95c, wydm95b, wydm8gz, wydm8up, wydm8ur]
2025-11-21 19:53:41.991 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9h0
2025-11-21 19:53:41.991 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:41.991497700Z","nanoTime":28008005834900,"traceId":"17ca8af2","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":463800,"duration_ms":0,"resultData":{"requestLatitude":37.55141170648401,"requestLongitude":126.9582639167706,"requestRadius":500,"centerGeohashId":"wydm9h0","nineBlockGeohashes":["wydm9h0","wydm9h2","wydm9h3","wydm9h1","wydm95c","wydm95b","wydm8gz","wydm8up","wydm8ur"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:41.991 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:41.991497700Z","nanoTime":28008005949600,"traceId":"17ca8af2","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:41.991 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:41.992 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9h0
2025-11-21 19:53:41.993 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.6896ms)
2025-11-21 19:53:41.993 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:41.995 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:41.995 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 1개, 미스: 8개
2025-11-21 19:53:41.995 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.8676ms, 역직렬화: 0.1093ms
2025-11-21 19:53:41.995 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:41.995 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:41.995967500Z","nanoTime":28008010257900,"traceId":"17ca8af2","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":4308300,"duration_ms":4,"resultData":{"centerGeohashId":"wydm9h0","nineBlockGeohashes":["wydm9h0","wydm9h2","wydm9h3","wydm9h1","wydm95c","wydm95b","wydm8gz","wydm8up","wydm8ur"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9h0","hit":false,"valueSize":0,"l1CacheGetDurationNs":689600,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9h0","cacheKey":"data:wydm9h0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":288900},{"geohashId":"wydm9h2","cacheKey":"data:wydm9h2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":149900},{"geohashId":"wydm9h3","cacheKey":"data:wydm9h3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":121600},{"geohashId":"wydm9h1","cacheKey":"data:wydm9h1:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":130,"l2CacheGetDurationNs":400600},{"geohashId":"wydm95c","cacheKey":"data:wydm95c:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":135900},{"geohashId":"wydm95b","cacheKey":"data:wydm95b:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":116700},{"geohashId":"wydm8gz","cacheKey":"data:wydm8gz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":215400},{"geohashId":"wydm8up","cacheKey":"data:wydm8up:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":120900},{"geohashId":"wydm8ur","cacheKey":"data:wydm8ur:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":117200}],"l2TotalHits":1,"l2TotalMisses":8,"l2CacheTotalDurationNs":1867600,"l2JsonDeserializeTotalDurationNs":109300,"errorMessage":null,"success":true}}
2025-11-21 19:53:41.995 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:41.995967500Z","nanoTime":28008010522400,"traceId":"17ca8af2","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:41.995 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:41.995 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 8개
2025-11-21 19:53:42.001 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 12건
2025-11-21 19:53:42.004 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:42.004 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 7개
2025-11-21 19:53:42.005 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:42.004134200Z","nanoTime":28008018812700,"traceId":"17ca8af2","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":8290300,"duration_ms":8,"resultData":{"inputCctvMissGrids":["wydm9h0","wydm9h2","wydm9h3","wydm95c","wydm95b","wydm8gz","wydm8up","wydm8ur"],"cctvQueryResult":{"queryGeohashIds":["wydm9h0","wydm9h2","wydm9h3","wydm95c","wydm95b","wydm8gz","wydm8up","wydm8ur"],"totalRowsReturned":12,"rowsPerGrid":{"wydm8gz":2,"wydm9h0":1,"wydm95b":1,"wydm8ur":1,"wydm9h3":5,"wydm8up":2},"queryExecutionTimeNs":5014000,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm8gz","cacheKey":"data:wydm8gz:cctv","dataCount":2,"dataSize":254,"errorMessage":null,"success":true},{"geohashId":"wydm9h0","cacheKey":"data:wydm9h0:cctv","dataCount":1,"dataSize":132,"errorMessage":null,"success":true},{"geohashId":"wydm95b","cacheKey":"data:wydm95b:cctv","dataCount":1,"dataSize":127,"errorMessage":null,"success":true},{"geohashId":"wydm8ur","cacheKey":"data:wydm8ur:cctv","dataCount":1,"dataSize":127,"errorMessage":null,"success":true},{"geohashId":"wydm9h3","cacheKey":"data:wydm9h3:cctv","dataCount":5,"dataSize":636,"errorMessage":null,"success":true},{"geohashId":"wydm8up","cacheKey":"data:wydm8up:cctv","dataCount":2,"dataSize":261,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:42.005 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:42.005245800Z","nanoTime":28008019059000,"traceId":"17ca8af2","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:42.005 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:42.005 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.55141170648401, 126.9582639167706)
2025-11-21 19:53:42.005 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:42.078 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:42.078 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:42.079 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:42.079 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.55141170648401, 126.9582639167706), 반경: 500m
2025-11-21 19:53:42.165 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:42.165 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 132건
2025-11-21 19:53:42.166 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:42.166 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:42.166 [http-nio-8185-exec-7] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:53:42.166 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:42.166 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:42.166 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:42.166 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:53:42.166 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:42.166827600Z","nanoTime":28008181057400,"traceId":"17ca8af2","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":161998400,"duration_ms":161,"resultData":{"latitude":37.55141170648401,"longitude":126.9582639167706,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":161835800,"addressApiResult":{"cached":false,"cacheKey":"address:37.55141170648401:126.9582639167706","roadAddress":"주소 없음","jibunAddress":"서울 마포구 공덕동 45","responseSize":56,"executionTimeNs":74249800,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":53300,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.55141170648401:126.9582639167706:500","categoryCount":15,"placesByCategory":{"CT1":2,"AT4":0,"CS2":15,"SC4":3,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":7,"FD6":15,"PK6":15,"OL7":1,"PM9":12},"totalPlaces":132,"responseSize":15373,"executionTimeNs":87532700,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:42.166 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:42.166827600Z","nanoTime":28008181310600,"traceId":"17ca8af2","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:42.166 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:42.166 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:42.166 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 13개
2025-11-21 19:53:42.166 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 13개 (총 카메라 대수: 20대)
2025-11-21 19:53:42.166 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:42.233 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동대문구  회기로18길 2 (거리: 375m)
2025-11-21 19:53:42.238 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:42.238 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:42.238 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:53:42.238 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:42.238 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:42.238182100Z","nanoTime":28008252271700,"traceId":"17ca8af2","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":70961100,"duration_ms":70,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":13,"totalCctvAfterFilter":13,"totalCameraCount":20,"filterRate":1.0,"filterExecutionTimeNs":13600,"success":true},"policeQuery":{"queryDurationNs":70337700,"found":true,"nearestAddress":"서울특별시 동대문구  회기로18길 2","nearestDistance":374.68564391836884,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":2,"CS2":15,"SC4":3,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":7,"FD6":15,"PK6":15,"OL7":1,"PM9":12},"placesAfterFilter":{"CT1":2,"CS2":15,"SC4":3,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":7,"FD6":15,"PK6":15,"OL7":1,"PM9":12},"totalBeforeFilter":132,"totalAfterFilter":132,"filterRate":1.0,"filterExecutionTimeNs":193400,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:42.238 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:42.238182100Z","nanoTime":28008252525200,"traceId":"17ca8af2","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:42.238 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:42.238 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 33.28, 편의성: 37.84, 종합: 35.56
2025-11-21 19:53:42.239 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:42.238182100Z","nanoTime":28008252874400,"traceId":"17ca8af2","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":349200,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":53.16429451020389,"policeDistance":374.68564391836884,"cctvScore":43.333333333333336,"cctvCount":13,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":33.2826216863945,"success":true},"convenienceScore":{"categoryScores":{"CT1":8.0,"CS2":3.75,"SC4":6.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":21.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":96.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":37.839285714285715,"success":true},"overallScore":35.56095370034011,"errorMessage":null,"success":true}}
2025-11-21 19:53:42.239 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:42.239187300Z","nanoTime":28008253063400,"traceId":"17ca8af2","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:42.239 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:42.239 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동대문구  회기로18길 2, latitude=37.551807, longitude=126.954043, geohashId=wydm8uj)
2025-11-21 19:53:42.239 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 374.68564391836884
2025-11-21 19:53:42.240 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9h0
2025-11-21 19:53:42.240 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:42.240 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:42.240187Z","nanoTime":28008254242300,"traceId":"17ca8af2","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1178900,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["은행이(가) 58m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm9h0","dataSize":18115,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":18115,"errorMessage":null,"success":true}}
2025-11-21 19:53:42.240 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:42.661 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:42.661 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55331901143192, longitude=126.95095206268823, radius=500)
2025-11-21 19:53:42.661 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:42.661 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55331901143192, longitude=126.95095206268823, radius=500
2025-11-21 19:53:42.662 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:42.662073600Z","nanoTime":28008675835200,"traceId":"860e0a45","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:42.662 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:42.662 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55331901143192, lon=126.95095206268823
2025-11-21 19:53:42.662 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:42.662073600Z","nanoTime":28008675967200,"traceId":"860e0a45","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:42.662 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:42.662073600Z","nanoTime":28008676048200,"traceId":"860e0a45","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":81000,"duration_ms":0,"resultData":{"latitude":37.55331901143192,"longitude":126.95095206268823,"precision":7,"centerHash":"wydm8u6","adjacentHashes":["wydm8u6","wydm8ud","wydm8ue","wydm8u7","wydm8u5","wydm8u4","wydm8u1","wydm8u3","wydm8u9"],"errorMessage":null,"success":true}}
2025-11-21 19:53:42.662 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm8u6, wydm8ud, wydm8ue, wydm8u7, wydm8u5, wydm8u4, wydm8u1, wydm8u3, wydm8u9]
2025-11-21 19:53:42.662 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm8u6
2025-11-21 19:53:42.662 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:42.662073600Z","nanoTime":28008676201700,"traceId":"860e0a45","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":366500,"duration_ms":0,"resultData":{"requestLatitude":37.55331901143192,"requestLongitude":126.95095206268823,"requestRadius":500,"centerGeohashId":"wydm8u6","nineBlockGeohashes":["wydm8u6","wydm8ud","wydm8ue","wydm8u7","wydm8u5","wydm8u4","wydm8u1","wydm8u3","wydm8u9"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:42.662 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:42.662073600Z","nanoTime":28008676281000,"traceId":"860e0a45","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:42.662 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:42.662 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm8u6
2025-11-21 19:53:42.662 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3229ms)
2025-11-21 19:53:42.662 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:42.664 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:42.664 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:53:42.664 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.2043ms, 역직렬화: 0.0ms
2025-11-21 19:53:42.664 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:42.664 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:42.664079Z","nanoTime":28008678050200,"traceId":"860e0a45","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1769200,"duration_ms":1,"resultData":{"centerGeohashId":"wydm8u6","nineBlockGeohashes":["wydm8u6","wydm8ud","wydm8ue","wydm8u7","wydm8u5","wydm8u4","wydm8u1","wydm8u3","wydm8u9"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm8u6","hit":false,"valueSize":0,"l1CacheGetDurationNs":322900,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm8u6","cacheKey":"data:wydm8u6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":236800},{"geohashId":"wydm8ud","cacheKey":"data:wydm8ud:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":192400},{"geohashId":"wydm8ue","cacheKey":"data:wydm8ue:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":136300},{"geohashId":"wydm8u7","cacheKey":"data:wydm8u7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":105500},{"geohashId":"wydm8u5","cacheKey":"data:wydm8u5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":101100},{"geohashId":"wydm8u4","cacheKey":"data:wydm8u4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":87200},{"geohashId":"wydm8u1","cacheKey":"data:wydm8u1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":87300},{"geohashId":"wydm8u3","cacheKey":"data:wydm8u3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":82100},{"geohashId":"wydm8u9","cacheKey":"data:wydm8u9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":110600}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1204300,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:53:42.664 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:42.664079Z","nanoTime":28008678249800,"traceId":"860e0a45","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:42.664 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:42.664 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:53:42.668 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 15건
2025-11-21 19:53:42.669 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:42.669 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 6개
2025-11-21 19:53:42.669 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:42.669364100Z","nanoTime":28008683712200,"traceId":"860e0a45","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5462400,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydm8u6","wydm8ud","wydm8ue","wydm8u7","wydm8u5","wydm8u4","wydm8u1","wydm8u3","wydm8u9"],"cctvQueryResult":{"queryGeohashIds":["wydm8u6","wydm8ud","wydm8ue","wydm8u7","wydm8u5","wydm8u4","wydm8u1","wydm8u3","wydm8u9"],"totalRowsReturned":15,"rowsPerGrid":{"wydm8u9":1,"wydm8u3":3,"wydm8u1":4,"wydm8u6":2,"wydm8u5":1,"wydm8u4":4},"queryExecutionTimeNs":3784900,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm8u9","cacheKey":"data:wydm8u9:cctv","dataCount":1,"dataSize":128,"errorMessage":null,"success":true},{"geohashId":"wydm8u3","cacheKey":"data:wydm8u3:cctv","dataCount":3,"dataSize":383,"errorMessage":null,"success":true},{"geohashId":"wydm8u1","cacheKey":"data:wydm8u1:cctv","dataCount":4,"dataSize":509,"errorMessage":null,"success":true},{"geohashId":"wydm8u6","cacheKey":"data:wydm8u6:cctv","dataCount":2,"dataSize":251,"errorMessage":null,"success":true},{"geohashId":"wydm8u5","cacheKey":"data:wydm8u5:cctv","dataCount":1,"dataSize":126,"errorMessage":null,"success":true},{"geohashId":"wydm8u4","cacheKey":"data:wydm8u4:cctv","dataCount":4,"dataSize":500,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:42.669 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:42.669364100Z","nanoTime":28008683909300,"traceId":"860e0a45","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:42.669 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:42.669 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.55331901143192, 126.95095206268823)
2025-11-21 19:53:42.669 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:42.754 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:42.754 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:42.754 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:42.754 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.55331901143192, 126.95095206268823), 반경: 500m
2025-11-21 19:53:42.842 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:42.842 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 122건
2025-11-21 19:53:42.844 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:42.844 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:42.844 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 마포구
2025-11-21 19:53:42.844 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 미스 - DB 조회
2025-11-21 19:53:42.847 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 성공 및 캐싱 완료 - 마포구: 0.738940531
2025-11-21 19:53:42.847 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:42.847 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:42.847 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:42.847 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.738940531
2025-11-21 19:53:42.847 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:42.847783700Z","nanoTime":28008862167300,"traceId":"860e0a45","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":178258000,"duration_ms":178,"resultData":{"latitude":37.55331901143192,"longitude":126.95095206268823,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":178120700,"addressApiResult":{"cached":false,"cacheKey":"address:37.55331901143192:126.95095206268823","roadAddress":"서울특별시 마포구 마포대로 195","jibunAddress":"서울 마포구 아현동 777","responseSize":70,"executionTimeNs":85118000,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":"arrest_rate:마포구","guName":"마포구","arrestRate":0.738940531,"dataFound":true,"executionTimeNs":4189500,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.55331901143192:126.95095206268823:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":1,"CS2":14,"SC4":3,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":0,"PO3":2,"FD6":15,"PK6":15,"OL7":0,"PM9":10},"totalPlaces":122,"responseSize":14272,"executionTimeNs":88813200,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:42.847 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:42.847783700Z","nanoTime":28008862490200,"traceId":"860e0a45","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:42.847 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:42.847 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:42.847 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 15개
2025-11-21 19:53:42.847 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 15개 (총 카메라 대수: 27대)
2025-11-21 19:53:42.847 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:42.917 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동대문구  회기로18길 2 (거리: 320m)
2025-11-21 19:53:42.919 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:42.919 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:42.919 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 12개 카테고리
2025-11-21 19:53:42.919 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:42.919 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:42.919360300Z","nanoTime":28008933421000,"traceId":"860e0a45","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":70930800,"duration_ms":70,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":15,"totalCctvAfterFilter":15,"totalCameraCount":27,"filterRate":1.0,"filterExecutionTimeNs":25400,"success":true},"policeQuery":{"queryDurationNs":70351600,"found":true,"nearestAddress":"서울특별시 동대문구  회기로18길 2","nearestDistance":320.1761699252101,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"AT4":1,"BK9":15,"HP8":15,"CS2":14,"AC5":15,"CE7":15,"SC4":3,"PO3":2,"FD6":15,"PK6":15,"MT1":2,"PM9":10},"placesAfterFilter":{"AT4":1,"BK9":15,"HP8":15,"CS2":14,"AC5":15,"CE7":15,"SC4":3,"PO3":2,"FD6":15,"PK6":15,"MT1":2,"PM9":10},"totalBeforeFilter":122,"totalAfterFilter":122,"filterRate":1.0,"filterExecutionTimeNs":154100,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:42.919 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:42.919360300Z","nanoTime":28008933631500,"traceId":"860e0a45","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:42.919 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:42.919 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 60.16, 편의성: 33.23, 종합: 46.70
2025-11-21 19:53:42.919 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:42.919360300Z","nanoTime":28008933944200,"traceId":"860e0a45","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":312700,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":59.97797875934874,"policeDistance":320.1761699252101,"cctvScore":50.0,"cctvCount":15,"arrestRateScore":73.89405310000001,"arrestRate":0.738940531,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":60.161609557804624,"success":true},"convenienceScore":{"categoryScores":{"AT4":3.0,"BK9":75.0,"HP8":100.0,"CS2":3.755918925807187,"AC5":15.0,"CE7":30.0,"SC4":6.0,"PO3":6.0,"FD6":15.0,"PK6":45.0,"MT1":20.0,"PM9":80.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"마포구","guPopulation":372745,"finalScore":33.22965991048393,"success":true},"overallScore":46.69563473414428,"errorMessage":null,"success":true}}
2025-11-21 19:53:42.920 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:42.919360300Z","nanoTime":28008934126300,"traceId":"860e0a45","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:42.920 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:42.920 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동대문구  회기로18길 2, latitude=37.551807, longitude=126.954043, geohashId=wydm8uj)
2025-11-21 19:53:42.920 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 320.1761699252101
2025-11-21 19:53:42.920 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm8u6
2025-11-21 19:53:42.920 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:42.920 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:42.920797400Z","nanoTime":28008935414200,"traceId":"860e0a45","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1287900,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["주차장이(가) 59m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydm8u6","dataSize":17052,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17052,"errorMessage":null,"success":true}}
2025-11-21 19:53:42.920 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:43.425 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:43.426 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.555339276853964, longitude=126.95611143589592, radius=500)
2025-11-21 19:53:43.426 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:43.426 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.555339276853964, longitude=126.95611143589592, radius=500
2025-11-21 19:53:43.426 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:43.426737Z","nanoTime":28009440650500,"traceId":"f0c57260","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:43.426 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:43.426 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.555339276853964, lon=126.95611143589592
2025-11-21 19:53:43.426 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:43.426737Z","nanoTime":28009440828200,"traceId":"f0c57260","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:43.426 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:43.426737Z","nanoTime":28009440917700,"traceId":"f0c57260","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":89500,"duration_ms":0,"resultData":{"latitude":37.555339276853964,"longitude":126.95611143589592,"precision":7,"centerHash":"wydm8uw","adjacentHashes":["wydm8uw","wydm8uy","wydm8uz","wydm8ux","wydm8ur","wydm8uq","wydm8um","wydm8ut","wydm8uv"],"errorMessage":null,"success":true}}
2025-11-21 19:53:43.426 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm8uw, wydm8uy, wydm8uz, wydm8ux, wydm8ur, wydm8uq, wydm8um, wydm8ut, wydm8uv]
2025-11-21 19:53:43.426 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm8uw
2025-11-21 19:53:43.426 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:43.426737Z","nanoTime":28009441032900,"traceId":"f0c57260","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":382400,"duration_ms":0,"resultData":{"requestLatitude":37.555339276853964,"requestLongitude":126.95611143589592,"requestRadius":500,"centerGeohashId":"wydm8uw","nineBlockGeohashes":["wydm8uw","wydm8uy","wydm8uz","wydm8ux","wydm8ur","wydm8uq","wydm8um","wydm8ut","wydm8uv"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:43.426 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:43.426737Z","nanoTime":28009441090000,"traceId":"f0c57260","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:43.426 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:43.426 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm8uw
2025-11-21 19:53:43.427 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3668ms)
2025-11-21 19:53:43.427 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:43.429 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:43.429 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 1개, 미스: 8개
2025-11-21 19:53:43.429 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.2137ms, 역직렬화: 0.1063ms
2025-11-21 19:53:43.429 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:43.430 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:43.429298800Z","nanoTime":28009443990400,"traceId":"f0c57260","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2900400,"duration_ms":2,"resultData":{"centerGeohashId":"wydm8uw","nineBlockGeohashes":["wydm8uw","wydm8uy","wydm8uz","wydm8ux","wydm8ur","wydm8uq","wydm8um","wydm8ut","wydm8uv"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm8uw","hit":false,"valueSize":0,"l1CacheGetDurationNs":366800,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm8uw","cacheKey":"data:wydm8uw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":307500},{"geohashId":"wydm8uy","cacheKey":"data:wydm8uy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":184300},{"geohashId":"wydm8uz","cacheKey":"data:wydm8uz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":196400},{"geohashId":"wydm8ux","cacheKey":"data:wydm8ux:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":196500},{"geohashId":"wydm8ur","cacheKey":"data:wydm8ur:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":127,"l2CacheGetDurationNs":402400},{"geohashId":"wydm8uq","cacheKey":"data:wydm8uq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":196400},{"geohashId":"wydm8um","cacheKey":"data:wydm8um:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":177400},{"geohashId":"wydm8ut","cacheKey":"data:wydm8ut:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":164900},{"geohashId":"wydm8uv","cacheKey":"data:wydm8uv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":191800}],"l2TotalHits":1,"l2TotalMisses":8,"l2CacheTotalDurationNs":2213700,"l2JsonDeserializeTotalDurationNs":106300,"errorMessage":null,"success":true}}
2025-11-21 19:53:43.430 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:43.430401700Z","nanoTime":28009444263900,"traceId":"f0c57260","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:43.430 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:43.430 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 8개
2025-11-21 19:53:43.434 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 14건
2025-11-21 19:53:43.435 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:43.435 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 6개
2025-11-21 19:53:43.436 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:43.435109100Z","nanoTime":28009449750100,"traceId":"f0c57260","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5486200,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydm8uw","wydm8uy","wydm8uz","wydm8ux","wydm8uq","wydm8um","wydm8ut","wydm8uv"],"cctvQueryResult":{"queryGeohashIds":["wydm8uw","wydm8uy","wydm8uz","wydm8ux","wydm8uq","wydm8um","wydm8ut","wydm8uv"],"totalRowsReturned":14,"rowsPerGrid":{"wydm8uy":2,"wydm8ux":1,"wydm8uq":1,"wydm8uw":5,"wydm8uv":5},"queryExecutionTimeNs":3853700,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm8uy","cacheKey":"data:wydm8uy:cctv","dataCount":2,"dataSize":255,"errorMessage":null,"success":true},{"geohashId":"wydm8ux","cacheKey":"data:wydm8ux:cctv","dataCount":1,"dataSize":127,"errorMessage":null,"success":true},{"geohashId":"wydm8uq","cacheKey":"data:wydm8uq:cctv","dataCount":1,"dataSize":129,"errorMessage":null,"success":true},{"geohashId":"wydm8uw","cacheKey":"data:wydm8uw:cctv","dataCount":5,"dataSize":637,"errorMessage":null,"success":true},{"geohashId":"wydm8uv","cacheKey":"data:wydm8uv:cctv","dataCount":5,"dataSize":641,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:43.436 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:43.436132700Z","nanoTime":28009450154300,"traceId":"f0c57260","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:43.436 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:43.436 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.555339276853964, 126.95611143589592)
2025-11-21 19:53:43.436 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:43.531 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:43.531 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:43.532 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:43.532 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.555339276853964, 126.95611143589592), 반경: 500m
2025-11-21 19:53:43.617 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:43.617 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 129건
2025-11-21 19:53:43.619 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:43.619 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:43.619 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 마포구
2025-11-21 19:53:43.620 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 마포구
2025-11-21 19:53:43.620 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:43.620 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:43.620 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:43.620 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.738940531
2025-11-21 19:53:43.620 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:43.620656900Z","nanoTime":28009634982900,"traceId":"f0c57260","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":184828600,"duration_ms":184,"resultData":{"latitude":37.555339276853964,"longitude":126.95611143589592,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":184575900,"addressApiResult":{"cached":false,"cacheKey":"address:37.555339276853964:126.95611143589592","roadAddress":"서울특별시 마포구 굴레방로 6","jibunAddress":"서울 마포구 아현동 267-3","responseSize":70,"executionTimeNs":95641800,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:마포구","guName":"마포구","arrestRate":0.738940531,"dataFound":true,"executionTimeNs":826400,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.555339276853964:126.95611143589592:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":1,"CS2":15,"SC4":3,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":2,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":129,"responseSize":14991,"executionTimeNs":88107700,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:43.620 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:43.620656900Z","nanoTime":28009635311300,"traceId":"f0c57260","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:43.620 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:43.620 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:43.620 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 15개
2025-11-21 19:53:43.621 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 15개 (총 카메라 대수: 34대)
2025-11-21 19:53:43.621 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:43.689 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동대문구  회기로18길 2 (거리: 433m)
2025-11-21 19:53:43.689 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:43.689 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:43.689 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 19:53:43.690 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:43.690 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:43.690831900Z","nanoTime":28009704630900,"traceId":"f0c57260","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":69319600,"duration_ms":69,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":15,"totalCctvAfterFilter":15,"totalCameraCount":34,"filterRate":1.0,"filterExecutionTimeNs":128700,"success":true},"policeQuery":{"queryDurationNs":68603500,"found":true,"nearestAddress":"서울특별시 동대문구  회기로18길 2","nearestDistance":433.0324690612205,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"AT4":1,"CS2":15,"SC4":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":2,"FD6":15,"PK6":15,"PM9":15},"placesAfterFilter":{"CT1":1,"AT4":1,"CS2":15,"SC4":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":2,"FD6":15,"PK6":15,"PM9":15},"totalBeforeFilter":129,"totalAfterFilter":129,"filterRate":1.0,"filterExecutionTimeNs":175200,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:43.691 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:43.691156700Z","nanoTime":28009704971900,"traceId":"f0c57260","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:43.691 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:43.691 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 55.93, 편의성: 38.69, 종합: 47.31
2025-11-21 19:53:43.691 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:43.691156700Z","nanoTime":28009705260900,"traceId":"f0c57260","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":289000,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":45.870941367347434,"policeDistance":433.0324690612205,"cctvScore":50.0,"cctvCount":15,"arrestRateScore":73.89405310000001,"arrestRate":0.738940531,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":55.92949834020423,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"AT4":3.0,"CS2":4.024198849079129,"SC4":6.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":6.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"마포구","guPopulation":372745,"finalScore":38.69416914223686,"success":true},"overallScore":47.311833741220546,"errorMessage":null,"success":true}}
2025-11-21 19:53:43.691 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:43.691156700Z","nanoTime":28009705486500,"traceId":"f0c57260","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:43.691 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:43.691 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동대문구  회기로18길 2, latitude=37.551807, longitude=126.954043, geohashId=wydm8uj)
2025-11-21 19:53:43.691 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 433.0324690612205
2025-11-21 19:53:43.691 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm8uw
2025-11-21 19:53:43.691 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:43.693 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:43.691156700Z","nanoTime":28009706862900,"traceId":"f0c57260","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1376400,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["음식점이(가) 40m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydm8uw","dataSize":17742,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17742,"errorMessage":null,"success":true}}
2025-11-21 19:53:43.693 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:44.135 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:44.136 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55727000009665, longitude=126.96373837323635, radius=500)
2025-11-21 19:53:44.136 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:44.136 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55727000009665, longitude=126.96373837323635, radius=500
2025-11-21 19:53:44.136 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:44.136618400Z","nanoTime":28010150556500,"traceId":"36b50812","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:44.136 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:44.136 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55727000009665, lon=126.96373837323635
2025-11-21 19:53:44.136 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:44.136618400Z","nanoTime":28010150668300,"traceId":"36b50812","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:44.136 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:44.136618400Z","nanoTime":28010150746600,"traceId":"36b50812","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":78300,"duration_ms":0,"resultData":{"latitude":37.55727000009665,"longitude":126.96373837323635,"precision":7,"centerHash":"wydm9jh","adjacentHashes":["wydm9jh","wydm9jk","wydm9jm","wydm9jj","wydm9hv","wydm9hu","wydm9hg","wydm9j5","wydm9j7"],"errorMessage":null,"success":true}}
2025-11-21 19:53:44.136 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9jh, wydm9jk, wydm9jm, wydm9jj, wydm9hv, wydm9hu, wydm9hg, wydm9j5, wydm9j7]
2025-11-21 19:53:44.137 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9jh
2025-11-21 19:53:44.137 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:44.137111400Z","nanoTime":28010150899200,"traceId":"36b50812","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":342700,"duration_ms":0,"resultData":{"requestLatitude":37.55727000009665,"requestLongitude":126.96373837323635,"requestRadius":500,"centerGeohashId":"wydm9jh","nineBlockGeohashes":["wydm9jh","wydm9jk","wydm9jm","wydm9jj","wydm9hv","wydm9hu","wydm9hg","wydm9j5","wydm9j7"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:44.137 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:44.137111400Z","nanoTime":28010150962200,"traceId":"36b50812","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:44.137 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:44.137 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9jh
2025-11-21 19:53:44.137 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4405ms)
2025-11-21 19:53:44.137 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:44.140 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:44.140 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 4개, 미스: 5개
2025-11-21 19:53:44.140 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 3.2911ms, 역직렬화: 0.3864ms
2025-11-21 19:53:44.140 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:44.140 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:44.140550800Z","nanoTime":28010155034500,"traceId":"36b50812","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":4072300,"duration_ms":4,"resultData":{"centerGeohashId":"wydm9jh","nineBlockGeohashes":["wydm9jh","wydm9jk","wydm9jm","wydm9jj","wydm9hv","wydm9hu","wydm9hg","wydm9j5","wydm9j7"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9jh","hit":false,"valueSize":0,"l1CacheGetDurationNs":440500,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9jh","cacheKey":"data:wydm9jh:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":257,"l2CacheGetDurationNs":583500},{"geohashId":"wydm9jk","cacheKey":"data:wydm9jk:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":517,"l2CacheGetDurationNs":477900},{"geohashId":"wydm9jm","cacheKey":"data:wydm9jm:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":181000},{"geohashId":"wydm9jj","cacheKey":"data:wydm9jj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":194500},{"geohashId":"wydm9hv","cacheKey":"data:wydm9hv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":113100},{"geohashId":"wydm9hu","cacheKey":"data:wydm9hu:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":119100},{"geohashId":"wydm9hg","cacheKey":"data:wydm9hg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":80600},{"geohashId":"wydm9j5","cacheKey":"data:wydm9j5:cctv","hit":true,"dataType":"cctv","dataCount":7,"dataSize":897,"l2CacheGetDurationNs":432900},{"geohashId":"wydm9j7","cacheKey":"data:wydm9j7:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":389,"l2CacheGetDurationNs":606000}],"l2TotalHits":4,"l2TotalMisses":5,"l2CacheTotalDurationNs":3291100,"l2JsonDeserializeTotalDurationNs":386400,"errorMessage":null,"success":true}}
2025-11-21 19:53:44.140 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:44.140550800Z","nanoTime":28010155243500,"traceId":"36b50812","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:44.140 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:44.140 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 5개
2025-11-21 19:53:44.145 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 21건
2025-11-21 19:53:44.147 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:44.147 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:53:44.147 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:44.147300500Z","nanoTime":28010161352800,"traceId":"36b50812","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6109300,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydm9jm","wydm9jj","wydm9hv","wydm9hu","wydm9hg"],"cctvQueryResult":{"queryGeohashIds":["wydm9jm","wydm9jj","wydm9hv","wydm9hu","wydm9hg"],"totalRowsReturned":21,"rowsPerGrid":{"wydm9jm":4,"wydm9hu":5,"wydm9jj":4,"wydm9hg":3,"wydm9hv":5},"queryExecutionTimeNs":3844600,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9jm","cacheKey":"data:wydm9jm:cctv","dataCount":4,"dataSize":511,"errorMessage":null,"success":true},{"geohashId":"wydm9hu","cacheKey":"data:wydm9hu:cctv","dataCount":5,"dataSize":642,"errorMessage":null,"success":true},{"geohashId":"wydm9jj","cacheKey":"data:wydm9jj:cctv","dataCount":4,"dataSize":521,"errorMessage":null,"success":true},{"geohashId":"wydm9hg","cacheKey":"data:wydm9hg:cctv","dataCount":3,"dataSize":379,"errorMessage":null,"success":true},{"geohashId":"wydm9hv","cacheKey":"data:wydm9hv:cctv","dataCount":5,"dataSize":650,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:44.147 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:44.147300500Z","nanoTime":28010161529300,"traceId":"36b50812","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:44.147 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:44.147 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.55727000009665, 126.96373837323635)
2025-11-21 19:53:44.148 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:44.252 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:44.252 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:44.252 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:44.252 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.55727000009665, 126.96373837323635), 반경: 500m
2025-11-21 19:53:44.347 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:44.347 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 130건
2025-11-21 19:53:44.349 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:44.349 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:44.349 [http-nio-8185-exec-10] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:53:44.349 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:44.349 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:44.349 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:44.349 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:53:44.349 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:44.349072700Z","nanoTime":28010363501400,"traceId":"36b50812","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":201972100,"duration_ms":201,"resultData":{"latitude":37.55727000009665,"longitude":126.96373837323635,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":201801700,"addressApiResult":{"cached":false,"cacheKey":"address:37.55727000009665:126.96373837323635","roadAddress":"주소 없음","jibunAddress":"서울 중구 중림동 1046","responseSize":57,"executionTimeNs":106322700,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":69300,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.55727000009665:126.96373837323635:500","categoryCount":15,"placesByCategory":{"CT1":6,"AT4":4,"CS2":15,"SC4":4,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":5,"FD6":15,"PK6":15,"OL7":0,"PM9":3},"totalPlaces":130,"responseSize":15128,"executionTimeNs":95409700,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:44.349 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:44.349891200Z","nanoTime":28010363801100,"traceId":"36b50812","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:44.349 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:44.349 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:44.349 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 37개
2025-11-21 19:53:44.349 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 37개 (총 카메라 대수: 114대)
2025-11-21 19:53:44.349 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:44.420 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  남대문시장4길 28-16 (거리: 306m)
2025-11-21 19:53:44.420 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:44.420 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:44.420 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:53:44.420 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:44.420 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:44.420496200Z","nanoTime":28010435700800,"traceId":"36b50812","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":71899700,"duration_ms":71,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":37,"totalCctvAfterFilter":37,"totalCameraCount":114,"filterRate":1.0,"filterExecutionTimeNs":22300,"success":true},"policeQuery":{"queryDurationNs":71328600,"found":true,"nearestAddress":"서울특별시 중구  남대문시장4길 28-16","nearestDistance":305.9905957109867,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":6,"AT4":4,"CS2":15,"SC4":4,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":5,"FD6":15,"PK6":15,"PM9":3},"placesAfterFilter":{"CT1":6,"AT4":4,"CS2":15,"SC4":4,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":5,"FD6":15,"PK6":15,"PM9":3},"totalBeforeFilter":130,"totalAfterFilter":130,"filterRate":1.0,"filterExecutionTimeNs":157800,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:44.420 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:44.420496200Z","nanoTime":28010435891700,"traceId":"36b50812","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:44.420 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:44.420 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 58.53, 편의성: 34.05, 종합: 46.29
2025-11-21 19:53:44.422 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:44.422505300Z","nanoTime":28010436274900,"traceId":"36b50812","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":383200,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":61.75117553612666,"policeDistance":305.9905957109867,"cctvScore":100.0,"cctvCount":37,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":58.525352660837996,"success":true},"convenienceScore":{"categoryScores":{"CT1":24.0,"AT4":12.0,"CS2":3.75,"SC4":8.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":15.0,"FD6":15.0,"PK6":45.0,"PM9":24.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":34.05357142857143,"success":true},"overallScore":46.28946204470471,"errorMessage":null,"success":true}}
2025-11-21 19:53:44.422 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:44.422505300Z","nanoTime":28010436505600,"traceId":"36b50812","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:44.422 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:44.422 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  남대문시장4길 28-16, latitude=37.557888, longitude=126.967121, geohashId=wydm9jn)
2025-11-21 19:53:44.422 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 305.9905957109867
2025-11-21 19:53:44.422 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9jh
2025-11-21 19:53:44.424 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:44.424 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:44.424521300Z","nanoTime":28010438472100,"traceId":"36b50812","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1966500,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["학교이(가) 89m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm9jh","dataSize":20428,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20428,"errorMessage":null,"success":true}}
2025-11-21 19:53:44.424 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:44.858 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:44.858 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.560297356812335, longitude=126.9637595422581, radius=500)
2025-11-21 19:53:44.858 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:44.858 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.560297356812335, longitude=126.9637595422581, radius=500
2025-11-21 19:53:44.858 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:44.858440800Z","nanoTime":28010872922500,"traceId":"3e026ff6","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:44.858 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:44.858 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.560297356812335, lon=126.9637595422581
2025-11-21 19:53:44.858 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:44.858440800Z","nanoTime":28010873054500,"traceId":"3e026ff6","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:44.859 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:44.859373700Z","nanoTime":28010873134900,"traceId":"3e026ff6","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":80400,"duration_ms":0,"resultData":{"latitude":37.560297356812335,"longitude":126.9637595422581,"precision":7,"centerHash":"wydm9js","adjacentHashes":["wydm9js","wydm9ju","wydm9jv","wydm9jt","wydm9jm","wydm9jk","wydm9j7","wydm9je","wydm9jg"],"errorMessage":null,"success":true}}
2025-11-21 19:53:44.859 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9js, wydm9ju, wydm9jv, wydm9jt, wydm9jm, wydm9jk, wydm9j7, wydm9je, wydm9jg]
2025-11-21 19:53:44.859 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9js
2025-11-21 19:53:44.859 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:44.859373700Z","nanoTime":28010873335700,"traceId":"3e026ff6","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":413200,"duration_ms":0,"resultData":{"requestLatitude":37.560297356812335,"requestLongitude":126.9637595422581,"requestRadius":500,"centerGeohashId":"wydm9js","nineBlockGeohashes":["wydm9js","wydm9ju","wydm9jv","wydm9jt","wydm9jm","wydm9jk","wydm9j7","wydm9je","wydm9jg"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:44.859 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:44.859373700Z","nanoTime":28010873434800,"traceId":"3e026ff6","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:44.859 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:44.859 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9js
2025-11-21 19:53:44.859 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4994ms)
2025-11-21 19:53:44.859 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:44.863 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:44.863 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 5개, 미스: 4개
2025-11-21 19:53:44.863 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 3.5339ms, 역직렬화: 0.4535ms
2025-11-21 19:53:44.863 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:44.864 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:44.864056700Z","nanoTime":28010877816200,"traceId":"3e026ff6","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":4381400,"duration_ms":4,"resultData":{"centerGeohashId":"wydm9js","nineBlockGeohashes":["wydm9js","wydm9ju","wydm9jv","wydm9jt","wydm9jm","wydm9jk","wydm9j7","wydm9je","wydm9jg"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9js","hit":false,"valueSize":0,"l1CacheGetDurationNs":499400,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9js","cacheKey":"data:wydm9js:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":205,"l2CacheGetDurationNs":957400},{"geohashId":"wydm9ju","cacheKey":"data:wydm9ju:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":212400},{"geohashId":"wydm9jv","cacheKey":"data:wydm9jv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":166800},{"geohashId":"wydm9jt","cacheKey":"data:wydm9jt:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":142200},{"geohashId":"wydm9jm","cacheKey":"data:wydm9jm:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":511,"l2CacheGetDurationNs":483600},{"geohashId":"wydm9jk","cacheKey":"data:wydm9jk:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":517,"l2CacheGetDurationNs":333600},{"geohashId":"wydm9j7","cacheKey":"data:wydm9j7:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":389,"l2CacheGetDurationNs":260200},{"geohashId":"wydm9je","cacheKey":"data:wydm9je:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":205,"l2CacheGetDurationNs":242400},{"geohashId":"wydm9jg","cacheKey":"data:wydm9jg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":86900}],"l2TotalHits":5,"l2TotalMisses":4,"l2CacheTotalDurationNs":3533900,"l2JsonDeserializeTotalDurationNs":453500,"errorMessage":null,"success":true}}
2025-11-21 19:53:44.864 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:44.864056700Z","nanoTime":28010878089900,"traceId":"3e026ff6","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:44.864 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:44.864 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 4개
2025-11-21 19:53:44.866 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 1건
2025-11-21 19:53:44.867 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:44.867 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 6개
2025-11-21 19:53:44.867 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:44.867451800Z","nanoTime":28010881483100,"traceId":"3e026ff6","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":3393200,"duration_ms":3,"resultData":{"inputCctvMissGrids":["wydm9ju","wydm9jv","wydm9jt","wydm9jg"],"cctvQueryResult":{"queryGeohashIds":["wydm9ju","wydm9jv","wydm9jt","wydm9jg"],"totalRowsReturned":1,"rowsPerGrid":{"wydm9jt":1},"queryExecutionTimeNs":2631100,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9jt","cacheKey":"data:wydm9jt:cctv","dataCount":1,"dataSize":128,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:44.867 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:44.867451800Z","nanoTime":28010881703100,"traceId":"3e026ff6","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:44.867 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:44.867 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.560297356812335, 126.9637595422581)
2025-11-21 19:53:44.867 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:44.934 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:44.934 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:44.934 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:44.936 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.560297356812335, 126.9637595422581), 반경: 500m
2025-11-21 19:53:45.038 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:45.038 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 127건
2025-11-21 19:53:45.038 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:45.038 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:45.038 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 서대문구
2025-11-21 19:53:45.038 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 미스 - DB 조회
2025-11-21 19:53:45.045 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 성공 및 캐싱 완료 - 서대문구: 0.700053502
2025-11-21 19:53:45.045 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:45.045 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:45.045 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:45.045 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.700053502
2025-11-21 19:53:45.045 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:45.045489100Z","nanoTime":28011060121100,"traceId":"3e026ff6","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":178418000,"duration_ms":178,"resultData":{"latitude":37.560297356812335,"longitude":126.9637595422581,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":178286100,"addressApiResult":{"cached":false,"cacheKey":"address:37.560297356812335:126.9637595422581","roadAddress":"서울특별시 서대문구 충정로4길 22-15","jibunAddress":"서울 서대문구 충정로3가 360-12","responseSize":80,"executionTimeNs":67870500,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":"arrest_rate:서대문구","guName":"서대문구","arrestRate":0.700053502,"dataFound":true,"executionTimeNs":5765800,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.560297356812335:126.9637595422581:500","categoryCount":15,"placesByCategory":{"CT1":7,"AT4":3,"CS2":15,"SC4":3,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":5,"FD6":15,"PK6":15,"OL7":0,"PM9":2},"totalPlaces":127,"responseSize":14791,"executionTimeNs":104649800,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:45.045 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:45.045489100Z","nanoTime":28011060291900,"traceId":"3e026ff6","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:45.045 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:45.045 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:45.045 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 16개
2025-11-21 19:53:45.045 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 16개 (총 카메라 대수: 34대)
2025-11-21 19:53:45.045 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:45.113 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  남대문시장4길 28-16 (거리: 399m)
2025-11-21 19:53:45.113 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:45.113 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:45.113 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 19:53:45.113 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:45.114 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:45.113276500Z","nanoTime":28011127978100,"traceId":"3e026ff6","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":67686200,"duration_ms":67,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":16,"totalCctvAfterFilter":16,"totalCameraCount":34,"filterRate":1.0,"filterExecutionTimeNs":8800,"success":true},"policeQuery":{"queryDurationNs":67221000,"found":true,"nearestAddress":"서울특별시 중구  남대문시장4길 28-16","nearestDistance":399.46209444023475,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":7,"AT4":3,"CS2":15,"SC4":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":5,"FD6":15,"PK6":15,"PM9":2},"placesAfterFilter":{"CT1":7,"AT4":3,"CS2":15,"SC4":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":5,"FD6":15,"PK6":15,"PM9":2},"totalBeforeFilter":127,"totalAfterFilter":127,"filterRate":1.0,"filterExecutionTimeNs":148800,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:45.114 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:45.114285500Z","nanoTime":28011128190500,"traceId":"3e026ff6","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:45.114 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:45.114 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 57.36, 편의성: 35.29, 종합: 46.32
2025-11-21 19:53:45.114 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:45.114647600Z","nanoTime":28011128465000,"traceId":"3e026ff6","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":274500,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":50.067238194970656,"policeDistance":399.46209444023475,"cctvScore":53.333333333333336,"cctvCount":16,"arrestRateScore":70.00535020000001,"arrestRate":0.700053502,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":57.35510985182454,"success":true},"convenienceScore":{"categoryScores":{"CT1":28.0,"AT4":9.0,"CS2":4.707772846821626,"SC4":6.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":15.0,"FD6":15.0,"PK6":45.0,"PM9":16.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"서대문구","guPopulation":318622,"finalScore":35.28521329590936,"success":true},"overallScore":46.32016157386695,"errorMessage":null,"success":true}}
2025-11-21 19:53:45.114 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:45.114647600Z","nanoTime":28011128583500,"traceId":"3e026ff6","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:45.114 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:45.114 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  남대문시장4길 28-16, latitude=37.557888, longitude=126.967121, geohashId=wydm9jn)
2025-11-21 19:53:45.114 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 399.46209444023475
2025-11-21 19:53:45.114 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9js
2025-11-21 19:53:45.114 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:45.114 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:45.114647600Z","nanoTime":28011129695000,"traceId":"3e026ff6","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1111500,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["음식점이(가) 25m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydm9js","dataSize":17523,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17523,"errorMessage":null,"success":true}}
2025-11-21 19:53:45.114 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:46.162 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:46.162 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56431498042149, longitude=126.96117693784859, radius=500)
2025-11-21 19:53:46.162 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:46.162 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56431498042149, longitude=126.96117693784859, radius=500
2025-11-21 19:53:46.162 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:46.162054Z","nanoTime":28012176158000,"traceId":"b745e0d2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:46.162 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:46.162 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56431498042149, lon=126.96117693784859
2025-11-21 19:53:46.162 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:46.162054Z","nanoTime":28012176221800,"traceId":"b745e0d2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:46.162 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:46.162054Z","nanoTime":28012176267900,"traceId":"b745e0d2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":46100,"duration_ms":0,"resultData":{"latitude":37.56431498042149,"longitude":126.96117693784859,"precision":7,"centerHash":"wydm9n6","adjacentHashes":["wydm9n6","wydm9nd","wydm9ne","wydm9n7","wydm9n5","wydm9n4","wydm9n1","wydm9n3","wydm9n9"],"errorMessage":null,"success":true}}
2025-11-21 19:53:46.162 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9n6, wydm9nd, wydm9ne, wydm9n7, wydm9n5, wydm9n4, wydm9n1, wydm9n3, wydm9n9]
2025-11-21 19:53:46.162 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9n6
2025-11-21 19:53:46.162 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:46.162054Z","nanoTime":28012176385200,"traceId":"b745e0d2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":227200,"duration_ms":0,"resultData":{"requestLatitude":37.56431498042149,"requestLongitude":126.96117693784859,"requestRadius":500,"centerGeohashId":"wydm9n6","nineBlockGeohashes":["wydm9n6","wydm9nd","wydm9ne","wydm9n7","wydm9n5","wydm9n4","wydm9n1","wydm9n3","wydm9n9"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:46.162 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:46.162054Z","nanoTime":28012176463600,"traceId":"b745e0d2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:46.162 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:46.162 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9n6
2025-11-21 19:53:46.163 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4275ms)
2025-11-21 19:53:46.163 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:46.163 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:46.163 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:53:46.163 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.0121ms, 역직렬화: 0.0ms
2025-11-21 19:53:46.163 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:46.163 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:46.163966300Z","nanoTime":28012179136000,"traceId":"b745e0d2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2672400,"duration_ms":2,"resultData":{"centerGeohashId":"wydm9n6","nineBlockGeohashes":["wydm9n6","wydm9nd","wydm9ne","wydm9n7","wydm9n5","wydm9n4","wydm9n1","wydm9n3","wydm9n9"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9n6","hit":false,"valueSize":0,"l1CacheGetDurationNs":427500,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9n6","cacheKey":"data:wydm9n6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":246300},{"geohashId":"wydm9nd","cacheKey":"data:wydm9nd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":305400},{"geohashId":"wydm9ne","cacheKey":"data:wydm9ne:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":285400},{"geohashId":"wydm9n7","cacheKey":"data:wydm9n7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":145500},{"geohashId":"wydm9n5","cacheKey":"data:wydm9n5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":294000},{"geohashId":"wydm9n4","cacheKey":"data:wydm9n4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":215100},{"geohashId":"wydm9n1","cacheKey":"data:wydm9n1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":162800},{"geohashId":"wydm9n3","cacheKey":"data:wydm9n3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":144100},{"geohashId":"wydm9n9","cacheKey":"data:wydm9n9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":130900}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":2012100,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:53:46.163 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:46.163966300Z","nanoTime":28012179320000,"traceId":"b745e0d2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:46.163 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:46.163 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:53:46.168 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 10건
2025-11-21 19:53:46.169 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:46.169 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 7개
2025-11-21 19:53:46.170 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:46.170557900Z","nanoTime":28012184309800,"traceId":"b745e0d2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4989800,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydm9n6","wydm9nd","wydm9ne","wydm9n7","wydm9n5","wydm9n4","wydm9n1","wydm9n3","wydm9n9"],"cctvQueryResult":{"queryGeohashIds":["wydm9n6","wydm9nd","wydm9ne","wydm9n7","wydm9n5","wydm9n4","wydm9n1","wydm9n3","wydm9n9"],"totalRowsReturned":10,"rowsPerGrid":{"wydm9n3":2,"wydm9n1":1,"wydm9n7":1,"wydm9n6":1,"wydm9n5":1,"wydm9n4":3,"wydm9n9":1},"queryExecutionTimeNs":3721200,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9n3","cacheKey":"data:wydm9n3:cctv","dataCount":2,"dataSize":205,"errorMessage":null,"success":true},{"geohashId":"wydm9n1","cacheKey":"data:wydm9n1:cctv","dataCount":1,"dataSize":103,"errorMessage":null,"success":true},{"geohashId":"wydm9n7","cacheKey":"data:wydm9n7:cctv","dataCount":1,"dataSize":103,"errorMessage":null,"success":true},{"geohashId":"wydm9n6","cacheKey":"data:wydm9n6:cctv","dataCount":1,"dataSize":103,"errorMessage":null,"success":true},{"geohashId":"wydm9n5","cacheKey":"data:wydm9n5:cctv","dataCount":1,"dataSize":102,"errorMessage":null,"success":true},{"geohashId":"wydm9n4","cacheKey":"data:wydm9n4:cctv","dataCount":3,"dataSize":307,"errorMessage":null,"success":true},{"geohashId":"wydm9n9","cacheKey":"data:wydm9n9:cctv","dataCount":1,"dataSize":103,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:46.170 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:46.170557900Z","nanoTime":28012184461600,"traceId":"b745e0d2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:46.170 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:46.170 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56431498042149, 126.96117693784859)
2025-11-21 19:53:46.170 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:46.263 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:46.263 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:46.263 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:46.263 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56431498042149, 126.96117693784859), 반경: 500m
2025-11-21 19:53:46.350 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:46.350 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 125건
2025-11-21 19:53:46.352 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:46.352 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:46.352 [http-nio-8185-exec-3] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:53:46.352 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:46.352 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:46.352 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:46.352 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:53:46.352 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:46.352338600Z","nanoTime":28012366798100,"traceId":"b745e0d2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":182336500,"duration_ms":182,"resultData":{"latitude":37.56431498042149,"longitude":126.96117693784859,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":182195900,"addressApiResult":{"cached":false,"cacheKey":"address:37.56431498042149:126.96117693784859","roadAddress":"주소 없음","jibunAddress":"서울 서대문구 충정로3가 1-37","responseSize":61,"executionTimeNs":93816300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":47600,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56431498042149:126.96117693784859:500","categoryCount":15,"placesByCategory":{"CT1":5,"AT4":0,"CS2":15,"SC4":7,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":15,"OL7":0,"PM9":4},"totalPlaces":125,"responseSize":14553,"executionTimeNs":88332000,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:46.352 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:46.352338600Z","nanoTime":28012367095400,"traceId":"b745e0d2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:46.352 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:46.352 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:46.352 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 10개
2025-11-21 19:53:46.352 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 10개 (총 카메라 대수: 28대)
2025-11-21 19:53:46.352 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:46.427 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  서소문로 131-1 서소문파출소 (거리: 619m)
2025-11-21 19:53:46.427 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:46.427 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:46.427 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 12개 카테고리
2025-11-21 19:53:46.427 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:46.427 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:46.427516900Z","nanoTime":28012441684100,"traceId":"b745e0d2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":74588700,"duration_ms":74,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":10,"totalCctvAfterFilter":10,"totalCameraCount":28,"filterRate":1.0,"filterExecutionTimeNs":10100,"success":true},"policeQuery":{"queryDurationNs":74084300,"found":true,"nearestAddress":"서울특별시 중구  서소문로 131-1 서소문파출소","nearestDistance":619.3835548459848,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":5,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SC4":7,"SW8":1,"PO3":3,"FD6":15,"PK6":15,"PM9":4},"placesAfterFilter":{"CT1":5,"BK9":15,"HP8":15,"CS2":15,"AC5":14,"CE7":15,"SC4":7,"SW8":1,"PO3":3,"FD6":15,"PK6":15,"PM9":4},"totalBeforeFilter":125,"totalAfterFilter":124,"filterRate":0.992,"filterExecutionTimeNs":140400,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:46.428 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:46.428162300Z","nanoTime":28012441939500,"traceId":"b745e0d2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:46.428 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:46.428 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 20.11, 편의성: 38.15, 종합: 29.13
2025-11-21 19:53:46.428 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:46.428162300Z","nanoTime":28012442233600,"traceId":"b745e0d2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":294100,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":22.5770556442519,"policeDistance":619.3835548459848,"cctvScore":33.33333333333333,"cctvCount":10,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":20.1064500266089,"success":true},"convenienceScore":{"categoryScores":{"CT1":20.0,"BK9":75.0,"HP8":100.0,"CS2":3.75,"AC5":14.0,"CE7":30.0,"SC4":14.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":45.0,"PM9":32.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":38.145833333333336,"success":true},"overallScore":29.12614167997112,"errorMessage":null,"success":true}}
2025-11-21 19:53:46.428 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:46.428162300Z","nanoTime":28012442390000,"traceId":"b745e0d2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:46.428 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:46.428 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  서소문로 131-1 서소문파출소, latitude=37.569885, longitude=126.961113, geohashId=wydm9p6)
2025-11-21 19:53:46.428 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 619.3835548459848
2025-11-21 19:53:46.428 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9n6
2025-11-21 19:53:46.428 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:46.428 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:46.428162300Z","nanoTime":28012443646800,"traceId":"b745e0d2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1256800,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 31m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm9n6","dataSize":16313,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":16313,"errorMessage":null,"success":true}}
2025-11-21 19:53:46.428 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:46.911 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:46.911 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.564371966936086, longitude=126.97143163720008, radius=500)
2025-11-21 19:53:46.911 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:46.911 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.564371966936086, longitude=126.97143163720008, radius=500
2025-11-21 19:53:46.911 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:46.911683400Z","nanoTime":28012926356700,"traceId":"5ef93155","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:46.911 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:46.911 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.564371966936086, lon=126.97143163720008
2025-11-21 19:53:46.912 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:46.912666900Z","nanoTime":28012926429200,"traceId":"5ef93155","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:46.912 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:46.912666900Z","nanoTime":28012926478700,"traceId":"5ef93155","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":49500,"duration_ms":0,"resultData":{"latitude":37.564371966936086,"longitude":126.97143163720008,"precision":7,"centerHash":"wydm9q3","adjacentHashes":["wydm9q3","wydm9q9","wydm9qd","wydm9q6","wydm9q4","wydm9q1","wydm9q0","wydm9q2","wydm9q8"],"errorMessage":null,"success":true}}
2025-11-21 19:53:46.912 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9q3, wydm9q9, wydm9qd, wydm9q6, wydm9q4, wydm9q1, wydm9q0, wydm9q2, wydm9q8]
2025-11-21 19:53:46.912 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9q3
2025-11-21 19:53:46.912 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:46.912666900Z","nanoTime":28012926602800,"traceId":"5ef93155","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":246100,"duration_ms":0,"resultData":{"requestLatitude":37.564371966936086,"requestLongitude":126.97143163720008,"requestRadius":500,"centerGeohashId":"wydm9q3","nineBlockGeohashes":["wydm9q3","wydm9q9","wydm9qd","wydm9q6","wydm9q4","wydm9q1","wydm9q0","wydm9q2","wydm9q8"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:46.912 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:46.912666900Z","nanoTime":28012926660700,"traceId":"5ef93155","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:46.912 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:46.912 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9q3
2025-11-21 19:53:46.912 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3168ms)
2025-11-21 19:53:46.912 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:46.914 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:46.914 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 2개, 미스: 7개
2025-11-21 19:53:46.914 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.9231ms, 역직렬화: 0.1995ms
2025-11-21 19:53:46.914 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:46.914 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:46.914717500Z","nanoTime":28012929177700,"traceId":"5ef93155","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2517000,"duration_ms":2,"resultData":{"centerGeohashId":"wydm9q3","nineBlockGeohashes":["wydm9q3","wydm9q9","wydm9qd","wydm9q6","wydm9q4","wydm9q1","wydm9q0","wydm9q2","wydm9q8"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9q3","hit":false,"valueSize":0,"l1CacheGetDurationNs":316800,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9q3","cacheKey":"data:wydm9q3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":116100},{"geohashId":"wydm9q9","cacheKey":"data:wydm9q9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":83700},{"geohashId":"wydm9qd","cacheKey":"data:wydm9qd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":72500},{"geohashId":"wydm9q6","cacheKey":"data:wydm9q6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":187600},{"geohashId":"wydm9q4","cacheKey":"data:wydm9q4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":93000},{"geohashId":"wydm9q1","cacheKey":"data:wydm9q1:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":514,"l2CacheGetDurationNs":502000},{"geohashId":"wydm9q0","cacheKey":"data:wydm9q0:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":130,"l2CacheGetDurationNs":397600},{"geohashId":"wydm9q2","cacheKey":"data:wydm9q2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":91800},{"geohashId":"wydm9q8","cacheKey":"data:wydm9q8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":94200}],"l2TotalHits":2,"l2TotalMisses":7,"l2CacheTotalDurationNs":1923100,"l2JsonDeserializeTotalDurationNs":199500,"errorMessage":null,"success":true}}
2025-11-21 19:53:46.914 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:46.914717500Z","nanoTime":28012929444900,"traceId":"5ef93155","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:46.915 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:46.915 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 7개
2025-11-21 19:53:46.918 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 11건
2025-11-21 19:53:46.919 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:46.919 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 7개
2025-11-21 19:53:46.919 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:46.919861300Z","nanoTime":28012934264300,"traceId":"5ef93155","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4819400,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydm9q3","wydm9q9","wydm9qd","wydm9q6","wydm9q4","wydm9q2","wydm9q8"],"cctvQueryResult":{"queryGeohashIds":["wydm9q3","wydm9q9","wydm9qd","wydm9q6","wydm9q4","wydm9q2","wydm9q8"],"totalRowsReturned":11,"rowsPerGrid":{"wydm9q6":6,"wydm9q4":1,"wydm9q3":1,"wydm9q8":1,"wydm9q2":2},"queryExecutionTimeNs":3225300,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9q6","cacheKey":"data:wydm9q6:cctv","dataCount":6,"dataSize":763,"errorMessage":null,"success":true},{"geohashId":"wydm9q4","cacheKey":"data:wydm9q4:cctv","dataCount":1,"dataSize":130,"errorMessage":null,"success":true},{"geohashId":"wydm9q3","cacheKey":"data:wydm9q3:cctv","dataCount":1,"dataSize":129,"errorMessage":null,"success":true},{"geohashId":"wydm9q8","cacheKey":"data:wydm9q8:cctv","dataCount":1,"dataSize":126,"errorMessage":null,"success":true},{"geohashId":"wydm9q2","cacheKey":"data:wydm9q2:cctv","dataCount":2,"dataSize":256,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:46.919 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:46.919861300Z","nanoTime":28012934434000,"traceId":"5ef93155","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:46.919 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:46.919 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.564371966936086, 126.97143163720008)
2025-11-21 19:53:46.920 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:47.000 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:47.000 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:47.002 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:47.002 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.564371966936086, 126.97143163720008), 반경: 500m
2025-11-21 19:53:47.103 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:47.103 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 167건
2025-11-21 19:53:47.106 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:47.106 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:47.106 [http-nio-8185-exec-2] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:53:47.106 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:47.106 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:47.106 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:47.106 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:53:47.106 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:47.106658Z","nanoTime":28013120937200,"traceId":"5ef93155","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":186503200,"duration_ms":186,"resultData":{"latitude":37.564371966936086,"longitude":126.97143163720008,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":186361100,"addressApiResult":{"cached":false,"cacheKey":"address:37.564371966936086:126.97143163720008","roadAddress":"주소 없음","jibunAddress":"서울 중구 순화동 1-1","responseSize":56,"executionTimeNs":81165900,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":55800,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.564371966936086:126.97143163720008:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":9,"CS2":15,"SC4":5,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":15,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":167,"responseSize":19364,"executionTimeNs":105139400,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:47.106 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:47.106658Z","nanoTime":28013121165300,"traceId":"5ef93155","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:47.106 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:47.106 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:47.106 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 16개
2025-11-21 19:53:47.106 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 16개 (총 카메라 대수: 34대)
2025-11-21 19:53:47.106 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:47.185 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  퇴계로6길 3-10 (거리: 361m)
2025-11-21 19:53:47.185 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:47.185 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:47.185 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:53:47.185 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:47.185 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:47.185618Z","nanoTime":28013199741500,"traceId":"5ef93155","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":78576200,"duration_ms":78,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":16,"totalCctvAfterFilter":16,"totalCameraCount":34,"filterRate":1.0,"filterExecutionTimeNs":17700,"success":true},"policeQuery":{"queryDurationNs":77949200,"found":true,"nearestAddress":"서울특별시 중구  퇴계로6길 3-10","nearestDistance":360.94284316737134,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":9,"CS2":15,"SC4":5,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":15,"FD6":15,"PK6":15,"PM9":15},"placesAfterFilter":{"CT1":15,"AT4":9,"CS2":15,"SC4":5,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":15,"FD6":15,"PK6":15,"PM9":15},"totalBeforeFilter":167,"totalAfterFilter":167,"filterRate":1.0,"filterExecutionTimeNs":171400,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:47.185 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:47.185618Z","nanoTime":28013199951600,"traceId":"5ef93155","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:47.185 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:47.185 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 37.80, 편의성: 45.41, 종합: 41.60
2025-11-21 19:53:47.185 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:47.185618Z","nanoTime":28013200206900,"traceId":"5ef93155","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":255300,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":54.88214460407859,"policeDistance":360.94284316737134,"cctvScore":53.333333333333336,"cctvCount":16,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":37.79797671455691,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":27.0,"CS2":3.75,"SC4":10.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":45.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":45.410714285714285,"success":true},"overallScore":41.604345500135594,"errorMessage":null,"success":true}}
2025-11-21 19:53:47.186 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:47.185618Z","nanoTime":28013200363200,"traceId":"5ef93155","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:47.186 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:47.186 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  퇴계로6길 3-10, latitude=37.563829, longitude=126.975469, geohashId=wydm9qk)
2025-11-21 19:53:47.186 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 360.94284316737134
2025-11-21 19:53:47.187 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9q3
2025-11-21 19:53:47.187 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:47.187 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:47.187076700Z","nanoTime":28013202072900,"traceId":"5ef93155","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1709700,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["문화시설이(가) 83m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm9q3","dataSize":22181,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":22181,"errorMessage":null,"success":true}}
2025-11-21 19:53:47.187 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:47.596 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:47.596 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56278803467635, longitude=126.98035117745394, radius=500)
2025-11-21 19:53:47.596 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:47.596 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56278803467635, longitude=126.98035117745394, radius=500
2025-11-21 19:53:47.596 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:47.596921900Z","nanoTime":28013610910800,"traceId":"44df55be","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:47.596 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:47.596 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56278803467635, lon=126.98035117745394
2025-11-21 19:53:47.596 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:47.596921900Z","nanoTime":28013611028400,"traceId":"44df55be","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:47.596 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:47.596921900Z","nanoTime":28013611197900,"traceId":"44df55be","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":169500,"duration_ms":0,"resultData":{"latitude":37.56278803467635,"longitude":126.98035117745394,"precision":7,"centerHash":"wydm9w0","adjacentHashes":["wydm9w0","wydm9w2","wydm9w3","wydm9w1","wydm9tc","wydm9tb","wydm9mz","wydm9qp","wydm9qr"],"errorMessage":null,"success":true}}
2025-11-21 19:53:47.596 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9w0, wydm9w2, wydm9w3, wydm9w1, wydm9tc, wydm9tb, wydm9mz, wydm9qp, wydm9qr]
2025-11-21 19:53:47.596 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9w0
2025-11-21 19:53:47.596 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:47.596921900Z","nanoTime":28013611413600,"traceId":"44df55be","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":502800,"duration_ms":0,"resultData":{"requestLatitude":37.56278803467635,"requestLongitude":126.98035117745394,"requestRadius":500,"centerGeohashId":"wydm9w0","nineBlockGeohashes":["wydm9w0","wydm9w2","wydm9w3","wydm9w1","wydm9tc","wydm9tb","wydm9mz","wydm9qp","wydm9qr"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:47.596 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:47.596921900Z","nanoTime":28013611511400,"traceId":"44df55be","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:47.596 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:47.596 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9w0
2025-11-21 19:53:47.598 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.387ms)
2025-11-21 19:53:47.598 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:47.599 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:47.599 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 1개, 미스: 8개
2025-11-21 19:53:47.599 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.7615ms, 역직렬화: 0.1026ms
2025-11-21 19:53:47.599 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:47.600 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:47.599560500Z","nanoTime":28013613904500,"traceId":"44df55be","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2393100,"duration_ms":2,"resultData":{"centerGeohashId":"wydm9w0","nineBlockGeohashes":["wydm9w0","wydm9w2","wydm9w3","wydm9w1","wydm9tc","wydm9tb","wydm9mz","wydm9qp","wydm9qr"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9w0","hit":false,"valueSize":0,"l1CacheGetDurationNs":387000,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9w0","cacheKey":"data:wydm9w0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":158700},{"geohashId":"wydm9w2","cacheKey":"data:wydm9w2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":122600},{"geohashId":"wydm9w3","cacheKey":"data:wydm9w3:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":126,"l2CacheGetDurationNs":358500},{"geohashId":"wydm9w1","cacheKey":"data:wydm9w1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":151700},{"geohashId":"wydm9tc","cacheKey":"data:wydm9tc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":110900},{"geohashId":"wydm9tb","cacheKey":"data:wydm9tb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":98600},{"geohashId":"wydm9mz","cacheKey":"data:wydm9mz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":169300},{"geohashId":"wydm9qp","cacheKey":"data:wydm9qp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":192000},{"geohashId":"wydm9qr","cacheKey":"data:wydm9qr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":174000}],"l2TotalHits":1,"l2TotalMisses":8,"l2CacheTotalDurationNs":1761500,"l2JsonDeserializeTotalDurationNs":102600,"errorMessage":null,"success":true}}
2025-11-21 19:53:47.600 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:47.600220200Z","nanoTime":28013614095200,"traceId":"44df55be","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:47.600 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:47.600 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 8개
2025-11-21 19:53:47.603 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 7건
2025-11-21 19:53:47.604 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:47.605 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 5개
2025-11-21 19:53:47.605 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:47.605986600Z","nanoTime":28013619957500,"traceId":"44df55be","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5862300,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydm9w0","wydm9w2","wydm9w1","wydm9tc","wydm9tb","wydm9mz","wydm9qp","wydm9qr"],"cctvQueryResult":{"queryGeohashIds":["wydm9w0","wydm9w2","wydm9w1","wydm9tc","wydm9tb","wydm9mz","wydm9qp","wydm9qr"],"totalRowsReturned":7,"rowsPerGrid":{"wydm9mz":1,"wydm9w2":1,"wydm9qr":1,"wydm9tb":4},"queryExecutionTimeNs":3750700,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9mz","cacheKey":"data:wydm9mz:cctv","dataCount":1,"dataSize":131,"errorMessage":null,"success":true},{"geohashId":"wydm9w2","cacheKey":"data:wydm9w2:cctv","dataCount":1,"dataSize":129,"errorMessage":null,"success":true},{"geohashId":"wydm9qr","cacheKey":"data:wydm9qr:cctv","dataCount":1,"dataSize":130,"errorMessage":null,"success":true},{"geohashId":"wydm9tb","cacheKey":"data:wydm9tb:cctv","dataCount":4,"dataSize":517,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:47.605 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:47.605986600Z","nanoTime":28013620250500,"traceId":"44df55be","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:47.605 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:47.605 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56278803467635, 126.98035117745394)
2025-11-21 19:53:47.605 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:47.686 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:47.686 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:47.686 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:47.686 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56278803467635, 126.98035117745394), 반경: 500m
2025-11-21 19:53:47.775 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:47.775 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 164건
2025-11-21 19:53:47.775 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:47.775 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:47.775 [http-nio-8185-exec-5] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:53:47.775 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:47.775 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:47.775 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:47.775 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:53:47.775 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:47.775172Z","nanoTime":28013790524300,"traceId":"44df55be","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":170273800,"duration_ms":170,"resultData":{"latitude":37.56278803467635,"longitude":126.98035117745394,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":170107900,"addressApiResult":{"cached":false,"cacheKey":"address:37.56278803467635:126.98035117745394","roadAddress":"주소 없음","jibunAddress":"서울 중구 남대문로3가 110-8","responseSize":61,"executionTimeNs":81148200,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":48700,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56278803467635:126.98035117745394:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":10,"CS2":15,"SC4":0,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":15,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":164,"responseSize":19017,"executionTimeNs":88911000,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:47.775 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:47.775172Z","nanoTime":28013790727200,"traceId":"44df55be","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:47.775 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:47.775 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:47.775 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 8개
2025-11-21 19:53:47.775 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 8개 (총 카메라 대수: 21대)
2025-11-21 19:53:47.775 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:47.848 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  통일로 13 (거리: 331m)
2025-11-21 19:53:47.848 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:47.848 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:47.848 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 12개 카테고리
2025-11-21 19:53:47.848 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:47.848 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:47.848234700Z","nanoTime":28013862704100,"traceId":"44df55be","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":71976900,"duration_ms":71,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":8,"totalCctvAfterFilter":8,"totalCameraCount":21,"filterRate":1.0,"filterExecutionTimeNs":9300,"success":true},"policeQuery":{"queryDurationNs":71347800,"found":true,"nearestAddress":"서울특별시 중구  통일로 13","nearestDistance":330.5175849367483,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":10,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SW8":4,"PO3":15,"FD6":15,"PK6":15,"PM9":15},"placesAfterFilter":{"CT1":15,"AT4":10,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SW8":4,"PO3":15,"FD6":15,"PK6":15,"PM9":15},"totalBeforeFilter":164,"totalAfterFilter":164,"filterRate":1.0,"filterExecutionTimeNs":227400,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:47.848 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:47.848234700Z","nanoTime":28013862910800,"traceId":"44df55be","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:47.848 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:47.848 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 28.27, 편의성: 51.56, 종합: 39.92
2025-11-21 19:53:47.848 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:47.848234700Z","nanoTime":28013863139000,"traceId":"44df55be","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":228200,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":58.68530188290646,"policeDistance":330.5175849367483,"cctvScore":26.666666666666668,"cctvCount":8,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":28.272257231538603,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":30.0,"BK9":75.0,"HP8":100.0,"CS2":3.75,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":45.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":51.5625,"success":true},"overallScore":39.9173786157693,"errorMessage":null,"success":true}}
2025-11-21 19:53:47.848 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:47.848234700Z","nanoTime":28013863274800,"traceId":"44df55be","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:47.848 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:47.848 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  통일로 13, latitude=37.563587, longitude=126.983963, geohashId=wydm9w4)
2025-11-21 19:53:47.848 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 330.5175849367483
2025-11-21 19:53:47.850 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9w0
2025-11-21 19:53:47.850 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:47.851 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:47.850144700Z","nanoTime":28013864836600,"traceId":"44df55be","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1561800,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["주차장이(가) 53m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm9w0","dataSize":20741,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20741,"errorMessage":null,"success":true}}
2025-11-21 19:53:47.851 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:48.378 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:48.378 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.561185401932974, longitude=126.98920243360979, radius=500)
2025-11-21 19:53:48.378 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:48.378 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.561185401932974, longitude=126.98920243360979, radius=500
2025-11-21 19:53:48.378 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:48.378640200Z","nanoTime":28014392676700,"traceId":"a9c141f4","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:48.378 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:48.378 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.561185401932974, lon=126.98920243360979
2025-11-21 19:53:48.378 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:48.378640200Z","nanoTime":28014392885300,"traceId":"a9c141f4","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:48.378 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:48.378640200Z","nanoTime":28014392958700,"traceId":"a9c141f4","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":73400,"duration_ms":0,"resultData":{"latitude":37.561185401932974,"longitude":126.98920243360979,"precision":7,"centerHash":"wydm9ty","adjacentHashes":["wydm9ty","wydm9wn","wydm9wp","wydm9tz","wydm9tx","wydm9tw","wydm9tt","wydm9tv","wydm9wj"],"errorMessage":null,"success":true}}
2025-11-21 19:53:48.378 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9ty, wydm9wn, wydm9wp, wydm9tz, wydm9tx, wydm9tw, wydm9tt, wydm9tv, wydm9wj]
2025-11-21 19:53:48.378 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9ty
2025-11-21 19:53:48.378 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:48.378640200Z","nanoTime":28014393190700,"traceId":"a9c141f4","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":514000,"duration_ms":0,"resultData":{"requestLatitude":37.561185401932974,"requestLongitude":126.98920243360979,"requestRadius":500,"centerGeohashId":"wydm9ty","nineBlockGeohashes":["wydm9ty","wydm9wn","wydm9wp","wydm9tz","wydm9tx","wydm9tw","wydm9tt","wydm9tv","wydm9wj"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:48.378 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:48.378640200Z","nanoTime":28014393264000,"traceId":"a9c141f4","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:48.378 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:48.378 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9ty
2025-11-21 19:53:48.379 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5592ms)
2025-11-21 19:53:48.379 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:48.382 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:48.382 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 2개, 미스: 7개
2025-11-21 19:53:48.382 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.5712ms, 역직렬화: 0.2362ms
2025-11-21 19:53:48.382 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:48.382 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:48.382401Z","nanoTime":28014396769900,"traceId":"a9c141f4","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3505900,"duration_ms":3,"resultData":{"centerGeohashId":"wydm9ty","nineBlockGeohashes":["wydm9ty","wydm9wn","wydm9wp","wydm9tz","wydm9tx","wydm9tw","wydm9tt","wydm9tv","wydm9wj"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9ty","hit":false,"valueSize":0,"l1CacheGetDurationNs":559200,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9ty","cacheKey":"data:wydm9ty:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":131,"l2CacheGetDurationNs":545600},{"geohashId":"wydm9wn","cacheKey":"data:wydm9wn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":257700},{"geohashId":"wydm9wp","cacheKey":"data:wydm9wp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":177100},{"geohashId":"wydm9tz","cacheKey":"data:wydm9tz:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":129,"l2CacheGetDurationNs":499900},{"geohashId":"wydm9tx","cacheKey":"data:wydm9tx:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":182300},{"geohashId":"wydm9tw","cacheKey":"data:wydm9tw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":119600},{"geohashId":"wydm9tt","cacheKey":"data:wydm9tt:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":108400},{"geohashId":"wydm9tv","cacheKey":"data:wydm9tv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":124100},{"geohashId":"wydm9wj","cacheKey":"data:wydm9wj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":184800}],"l2TotalHits":2,"l2TotalMisses":7,"l2CacheTotalDurationNs":2571200,"l2JsonDeserializeTotalDurationNs":236200,"errorMessage":null,"success":true}}
2025-11-21 19:53:48.382 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:48.382401Z","nanoTime":28014397027900,"traceId":"a9c141f4","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:48.382 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:48.382 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 7개
2025-11-21 19:53:48.387 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 3건
2025-11-21 19:53:48.387 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:48.387 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 4개
2025-11-21 19:53:48.387 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:48.387201800Z","nanoTime":28014403079900,"traceId":"a9c141f4","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6052000,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydm9wn","wydm9wp","wydm9tx","wydm9tw","wydm9tt","wydm9tv","wydm9wj"],"cctvQueryResult":{"queryGeohashIds":["wydm9wn","wydm9wp","wydm9tx","wydm9tw","wydm9tt","wydm9tv","wydm9wj"],"totalRowsReturned":3,"rowsPerGrid":{"wydm9tx":1,"wydm9tt":2},"queryExecutionTimeNs":4805900,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9tx","cacheKey":"data:wydm9tx:cctv","dataCount":1,"dataSize":130,"errorMessage":null,"success":true},{"geohashId":"wydm9tt","cacheKey":"data:wydm9tt:cctv","dataCount":2,"dataSize":258,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:48.387 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:48.387201800Z","nanoTime":28014403280000,"traceId":"a9c141f4","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:48.387 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:48.387 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.561185401932974, 126.98920243360979)
2025-11-21 19:53:48.387 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:48.485 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:48.485 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:48.485 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:48.485 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.561185401932974, 126.98920243360979), 반경: 500m
2025-11-21 19:53:48.594 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:48.594 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 153건
2025-11-21 19:53:48.599 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:48.599 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:48.599 [http-nio-8185-exec-4] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:53:48.599 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:48.599 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:48.599 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:48.599 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:53:48.599 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:48.599590100Z","nanoTime":28014613692200,"traceId":"a9c141f4","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":210412200,"duration_ms":210,"resultData":{"latitude":37.561185401932974,"longitude":126.98920243360979,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":210271700,"addressApiResult":{"cached":false,"cacheKey":"address:37.561185401932974:126.98920243360979","roadAddress":"주소 없음","jibunAddress":"서울 중구 주자동 21","responseSize":55,"executionTimeNs":96960200,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":45600,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.561185401932974:126.98920243360979:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":7,"CS2":15,"SC4":4,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":6,"FD6":15,"PK6":15,"OL7":1,"PM9":13},"totalPlaces":153,"responseSize":17631,"executionTimeNs":113265900,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:48.599 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:48.599590100Z","nanoTime":28014613922200,"traceId":"a9c141f4","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:48.599 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:48.599 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:48.599 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 5개
2025-11-21 19:53:48.599 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 5개 (총 카메라 대수: 17대)
2025-11-21 19:53:48.599 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:48.668 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  퇴계로 178 (거리: 212m)
2025-11-21 19:53:48.668 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:48.668 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:48.668 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:53:48.668 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:48.669 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:48.668600Z","nanoTime":28014683378500,"traceId":"a9c141f4","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":69456300,"duration_ms":69,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":5,"totalCctvAfterFilter":5,"totalCameraCount":17,"filterRate":1.0,"filterExecutionTimeNs":7200,"success":true},"policeQuery":{"queryDurationNs":68990000,"found":true,"nearestAddress":"서울특별시 중구  퇴계로 178","nearestDistance":212.21646891997284,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":7,"CS2":15,"SC4":4,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":6,"FD6":15,"PK6":15,"OL7":1,"PM9":13},"placesAfterFilter":{"CT1":15,"AT4":7,"CS2":15,"SC4":4,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":6,"FD6":15,"PK6":15,"OL7":1,"PM9":13},"totalBeforeFilter":153,"totalAfterFilter":153,"filterRate":1.0,"filterExecutionTimeNs":142600,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:48.669 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:48.669657500Z","nanoTime":28014683528300,"traceId":"a9c141f4","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:48.669 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:48.669 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 28.71, 편의성: 42.55, 종합: 35.63
2025-11-21 19:53:48.669 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:48.669657500Z","nanoTime":28014683760900,"traceId":"a9c141f4","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":232600,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":73.4729413850034,"policeDistance":212.21646891997284,"cctvScore":16.666666666666664,"cctvCount":5,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":28.708549082167686,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":21.0,"CS2":3.75,"SC4":8.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":18.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":42.55357142857143,"success":true},"overallScore":35.63106025536956,"errorMessage":null,"success":true}}
2025-11-21 19:53:48.669 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:48.669657500Z","nanoTime":28014683885600,"traceId":"a9c141f4","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:48.669 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:48.669 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  퇴계로 178, latitude=37.56088, longitude=126.991579, geohashId=wydm9v8)
2025-11-21 19:53:48.669 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 212.21646891997284
2025-11-21 19:53:48.670 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9ty
2025-11-21 19:53:48.670 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:48.671 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:48.670607700Z","nanoTime":28014685335500,"traceId":"a9c141f4","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1449900,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["공공기관이(가) 69m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm9ty","dataSize":19159,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19159,"errorMessage":null,"success":true}}
2025-11-21 19:53:48.671 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:49.121 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:49.122 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.559365876051366, longitude=126.99882293543094, radius=500)
2025-11-21 19:53:49.122 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:49.122 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.559365876051366, longitude=126.99882293543094, radius=500
2025-11-21 19:53:49.122 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:49.122736500Z","nanoTime":28015136601200,"traceId":"56063a5e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:49.122 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:49.122 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.559365876051366, lon=126.99882293543094
2025-11-21 19:53:49.122 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:49.122736500Z","nanoTime":28015136695800,"traceId":"56063a5e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:49.122 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:49.122736500Z","nanoTime":28015136742600,"traceId":"56063a5e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":46800,"duration_ms":0,"resultData":{"latitude":37.559365876051366,"longitude":126.99882293543094,"precision":7,"centerHash":"wydm9vm","adjacentHashes":["wydm9vm","wydm9vt","wydm9vw","wydm9vq","wydm9vn","wydm9vj","wydm9vh","wydm9vk","wydm9vs"],"errorMessage":null,"success":true}}
2025-11-21 19:53:49.122 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9vm, wydm9vt, wydm9vw, wydm9vq, wydm9vn, wydm9vj, wydm9vh, wydm9vk, wydm9vs]
2025-11-21 19:53:49.122 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9vm
2025-11-21 19:53:49.122 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:49.122736500Z","nanoTime":28015136853400,"traceId":"56063a5e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":252200,"duration_ms":0,"resultData":{"requestLatitude":37.559365876051366,"requestLongitude":126.99882293543094,"requestRadius":500,"centerGeohashId":"wydm9vm","nineBlockGeohashes":["wydm9vm","wydm9vt","wydm9vw","wydm9vq","wydm9vn","wydm9vj","wydm9vh","wydm9vk","wydm9vs"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:49.122 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:49.122736500Z","nanoTime":28015136904900,"traceId":"56063a5e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:49.122 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:49.122 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9vm
2025-11-21 19:53:49.123 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.384ms)
2025-11-21 19:53:49.123 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:49.125 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:49.125 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 4개, 미스: 5개
2025-11-21 19:53:49.125 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.3896ms, 역직렬화: 0.2743ms
2025-11-21 19:53:49.125 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:49.125 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:49.125595700Z","nanoTime":28015139973800,"traceId":"56063a5e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3068900,"duration_ms":3,"resultData":{"centerGeohashId":"wydm9vm","nineBlockGeohashes":["wydm9vm","wydm9vt","wydm9vw","wydm9vq","wydm9vn","wydm9vj","wydm9vh","wydm9vk","wydm9vs"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9vm","hit":false,"valueSize":0,"l1CacheGetDurationNs":384000,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9vm","cacheKey":"data:wydm9vm:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":262,"l2CacheGetDurationNs":524900},{"geohashId":"wydm9vt","cacheKey":"data:wydm9vt:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":122400},{"geohashId":"wydm9vw","cacheKey":"data:wydm9vw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":106900},{"geohashId":"wydm9vq","cacheKey":"data:wydm9vq:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":134,"l2CacheGetDurationNs":256800},{"geohashId":"wydm9vn","cacheKey":"data:wydm9vn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":113600},{"geohashId":"wydm9vj","cacheKey":"data:wydm9vj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":110500},{"geohashId":"wydm9vh","cacheKey":"data:wydm9vh:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":262,"l2CacheGetDurationNs":394500},{"geohashId":"wydm9vk","cacheKey":"data:wydm9vk:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":261,"l2CacheGetDurationNs":308900},{"geohashId":"wydm9vs","cacheKey":"data:wydm9vs:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":81800}],"l2TotalHits":4,"l2TotalMisses":5,"l2CacheTotalDurationNs":2389600,"l2JsonDeserializeTotalDurationNs":274300,"errorMessage":null,"success":true}}
2025-11-21 19:53:49.126 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:49.126424500Z","nanoTime":28015140182500,"traceId":"56063a5e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:49.126 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:49.126 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 5개
2025-11-21 19:53:49.128 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 4건
2025-11-21 19:53:49.129 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:49.129 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 6개
2025-11-21 19:53:49.129 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:49.129443900Z","nanoTime":28015143634000,"traceId":"56063a5e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":3451500,"duration_ms":3,"resultData":{"inputCctvMissGrids":["wydm9vt","wydm9vw","wydm9vn","wydm9vj","wydm9vs"],"cctvQueryResult":{"queryGeohashIds":["wydm9vt","wydm9vw","wydm9vn","wydm9vj","wydm9vs"],"totalRowsReturned":4,"rowsPerGrid":{"wydm9vs":3,"wydm9vt":1},"queryExecutionTimeNs":2477100,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9vs","cacheKey":"data:wydm9vs:cctv","dataCount":3,"dataSize":385,"errorMessage":null,"success":true},{"geohashId":"wydm9vt","cacheKey":"data:wydm9vt:cctv","dataCount":1,"dataSize":131,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:49.129 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:49.129443900Z","nanoTime":28015143771200,"traceId":"56063a5e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:49.129 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:49.129 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.559365876051366, 126.99882293543094)
2025-11-21 19:53:49.129 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:49.212 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:49.212 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:49.212 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:49.212 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.559365876051366, 126.99882293543094), 반경: 500m
2025-11-21 19:53:49.300 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:49.300 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 140건
2025-11-21 19:53:49.301 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:49.301 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:49.301 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 중구
2025-11-21 19:53:49.302 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 중구
2025-11-21 19:53:49.302 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:49.302 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:49.302 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:49.302 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.866910799
2025-11-21 19:53:49.302 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:49.302948500Z","nanoTime":28015317002800,"traceId":"56063a5e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":173231600,"duration_ms":173,"resultData":{"latitude":37.559365876051366,"longitude":126.99882293543094,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":173073800,"addressApiResult":{"cached":false,"cacheKey":"address:37.559365876051366:126.99882293543094","roadAddress":"서울특별시 중구 필동로1길 30","jibunAddress":"서울 중구 필동3가 26-1","responseSize":70,"executionTimeNs":84474200,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:중구","guName":"중구","arrestRate":0.866910799,"dataFound":true,"executionTimeNs":620000,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.559365876051366:126.99882293543094:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":4,"CS2":15,"SC4":2,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":4,"FD6":15,"PK6":15,"OL7":2,"PM9":6},"totalPlaces":140,"responseSize":16148,"executionTimeNs":87979600,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:49.302 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:49.302948500Z","nanoTime":28015317204000,"traceId":"56063a5e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:49.302 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:49.302 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:49.302 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 11개
2025-11-21 19:53:49.302 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 11개 (총 카메라 대수: 32대)
2025-11-21 19:53:49.303 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:49.370 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  동호로 261 (거리: 532m)
2025-11-21 19:53:49.370 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:49.370 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:49.370 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:53:49.371 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:49.371 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:49.371339600Z","nanoTime":28015385129800,"traceId":"56063a5e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":67925800,"duration_ms":67,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":11,"totalCctvAfterFilter":11,"totalCameraCount":32,"filterRate":1.0,"filterExecutionTimeNs":12700,"success":true},"policeQuery":{"queryDurationNs":67419700,"found":true,"nearestAddress":"서울특별시 중구  동호로 261","nearestDistance":531.7063253367847,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":4,"CS2":15,"SC4":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":4,"FD6":15,"PK6":15,"OL7":2,"PM9":6},"placesAfterFilter":{"CT1":15,"AT4":4,"CS2":15,"SC4":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":4,"FD6":15,"PK6":15,"OL7":2,"PM9":6},"totalBeforeFilter":140,"totalAfterFilter":140,"filterRate":1.0,"filterExecutionTimeNs":146000,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:49.371 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:49.371339600Z","nanoTime":28015385286600,"traceId":"56063a5e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:49.371 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:49.371 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 50.74, 편의성: 38.39, 종합: 44.56
2025-11-21 19:53:49.371 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:49.371339600Z","nanoTime":28015385575600,"traceId":"56063a5e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":289000,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":33.53670933290191,"policeDistance":531.7063253367847,"cctvScore":36.666666666666664,"cctvCount":11,"arrestRateScore":86.6910799,"arrestRate":0.866910799,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":50.73500343653724,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":12.0,"CS2":11.431706982486624,"SC4":4.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":12.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":48.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"중구","guPopulation":131214,"finalScore":38.387979070177614,"success":true},"overallScore":44.56149125335743,"errorMessage":null,"success":true}}
2025-11-21 19:53:49.371 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:49.371339600Z","nanoTime":28015385709100,"traceId":"56063a5e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:49.371 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:49.371 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  동호로 261, latitude=37.558764, longitude=127.004807, geohashId=wydmdj6)
2025-11-21 19:53:49.371 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 531.7063253367847
2025-11-21 19:53:49.372 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9vm
2025-11-21 19:53:49.372 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:49.372 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:49.372808Z","nanoTime":28015387349400,"traceId":"56063a5e","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1640300,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["은행이(가) 106m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydm9vm","dataSize":18393,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":18393,"errorMessage":null,"success":true}}
2025-11-21 19:53:49.372 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:49.827 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:49.827 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55761763077632, longitude=127.00864669538129, radius=500)
2025-11-21 19:53:49.827 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:49.827 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55761763077632, longitude=127.00864669538129, radius=500
2025-11-21 19:53:49.827 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:49.827051800Z","nanoTime":28015841613800,"traceId":"03babd61","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:49.827 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:49.827 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55761763077632, lon=127.00864669538129
2025-11-21 19:53:49.827 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:49.827051800Z","nanoTime":28015841710100,"traceId":"03babd61","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:49.828 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:49.827051800Z","nanoTime":28015841759500,"traceId":"03babd61","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":49400,"duration_ms":0,"resultData":{"latitude":37.55761763077632,"longitude":127.00864669538129,"precision":7,"centerHash":"wydmdjh","adjacentHashes":["wydmdjh","wydmdjk","wydmdjm","wydmdjj","wydmdhv","wydmdhu","wydmdhg","wydmdj5","wydmdj7"],"errorMessage":null,"success":true}}
2025-11-21 19:53:49.828 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdjh, wydmdjk, wydmdjm, wydmdjj, wydmdhv, wydmdhu, wydmdhg, wydmdj5, wydmdj7]
2025-11-21 19:53:49.828 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdjh
2025-11-21 19:53:49.828 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:49.828055200Z","nanoTime":28015841890200,"traceId":"03babd61","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":276400,"duration_ms":0,"resultData":{"requestLatitude":37.55761763077632,"requestLongitude":127.00864669538129,"requestRadius":500,"centerGeohashId":"wydmdjh","nineBlockGeohashes":["wydmdjh","wydmdjk","wydmdjm","wydmdjj","wydmdhv","wydmdhu","wydmdhg","wydmdj5","wydmdj7"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:49.828 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:49.828055200Z","nanoTime":28015841933900,"traceId":"03babd61","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:49.828 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:49.828 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdjh
2025-11-21 19:53:49.828 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.356ms)
2025-11-21 19:53:49.828 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:49.830 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:49.830 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 1개, 미스: 8개
2025-11-21 19:53:49.830 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.8218ms, 역직렬화: 0.1375ms
2025-11-21 19:53:49.830 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:49.830 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:49.830241500Z","nanoTime":28015844374400,"traceId":"03babd61","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2440500,"duration_ms":2,"resultData":{"centerGeohashId":"wydmdjh","nineBlockGeohashes":["wydmdjh","wydmdjk","wydmdjm","wydmdjj","wydmdhv","wydmdhu","wydmdhg","wydmdj5","wydmdj7"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdjh","hit":false,"valueSize":0,"l1CacheGetDurationNs":356000,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdjh","cacheKey":"data:wydmdjh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":196300},{"geohashId":"wydmdjk","cacheKey":"data:wydmdjk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":107400},{"geohashId":"wydmdjm","cacheKey":"data:wydmdjm:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":389,"l2CacheGetDurationNs":317300},{"geohashId":"wydmdjj","cacheKey":"data:wydmdjj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":145100},{"geohashId":"wydmdhv","cacheKey":"data:wydmdhv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":137900},{"geohashId":"wydmdhu","cacheKey":"data:wydmdhu:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":236700},{"geohashId":"wydmdhg","cacheKey":"data:wydmdhg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":201800},{"geohashId":"wydmdj5","cacheKey":"data:wydmdj5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":122600},{"geohashId":"wydmdj7","cacheKey":"data:wydmdj7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":119300}],"l2TotalHits":1,"l2TotalMisses":8,"l2CacheTotalDurationNs":1821800,"l2JsonDeserializeTotalDurationNs":137500,"errorMessage":null,"success":true}}
2025-11-21 19:53:49.830 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:49.830639200Z","nanoTime":28015844515900,"traceId":"03babd61","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:49.830 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:49.830 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 8개
2025-11-21 19:53:49.833 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 11건
2025-11-21 19:53:49.834 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:49.834 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 6개
2025-11-21 19:53:49.834 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:49.834671600Z","nanoTime":28015849019900,"traceId":"03babd61","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4504000,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmdjh","wydmdjk","wydmdjj","wydmdhv","wydmdhu","wydmdhg","wydmdj5","wydmdj7"],"cctvQueryResult":{"queryGeohashIds":["wydmdjh","wydmdjk","wydmdjj","wydmdhv","wydmdhu","wydmdhg","wydmdj5","wydmdj7"],"totalRowsReturned":11,"rowsPerGrid":{"wydmdhu":3,"wydmdhv":2,"wydmdjh":1,"wydmdhg":2,"wydmdjj":3},"queryExecutionTimeNs":2901700,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdhu","cacheKey":"data:wydmdhu:cctv","dataCount":3,"dataSize":390,"errorMessage":null,"success":true},{"geohashId":"wydmdhv","cacheKey":"data:wydmdhv:cctv","dataCount":2,"dataSize":264,"errorMessage":null,"success":true},{"geohashId":"wydmdjh","cacheKey":"data:wydmdjh:cctv","dataCount":1,"dataSize":132,"errorMessage":null,"success":true},{"geohashId":"wydmdhg","cacheKey":"data:wydmdhg:cctv","dataCount":2,"dataSize":261,"errorMessage":null,"success":true},{"geohashId":"wydmdjj","cacheKey":"data:wydmdjj:cctv","dataCount":3,"dataSize":387,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:49.834 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:49.834671600Z","nanoTime":28015849274800,"traceId":"03babd61","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:49.834 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:49.834 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.55761763077632, 127.00864669538129)
2025-11-21 19:53:49.835 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:49.928 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:49.928 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:49.928 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:49.928 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.55761763077632, 127.00864669538129), 반경: 500m
2025-11-21 19:53:50.015 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:50.015 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 144건
2025-11-21 19:53:50.015 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:50.016 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:50.016 [http-nio-8185-exec-7] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:53:50.016 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:50.016 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:50.016 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:50.016 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:53:50.016 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:50.016952Z","nanoTime":28016030898000,"traceId":"03babd61","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":181623200,"duration_ms":181,"resultData":{"latitude":37.55761763077632,"longitude":127.00864669538129,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":181476000,"addressApiResult":{"cached":false,"cacheKey":"address:37.55761763077632:127.00864669538129","roadAddress":"주소 없음","jibunAddress":"서울 중구 신당동 426-1","responseSize":58,"executionTimeNs":92923500,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":56200,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.55761763077632:127.00864669538129:500","categoryCount":15,"placesByCategory":{"CT1":9,"AT4":2,"CS2":15,"SC4":1,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":7,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"totalPlaces":144,"responseSize":16647,"executionTimeNs":88496300,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:50.016 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:50.016952Z","nanoTime":28016031066100,"traceId":"03babd61","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:50.016 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:50.016 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:50.016 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 14개
2025-11-21 19:53:50.016 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 14개 (총 카메라 대수: 33대)
2025-11-21 19:53:50.016 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:50.087 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  동호로 261 (거리: 362m)
2025-11-21 19:53:50.087 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:50.087 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:50.087 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:53:50.087 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:50.087 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:50.087324600Z","nanoTime":28016101495700,"traceId":"03babd61","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":70429600,"duration_ms":70,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":14,"totalCctvAfterFilter":14,"totalCameraCount":33,"filterRate":1.0,"filterExecutionTimeNs":11400,"success":true},"policeQuery":{"queryDurationNs":69921500,"found":true,"nearestAddress":"서울특별시 중구  동호로 261","nearestDistance":361.6698318424902,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":9,"AT4":2,"CS2":15,"SC4":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":7,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"placesAfterFilter":{"CT1":9,"AT4":2,"CS2":15,"SC4":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":7,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"totalBeforeFilter":144,"totalAfterFilter":144,"filterRate":1.0,"filterExecutionTimeNs":175500,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:50.087 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:50.087324600Z","nanoTime":28016101747200,"traceId":"03babd61","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:50.087 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:50.087 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 35.10, 편의성: 39.91, 종합: 37.51
2025-11-21 19:53:50.087 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:50.087324600Z","nanoTime":28016102297100,"traceId":"03babd61","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":549900,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":54.79127101968872,"policeDistance":361.6698318424902,"cctvScore":46.666666666666664,"cctvCount":14,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":35.104047972573284,"success":true},"convenienceScore":{"categoryScores":{"CT1":36.0,"AT4":6.0,"CS2":3.75,"SC4":2.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":21.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":39.910714285714285,"success":true},"overallScore":37.50738112914378,"errorMessage":null,"success":true}}
2025-11-21 19:53:50.087 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:50.087324600Z","nanoTime":28016102444800,"traceId":"03babd61","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:50.087 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:50.087 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  동호로 261, latitude=37.558764, longitude=127.004807, geohashId=wydmdj6)
2025-11-21 19:53:50.087 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 361.6698318424902
2025-11-21 19:53:50.089 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdjh
2025-11-21 19:53:50.089 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:50.089 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:50.089333300Z","nanoTime":28016103624600,"traceId":"03babd61","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1179800,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["카페이(가) 27m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdjh","dataSize":19345,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19345,"errorMessage":null,"success":true}}
2025-11-21 19:53:50.089 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:53:50.507 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:53:50.507 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.556049196797936, longitude=127.01548223996812, radius=500)
2025-11-21 19:53:50.507 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:53:50.507 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.556049196797936, longitude=127.01548223996812, radius=500
2025-11-21 19:53:50.507 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:50.507743600Z","nanoTime":28016522420600,"traceId":"fbc2f56c","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:53:50.507 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:53:50.507 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.556049196797936, lon=127.01548223996812
2025-11-21 19:53:50.508 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:50.508733700Z","nanoTime":28016522494500,"traceId":"fbc2f56c","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:53:50.508 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:50.508733700Z","nanoTime":28016522545900,"traceId":"fbc2f56c","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":51400,"duration_ms":0,"resultData":{"latitude":37.556049196797936,"longitude":127.01548223996812,"precision":7,"centerHash":"wydmdkc","adjacentHashes":["wydmdkc","wydmdm1","wydmdm4","wydmdkf","wydmdkd","wydmdk9","wydmdk8","wydmdkb","wydmdm0"],"errorMessage":null,"success":true}}
2025-11-21 19:53:50.508 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdkc, wydmdm1, wydmdm4, wydmdkf, wydmdkd, wydmdk9, wydmdk8, wydmdkb, wydmdm0]
2025-11-21 19:53:50.508 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdkc
2025-11-21 19:53:50.508 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:50.508733700Z","nanoTime":28016522666500,"traceId":"fbc2f56c","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":245900,"duration_ms":0,"resultData":{"requestLatitude":37.556049196797936,"requestLongitude":127.01548223996812,"requestRadius":500,"centerGeohashId":"wydmdkc","nineBlockGeohashes":["wydmdkc","wydmdm1","wydmdm4","wydmdkf","wydmdkd","wydmdk9","wydmdk8","wydmdkb","wydmdm0"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:53:50.508 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:50.508733700Z","nanoTime":28016522717200,"traceId":"fbc2f56c","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:53:50.508 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:53:50.508 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdkc
2025-11-21 19:53:50.508 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3143ms)
2025-11-21 19:53:50.508 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:53:50.509 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:53:50.509 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:53:50.509 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 0.7467ms, 역직렬화: 0.0ms
2025-11-21 19:53:50.509 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:53:50.509 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:50.509733Z","nanoTime":28016523963000,"traceId":"fbc2f56c","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1245800,"duration_ms":1,"resultData":{"centerGeohashId":"wydmdkc","nineBlockGeohashes":["wydmdkc","wydmdm1","wydmdm4","wydmdkf","wydmdkd","wydmdk9","wydmdk8","wydmdkb","wydmdm0"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdkc","hit":false,"valueSize":0,"l1CacheGetDurationNs":314300,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdkc","cacheKey":"data:wydmdkc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":114200},{"geohashId":"wydmdm1","cacheKey":"data:wydmdm1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":78500},{"geohashId":"wydmdm4","cacheKey":"data:wydmdm4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":70200},{"geohashId":"wydmdkf","cacheKey":"data:wydmdkf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":84500},{"geohashId":"wydmdkd","cacheKey":"data:wydmdkd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":74100},{"geohashId":"wydmdk9","cacheKey":"data:wydmdk9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":69200},{"geohashId":"wydmdk8","cacheKey":"data:wydmdk8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":67900},{"geohashId":"wydmdkb","cacheKey":"data:wydmdkb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":71000},{"geohashId":"wydmdm0","cacheKey":"data:wydmdm0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":66600}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":746700,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:53:50.509 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:50.509733Z","nanoTime":28016524067000,"traceId":"fbc2f56c","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:53:50.509 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:53:50.509 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:53:50.513 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 33건
2025-11-21 19:53:50.515 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:53:50.515 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:53:50.515 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:50.515854200Z","nanoTime":28016530326700,"traceId":"fbc2f56c","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6259700,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydmdkc","wydmdm1","wydmdm4","wydmdkf","wydmdkd","wydmdk9","wydmdk8","wydmdkb","wydmdm0"],"cctvQueryResult":{"queryGeohashIds":["wydmdkc","wydmdm1","wydmdm4","wydmdkf","wydmdkd","wydmdk9","wydmdk8","wydmdkb","wydmdm0"],"totalRowsReturned":33,"rowsPerGrid":{"wydmdkf":4,"wydmdk8":1,"wydmdk9":1,"wydmdkb":5,"wydmdm4":7,"wydmdkc":4,"wydmdkd":1,"wydmdm0":4,"wydmdm1":6},"queryExecutionTimeNs":3956600,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdkf","cacheKey":"data:wydmdkf:cctv","dataCount":4,"dataSize":525,"errorMessage":null,"success":true},{"geohashId":"wydmdk8","cacheKey":"data:wydmdk8:cctv","dataCount":1,"dataSize":132,"errorMessage":null,"success":true},{"geohashId":"wydmdk9","cacheKey":"data:wydmdk9:cctv","dataCount":1,"dataSize":128,"errorMessage":null,"success":true},{"geohashId":"wydmdkb","cacheKey":"data:wydmdkb:cctv","dataCount":5,"dataSize":649,"errorMessage":null,"success":true},{"geohashId":"wydmdm4","cacheKey":"data:wydmdm4:cctv","dataCount":7,"dataSize":906,"errorMessage":null,"success":true},{"geohashId":"wydmdkc","cacheKey":"data:wydmdkc:cctv","dataCount":4,"dataSize":523,"errorMessage":null,"success":true},{"geohashId":"wydmdkd","cacheKey":"data:wydmdkd:cctv","dataCount":1,"dataSize":131,"errorMessage":null,"success":true},{"geohashId":"wydmdm0","cacheKey":"data:wydmdm0:cctv","dataCount":4,"dataSize":522,"errorMessage":null,"success":true},{"geohashId":"wydmdm1","cacheKey":"data:wydmdm1:cctv","dataCount":6,"dataSize":782,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:53:50.515 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:50.515854200Z","nanoTime":28016530468700,"traceId":"fbc2f56c","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:53:50.515 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:53:50.515 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.556049196797936, 127.01548223996812)
2025-11-21 19:53:50.516 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:53:50.608 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:53:50.608 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:53:50.608 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:53:50.608 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.556049196797936, 127.01548223996812), 반경: 500m
2025-11-21 19:53:50.689 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:53:50.689 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 136건
2025-11-21 19:53:50.690 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:53:50.690 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:53:50.690 [http-nio-8185-exec-8] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:53:50.690 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:53:50.690 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:53:50.690 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:53:50.690 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:53:50.691 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:50.690870300Z","nanoTime":28016704897200,"traceId":"fbc2f56c","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":174428500,"duration_ms":174,"resultData":{"latitude":37.556049196797936,"longitude":127.01548223996812,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":174318700,"addressApiResult":{"cached":false,"cacheKey":"address:37.556049196797936:127.01548223996812","roadAddress":"주소 없음","jibunAddress":"서울 중구 신당동 842","responseSize":56,"executionTimeNs":92753400,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":47700,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.556049196797936:127.01548223996812:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":1,"CS2":15,"SC4":5,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":4,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalPlaces":136,"responseSize":15751,"executionTimeNs":81517600,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:50.691 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:50.691234300Z","nanoTime":28016705087700,"traceId":"fbc2f56c","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:53:50.691 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:53:50.691 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:53:50.691 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 33개
2025-11-21 19:53:50.691 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 33개 (총 카메라 대수: 77대)
2025-11-21 19:53:50.691 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:53:50.762 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 성동구  광나루로2길 35 성수지구대 (거리: 393m)
2025-11-21 19:53:50.762 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:53:50.762 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:53:50.762 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:53:50.762 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:53:50.762 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:50.762843Z","nanoTime":28016777432900,"traceId":"fbc2f56c","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":72345200,"duration_ms":72,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":33,"totalCctvAfterFilter":33,"totalCameraCount":77,"filterRate":1.0,"filterExecutionTimeNs":21600,"success":true},"policeQuery":{"queryDurationNs":71645100,"found":true,"nearestAddress":"서울특별시 성동구  광나루로2길 35 성수지구대","nearestDistance":392.56261034520395,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"AT4":1,"CS2":15,"SC4":5,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":4,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"placesAfterFilter":{"CT1":1,"AT4":1,"CS2":15,"SC4":5,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":4,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalBeforeFilter":136,"totalAfterFilter":136,"filterRate":1.0,"filterExecutionTimeNs":227300,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:53:50.762 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:50.762843Z","nanoTime":28016777786400,"traceId":"fbc2f56c","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:53:50.762 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:53:50.762 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 55.28, 편의성: 35.18, 종합: 45.23
2025-11-21 19:53:50.762 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:50.762843Z","nanoTime":28016778156700,"traceId":"fbc2f56c","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":370300,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":50.92967370684951,"policeDistance":392.56261034520395,"cctvScore":100.0,"cctvCount":33,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":55.27890211205485,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"AT4":3.0,"CS2":3.75,"SC4":10.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":12.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":35.18333333333333,"success":true},"overallScore":45.231117722694094,"errorMessage":null,"success":true}}
2025-11-21 19:53:50.762 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:50.762843Z","nanoTime":28016778357600,"traceId":"fbc2f56c","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:53:50.762 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:53:50.762 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 성동구  광나루로2길 35 성수지구대, latitude=37.554742, longitude=127.019619, geohashId=wydmdks)
2025-11-21 19:53:50.762 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 392.56261034520395
2025-11-21 19:53:50.764 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdkc
2025-11-21 19:53:50.764 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:53:50.764 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:53:50.764860200Z","nanoTime":28016780029800,"traceId":"fbc2f56c","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1672200,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["주차장이(가) 39m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdkc","dataSize":20635,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20635,"errorMessage":null,"success":true}}
2025-11-21 19:53:50.764 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:56:41.917 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:56:41.917 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56051761229504, longitude=127.01910495737411, radius=500)
2025-11-21 19:56:41.917 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:56:41.917 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56051761229504, longitude=127.01910495737411, radius=500
2025-11-21 19:56:41.917 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:41.917436400Z","nanoTime":28187931539700,"traceId":"1b3057fd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:56:41.917 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:56:41.917 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56051761229504, lon=127.01910495737411
2025-11-21 19:56:41.917 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:41.917436400Z","nanoTime":28187931620300,"traceId":"1b3057fd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:56:41.917 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:41.917436400Z","nanoTime":28187931664000,"traceId":"1b3057fd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":43700,"duration_ms":0,"resultData":{"latitude":37.56051761229504,"longitude":127.01910495737411,"precision":7,"centerHash":"wydmdms","adjacentHashes":["wydmdms","wydmdmu","wydmdmv","wydmdmt","wydmdmm","wydmdmk","wydmdm7","wydmdme","wydmdmg"],"errorMessage":null,"success":true}}
2025-11-21 19:56:41.917 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdms, wydmdmu, wydmdmv, wydmdmt, wydmdmm, wydmdmk, wydmdm7, wydmdme, wydmdmg]
2025-11-21 19:56:41.917 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdms
2025-11-21 19:56:41.917 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:41.917436400Z","nanoTime":28187931777600,"traceId":"1b3057fd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":237900,"duration_ms":0,"resultData":{"requestLatitude":37.56051761229504,"requestLongitude":127.01910495737411,"requestRadius":500,"centerGeohashId":"wydmdms","nineBlockGeohashes":["wydmdms","wydmdmu","wydmdmv","wydmdmt","wydmdmm","wydmdmk","wydmdm7","wydmdme","wydmdmg"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:56:41.917 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:41.917436400Z","nanoTime":28187931918100,"traceId":"1b3057fd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:56:41.918 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:56:41.918 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdms
2025-11-21 19:56:41.918 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4306ms)
2025-11-21 19:56:41.918 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:56:41.921 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:56:41.921 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 3개, 미스: 6개
2025-11-21 19:56:41.921 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.921ms, 역직렬화: 0.3368ms
2025-11-21 19:56:41.921 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:56:41.921 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:41.921124900Z","nanoTime":28187935578000,"traceId":"1b3057fd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3659900,"duration_ms":3,"resultData":{"centerGeohashId":"wydmdms","nineBlockGeohashes":["wydmdms","wydmdmu","wydmdmv","wydmdmt","wydmdmm","wydmdmk","wydmdm7","wydmdme","wydmdmg"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdms","hit":false,"valueSize":0,"l1CacheGetDurationNs":430600,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdms","cacheKey":"data:wydmdms:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":252900},{"geohashId":"wydmdmu","cacheKey":"data:wydmdmu:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":485,"l2CacheGetDurationNs":598200},{"geohashId":"wydmdmv","cacheKey":"data:wydmdmv:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":644,"l2CacheGetDurationNs":400200},{"geohashId":"wydmdmt","cacheKey":"data:wydmdmt:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":129800},{"geohashId":"wydmdmm","cacheKey":"data:wydmdmm:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":106600},{"geohashId":"wydmdmk","cacheKey":"data:wydmdmk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":84200},{"geohashId":"wydmdm7","cacheKey":"data:wydmdm7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":88300},{"geohashId":"wydmdme","cacheKey":"data:wydmdme:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":202500},{"geohashId":"wydmdmg","cacheKey":"data:wydmdmg:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":260,"l2CacheGetDurationNs":620800}],"l2TotalHits":3,"l2TotalMisses":6,"l2CacheTotalDurationNs":2921000,"l2JsonDeserializeTotalDurationNs":336800,"errorMessage":null,"success":true}}
2025-11-21 19:56:41.921 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:41.921124900Z","nanoTime":28187935734400,"traceId":"1b3057fd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:56:41.921 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:56:41.921 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 6개
2025-11-21 19:56:41.926 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 12건
2025-11-21 19:56:41.926 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:56:41.926 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 7개
2025-11-21 19:56:41.926 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:41.926448900Z","nanoTime":28187941766500,"traceId":"1b3057fd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6032100,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydmdms","wydmdmt","wydmdmm","wydmdmk","wydmdm7","wydmdme"],"cctvQueryResult":{"queryGeohashIds":["wydmdms","wydmdmt","wydmdmm","wydmdmk","wydmdm7","wydmdme"],"totalRowsReturned":12,"rowsPerGrid":{"wydmdmt":5,"wydmdme":2,"wydmdms":2,"wydmdmm":3},"queryExecutionTimeNs":4429500,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdmt","cacheKey":"data:wydmdmt:cctv","dataCount":5,"dataSize":620,"errorMessage":null,"success":true},{"geohashId":"wydmdme","cacheKey":"data:wydmdme:cctv","dataCount":2,"dataSize":257,"errorMessage":null,"success":true},{"geohashId":"wydmdms","cacheKey":"data:wydmdms:cctv","dataCount":2,"dataSize":256,"errorMessage":null,"success":true},{"geohashId":"wydmdmm","cacheKey":"data:wydmdmm:cctv","dataCount":3,"dataSize":388,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:56:41.926 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:41.926448900Z","nanoTime":28187941926800,"traceId":"1b3057fd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:56:41.926 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:56:41.926 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56051761229504, 127.01910495737411)
2025-11-21 19:56:41.928 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:56:42.110 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:56:42.110 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:56:42.110 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:56:42.110 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56051761229504, 127.01910495737411), 반경: 500m
2025-11-21 19:56:42.278 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:56:42.278 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 125건
2025-11-21 19:56:42.279 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:56:42.279 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:56:42.279 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 중구
2025-11-21 19:56:42.279 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 중구
2025-11-21 19:56:42.279 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:56:42.279 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:56:42.279 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:56:42.279 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.866910799
2025-11-21 19:56:42.279 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:42.279327700Z","nanoTime":28188293900400,"traceId":"1b3057fd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":351973600,"duration_ms":351,"resultData":{"latitude":37.56051761229504,"longitude":127.01910495737411,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":351852300,"addressApiResult":{"cached":false,"cacheKey":"address:37.56051761229504:127.01910495737411","roadAddress":"서울특별시 중구 다산로36길 83","jibunAddress":"서울 중구 신당동 44-17","responseSize":71,"executionTimeNs":182529100,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:중구","guName":"중구","arrestRate":0.866910799,"dataFound":true,"executionTimeNs":448100,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56051761229504:127.01910495737411:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":6,"CS2":15,"SC4":7,"MT1":1,"BK9":15,"HP8":10,"AC5":15,"CE7":15,"SW8":2,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":5},"totalPlaces":125,"responseSize":14446,"executionTimeNs":168875100,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:42.279 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:42.279327700Z","nanoTime":28188294037100,"traceId":"1b3057fd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:56:42.279 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:56:42.279 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:56:42.280 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 23개
2025-11-21 19:56:42.280 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 23개 (총 카메라 대수: 62대)
2025-11-21 19:56:42.280 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:56:42.345 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: "서울특별시 중구  다산로 248 (신당동, 신당파출소)" (거리: 557m)
2025-11-21 19:56:42.345 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:56:42.345 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:56:42.345 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:56:42.345 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:56:42.346 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:42.345158Z","nanoTime":28188359881100,"traceId":"1b3057fd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":65844000,"duration_ms":65,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":23,"totalCctvAfterFilter":23,"totalCameraCount":62,"filterRate":1.0,"filterExecutionTimeNs":14700,"success":true},"policeQuery":{"queryDurationNs":65386900,"found":true,"nearestAddress":"\"서울특별시 중구  다산로 248 (신당동, 신당파출소)\"","nearestDistance":557.1684150677366,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"AT4":6,"CS2":15,"SC4":7,"MT1":1,"BK9":15,"HP8":10,"AC5":15,"CE7":15,"SW8":2,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":5},"placesAfterFilter":{"CT1":1,"AT4":6,"CS2":15,"SC4":7,"MT1":1,"BK9":15,"HP8":10,"AC5":15,"CE7":15,"SW8":2,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":5},"totalBeforeFilter":125,"totalAfterFilter":125,"filterRate":1.0,"filterExecutionTimeNs":130400,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:42.346 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:42.346222600Z","nanoTime":28188360063500,"traceId":"1b3057fd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:56:42.346 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:56:42.346 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 65.78, 편의성: 32.56, 종합: 49.17
2025-11-21 19:56:42.346 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:42.346222600Z","nanoTime":28188360287300,"traceId":"1b3057fd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":223800,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":30.35394811653292,"policeDistance":557.1684150677366,"cctvScore":76.66666666666667,"cctvCount":23,"arrestRateScore":86.6910799,"arrestRate":0.866910799,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":65.78017507162654,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"AT4":18.0,"CS2":11.431706982486624,"SC4":14.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":6.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":40.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"중구","guPopulation":131214,"finalScore":32.56211379883244,"success":true},"overallScore":49.17114443522949,"errorMessage":null,"success":true}}
2025-11-21 19:56:42.346 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:42.346222600Z","nanoTime":28188360403200,"traceId":"1b3057fd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:56:42.346 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:56:42.346 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address="서울특별시 중구  다산로 248 (신당동, 신당파출소)", latitude=37.56504, longitude=127.016383, geohashId=wydmdqd)
2025-11-21 19:56:42.346 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 557.1684150677366
2025-11-21 19:56:42.347 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdms
2025-11-21 19:56:42.347 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:56:42.347 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:42.347157400Z","nanoTime":28188361618900,"traceId":"1b3057fd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1215700,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["병원이(가) 1m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdms","dataSize":18104,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":18104,"errorMessage":null,"success":true}}
2025-11-21 19:56:42.347 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:56:42.853 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:56:42.853 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56120076994232, longitude=127.02725424003539, radius=500)
2025-11-21 19:56:42.853 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:56:42.853 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56120076994232, longitude=127.02725424003539, radius=500
2025-11-21 19:56:42.853 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:42.853459600Z","nanoTime":28188867607900,"traceId":"d4447610","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:56:42.853 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:56:42.853 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56120076994232, lon=127.02725424003539
2025-11-21 19:56:42.853 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:42.853459600Z","nanoTime":28188867770500,"traceId":"d4447610","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:56:42.853 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:42.853459600Z","nanoTime":28188867858700,"traceId":"d4447610","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":88200,"duration_ms":0,"resultData":{"latitude":37.56120076994232,"longitude":127.02725424003539,"precision":7,"centerHash":"wydmdtf","adjacentHashes":["wydmdtf","wydmdw4","wydmdw5","wydmdtg","wydmdte","wydmdtd","wydmdt9","wydmdtc","wydmdw1"],"errorMessage":null,"success":true}}
2025-11-21 19:56:42.853 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdtf, wydmdw4, wydmdw5, wydmdtg, wydmdte, wydmdtd, wydmdt9, wydmdtc, wydmdw1]
2025-11-21 19:56:42.853 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdtf
2025-11-21 19:56:42.853 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:42.853459600Z","nanoTime":28188868056900,"traceId":"d4447610","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":449000,"duration_ms":0,"resultData":{"requestLatitude":37.56120076994232,"requestLongitude":127.02725424003539,"requestRadius":500,"centerGeohashId":"wydmdtf","nineBlockGeohashes":["wydmdtf","wydmdw4","wydmdw5","wydmdtg","wydmdte","wydmdtd","wydmdt9","wydmdtc","wydmdw1"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:56:42.853 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:42.853459600Z","nanoTime":28188868169600,"traceId":"d4447610","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:56:42.853 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:56:42.853 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdtf
2025-11-21 19:56:42.854 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.6351ms)
2025-11-21 19:56:42.854 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:56:42.856 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:56:42.856 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:56:42.856 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.9483ms, 역직렬화: 0.0ms
2025-11-21 19:56:42.856 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:56:42.856 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:42.856762500Z","nanoTime":28188871090600,"traceId":"d4447610","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2921000,"duration_ms":2,"resultData":{"centerGeohashId":"wydmdtf","nineBlockGeohashes":["wydmdtf","wydmdw4","wydmdw5","wydmdtg","wydmdte","wydmdtd","wydmdt9","wydmdtc","wydmdw1"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdtf","hit":false,"valueSize":0,"l1CacheGetDurationNs":635100,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdtf","cacheKey":"data:wydmdtf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":304800},{"geohashId":"wydmdw4","cacheKey":"data:wydmdw4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":187400},{"geohashId":"wydmdw5","cacheKey":"data:wydmdw5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":284000},{"geohashId":"wydmdtg","cacheKey":"data:wydmdtg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":295500},{"geohashId":"wydmdte","cacheKey":"data:wydmdte:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":215400},{"geohashId":"wydmdtd","cacheKey":"data:wydmdtd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":119500},{"geohashId":"wydmdt9","cacheKey":"data:wydmdt9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":163300},{"geohashId":"wydmdtc","cacheKey":"data:wydmdtc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":118500},{"geohashId":"wydmdw1","cacheKey":"data:wydmdw1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":173700}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1948300,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:56:42.856 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:42.856762500Z","nanoTime":28188871247000,"traceId":"d4447610","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:56:42.856 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:56:42.856 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:56:42.861 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 28건
2025-11-21 19:56:42.864 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:56:42.864 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:56:42.864 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:42.864322300Z","nanoTime":28188878830500,"traceId":"d4447610","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":7583500,"duration_ms":7,"resultData":{"inputCctvMissGrids":["wydmdtf","wydmdw4","wydmdw5","wydmdtg","wydmdte","wydmdtd","wydmdt9","wydmdtc","wydmdw1"],"cctvQueryResult":{"queryGeohashIds":["wydmdtf","wydmdw4","wydmdw5","wydmdtg","wydmdte","wydmdtd","wydmdt9","wydmdtc","wydmdw1"],"totalRowsReturned":28,"rowsPerGrid":{"wydmdw4":3,"wydmdw5":3,"wydmdw1":2,"wydmdtg":7,"wydmdt9":1,"wydmdtc":1,"wydmdtd":2,"wydmdte":8,"wydmdtf":1},"queryExecutionTimeNs":4746200,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdw4","cacheKey":"data:wydmdw4:cctv","dataCount":3,"dataSize":401,"errorMessage":null,"success":true},{"geohashId":"wydmdw5","cacheKey":"data:wydmdw5:cctv","dataCount":3,"dataSize":405,"errorMessage":null,"success":true},{"geohashId":"wydmdw1","cacheKey":"data:wydmdw1:cctv","dataCount":2,"dataSize":269,"errorMessage":null,"success":true},{"geohashId":"wydmdtg","cacheKey":"data:wydmdtg:cctv","dataCount":7,"dataSize":944,"errorMessage":null,"success":true},{"geohashId":"wydmdt9","cacheKey":"data:wydmdt9:cctv","dataCount":1,"dataSize":137,"errorMessage":null,"success":true},{"geohashId":"wydmdtc","cacheKey":"data:wydmdtc:cctv","dataCount":1,"dataSize":136,"errorMessage":null,"success":true},{"geohashId":"wydmdtd","cacheKey":"data:wydmdtd:cctv","dataCount":2,"dataSize":268,"errorMessage":null,"success":true},{"geohashId":"wydmdte","cacheKey":"data:wydmdte:cctv","dataCount":8,"dataSize":1060,"errorMessage":null,"success":true},{"geohashId":"wydmdtf","cacheKey":"data:wydmdtf:cctv","dataCount":1,"dataSize":137,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:56:42.865 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:42.865325500Z","nanoTime":28188879106200,"traceId":"d4447610","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:56:42.865 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:56:42.865 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56120076994232, 127.02725424003539)
2025-11-21 19:56:42.865 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:56:42.937 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:56:42.937 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:56:42.939 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:56:42.939 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56120076994232, 127.02725424003539), 반경: 500m
2025-11-21 19:56:43.027 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:56:43.027 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 128건
2025-11-21 19:56:43.032 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:56:43.032 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:56:43.032 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 19:56:43.032 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 성동구
2025-11-21 19:56:43.034 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:56:43.034 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:56:43.034 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:56:43.034 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 19:56:43.034 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:43.034773100Z","nanoTime":28189048636500,"traceId":"d4447610","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":169530300,"duration_ms":169,"resultData":{"latitude":37.56120076994232,"longitude":127.02725424003539,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":169270800,"addressApiResult":{"cached":false,"cacheKey":"address:37.56120076994232:127.02725424003539","roadAddress":"서울특별시 성동구 무학봉길 35","jibunAddress":"서울 성동구 하왕십리동 1002","responseSize":72,"executionTimeNs":74139100,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":1053400,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56120076994232:127.02725424003539:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":0,"CS2":15,"SC4":3,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":3,"FD6":15,"PK6":12,"OL7":1,"PM9":15},"totalPlaces":128,"responseSize":14898,"executionTimeNs":94078300,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:43.034 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:43.034773100Z","nanoTime":28189048946200,"traceId":"d4447610","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:56:43.034 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:56:43.034 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:56:43.034 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 28개
2025-11-21 19:56:43.035 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 28개 (총 카메라 대수: 81대)
2025-11-21 19:56:43.035 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:56:43.119 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구 영신로20길 11 (거리: 442m)
2025-11-21 19:56:43.119 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:56:43.119 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:56:43.119 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 19:56:43.119 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:56:43.119 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:43.119187700Z","nanoTime":28189134313100,"traceId":"d4447610","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":85366900,"duration_ms":85,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":28,"totalCctvAfterFilter":28,"totalCameraCount":81,"filterRate":1.0,"filterExecutionTimeNs":22800,"success":true},"policeQuery":{"queryDurationNs":84562900,"found":true,"nearestAddress":"서울특별시 영등포구 영신로20길 11","nearestDistance":442.41714048576864,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CS2":15,"SC4":3,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":3,"FD6":15,"PK6":12,"OL7":1,"PM9":15},"placesAfterFilter":{"CS2":15,"SC4":3,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":3,"FD6":15,"PK6":12,"OL7":1,"PM9":15},"totalBeforeFilter":128,"totalAfterFilter":128,"filterRate":1.0,"filterExecutionTimeNs":235500,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:43.119 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:43.119187700Z","nanoTime":28189134559800,"traceId":"d4447610","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:56:43.119 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:56:43.119 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 73.10, 편의성: 39.72, 종합: 56.41
2025-11-21 19:56:43.119 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:43.119187700Z","nanoTime":28189134883600,"traceId":"d4447610","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":323800,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":44.69785743927892,"policeDistance":442.41714048576864,"cctvScore":93.33333333333333,"cctvCount":28,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":73.097613445117,"success":true},"convenienceScore":{"categoryScores":{"CS2":5.333162672127825,"SC4":6.0,"MT1":20.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":36.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":39.717935590163684,"success":true},"overallScore":56.40777451764035,"errorMessage":null,"success":true}}
2025-11-21 19:56:43.119 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:43.119187700Z","nanoTime":28189135067700,"traceId":"d4447610","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:56:43.119 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:56:43.119 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구 영신로20길 11, latitude=37.557429, longitude=127.028852, geohashId=wydmdt5)
2025-11-21 19:56:43.119 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 442.41714048576864
2025-11-21 19:56:43.119 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdtf
2025-11-21 19:56:43.119 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:56:43.119 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:43.119187700Z","nanoTime":28189137121900,"traceId":"d4447610","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":2054200,"duration_ms":2,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 82m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdtf","dataSize":19232,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19232,"errorMessage":null,"success":true}}
2025-11-21 19:56:43.119 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:56:43.627 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:56:43.627 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5630191560256, longitude=127.03357061471118, radius=500)
2025-11-21 19:56:43.627 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:56:43.627 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5630191560256, longitude=127.03357061471118, radius=500
2025-11-21 19:56:43.627 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:43.627803500Z","nanoTime":28189642481500,"traceId":"e6a446e1","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:56:43.627 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:56:43.627 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5630191560256, lon=127.03357061471118
2025-11-21 19:56:43.628 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:43.628805800Z","nanoTime":28189642579700,"traceId":"e6a446e1","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:56:43.628 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:43.628805800Z","nanoTime":28189642641500,"traceId":"e6a446e1","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":61800,"duration_ms":0,"resultData":{"latitude":37.5630191560256,"longitude":127.03357061471118,"precision":7,"centerHash":"wydmdwp","adjacentHashes":["wydmdwp","wydmdwr","wydmdy2","wydmdy0","wydmdvb","wydmdtz","wydmdty","wydmdwn","wydmdwq"],"errorMessage":null,"success":true}}
2025-11-21 19:56:43.628 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdwp, wydmdwr, wydmdy2, wydmdy0, wydmdvb, wydmdtz, wydmdty, wydmdwn, wydmdwq]
2025-11-21 19:56:43.628 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdwp
2025-11-21 19:56:43.628 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:43.628805800Z","nanoTime":28189642752000,"traceId":"e6a446e1","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":270500,"duration_ms":0,"resultData":{"requestLatitude":37.5630191560256,"requestLongitude":127.03357061471118,"requestRadius":500,"centerGeohashId":"wydmdwp","nineBlockGeohashes":["wydmdwp","wydmdwr","wydmdy2","wydmdy0","wydmdvb","wydmdtz","wydmdty","wydmdwn","wydmdwq"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:56:43.628 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:43.628805800Z","nanoTime":28189642796200,"traceId":"e6a446e1","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:56:43.628 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:56:43.628 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdwp
2025-11-21 19:56:43.628 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3459ms)
2025-11-21 19:56:43.628 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:56:43.632 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:56:43.633 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 5개, 미스: 4개
2025-11-21 19:56:43.633 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 3.5264ms, 역직렬화: 0.504ms
2025-11-21 19:56:43.633 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:56:43.633 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:43.633103700Z","nanoTime":28189646962100,"traceId":"e6a446e1","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":4165900,"duration_ms":4,"resultData":{"centerGeohashId":"wydmdwp","nineBlockGeohashes":["wydmdwp","wydmdwr","wydmdy2","wydmdy0","wydmdvb","wydmdtz","wydmdty","wydmdwn","wydmdwq"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdwp","hit":false,"valueSize":0,"l1CacheGetDurationNs":345900,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdwp","cacheKey":"data:wydmdwp:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":362,"l2CacheGetDurationNs":319000},{"geohashId":"wydmdwr","cacheKey":"data:wydmdwr:cctv","hit":true,"dataType":"cctv","dataCount":6,"dataSize":776,"l2CacheGetDurationNs":342000},{"geohashId":"wydmdy2","cacheKey":"data:wydmdy2:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":386,"l2CacheGetDurationNs":482700},{"geohashId":"wydmdy0","cacheKey":"data:wydmdy0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":170300},{"geohashId":"wydmdvb","cacheKey":"data:wydmdvb:cctv","hit":true,"dataType":"cctv","dataCount":7,"dataSize":881,"l2CacheGetDurationNs":364000},{"geohashId":"wydmdtz","cacheKey":"data:wydmdtz:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":529,"l2CacheGetDurationNs":549200},{"geohashId":"wydmdty","cacheKey":"data:wydmdty:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":236700},{"geohashId":"wydmdwn","cacheKey":"data:wydmdwn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":150100},{"geohashId":"wydmdwq","cacheKey":"data:wydmdwq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":257900}],"l2TotalHits":5,"l2TotalMisses":4,"l2CacheTotalDurationNs":3526400,"l2JsonDeserializeTotalDurationNs":504000,"errorMessage":null,"success":true}}
2025-11-21 19:56:43.633 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:43.633103700Z","nanoTime":28189647149600,"traceId":"e6a446e1","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:56:43.633 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:56:43.633 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 4개
2025-11-21 19:56:43.636 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 13건
2025-11-21 19:56:43.637 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:56:43.637 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:56:43.637 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:43.637934700Z","nanoTime":28189652118900,"traceId":"e6a446e1","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4969300,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmdy0","wydmdty","wydmdwn","wydmdwq"],"cctvQueryResult":{"queryGeohashIds":["wydmdy0","wydmdty","wydmdwn","wydmdwq"],"totalRowsReturned":13,"rowsPerGrid":{"wydmdwn":5,"wydmdwq":4,"wydmdty":4},"queryExecutionTimeNs":3894900,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdwn","cacheKey":"data:wydmdwn:cctv","dataCount":5,"dataSize":644,"errorMessage":null,"success":true},{"geohashId":"wydmdwq","cacheKey":"data:wydmdwq:cctv","dataCount":4,"dataSize":530,"errorMessage":null,"success":true},{"geohashId":"wydmdty","cacheKey":"data:wydmdty:cctv","dataCount":4,"dataSize":534,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:56:43.637 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:43.637934700Z","nanoTime":28189652235500,"traceId":"e6a446e1","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:56:43.637 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:56:43.637 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5630191560256, 127.03357061471118)
2025-11-21 19:56:43.637 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:56:43.742 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:56:43.742 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:56:43.742 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:56:43.742 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5630191560256, 127.03357061471118), 반경: 500m
2025-11-21 19:56:43.823 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:56:43.823 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 144건
2025-11-21 19:56:43.824 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:56:43.825 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:56:43.825 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 19:56:43.825 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 성동구
2025-11-21 19:56:43.825 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:56:43.825 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:56:43.825 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:56:43.825 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 19:56:43.825 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:43.825155200Z","nanoTime":28189839738500,"traceId":"e6a446e1","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":187503000,"duration_ms":187,"resultData":{"latitude":37.5630191560256,"longitude":127.03357061471118,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":187361200,"addressApiResult":{"cached":false,"cacheKey":"address:37.5630191560256:127.03357061471118","roadAddress":"서울특별시 성동구 왕십리로24길 3","jibunAddress":"서울 성동구 도선동 253-5","responseSize":73,"executionTimeNs":104333000,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":709600,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5630191560256:127.03357061471118:500","categoryCount":15,"placesByCategory":{"CT1":6,"AT4":2,"CS2":15,"SC4":1,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":7,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalPlaces":144,"responseSize":16680,"executionTimeNs":82318600,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:43.825 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:43.825155200Z","nanoTime":28189840021800,"traceId":"e6a446e1","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:56:43.825 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:56:43.825 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:56:43.825 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 36개
2025-11-21 19:56:43.825 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 36개 (총 카메라 대수: 108대)
2025-11-21 19:56:43.825 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:56:43.898 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구 대림로 197 (거리: 413m)
2025-11-21 19:56:43.898 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:56:43.898 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:56:43.898 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:56:43.898 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:56:43.898 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:43.898382800Z","nanoTime":28189917273700,"traceId":"e6a446e1","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":77251900,"duration_ms":77,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":36,"totalCctvAfterFilter":36,"totalCameraCount":108,"filterRate":1.0,"filterExecutionTimeNs":15900,"success":true},"policeQuery":{"queryDurationNs":76677900,"found":true,"nearestAddress":"서울특별시 영등포구 대림로 197","nearestDistance":413.353993325371,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":6,"AT4":2,"CS2":15,"SC4":1,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":7,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"placesAfterFilter":{"CT1":6,"AT4":2,"CS2":15,"SC4":1,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":7,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalBeforeFilter":144,"totalAfterFilter":144,"filterRate":1.0,"filterExecutionTimeNs":172500,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:43.898 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:43.898382800Z","nanoTime":28189917523700,"traceId":"e6a446e1","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:56:43.898 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:56:43.898 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 76.85, 편의성: 38.22, 종합: 57.54
2025-11-21 19:56:43.898 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:43.898382800Z","nanoTime":28189917915900,"traceId":"e6a446e1","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":392200,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":48.330750834328626,"policeDistance":413.353993325371,"cctvScore":100.0,"cctvCount":36,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":76.85414813029858,"success":true},"convenienceScore":{"categoryScores":{"CT1":24.0,"AT4":6.0,"CS2":5.333162672127825,"SC4":2.0,"MT1":30.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":21.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":38.22221084480852,"success":true},"overallScore":57.53817948755355,"errorMessage":null,"success":true}}
2025-11-21 19:56:43.898 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:43.898382800Z","nanoTime":28189918179600,"traceId":"e6a446e1","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:56:43.898 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:56:43.898 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구 대림로 197, latitude=37.566665, longitude=127.032655, geohashId=wydmdwy)
2025-11-21 19:56:43.898 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 413.353993325371
2025-11-21 19:56:43.905 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdwp
2025-11-21 19:56:43.905 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:56:43.905 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:43.905821400Z","nanoTime":28189920275500,"traceId":"e6a446e1","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":2095900,"duration_ms":2,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["은행이(가) 41m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdwp","dataSize":21681,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":21681,"errorMessage":null,"success":true}}
2025-11-21 19:56:43.905 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:56:44.364 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:56:44.364 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56448068273045, longitude=127.02598774026552, radius=500)
2025-11-21 19:56:44.364 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:56:44.364 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56448068273045, longitude=127.02598774026552, radius=500
2025-11-21 19:56:44.364 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:44.364317300Z","nanoTime":28190378752800,"traceId":"5820c5a5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:56:44.364 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:56:44.364 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56448068273045, lon=127.02598774026552
2025-11-21 19:56:44.364 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:44.364317300Z","nanoTime":28190378870900,"traceId":"5820c5a5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:56:44.364 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:44.364317300Z","nanoTime":28190378924200,"traceId":"5820c5a5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":53300,"duration_ms":0,"resultData":{"latitude":37.56448068273045,"longitude":127.02598774026552,"precision":7,"centerHash":"wydmdw3","adjacentHashes":["wydmdw3","wydmdw9","wydmdwd","wydmdw6","wydmdw4","wydmdw1","wydmdw0","wydmdw2","wydmdw8"],"errorMessage":null,"success":true}}
2025-11-21 19:56:44.364 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdw3, wydmdw9, wydmdwd, wydmdw6, wydmdw4, wydmdw1, wydmdw0, wydmdw2, wydmdw8]
2025-11-21 19:56:44.364 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdw3
2025-11-21 19:56:44.364 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:44.364317300Z","nanoTime":28190379045400,"traceId":"5820c5a5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":292600,"duration_ms":0,"resultData":{"requestLatitude":37.56448068273045,"requestLongitude":127.02598774026552,"requestRadius":500,"centerGeohashId":"wydmdw3","nineBlockGeohashes":["wydmdw3","wydmdw9","wydmdwd","wydmdw6","wydmdw4","wydmdw1","wydmdw0","wydmdw2","wydmdw8"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:56:44.364 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:44.364317300Z","nanoTime":28190379089200,"traceId":"5820c5a5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:56:44.364 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:56:44.364 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdw3
2025-11-21 19:56:44.365 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3337ms)
2025-11-21 19:56:44.365 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:56:44.368 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:56:44.368 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 3개, 미스: 6개
2025-11-21 19:56:44.368 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.9577ms, 역직렬화: 0.3478ms
2025-11-21 19:56:44.368 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:56:44.368 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:44.368623400Z","nanoTime":28190382653900,"traceId":"5820c5a5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3564700,"duration_ms":3,"resultData":{"centerGeohashId":"wydmdw3","nineBlockGeohashes":["wydmdw3","wydmdw9","wydmdwd","wydmdw6","wydmdw4","wydmdw1","wydmdw0","wydmdw2","wydmdw8"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdw3","hit":false,"valueSize":0,"l1CacheGetDurationNs":333700,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdw3","cacheKey":"data:wydmdw3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":159900},{"geohashId":"wydmdw9","cacheKey":"data:wydmdw9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":159500},{"geohashId":"wydmdwd","cacheKey":"data:wydmdwd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":132700},{"geohashId":"wydmdw6","cacheKey":"data:wydmdw6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":109200},{"geohashId":"wydmdw4","cacheKey":"data:wydmdw4:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":401,"l2CacheGetDurationNs":744600},{"geohashId":"wydmdw1","cacheKey":"data:wydmdw1:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":269,"l2CacheGetDurationNs":516100},{"geohashId":"wydmdw0","cacheKey":"data:wydmdw0:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":654,"l2CacheGetDurationNs":420900},{"geohashId":"wydmdw2","cacheKey":"data:wydmdw2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":117500},{"geohashId":"wydmdw8","cacheKey":"data:wydmdw8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":124400}],"l2TotalHits":3,"l2TotalMisses":6,"l2CacheTotalDurationNs":2957700,"l2JsonDeserializeTotalDurationNs":347800,"errorMessage":null,"success":true}}
2025-11-21 19:56:44.368 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:44.368623400Z","nanoTime":28190382870700,"traceId":"5820c5a5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:56:44.368 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:56:44.368 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 6개
2025-11-21 19:56:44.371 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 12건
2025-11-21 19:56:44.373 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:56:44.373 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 7개
2025-11-21 19:56:44.373 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:44.373983400Z","nanoTime":28190388181300,"traceId":"5820c5a5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5310600,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydmdw3","wydmdw9","wydmdwd","wydmdw6","wydmdw2","wydmdw8"],"cctvQueryResult":{"queryGeohashIds":["wydmdw3","wydmdw9","wydmdwd","wydmdw6","wydmdw2","wydmdw8"],"totalRowsReturned":12,"rowsPerGrid":{"wydmdw3":3,"wydmdw6":7,"wydmdw8":1,"wydmdw9":1},"queryExecutionTimeNs":3586500,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdw3","cacheKey":"data:wydmdw3:cctv","dataCount":3,"dataSize":385,"errorMessage":null,"success":true},{"geohashId":"wydmdw6","cacheKey":"data:wydmdw6:cctv","dataCount":7,"dataSize":945,"errorMessage":null,"success":true},{"geohashId":"wydmdw8","cacheKey":"data:wydmdw8:cctv","dataCount":1,"dataSize":133,"errorMessage":null,"success":true},{"geohashId":"wydmdw9","cacheKey":"data:wydmdw9:cctv","dataCount":1,"dataSize":135,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:56:44.374 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:44.374564200Z","nanoTime":28190388330500,"traceId":"5820c5a5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:56:44.374 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:56:44.374 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56448068273045, 127.02598774026552)
2025-11-21 19:56:44.374 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:56:44.437 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:56:44.437 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:56:44.438 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:56:44.438 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56448068273045, 127.02598774026552), 반경: 500m
2025-11-21 19:56:44.522 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:56:44.522 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 133건
2025-11-21 19:56:44.523 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:56:44.523 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:56:44.523 [http-nio-8185-exec-5] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:56:44.523 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:56:44.523 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:56:44.524 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:56:44.524 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:56:44.524 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:44.524613800Z","nanoTime":28190538412000,"traceId":"5820c5a5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":150081500,"duration_ms":150,"resultData":{"latitude":37.56448068273045,"longitude":127.02598774026552,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":149931700,"addressApiResult":{"cached":false,"cacheKey":"address:37.56448068273045:127.02598774026552","roadAddress":"주소 없음","jibunAddress":"서울 중구 신당동 616","responseSize":56,"executionTimeNs":63441600,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":36200,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56448068273045:127.02598774026552:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":1,"CS2":15,"SC4":6,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalPlaces":133,"responseSize":15515,"executionTimeNs":86453900,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:44.524 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:44.524613800Z","nanoTime":28190538607500,"traceId":"5820c5a5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:56:44.524 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:56:44.524 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:56:44.524 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 22개
2025-11-21 19:56:44.524 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 22개 (총 카메라 대수: 58대)
2025-11-21 19:56:44.524 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:56:44.595 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구 대림로 197 (거리: 636m)
2025-11-21 19:56:44.595 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:56:44.595 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:56:44.596 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:56:44.596 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:56:44.596 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:44.596388200Z","nanoTime":28190610218600,"traceId":"5820c5a5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":71611100,"duration_ms":71,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":22,"totalCctvAfterFilter":22,"totalCameraCount":58,"filterRate":1.0,"filterExecutionTimeNs":15300,"success":true},"policeQuery":{"queryDurationNs":70940400,"found":true,"nearestAddress":"서울특별시 영등포구 대림로 197","nearestDistance":635.864084956237,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"AT4":1,"CS2":15,"SC4":6,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"placesAfterFilter":{"CT1":1,"AT4":1,"CS2":15,"SC4":6,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalBeforeFilter":133,"totalAfterFilter":133,"filterRate":1.0,"filterExecutionTimeNs":187300,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:44.596 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:44.596388200Z","nanoTime":28190610515100,"traceId":"5820c5a5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:56:44.596 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:56:44.596 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 35.49, 편의성: 34.92, 종합: 35.20
2025-11-21 19:56:44.596 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:44.596896700Z","nanoTime":28190610912600,"traceId":"5820c5a5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":397500,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":20.516989380470378,"policeDistance":635.864084956237,"cctvScore":73.33333333333333,"cctvCount":22,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":35.488430147474446,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"AT4":3.0,"CS2":3.75,"SC4":12.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":6.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":34.916666666666664,"success":true},"overallScore":35.20254840707055,"errorMessage":null,"success":true}}
2025-11-21 19:56:44.596 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:44.596896700Z","nanoTime":28190611088000,"traceId":"5820c5a5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:56:44.596 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:56:44.596 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구 대림로 197, latitude=37.566665, longitude=127.032655, geohashId=wydmdwy)
2025-11-21 19:56:44.596 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 635.864084956237
2025-11-21 19:56:44.597 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdw3
2025-11-21 19:56:44.597 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:56:44.597 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:44.597912700Z","nanoTime":28190612488900,"traceId":"5820c5a5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1400900,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["주유소이(가) 59m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdw3","dataSize":19463,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19463,"errorMessage":null,"success":true}}
2025-11-21 19:56:44.597 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:56:45.073 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:56:45.073 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56284201053249, longitude=127.02014684870717, radius=500)
2025-11-21 19:56:45.073 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:56:45.073 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56284201053249, longitude=127.02014684870717, radius=500
2025-11-21 19:56:45.073 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:45.073551300Z","nanoTime":28191087698100,"traceId":"5c71cb7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:56:45.073 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:56:45.073 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56284201053249, lon=127.02014684870717
2025-11-21 19:56:45.073 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:45.073551300Z","nanoTime":28191087787600,"traceId":"5c71cb7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:56:45.073 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:45.073551300Z","nanoTime":28191087838100,"traceId":"5c71cb7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":50500,"duration_ms":0,"resultData":{"latitude":37.56284201053249,"longitude":127.02014684870717,"precision":7,"centerHash":"wydmdqj","adjacentHashes":["wydmdqj","wydmdqm","wydmdqq","wydmdqn","wydmdmy","wydmdmv","wydmdmu","wydmdqh","wydmdqk"],"errorMessage":null,"success":true}}
2025-11-21 19:56:45.073 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdqj, wydmdqm, wydmdqq, wydmdqn, wydmdmy, wydmdmv, wydmdmu, wydmdqh, wydmdqk]
2025-11-21 19:56:45.073 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdqj
2025-11-21 19:56:45.073 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:45.073551300Z","nanoTime":28191087961300,"traceId":"5c71cb7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":263200,"duration_ms":0,"resultData":{"requestLatitude":37.56284201053249,"requestLongitude":127.02014684870717,"requestRadius":500,"centerGeohashId":"wydmdqj","nineBlockGeohashes":["wydmdqj","wydmdqm","wydmdqq","wydmdqn","wydmdmy","wydmdmv","wydmdmu","wydmdqh","wydmdqk"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:56:45.073 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:45.073551300Z","nanoTime":28191088009800,"traceId":"5c71cb7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:56:45.073 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:56:45.073 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdqj
2025-11-21 19:56:45.074 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4476ms)
2025-11-21 19:56:45.074 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:56:45.078 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:56:45.078 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 8개, 미스: 1개
2025-11-21 19:56:45.078 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 4.465ms, 역직렬화: 0.7385ms
2025-11-21 19:56:45.078 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:56:45.078 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:45.078843800Z","nanoTime":28191093255400,"traceId":"5c71cb7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":5245600,"duration_ms":5,"resultData":{"centerGeohashId":"wydmdqj","nineBlockGeohashes":["wydmdqj","wydmdqm","wydmdqq","wydmdqn","wydmdmy","wydmdmv","wydmdmu","wydmdqh","wydmdqk"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdqj","hit":false,"valueSize":0,"l1CacheGetDurationNs":447600,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdqj","cacheKey":"data:wydmdqj:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":648,"l2CacheGetDurationNs":616600},{"geohashId":"wydmdqm","cacheKey":"data:wydmdqm:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":261,"l2CacheGetDurationNs":484800},{"geohashId":"wydmdqq","cacheKey":"data:wydmdqq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":176600},{"geohashId":"wydmdqn","cacheKey":"data:wydmdqn:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":654,"l2CacheGetDurationNs":473800},{"geohashId":"wydmdmy","cacheKey":"data:wydmdmy:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":262,"l2CacheGetDurationNs":519800},{"geohashId":"wydmdmv","cacheKey":"data:wydmdmv:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":644,"l2CacheGetDurationNs":340700},{"geohashId":"wydmdmu","cacheKey":"data:wydmdmu:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":485,"l2CacheGetDurationNs":285200},{"geohashId":"wydmdqh","cacheKey":"data:wydmdqh:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":130,"l2CacheGetDurationNs":292400},{"geohashId":"wydmdqk","cacheKey":"data:wydmdqk:cctv","hit":true,"dataType":"cctv","dataCount":6,"dataSize":780,"l2CacheGetDurationNs":374400}],"l2TotalHits":8,"l2TotalMisses":1,"l2CacheTotalDurationNs":4465000,"l2JsonDeserializeTotalDurationNs":738500,"errorMessage":null,"success":true}}
2025-11-21 19:56:45.078 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:45.078843800Z","nanoTime":28191093430200,"traceId":"5c71cb7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:56:45.078 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:56:45.078 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 1개
2025-11-21 19:56:45.085 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 1건
2025-11-21 19:56:45.085 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:56:45.085 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:56:45.085 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:45.085031Z","nanoTime":28191099473400,"traceId":"5c71cb7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6043200,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydmdqq"],"cctvQueryResult":{"queryGeohashIds":["wydmdqq"],"totalRowsReturned":1,"rowsPerGrid":{"wydmdqq":1},"queryExecutionTimeNs":5324300,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdqq","cacheKey":"data:wydmdqq:cctv","dataCount":1,"dataSize":132,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:56:45.085 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:45.085031Z","nanoTime":28191099638000,"traceId":"5c71cb7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:56:45.085 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:56:45.085 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56284201053249, 127.02014684870717)
2025-11-21 19:56:45.086 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:56:45.173 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:56:45.173 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:56:45.173 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:56:45.173 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56284201053249, 127.02014684870717), 반경: 500m
2025-11-21 19:56:45.259 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:56:45.260 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 140건
2025-11-21 19:56:45.260 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:56:45.260 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:56:45.260 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 중구
2025-11-21 19:56:45.260 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 중구
2025-11-21 19:56:45.260 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:56:45.260 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:56:45.260 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:56:45.260 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.866910799
2025-11-21 19:56:45.260 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:45.260603500Z","nanoTime":28191276692300,"traceId":"5c71cb7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":177054300,"duration_ms":177,"resultData":{"latitude":37.56284201053249,"longitude":127.02014684870717,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":176922800,"addressApiResult":{"cached":false,"cacheKey":"address:37.56284201053249:127.02014684870717","roadAddress":"서울특별시 중구 퇴계로88다길 19","jibunAddress":"서울 중구 신당동 67-87","responseSize":72,"executionTimeNs":87947400,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:중구","guName":"중구","arrestRate":0.866910799,"dataFound":true,"executionTimeNs":513600,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56284201053249:127.02014684870717:500","categoryCount":15,"placesByCategory":{"CT1":2,"AT4":7,"CS2":15,"SC4":3,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":5,"FD6":15,"PK6":15,"OL7":2,"PM9":14},"totalPlaces":140,"responseSize":16162,"executionTimeNs":88461800,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:45.260 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:45.260603500Z","nanoTime":28191276875400,"traceId":"5c71cb7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:56:45.260 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:56:45.260 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:56:45.260 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 31개
2025-11-21 19:56:45.260 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 31개 (총 카메라 대수: 84대)
2025-11-21 19:56:45.260 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:56:45.341 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: "서울특별시 중구  다산로 248 (신당동, 신당파출소)" (거리: 412m)
2025-11-21 19:56:45.341 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:56:45.341 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:56:45.341 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:56:45.341 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:56:45.341 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:45.341810400Z","nanoTime":28191358972000,"traceId":"5c71cb7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":82096600,"duration_ms":82,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":31,"totalCctvAfterFilter":31,"totalCameraCount":84,"filterRate":1.0,"filterExecutionTimeNs":25000,"success":true},"policeQuery":{"queryDurationNs":81499900,"found":true,"nearestAddress":"\"서울특별시 중구  다산로 248 (신당동, 신당파출소)\"","nearestDistance":412.05857554780937,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":2,"AT4":7,"CS2":15,"SC4":3,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":5,"FD6":15,"PK6":15,"OL7":2,"PM9":14},"placesAfterFilter":{"CT1":2,"AT4":7,"CS2":15,"SC4":3,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":5,"FD6":15,"PK6":15,"OL7":2,"PM9":14},"totalBeforeFilter":140,"totalAfterFilter":140,"filterRate":1.0,"filterExecutionTimeNs":171000,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:45.341 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:45.341810400Z","nanoTime":28191359227400,"traceId":"5c71cb7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:56:45.341 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:56:45.341 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 80.56, 편의성: 37.43, 종합: 58.99
2025-11-21 19:56:45.341 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:45.341810400Z","nanoTime":28191359508700,"traceId":"5c71cb7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":281300,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":48.49267805652383,"policeDistance":412.05857554780937,"cctvScore":100.0,"cctvCount":31,"arrestRateScore":86.6910799,"arrestRate":0.866910799,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":80.55512738695715,"success":true},"convenienceScore":{"categoryScores":{"CT1":8.0,"AT4":21.0,"CS2":11.431706982486624,"SC4":6.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":15.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"중구","guPopulation":131214,"finalScore":37.42878046549911,"success":true},"overallScore":58.991953926228135,"errorMessage":null,"success":true}}
2025-11-21 19:56:45.341 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:45.341810400Z","nanoTime":28191359683600,"traceId":"5c71cb7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:56:45.341 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:56:45.341 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address="서울특별시 중구  다산로 248 (신당동, 신당파출소)", latitude=37.56504, longitude=127.016383, geohashId=wydmdqd)
2025-11-21 19:56:45.341 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 412.05857554780937
2025-11-21 19:56:45.341 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdqj
2025-11-21 19:56:45.341 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:56:45.341 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:45.341810400Z","nanoTime":28191361357800,"traceId":"5c71cb7d","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1674200,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["이 지역은 안전 인프라가 잘 갖춰져 있습니다.","학원이(가) 68m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdqj","dataSize":20734,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20734,"errorMessage":null,"success":true}}
2025-11-21 19:56:45.341 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:56:45.822 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:56:45.822 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56766929266873, longitude=127.02986000908055, radius=500)
2025-11-21 19:56:45.822 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:56:45.822 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56766929266873, longitude=127.02986000908055, radius=500
2025-11-21 19:56:45.822 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:45.822020100Z","nanoTime":28191836548200,"traceId":"bed08f03","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:56:45.822 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:56:45.822 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56766929266873, lon=127.02986000908055
2025-11-21 19:56:45.822 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:45.822020100Z","nanoTime":28191836637100,"traceId":"bed08f03","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:56:45.822 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:45.822020100Z","nanoTime":28191836688000,"traceId":"bed08f03","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":50900,"duration_ms":0,"resultData":{"latitude":37.56766929266873,"longitude":127.02986000908055,"precision":7,"centerHash":"wydmdwu","adjacentHashes":["wydmdwu","wydmdxh","wydmdxj","wydmdwv","wydmdwt","wydmdws","wydmdwe","wydmdwg","wydmdx5"],"errorMessage":null,"success":true}}
2025-11-21 19:56:45.822 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdwu, wydmdxh, wydmdxj, wydmdwv, wydmdwt, wydmdws, wydmdwe, wydmdwg, wydmdx5]
2025-11-21 19:56:45.823 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdwu
2025-11-21 19:56:45.823 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:45.823021200Z","nanoTime":28191836803600,"traceId":"bed08f03","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":255400,"duration_ms":0,"resultData":{"requestLatitude":37.56766929266873,"requestLongitude":127.02986000908055,"requestRadius":500,"centerGeohashId":"wydmdwu","nineBlockGeohashes":["wydmdwu","wydmdxh","wydmdxj","wydmdwv","wydmdwt","wydmdws","wydmdwe","wydmdwg","wydmdx5"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:56:45.823 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:45.823021200Z","nanoTime":28191836849300,"traceId":"bed08f03","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:56:45.823 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:56:45.823 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdwu
2025-11-21 19:56:45.823 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5103ms)
2025-11-21 19:56:45.823 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:56:45.824 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:56:45.824 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:56:45.824 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.7335ms, 역직렬화: 0.0ms
2025-11-21 19:56:45.824 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:56:45.824 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:45.824848Z","nanoTime":28191839376000,"traceId":"bed08f03","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2526700,"duration_ms":2,"resultData":{"centerGeohashId":"wydmdwu","nineBlockGeohashes":["wydmdwu","wydmdxh","wydmdxj","wydmdwv","wydmdwt","wydmdws","wydmdwe","wydmdwg","wydmdx5"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdwu","hit":false,"valueSize":0,"l1CacheGetDurationNs":510300,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdwu","cacheKey":"data:wydmdwu:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":237700},{"geohashId":"wydmdxh","cacheKey":"data:wydmdxh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":226900},{"geohashId":"wydmdxj","cacheKey":"data:wydmdxj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":295800},{"geohashId":"wydmdwv","cacheKey":"data:wydmdwv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":157900},{"geohashId":"wydmdwt","cacheKey":"data:wydmdwt:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":203600},{"geohashId":"wydmdws","cacheKey":"data:wydmdws:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":148500},{"geohashId":"wydmdwe","cacheKey":"data:wydmdwe:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":189500},{"geohashId":"wydmdwg","cacheKey":"data:wydmdwg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":101400},{"geohashId":"wydmdx5","cacheKey":"data:wydmdx5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":79900}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1733500,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:56:45.824 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:45.824848Z","nanoTime":28191839520300,"traceId":"bed08f03","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:56:45.824 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:56:45.824 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:56:45.828 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 12건
2025-11-21 19:56:45.829 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:56:45.830 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 6개
2025-11-21 19:56:45.830 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:45.830378700Z","nanoTime":28191844220600,"traceId":"bed08f03","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4700300,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmdwu","wydmdxh","wydmdxj","wydmdwv","wydmdwt","wydmdws","wydmdwe","wydmdwg","wydmdx5"],"cctvQueryResult":{"queryGeohashIds":["wydmdwu","wydmdxh","wydmdxj","wydmdwv","wydmdwt","wydmdws","wydmdwe","wydmdwg","wydmdx5"],"totalRowsReturned":12,"rowsPerGrid":{"wydmdwt":5,"wydmdwe":1,"wydmdwv":1,"wydmdwg":3,"wydmdxh":1,"wydmdxj":1},"queryExecutionTimeNs":3040100,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdwt","cacheKey":"data:wydmdwt:cctv","dataCount":5,"dataSize":651,"errorMessage":null,"success":true},{"geohashId":"wydmdwe","cacheKey":"data:wydmdwe:cctv","dataCount":1,"dataSize":136,"errorMessage":null,"success":true},{"geohashId":"wydmdwv","cacheKey":"data:wydmdwv:cctv","dataCount":1,"dataSize":131,"errorMessage":null,"success":true},{"geohashId":"wydmdwg","cacheKey":"data:wydmdwg:cctv","dataCount":3,"dataSize":393,"errorMessage":null,"success":true},{"geohashId":"wydmdxh","cacheKey":"data:wydmdxh:cctv","dataCount":1,"dataSize":131,"errorMessage":null,"success":true},{"geohashId":"wydmdxj","cacheKey":"data:wydmdxj:cctv","dataCount":1,"dataSize":129,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:56:45.830 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:45.830378700Z","nanoTime":28191844364300,"traceId":"bed08f03","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:56:45.830 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:56:45.830 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56766929266873, 127.02986000908055)
2025-11-21 19:56:45.830 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:56:45.931 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:56:45.931 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:56:45.933 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:56:45.933 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56766929266873, 127.02986000908055), 반경: 500m
2025-11-21 19:56:46.009 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:56:46.009 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 131건
2025-11-21 19:56:46.018 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:56:46.018 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:56:46.018 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 19:56:46.018 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 성동구
2025-11-21 19:56:46.018 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:56:46.018 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:56:46.018 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:56:46.018 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 19:56:46.018 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:46.018083400Z","nanoTime":28192033570200,"traceId":"bed08f03","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":189205900,"duration_ms":189,"resultData":{"latitude":37.56766929266873,"longitude":127.02986000908055,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":189070400,"addressApiResult":{"cached":false,"cacheKey":"address:37.56766929266873:127.02986000908055","roadAddress":"서울특별시 성동구 무학로 33","jibunAddress":"서울 성동구 하왕십리동 1066","responseSize":71,"executionTimeNs":102149300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":690700,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56766929266873:127.02986000908055:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":1,"CS2":15,"SC4":3,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"totalPlaces":131,"responseSize":15235,"executionTimeNs":86230400,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:46.018 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:46.018083400Z","nanoTime":28192033791400,"traceId":"bed08f03","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:56:46.018 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:56:46.018 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:56:46.018 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 12개
2025-11-21 19:56:46.018 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 12개 (총 카메라 대수: 43대)
2025-11-21 19:56:46.018 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:56:46.106 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구 대림로 197 (거리: 270m)
2025-11-21 19:56:46.106 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:56:46.106 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:56:46.106 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:56:46.106 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:56:46.106 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:46.106886200Z","nanoTime":28192121143500,"traceId":"bed08f03","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":87352100,"duration_ms":87,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":12,"totalCctvAfterFilter":12,"totalCameraCount":43,"filterRate":1.0,"filterExecutionTimeNs":11400,"success":true},"policeQuery":{"queryDurationNs":86682400,"found":true,"nearestAddress":"서울특별시 영등포구 대림로 197","nearestDistance":270.4731995340718,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"AT4":1,"CS2":15,"SC4":3,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"placesAfterFilter":{"CT1":1,"AT4":1,"CS2":15,"SC4":3,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"totalBeforeFilter":131,"totalAfterFilter":131,"filterRate":1.0,"filterExecutionTimeNs":187800,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:46.106 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:46.106886200Z","nanoTime":28192121437800,"traceId":"bed08f03","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:56:46.106 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:56:46.106 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 58.21, 편의성: 34.96, 종합: 46.58
2025-11-21 19:56:46.106 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:46.106886200Z","nanoTime":28192121873400,"traceId":"bed08f03","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":435600,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":66.19085005824103,"policeDistance":270.4731995340718,"cctvScore":40.0,"cctvCount":12,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":58.212177897472316,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"AT4":3.0,"CS2":5.333162672127825,"SC4":6.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":6.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":34.95554417814186,"success":true},"overallScore":46.58386103780708,"errorMessage":null,"success":true}}
2025-11-21 19:56:46.108 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:46.108300700Z","nanoTime":28192122136100,"traceId":"bed08f03","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:56:46.108 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:56:46.108 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구 대림로 197, latitude=37.566665, longitude=127.032655, geohashId=wydmdwy)
2025-11-21 19:56:46.108 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 270.4731995340718
2025-11-21 19:56:46.108 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdwu
2025-11-21 19:56:46.108 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:56:46.108 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:46.108677100Z","nanoTime":28192123900400,"traceId":"bed08f03","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1764300,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 68m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdwu","dataSize":17826,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17826,"errorMessage":null,"success":true}}
2025-11-21 19:56:46.108 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:56:46.470 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:56:46.470 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56424394809173, longitude=127.03549533752319, radius=500)
2025-11-21 19:56:46.470 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:56:46.470 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56424394809173, longitude=127.03549533752319, radius=500
2025-11-21 19:56:46.470 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:46.470348900Z","nanoTime":28192484982000,"traceId":"21afb147","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:56:46.470 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:56:46.470 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56424394809173, lon=127.03549533752319
2025-11-21 19:56:46.471 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:46.471332900Z","nanoTime":28192485091200,"traceId":"21afb147","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:56:46.471 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:46.471332900Z","nanoTime":28192485147400,"traceId":"21afb147","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":56200,"duration_ms":0,"resultData":{"latitude":37.56424394809173,"longitude":127.03549533752319,"precision":7,"centerHash":"wydmdy2","adjacentHashes":["wydmdy2","wydmdy8","wydmdy9","wydmdy3","wydmdy1","wydmdy0","wydmdwp","wydmdwr","wydmdwx"],"errorMessage":null,"success":true}}
2025-11-21 19:56:46.471 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdy2, wydmdy8, wydmdy9, wydmdy3, wydmdy1, wydmdy0, wydmdwp, wydmdwr, wydmdwx]
2025-11-21 19:56:46.471 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdy2
2025-11-21 19:56:46.471 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:46.471332900Z","nanoTime":28192485262400,"traceId":"21afb147","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":280400,"duration_ms":0,"resultData":{"requestLatitude":37.56424394809173,"requestLongitude":127.03549533752319,"requestRadius":500,"centerGeohashId":"wydmdy2","nineBlockGeohashes":["wydmdy2","wydmdy8","wydmdy9","wydmdy3","wydmdy1","wydmdy0","wydmdwp","wydmdwr","wydmdwx"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:56:46.471 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:46.471332900Z","nanoTime":28192485310500,"traceId":"21afb147","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:56:46.471 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:56:46.471 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdy2
2025-11-21 19:56:46.472 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 히트! JSON 역직렬화 시도
2025-11-21 19:56:46.480 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 히트 성공! 즉시 반환 (L1 조회: 0.9796ms, 역직렬화: 8.864ms)
2025-11-21 19:56:46.481 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:46.481623100Z","nanoTime":28192495495900,"traceId":"21afb147","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":10185400,"duration_ms":10,"resultData":{"centerGeohashId":"wydmdy2","nineBlockGeohashes":["wydmdy2","wydmdy8","wydmdy9","wydmdy3","wydmdy1","wydmdy0","wydmdwp","wydmdwr","wydmdwx"],"l1CacheHit":true,"l1CacheResult":{"cacheKey":"dto:wydmdy2","hit":true,"valueSize":16889,"l1CacheGetDurationNs":979600,"l1JsonDeserializeDurationNs":8864000},"l2CacheRequired":false,"l2CacheResults":null,"l2TotalHits":0,"l2TotalMisses":0,"l2CacheTotalDurationNs":null,"l2JsonDeserializeTotalDurationNs":null,"errorMessage":null,"success":true}}
2025-11-21 19:56:46.481 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 1단계 캐시 히트: 즉시 반환 ===
2025-11-21 19:56:46.481 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:56:47.050 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:56:47.050 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56209615373358, longitude=127.04547709513163, radius=500)
2025-11-21 19:56:47.050 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:56:47.050 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56209615373358, longitude=127.04547709513163, radius=500
2025-11-21 19:56:47.050 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.050824600Z","nanoTime":28193065256800,"traceId":"e76765df","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:56:47.050 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:56:47.050 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56209615373358, lon=127.04547709513163
2025-11-21 19:56:47.050 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.050824600Z","nanoTime":28193065335600,"traceId":"e76765df","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:56:47.050 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.050824600Z","nanoTime":28193065375800,"traceId":"e76765df","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":40200,"duration_ms":0,"resultData":{"latitude":37.56209615373358,"longitude":127.04547709513163,"precision":7,"centerHash":"wydmdvz","adjacentHashes":["wydmdvz","wydmdyp","wydmen0","wydmejb","wydmej8","wydmdvx","wydmdvw","wydmdvy","wydmdyn"],"errorMessage":null,"success":true}}
2025-11-21 19:56:47.050 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdvz, wydmdyp, wydmen0, wydmejb, wydmej8, wydmdvx, wydmdvw, wydmdvy, wydmdyn]
2025-11-21 19:56:47.050 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdvz
2025-11-21 19:56:47.050 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.050824600Z","nanoTime":28193065596000,"traceId":"e76765df","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":339200,"duration_ms":0,"resultData":{"requestLatitude":37.56209615373358,"requestLongitude":127.04547709513163,"requestRadius":500,"centerGeohashId":"wydmdvz","nineBlockGeohashes":["wydmdvz","wydmdyp","wydmen0","wydmejb","wydmej8","wydmdvx","wydmdvw","wydmdvy","wydmdyn"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:56:47.050 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.050824600Z","nanoTime":28193065693000,"traceId":"e76765df","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:56:47.051 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:56:47.051 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdvz
2025-11-21 19:56:47.051 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4706ms)
2025-11-21 19:56:47.051 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:56:47.053 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:56:47.053 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:56:47.053 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.8909ms, 역직렬화: 0.0ms
2025-11-21 19:56:47.053 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:56:47.053 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.053577900Z","nanoTime":28193068385500,"traceId":"e76765df","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2692500,"duration_ms":2,"resultData":{"centerGeohashId":"wydmdvz","nineBlockGeohashes":["wydmdvz","wydmdyp","wydmen0","wydmejb","wydmej8","wydmdvx","wydmdvw","wydmdvy","wydmdyn"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdvz","hit":false,"valueSize":0,"l1CacheGetDurationNs":470600,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdvz","cacheKey":"data:wydmdvz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":172800},{"geohashId":"wydmdyp","cacheKey":"data:wydmdyp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":106800},{"geohashId":"wydmen0","cacheKey":"data:wydmen0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":125100},{"geohashId":"wydmejb","cacheKey":"data:wydmejb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":156200},{"geohashId":"wydmej8","cacheKey":"data:wydmej8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":216000},{"geohashId":"wydmdvx","cacheKey":"data:wydmdvx:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":154500},{"geohashId":"wydmdvw","cacheKey":"data:wydmdvw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":376700},{"geohashId":"wydmdvy","cacheKey":"data:wydmdvy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":212400},{"geohashId":"wydmdyn","cacheKey":"data:wydmdyn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":239400}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1890900,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:56:47.053 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.053577900Z","nanoTime":28193068672400,"traceId":"e76765df","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:56:47.053 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:56:47.053 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:56:47.058 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 28건
2025-11-21 19:56:47.060 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:56:47.060 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:56:47.060 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.060785700Z","nanoTime":28193076640600,"traceId":"e76765df","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":7968200,"duration_ms":7,"resultData":{"inputCctvMissGrids":["wydmdvz","wydmdyp","wydmen0","wydmejb","wydmej8","wydmdvx","wydmdvw","wydmdvy","wydmdyn"],"cctvQueryResult":{"queryGeohashIds":["wydmdvz","wydmdyp","wydmen0","wydmejb","wydmej8","wydmdvx","wydmdvw","wydmdvy","wydmdyn"],"totalRowsReturned":28,"rowsPerGrid":{"wydmdyp":2,"wydmejb":6,"wydmdvy":1,"wydmen0":7,"wydmdvz":2,"wydmdyn":1,"wydmej8":7,"wydmdvw":1,"wydmdvx":1},"queryExecutionTimeNs":5140900,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdyp","cacheKey":"data:wydmdyp:cctv","dataCount":2,"dataSize":263,"errorMessage":null,"success":true},{"geohashId":"wydmejb","cacheKey":"data:wydmejb:cctv","dataCount":6,"dataSize":796,"errorMessage":null,"success":true},{"geohashId":"wydmdvy","cacheKey":"data:wydmdvy:cctv","dataCount":1,"dataSize":133,"errorMessage":null,"success":true},{"geohashId":"wydmen0","cacheKey":"data:wydmen0:cctv","dataCount":7,"dataSize":926,"errorMessage":null,"success":true},{"geohashId":"wydmdvz","cacheKey":"data:wydmdvz:cctv","dataCount":2,"dataSize":263,"errorMessage":null,"success":true},{"geohashId":"wydmdyn","cacheKey":"data:wydmdyn:cctv","dataCount":1,"dataSize":133,"errorMessage":null,"success":true},{"geohashId":"wydmej8","cacheKey":"data:wydmej8:cctv","dataCount":7,"dataSize":919,"errorMessage":null,"success":true},{"geohashId":"wydmdvw","cacheKey":"data:wydmdvw:cctv","dataCount":1,"dataSize":133,"errorMessage":null,"success":true},{"geohashId":"wydmdvx","cacheKey":"data:wydmdvx:cctv","dataCount":1,"dataSize":134,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:56:47.063 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.063077300Z","nanoTime":28193076840500,"traceId":"e76765df","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:56:47.063 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:56:47.063 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56209615373358, 127.04547709513163)
2025-11-21 19:56:47.063 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:56:47.211 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:56:47.211 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:56:47.211 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:56:47.211 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56209615373358, 127.04547709513163), 반경: 500m
2025-11-21 19:56:47.286 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:56:47.288 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 115건
2025-11-21 19:56:47.288 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:56:47.288 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:56:47.288 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 19:56:47.288 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 성동구
2025-11-21 19:56:47.288 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:56:47.288 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:56:47.288 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:56:47.288 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 19:56:47.288 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.288835900Z","nanoTime":28193304571100,"traceId":"e76765df","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":227730600,"duration_ms":227,"resultData":{"latitude":37.56209615373358,"longitude":127.04547709513163,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":227569200,"addressApiResult":{"cached":false,"cacheKey":"address:37.56209615373358:127.04547709513163","roadAddress":"서울특별시 성동구 살곶이2가길 51","jibunAddress":"서울 성동구 사근동 223","responseSize":71,"executionTimeNs":149947300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":688300,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56209615373358:127.04547709513163:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":1,"CS2":15,"SC4":5,"MT1":0,"BK9":15,"HP8":15,"AC5":7,"CE7":15,"SW8":2,"PO3":3,"FD6":15,"PK6":14,"OL7":0,"PM9":8},"totalPlaces":115,"responseSize":13357,"executionTimeNs":76933600,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:47.288 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.288835900Z","nanoTime":28193304783900,"traceId":"e76765df","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:56:47.288 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:56:47.288 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:56:47.288 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 28개
2025-11-21 19:56:47.288 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 28개 (총 카메라 대수: 81대)
2025-11-21 19:56:47.288 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:56:47.373 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구  선유로 95 (거리: 381m)
2025-11-21 19:56:47.373 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:56:47.373 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:56:47.374 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 12개 카테고리
2025-11-21 19:56:47.374 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:56:47.374 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.374987300Z","nanoTime":28193388842300,"traceId":"e76765df","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":84058400,"duration_ms":84,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":28,"totalCctvAfterFilter":28,"totalCameraCount":81,"filterRate":1.0,"filterExecutionTimeNs":15000,"success":true},"policeQuery":{"queryDurationNs":83515000,"found":true,"nearestAddress":"서울특별시 영등포구  선유로 95","nearestDistance":380.80215470101956,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"AT4":1,"BK9":15,"HP8":15,"CS2":15,"AC5":7,"CE7":15,"SC4":5,"SW8":2,"PO3":3,"FD6":15,"PK6":14,"PM9":8},"placesAfterFilter":{"AT4":1,"BK9":15,"HP8":15,"CS2":15,"AC5":7,"CE7":15,"SC4":5,"SW8":1,"PO3":3,"FD6":15,"PK6":14,"PM9":8},"totalBeforeFilter":115,"totalAfterFilter":114,"filterRate":0.991304347826087,"filterExecutionTimeNs":150900,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:47.374 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.374987300Z","nanoTime":28193389059300,"traceId":"e76765df","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:56:47.374 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:56:47.374 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 75.41, 편의성: 38.36, 종합: 56.88
2025-11-21 19:56:47.374 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.374987300Z","nanoTime":28193389492100,"traceId":"e76765df","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":432800,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":52.399730662372555,"policeDistance":380.80215470101956,"cctvScore":93.33333333333333,"cctvCount":28,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":75.4081754120451,"success":true},"convenienceScore":{"categoryScores":{"AT4":3.0,"BK9":75.0,"HP8":100.0,"CS2":5.333162672127825,"AC5":7.0,"CE7":30.0,"SC4":10.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":42.0,"PM9":64.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":38.36109688934399,"success":true},"overallScore":56.88463615069455,"errorMessage":null,"success":true}}
2025-11-21 19:56:47.374 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.374987300Z","nanoTime":28193389653100,"traceId":"e76765df","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:56:47.374 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:56:47.374 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구  선유로 95, latitude=37.560301, longitude=127.041798, geohashId=wydmdvt)
2025-11-21 19:56:47.375 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 380.80215470101956
2025-11-21 19:56:47.376 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdvz
2025-11-21 19:56:47.376 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:56:47.376 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.376986500Z","nanoTime":28193390949700,"traceId":"e76765df","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1296600,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["공공기관이(가) 68m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdvz","dataSize":17447,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17447,"errorMessage":null,"success":true}}
2025-11-21 19:56:47.376 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:56:47.672 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:56:47.672 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55814936495881, longitude=127.04656119973374, radius=500)
2025-11-21 19:56:47.672 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:56:47.672 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55814936495881, longitude=127.04656119973374, radius=500
2025-11-21 19:56:47.672 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.672264700Z","nanoTime":28193686805600,"traceId":"8f57075b","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:56:47.672 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:56:47.672 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55814936495881, lon=127.04656119973374
2025-11-21 19:56:47.672 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.672264700Z","nanoTime":28193686935600,"traceId":"8f57075b","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:56:47.673 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.672264700Z","nanoTime":28193686981500,"traceId":"8f57075b","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":45900,"duration_ms":0,"resultData":{"latitude":37.55814936495881,"longitude":127.04656119973374,"precision":7,"centerHash":"wydmej2","adjacentHashes":["wydmej2","wydmej8","wydmej9","wydmej3","wydmej1","wydmej0","wydmdvp","wydmdvr","wydmdvx"],"errorMessage":null,"success":true}}
2025-11-21 19:56:47.673 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmej2, wydmej8, wydmej9, wydmej3, wydmej1, wydmej0, wydmdvp, wydmdvr, wydmdvx]
2025-11-21 19:56:47.673 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmej2
2025-11-21 19:56:47.673 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.673257300Z","nanoTime":28193687135700,"traceId":"8f57075b","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":330100,"duration_ms":0,"resultData":{"requestLatitude":37.55814936495881,"requestLongitude":127.04656119973374,"requestRadius":500,"centerGeohashId":"wydmej2","nineBlockGeohashes":["wydmej2","wydmej8","wydmej9","wydmej3","wydmej1","wydmej0","wydmdvp","wydmdvr","wydmdvx"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:56:47.673 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.673257300Z","nanoTime":28193687179100,"traceId":"8f57075b","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:56:47.673 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:56:47.673 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmej2
2025-11-21 19:56:47.673 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4272ms)
2025-11-21 19:56:47.673 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:56:47.675 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:56:47.675 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 2개, 미스: 7개
2025-11-21 19:56:47.675 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.4094ms, 역직렬화: 0.1522ms
2025-11-21 19:56:47.675 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:56:47.675 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.675253200Z","nanoTime":28193689287000,"traceId":"8f57075b","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2107900,"duration_ms":2,"resultData":{"centerGeohashId":"wydmej2","nineBlockGeohashes":["wydmej2","wydmej8","wydmej9","wydmej3","wydmej1","wydmej0","wydmdvp","wydmdvr","wydmdvx"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmej2","hit":false,"valueSize":0,"l1CacheGetDurationNs":427200,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmej2","cacheKey":"data:wydmej2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":205100},{"geohashId":"wydmej8","cacheKey":"data:wydmej8:cctv","hit":true,"dataType":"cctv","dataCount":7,"dataSize":919,"l2CacheGetDurationNs":354000},{"geohashId":"wydmej9","cacheKey":"data:wydmej9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":92300},{"geohashId":"wydmej3","cacheKey":"data:wydmej3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":74500},{"geohashId":"wydmej1","cacheKey":"data:wydmej1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":70300},{"geohashId":"wydmej0","cacheKey":"data:wydmej0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":69100},{"geohashId":"wydmdvp","cacheKey":"data:wydmdvp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":82100},{"geohashId":"wydmdvr","cacheKey":"data:wydmdvr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":69700},{"geohashId":"wydmdvx","cacheKey":"data:wydmdvx:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":134,"l2CacheGetDurationNs":179800}],"l2TotalHits":2,"l2TotalMisses":7,"l2CacheTotalDurationNs":1409400,"l2JsonDeserializeTotalDurationNs":152200,"errorMessage":null,"success":true}}
2025-11-21 19:56:47.675 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.675253200Z","nanoTime":28193689425100,"traceId":"8f57075b","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:56:47.675 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:56:47.675 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 7개
2025-11-21 19:56:47.678 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 5건
2025-11-21 19:56:47.678 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:56:47.678 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 4개
2025-11-21 19:56:47.678 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.678816600Z","nanoTime":28193694045600,"traceId":"8f57075b","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4620500,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmej2","wydmej9","wydmej3","wydmej1","wydmej0","wydmdvp","wydmdvr"],"cctvQueryResult":{"queryGeohashIds":["wydmej2","wydmej9","wydmej3","wydmej1","wydmej0","wydmdvp","wydmdvr"],"totalRowsReturned":5,"rowsPerGrid":{"wydmej3":1,"wydmej9":4},"queryExecutionTimeNs":3103700,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmej3","cacheKey":"data:wydmej3:cctv","dataCount":1,"dataSize":134,"errorMessage":null,"success":true},{"geohashId":"wydmej9","cacheKey":"data:wydmej9:cctv","dataCount":4,"dataSize":526,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:56:47.678 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.678816600Z","nanoTime":28193694204700,"traceId":"8f57075b","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:56:47.678 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:56:47.678 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.55814936495881, 127.04656119973374)
2025-11-21 19:56:47.680 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:56:47.774 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:56:47.774 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:56:47.774 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:56:47.774 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.55814936495881, 127.04656119973374), 반경: 500m
2025-11-21 19:56:47.867 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:56:47.867 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 111건
2025-11-21 19:56:47.867 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:56:47.867 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:56:47.867 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 19:56:47.867 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 성동구
2025-11-21 19:56:47.867 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:56:47.867 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:56:47.867 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:56:47.867 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 19:56:47.867 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.867124200Z","nanoTime":28193885088700,"traceId":"8f57075b","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":190884000,"duration_ms":190,"resultData":{"latitude":37.55814936495881,"longitude":127.04656119973374,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":190720400,"addressApiResult":{"cached":false,"cacheKey":"address:37.55814936495881:127.04656119973374","roadAddress":"서울특별시 성동구 왕십리로 222","jibunAddress":"서울 성동구 사근동 110","responseSize":70,"executionTimeNs":97189100,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":993000,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.55814936495881:127.04656119973374:500","categoryCount":15,"placesByCategory":{"CT1":4,"AT4":0,"CS2":15,"SC4":4,"MT1":0,"BK9":15,"HP8":14,"AC5":5,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":0,"PM9":6},"totalPlaces":111,"responseSize":13017,"executionTimeNs":92538300,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:47.867 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.867124200Z","nanoTime":28193885460000,"traceId":"8f57075b","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:56:47.867 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:56:47.867 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:56:47.867 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 13개
2025-11-21 19:56:47.867 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 13개 (총 카메라 대수: 39대)
2025-11-21 19:56:47.867 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:56:47.960 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구  선유로 95 (거리: 483m)
2025-11-21 19:56:47.960 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:56:47.960 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:56:47.960 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 12개 카테고리
2025-11-21 19:56:47.960 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:56:47.960 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.960095700Z","nanoTime":28193974800100,"traceId":"8f57075b","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":89340100,"duration_ms":89,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":13,"totalCctvAfterFilter":13,"totalCameraCount":39,"filterRate":1.0,"filterExecutionTimeNs":15500,"success":true},"policeQuery":{"queryDurationNs":88568600,"found":true,"nearestAddress":"서울특별시 영등포구  선유로 95","nearestDistance":483.24351165463645,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":4,"BK9":15,"HP8":14,"CS2":15,"AC5":5,"CE7":15,"SC4":4,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"PM9":6},"placesAfterFilter":{"CT1":4,"BK9":15,"HP8":14,"CS2":15,"AC5":5,"CE7":15,"SC4":4,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"PM9":6},"totalBeforeFilter":111,"totalAfterFilter":111,"filterRate":1.0,"filterExecutionTimeNs":243400,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:47.960 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.960095700Z","nanoTime":28193975190700,"traceId":"8f57075b","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:56:47.960 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:56:47.960 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 51.57, 편의성: 37.78, 종합: 44.67
2025-11-21 19:56:47.960 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.960095700Z","nanoTime":28193975484100,"traceId":"8f57075b","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":293400,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":39.594561043170444,"policeDistance":483.24351165463645,"cctvScore":43.333333333333336,"cctvCount":13,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":51.56662452628447,"success":true},"convenienceScore":{"categoryScores":{"CT1":16.0,"BK9":75.0,"HP8":100.0,"CS2":5.333162672127825,"AC5":5.0,"CE7":30.0,"SC4":8.0,"SW8":100.0,"PO3":6.0,"FD6":15.0,"PK6":45.0,"PM9":48.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":37.777763556010655,"success":true},"overallScore":44.67219404114756,"errorMessage":null,"success":true}}
2025-11-21 19:56:47.960 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.960095700Z","nanoTime":28193975623000,"traceId":"8f57075b","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:56:47.960 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:56:47.960 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구  선유로 95, latitude=37.560301, longitude=127.041798, geohashId=wydmdvt)
2025-11-21 19:56:47.960 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 483.24351165463645
2025-11-21 19:56:47.962 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmej2
2025-11-21 19:56:47.962 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:56:47.962 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:47.962727500Z","nanoTime":28193976952100,"traceId":"8f57075b","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1329100,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["은행이(가) 40m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmej2","dataSize":15794,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":15794,"errorMessage":null,"success":true}}
2025-11-21 19:56:47.962 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:56:48.158 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:56:48.158 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55885432456201, longitude=127.04065372052888, radius=500)
2025-11-21 19:56:48.158 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:56:48.158 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55885432456201, longitude=127.04065372052888, radius=500
2025-11-21 19:56:48.158 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.158970Z","nanoTime":28194173390100,"traceId":"09babcc0","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:56:48.158 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:56:48.158 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55885432456201, lon=127.04065372052888
2025-11-21 19:56:48.158 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.158970Z","nanoTime":28194173495600,"traceId":"09babcc0","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:56:48.158 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.158970Z","nanoTime":28194173543500,"traceId":"09babcc0","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":47900,"duration_ms":0,"resultData":{"latitude":37.55885432456201,"longitude":127.04065372052888,"precision":7,"centerHash":"wydmdvk","adjacentHashes":["wydmdvk","wydmdvs","wydmdvt","wydmdvm","wydmdvj","wydmdvh","wydmdv5","wydmdv7","wydmdve"],"errorMessage":null,"success":true}}
2025-11-21 19:56:48.158 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdvk, wydmdvs, wydmdvt, wydmdvm, wydmdvj, wydmdvh, wydmdv5, wydmdv7, wydmdve]
2025-11-21 19:56:48.158 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdvk
2025-11-21 19:56:48.158 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.158970Z","nanoTime":28194173683800,"traceId":"09babcc0","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":293700,"duration_ms":0,"resultData":{"requestLatitude":37.55885432456201,"requestLongitude":127.04065372052888,"requestRadius":500,"centerGeohashId":"wydmdvk","nineBlockGeohashes":["wydmdvk","wydmdvs","wydmdvt","wydmdvm","wydmdvj","wydmdvh","wydmdv5","wydmdv7","wydmdve"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:56:48.158 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.158970Z","nanoTime":28194173731200,"traceId":"09babcc0","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:56:48.158 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:56:48.158 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdvk
2025-11-21 19:56:48.160 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4584ms)
2025-11-21 19:56:48.160 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:56:48.162 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:56:48.162 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 1개, 미스: 8개
2025-11-21 19:56:48.162 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.0257ms, 역직렬화: 0.1121ms
2025-11-21 19:56:48.162 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:56:48.162 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.162367900Z","nanoTime":28194176517400,"traceId":"09babcc0","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2786200,"duration_ms":2,"resultData":{"centerGeohashId":"wydmdvk","nineBlockGeohashes":["wydmdvk","wydmdvs","wydmdvt","wydmdvm","wydmdvj","wydmdvh","wydmdv5","wydmdv7","wydmdve"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdvk","hit":false,"valueSize":0,"l1CacheGetDurationNs":458400,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdvk","cacheKey":"data:wydmdvk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":297000},{"geohashId":"wydmdvs","cacheKey":"data:wydmdvs:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":179800},{"geohashId":"wydmdvt","cacheKey":"data:wydmdvt:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":264300},{"geohashId":"wydmdvm","cacheKey":"data:wydmdvm:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":154700},{"geohashId":"wydmdvj","cacheKey":"data:wydmdvj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":165200},{"geohashId":"wydmdvh","cacheKey":"data:wydmdvh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":138900},{"geohashId":"wydmdv5","cacheKey":"data:wydmdv5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":152600},{"geohashId":"wydmdv7","cacheKey":"data:wydmdv7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":123100},{"geohashId":"wydmdve","cacheKey":"data:wydmdve:cctv","hit":true,"dataType":"cctv","dataCount":6,"dataSize":728,"l2CacheGetDurationNs":361500}],"l2TotalHits":1,"l2TotalMisses":8,"l2CacheTotalDurationNs":2025700,"l2JsonDeserializeTotalDurationNs":112100,"errorMessage":null,"success":true}}
2025-11-21 19:56:48.162 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.162781500Z","nanoTime":28194176749900,"traceId":"09babcc0","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:56:48.162 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:56:48.162 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 8개
2025-11-21 19:56:48.166 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 26건
2025-11-21 19:56:48.167 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:56:48.168 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 7개
2025-11-21 19:56:48.169 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.168906300Z","nanoTime":28194182786900,"traceId":"09babcc0","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6037000,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydmdvk","wydmdvs","wydmdvt","wydmdvm","wydmdvj","wydmdvh","wydmdv5","wydmdv7"],"cctvQueryResult":{"queryGeohashIds":["wydmdvk","wydmdvs","wydmdvt","wydmdvm","wydmdvj","wydmdvh","wydmdv5","wydmdv7"],"totalRowsReturned":26,"rowsPerGrid":{"wydmdvs":5,"wydmdvt":3,"wydmdvj":3,"wydmdvk":4,"wydmdv7":8,"wydmdvh":3},"queryExecutionTimeNs":4021700,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdvs","cacheKey":"data:wydmdvs:cctv","dataCount":5,"dataSize":655,"errorMessage":null,"success":true},{"geohashId":"wydmdvt","cacheKey":"data:wydmdvt:cctv","dataCount":3,"dataSize":401,"errorMessage":null,"success":true},{"geohashId":"wydmdvj","cacheKey":"data:wydmdvj:cctv","dataCount":3,"dataSize":335,"errorMessage":null,"success":true},{"geohashId":"wydmdvk","cacheKey":"data:wydmdvk:cctv","dataCount":4,"dataSize":527,"errorMessage":null,"success":true},{"geohashId":"wydmdv7","cacheKey":"data:wydmdv7:cctv","dataCount":8,"dataSize":970,"errorMessage":null,"success":true},{"geohashId":"wydmdvh","cacheKey":"data:wydmdvh:cctv","dataCount":3,"dataSize":366,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:56:48.169 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.169225800Z","nanoTime":28194183061300,"traceId":"09babcc0","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:56:48.169 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:56:48.169 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.55885432456201, 127.04065372052888)
2025-11-21 19:56:48.169 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:56:48.238 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:56:48.238 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:56:48.238 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:56:48.238 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.55885432456201, 127.04065372052888), 반경: 500m
2025-11-21 19:56:48.337 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:56:48.337 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 145건
2025-11-21 19:56:48.339 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:56:48.339 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:56:48.339 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 19:56:48.339 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 성동구
2025-11-21 19:56:48.339 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:56:48.339 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:56:48.339 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:56:48.339 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 19:56:48.341 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.339814600Z","nanoTime":28194354730900,"traceId":"09babcc0","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":171669600,"duration_ms":171,"resultData":{"latitude":37.55885432456201,"longitude":127.04065372052888,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":171508600,"addressApiResult":{"cached":false,"cacheKey":"address:37.55885432456201:127.04065372052888","roadAddress":"서울특별시 성동구 마조로 11","jibunAddress":"서울 성동구 행당동 19-98","responseSize":70,"executionTimeNs":69272400,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":586500,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.55885432456201:127.04065372052888:500","categoryCount":15,"placesByCategory":{"CT1":8,"AT4":1,"CS2":15,"SC4":5,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":5,"PO3":4,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":145,"responseSize":16835,"executionTimeNs":101649700,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:48.341 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.341211700Z","nanoTime":28194355097500,"traceId":"09babcc0","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:56:48.341 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:56:48.341 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:56:48.341 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 32개
2025-11-21 19:56:48.341 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 32개 (총 카메라 대수: 88대)
2025-11-21 19:56:48.341 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:56:48.419 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구  선유로 95 (거리: 190m)
2025-11-21 19:56:48.419 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:56:48.419 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:56:48.419 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:56:48.419 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:56:48.419 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.419032900Z","nanoTime":28194434457300,"traceId":"09babcc0","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":79359800,"duration_ms":79,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":32,"totalCctvAfterFilter":32,"totalCameraCount":88,"filterRate":1.0,"filterExecutionTimeNs":26100,"success":true},"policeQuery":{"queryDurationNs":78608700,"found":true,"nearestAddress":"서울특별시 영등포구  선유로 95","nearestDistance":189.86961861626605,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":8,"AT4":1,"CS2":15,"SC4":5,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":5,"PO3":4,"FD6":15,"PK6":15,"PM9":15},"placesAfterFilter":{"CT1":8,"AT4":1,"CS2":15,"SC4":5,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":5,"PO3":4,"FD6":15,"PK6":15,"PM9":15},"totalBeforeFilter":145,"totalAfterFilter":145,"filterRate":1.0,"filterExecutionTimeNs":187400,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:48.419 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.419032900Z","nanoTime":28194434690000,"traceId":"09babcc0","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:56:48.419 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:56:48.421 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 85.23, 편의성: 40.17, 종합: 62.70
2025-11-21 19:56:48.421 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.421043200Z","nanoTime":28194434998100,"traceId":"09babcc0","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":308100,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":76.26629767296674,"policeDistance":189.86961861626605,"cctvScore":100.0,"cctvCount":32,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":85.23481218189002,"success":true},"convenienceScore":{"categoryScores":{"CT1":32.0,"AT4":3.0,"CS2":5.333162672127825,"SC4":10.0,"MT1":20.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":12.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":40.16665447658056,"success":true},"overallScore":62.70073332923529,"errorMessage":null,"success":true}}
2025-11-21 19:56:48.421 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.421043200Z","nanoTime":28194435156200,"traceId":"09babcc0","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:56:48.421 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:56:48.421 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구  선유로 95, latitude=37.560301, longitude=127.041798, geohashId=wydmdvt)
2025-11-21 19:56:48.421 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 189.86961861626605
2025-11-21 19:56:48.423 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdvk
2025-11-21 19:56:48.423 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:56:48.423 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.423059500Z","nanoTime":28194437599900,"traceId":"09babcc0","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":2443700,"duration_ms":2,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["이 지역은 안전 인프라가 잘 갖춰져 있습니다.","카페이(가) 14m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdvk","dataSize":21208,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":21208,"errorMessage":null,"success":true}}
2025-11-21 19:56:48.423 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:56:48.663 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:56:48.663 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55871276413399, longitude=127.03223317871962, radius=500)
2025-11-21 19:56:48.663 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:56:48.663 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55871276413399, longitude=127.03223317871962, radius=500
2025-11-21 19:56:48.664 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.663686700Z","nanoTime":28194678305400,"traceId":"a54a748d","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:56:48.664 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:56:48.664 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55871276413399, lon=127.03223317871962
2025-11-21 19:56:48.664 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.664610400Z","nanoTime":28194678502600,"traceId":"a54a748d","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:56:48.664 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.664610400Z","nanoTime":28194678558300,"traceId":"a54a748d","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":55700,"duration_ms":0,"resultData":{"latitude":37.55871276413399,"longitude":127.03223317871962,"precision":7,"centerHash":"wydmdtq","adjacentHashes":["wydmdtq","wydmdtw","wydmdtx","wydmdtr","wydmdtp","wydmdtn","wydmdtj","wydmdtm","wydmdtt"],"errorMessage":null,"success":true}}
2025-11-21 19:56:48.664 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdtq, wydmdtw, wydmdtx, wydmdtr, wydmdtp, wydmdtn, wydmdtj, wydmdtm, wydmdtt]
2025-11-21 19:56:48.664 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdtq
2025-11-21 19:56:48.664 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.664610400Z","nanoTime":28194678708500,"traceId":"a54a748d","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":403100,"duration_ms":0,"resultData":{"requestLatitude":37.55871276413399,"requestLongitude":127.03223317871962,"requestRadius":500,"centerGeohashId":"wydmdtq","nineBlockGeohashes":["wydmdtq","wydmdtw","wydmdtx","wydmdtr","wydmdtp","wydmdtn","wydmdtj","wydmdtm","wydmdtt"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:56:48.664 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.664610400Z","nanoTime":28194678758800,"traceId":"a54a748d","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:56:48.664 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:56:48.664 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdtq
2025-11-21 19:56:48.664 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3871ms)
2025-11-21 19:56:48.664 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:56:48.667 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:56:48.667 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 2개, 미스: 7개
2025-11-21 19:56:48.667 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.5188ms, 역직렬화: 0.1875ms
2025-11-21 19:56:48.667 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:56:48.667 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.667679800Z","nanoTime":28194681933300,"traceId":"a54a748d","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3174500,"duration_ms":3,"resultData":{"centerGeohashId":"wydmdtq","nineBlockGeohashes":["wydmdtq","wydmdtw","wydmdtx","wydmdtr","wydmdtp","wydmdtn","wydmdtj","wydmdtm","wydmdtt"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdtq","hit":false,"valueSize":0,"l1CacheGetDurationNs":387100,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdtq","cacheKey":"data:wydmdtq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":245800},{"geohashId":"wydmdtw","cacheKey":"data:wydmdtw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":187400},{"geohashId":"wydmdtx","cacheKey":"data:wydmdtx:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":392,"l2CacheGetDurationNs":652500},{"geohashId":"wydmdtr","cacheKey":"data:wydmdtr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":183700},{"geohashId":"wydmdtp","cacheKey":"data:wydmdtp:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":262,"l2CacheGetDurationNs":358800},{"geohashId":"wydmdtn","cacheKey":"data:wydmdtn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":190000},{"geohashId":"wydmdtj","cacheKey":"data:wydmdtj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":219900},{"geohashId":"wydmdtm","cacheKey":"data:wydmdtm:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":110500},{"geohashId":"wydmdtt","cacheKey":"data:wydmdtt:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":85600}],"l2TotalHits":2,"l2TotalMisses":7,"l2CacheTotalDurationNs":2518800,"l2JsonDeserializeTotalDurationNs":187500,"errorMessage":null,"success":true}}
2025-11-21 19:56:48.667 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.667679800Z","nanoTime":28194682062200,"traceId":"a54a748d","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:56:48.667 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:56:48.667 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 7개
2025-11-21 19:56:48.671 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 20건
2025-11-21 19:56:48.673 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:56:48.673 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:56:48.673 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.673574300Z","nanoTime":28194688170000,"traceId":"a54a748d","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6107800,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydmdtq","wydmdtw","wydmdtr","wydmdtn","wydmdtj","wydmdtm","wydmdtt"],"cctvQueryResult":{"queryGeohashIds":["wydmdtq","wydmdtw","wydmdtr","wydmdtn","wydmdtj","wydmdtm","wydmdtt"],"totalRowsReturned":20,"rowsPerGrid":{"wydmdtq":3,"wydmdtr":1,"wydmdtm":3,"wydmdtn":1,"wydmdtw":5,"wydmdtj":3,"wydmdtt":4},"queryExecutionTimeNs":3416100,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdtq","cacheKey":"data:wydmdtq:cctv","dataCount":3,"dataSize":398,"errorMessage":null,"success":true},{"geohashId":"wydmdtr","cacheKey":"data:wydmdtr:cctv","dataCount":1,"dataSize":129,"errorMessage":null,"success":true},{"geohashId":"wydmdtm","cacheKey":"data:wydmdtm:cctv","dataCount":3,"dataSize":400,"errorMessage":null,"success":true},{"geohashId":"wydmdtn","cacheKey":"data:wydmdtn:cctv","dataCount":1,"dataSize":129,"errorMessage":null,"success":true},{"geohashId":"wydmdtw","cacheKey":"data:wydmdtw:cctv","dataCount":5,"dataSize":664,"errorMessage":null,"success":true},{"geohashId":"wydmdtj","cacheKey":"data:wydmdtj:cctv","dataCount":3,"dataSize":397,"errorMessage":null,"success":true},{"geohashId":"wydmdtt","cacheKey":"data:wydmdtt:cctv","dataCount":4,"dataSize":531,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:56:48.674 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.674575200Z","nanoTime":28194688328200,"traceId":"a54a748d","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:56:48.674 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:56:48.674 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.55871276413399, 127.03223317871962)
2025-11-21 19:56:48.674 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:56:48.732 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:56:48.732 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:56:48.733 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:56:48.733 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.55871276413399, 127.03223317871962), 반경: 500m
2025-11-21 19:56:48.820 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:56:48.820 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 136건
2025-11-21 19:56:48.821 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:56:48.821 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:56:48.821 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 19:56:48.821 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 성동구
2025-11-21 19:56:48.821 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:56:48.821 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:56:48.821 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:56:48.821 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 19:56:48.822 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.821116900Z","nanoTime":28194835836800,"traceId":"a54a748d","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":147508600,"duration_ms":147,"resultData":{"latitude":37.55871276413399,"longitude":127.03223317871962,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":147373400,"addressApiResult":{"cached":false,"cacheKey":"address:37.55871276413399:127.03223317871962","roadAddress":"서울특별시 성동구 행당로 123","jibunAddress":"서울 성동구 행당동 310-11","responseSize":72,"executionTimeNs":58498100,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":363400,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.55871276413399:127.03223317871962:500","categoryCount":15,"placesByCategory":{"CT1":3,"AT4":0,"CS2":15,"SC4":4,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":5,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":136,"responseSize":15776,"executionTimeNs":88511900,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:48.822 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.822116100Z","nanoTime":28194836035600,"traceId":"a54a748d","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:56:48.822 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:56:48.822 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:56:48.822 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 25개
2025-11-21 19:56:48.822 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 25개 (총 카메라 대수: 76대)
2025-11-21 19:56:48.822 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:56:48.896 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구 영신로20길 11 (거리: 330m)
2025-11-21 19:56:48.896 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:56:48.896 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:56:48.896 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 19:56:48.896 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:56:48.896 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.896968300Z","nanoTime":28194911472000,"traceId":"a54a748d","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":75436400,"duration_ms":75,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":25,"totalCctvAfterFilter":25,"totalCameraCount":76,"filterRate":1.0,"filterExecutionTimeNs":20000,"success":true},"policeQuery":{"queryDurationNs":74794800,"found":true,"nearestAddress":"서울특별시 영등포구 영신로20길 11","nearestDistance":330.4659597264658,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":3,"CS2":15,"SC4":4,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":5,"FD6":15,"PK6":15,"PM9":15},"placesAfterFilter":{"CT1":3,"CS2":15,"SC4":4,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":5,"FD6":15,"PK6":15,"PM9":15},"totalBeforeFilter":136,"totalAfterFilter":136,"filterRate":1.0,"filterExecutionTimeNs":191800,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:48.896 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.896968300Z","nanoTime":28194911773600,"traceId":"a54a748d","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:56:48.896 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:56:48.896 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 73.30, 편의성: 42.33, 종합: 57.81
2025-11-21 19:56:48.896 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.896968300Z","nanoTime":28194912072500,"traceId":"a54a748d","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":298900,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":58.69175503419177,"policeDistance":330.4659597264658,"cctvScore":83.33333333333334,"cctvCount":25,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":73.29578272359088,"success":true},"convenienceScore":{"categoryScores":{"CT1":12.0,"CS2":5.333162672127825,"SC4":8.0,"MT1":30.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":15.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":42.3333202055483,"success":true},"overallScore":57.81455146456959,"errorMessage":null,"success":true}}
2025-11-21 19:56:48.896 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.896968300Z","nanoTime":28194912229300,"traceId":"a54a748d","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:56:48.896 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:56:48.896 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구 영신로20길 11, latitude=37.557429, longitude=127.028852, geohashId=wydmdt5)
2025-11-21 19:56:48.896 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 330.4659597264658
2025-11-21 19:56:48.899 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdtq
2025-11-21 19:56:48.899 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:56:48.899 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:48.899823300Z","nanoTime":28194913839300,"traceId":"a54a748d","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1610000,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["학원이(가) 44m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdtq","dataSize":19655,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19655,"errorMessage":null,"success":true}}
2025-11-21 19:56:48.899 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:56:49.140 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:56:49.140 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55833592040883, longitude=127.0258271572181, radius=500)
2025-11-21 19:56:49.140 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:56:49.140 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55833592040883, longitude=127.0258271572181, radius=500
2025-11-21 19:56:49.140 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.140194700Z","nanoTime":28195154140100,"traceId":"e2794892","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:56:49.140 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:56:49.140 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55833592040883, lon=127.0258271572181
2025-11-21 19:56:49.140 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.140194700Z","nanoTime":28195154228900,"traceId":"e2794892","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:56:49.140 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.140194700Z","nanoTime":28195154281700,"traceId":"e2794892","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":52800,"duration_ms":0,"resultData":{"latitude":37.55833592040883,"longitude":127.0258271572181,"precision":7,"centerHash":"wydmdt3","adjacentHashes":["wydmdt3","wydmdt9","wydmdtd","wydmdt6","wydmdt4","wydmdt1","wydmdt0","wydmdt2","wydmdt8"],"errorMessage":null,"success":true}}
2025-11-21 19:56:49.140 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdt3, wydmdt9, wydmdtd, wydmdt6, wydmdt4, wydmdt1, wydmdt0, wydmdt2, wydmdt8]
2025-11-21 19:56:49.140 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdt3
2025-11-21 19:56:49.140 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.140194700Z","nanoTime":28195154481200,"traceId":"e2794892","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":341100,"duration_ms":0,"resultData":{"requestLatitude":37.55833592040883,"requestLongitude":127.0258271572181,"requestRadius":500,"centerGeohashId":"wydmdt3","nineBlockGeohashes":["wydmdt3","wydmdt9","wydmdtd","wydmdt6","wydmdt4","wydmdt1","wydmdt0","wydmdt2","wydmdt8"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:56:49.140 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.140194700Z","nanoTime":28195154581100,"traceId":"e2794892","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:56:49.140 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:56:49.140 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdt3
2025-11-21 19:56:49.141 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3756ms)
2025-11-21 19:56:49.141 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:56:49.142 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:56:49.143 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 3개, 미스: 6개
2025-11-21 19:56:49.143 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.4008ms, 역직렬화: 0.2627ms
2025-11-21 19:56:49.143 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:56:49.143 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.143809Z","nanoTime":28195157706400,"traceId":"e2794892","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3125300,"duration_ms":3,"resultData":{"centerGeohashId":"wydmdt3","nineBlockGeohashes":["wydmdt3","wydmdt9","wydmdtd","wydmdt6","wydmdt4","wydmdt1","wydmdt0","wydmdt2","wydmdt8"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdt3","hit":false,"valueSize":0,"l1CacheGetDurationNs":375600,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdt3","cacheKey":"data:wydmdt3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":243300},{"geohashId":"wydmdt9","cacheKey":"data:wydmdt9:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":137,"l2CacheGetDurationNs":558200},{"geohashId":"wydmdtd","cacheKey":"data:wydmdtd:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":268,"l2CacheGetDurationNs":416000},{"geohashId":"wydmdt6","cacheKey":"data:wydmdt6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":139000},{"geohashId":"wydmdt4","cacheKey":"data:wydmdt4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":97400},{"geohashId":"wydmdt1","cacheKey":"data:wydmdt1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":107800},{"geohashId":"wydmdt0","cacheKey":"data:wydmdt0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":98200},{"geohashId":"wydmdt2","cacheKey":"data:wydmdt2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":79400},{"geohashId":"wydmdt8","cacheKey":"data:wydmdt8:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":136,"l2CacheGetDurationNs":297200}],"l2TotalHits":3,"l2TotalMisses":6,"l2CacheTotalDurationNs":2400800,"l2JsonDeserializeTotalDurationNs":262700,"errorMessage":null,"success":true}}
2025-11-21 19:56:49.143 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.143809Z","nanoTime":28195157924600,"traceId":"e2794892","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:56:49.143 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:56:49.143 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 6개
2025-11-21 19:56:49.147 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 9건
2025-11-21 19:56:49.149 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:56:49.149 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 6개
2025-11-21 19:56:49.149 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.149168100Z","nanoTime":28195163195300,"traceId":"e2794892","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5270700,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydmdt3","wydmdt6","wydmdt4","wydmdt1","wydmdt0","wydmdt2"],"cctvQueryResult":{"queryGeohashIds":["wydmdt3","wydmdt6","wydmdt4","wydmdt1","wydmdt0","wydmdt2"],"totalRowsReturned":9,"rowsPerGrid":{"wydmdt0":7,"wydmdt1":1,"wydmdt4":1},"queryExecutionTimeNs":3516100,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdt0","cacheKey":"data:wydmdt0:cctv","dataCount":7,"dataSize":929,"errorMessage":null,"success":true},{"geohashId":"wydmdt1","cacheKey":"data:wydmdt1:cctv","dataCount":1,"dataSize":131,"errorMessage":null,"success":true},{"geohashId":"wydmdt4","cacheKey":"data:wydmdt4:cctv","dataCount":1,"dataSize":130,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:56:49.149 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.149168100Z","nanoTime":28195163359700,"traceId":"e2794892","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:56:49.149 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:56:49.149 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.55833592040883, 127.0258271572181)
2025-11-21 19:56:49.149 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:56:49.212 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:56:49.212 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:56:49.212 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:56:49.212 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.55833592040883, 127.0258271572181), 반경: 500m
2025-11-21 19:56:49.308 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:56:49.308 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 112건
2025-11-21 19:56:49.311 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:56:49.311 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:56:49.311 [http-nio-8185-exec-3] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:56:49.311 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:56:49.311 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:56:49.311 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:56:49.311 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:56:49.311 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.311344500Z","nanoTime":28195325824400,"traceId":"e2794892","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":162464700,"duration_ms":162,"resultData":{"latitude":37.55833592040883,"longitude":127.0258271572181,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":162315400,"addressApiResult":{"cached":false,"cacheKey":"address:37.55833592040883:127.0258271572181","roadAddress":"주소 없음","jibunAddress":"서울 성동구 행당동 347-7","responseSize":59,"executionTimeNs":63282200,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":58000,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.55833592040883:127.0258271572181:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":1,"CS2":15,"SC4":3,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":6,"OL7":0,"PM9":8},"totalPlaces":112,"responseSize":13088,"executionTimeNs":98975200,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:49.311 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.311344500Z","nanoTime":28195326016400,"traceId":"e2794892","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:56:49.311 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:56:49.311 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:56:49.311 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 13개
2025-11-21 19:56:49.311 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 13개 (총 카메라 대수: 38대)
2025-11-21 19:56:49.311 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:56:49.383 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구 영신로20길 11 (거리: 285m)
2025-11-21 19:56:49.383 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:56:49.383 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:56:49.383 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 19:56:49.383 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:56:49.383 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.383479900Z","nanoTime":28195397985300,"traceId":"e2794892","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":71968900,"duration_ms":71,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":13,"totalCctvAfterFilter":13,"totalCameraCount":38,"filterRate":1.0,"filterExecutionTimeNs":12400,"success":true},"policeQuery":{"queryDurationNs":71463800,"found":true,"nearestAddress":"서울특별시 영등포구 영신로20길 11","nearestDistance":285.0684377813273,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"AT4":1,"CS2":15,"SC4":3,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":6,"PM9":8},"placesAfterFilter":{"AT4":1,"CS2":15,"SC4":3,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":6,"PM9":8},"totalBeforeFilter":112,"totalAfterFilter":112,"filterRate":1.0,"filterExecutionTimeNs":137300,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:49.383 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.383479900Z","nanoTime":28195398160100,"traceId":"e2794892","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:56:49.383 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:56:49.384 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 36.64, 편의성: 34.29, 종합: 35.47
2025-11-21 19:56:49.384 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.384500200Z","nanoTime":28195398417800,"traceId":"e2794892","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":257700,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":64.3664452773341,"policeDistance":285.0684377813273,"cctvScore":43.333333333333336,"cctvCount":13,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":36.64326691653356,"success":true},"convenienceScore":{"categoryScores":{"AT4":3.0,"CS2":3.75,"SC4":6.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":6.0,"FD6":15.0,"PK6":18.0,"PM9":64.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":34.28846153846154,"success":true},"overallScore":35.46586422749755,"errorMessage":null,"success":true}}
2025-11-21 19:56:49.384 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.384500200Z","nanoTime":28195398557100,"traceId":"e2794892","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:56:49.384 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:56:49.384 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구 영신로20길 11, latitude=37.557429, longitude=127.028852, geohashId=wydmdt5)
2025-11-21 19:56:49.384 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 285.0684377813273
2025-11-21 19:56:49.385 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdt3
2025-11-21 19:56:49.385 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:56:49.385 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.385106600Z","nanoTime":28195399821900,"traceId":"e2794892","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1264800,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["은행이(가) 107m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdt3","dataSize":15905,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":15905,"errorMessage":null,"success":true}}
2025-11-21 19:56:49.385 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:56:49.556 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:56:49.556 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55794070912707, longitude=127.01942119538982, radius=500)
2025-11-21 19:56:49.557 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:56:49.557 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55794070912707, longitude=127.01942119538982, radius=500
2025-11-21 19:56:49.557 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.557552Z","nanoTime":28195571328900,"traceId":"b902b6a8","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:56:49.557 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:56:49.557 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55794070912707, lon=127.01942119538982
2025-11-21 19:56:49.557 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.557552Z","nanoTime":28195571395500,"traceId":"b902b6a8","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:56:49.557 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.557552Z","nanoTime":28195571427200,"traceId":"b902b6a8","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":31700,"duration_ms":0,"resultData":{"latitude":37.55794070912707,"longitude":127.01942119538982,"precision":7,"centerHash":"wydmdmh","adjacentHashes":["wydmdmh","wydmdmk","wydmdmm","wydmdmj","wydmdkv","wydmdku","wydmdkg","wydmdm5","wydmdm7"],"errorMessage":null,"success":true}}
2025-11-21 19:56:49.557 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdmh, wydmdmk, wydmdmm, wydmdmj, wydmdkv, wydmdku, wydmdkg, wydmdm5, wydmdm7]
2025-11-21 19:56:49.557 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdmh
2025-11-21 19:56:49.557 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.557552Z","nanoTime":28195571515900,"traceId":"b902b6a8","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":187000,"duration_ms":0,"resultData":{"requestLatitude":37.55794070912707,"requestLongitude":127.01942119538982,"requestRadius":500,"centerGeohashId":"wydmdmh","nineBlockGeohashes":["wydmdmh","wydmdmk","wydmdmm","wydmdmj","wydmdkv","wydmdku","wydmdkg","wydmdm5","wydmdm7"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:56:49.557 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.557552Z","nanoTime":28195571559000,"traceId":"b902b6a8","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:56:49.557 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:56:49.557 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdmh
2025-11-21 19:56:49.558 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 1.2466ms)
2025-11-21 19:56:49.558 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:56:49.560 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:56:49.560 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 1개, 미스: 8개
2025-11-21 19:56:49.560 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.9998ms, 역직렬화: 0.117ms
2025-11-21 19:56:49.560 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:56:49.560 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.560812400Z","nanoTime":28195575247800,"traceId":"b902b6a8","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3688800,"duration_ms":3,"resultData":{"centerGeohashId":"wydmdmh","nineBlockGeohashes":["wydmdmh","wydmdmk","wydmdmm","wydmdmj","wydmdkv","wydmdku","wydmdkg","wydmdm5","wydmdm7"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdmh","hit":false,"valueSize":0,"l1CacheGetDurationNs":1246600,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdmh","cacheKey":"data:wydmdmh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":261400},{"geohashId":"wydmdmk","cacheKey":"data:wydmdmk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":153300},{"geohashId":"wydmdmm","cacheKey":"data:wydmdmm:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":388,"l2CacheGetDurationNs":421300},{"geohashId":"wydmdmj","cacheKey":"data:wydmdmj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":225900},{"geohashId":"wydmdkv","cacheKey":"data:wydmdkv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":119000},{"geohashId":"wydmdku","cacheKey":"data:wydmdku:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":108500},{"geohashId":"wydmdkg","cacheKey":"data:wydmdkg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":142800},{"geohashId":"wydmdm5","cacheKey":"data:wydmdm5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":196000},{"geohashId":"wydmdm7","cacheKey":"data:wydmdm7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":144200}],"l2TotalHits":1,"l2TotalMisses":8,"l2CacheTotalDurationNs":1999800,"l2JsonDeserializeTotalDurationNs":117000,"errorMessage":null,"success":true}}
2025-11-21 19:56:49.560 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.560812400Z","nanoTime":28195575494800,"traceId":"b902b6a8","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:56:49.560 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:56:49.560 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 8개
2025-11-21 19:56:49.566 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 9건
2025-11-21 19:56:49.567 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:56:49.567 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 4개
2025-11-21 19:56:49.567 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.567179700Z","nanoTime":28195581538800,"traceId":"b902b6a8","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6044000,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydmdmh","wydmdmk","wydmdmj","wydmdkv","wydmdku","wydmdkg","wydmdm5","wydmdm7"],"cctvQueryResult":{"queryGeohashIds":["wydmdmh","wydmdmk","wydmdmj","wydmdkv","wydmdku","wydmdkg","wydmdm5","wydmdm7"],"totalRowsReturned":9,"rowsPerGrid":{"wydmdkv":2,"wydmdkg":2,"wydmdmj":5},"queryExecutionTimeNs":4391700,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdkv","cacheKey":"data:wydmdkv:cctv","dataCount":2,"dataSize":266,"errorMessage":null,"success":true},{"geohashId":"wydmdkg","cacheKey":"data:wydmdkg:cctv","dataCount":2,"dataSize":262,"errorMessage":null,"success":true},{"geohashId":"wydmdmj","cacheKey":"data:wydmdmj:cctv","dataCount":5,"dataSize":656,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:56:49.567 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.567179700Z","nanoTime":28195581714800,"traceId":"b902b6a8","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:56:49.567 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:56:49.567 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.55794070912707, 127.01942119538982)
2025-11-21 19:56:49.568 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:56:49.655 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:56:49.655 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:56:49.655 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:56:49.655 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.55794070912707, 127.01942119538982), 반경: 500m
2025-11-21 19:56:49.737 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:56:49.737 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 120건
2025-11-21 19:56:49.739 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:56:49.739 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:56:49.739 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 중구
2025-11-21 19:56:49.739 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 중구
2025-11-21 19:56:49.739 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:56:49.739 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:56:49.739 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:56:49.739 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.866910799
2025-11-21 19:56:49.739 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.739319Z","nanoTime":28195754250800,"traceId":"b902b6a8","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":172536000,"duration_ms":172,"resultData":{"latitude":37.55794070912707,"longitude":127.01942119538982,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":172401400,"addressApiResult":{"cached":false,"cacheKey":"address:37.55794070912707:127.01942119538982","roadAddress":"서울특별시 중구 청구로 6","jibunAddress":"서울 중구 신당동 36-227","responseSize":68,"executionTimeNs":88271100,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:중구","guName":"중구","arrestRate":0.866910799,"dataFound":true,"executionTimeNs":651600,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.55794070912707:127.01942119538982:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":2,"CS2":15,"SC4":6,"MT1":1,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":5,"FD6":15,"PK6":12,"OL7":0,"PM9":3},"totalPlaces":120,"responseSize":14024,"executionTimeNs":83478700,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:49.739 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.739319Z","nanoTime":28195754502300,"traceId":"b902b6a8","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:56:49.739 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:56:49.739 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:56:49.739 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 12개
2025-11-21 19:56:49.739 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 12개 (총 카메라 대수: 33대)
2025-11-21 19:56:49.739 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:56:49.809 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 성동구  광나루로2길 35 성수지구대 (거리: 356m)
2025-11-21 19:56:49.809 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:56:49.809 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:56:49.809 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:56:49.809 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:56:49.809 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.809477500Z","nanoTime":28195823725000,"traceId":"b902b6a8","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":69222700,"duration_ms":69,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":12,"totalCctvAfterFilter":12,"totalCameraCount":33,"filterRate":1.0,"filterExecutionTimeNs":12200,"success":true},"policeQuery":{"queryDurationNs":68718200,"found":true,"nearestAddress":"서울특별시 성동구  광나루로2길 35 성수지구대","nearestDistance":356.1073661114461,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"AT4":2,"CS2":15,"SC4":6,"MT1":1,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":5,"FD6":15,"PK6":12,"PM9":3},"placesAfterFilter":{"CT1":1,"AT4":2,"CS2":15,"SC4":6,"MT1":1,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":5,"FD6":15,"PK6":12,"PM9":3},"totalBeforeFilter":120,"totalAfterFilter":120,"filterRate":1.0,"filterExecutionTimeNs":128600,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:49.809 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.809477500Z","nanoTime":28195823916400,"traceId":"b902b6a8","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:56:49.809 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:56:49.809 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 58.65, 편의성: 32.03, 종합: 45.34
2025-11-21 19:56:49.809 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.809477500Z","nanoTime":28195824099900,"traceId":"b902b6a8","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":183500,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":55.48657923606925,"policeDistance":356.1073661114461,"cctvScore":40.0,"cctvCount":12,"arrestRateScore":86.6910799,"arrestRate":0.866910799,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":58.653297740820776,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"AT4":6.0,"CS2":11.431706982486624,"SC4":12.0,"MT1":10.0,"BK9":70.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":15.0,"FD6":15.0,"PK6":36.0,"PM9":24.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"중구","guPopulation":131214,"finalScore":32.03083621303476,"success":true},"overallScore":45.34206697692777,"errorMessage":null,"success":true}}
2025-11-21 19:56:49.809 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.809477500Z","nanoTime":28195824203900,"traceId":"b902b6a8","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:56:49.809 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:56:49.809 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 성동구  광나루로2길 35 성수지구대, latitude=37.554742, longitude=127.019619, geohashId=wydmdks)
2025-11-21 19:56:49.809 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 356.1073661114461
2025-11-21 19:56:49.811 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdmh
2025-11-21 19:56:49.811 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:56:49.811 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:49.811226200Z","nanoTime":28195825281200,"traceId":"b902b6a8","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1077300,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["카페이(가) 43m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdmh","dataSize":16728,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":16728,"errorMessage":null,"success":true}}
2025-11-21 19:56:49.811 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:56:51.170 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:56:51.170 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55857237643145, longitude=127.0121779619517, radius=500)
2025-11-21 19:56:51.170 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:56:51.170 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55857237643145, longitude=127.0121779619517, radius=500
2025-11-21 19:56:51.170 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:51.170635700Z","nanoTime":28197184721200,"traceId":"e394bd13","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:56:51.170 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:56:51.170 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55857237643145, lon=127.0121779619517
2025-11-21 19:56:51.170 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:51.170992400Z","nanoTime":28197184799700,"traceId":"e394bd13","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:56:51.170 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:51.170992400Z","nanoTime":28197184840900,"traceId":"e394bd13","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":41200,"duration_ms":0,"resultData":{"latitude":37.55857237643145,"longitude":127.0121779619517,"precision":7,"centerHash":"wydmdjr","adjacentHashes":["wydmdjr","wydmdjx","wydmdm8","wydmdm2","wydmdm0","wydmdjp","wydmdjn","wydmdjq","wydmdjw"],"errorMessage":null,"success":true}}
2025-11-21 19:56:51.170 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdjr, wydmdjx, wydmdm8, wydmdm2, wydmdm0, wydmdjp, wydmdjn, wydmdjq, wydmdjw]
2025-11-21 19:56:51.170 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdjr
2025-11-21 19:56:51.170 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:51.170992400Z","nanoTime":28197185046100,"traceId":"e394bd13","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":324900,"duration_ms":0,"resultData":{"requestLatitude":37.55857237643145,"requestLongitude":127.0121779619517,"requestRadius":500,"centerGeohashId":"wydmdjr","nineBlockGeohashes":["wydmdjr","wydmdjx","wydmdm8","wydmdm2","wydmdm0","wydmdjp","wydmdjn","wydmdjq","wydmdjw"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:56:51.170 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:51.170992400Z","nanoTime":28197185108500,"traceId":"e394bd13","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:56:51.170 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:56:51.170 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdjr
2025-11-21 19:56:51.170 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4572ms)
2025-11-21 19:56:51.170 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:56:51.172 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:56:51.174 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 3개, 미스: 6개
2025-11-21 19:56:51.174 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.8786ms, 역직렬화: 0.2854ms
2025-11-21 19:56:51.174 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:56:51.174 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:51.174833800Z","nanoTime":28197188742700,"traceId":"e394bd13","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3634200,"duration_ms":3,"resultData":{"centerGeohashId":"wydmdjr","nineBlockGeohashes":["wydmdjr","wydmdjx","wydmdm8","wydmdm2","wydmdm0","wydmdjp","wydmdjn","wydmdjq","wydmdjw"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdjr","hit":false,"valueSize":0,"l1CacheGetDurationNs":457200,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdjr","cacheKey":"data:wydmdjr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":247300},{"geohashId":"wydmdjx","cacheKey":"data:wydmdjx:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":138100},{"geohashId":"wydmdm8","cacheKey":"data:wydmdm8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":233000},{"geohashId":"wydmdm2","cacheKey":"data:wydmdm2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":268900},{"geohashId":"wydmdm0","cacheKey":"data:wydmdm0:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":522,"l2CacheGetDurationNs":464000},{"geohashId":"wydmdjp","cacheKey":"data:wydmdjp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":165100},{"geohashId":"wydmdjn","cacheKey":"data:wydmdjn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":168600},{"geohashId":"wydmdjq","cacheKey":"data:wydmdjq:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":389,"l2CacheGetDurationNs":311200},{"geohashId":"wydmdjw","cacheKey":"data:wydmdjw:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":257,"l2CacheGetDurationNs":506200}],"l2TotalHits":3,"l2TotalMisses":6,"l2CacheTotalDurationNs":2878600,"l2JsonDeserializeTotalDurationNs":285400,"errorMessage":null,"success":true}}
2025-11-21 19:56:51.174 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:51.174833800Z","nanoTime":28197188960600,"traceId":"e394bd13","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:56:51.174 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:56:51.174 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 6개
2025-11-21 19:56:51.176 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 22건
2025-11-21 19:56:51.176 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:56:51.176 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:56:51.176 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:51.176646400Z","nanoTime":28197196683700,"traceId":"e394bd13","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":7723100,"duration_ms":7,"resultData":{"inputCctvMissGrids":["wydmdjr","wydmdjx","wydmdm8","wydmdm2","wydmdjp","wydmdjn"],"cctvQueryResult":{"queryGeohashIds":["wydmdjr","wydmdjx","wydmdm8","wydmdm2","wydmdjp","wydmdjn"],"totalRowsReturned":22,"rowsPerGrid":{"wydmdm8":5,"wydmdjx":4,"wydmdjr":3,"wydmdjn":3,"wydmdm2":4,"wydmdjp":3},"queryExecutionTimeNs":4881200,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdm8","cacheKey":"data:wydmdm8:cctv","dataCount":5,"dataSize":648,"errorMessage":null,"success":true},{"geohashId":"wydmdjx","cacheKey":"data:wydmdjx:cctv","dataCount":4,"dataSize":522,"errorMessage":null,"success":true},{"geohashId":"wydmdjr","cacheKey":"data:wydmdjr:cctv","dataCount":3,"dataSize":389,"errorMessage":null,"success":true},{"geohashId":"wydmdjn","cacheKey":"data:wydmdjn:cctv","dataCount":3,"dataSize":392,"errorMessage":null,"success":true},{"geohashId":"wydmdm2","cacheKey":"data:wydmdm2:cctv","dataCount":4,"dataSize":521,"errorMessage":null,"success":true},{"geohashId":"wydmdjp","cacheKey":"data:wydmdjp:cctv","dataCount":3,"dataSize":388,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:56:51.176 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:51.176646400Z","nanoTime":28197196863400,"traceId":"e394bd13","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:56:51.176 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:56:51.176 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.55857237643145, 127.0121779619517)
2025-11-21 19:56:51.176 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:56:51.240 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:56:51.240 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:56:51.240 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:56:51.240 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.55857237643145, 127.0121779619517), 반경: 500m
2025-11-21 19:56:51.323 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:56:51.323 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 133건
2025-11-21 19:56:51.323 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:56:51.323 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:56:51.323 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 중구
2025-11-21 19:56:51.325 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 중구
2025-11-21 19:56:51.325 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:56:51.325 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:56:51.325 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:56:51.325 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.866910799
2025-11-21 19:56:51.325 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:51.325760200Z","nanoTime":28197340034300,"traceId":"e394bd13","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":143170900,"duration_ms":143,"resultData":{"latitude":37.55857237643145,"longitude":127.0121779619517,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":143031600,"addressApiResult":{"cached":false,"cacheKey":"address:37.55857237643145:127.0121779619517","roadAddress":"서울특별시 중구 다산로 165","jibunAddress":"서울 중구 신당동 338-16","responseSize":70,"executionTimeNs":57762500,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:중구","guName":"중구","arrestRate":0.866910799,"dataFound":true,"executionTimeNs":890900,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.55857237643145:127.0121779619517:500","categoryCount":15,"placesByCategory":{"CT1":3,"AT4":0,"CS2":15,"SC4":5,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":5,"FD6":15,"PK6":15,"OL7":2,"PM9":10},"totalPlaces":133,"responseSize":15338,"executionTimeNs":84378200,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:51.325 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:51.325760200Z","nanoTime":28197340279800,"traceId":"e394bd13","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:56:51.325 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:56:51.325 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:56:51.325 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 31개
2025-11-21 19:56:51.325 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 31개 (총 카메라 대수: 115대)
2025-11-21 19:56:51.325 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:56:51.396 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  동호로 261 (거리: 650m)
2025-11-21 19:56:51.396 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:56:51.396 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:56:51.396 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 19:56:51.396 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:56:51.396 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:51.396951500Z","nanoTime":28197412310700,"traceId":"e394bd13","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":72030900,"duration_ms":72,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":31,"totalCctvAfterFilter":31,"totalCameraCount":115,"filterRate":1.0,"filterExecutionTimeNs":26200,"success":true},"policeQuery":{"queryDurationNs":71083500,"found":true,"nearestAddress":"서울특별시 중구  동호로 261","nearestDistance":650.0812154315959,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":3,"CS2":15,"SC4":5,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":5,"FD6":15,"PK6":15,"OL7":2,"PM9":10},"placesAfterFilter":{"CT1":3,"CS2":15,"SC4":5,"BK9":15,"HP8":15,"AC5":15,"CE7":14,"SW8":3,"PO3":5,"FD6":15,"PK6":15,"OL7":2,"PM9":10},"totalBeforeFilter":133,"totalAfterFilter":132,"filterRate":0.9924812030075187,"filterExecutionTimeNs":240200,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:51.396 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:51.396951500Z","nanoTime":28197412573300,"traceId":"e394bd13","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:56:51.396 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:56:51.398 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 71.63, 편의성: 39.73, 종합: 55.68
2025-11-21 19:56:51.398 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:51.398965500Z","nanoTime":28197412936500,"traceId":"e394bd13","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":363200,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":18.739848071050517,"policeDistance":650.0812154315959,"cctvScore":100.0,"cctvCount":31,"arrestRateScore":86.6910799,"arrestRate":0.866910799,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":71.62927839131515,"success":true},"convenienceScore":{"categoryScores":{"CT1":12.0,"CS2":11.431706982486624,"SC4":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":28.0,"SW8":100.0,"PO3":15.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":80.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"중구","guPopulation":131214,"finalScore":39.72551592172974,"success":true},"overallScore":55.677397156522446,"errorMessage":null,"success":true}}
2025-11-21 19:56:51.399 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:51.399489100Z","nanoTime":28197413307300,"traceId":"e394bd13","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:56:51.399 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:56:51.399 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  동호로 261, latitude=37.558764, longitude=127.004807, geohashId=wydmdj6)
2025-11-21 19:56:51.399 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 650.0812154315959
2025-11-21 19:56:51.399 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdjr
2025-11-21 19:56:51.399 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:56:51.399 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:51.399958800Z","nanoTime":28197415146100,"traceId":"e394bd13","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1838800,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["병원이(가) 46m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdjr","dataSize":19571,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19571,"errorMessage":null,"success":true}}
2025-11-21 19:56:51.399 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:56:51.850 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:56:51.850 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.555545144973465, longitude=127.010955195445, radius=500)
2025-11-21 19:56:51.850 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:56:51.850 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.555545144973465, longitude=127.010955195445, radius=500
2025-11-21 19:56:51.851 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:51.851466100Z","nanoTime":28197865222400,"traceId":"9b5d8e59","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:56:51.851 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:56:51.851 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.555545144973465, lon=127.010955195445
2025-11-21 19:56:51.851 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:51.851466100Z","nanoTime":28197865423700,"traceId":"9b5d8e59","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:56:51.851 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:51.851466100Z","nanoTime":28197865625400,"traceId":"9b5d8e59","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":201700,"duration_ms":0,"resultData":{"latitude":37.555545144973465,"longitude":127.010955195445,"precision":7,"centerHash":"wydmdhy","adjacentHashes":["wydmdhy","wydmdjn","wydmdjp","wydmdhz","wydmdhx","wydmdhw","wydmdht","wydmdhv","wydmdjj"],"errorMessage":null,"success":true}}
2025-11-21 19:56:51.851 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdhy, wydmdjn, wydmdjp, wydmdhz, wydmdhx, wydmdhw, wydmdht, wydmdhv, wydmdjj]
2025-11-21 19:56:51.851 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdhy
2025-11-21 19:56:51.851 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:51.851466100Z","nanoTime":28197865877000,"traceId":"9b5d8e59","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":654600,"duration_ms":0,"resultData":{"requestLatitude":37.555545144973465,"requestLongitude":127.010955195445,"requestRadius":500,"centerGeohashId":"wydmdhy","nineBlockGeohashes":["wydmdhy","wydmdjn","wydmdjp","wydmdhz","wydmdhx","wydmdhw","wydmdht","wydmdhv","wydmdjj"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:56:51.851 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:51.851466100Z","nanoTime":28197865962800,"traceId":"9b5d8e59","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:56:51.851 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:56:51.851 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdhy
2025-11-21 19:56:51.852 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4992ms)
2025-11-21 19:56:51.852 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:56:51.856 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:56:51.856 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 6개, 미스: 3개
2025-11-21 19:56:51.856 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 3.4431ms, 역직렬화: 0.3771ms
2025-11-21 19:56:51.856 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:56:51.856 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:51.856146200Z","nanoTime":28197870234700,"traceId":"9b5d8e59","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":4271900,"duration_ms":4,"resultData":{"centerGeohashId":"wydmdhy","nineBlockGeohashes":["wydmdhy","wydmdjn","wydmdjp","wydmdhz","wydmdhx","wydmdhw","wydmdht","wydmdhv","wydmdjj"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdhy","hit":false,"valueSize":0,"l1CacheGetDurationNs":499200,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdhy","cacheKey":"data:wydmdhy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":159100},{"geohashId":"wydmdjn","cacheKey":"data:wydmdjn:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":392,"l2CacheGetDurationNs":421200},{"geohashId":"wydmdjp","cacheKey":"data:wydmdjp:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":388,"l2CacheGetDurationNs":558400},{"geohashId":"wydmdhz","cacheKey":"data:wydmdhz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":141600},{"geohashId":"wydmdhx","cacheKey":"data:wydmdhx:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":151900},{"geohashId":"wydmdhw","cacheKey":"data:wydmdhw:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":260,"l2CacheGetDurationNs":358600},{"geohashId":"wydmdht","cacheKey":"data:wydmdht:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":391,"l2CacheGetDurationNs":352800},{"geohashId":"wydmdhv","cacheKey":"data:wydmdhv:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":264,"l2CacheGetDurationNs":302500},{"geohashId":"wydmdjj","cacheKey":"data:wydmdjj:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":387,"l2CacheGetDurationNs":498400}],"l2TotalHits":6,"l2TotalMisses":3,"l2CacheTotalDurationNs":3443100,"l2JsonDeserializeTotalDurationNs":377100,"errorMessage":null,"success":true}}
2025-11-21 19:56:51.856 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:51.856525300Z","nanoTime":28197870411500,"traceId":"9b5d8e59","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:56:51.856 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:56:51.856 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 3개
2025-11-21 19:56:51.859 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 12건
2025-11-21 19:56:51.861 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:56:51.861 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:56:51.862 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:51.861882800Z","nanoTime":28197876607800,"traceId":"9b5d8e59","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6196300,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydmdhy","wydmdhz","wydmdhx"],"cctvQueryResult":{"queryGeohashIds":["wydmdhy","wydmdhz","wydmdhx"],"totalRowsReturned":12,"rowsPerGrid":{"wydmdhx":3,"wydmdhy":5,"wydmdhz":4},"queryExecutionTimeNs":4092100,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdhx","cacheKey":"data:wydmdhx:cctv","dataCount":3,"dataSize":387,"errorMessage":null,"success":true},{"geohashId":"wydmdhy","cacheKey":"data:wydmdhy:cctv","dataCount":5,"dataSize":647,"errorMessage":null,"success":true},{"geohashId":"wydmdhz","cacheKey":"data:wydmdhz:cctv","dataCount":4,"dataSize":523,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:56:51.862 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:51.862886Z","nanoTime":28197876877900,"traceId":"9b5d8e59","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:56:51.862 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:56:51.862 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.555545144973465, 127.010955195445)
2025-11-21 19:56:51.863 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:56:51.940 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:56:51.940 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:56:51.940 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:56:51.940 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.555545144973465, 127.010955195445), 반경: 500m
2025-11-21 19:56:52.021 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:56:52.021 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 141건
2025-11-21 19:56:52.021 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:56:52.021 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:56:52.021 [http-nio-8185-exec-4] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:56:52.021 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:56:52.021 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:56:52.021 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:56:52.021 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:56:52.021 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.021516500Z","nanoTime":28198041318300,"traceId":"9b5d8e59","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":164440400,"duration_ms":164,"resultData":{"latitude":37.555545144973465,"longitude":127.010955195445,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":164299100,"addressApiResult":{"cached":false,"cacheKey":"address:37.555545144973465:127.010955195445","roadAddress":"주소 없음","jibunAddress":"서울 중구 신당동 369-2","responseSize":58,"executionTimeNs":83289500,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":28700,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.555545144973465:127.010955195445:500","categoryCount":15,"placesByCategory":{"CT1":5,"AT4":0,"CS2":15,"SC4":3,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":9,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"totalPlaces":141,"responseSize":16231,"executionTimeNs":80980900,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:52.021 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.021516500Z","nanoTime":28198041524700,"traceId":"9b5d8e59","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:56:52.021 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:56:52.021 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:56:52.021 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 28개
2025-11-21 19:56:52.021 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 28개 (총 카메라 대수: 75대)
2025-11-21 19:56:52.021 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:56:52.107 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: "서울특별시 중구  동호로 5길 15, 약수지구대" (거리: 398m)
2025-11-21 19:56:52.107 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:56:52.107 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:56:52.109 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 19:56:52.109 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:56:52.109 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.109831700Z","nanoTime":28198123707500,"traceId":"9b5d8e59","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":82182800,"duration_ms":82,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":28,"totalCctvAfterFilter":28,"totalCameraCount":75,"filterRate":1.0,"filterExecutionTimeNs":17000,"success":true},"policeQuery":{"queryDurationNs":81497700,"found":true,"nearestAddress":"\"서울특별시 중구  동호로 5길 15, 약수지구대\"","nearestDistance":398.4736199606577,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":5,"CS2":15,"SC4":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":9,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"placesAfterFilter":{"CT1":5,"CS2":15,"SC4":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":9,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"totalBeforeFilter":141,"totalAfterFilter":141,"filterRate":1.0,"filterExecutionTimeNs":225100,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:52.109 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.109831700Z","nanoTime":28198123952100,"traceId":"9b5d8e59","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:56:52.109 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:56:52.109 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 52.39, 편의성: 42.06, 종합: 47.22
2025-11-21 19:56:52.109 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.109831700Z","nanoTime":28198124281400,"traceId":"9b5d8e59","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":329300,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":50.190797504917796,"policeDistance":398.4736199606577,"cctvScore":93.33333333333333,"cctvCount":28,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":52.39057258480867,"success":true},"convenienceScore":{"categoryScores":{"CT1":20.0,"CS2":3.75,"SC4":6.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":27.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":42.05769230769231,"success":true},"overallScore":47.22413244625049,"errorMessage":null,"success":true}}
2025-11-21 19:56:52.109 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.109831700Z","nanoTime":28198124437700,"traceId":"9b5d8e59","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:56:52.109 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:56:52.109 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address="서울특별시 중구  동호로 5길 15, 약수지구대", latitude=37.552144, longitude=127.012379, geohashId=wydmdhp)
2025-11-21 19:56:52.109 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 398.4736199606577
2025-11-21 19:56:52.111 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdhy
2025-11-21 19:56:52.111 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:56:52.111 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.111847200Z","nanoTime":28198127265300,"traceId":"9b5d8e59","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":2827600,"duration_ms":2,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["카페이(가) 24m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdhy","dataSize":20192,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20192,"errorMessage":null,"success":true}}
2025-11-21 19:56:52.111 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:56:52.317 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:56:52.317 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.551815072742095, longitude=127.0102982758251, radius=500)
2025-11-21 19:56:52.317 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:56:52.317 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.551815072742095, longitude=127.0102982758251, radius=500
2025-11-21 19:56:52.317 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.317608Z","nanoTime":28198331840200,"traceId":"3bcfb9d4","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:56:52.317 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:56:52.317 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.551815072742095, lon=127.0102982758251
2025-11-21 19:56:52.317 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.317608Z","nanoTime":28198331955100,"traceId":"3bcfb9d4","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:56:52.317 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.317608Z","nanoTime":28198332055000,"traceId":"3bcfb9d4","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":99900,"duration_ms":0,"resultData":{"latitude":37.551815072742095,"longitude":127.0102982758251,"precision":7,"centerHash":"wydmdhn","adjacentHashes":["wydmdhn","wydmdhq","wydmdhr","wydmdhp","wydmd5z","wydmd5y","wydmd5v","wydmdhj","wydmdhm"],"errorMessage":null,"success":true}}
2025-11-21 19:56:52.317 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdhn, wydmdhq, wydmdhr, wydmdhp, wydmd5z, wydmd5y, wydmd5v, wydmdhj, wydmdhm]
2025-11-21 19:56:52.317 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdhn
2025-11-21 19:56:52.317 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.317608Z","nanoTime":28198332237700,"traceId":"3bcfb9d4","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":397500,"duration_ms":0,"resultData":{"requestLatitude":37.551815072742095,"requestLongitude":127.0102982758251,"requestRadius":500,"centerGeohashId":"wydmdhn","nineBlockGeohashes":["wydmdhn","wydmdhq","wydmdhr","wydmdhp","wydmd5z","wydmd5y","wydmd5v","wydmdhj","wydmdhm"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:56:52.317 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.317608Z","nanoTime":28198332299600,"traceId":"3bcfb9d4","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:56:52.317 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:56:52.318 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdhn
2025-11-21 19:56:52.318 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5514ms)
2025-11-21 19:56:52.318 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:56:52.321 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:56:52.321 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 3개, 미스: 6개
2025-11-21 19:56:52.321 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.8672ms, 역직렬화: 0.34ms
2025-11-21 19:56:52.321 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:56:52.322 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.321603600Z","nanoTime":28198336008000,"traceId":"3bcfb9d4","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3708400,"duration_ms":3,"resultData":{"centerGeohashId":"wydmdhn","nineBlockGeohashes":["wydmdhn","wydmdhq","wydmdhr","wydmdhp","wydmd5z","wydmd5y","wydmd5v","wydmdhj","wydmdhm"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdhn","hit":false,"valueSize":0,"l1CacheGetDurationNs":551400,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdhn","cacheKey":"data:wydmdhn:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":652,"l2CacheGetDurationNs":415700},{"geohashId":"wydmdhq","cacheKey":"data:wydmdhq:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":649,"l2CacheGetDurationNs":463800},{"geohashId":"wydmdhr","cacheKey":"data:wydmdhr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":96100},{"geohashId":"wydmdhp","cacheKey":"data:wydmdhp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":111200},{"geohashId":"wydmd5z","cacheKey":"data:wydmd5z:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":190400},{"geohashId":"wydmd5y","cacheKey":"data:wydmd5y:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":253500},{"geohashId":"wydmd5v","cacheKey":"data:wydmd5v:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":254100},{"geohashId":"wydmdhj","cacheKey":"data:wydmdhj:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":392,"l2CacheGetDurationNs":477800},{"geohashId":"wydmdhm","cacheKey":"data:wydmdhm:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":161600}],"l2TotalHits":3,"l2TotalMisses":6,"l2CacheTotalDurationNs":2867200,"l2JsonDeserializeTotalDurationNs":340000,"errorMessage":null,"success":true}}
2025-11-21 19:56:52.322 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.322369300Z","nanoTime":28198336237700,"traceId":"3bcfb9d4","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:56:52.322 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:56:52.322 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 6개
2025-11-21 19:56:52.326 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 6건
2025-11-21 19:56:52.328 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:56:52.328 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 6개
2025-11-21 19:56:52.328 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.328598200Z","nanoTime":28198342594400,"traceId":"3bcfb9d4","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6356700,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydmdhr","wydmdhp","wydmd5z","wydmd5y","wydmd5v","wydmdhm"],"cctvQueryResult":{"queryGeohashIds":["wydmdhr","wydmdhp","wydmd5z","wydmd5y","wydmd5v","wydmdhm"],"totalRowsReturned":6,"rowsPerGrid":{"wydmdhp":1,"wydmdhr":4,"wydmd5z":1},"queryExecutionTimeNs":4174800,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdhp","cacheKey":"data:wydmdhp:cctv","dataCount":1,"dataSize":132,"errorMessage":null,"success":true},{"geohashId":"wydmdhr","cacheKey":"data:wydmdhr:cctv","dataCount":4,"dataSize":525,"errorMessage":null,"success":true},{"geohashId":"wydmd5z","cacheKey":"data:wydmd5z:cctv","dataCount":1,"dataSize":133,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:56:52.328 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.328598200Z","nanoTime":28198342788200,"traceId":"3bcfb9d4","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:56:52.328 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:56:52.328 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.551815072742095, 127.0102982758251)
2025-11-21 19:56:52.328 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:56:52.394 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:56:52.394 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:56:52.394 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:56:52.394 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.551815072742095, 127.0102982758251), 반경: 500m
2025-11-21 19:56:52.498 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:56:52.498 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 137건
2025-11-21 19:56:52.501 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:56:52.501 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:56:52.501 [http-nio-8185-exec-6] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:56:52.501 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:56:52.501 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:56:52.501 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:56:52.501 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:56:52.501 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.501974800Z","nanoTime":28198516119000,"traceId":"3bcfb9d4","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":173330800,"duration_ms":173,"resultData":{"latitude":37.551815072742095,"longitude":127.0102982758251,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":173166300,"addressApiResult":{"cached":false,"cacheKey":"address:37.551815072742095:127.0102982758251","roadAddress":"주소 없음","jibunAddress":"서울 중구 신당동 844","responseSize":56,"executionTimeNs":66454600,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":59000,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.551815072742095:127.0102982758251:500","categoryCount":15,"placesByCategory":{"CT1":3,"AT4":1,"CS2":15,"SC4":4,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":6,"FD6":15,"PK6":14,"OL7":1,"PM9":15},"totalPlaces":137,"responseSize":15772,"executionTimeNs":106652700,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:52.501 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.501974800Z","nanoTime":28198516370700,"traceId":"3bcfb9d4","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:56:52.501 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:56:52.501 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:56:52.501 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 19개
2025-11-21 19:56:52.502 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 19개 (총 카메라 대수: 35대)
2025-11-21 19:56:52.502 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:56:52.582 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: "서울특별시 중구  동호로 5길 15, 약수지구대" (거리: 187m)
2025-11-21 19:56:52.582 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:56:52.582 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:56:52.582 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:56:52.582 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:56:52.582 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.582745800Z","nanoTime":28198600913000,"traceId":"3bcfb9d4","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":84542300,"duration_ms":84,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":19,"totalCctvAfterFilter":19,"totalCameraCount":35,"filterRate":1.0,"filterExecutionTimeNs":20100,"success":true},"policeQuery":{"queryDurationNs":83859800,"found":true,"nearestAddress":"\"서울특별시 중구  동호로 5길 15, 약수지구대\"","nearestDistance":187.03806976464193,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":3,"AT4":1,"CS2":15,"SC4":4,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":6,"FD6":15,"PK6":14,"OL7":1,"PM9":15},"placesAfterFilter":{"CT1":3,"AT4":1,"CS2":15,"SC4":4,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":6,"FD6":14,"PK6":14,"OL7":1,"PM9":15},"totalBeforeFilter":137,"totalAfterFilter":136,"filterRate":0.9927007299270073,"filterExecutionTimeNs":200700,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:52.582 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.582745800Z","nanoTime":28198601153500,"traceId":"3bcfb9d4","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:56:52.582 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:56:52.582 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 48.32, 편의성: 35.72, 종합: 42.02
2025-11-21 19:56:52.582 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.582745800Z","nanoTime":28198601398500,"traceId":"3bcfb9d4","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":245000,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":76.62024127941976,"policeDistance":187.03806976464193,"cctvScore":63.33333333333333,"cctvCount":19,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":48.319405717159256,"success":true},"convenienceScore":{"categoryScores":{"CT1":12.0,"AT4":3.0,"CS2":3.75,"SC4":8.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":18.0,"FD6":14.0,"PK6":42.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":35.71666666666667,"success":true},"overallScore":42.01803619191296,"errorMessage":null,"success":true}}
2025-11-21 19:56:52.582 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.582745800Z","nanoTime":28198601550600,"traceId":"3bcfb9d4","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:56:52.582 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:56:52.582 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address="서울특별시 중구  동호로 5길 15, 약수지구대", latitude=37.552144, longitude=127.012379, geohashId=wydmdhp)
2025-11-21 19:56:52.582 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 187.03806976464193
2025-11-21 19:56:52.589 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdhn
2025-11-21 19:56:52.589 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:56:52.590 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.589406700Z","nanoTime":28198604053600,"traceId":"3bcfb9d4","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":2503000,"duration_ms":2,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["학원이(가) 63m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdhn","dataSize":18868,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":18868,"errorMessage":null,"success":true}}
2025-11-21 19:56:52.590 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:56:52.676 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:56:52.676 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.54777829093723, longitude=127.01337572038754, radius=500)
2025-11-21 19:56:52.676 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:56:52.676 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.54777829093723, longitude=127.01337572038754, radius=500
2025-11-21 19:56:52.676 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.676554200Z","nanoTime":28198692305900,"traceId":"9080ffb9","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:56:52.678 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:56:52.678 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.54777829093723, lon=127.01337572038754
2025-11-21 19:56:52.678 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.678606400Z","nanoTime":28198692480300,"traceId":"9080ffb9","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:56:52.678 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.678606400Z","nanoTime":28198692556300,"traceId":"9080ffb9","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":76000,"duration_ms":0,"resultData":{"latitude":37.54777829093723,"longitude":127.01337572038754,"precision":7,"centerHash":"wydmd72","adjacentHashes":["wydmd72","wydmd78","wydmd79","wydmd73","wydmd71","wydmd70","wydmd5p","wydmd5r","wydmd5x"],"errorMessage":null,"success":true}}
2025-11-21 19:56:52.678 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmd72, wydmd78, wydmd79, wydmd73, wydmd71, wydmd70, wydmd5p, wydmd5r, wydmd5x]
2025-11-21 19:56:52.678 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmd72
2025-11-21 19:56:52.678 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.678606400Z","nanoTime":28198692700200,"traceId":"9080ffb9","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":394300,"duration_ms":0,"resultData":{"requestLatitude":37.54777829093723,"requestLongitude":127.01337572038754,"requestRadius":500,"centerGeohashId":"wydmd72","nineBlockGeohashes":["wydmd72","wydmd78","wydmd79","wydmd73","wydmd71","wydmd70","wydmd5p","wydmd5r","wydmd5x"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:56:52.678 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.678606400Z","nanoTime":28198692756900,"traceId":"9080ffb9","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:56:52.678 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:56:52.678 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmd72
2025-11-21 19:56:52.679 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3743ms)
2025-11-21 19:56:52.679 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:56:52.680 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:56:52.680 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:56:52.680 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.3028ms, 역직렬화: 0.0ms
2025-11-21 19:56:52.680 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:56:52.680 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.680879Z","nanoTime":28198694721600,"traceId":"9080ffb9","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1964700,"duration_ms":1,"resultData":{"centerGeohashId":"wydmd72","nineBlockGeohashes":["wydmd72","wydmd78","wydmd79","wydmd73","wydmd71","wydmd70","wydmd5p","wydmd5r","wydmd5x"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmd72","hit":false,"valueSize":0,"l1CacheGetDurationNs":374300,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmd72","cacheKey":"data:wydmd72:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":173400},{"geohashId":"wydmd78","cacheKey":"data:wydmd78:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":158300},{"geohashId":"wydmd79","cacheKey":"data:wydmd79:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":106500},{"geohashId":"wydmd73","cacheKey":"data:wydmd73:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":114400},{"geohashId":"wydmd71","cacheKey":"data:wydmd71:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":104600},{"geohashId":"wydmd70","cacheKey":"data:wydmd70:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":128700},{"geohashId":"wydmd5p","cacheKey":"data:wydmd5p:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":142800},{"geohashId":"wydmd5r","cacheKey":"data:wydmd5r:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":166500},{"geohashId":"wydmd5x","cacheKey":"data:wydmd5x:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":134600}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1302800,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:56:52.680 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.680879Z","nanoTime":28198694903500,"traceId":"9080ffb9","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:56:52.680 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:56:52.680 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:56:52.683 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 8건
2025-11-21 19:56:52.684 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:56:52.684 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 6개
2025-11-21 19:56:52.684 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.684894500Z","nanoTime":28198699395000,"traceId":"9080ffb9","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4491500,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmd72","wydmd78","wydmd79","wydmd73","wydmd71","wydmd70","wydmd5p","wydmd5r","wydmd5x"],"cctvQueryResult":{"queryGeohashIds":["wydmd72","wydmd78","wydmd79","wydmd73","wydmd71","wydmd70","wydmd5p","wydmd5r","wydmd5x"],"totalRowsReturned":8,"rowsPerGrid":{"wydmd73":1,"wydmd5r":1,"wydmd70":1,"wydmd71":2,"wydmd5x":2,"wydmd79":1},"queryExecutionTimeNs":2882200,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmd73","cacheKey":"data:wydmd73:cctv","dataCount":1,"dataSize":134,"errorMessage":null,"success":true},{"geohashId":"wydmd5r","cacheKey":"data:wydmd5r:cctv","dataCount":1,"dataSize":130,"errorMessage":null,"success":true},{"geohashId":"wydmd70","cacheKey":"data:wydmd70:cctv","dataCount":1,"dataSize":133,"errorMessage":null,"success":true},{"geohashId":"wydmd71","cacheKey":"data:wydmd71:cctv","dataCount":2,"dataSize":264,"errorMessage":null,"success":true},{"geohashId":"wydmd5x","cacheKey":"data:wydmd5x:cctv","dataCount":2,"dataSize":260,"errorMessage":null,"success":true},{"geohashId":"wydmd79","cacheKey":"data:wydmd79:cctv","dataCount":1,"dataSize":134,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:56:52.685 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.685880100Z","nanoTime":28198699651400,"traceId":"9080ffb9","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:56:52.685 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:56:52.685 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.54777829093723, 127.01337572038754)
2025-11-21 19:56:52.685 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:56:52.774 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:56:52.774 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:56:52.774 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:56:52.774 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.54777829093723, 127.01337572038754), 반경: 500m
2025-11-21 19:56:52.852 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:56:52.852 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 109건
2025-11-21 19:56:52.854 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:56:52.854 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:56:52.854 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 19:56:52.855 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 성동구
2025-11-21 19:56:52.855 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:56:52.855 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:56:52.855 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:56:52.855 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 19:56:52.855 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.855957200Z","nanoTime":28198869890100,"traceId":"9080ffb9","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":170238700,"duration_ms":170,"resultData":{"latitude":37.54777829093723,"longitude":127.01337572038754,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":170083300,"addressApiResult":{"cached":false,"cacheKey":"address:37.54777829093723:127.01337572038754","roadAddress":"서울특별시 성동구 매봉길 50","jibunAddress":"서울 성동구 옥수동 528","responseSize":68,"executionTimeNs":89641100,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":578900,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.54777829093723:127.01337572038754:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":3,"CS2":9,"SC4":3,"MT1":3,"BK9":11,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":8,"OL7":0,"PM9":8},"totalPlaces":109,"responseSize":12755,"executionTimeNs":79863300,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:52.856 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.856289800Z","nanoTime":28198870053900,"traceId":"9080ffb9","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:56:52.856 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:56:52.856 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:56:52.856 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 8개
2025-11-21 19:56:52.856 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 8개 (총 카메라 대수: 29대)
2025-11-21 19:56:52.856 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:56:52.927 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 성동구  사근동길 5 (거리: 446m)
2025-11-21 19:56:52.927 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:56:52.927 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:56:52.927 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 19:56:52.927 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:56:52.927 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.927328800Z","nanoTime":28198941933300,"traceId":"9080ffb9","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":71879400,"duration_ms":71,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":8,"totalCctvAfterFilter":8,"totalCameraCount":29,"filterRate":1.0,"filterExecutionTimeNs":9000,"success":true},"policeQuery":{"queryDurationNs":71280400,"found":true,"nearestAddress":"서울특별시 성동구  사근동길 5","nearestDistance":446.0855198585483,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"AT4":3,"CS2":9,"SC4":3,"MT1":3,"BK9":11,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":8,"PM9":8},"placesAfterFilter":{"AT4":3,"CS2":9,"SC4":3,"MT1":3,"BK9":11,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":8,"PM9":8},"totalBeforeFilter":109,"totalAfterFilter":109,"filterRate":1.0,"filterExecutionTimeNs":152600,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:52.927 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.927328800Z","nanoTime":28198942090400,"traceId":"9080ffb9","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:56:52.927 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:56:52.927 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 46.29, 편의성: 35.40, 종합: 40.85
2025-11-21 19:56:52.927 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.927328800Z","nanoTime":28198942317700,"traceId":"9080ffb9","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":227300,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":44.23931001768146,"policeDistance":446.0855198585483,"cctvScore":26.666666666666668,"cctvCount":8,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":46.293382551971106,"success":true},"convenienceScore":{"categoryScores":{"AT4":9.0,"CS2":3.1998976032766953,"SC4":6.0,"MT1":30.0,"BK9":55.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":24.0,"PM9":64.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":35.39999212332897,"success":true},"overallScore":40.84668733765004,"errorMessage":null,"success":true}}
2025-11-21 19:56:52.927 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.927328800Z","nanoTime":28198942481400,"traceId":"9080ffb9","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:56:52.927 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:56:52.927 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 성동구  사근동길 5, latitude=37.543841, longitude=127.014346, geohashId=wydmd69)
2025-11-21 19:56:52.927 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 446.0855198585483
2025-11-21 19:56:52.929 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmd72
2025-11-21 19:56:52.929 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:56:52.929 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:52.929339600Z","nanoTime":28198943628700,"traceId":"9080ffb9","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1147300,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["학원이(가) 105m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmd72","dataSize":14924,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":14924,"errorMessage":null,"success":true}}
2025-11-21 19:56:52.929 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:56:53.049 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:56:53.049 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.54406527940816, longitude=127.01975706382079, radius=500)
2025-11-21 19:56:53.049 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:56:53.049 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.54406527940816, longitude=127.01975706382079, radius=500
2025-11-21 19:56:53.049 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.049221400Z","nanoTime":28199063873300,"traceId":"34b13bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:56:53.049 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:56:53.049 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.54406527940816, lon=127.01975706382079
2025-11-21 19:56:53.050 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.049221400Z","nanoTime":28199063962100,"traceId":"34b13bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:56:53.050 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.050218700Z","nanoTime":28199064021500,"traceId":"34b13bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":59400,"duration_ms":0,"resultData":{"latitude":37.54406527940816,"longitude":127.01975706382079,"precision":7,"centerHash":"wydmd6s","adjacentHashes":["wydmd6s","wydmd6u","wydmd6v","wydmd6t","wydmd6m","wydmd6k","wydmd67","wydmd6e","wydmd6g"],"errorMessage":null,"success":true}}
2025-11-21 19:56:53.050 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmd6s, wydmd6u, wydmd6v, wydmd6t, wydmd6m, wydmd6k, wydmd67, wydmd6e, wydmd6g]
2025-11-21 19:56:53.050 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmd6s
2025-11-21 19:56:53.050 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.050218700Z","nanoTime":28199064152600,"traceId":"34b13bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":279300,"duration_ms":0,"resultData":{"requestLatitude":37.54406527940816,"requestLongitude":127.01975706382079,"requestRadius":500,"centerGeohashId":"wydmd6s","nineBlockGeohashes":["wydmd6s","wydmd6u","wydmd6v","wydmd6t","wydmd6m","wydmd6k","wydmd67","wydmd6e","wydmd6g"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:56:53.050 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.050218700Z","nanoTime":28199064201400,"traceId":"34b13bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:56:53.050 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:56:53.050 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmd6s
2025-11-21 19:56:53.050 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.554ms)
2025-11-21 19:56:53.050 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:56:53.050 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:56:53.050 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:56:53.050 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.185ms, 역직렬화: 0.0ms
2025-11-21 19:56:53.050 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:56:53.052 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.052478300Z","nanoTime":28199066229800,"traceId":"34b13bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2028400,"duration_ms":2,"resultData":{"centerGeohashId":"wydmd6s","nineBlockGeohashes":["wydmd6s","wydmd6u","wydmd6v","wydmd6t","wydmd6m","wydmd6k","wydmd67","wydmd6e","wydmd6g"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmd6s","hit":false,"valueSize":0,"l1CacheGetDurationNs":554000,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmd6s","cacheKey":"data:wydmd6s:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":231300},{"geohashId":"wydmd6u","cacheKey":"data:wydmd6u:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":101400},{"geohashId":"wydmd6v","cacheKey":"data:wydmd6v:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":81500},{"geohashId":"wydmd6t","cacheKey":"data:wydmd6t:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":80200},{"geohashId":"wydmd6m","cacheKey":"data:wydmd6m:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":132100},{"geohashId":"wydmd6k","cacheKey":"data:wydmd6k:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":186000},{"geohashId":"wydmd67","cacheKey":"data:wydmd67:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":129000},{"geohashId":"wydmd6e","cacheKey":"data:wydmd6e:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":87500},{"geohashId":"wydmd6g","cacheKey":"data:wydmd6g:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":86900}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1185000,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:56:53.052 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.052478300Z","nanoTime":28199066460700,"traceId":"34b13bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:56:53.052 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:56:53.052 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:56:53.055 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 10건
2025-11-21 19:56:53.056 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:56:53.056 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 5개
2025-11-21 19:56:53.057 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.056189900Z","nanoTime":28199070842400,"traceId":"34b13bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4381700,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmd6s","wydmd6u","wydmd6v","wydmd6t","wydmd6m","wydmd6k","wydmd67","wydmd6e","wydmd6g"],"cctvQueryResult":{"queryGeohashIds":["wydmd6s","wydmd6u","wydmd6v","wydmd6t","wydmd6m","wydmd6k","wydmd67","wydmd6e","wydmd6g"],"totalRowsReturned":10,"rowsPerGrid":{"wydmd6t":2,"wydmd6m":1,"wydmd6e":2,"wydmd6v":1,"wydmd6g":4},"queryExecutionTimeNs":3174700,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmd6t","cacheKey":"data:wydmd6t:cctv","dataCount":2,"dataSize":263,"errorMessage":null,"success":true},{"geohashId":"wydmd6m","cacheKey":"data:wydmd6m:cctv","dataCount":1,"dataSize":130,"errorMessage":null,"success":true},{"geohashId":"wydmd6e","cacheKey":"data:wydmd6e:cctv","dataCount":2,"dataSize":258,"errorMessage":null,"success":true},{"geohashId":"wydmd6v","cacheKey":"data:wydmd6v:cctv","dataCount":1,"dataSize":135,"errorMessage":null,"success":true},{"geohashId":"wydmd6g","cacheKey":"data:wydmd6g:cctv","dataCount":4,"dataSize":532,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:56:53.057 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.057189700Z","nanoTime":28199070984400,"traceId":"34b13bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:56:53.057 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:56:53.057 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.54406527940816, 127.01975706382079)
2025-11-21 19:56:53.057 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:56:53.127 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:56:53.127 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:56:53.127 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:56:53.127 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.54406527940816, 127.01975706382079), 반경: 500m
2025-11-21 19:56:53.217 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:56:53.217 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 117건
2025-11-21 19:56:53.217 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:56:53.217 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:56:53.217 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 19:56:53.217 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 성동구
2025-11-21 19:56:53.217 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:56:53.217 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:56:53.217 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:56:53.217 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 19:56:53.217 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.217079700Z","nanoTime":28199233302000,"traceId":"34b13bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":162317600,"duration_ms":162,"resultData":{"latitude":37.54406527940816,"longitude":127.01975706382079,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":162191200,"addressApiResult":{"cached":false,"cacheKey":"address:37.54406527940816:127.01975706382079","roadAddress":"서울특별시 성동구 독서당로40길 25","jibunAddress":"서울 성동구 옥수동 4","responseSize":70,"executionTimeNs":71266500,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":700000,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.54406527940816:127.01975706382079:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":0,"CS2":11,"SC4":3,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":2,"FD6":15,"PK6":10,"OL7":0,"PM9":13},"totalPlaces":117,"responseSize":13600,"executionTimeNs":90224700,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:53.217 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.217079700Z","nanoTime":28199233560800,"traceId":"34b13bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:56:53.217 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:56:53.217 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:56:53.219 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 10개
2025-11-21 19:56:53.219 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 10개 (총 카메라 대수: 22대)
2025-11-21 19:56:53.219 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:56:53.294 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 성동구  사근동길 5 (거리: 478m)
2025-11-21 19:56:53.294 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:56:53.294 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:56:53.294 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 12개 카테고리
2025-11-21 19:56:53.294 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:56:53.294 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.294978500Z","nanoTime":28199309518900,"traceId":"34b13bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":75958100,"duration_ms":75,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":10,"totalCctvAfterFilter":10,"totalCameraCount":22,"filterRate":1.0,"filterExecutionTimeNs":12200,"success":true},"policeQuery":{"queryDurationNs":75335800,"found":true,"nearestAddress":"서울특별시 성동구  사근동길 5","nearestDistance":477.7173640457515,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"BK9":15,"HP8":15,"CS2":11,"AC5":15,"CE7":15,"SC4":3,"SW8":2,"PO3":2,"FD6":15,"PK6":10,"MT1":1,"PM9":13},"placesAfterFilter":{"BK9":15,"HP8":15,"CS2":11,"AC5":15,"CE7":15,"SC4":3,"SW8":2,"PO3":2,"FD6":15,"PK6":10,"MT1":1,"PM9":13},"totalBeforeFilter":117,"totalAfterFilter":117,"filterRate":1.0,"filterExecutionTimeNs":171400,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:53.295 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.295979200Z","nanoTime":28199309748800,"traceId":"34b13bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:56:53.295 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:56:53.295 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 47.77, 편의성: 40.91, 종합: 44.34
2025-11-21 19:56:53.295 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.295979200Z","nanoTime":28199310086100,"traceId":"34b13bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":337300,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":40.285329494281065,"policeDistance":477.7173640457515,"cctvScore":33.33333333333333,"cctvCount":10,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":47.77385506161765,"success":true},"convenienceScore":{"categoryScores":{"BK9":75.0,"HP8":100.0,"CS2":3.910985959560405,"AC5":15.0,"CE7":30.0,"SC4":6.0,"SW8":100.0,"PO3":6.0,"FD6":15.0,"PK6":30.0,"MT1":10.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":40.90924882996337,"success":true},"overallScore":44.34155194579051,"errorMessage":null,"success":true}}
2025-11-21 19:56:53.296 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.296509100Z","nanoTime":28199310268500,"traceId":"34b13bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:56:53.296 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:56:53.296 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 성동구  사근동길 5, latitude=37.543841, longitude=127.014346, geohashId=wydmd69)
2025-11-21 19:56:53.296 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 477.7173640457515
2025-11-21 19:56:53.296 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmd6s
2025-11-21 19:56:53.296 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:56:53.296 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.296509100Z","nanoTime":28199311854100,"traceId":"34b13bef","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1585600,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["주차장이(가) 128m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmd6s","dataSize":15832,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":15832,"errorMessage":null,"success":true}}
2025-11-21 19:56:53.296 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:56:53.416 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:56:53.416 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5461726269945, longitude=127.02498558119576, radius=500)
2025-11-21 19:56:53.416 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:56:53.416 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5461726269945, longitude=127.02498558119576, radius=500
2025-11-21 19:56:53.416 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.416892700Z","nanoTime":28199430917500,"traceId":"3daf7663","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:56:53.416 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:56:53.416 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5461726269945, lon=127.02498558119576
2025-11-21 19:56:53.416 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.416892700Z","nanoTime":28199430998700,"traceId":"3daf7663","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:56:53.416 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.416892700Z","nanoTime":28199431039500,"traceId":"3daf7663","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":40800,"duration_ms":0,"resultData":{"latitude":37.5461726269945,"longitude":127.02498558119576,"precision":7,"centerHash":"wydmde0","adjacentHashes":["wydmde0","wydmde2","wydmde3","wydmde1","wydmddc","wydmddb","wydmd6z","wydmd7p","wydmd7r"],"errorMessage":null,"success":true}}
2025-11-21 19:56:53.416 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmde0, wydmde2, wydmde3, wydmde1, wydmddc, wydmddb, wydmd6z, wydmd7p, wydmd7r]
2025-11-21 19:56:53.416 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmde0
2025-11-21 19:56:53.416 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.416892700Z","nanoTime":28199431162300,"traceId":"3daf7663","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":244800,"duration_ms":0,"resultData":{"requestLatitude":37.5461726269945,"requestLongitude":127.02498558119576,"requestRadius":500,"centerGeohashId":"wydmde0","nineBlockGeohashes":["wydmde0","wydmde2","wydmde3","wydmde1","wydmddc","wydmddb","wydmd6z","wydmd7p","wydmd7r"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:56:53.416 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.416892700Z","nanoTime":28199431215100,"traceId":"3daf7663","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:56:53.416 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:56:53.416 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmde0
2025-11-21 19:56:53.416 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3278ms)
2025-11-21 19:56:53.417 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:56:53.419 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:56:53.419 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:56:53.419 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.5405ms, 역직렬화: 0.0ms
2025-11-21 19:56:53.419 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:56:53.419 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.419182800Z","nanoTime":28199433409200,"traceId":"3daf7663","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2194100,"duration_ms":2,"resultData":{"centerGeohashId":"wydmde0","nineBlockGeohashes":["wydmde0","wydmde2","wydmde3","wydmde1","wydmddc","wydmddb","wydmd6z","wydmd7p","wydmd7r"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmde0","hit":false,"valueSize":0,"l1CacheGetDurationNs":327800,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmde0","cacheKey":"data:wydmde0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":321000},{"geohashId":"wydmde2","cacheKey":"data:wydmde2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":264300},{"geohashId":"wydmde3","cacheKey":"data:wydmde3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":136000},{"geohashId":"wydmde1","cacheKey":"data:wydmde1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":129000},{"geohashId":"wydmddc","cacheKey":"data:wydmddc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":88500},{"geohashId":"wydmddb","cacheKey":"data:wydmddb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":123600},{"geohashId":"wydmd6z","cacheKey":"data:wydmd6z:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":158500},{"geohashId":"wydmd7p","cacheKey":"data:wydmd7p:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":111600},{"geohashId":"wydmd7r","cacheKey":"data:wydmd7r:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":100700}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1540500,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:56:53.419 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.419182800Z","nanoTime":28199433578000,"traceId":"3daf7663","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:56:53.419 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:56:53.419 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:56:53.423 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 15건
2025-11-21 19:56:53.425 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:56:53.425 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:56:53.425 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.425190100Z","nanoTime":28199439228300,"traceId":"3daf7663","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5650300,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydmde0","wydmde2","wydmde3","wydmde1","wydmddc","wydmddb","wydmd6z","wydmd7p","wydmd7r"],"cctvQueryResult":{"queryGeohashIds":["wydmde0","wydmde2","wydmde3","wydmde1","wydmddc","wydmddb","wydmd6z","wydmd7p","wydmd7r"],"totalRowsReturned":15,"rowsPerGrid":{"wydmd7r":2,"wydmde0":2,"wydmde1":1,"wydmde2":2,"wydmddb":1,"wydmde3":4,"wydmd7p":2,"wydmddc":1},"queryExecutionTimeNs":3910200,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmd7r","cacheKey":"data:wydmd7r:cctv","dataCount":2,"dataSize":265,"errorMessage":null,"success":true},{"geohashId":"wydmde0","cacheKey":"data:wydmde0:cctv","dataCount":2,"dataSize":262,"errorMessage":null,"success":true},{"geohashId":"wydmde1","cacheKey":"data:wydmde1:cctv","dataCount":1,"dataSize":128,"errorMessage":null,"success":true},{"geohashId":"wydmde2","cacheKey":"data:wydmde2:cctv","dataCount":2,"dataSize":269,"errorMessage":null,"success":true},{"geohashId":"wydmddb","cacheKey":"data:wydmddb:cctv","dataCount":1,"dataSize":133,"errorMessage":null,"success":true},{"geohashId":"wydmde3","cacheKey":"data:wydmde3:cctv","dataCount":4,"dataSize":527,"errorMessage":null,"success":true},{"geohashId":"wydmd7p","cacheKey":"data:wydmd7p:cctv","dataCount":2,"dataSize":265,"errorMessage":null,"success":true},{"geohashId":"wydmddc","cacheKey":"data:wydmddc:cctv","dataCount":1,"dataSize":134,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:56:53.425 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.425588300Z","nanoTime":28199439392800,"traceId":"3daf7663","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:56:53.425 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:56:53.425 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5461726269945, 127.02498558119576)
2025-11-21 19:56:53.425 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:56:53.494 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:56:53.494 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:56:53.494 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:56:53.494 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5461726269945, 127.02498558119576), 반경: 500m
2025-11-21 19:56:53.571 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:56:53.571 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 103건
2025-11-21 19:56:53.573 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:56:53.573 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:56:53.573 [http-nio-8185-exec-9] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:56:53.573 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:56:53.573 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:56:53.573 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:56:53.573 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:56:53.573 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.573368700Z","nanoTime":28199587591400,"traceId":"3daf7663","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":148198600,"duration_ms":148,"resultData":{"latitude":37.5461726269945,"longitude":127.02498558119576,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":148061000,"addressApiResult":{"cached":false,"cacheKey":"address:37.5461726269945:127.02498558119576","roadAddress":"주소 없음","jibunAddress":"서울 성동구 금호동4가 189","responseSize":59,"executionTimeNs":69842900,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":68300,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5461726269945:127.02498558119576:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":1,"CS2":8,"SC4":1,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":0,"PO3":1,"FD6":15,"PK6":7,"OL7":1,"PM9":9},"totalPlaces":103,"responseSize":11921,"executionTimeNs":78149800,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:53.573 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.573859800Z","nanoTime":28199587834300,"traceId":"3daf7663","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:56:53.573 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:56:53.573 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:56:53.573 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 15개
2025-11-21 19:56:53.573 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 15개 (총 카메라 대수: 42대)
2025-11-21 19:56:53.573 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:56:53.656 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 성동구  성덕정길 77-2 (거리: 600m)
2025-11-21 19:56:53.656 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:56:53.656 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:56:53.656 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 12개 카테고리
2025-11-21 19:56:53.656 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:56:53.656 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.656274100Z","nanoTime":28199670547400,"traceId":"3daf7663","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":82713100,"duration_ms":82,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":15,"totalCctvAfterFilter":15,"totalCameraCount":42,"filterRate":1.0,"filterExecutionTimeNs":20600,"success":true},"policeQuery":{"queryDurationNs":82142400,"found":true,"nearestAddress":"서울특별시 성동구  성덕정길 77-2","nearestDistance":599.721378117857,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"AT4":1,"BK9":15,"HP8":15,"CS2":8,"AC5":15,"CE7":15,"SC4":1,"PO3":1,"FD6":15,"PK6":7,"OL7":1,"PM9":9},"placesAfterFilter":{"AT4":1,"BK9":15,"HP8":15,"CS2":8,"AC5":15,"CE7":15,"SC4":1,"PO3":1,"FD6":15,"PK6":7,"OL7":1,"PM9":9},"totalBeforeFilter":103,"totalAfterFilter":103,"filterRate":1.0,"filterExecutionTimeNs":97600,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:53.656 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.656274100Z","nanoTime":28199670709500,"traceId":"3daf7663","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:56:53.656 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:56:53.656 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 27.51, 편의성: 28.58, 종합: 28.05
2025-11-21 19:56:53.656 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.656274100Z","nanoTime":28199670914200,"traceId":"3daf7663","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":204700,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":25.034827735267882,"policeDistance":599.721378117857,"cctvScore":50.0,"cctvCount":15,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":27.510448320580366,"success":true},"convenienceScore":{"categoryScores":{"AT4":3.0,"BK9":75.0,"HP8":100.0,"CS2":2.0,"AC5":15.0,"CE7":30.0,"SC4":2.0,"PO3":3.0,"FD6":15.0,"PK6":21.0,"OL7":5.0,"PM9":72.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":28.583333333333332,"success":true},"overallScore":28.046890826956847,"errorMessage":null,"success":true}}
2025-11-21 19:56:53.656 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.656274100Z","nanoTime":28199671011700,"traceId":"3daf7663","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:56:53.656 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:56:53.656 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 성동구  성덕정길 77-2, latitude=37.549799, longitude=127.030021, geohashId=wydmdes)
2025-11-21 19:56:53.656 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 599.721378117857
2025-11-21 19:56:53.656 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmde0
2025-11-21 19:56:53.656 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:56:53.658 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.656274100Z","nanoTime":28199672039000,"traceId":"3daf7663","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1027300,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["학원이(가) 19m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmde0","dataSize":14719,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":14719,"errorMessage":null,"success":true}}
2025-11-21 19:56:53.658 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:56:53.864 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:56:53.864 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.54880441842617, longitude=127.02043729449178, radius=500)
2025-11-21 19:56:53.864 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:56:53.864 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.54880441842617, longitude=127.02043729449178, radius=500
2025-11-21 19:56:53.864 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.864671200Z","nanoTime":28199879244100,"traceId":"13d2c75d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:56:53.864 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:56:53.864 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.54880441842617, lon=127.02043729449178
2025-11-21 19:56:53.864 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.864671200Z","nanoTime":28199879413500,"traceId":"13d2c75d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:56:53.864 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.864671200Z","nanoTime":28199879476300,"traceId":"13d2c75d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":62800,"duration_ms":0,"resultData":{"latitude":37.54880441842617,"longitude":127.02043729449178,"precision":7,"centerHash":"wydmd7t","adjacentHashes":["wydmd7t","wydmd7v","wydmd7y","wydmd7w","wydmd7q","wydmd7m","wydmd7k","wydmd7s","wydmd7u"],"errorMessage":null,"success":true}}
2025-11-21 19:56:53.864 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmd7t, wydmd7v, wydmd7y, wydmd7w, wydmd7q, wydmd7m, wydmd7k, wydmd7s, wydmd7u]
2025-11-21 19:56:53.865 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmd7t
2025-11-21 19:56:53.865 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.865848800Z","nanoTime":28199879646600,"traceId":"13d2c75d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":402500,"duration_ms":0,"resultData":{"requestLatitude":37.54880441842617,"requestLongitude":127.02043729449178,"requestRadius":500,"centerGeohashId":"wydmd7t","nineBlockGeohashes":["wydmd7t","wydmd7v","wydmd7y","wydmd7w","wydmd7q","wydmd7m","wydmd7k","wydmd7s","wydmd7u"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:56:53.865 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.865848800Z","nanoTime":28199879790300,"traceId":"13d2c75d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:56:53.865 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:56:53.865 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmd7t
2025-11-21 19:56:53.865 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4666ms)
2025-11-21 19:56:53.865 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:56:53.869 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:56:53.869 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 2개, 미스: 7개
2025-11-21 19:56:53.869 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.6235ms, 역직렬화: 0.1759ms
2025-11-21 19:56:53.869 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:56:53.869 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.869299700Z","nanoTime":28199883216400,"traceId":"13d2c75d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3426100,"duration_ms":3,"resultData":{"centerGeohashId":"wydmd7t","nineBlockGeohashes":["wydmd7t","wydmd7v","wydmd7y","wydmd7w","wydmd7q","wydmd7m","wydmd7k","wydmd7s","wydmd7u"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmd7t","hit":false,"valueSize":0,"l1CacheGetDurationNs":466600,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmd7t","cacheKey":"data:wydmd7t:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":282400},{"geohashId":"wydmd7v","cacheKey":"data:wydmd7v:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":534,"l2CacheGetDurationNs":753000},{"geohashId":"wydmd7y","cacheKey":"data:wydmd7y:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":132,"l2CacheGetDurationNs":344100},{"geohashId":"wydmd7w","cacheKey":"data:wydmd7w:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":159300},{"geohashId":"wydmd7q","cacheKey":"data:wydmd7q:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":127300},{"geohashId":"wydmd7m","cacheKey":"data:wydmd7m:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":205500},{"geohashId":"wydmd7k","cacheKey":"data:wydmd7k:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":168100},{"geohashId":"wydmd7s","cacheKey":"data:wydmd7s:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":174500},{"geohashId":"wydmd7u","cacheKey":"data:wydmd7u:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":131300}],"l2TotalHits":2,"l2TotalMisses":7,"l2CacheTotalDurationNs":2623500,"l2JsonDeserializeTotalDurationNs":175900,"errorMessage":null,"success":true}}
2025-11-21 19:56:53.869 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.869299700Z","nanoTime":28199883374700,"traceId":"13d2c75d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:56:53.869 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:56:53.869 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 7개
2025-11-21 19:56:53.873 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 41건
2025-11-21 19:56:53.876 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:56:53.876 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:56:53.876 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.876780Z","nanoTime":28199890638200,"traceId":"13d2c75d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":7263500,"duration_ms":7,"resultData":{"inputCctvMissGrids":["wydmd7t","wydmd7w","wydmd7q","wydmd7m","wydmd7k","wydmd7s","wydmd7u"],"cctvQueryResult":{"queryGeohashIds":["wydmd7t","wydmd7w","wydmd7q","wydmd7m","wydmd7k","wydmd7s","wydmd7u"],"totalRowsReturned":41,"rowsPerGrid":{"wydmd7s":6,"wydmd7t":7,"wydmd7u":2,"wydmd7q":6,"wydmd7k":10,"wydmd7m":6,"wydmd7w":4},"queryExecutionTimeNs":4116200,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmd7s","cacheKey":"data:wydmd7s:cctv","dataCount":6,"dataSize":799,"errorMessage":null,"success":true},{"geohashId":"wydmd7t","cacheKey":"data:wydmd7t:cctv","dataCount":7,"dataSize":925,"errorMessage":null,"success":true},{"geohashId":"wydmd7u","cacheKey":"data:wydmd7u:cctv","dataCount":2,"dataSize":272,"errorMessage":null,"success":true},{"geohashId":"wydmd7q","cacheKey":"data:wydmd7q:cctv","dataCount":6,"dataSize":735,"errorMessage":null,"success":true},{"geohashId":"wydmd7k","cacheKey":"data:wydmd7k:cctv","dataCount":10,"dataSize":1325,"errorMessage":null,"success":true},{"geohashId":"wydmd7m","cacheKey":"data:wydmd7m:cctv","dataCount":6,"dataSize":797,"errorMessage":null,"success":true},{"geohashId":"wydmd7w","cacheKey":"data:wydmd7w:cctv","dataCount":4,"dataSize":528,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:56:53.876 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:53.876780Z","nanoTime":28199890836900,"traceId":"13d2c75d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:56:53.876 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:56:53.876 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.54880441842617, 127.02043729449178)
2025-11-21 19:56:53.876 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:56:53.951 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:56:53.951 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:56:53.951 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:56:53.953 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.54880441842617, 127.02043729449178), 반경: 500m
2025-11-21 19:56:54.044 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:56:54.044 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 118건
2025-11-21 19:56:54.044 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:56:54.046 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:56:54.046 [http-nio-8185-exec-10] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:56:54.046 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:56:54.046 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:56:54.046 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:56:54.046 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:56:54.046 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.046157200Z","nanoTime":28200060194600,"traceId":"13d2c75d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":169357700,"duration_ms":169,"resultData":{"latitude":37.54880441842617,"longitude":127.02043729449178,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":169194500,"addressApiResult":{"cached":false,"cacheKey":"address:37.54880441842617:127.02043729449178","roadAddress":"주소 없음","jibunAddress":"서울 성동구 금호동3가 1266-1","responseSize":62,"executionTimeNs":75286900,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":109800,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.54880441842617:127.02043729449178:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":1,"CS2":11,"SC4":3,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":1,"FD6":15,"PK6":9,"OL7":1,"PM9":14},"totalPlaces":118,"responseSize":13613,"executionTimeNs":93797800,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:54.046 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.046781100Z","nanoTime":28200060537400,"traceId":"13d2c75d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:56:54.046 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:56:54.046 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:56:54.046 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 46개
2025-11-21 19:56:54.046 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 46개 (총 카메라 대수: 135대)
2025-11-21 19:56:54.046 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:56:54.137 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 성동구  광나루로2길 35 성수지구대 (거리: 664m)
2025-11-21 19:56:54.137 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:56:54.137 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:56:54.137 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:56:54.137 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:56:54.137 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.137231900Z","nanoTime":28200151905300,"traceId":"13d2c75d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":91367900,"duration_ms":91,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":46,"totalCctvAfterFilter":46,"totalCameraCount":135,"filterRate":1.0,"filterExecutionTimeNs":40700,"success":true},"policeQuery":{"queryDurationNs":90004800,"found":true,"nearestAddress":"서울특별시 성동구  광나루로2길 35 성수지구대","nearestDistance":664.158153132626,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"AT4":1,"CS2":11,"SC4":3,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":1,"FD6":15,"PK6":9,"OL7":1,"PM9":14},"placesAfterFilter":{"CT1":1,"AT4":1,"CS2":11,"SC4":3,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":1,"FD6":15,"PK6":9,"OL7":1,"PM9":14},"totalBeforeFilter":118,"totalAfterFilter":118,"filterRate":1.0,"filterExecutionTimeNs":214300,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:54.137 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.137231900Z","nanoTime":28200152132300,"traceId":"13d2c75d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:56:54.137 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:56:54.137 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 45.09, 편의성: 33.05, 종합: 39.07
2025-11-21 19:56:54.137 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.137231900Z","nanoTime":28200152367300,"traceId":"13d2c75d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":235000,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":16.98023085842175,"policeDistance":664.158153132626,"cctvScore":100.0,"cctvCount":46,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":45.09406925752653,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"AT4":3.0,"CS2":2.75,"SC4":6.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":3.0,"FD6":15.0,"PK6":27.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":33.05,"success":true},"overallScore":39.07203462876326,"errorMessage":null,"success":true}}
2025-11-21 19:56:54.137 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.137231900Z","nanoTime":28200152493800,"traceId":"13d2c75d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:56:54.137 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:56:54.137 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 성동구  광나루로2길 35 성수지구대, latitude=37.554742, longitude=127.019619, geohashId=wydmdks)
2025-11-21 19:56:54.137 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 664.158153132626
2025-11-21 19:56:54.140 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmd7t
2025-11-21 19:56:54.140 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:56:54.140 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.140125100Z","nanoTime":28200154254400,"traceId":"13d2c75d","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1760600,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["학원이(가) 13m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmd7t","dataSize":19931,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19931,"errorMessage":null,"success":true}}
2025-11-21 19:56:54.140 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:56:54.436 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:56:54.436 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55109392398622, longitude=127.01373844657157, radius=500)
2025-11-21 19:56:54.436 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:56:54.436 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55109392398622, longitude=127.01373844657157, radius=500
2025-11-21 19:56:54.436 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.436982Z","nanoTime":28200451365800,"traceId":"dfed5191","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:56:54.436 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:56:54.436 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55109392398622, lon=127.01373844657157
2025-11-21 19:56:54.436 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.436982Z","nanoTime":28200451451700,"traceId":"dfed5191","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:56:54.436 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.436982Z","nanoTime":28200451499200,"traceId":"dfed5191","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":47500,"duration_ms":0,"resultData":{"latitude":37.55109392398622,"longitude":127.01373844657157,"precision":7,"centerHash":"wydmd7b","adjacentHashes":["wydmd7b","wydmdk0","wydmdk1","wydmd7c","wydmd79","wydmd78","wydmd5x","wydmd5z","wydmdhp"],"errorMessage":null,"success":true}}
2025-11-21 19:56:54.436 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmd7b, wydmdk0, wydmdk1, wydmd7c, wydmd79, wydmd78, wydmd5x, wydmd5z, wydmdhp]
2025-11-21 19:56:54.436 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmd7b
2025-11-21 19:56:54.436 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.436982Z","nanoTime":28200451643000,"traceId":"dfed5191","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":277200,"duration_ms":0,"resultData":{"requestLatitude":37.55109392398622,"requestLongitude":127.01373844657157,"requestRadius":500,"centerGeohashId":"wydmd7b","nineBlockGeohashes":["wydmd7b","wydmdk0","wydmdk1","wydmd7c","wydmd79","wydmd78","wydmd5x","wydmd5z","wydmdhp"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:56:54.436 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.436982Z","nanoTime":28200451698600,"traceId":"dfed5191","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:56:54.436 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:56:54.436 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmd7b
2025-11-21 19:56:54.438 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3875ms)
2025-11-21 19:56:54.438 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:56:54.441 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:56:54.441 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 4개, 미스: 5개
2025-11-21 19:56:54.441 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 3.5201ms, 역직렬화: 0.4782ms
2025-11-21 19:56:54.441 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:56:54.441 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.441572500Z","nanoTime":28200456124900,"traceId":"dfed5191","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":4426300,"duration_ms":4,"resultData":{"centerGeohashId":"wydmd7b","nineBlockGeohashes":["wydmd7b","wydmdk0","wydmdk1","wydmd7c","wydmd79","wydmd78","wydmd5x","wydmd5z","wydmdhp"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmd7b","hit":false,"valueSize":0,"l1CacheGetDurationNs":387500,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmd7b","cacheKey":"data:wydmd7b:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":202500},{"geohashId":"wydmdk0","cacheKey":"data:wydmdk0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":156300},{"geohashId":"wydmdk1","cacheKey":"data:wydmdk1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":144700},{"geohashId":"wydmd7c","cacheKey":"data:wydmd7c:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":173900},{"geohashId":"wydmd79","cacheKey":"data:wydmd79:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":134,"l2CacheGetDurationNs":506300},{"geohashId":"wydmd78","cacheKey":"data:wydmd78:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":216700},{"geohashId":"wydmd5x","cacheKey":"data:wydmd5x:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":260,"l2CacheGetDurationNs":710100},{"geohashId":"wydmd5z","cacheKey":"data:wydmd5z:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":133,"l2CacheGetDurationNs":440000},{"geohashId":"wydmdhp","cacheKey":"data:wydmdhp:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":132,"l2CacheGetDurationNs":349300}],"l2TotalHits":4,"l2TotalMisses":5,"l2CacheTotalDurationNs":3520100,"l2JsonDeserializeTotalDurationNs":478200,"errorMessage":null,"success":true}}
2025-11-21 19:56:54.441 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.441572500Z","nanoTime":28200456425700,"traceId":"dfed5191","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:56:54.441 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:56:54.441 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 5개
2025-11-21 19:56:54.446 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 8건
2025-11-21 19:56:54.448 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:56:54.448 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:56:54.448 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.448800100Z","nanoTime":28200463260800,"traceId":"dfed5191","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6835100,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydmd7b","wydmdk0","wydmdk1","wydmd7c","wydmd78"],"cctvQueryResult":{"queryGeohashIds":["wydmd7b","wydmdk0","wydmdk1","wydmd7c","wydmd78"],"totalRowsReturned":8,"rowsPerGrid":{"wydmd7b":2,"wydmd7c":1,"wydmdk0":4,"wydmdk1":1},"queryExecutionTimeNs":4991900,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmd7b","cacheKey":"data:wydmd7b:cctv","dataCount":2,"dataSize":257,"errorMessage":null,"success":true},{"geohashId":"wydmd7c","cacheKey":"data:wydmd7c:cctv","dataCount":1,"dataSize":134,"errorMessage":null,"success":true},{"geohashId":"wydmdk0","cacheKey":"data:wydmdk0:cctv","dataCount":4,"dataSize":520,"errorMessage":null,"success":true},{"geohashId":"wydmdk1","cacheKey":"data:wydmdk1:cctv","dataCount":1,"dataSize":132,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:56:54.448 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.448800100Z","nanoTime":28200463423900,"traceId":"dfed5191","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:56:54.448 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:56:54.448 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.55109392398622, 127.01373844657157)
2025-11-21 19:56:54.448 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:56:54.519 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:56:54.521 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:56:54.521 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:56:54.521 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.55109392398622, 127.01373844657157), 반경: 500m
2025-11-21 19:56:54.601 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:56:54.601 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 127건
2025-11-21 19:56:54.603 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:56:54.603 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:56:54.603 [http-nio-8185-exec-1] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:56:54.603 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:56:54.603 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:56:54.603 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:56:54.603 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:56:54.603 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.603961Z","nanoTime":28200617929000,"traceId":"dfed5191","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":154505100,"duration_ms":154,"resultData":{"latitude":37.55109392398622,"longitude":127.01373844657157,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":154370400,"addressApiResult":{"cached":false,"cacheKey":"address:37.55109392398622:127.01373844657157","roadAddress":"주소 없음","jibunAddress":"서울 중구 신당동 309-61","responseSize":59,"executionTimeNs":72050900,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":67800,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.55109392398622:127.01373844657157:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":3,"CS2":13,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":4,"FD6":15,"PK6":11,"OL7":0,"PM9":15},"totalPlaces":127,"responseSize":14725,"executionTimeNs":82251700,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:54.603 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.603961Z","nanoTime":28200618170300,"traceId":"dfed5191","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:56:54.603 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:56:54.603 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:56:54.603 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 13개
2025-11-21 19:56:54.603 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 13개 (총 카메라 대수: 31대)
2025-11-21 19:56:54.603 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:56:54.692 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: "서울특별시 중구  동호로 5길 15, 약수지구대" (거리: 167m)
2025-11-21 19:56:54.692 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:56:54.692 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:56:54.692 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:56:54.692 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:56:54.692 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.692840Z","nanoTime":28200707837600,"traceId":"dfed5191","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":89667300,"duration_ms":89,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":13,"totalCctvAfterFilter":13,"totalCameraCount":31,"filterRate":1.0,"filterExecutionTimeNs":12500,"success":true},"policeQuery":{"queryDurationNs":89107700,"found":true,"nearestAddress":"\"서울특별시 중구  동호로 5길 15, 약수지구대\"","nearestDistance":167.3200859172937,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"AT4":3,"CS2":13,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":4,"FD6":15,"PK6":11,"PM9":15},"placesAfterFilter":{"CT1":1,"AT4":3,"CS2":13,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":4,"FD6":15,"PK6":11,"PM9":15},"totalBeforeFilter":127,"totalAfterFilter":127,"filterRate":1.0,"filterExecutionTimeNs":139200,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:54.692 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.692840Z","nanoTime":28200708014900,"traceId":"dfed5191","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:56:54.692 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:56:54.692 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 41.06, 편의성: 36.30, 종합: 38.68
2025-11-21 19:56:54.692 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.692840Z","nanoTime":28200708383400,"traceId":"dfed5191","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":368500,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":79.08498926033829,"policeDistance":167.3200859172937,"cctvScore":43.333333333333336,"cctvCount":13,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":41.05883011143482,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"AT4":9.0,"CS2":3.25,"SC4":2.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":12.0,"FD6":15.0,"PK6":33.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":36.30357142857143,"success":true},"overallScore":38.68120077000313,"errorMessage":null,"success":true}}
2025-11-21 19:56:54.692 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.692840Z","nanoTime":28200708523600,"traceId":"dfed5191","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:56:54.692 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:56:54.692 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address="서울특별시 중구  동호로 5길 15, 약수지구대", latitude=37.552144, longitude=127.012379, geohashId=wydmdhp)
2025-11-21 19:56:54.692 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 167.3200859172937
2025-11-21 19:56:54.695 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmd7b
2025-11-21 19:56:54.695 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:56:54.695 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.695818800Z","nanoTime":28200710166000,"traceId":"dfed5191","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1642400,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["관광명소이(가) 93m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmd7b","dataSize":17324,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17324,"errorMessage":null,"success":true}}
2025-11-21 19:56:54.695 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:56:54.809 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:56:54.809 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55341908993531, longitude=127.00701655808545, radius=500)
2025-11-21 19:56:54.809 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:56:54.809 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55341908993531, longitude=127.00701655808545, radius=500
2025-11-21 19:56:54.809 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.809703200Z","nanoTime":28200824027900,"traceId":"8742ffa6","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:56:54.809 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:56:54.809 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55341908993531, lon=127.00701655808545
2025-11-21 19:56:54.809 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.809703200Z","nanoTime":28200824129600,"traceId":"8742ffa6","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:56:54.809 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.809703200Z","nanoTime":28200824182500,"traceId":"8742ffa6","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":52900,"duration_ms":0,"resultData":{"latitude":37.55341908993531,"longitude":127.00701655808545,"precision":7,"centerHash":"wydmdh7","adjacentHashes":["wydmdh7","wydmdhe","wydmdhs","wydmdhk","wydmdhh","wydmdh5","wydmdh4","wydmdh6","wydmdhd"],"errorMessage":null,"success":true}}
2025-11-21 19:56:54.809 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdh7, wydmdhe, wydmdhs, wydmdhk, wydmdhh, wydmdh5, wydmdh4, wydmdh6, wydmdhd]
2025-11-21 19:56:54.809 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdh7
2025-11-21 19:56:54.809 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.809703200Z","nanoTime":28200824341900,"traceId":"8742ffa6","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":314000,"duration_ms":0,"resultData":{"requestLatitude":37.55341908993531,"requestLongitude":127.00701655808545,"requestRadius":500,"centerGeohashId":"wydmdh7","nineBlockGeohashes":["wydmdh7","wydmdhe","wydmdhs","wydmdhk","wydmdhh","wydmdh5","wydmdh4","wydmdh6","wydmdhd"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:56:54.809 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.809703200Z","nanoTime":28200824397600,"traceId":"8742ffa6","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:56:54.809 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:56:54.809 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdh7
2025-11-21 19:56:54.810 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5124ms)
2025-11-21 19:56:54.810 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:56:54.813 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:56:54.813 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 3개, 미스: 6개
2025-11-21 19:56:54.813 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.5788ms, 역직렬화: 0.2333ms
2025-11-21 19:56:54.813 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:56:54.814 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.813700200Z","nanoTime":28200827810300,"traceId":"8742ffa6","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3412700,"duration_ms":3,"resultData":{"centerGeohashId":"wydmdh7","nineBlockGeohashes":["wydmdh7","wydmdhe","wydmdhs","wydmdhk","wydmdhh","wydmdh5","wydmdh4","wydmdh6","wydmdhd"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdh7","hit":false,"valueSize":0,"l1CacheGetDurationNs":512400,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdh7","cacheKey":"data:wydmdh7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":182800},{"geohashId":"wydmdhe","cacheKey":"data:wydmdhe:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":115100},{"geohashId":"wydmdhs","cacheKey":"data:wydmdhs:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":654,"l2CacheGetDurationNs":331800},{"geohashId":"wydmdhk","cacheKey":"data:wydmdhk:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":520,"l2CacheGetDurationNs":451900},{"geohashId":"wydmdhh","cacheKey":"data:wydmdhh:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":261,"l2CacheGetDurationNs":624900},{"geohashId":"wydmdh5","cacheKey":"data:wydmdh5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":169100},{"geohashId":"wydmdh4","cacheKey":"data:wydmdh4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":111400},{"geohashId":"wydmdh6","cacheKey":"data:wydmdh6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":103200},{"geohashId":"wydmdhd","cacheKey":"data:wydmdhd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":156300}],"l2TotalHits":3,"l2TotalMisses":6,"l2CacheTotalDurationNs":2578800,"l2JsonDeserializeTotalDurationNs":233300,"errorMessage":null,"success":true}}
2025-11-21 19:56:54.814 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.814169500Z","nanoTime":28200828064700,"traceId":"8742ffa6","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:56:54.814 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:56:54.814 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 6개
2025-11-21 19:56:54.818 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 27건
2025-11-21 19:56:54.819 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:56:54.819 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:56:54.820 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.819436300Z","nanoTime":28200834151800,"traceId":"8742ffa6","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6087100,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydmdh7","wydmdhe","wydmdh5","wydmdh4","wydmdh6","wydmdhd"],"cctvQueryResult":{"queryGeohashIds":["wydmdh7","wydmdhe","wydmdh5","wydmdh4","wydmdh6","wydmdhd"],"totalRowsReturned":27,"rowsPerGrid":{"wydmdh4":12,"wydmdhd":1,"wydmdh5":7,"wydmdhe":4,"wydmdh6":3},"queryExecutionTimeNs":4070300,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdh4","cacheKey":"data:wydmdh4:cctv","dataCount":12,"dataSize":1572,"errorMessage":null,"success":true},{"geohashId":"wydmdhd","cacheKey":"data:wydmdhd:cctv","dataCount":1,"dataSize":131,"errorMessage":null,"success":true},{"geohashId":"wydmdh5","cacheKey":"data:wydmdh5:cctv","dataCount":7,"dataSize":914,"errorMessage":null,"success":true},{"geohashId":"wydmdhe","cacheKey":"data:wydmdhe:cctv","dataCount":4,"dataSize":523,"errorMessage":null,"success":true},{"geohashId":"wydmdh6","cacheKey":"data:wydmdh6:cctv","dataCount":3,"dataSize":393,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:56:54.820 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.820433100Z","nanoTime":28200834368300,"traceId":"8742ffa6","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:56:54.820 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:56:54.820 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.55341908993531, 127.00701655808545)
2025-11-21 19:56:54.820 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:56:54.883 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:56:54.883 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:56:54.883 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:56:54.883 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.55341908993531, 127.00701655808545), 반경: 500m
2025-11-21 19:56:54.965 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:56:54.965 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 136건
2025-11-21 19:56:54.965 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:56:54.965 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:56:54.965 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 중구
2025-11-21 19:56:54.970 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 중구
2025-11-21 19:56:54.970 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:56:54.970 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:56:54.970 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:56:54.970 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.866910799
2025-11-21 19:56:54.970 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.970923900Z","nanoTime":28200985221600,"traceId":"8742ffa6","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":150853300,"duration_ms":150,"resultData":{"latitude":37.55341908993531,"longitude":127.00701655808545,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":150698500,"addressApiResult":{"cached":false,"cacheKey":"address:37.55341908993531:127.00701655808545","roadAddress":"서울특별시 중구 동호로15길 93","jibunAddress":"서울 중구 신당동 432-460","responseSize":73,"executionTimeNs":63863300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:중구","guName":"중구","arrestRate":0.866910799,"dataFound":true,"executionTimeNs":665200,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.55341908993531:127.00701655808545:500","categoryCount":15,"placesByCategory":{"CT1":5,"AT4":1,"CS2":14,"SC4":3,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":5,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalPlaces":136,"responseSize":15661,"executionTimeNs":86170000,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:54.970 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:54.970923900Z","nanoTime":28200985455800,"traceId":"8742ffa6","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:56:54.970 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:56:54.970 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:56:54.970 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 38개
2025-11-21 19:56:54.970 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 38개 (총 카메라 대수: 83대)
2025-11-21 19:56:54.970 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:56:55.050 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: "서울특별시 중구  동호로 5길 15, 약수지구대" (거리: 494m)
2025-11-21 19:56:55.050 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:56:55.050 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:56:55.050 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:56:55.050 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:56:55.050 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:55.050314100Z","nanoTime":28201066329500,"traceId":"8742ffa6","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":80873700,"duration_ms":80,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":38,"totalCctvAfterFilter":38,"totalCameraCount":83,"filterRate":1.0,"filterExecutionTimeNs":21900,"success":true},"policeQuery":{"queryDurationNs":80374000,"found":true,"nearestAddress":"\"서울특별시 중구  동호로 5길 15, 약수지구대\"","nearestDistance":493.52793532000436,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":5,"AT4":1,"CS2":14,"SC4":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":5,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"placesAfterFilter":{"CT1":5,"AT4":1,"CS2":14,"SC4":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":5,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalBeforeFilter":136,"totalAfterFilter":136,"filterRate":1.0,"filterExecutionTimeNs":129800,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:55.050 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:55.050314100Z","nanoTime":28201066512000,"traceId":"8742ffa6","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:56:55.050 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:56:55.050 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 77.50, 편의성: 38.55, 종합: 58.02
2025-11-21 19:56:55.050 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:55.050314100Z","nanoTime":28201066737400,"traceId":"8742ffa6","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":225400,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":38.309008084999455,"policeDistance":493.52793532000436,"cctvScore":100.0,"cctvCount":38,"arrestRateScore":86.6910799,"arrestRate":0.866910799,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":77.50002639549984,"success":true},"convenienceScore":{"categoryScores":{"CT1":20.0,"AT4":3.0,"CS2":10.669593183654184,"SC4":6.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":15.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"중구","guPopulation":131214,"finalScore":38.54782808454672,"success":true},"overallScore":58.02392724002328,"errorMessage":null,"success":true}}
2025-11-21 19:56:55.050 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:55.050314100Z","nanoTime":28201066860400,"traceId":"8742ffa6","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:56:55.050 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:56:55.050 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address="서울특별시 중구  동호로 5길 15, 약수지구대", latitude=37.552144, longitude=127.012379, geohashId=wydmdhp)
2025-11-21 19:56:55.050 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 493.52793532000436
2025-11-21 19:56:55.053 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdh7
2025-11-21 19:56:55.053 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:56:55.053 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:55.053800100Z","nanoTime":28201068541900,"traceId":"8742ffa6","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1681500,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["학교이(가) 77m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdh7","dataSize":20883,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20883,"errorMessage":null,"success":true}}
2025-11-21 19:56:55.053 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:56:55.389 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:56:55.389 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55356308175381, longitude=127.00942710343124, radius=500)
2025-11-21 19:56:55.389 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:56:55.389 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55356308175381, longitude=127.00942710343124, radius=500
2025-11-21 19:56:55.389 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:55.389801800Z","nanoTime":28201406974100,"traceId":"b1448545","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:56:55.389 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:56:55.389 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55356308175381, lon=127.00942710343124
2025-11-21 19:56:55.389 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:55.389801800Z","nanoTime":28201407086700,"traceId":"b1448545","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:56:55.389 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:55.389801800Z","nanoTime":28201407147200,"traceId":"b1448545","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":60500,"duration_ms":0,"resultData":{"latitude":37.55356308175381,"longitude":127.00942710343124,"precision":7,"centerHash":"wydmdhm","adjacentHashes":["wydmdhm","wydmdht","wydmdhw","wydmdhq","wydmdhn","wydmdhj","wydmdhh","wydmdhk","wydmdhs"],"errorMessage":null,"success":true}}
2025-11-21 19:56:55.389 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdhm, wydmdht, wydmdhw, wydmdhq, wydmdhn, wydmdhj, wydmdhh, wydmdhk, wydmdhs]
2025-11-21 19:56:55.389 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdhm
2025-11-21 19:56:55.389 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:55.389801800Z","nanoTime":28201407248000,"traceId":"b1448545","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":273900,"duration_ms":0,"resultData":{"requestLatitude":37.55356308175381,"requestLongitude":127.00942710343124,"requestRadius":500,"centerGeohashId":"wydmdhm","nineBlockGeohashes":["wydmdhm","wydmdht","wydmdhw","wydmdhq","wydmdhn","wydmdhj","wydmdhh","wydmdhk","wydmdhs"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:56:55.389 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:55.389801800Z","nanoTime":28201407282700,"traceId":"b1448545","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:56:55.389 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:56:55.389 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdhm
2025-11-21 19:56:55.389 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 히트! JSON 역직렬화 시도
2025-11-21 19:56:55.389 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 히트 성공! 즉시 반환 (L1 조회: 0.8911ms, 역직렬화: 1.7193ms)
2025-11-21 19:56:55.389 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:55.389801800Z","nanoTime":28201410086700,"traceId":"b1448545","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2804000,"duration_ms":2,"resultData":{"centerGeohashId":"wydmdhm","nineBlockGeohashes":["wydmdhm","wydmdht","wydmdhw","wydmdhq","wydmdhn","wydmdhj","wydmdhh","wydmdhk","wydmdhs"],"l1CacheHit":true,"l1CacheResult":{"cacheKey":"dto:wydmdhm","hit":true,"valueSize":17381,"l1CacheGetDurationNs":891100,"l1JsonDeserializeDurationNs":1719300},"l2CacheRequired":false,"l2CacheResults":null,"l2TotalHits":0,"l2TotalMisses":0,"l2CacheTotalDurationNs":null,"l2JsonDeserializeTotalDurationNs":null,"errorMessage":null,"success":true}}
2025-11-21 19:56:55.389 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 1단계 캐시 히트: 즉시 반환 ===
2025-11-21 19:56:55.389 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:56:56.292 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:56:56.292 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5572924604532, longitude=127.01632000068986, radius=500)
2025-11-21 19:56:56.292 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:56:56.292 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5572924604532, longitude=127.01632000068986, radius=500
2025-11-21 19:56:56.292 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:56.292966900Z","nanoTime":28202307078100,"traceId":"d3e4f7c1","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:56:56.292 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:56:56.292 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5572924604532, lon=127.01632000068986
2025-11-21 19:56:56.292 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:56.292966900Z","nanoTime":28202307161100,"traceId":"d3e4f7c1","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:56:56.292 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:56.292966900Z","nanoTime":28202307202100,"traceId":"d3e4f7c1","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":41000,"duration_ms":0,"resultData":{"latitude":37.5572924604532,"longitude":127.01632000068986,"precision":7,"centerHash":"wydmdm4","adjacentHashes":["wydmdm4","wydmdm6","wydmdm7","wydmdm5","wydmdkg","wydmdkf","wydmdkc","wydmdm1","wydmdm3"],"errorMessage":null,"success":true}}
2025-11-21 19:56:56.292 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdm4, wydmdm6, wydmdm7, wydmdm5, wydmdkg, wydmdkf, wydmdkc, wydmdm1, wydmdm3]
2025-11-21 19:56:56.292 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdm4
2025-11-21 19:56:56.292 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:56.292966900Z","nanoTime":28202307307200,"traceId":"d3e4f7c1","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":229100,"duration_ms":0,"resultData":{"requestLatitude":37.5572924604532,"requestLongitude":127.01632000068986,"requestRadius":500,"centerGeohashId":"wydmdm4","nineBlockGeohashes":["wydmdm4","wydmdm6","wydmdm7","wydmdm5","wydmdkg","wydmdkf","wydmdkc","wydmdm1","wydmdm3"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:56:56.292 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:56.292966900Z","nanoTime":28202307352400,"traceId":"d3e4f7c1","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:56:56.292 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:56:56.292 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdm4
2025-11-21 19:56:56.294 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3544ms)
2025-11-21 19:56:56.294 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:56:56.297 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:56:56.297 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 5개, 미스: 4개
2025-11-21 19:56:56.297 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 3.1973ms, 역직렬화: 0.3618ms
2025-11-21 19:56:56.297 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:56:56.297 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:56.297081200Z","nanoTime":28202311311800,"traceId":"d3e4f7c1","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3959400,"duration_ms":3,"resultData":{"centerGeohashId":"wydmdm4","nineBlockGeohashes":["wydmdm4","wydmdm6","wydmdm7","wydmdm5","wydmdkg","wydmdkf","wydmdkc","wydmdm1","wydmdm3"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdm4","hit":false,"valueSize":0,"l1CacheGetDurationNs":354400,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdm4","cacheKey":"data:wydmdm4:cctv","hit":true,"dataType":"cctv","dataCount":7,"dataSize":906,"l2CacheGetDurationNs":357400},{"geohashId":"wydmdm6","cacheKey":"data:wydmdm6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":339300},{"geohashId":"wydmdm7","cacheKey":"data:wydmdm7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":205100},{"geohashId":"wydmdm5","cacheKey":"data:wydmdm5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":123400},{"geohashId":"wydmdkg","cacheKey":"data:wydmdkg:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":262,"l2CacheGetDurationNs":209100},{"geohashId":"wydmdkf","cacheKey":"data:wydmdkf:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":525,"l2CacheGetDurationNs":231300},{"geohashId":"wydmdkc","cacheKey":"data:wydmdkc:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":523,"l2CacheGetDurationNs":497200},{"geohashId":"wydmdm1","cacheKey":"data:wydmdm1:cctv","hit":true,"dataType":"cctv","dataCount":6,"dataSize":782,"l2CacheGetDurationNs":495400},{"geohashId":"wydmdm3","cacheKey":"data:wydmdm3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":278100}],"l2TotalHits":5,"l2TotalMisses":4,"l2CacheTotalDurationNs":3197300,"l2JsonDeserializeTotalDurationNs":361800,"errorMessage":null,"success":true}}
2025-11-21 19:56:56.297 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:56.297081200Z","nanoTime":28202311540000,"traceId":"d3e4f7c1","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:56:56.297 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:56:56.297 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 4개
2025-11-21 19:56:56.301 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 10건
2025-11-21 19:56:56.301 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:56:56.301 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 7개
2025-11-21 19:56:56.301 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:56.301908400Z","nanoTime":28202317395600,"traceId":"d3e4f7c1","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5855600,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydmdm6","wydmdm7","wydmdm5","wydmdm3"],"cctvQueryResult":{"queryGeohashIds":["wydmdm6","wydmdm7","wydmdm5","wydmdm3"],"totalRowsReturned":10,"rowsPerGrid":{"wydmdm6":6,"wydmdm3":4},"queryExecutionTimeNs":4448600,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdm6","cacheKey":"data:wydmdm6:cctv","dataCount":6,"dataSize":777,"errorMessage":null,"success":true},{"geohashId":"wydmdm3","cacheKey":"data:wydmdm3:cctv","dataCount":4,"dataSize":517,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:56:56.301 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:56.301908400Z","nanoTime":28202317593100,"traceId":"d3e4f7c1","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:56:56.301 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:56:56.301 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5572924604532, 127.01632000068986)
2025-11-21 19:56:56.303 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:56:56.369 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:56:56.369 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:56:56.369 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:56:56.369 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5572924604532, 127.01632000068986), 반경: 500m
2025-11-21 19:56:56.444 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:56:56.444 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 131건
2025-11-21 19:56:56.450 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:56:56.450 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:56:56.450 [http-nio-8185-exec-5] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:56:56.450 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:56:56.450 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:56:56.450 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:56:56.450 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:56:56.451 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:56.451497800Z","nanoTime":28202465280500,"traceId":"d3e4f7c1","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":147687400,"duration_ms":147,"resultData":{"latitude":37.5572924604532,"longitude":127.01632000068986,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":147456100,"addressApiResult":{"cached":false,"cacheKey":"address:37.5572924604532:127.01632000068986","roadAddress":"주소 없음","jibunAddress":"서울 중구 신당동 333-185","responseSize":60,"executionTimeNs":66608400,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":46600,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5572924604532:127.01632000068986:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":2,"CS2":15,"SC4":6,"MT1":0,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":5,"FD6":15,"PK6":15,"OL7":1,"PM9":9},"totalPlaces":131,"responseSize":15223,"executionTimeNs":80801100,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:56.451 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:56.451497800Z","nanoTime":28202465548000,"traceId":"d3e4f7c1","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:56:56.451 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:56:56.451 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:56:56.451 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 33개
2025-11-21 19:56:56.451 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 33개 (총 카메라 대수: 76대)
2025-11-21 19:56:56.451 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:56:56.520 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 성동구  광나루로2길 35 성수지구대 (거리: 406m)
2025-11-21 19:56:56.520 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:56:56.520 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:56:56.520 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:56:56.521 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:56:56.521 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:56.521082700Z","nanoTime":28202534882500,"traceId":"d3e4f7c1","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":69334500,"duration_ms":69,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":33,"totalCctvAfterFilter":33,"totalCameraCount":76,"filterRate":1.0,"filterExecutionTimeNs":25100,"success":true},"policeQuery":{"queryDurationNs":68514300,"found":true,"nearestAddress":"서울특별시 성동구  광나루로2길 35 성수지구대","nearestDistance":406.1992102422979,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"AT4":2,"CS2":15,"SC4":6,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":5,"FD6":15,"PK6":15,"OL7":1,"PM9":9},"placesAfterFilter":{"CT1":1,"AT4":2,"CS2":15,"SC4":6,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":5,"FD6":15,"PK6":15,"OL7":1,"PM9":9},"totalBeforeFilter":131,"totalAfterFilter":131,"filterRate":1.0,"filterExecutionTimeNs":287800,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:56.521 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:56.521082700Z","nanoTime":28202535330200,"traceId":"d3e4f7c1","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:56:56.521 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:56:56.521 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 54.77, 편의성: 35.20, 종합: 44.98
2025-11-21 19:56:56.522 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:56.521082700Z","nanoTime":28202535779300,"traceId":"d3e4f7c1","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":449100,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":49.22509871971276,"policeDistance":406.1992102422979,"cctvScore":100.0,"cctvCount":33,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":54.76752961591383,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"AT4":6.0,"CS2":3.75,"SC4":12.0,"BK9":70.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":15.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":72.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":35.19642857142857,"success":true},"overallScore":44.9819790936712,"errorMessage":null,"success":true}}
2025-11-21 19:56:56.522 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:56.522098Z","nanoTime":28202536028600,"traceId":"d3e4f7c1","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:56:56.522 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:56:56.522 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 성동구  광나루로2길 35 성수지구대, latitude=37.554742, longitude=127.019619, geohashId=wydmdks)
2025-11-21 19:56:56.522 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 406.1992102422979
2025-11-21 19:56:56.522 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdm4
2025-11-21 19:56:56.522 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:56:56.522 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:56.522098Z","nanoTime":28202537548500,"traceId":"d3e4f7c1","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1519900,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["학원이(가) 77m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdm4","dataSize":20099,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20099,"errorMessage":null,"success":true}}
2025-11-21 19:56:56.522 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:56:57.059 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:56:57.059 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5596356873166, longitude=127.01079734275335, radius=500)
2025-11-21 19:56:57.059 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:56:57.059 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5596356873166, longitude=127.01079734275335, radius=500
2025-11-21 19:56:57.059 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.059007900Z","nanoTime":28203073421200,"traceId":"38ccb4a8","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:56:57.059 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:56:57.059 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5596356873166, lon=127.01079734275335
2025-11-21 19:56:57.059 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.059007900Z","nanoTime":28203073487300,"traceId":"38ccb4a8","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:56:57.059 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.059007900Z","nanoTime":28203073521500,"traceId":"38ccb4a8","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":34200,"duration_ms":0,"resultData":{"latitude":37.5596356873166,"longitude":127.01079734275335,"precision":7,"centerHash":"wydmdjw","adjacentHashes":["wydmdjw","wydmdjy","wydmdjz","wydmdjx","wydmdjr","wydmdjq","wydmdjm","wydmdjt","wydmdjv"],"errorMessage":null,"success":true}}
2025-11-21 19:56:57.059 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdjw, wydmdjy, wydmdjz, wydmdjx, wydmdjr, wydmdjq, wydmdjm, wydmdjt, wydmdjv]
2025-11-21 19:56:57.059 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdjw
2025-11-21 19:56:57.059 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.059007900Z","nanoTime":28203073622800,"traceId":"38ccb4a8","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":201600,"duration_ms":0,"resultData":{"requestLatitude":37.5596356873166,"requestLongitude":127.01079734275335,"requestRadius":500,"centerGeohashId":"wydmdjw","nineBlockGeohashes":["wydmdjw","wydmdjy","wydmdjz","wydmdjx","wydmdjr","wydmdjq","wydmdjm","wydmdjt","wydmdjv"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:56:57.059 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.059007900Z","nanoTime":28203073659900,"traceId":"38ccb4a8","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:56:57.059 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:56:57.059 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdjw
2025-11-21 19:56:57.060 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4563ms)
2025-11-21 19:56:57.060 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:56:57.064 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:56:57.064 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 8개, 미스: 1개
2025-11-21 19:56:57.064 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 4.193ms, 역직렬화: 0.418ms
2025-11-21 19:56:57.064 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:56:57.064 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.064530700Z","nanoTime":28203078600400,"traceId":"38ccb4a8","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":4940500,"duration_ms":4,"resultData":{"centerGeohashId":"wydmdjw","nineBlockGeohashes":["wydmdjw","wydmdjy","wydmdjz","wydmdjx","wydmdjr","wydmdjq","wydmdjm","wydmdjt","wydmdjv"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdjw","hit":false,"valueSize":0,"l1CacheGetDurationNs":456300,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdjw","cacheKey":"data:wydmdjw:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":257,"l2CacheGetDurationNs":421700},{"geohashId":"wydmdjy","cacheKey":"data:wydmdjy:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":648,"l2CacheGetDurationNs":527000},{"geohashId":"wydmdjz","cacheKey":"data:wydmdjz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":254500},{"geohashId":"wydmdjx","cacheKey":"data:wydmdjx:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":522,"l2CacheGetDurationNs":554100},{"geohashId":"wydmdjr","cacheKey":"data:wydmdjr:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":389,"l2CacheGetDurationNs":434500},{"geohashId":"wydmdjq","cacheKey":"data:wydmdjq:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":389,"l2CacheGetDurationNs":408300},{"geohashId":"wydmdjm","cacheKey":"data:wydmdjm:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":389,"l2CacheGetDurationNs":347000},{"geohashId":"wydmdjt","cacheKey":"data:wydmdjt:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":131,"l2CacheGetDurationNs":356100},{"geohashId":"wydmdjv","cacheKey":"data:wydmdjv:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":649,"l2CacheGetDurationNs":365800}],"l2TotalHits":8,"l2TotalMisses":1,"l2CacheTotalDurationNs":4193000,"l2JsonDeserializeTotalDurationNs":418000,"errorMessage":null,"success":true}}
2025-11-21 19:56:57.064 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.064530700Z","nanoTime":28203078744500,"traceId":"38ccb4a8","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:56:57.064 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:56:57.064 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 1개
2025-11-21 19:56:57.071 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 4건
2025-11-21 19:56:57.071 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:56:57.071 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:56:57.073 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.071972900Z","nanoTime":28203087706800,"traceId":"38ccb4a8","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":8962300,"duration_ms":8,"resultData":{"inputCctvMissGrids":["wydmdjz"],"cctvQueryResult":{"queryGeohashIds":["wydmdjz"],"totalRowsReturned":4,"rowsPerGrid":{"wydmdjz":4},"queryExecutionTimeNs":8007500,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdjz","cacheKey":"data:wydmdjz:cctv","dataCount":4,"dataSize":521,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:56:57.073 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.073992300Z","nanoTime":28203087903900,"traceId":"38ccb4a8","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:56:57.073 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:56:57.073 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5596356873166, 127.01079734275335)
2025-11-21 19:56:57.073 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:56:57.162 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:56:57.165 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:56:57.165 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:56:57.165 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5596356873166, 127.01079734275335), 반경: 500m
2025-11-21 19:56:57.243 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:56:57.243 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 130건
2025-11-21 19:56:57.245 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:56:57.245 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:56:57.245 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 중구
2025-11-21 19:56:57.247 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 중구
2025-11-21 19:56:57.247 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:56:57.247 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:56:57.247 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:56:57.247 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.866910799
2025-11-21 19:56:57.248 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.247351300Z","nanoTime":28203261655900,"traceId":"38ccb4a8","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":173752000,"duration_ms":173,"resultData":{"latitude":37.5596356873166,"longitude":127.01079734275335,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":173497000,"addressApiResult":{"cached":false,"cacheKey":"address:37.5596356873166:127.01079734275335","roadAddress":"서울특별시 중구 청구로17길 40","jibunAddress":"서울 중구 신당동 386-86","responseSize":72,"executionTimeNs":91038600,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:중구","guName":"중구","arrestRate":0.866910799,"dataFound":true,"executionTimeNs":1100000,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5596356873166:127.01079734275335:500","categoryCount":15,"placesByCategory":{"CT1":4,"AT4":2,"CS2":15,"SC4":3,"MT1":0,"BK9":10,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":7,"FD6":15,"PK6":15,"OL7":3,"PM9":8},"totalPlaces":130,"responseSize":14992,"executionTimeNs":81358400,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:57.248 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.248107Z","nanoTime":28203262126000,"traceId":"38ccb4a8","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:56:57.248 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:56:57.248 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:56:57.248 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 30개
2025-11-21 19:56:57.248 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 30개 (총 카메라 대수: 97대)
2025-11-21 19:56:57.248 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:56:57.335 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  동호로 261 (거리: 537m)
2025-11-21 19:56:57.335 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:56:57.335 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:56:57.335 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:56:57.335 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:56:57.335 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.335610400Z","nanoTime":28203350577000,"traceId":"38ccb4a8","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":88451000,"duration_ms":88,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":30,"totalCctvAfterFilter":30,"totalCameraCount":97,"filterRate":1.0,"filterExecutionTimeNs":24700,"success":true},"policeQuery":{"queryDurationNs":87804500,"found":true,"nearestAddress":"서울특별시 중구  동호로 261","nearestDistance":536.8524761902027,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":4,"AT4":2,"CS2":15,"SC4":3,"BK9":10,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":7,"FD6":15,"PK6":15,"OL7":3,"PM9":8},"placesAfterFilter":{"CT1":4,"AT4":2,"CS2":15,"SC4":3,"BK9":10,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":7,"FD6":15,"PK6":15,"OL7":3,"PM9":8},"totalBeforeFilter":130,"totalAfterFilter":130,"filterRate":1.0,"filterExecutionTimeNs":196400,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:57.335 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.335610400Z","nanoTime":28203350816300,"traceId":"38ccb4a8","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:56:57.335 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:56:57.337 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 75.88, 편의성: 35.32, 종합: 55.60
2025-11-21 19:56:57.337 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.337620200Z","nanoTime":28203351648800,"traceId":"38ccb4a8","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":832500,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":32.89344047622467,"policeDistance":536.8524761902027,"cctvScore":100.0,"cctvCount":30,"arrestRateScore":86.6910799,"arrestRate":0.866910799,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":75.8753561128674,"success":true},"convenienceScore":{"categoryScores":{"CT1":16.0,"AT4":6.0,"CS2":11.431706982486624,"SC4":6.0,"BK9":50.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":21.0,"FD6":15.0,"PK6":45.0,"OL7":15.0,"PM9":64.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"중구","guPopulation":131214,"finalScore":35.316550498749045,"success":true},"overallScore":55.59595330580822,"errorMessage":null,"success":true}}
2025-11-21 19:56:57.337 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.337620200Z","nanoTime":28203351822300,"traceId":"38ccb4a8","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:56:57.337 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:56:57.337 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  동호로 261, latitude=37.558764, longitude=127.004807, geohashId=wydmdj6)
2025-11-21 19:56:57.337 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 536.8524761902027
2025-11-21 19:56:57.337 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdjw
2025-11-21 19:56:57.337 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:56:57.337 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.337620200Z","nanoTime":28203353249800,"traceId":"38ccb4a8","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1427500,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["학교이(가) 55m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdjw","dataSize":19337,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19337,"errorMessage":null,"success":true}}
2025-11-21 19:56:57.337 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:56:57.643 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:56:57.643 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55922048224604, longitude=127.01711267464798, radius=500)
2025-11-21 19:56:57.643 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:56:57.643 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55922048224604, longitude=127.01711267464798, radius=500
2025-11-21 19:56:57.643 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.643450800Z","nanoTime":28203658094600,"traceId":"6bac91b7","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:56:57.643 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:56:57.643 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55922048224604, lon=127.01711267464798
2025-11-21 19:56:57.643 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.643450800Z","nanoTime":28203658167900,"traceId":"6bac91b7","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:56:57.644 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.644436Z","nanoTime":28203658209400,"traceId":"6bac91b7","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":41500,"duration_ms":0,"resultData":{"latitude":37.55922048224604,"longitude":127.01711267464798,"precision":7,"centerHash":"wydmdm7","adjacentHashes":["wydmdm7","wydmdme","wydmdms","wydmdmk","wydmdmh","wydmdm5","wydmdm4","wydmdm6","wydmdmd"],"errorMessage":null,"success":true}}
2025-11-21 19:56:57.644 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdm7, wydmdme, wydmdms, wydmdmk, wydmdmh, wydmdm5, wydmdm4, wydmdm6, wydmdmd]
2025-11-21 19:56:57.644 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdm7
2025-11-21 19:56:57.644 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.644436Z","nanoTime":28203658355100,"traceId":"6bac91b7","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":260500,"duration_ms":0,"resultData":{"requestLatitude":37.55922048224604,"requestLongitude":127.01711267464798,"requestRadius":500,"centerGeohashId":"wydmdm7","nineBlockGeohashes":["wydmdm7","wydmdme","wydmdms","wydmdmk","wydmdmh","wydmdm5","wydmdm4","wydmdm6","wydmdmd"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:56:57.644 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.644436Z","nanoTime":28203658404400,"traceId":"6bac91b7","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:56:57.644 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:56:57.644 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdm7
2025-11-21 19:56:57.644 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4247ms)
2025-11-21 19:56:57.644 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:56:57.648 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:56:57.648 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 4개, 미스: 5개
2025-11-21 19:56:57.648 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 3.4854ms, 역직렬화: 0.3908ms
2025-11-21 19:56:57.648 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:56:57.648 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.648548700Z","nanoTime":28203662634900,"traceId":"6bac91b7","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":4230500,"duration_ms":4,"resultData":{"centerGeohashId":"wydmdm7","nineBlockGeohashes":["wydmdm7","wydmdme","wydmdms","wydmdmk","wydmdmh","wydmdm5","wydmdm4","wydmdm6","wydmdmd"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdm7","hit":false,"valueSize":0,"l1CacheGetDurationNs":424700,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdm7","cacheKey":"data:wydmdm7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":360600},{"geohashId":"wydmdme","cacheKey":"data:wydmdme:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":257,"l2CacheGetDurationNs":644100},{"geohashId":"wydmdms","cacheKey":"data:wydmdms:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":256,"l2CacheGetDurationNs":517100},{"geohashId":"wydmdmk","cacheKey":"data:wydmdmk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":126100},{"geohashId":"wydmdmh","cacheKey":"data:wydmdmh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":167200},{"geohashId":"wydmdm5","cacheKey":"data:wydmdm5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":183300},{"geohashId":"wydmdm4","cacheKey":"data:wydmdm4:cctv","hit":true,"dataType":"cctv","dataCount":7,"dataSize":906,"l2CacheGetDurationNs":363100},{"geohashId":"wydmdm6","cacheKey":"data:wydmdm6:cctv","hit":true,"dataType":"cctv","dataCount":6,"dataSize":777,"l2CacheGetDurationNs":376400},{"geohashId":"wydmdmd","cacheKey":"data:wydmdmd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":218000}],"l2TotalHits":4,"l2TotalMisses":5,"l2CacheTotalDurationNs":3485400,"l2JsonDeserializeTotalDurationNs":390800,"errorMessage":null,"success":true}}
2025-11-21 19:56:57.648 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.648548700Z","nanoTime":28203662824200,"traceId":"6bac91b7","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:56:57.648 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:56:57.648 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 5개
2025-11-21 19:56:57.652 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 1건
2025-11-21 19:56:57.652 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:56:57.652 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 5개
2025-11-21 19:56:57.652 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.652530Z","nanoTime":28203667306900,"traceId":"6bac91b7","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4482700,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmdm7","wydmdmk","wydmdmh","wydmdm5","wydmdmd"],"cctvQueryResult":{"queryGeohashIds":["wydmdm7","wydmdmk","wydmdmh","wydmdm5","wydmdmd"],"totalRowsReturned":1,"rowsPerGrid":{"wydmdmd":1},"queryExecutionTimeNs":3568200,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdmd","cacheKey":"data:wydmdmd:cctv","dataCount":1,"dataSize":131,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:56:57.652 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.652530Z","nanoTime":28203667434300,"traceId":"6bac91b7","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:56:57.652 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:56:57.652 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.55922048224604, 127.01711267464798)
2025-11-21 19:56:57.652 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:56:57.726 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:56:57.726 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:56:57.726 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:56:57.726 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.55922048224604, 127.01711267464798), 반경: 500m
2025-11-21 19:56:57.820 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:56:57.820 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 130건
2025-11-21 19:56:57.820 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:56:57.820 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:56:57.820 [http-nio-8185-exec-6] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:56:57.820 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:56:57.820 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:56:57.820 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:56:57.820 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:56:57.820 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.820421600Z","nanoTime":28203836633300,"traceId":"6bac91b7","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":169199000,"duration_ms":169,"resultData":{"latitude":37.55922048224604,"longitude":127.01711267464798,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":169095700,"addressApiResult":{"cached":false,"cacheKey":"address:37.55922048224604:127.01711267464798","roadAddress":"주소 없음","jibunAddress":"서울 중구 신당동 313-112","responseSize":60,"executionTimeNs":81358400,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":36100,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.55922048224604:127.01711267464798:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":4,"CS2":15,"SC4":6,"MT1":1,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":4,"FD6":15,"PK6":15,"OL7":1,"PM9":7},"totalPlaces":130,"responseSize":15049,"executionTimeNs":87701200,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:57.820 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.820421600Z","nanoTime":28203836801400,"traceId":"6bac91b7","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:56:57.820 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:56:57.820 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:56:57.820 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 18개
2025-11-21 19:56:57.820 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 18개 (총 카메라 대수: 43대)
2025-11-21 19:56:57.820 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:56:57.905 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 성동구  광나루로2길 35 성수지구대 (거리: 545m)
2025-11-21 19:56:57.905 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:56:57.905 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:56:57.905 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:56:57.905 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:56:57.905 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.905384600Z","nanoTime":28203919860800,"traceId":"6bac91b7","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":83059400,"duration_ms":83,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":18,"totalCctvAfterFilter":18,"totalCameraCount":43,"filterRate":1.0,"filterExecutionTimeNs":13000,"success":true},"policeQuery":{"queryDurationNs":82378300,"found":true,"nearestAddress":"서울특별시 성동구  광나루로2길 35 성수지구대","nearestDistance":544.7928245652296,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"AT4":4,"CS2":15,"SC4":6,"MT1":1,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":4,"FD6":15,"PK6":15,"OL7":1,"PM9":7},"placesAfterFilter":{"CT1":1,"AT4":4,"CS2":15,"SC4":6,"MT1":1,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":4,"FD6":15,"PK6":15,"OL7":1,"PM9":7},"totalBeforeFilter":130,"totalAfterFilter":130,"filterRate":1.0,"filterExecutionTimeNs":229200,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:57.905 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.905384600Z","nanoTime":28203920067000,"traceId":"6bac91b7","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:56:57.905 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:56:57.905 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 33.57, 편의성: 32.65, 종합: 33.11
2025-11-21 19:56:57.905 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.905384600Z","nanoTime":28203920362400,"traceId":"6bac91b7","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":295400,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":31.900896929346302,"policeDistance":544.7928245652296,"cctvScore":60.0,"cctvCount":18,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":33.57026907880389,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"AT4":12.0,"CS2":3.75,"SC4":12.0,"MT1":10.0,"BK9":70.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":12.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":56.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":32.65,"success":true},"overallScore":33.11013453940194,"errorMessage":null,"success":true}}
2025-11-21 19:56:57.905 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.905384600Z","nanoTime":28203920501000,"traceId":"6bac91b7","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:56:57.905 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:56:57.905 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 성동구  광나루로2길 35 성수지구대, latitude=37.554742, longitude=127.019619, geohashId=wydmdks)
2025-11-21 19:56:57.905 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 544.7928245652296
2025-11-21 19:56:57.905 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdm7
2025-11-21 19:56:57.905 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:56:57.905 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:57.905384600Z","nanoTime":28203921895600,"traceId":"6bac91b7","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1394600,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["학원이(가) 67m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdm7","dataSize":18331,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":18331,"errorMessage":null,"success":true}}
2025-11-21 19:56:57.905 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:56:58.166 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:56:58.166 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56206867972544, longitude=127.00674572908595, radius=500)
2025-11-21 19:56:58.166 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:56:58.166 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56206867972544, longitude=127.00674572908595, radius=500
2025-11-21 19:56:58.166 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.166650900Z","nanoTime":28204181078600,"traceId":"0a403e6a","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:56:58.166 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:56:58.166 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56206867972544, lon=127.00674572908595
2025-11-21 19:56:58.166 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.166650900Z","nanoTime":28204181194200,"traceId":"0a403e6a","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:56:58.167 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.167461500Z","nanoTime":28204181251800,"traceId":"0a403e6a","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":57600,"duration_ms":0,"resultData":{"latitude":37.56206867972544,"longitude":127.00674572908595,"precision":7,"centerHash":"wydmdjg","adjacentHashes":["wydmdjg","wydmdn5","wydmdnh","wydmdju","wydmdjs","wydmdje","wydmdjd","wydmdjf","wydmdn4"],"errorMessage":null,"success":true}}
2025-11-21 19:56:58.167 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdjg, wydmdn5, wydmdnh, wydmdju, wydmdjs, wydmdje, wydmdjd, wydmdjf, wydmdn4]
2025-11-21 19:56:58.167 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdjg
2025-11-21 19:56:58.167 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.167461500Z","nanoTime":28204181396200,"traceId":"0a403e6a","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":317600,"duration_ms":0,"resultData":{"requestLatitude":37.56206867972544,"requestLongitude":127.00674572908595,"requestRadius":500,"centerGeohashId":"wydmdjg","nineBlockGeohashes":["wydmdjg","wydmdn5","wydmdnh","wydmdju","wydmdjs","wydmdje","wydmdjd","wydmdjf","wydmdn4"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:56:58.167 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.167461500Z","nanoTime":28204181451500,"traceId":"0a403e6a","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:56:58.167 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:56:58.167 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdjg
2025-11-21 19:56:58.167 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4807ms)
2025-11-21 19:56:58.167 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:56:58.169 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:56:58.169 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 2개, 미스: 7개
2025-11-21 19:56:58.169 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.6135ms, 역직렬화: 0.1081ms
2025-11-21 19:56:58.169 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:56:58.169 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.169467700Z","nanoTime":28204183838000,"traceId":"0a403e6a","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2386500,"duration_ms":2,"resultData":{"centerGeohashId":"wydmdjg","nineBlockGeohashes":["wydmdjg","wydmdn5","wydmdnh","wydmdju","wydmdjs","wydmdje","wydmdjd","wydmdjf","wydmdn4"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdjg","hit":false,"valueSize":0,"l1CacheGetDurationNs":480700,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdjg","cacheKey":"data:wydmdjg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":269300},{"geohashId":"wydmdn5","cacheKey":"data:wydmdn5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":132700},{"geohashId":"wydmdnh","cacheKey":"data:wydmdnh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":108100},{"geohashId":"wydmdju","cacheKey":"data:wydmdju:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":653,"l2CacheGetDurationNs":347200},{"geohashId":"wydmdjs","cacheKey":"data:wydmdjs:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":393,"l2CacheGetDurationNs":219400},{"geohashId":"wydmdje","cacheKey":"data:wydmdje:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":114500},{"geohashId":"wydmdjd","cacheKey":"data:wydmdjd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":90100},{"geohashId":"wydmdjf","cacheKey":"data:wydmdjf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":69800},{"geohashId":"wydmdn4","cacheKey":"data:wydmdn4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":77400}],"l2TotalHits":2,"l2TotalMisses":7,"l2CacheTotalDurationNs":1613500,"l2JsonDeserializeTotalDurationNs":108100,"errorMessage":null,"success":true}}
2025-11-21 19:56:58.169 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.169467700Z","nanoTime":28204183970400,"traceId":"0a403e6a","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:56:58.169 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:56:58.169 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 7개
2025-11-21 19:56:58.172 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 18건
2025-11-21 19:56:58.173 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:56:58.173 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:56:58.173 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.173906800Z","nanoTime":28204188421600,"traceId":"0a403e6a","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4451200,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmdjg","wydmdn5","wydmdnh","wydmdje","wydmdjd","wydmdjf","wydmdn4"],"cctvQueryResult":{"queryGeohashIds":["wydmdjg","wydmdn5","wydmdnh","wydmdje","wydmdjd","wydmdjf","wydmdn4"],"totalRowsReturned":18,"rowsPerGrid":{"wydmdje":1,"wydmdjf":5,"wydmdjg":3,"wydmdjd":1,"wydmdnh":5,"wydmdn4":3},"queryExecutionTimeNs":2686800,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdje","cacheKey":"data:wydmdje:cctv","dataCount":1,"dataSize":132,"errorMessage":null,"success":true},{"geohashId":"wydmdjf","cacheKey":"data:wydmdjf:cctv","dataCount":5,"dataSize":656,"errorMessage":null,"success":true},{"geohashId":"wydmdjg","cacheKey":"data:wydmdjg:cctv","dataCount":3,"dataSize":393,"errorMessage":null,"success":true},{"geohashId":"wydmdjd","cacheKey":"data:wydmdjd:cctv","dataCount":1,"dataSize":133,"errorMessage":null,"success":true},{"geohashId":"wydmdnh","cacheKey":"data:wydmdnh:cctv","dataCount":5,"dataSize":657,"errorMessage":null,"success":true},{"geohashId":"wydmdn4","cacheKey":"data:wydmdn4:cctv","dataCount":3,"dataSize":385,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:56:58.173 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.173906800Z","nanoTime":28204188550000,"traceId":"0a403e6a","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:56:58.173 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:56:58.173 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56206867972544, 127.00674572908595)
2025-11-21 19:56:58.174 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:56:58.237 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:56:58.237 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:56:58.237 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:56:58.237 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56206867972544, 127.00674572908595), 반경: 500m
2025-11-21 19:56:58.329 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:56:58.336 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 137건
2025-11-21 19:56:58.336 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:56:58.336 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:56:58.336 [http-nio-8185-exec-7] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:56:58.336 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:56:58.336 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:56:58.336 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:56:58.336 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:56:58.336 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.336838400Z","nanoTime":28204351560300,"traceId":"0a403e6a","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":163010300,"duration_ms":163,"resultData":{"latitude":37.56206867972544,"longitude":127.00674572908595,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":162888100,"addressApiResult":{"cached":false,"cacheKey":"address:37.56206867972544:127.00674572908595","roadAddress":"주소 없음","jibunAddress":"서울 중구 장충동1가 26-1","responseSize":59,"executionTimeNs":68350300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":39700,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56206867972544:127.00674572908595:500","categoryCount":15,"placesByCategory":{"CT1":5,"AT4":7,"CS2":15,"SC4":2,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":7,"FD6":15,"PK6":15,"OL7":2,"PM9":5},"totalPlaces":137,"responseSize":15906,"executionTimeNs":94498100,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:58.336 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.336838400Z","nanoTime":28204351718500,"traceId":"0a403e6a","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:56:58.336 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:56:58.336 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:56:58.336 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 26개
2025-11-21 19:56:58.336 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 26개 (총 카메라 대수: 53대)
2025-11-21 19:56:58.336 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:56:58.425 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  동호로 261 (거리: 405m)
2025-11-21 19:56:58.425 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:56:58.425 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:56:58.425 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:56:58.425 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:56:58.425 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.425620200Z","nanoTime":28204440557300,"traceId":"0a403e6a","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":88838800,"duration_ms":88,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":26,"totalCctvAfterFilter":26,"totalCameraCount":53,"filterRate":1.0,"filterExecutionTimeNs":14600,"success":true},"policeQuery":{"queryDurationNs":88032300,"found":true,"nearestAddress":"서울특별시 중구  동호로 261","nearestDistance":405.25664385806226,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":5,"AT4":7,"CS2":15,"SC4":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":7,"FD6":15,"PK6":15,"OL7":2,"PM9":5},"placesAfterFilter":{"CT1":5,"AT4":7,"CS2":15,"SC4":2,"BK9":15,"HP8":14,"AC5":15,"CE7":15,"SW8":4,"PO3":7,"FD6":15,"PK6":15,"OL7":2,"PM9":5},"totalBeforeFilter":137,"totalAfterFilter":136,"filterRate":0.9927007299270073,"filterExecutionTimeNs":262800,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:58.425 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.425620200Z","nanoTime":28204440943500,"traceId":"0a403e6a","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:56:58.425 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:56:58.425 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 49.47, 편의성: 35.70, 종합: 42.58
2025-11-21 19:56:58.427 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.425620200Z","nanoTime":28204441313100,"traceId":"0a403e6a","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":369600,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":49.34291951774222,"policeDistance":405.25664385806226,"cctvScore":86.66666666666667,"cctvCount":26,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":49.46954252198934,"success":true},"convenienceScore":{"categoryScores":{"CT1":20.0,"AT4":21.0,"CS2":3.75,"SC4":4.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":21.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":40.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":35.69642857142857,"success":true},"overallScore":42.582985546708954,"errorMessage":null,"success":true}}
2025-11-21 19:56:58.427 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.427634700Z","nanoTime":28204441526100,"traceId":"0a403e6a","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:56:58.427 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:56:58.427 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  동호로 261, latitude=37.558764, longitude=127.004807, geohashId=wydmdj6)
2025-11-21 19:56:58.427 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 405.25664385806226
2025-11-21 19:56:58.427 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdjg
2025-11-21 19:56:58.427 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:56:58.427 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.427634700Z","nanoTime":28204443519200,"traceId":"0a403e6a","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1993100,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 21m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdjg","dataSize":19952,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19952,"errorMessage":null,"success":true}}
2025-11-21 19:56:58.427 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:56:58.647 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:56:58.647 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56482582116419, longitude=127.0048670644446, radius=500)
2025-11-21 19:56:58.647 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:56:58.647 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56482582116419, longitude=127.0048670644446, radius=500
2025-11-21 19:56:58.648 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.647533800Z","nanoTime":28204661824900,"traceId":"b4a8da37","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:56:58.648 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:56:58.648 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56482582116419, lon=127.0048670644446
2025-11-21 19:56:58.648 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.648109400Z","nanoTime":28204661958500,"traceId":"b4a8da37","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:56:58.648 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.648109400Z","nanoTime":28204662019100,"traceId":"b4a8da37","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":60600,"duration_ms":0,"resultData":{"latitude":37.56482582116419,"longitude":127.0048670644446,"precision":7,"centerHash":"wydmdn6","adjacentHashes":["wydmdn6","wydmdnd","wydmdne","wydmdn7","wydmdn5","wydmdn4","wydmdn1","wydmdn3","wydmdn9"],"errorMessage":null,"success":true}}
2025-11-21 19:56:58.648 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdn6, wydmdnd, wydmdne, wydmdn7, wydmdn5, wydmdn4, wydmdn1, wydmdn3, wydmdn9]
2025-11-21 19:56:58.648 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdn6
2025-11-21 19:56:58.648 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.648109400Z","nanoTime":28204662286900,"traceId":"b4a8da37","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":462000,"duration_ms":0,"resultData":{"requestLatitude":37.56482582116419,"requestLongitude":127.0048670644446,"requestRadius":500,"centerGeohashId":"wydmdn6","nineBlockGeohashes":["wydmdn6","wydmdnd","wydmdne","wydmdn7","wydmdn5","wydmdn4","wydmdn1","wydmdn3","wydmdn9"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:56:58.648 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.648109400Z","nanoTime":28204662369600,"traceId":"b4a8da37","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:56:58.648 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:56:58.648 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdn6
2025-11-21 19:56:58.648 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3983ms)
2025-11-21 19:56:58.649 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:56:58.652 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:56:58.652 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 6개, 미스: 3개
2025-11-21 19:56:58.652 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 3.5495ms, 역직렬화: 0.4001ms
2025-11-21 19:56:58.652 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:56:58.652 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.652607900Z","nanoTime":28204667004300,"traceId":"b4a8da37","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":4634700,"duration_ms":4,"resultData":{"centerGeohashId":"wydmdn6","nineBlockGeohashes":["wydmdn6","wydmdnd","wydmdne","wydmdn7","wydmdn5","wydmdn4","wydmdn1","wydmdn3","wydmdn9"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdn6","hit":false,"valueSize":0,"l1CacheGetDurationNs":398300,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdn6","cacheKey":"data:wydmdn6:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":259,"l2CacheGetDurationNs":485600},{"geohashId":"wydmdnd","cacheKey":"data:wydmdnd:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":262,"l2CacheGetDurationNs":453400},{"geohashId":"wydmdne","cacheKey":"data:wydmdne:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":393,"l2CacheGetDurationNs":464100},{"geohashId":"wydmdn7","cacheKey":"data:wydmdn7:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":132,"l2CacheGetDurationNs":461100},{"geohashId":"wydmdn5","cacheKey":"data:wydmdn5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":167500},{"geohashId":"wydmdn4","cacheKey":"data:wydmdn4:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":385,"l2CacheGetDurationNs":301400},{"geohashId":"wydmdn1","cacheKey":"data:wydmdn1:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":131,"l2CacheGetDurationNs":375900},{"geohashId":"wydmdn3","cacheKey":"data:wydmdn3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":153200},{"geohashId":"wydmdn9","cacheKey":"data:wydmdn9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":129100}],"l2TotalHits":6,"l2TotalMisses":3,"l2CacheTotalDurationNs":3549500,"l2JsonDeserializeTotalDurationNs":400100,"errorMessage":null,"success":true}}
2025-11-21 19:56:58.652 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.652607900Z","nanoTime":28204667253400,"traceId":"b4a8da37","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:56:58.652 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:56:58.652 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 3개
2025-11-21 19:56:58.656 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 5건
2025-11-21 19:56:58.658 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:56:58.658 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:56:58.659 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.658644100Z","nanoTime":28204672711000,"traceId":"b4a8da37","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5457600,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydmdn5","wydmdn3","wydmdn9"],"cctvQueryResult":{"queryGeohashIds":["wydmdn5","wydmdn3","wydmdn9"],"totalRowsReturned":5,"rowsPerGrid":{"wydmdn9":3,"wydmdn3":2},"queryExecutionTimeNs":3407900,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdn9","cacheKey":"data:wydmdn9:cctv","dataCount":3,"dataSize":391,"errorMessage":null,"success":true},{"geohashId":"wydmdn3","cacheKey":"data:wydmdn3:cctv","dataCount":2,"dataSize":258,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:56:58.659 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.659058300Z","nanoTime":28204672915600,"traceId":"b4a8da37","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:56:58.659 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:56:58.659 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56482582116419, 127.0048670644446)
2025-11-21 19:56:58.659 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:56:58.717 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:56:58.717 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:56:58.717 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:56:58.717 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56482582116419, 127.0048670644446), 반경: 500m
2025-11-21 19:56:58.803 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:56:58.803 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 148건
2025-11-21 19:56:58.805 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:56:58.805 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:56:58.805 [http-nio-8185-exec-8] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:56:58.805 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:56:58.805 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:56:58.805 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:56:58.805 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:56:58.805 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.805238700Z","nanoTime":28204819399600,"traceId":"b4a8da37","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":146484000,"duration_ms":146,"resultData":{"latitude":37.56482582116419,"longitude":127.0048670644446,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":146327600,"addressApiResult":{"cached":false,"cacheKey":"address:37.56482582116419:127.0048670644446","roadAddress":"주소 없음","jibunAddress":"서울 중구 광희동1가 235-6","responseSize":60,"executionTimeNs":58745700,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":56500,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56482582116419:127.0048670644446:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":7,"CS2":15,"SC4":1,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":5,"FD6":15,"PK6":15,"OL7":2,"PM9":10},"totalPlaces":148,"responseSize":17239,"executionTimeNs":87525400,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:58.805 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.805238700Z","nanoTime":28204819686600,"traceId":"b4a8da37","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:56:58.805 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:56:58.805 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:56:58.805 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 17개
2025-11-21 19:56:58.805 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 17개 (총 카메라 대수: 54대)
2025-11-21 19:56:58.805 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:56:58.886 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  을지로 234 (거리: 201m)
2025-11-21 19:56:58.886 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:56:58.886 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:56:58.886 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:56:58.886 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:56:58.887 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.886501900Z","nanoTime":28204901084100,"traceId":"b4a8da37","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":81397500,"duration_ms":81,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":17,"totalCctvAfterFilter":17,"totalCameraCount":54,"filterRate":1.0,"filterExecutionTimeNs":19900,"success":true},"policeQuery":{"queryDurationNs":80724600,"found":true,"nearestAddress":"서울특별시 중구  을지로 234","nearestDistance":200.86260097293732,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":7,"CS2":15,"SC4":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":5,"FD6":15,"PK6":15,"OL7":2,"PM9":10},"placesAfterFilter":{"CT1":14,"AT4":7,"CS2":15,"SC4":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":5,"FD6":15,"PK6":15,"OL7":2,"PM9":10},"totalBeforeFilter":148,"totalAfterFilter":147,"filterRate":0.9932432432432432,"filterExecutionTimeNs":228000,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:58.887 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.887428200Z","nanoTime":28204901403200,"traceId":"b4a8da37","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:56:58.887 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:56:58.887 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 45.13, 편의성: 40.55, 종합: 42.84
2025-11-21 19:56:58.887 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.887428200Z","nanoTime":28204901809800,"traceId":"b4a8da37","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":406600,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":74.89217487838283,"policeDistance":200.86260097293732,"cctvScore":56.666666666666664,"cctvCount":17,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":45.13431913018152,"success":true},"convenienceScore":{"categoryScores":{"CT1":56.0,"AT4":21.0,"CS2":3.75,"SC4":2.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":15.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":80.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":40.55357142857143,"success":true},"overallScore":42.84394527937647,"errorMessage":null,"success":true}}
2025-11-21 19:56:58.887 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.887428200Z","nanoTime":28204902047400,"traceId":"b4a8da37","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:56:58.887 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:56:58.887 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  을지로 234, latitude=37.566476, longitude=127.00394, geohashId=wydmdnc)
2025-11-21 19:56:58.888 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 200.86260097293732
2025-11-21 19:56:58.888 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdn6
2025-11-21 19:56:58.888 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:56:58.888 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:58.888437900Z","nanoTime":28204903883200,"traceId":"b4a8da37","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1835800,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["음식점이(가) 27m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdn6","dataSize":20259,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20259,"errorMessage":null,"success":true}}
2025-11-21 19:56:58.888 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:56:59.143 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:56:59.143 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56682574804281, longitude=127.00953064609158, radius=500)
2025-11-21 19:56:59.143 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:56:59.143 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56682574804281, longitude=127.00953064609158, radius=500
2025-11-21 19:56:59.143 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.143786500Z","nanoTime":28205157972500,"traceId":"dd9e5919","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:56:59.143 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:56:59.143 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56682574804281, lon=127.00953064609158
2025-11-21 19:56:59.143 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.143786500Z","nanoTime":28205158047000,"traceId":"dd9e5919","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:56:59.143 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.143786500Z","nanoTime":28205158089400,"traceId":"dd9e5919","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":42400,"duration_ms":0,"resultData":{"latitude":37.56682574804281,"longitude":127.00953064609158,"precision":7,"centerHash":"wydmdnv","adjacentHashes":["wydmdnv","wydmdpj","wydmdpn","wydmdny","wydmdnw","wydmdnt","wydmdns","wydmdnu","wydmdph"],"errorMessage":null,"success":true}}
2025-11-21 19:56:59.143 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdnv, wydmdpj, wydmdpn, wydmdny, wydmdnw, wydmdnt, wydmdns, wydmdnu, wydmdph]
2025-11-21 19:56:59.143 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdnv
2025-11-21 19:56:59.143 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.143786500Z","nanoTime":28205158189500,"traceId":"dd9e5919","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":217000,"duration_ms":0,"resultData":{"requestLatitude":37.56682574804281,"requestLongitude":127.00953064609158,"requestRadius":500,"centerGeohashId":"wydmdnv","nineBlockGeohashes":["wydmdnv","wydmdpj","wydmdpn","wydmdny","wydmdnw","wydmdnt","wydmdns","wydmdnu","wydmdph"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:56:59.143 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.143786500Z","nanoTime":28205158253300,"traceId":"dd9e5919","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:56:59.143 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:56:59.143 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdnv
2025-11-21 19:56:59.144 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4372ms)
2025-11-21 19:56:59.144 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:56:59.146 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:56:59.147 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 1개, 미스: 8개
2025-11-21 19:56:59.147 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.4471ms, 역직렬화: 0.0909ms
2025-11-21 19:56:59.147 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:56:59.147 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.147668600Z","nanoTime":28205161653000,"traceId":"dd9e5919","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3399700,"duration_ms":3,"resultData":{"centerGeohashId":"wydmdnv","nineBlockGeohashes":["wydmdnv","wydmdpj","wydmdpn","wydmdny","wydmdnw","wydmdnt","wydmdns","wydmdnu","wydmdph"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdnv","hit":false,"valueSize":0,"l1CacheGetDurationNs":437200,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdnv","cacheKey":"data:wydmdnv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":249300},{"geohashId":"wydmdpj","cacheKey":"data:wydmdpj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":375400},{"geohashId":"wydmdpn","cacheKey":"data:wydmdpn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":377400},{"geohashId":"wydmdny","cacheKey":"data:wydmdny:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":161600},{"geohashId":"wydmdnw","cacheKey":"data:wydmdnw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":158400},{"geohashId":"wydmdnt","cacheKey":"data:wydmdnt:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":179700},{"geohashId":"wydmdns","cacheKey":"data:wydmdns:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":312400},{"geohashId":"wydmdnu","cacheKey":"data:wydmdnu:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":132,"l2CacheGetDurationNs":286100},{"geohashId":"wydmdph","cacheKey":"data:wydmdph:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":149100}],"l2TotalHits":1,"l2TotalMisses":8,"l2CacheTotalDurationNs":2447100,"l2JsonDeserializeTotalDurationNs":90900,"errorMessage":null,"success":true}}
2025-11-21 19:56:59.147 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.147668600Z","nanoTime":28205161940900,"traceId":"dd9e5919","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:56:59.147 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:56:59.147 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 8개
2025-11-21 19:56:59.153 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 16건
2025-11-21 19:56:59.155 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:56:59.155 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 6개
2025-11-21 19:56:59.155 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.155295900Z","nanoTime":28205169361400,"traceId":"dd9e5919","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":7420500,"duration_ms":7,"resultData":{"inputCctvMissGrids":["wydmdnv","wydmdpj","wydmdpn","wydmdny","wydmdnw","wydmdnt","wydmdns","wydmdph"],"cctvQueryResult":{"queryGeohashIds":["wydmdnv","wydmdpj","wydmdpn","wydmdny","wydmdnw","wydmdnt","wydmdns","wydmdph"],"totalRowsReturned":16,"rowsPerGrid":{"wydmdpn":1,"wydmdph":2,"wydmdnw":5,"wydmdpj":2,"wydmdnt":6},"queryExecutionTimeNs":5212600,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdpn","cacheKey":"data:wydmdpn:cctv","dataCount":1,"dataSize":128,"errorMessage":null,"success":true},{"geohashId":"wydmdph","cacheKey":"data:wydmdph:cctv","dataCount":2,"dataSize":262,"errorMessage":null,"success":true},{"geohashId":"wydmdnw","cacheKey":"data:wydmdnw:cctv","dataCount":5,"dataSize":550,"errorMessage":null,"success":true},{"geohashId":"wydmdpj","cacheKey":"data:wydmdpj:cctv","dataCount":2,"dataSize":262,"errorMessage":null,"success":true},{"geohashId":"wydmdnt","cacheKey":"data:wydmdnt:cctv","dataCount":6,"dataSize":742,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:56:59.155 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.155295900Z","nanoTime":28205169523800,"traceId":"dd9e5919","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:56:59.155 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:56:59.155 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56682574804281, 127.00953064609158)
2025-11-21 19:56:59.155 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:56:59.222 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:56:59.222 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:56:59.230 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:56:59.230 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56682574804281, 127.00953064609158), 반경: 500m
2025-11-21 19:56:59.316 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:56:59.316 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 157건
2025-11-21 19:56:59.319 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:56:59.319 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:56:59.319 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 중구
2025-11-21 19:56:59.319 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 중구
2025-11-21 19:56:59.319 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:56:59.319 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:56:59.319 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:56:59.319 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.866910799
2025-11-21 19:56:59.319 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.319897500Z","nanoTime":28205335672800,"traceId":"dd9e5919","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":166149000,"duration_ms":166,"resultData":{"latitude":37.56682574804281,"longitude":127.00953064609158,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":165977800,"addressApiResult":{"cached":false,"cacheKey":"address:37.56682574804281:127.00953064609158","roadAddress":"서울특별시 중구 을지로 281","jibunAddress":"서울 중구 을지로7가 143","responseSize":69,"executionTimeNs":74115800,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:중구","guName":"중구","arrestRate":0.866910799,"dataFound":true,"executionTimeNs":901900,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56682574804281:127.00953064609158:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":11,"CS2":15,"SC4":4,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":4,"FD6":15,"PK6":15,"OL7":0,"PM9":13},"totalPlaces":157,"responseSize":18291,"executionTimeNs":90960100,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:59.319 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.319897500Z","nanoTime":28205336072500,"traceId":"dd9e5919","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:56:59.319 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:56:59.319 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:56:59.319 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 17개
2025-11-21 19:56:59.319 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 17개 (총 카메라 대수: 28대)
2025-11-21 19:56:59.319 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:56:59.406 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  퇴계로 375-1 (거리: 381m)
2025-11-21 19:56:59.406 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:56:59.406 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:56:59.406 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:56:59.406 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:56:59.406 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.406392Z","nanoTime":28205422023500,"traceId":"dd9e5919","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":85951000,"duration_ms":85,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":17,"totalCctvAfterFilter":17,"totalCameraCount":28,"filterRate":1.0,"filterExecutionTimeNs":26900,"success":true},"policeQuery":{"queryDurationNs":85374700,"found":true,"nearestAddress":"서울특별시 중구  퇴계로 375-1","nearestDistance":380.7842459946506,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":11,"CS2":15,"SC4":4,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":4,"FD6":15,"PK6":15,"PM9":13},"placesAfterFilter":{"CT1":15,"AT4":11,"CS2":15,"SC4":4,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":4,"FD6":15,"PK6":15,"PM9":13},"totalBeforeFilter":157,"totalAfterFilter":157,"filterRate":1.0,"filterExecutionTimeNs":152700,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:59.408 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.408402400Z","nanoTime":28205422178700,"traceId":"dd9e5919","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:56:59.408 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:56:59.408 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 64.39, 편의성: 43.89, 종합: 54.14
2025-11-21 19:56:59.408 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.408402400Z","nanoTime":28205422386800,"traceId":"dd9e5919","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":208100,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":52.40196925066868,"policeDistance":380.7842459946506,"cctvScore":56.666666666666664,"cctvCount":17,"arrestRateScore":86.6910799,"arrestRate":0.866910799,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":64.39458141186728,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":33.0,"CS2":11.431706982486624,"SC4":8.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":12.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"중구","guPopulation":131214,"finalScore":43.887979070177614,"success":true},"overallScore":54.14128024102244,"errorMessage":null,"success":true}}
2025-11-21 19:56:59.408 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.408402400Z","nanoTime":28205422503300,"traceId":"dd9e5919","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:56:59.408 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:56:59.408 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  퇴계로 375-1, latitude=37.565271, longitude=127.01338, geohashId=wydmdq8)
2025-11-21 19:56:59.408 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 380.7842459946506
2025-11-21 19:56:59.408 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdnv
2025-11-21 19:56:59.408 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:56:59.408 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.408961600Z","nanoTime":28205423869400,"traceId":"dd9e5919","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1366100,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["문화시설이(가) 3m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdnv","dataSize":21173,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":21173,"errorMessage":null,"success":true}}
2025-11-21 19:56:59.408 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:56:59.517 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:56:59.517 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56669889302073, longitude=127.0161183099635, radius=500)
2025-11-21 19:56:59.517 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:56:59.517 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56669889302073, longitude=127.0161183099635, radius=500
2025-11-21 19:56:59.517 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.517765500Z","nanoTime":28205532133800,"traceId":"25d0ee7a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:56:59.517 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:56:59.517 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56669889302073, lon=127.0161183099635
2025-11-21 19:56:59.517 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.517765500Z","nanoTime":28205532208000,"traceId":"25d0ee7a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:56:59.517 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.517765500Z","nanoTime":28205532237000,"traceId":"25d0ee7a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":29000,"duration_ms":0,"resultData":{"latitude":37.56669889302073,"longitude":127.0161183099635,"precision":7,"centerHash":"wydmdqf","adjacentHashes":["wydmdqf","wydmdr4","wydmdr5","wydmdqg","wydmdqe","wydmdqd","wydmdq9","wydmdqc","wydmdr1"],"errorMessage":null,"success":true}}
2025-11-21 19:56:59.517 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdqf, wydmdr4, wydmdr5, wydmdqg, wydmdqe, wydmdqd, wydmdq9, wydmdqc, wydmdr1]
2025-11-21 19:56:59.517 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdqf
2025-11-21 19:56:59.517 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.517765500Z","nanoTime":28205532324400,"traceId":"25d0ee7a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":190600,"duration_ms":0,"resultData":{"requestLatitude":37.56669889302073,"requestLongitude":127.0161183099635,"requestRadius":500,"centerGeohashId":"wydmdqf","nineBlockGeohashes":["wydmdqf","wydmdr4","wydmdr5","wydmdqg","wydmdqe","wydmdqd","wydmdq9","wydmdqc","wydmdr1"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:56:59.517 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.517765500Z","nanoTime":28205532358100,"traceId":"25d0ee7a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:56:59.517 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:56:59.517 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdqf
2025-11-21 19:56:59.518 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3492ms)
2025-11-21 19:56:59.518 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:56:59.520 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:56:59.520 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:56:59.520 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.524ms, 역직렬화: 0.0ms
2025-11-21 19:56:59.520 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:56:59.520 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.520159800Z","nanoTime":28205534468500,"traceId":"25d0ee7a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2110400,"duration_ms":2,"resultData":{"centerGeohashId":"wydmdqf","nineBlockGeohashes":["wydmdqf","wydmdr4","wydmdr5","wydmdqg","wydmdqe","wydmdqd","wydmdq9","wydmdqc","wydmdr1"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdqf","hit":false,"valueSize":0,"l1CacheGetDurationNs":349200,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdqf","cacheKey":"data:wydmdqf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":187200},{"geohashId":"wydmdr4","cacheKey":"data:wydmdr4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":138900},{"geohashId":"wydmdr5","cacheKey":"data:wydmdr5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":146600},{"geohashId":"wydmdqg","cacheKey":"data:wydmdqg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":153100},{"geohashId":"wydmdqe","cacheKey":"data:wydmdqe:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":196500},{"geohashId":"wydmdqd","cacheKey":"data:wydmdqd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":153600},{"geohashId":"wydmdq9","cacheKey":"data:wydmdq9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":140800},{"geohashId":"wydmdqc","cacheKey":"data:wydmdqc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":211000},{"geohashId":"wydmdr1","cacheKey":"data:wydmdr1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":124700}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1524000,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:56:59.520 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.520834500Z","nanoTime":28205534777500,"traceId":"25d0ee7a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:56:59.520 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:56:59.520 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:56:59.525 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 20건
2025-11-21 19:56:59.528 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:56:59.528 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:56:59.528 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.528393600Z","nanoTime":28205542396000,"traceId":"25d0ee7a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":7618500,"duration_ms":7,"resultData":{"inputCctvMissGrids":["wydmdqf","wydmdr4","wydmdr5","wydmdqg","wydmdqe","wydmdqd","wydmdq9","wydmdqc","wydmdr1"],"cctvQueryResult":{"queryGeohashIds":["wydmdqf","wydmdr4","wydmdr5","wydmdqg","wydmdqe","wydmdqd","wydmdq9","wydmdqc","wydmdr1"],"totalRowsReturned":20,"rowsPerGrid":{"wydmdq9":1,"wydmdqd":1,"wydmdr5":5,"wydmdqe":1,"wydmdqf":4,"wydmdqg":4,"wydmdr1":2,"wydmdqc":1,"wydmdr4":1},"queryExecutionTimeNs":4981000,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdq9","cacheKey":"data:wydmdq9:cctv","dataCount":1,"dataSize":131,"errorMessage":null,"success":true},{"geohashId":"wydmdqd","cacheKey":"data:wydmdqd:cctv","dataCount":1,"dataSize":130,"errorMessage":null,"success":true},{"geohashId":"wydmdr5","cacheKey":"data:wydmdr5:cctv","dataCount":5,"dataSize":634,"errorMessage":null,"success":true},{"geohashId":"wydmdqe","cacheKey":"data:wydmdqe:cctv","dataCount":1,"dataSize":129,"errorMessage":null,"success":true},{"geohashId":"wydmdqf","cacheKey":"data:wydmdqf:cctv","dataCount":4,"dataSize":513,"errorMessage":null,"success":true},{"geohashId":"wydmdqg","cacheKey":"data:wydmdqg:cctv","dataCount":4,"dataSize":517,"errorMessage":null,"success":true},{"geohashId":"wydmdr1","cacheKey":"data:wydmdr1:cctv","dataCount":2,"dataSize":259,"errorMessage":null,"success":true},{"geohashId":"wydmdqc","cacheKey":"data:wydmdqc:cctv","dataCount":1,"dataSize":133,"errorMessage":null,"success":true},{"geohashId":"wydmdr4","cacheKey":"data:wydmdr4:cctv","dataCount":1,"dataSize":133,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:56:59.528 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.528393600Z","nanoTime":28205542559600,"traceId":"25d0ee7a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:56:59.528 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:56:59.528 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56669889302073, 127.0161183099635)
2025-11-21 19:56:59.528 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:56:59.603 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:56:59.603 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:56:59.603 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:56:59.603 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56669889302073, 127.0161183099635), 반경: 500m
2025-11-21 19:56:59.693 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:56:59.693 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 155건
2025-11-21 19:56:59.695 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:56:59.695 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:56:59.695 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 중구
2025-11-21 19:56:59.695 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 중구
2025-11-21 19:56:59.697 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:56:59.697 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:56:59.697 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:56:59.697 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.866910799
2025-11-21 19:56:59.697 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.697903Z","nanoTime":28205711767900,"traceId":"25d0ee7a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":169208300,"duration_ms":169,"resultData":{"latitude":37.56669889302073,"longitude":127.0161183099635,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":169025600,"addressApiResult":{"cached":false,"cacheKey":"address:37.56669889302073:127.0161183099635","roadAddress":"서울특별시 중구 다산로 지하 260","jibunAddress":"서울 중구 흥인동 162-1","responseSize":72,"executionTimeNs":76461800,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:중구","guName":"중구","arrestRate":0.866910799,"dataFound":true,"executionTimeNs":801600,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56669889302073:127.0161183099635:500","categoryCount":15,"placesByCategory":{"CT1":11,"AT4":8,"CS2":15,"SC4":5,"MT1":1,"BK9":15,"HP8":15,"AC5":12,"CE7":15,"SW8":2,"PO3":9,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"totalPlaces":155,"responseSize":17888,"executionTimeNs":91762200,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:59.697 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.697903Z","nanoTime":28205712064100,"traceId":"25d0ee7a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:56:59.697 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:56:59.697 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:56:59.697 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 20개
2025-11-21 19:56:59.697 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 20개 (총 카메라 대수: 70대)
2025-11-21 19:56:59.697 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:56:59.786 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: "서울특별시 중구  다산로 248 (신당동, 신당파출소)" (거리: 186m)
2025-11-21 19:56:59.786 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:56:59.786 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:56:59.786 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:56:59.786 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:56:59.786 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.786653500Z","nanoTime":28205801304300,"traceId":"25d0ee7a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":89240200,"duration_ms":89,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":20,"totalCctvAfterFilter":20,"totalCameraCount":70,"filterRate":1.0,"filterExecutionTimeNs":18000,"success":true},"policeQuery":{"queryDurationNs":88631300,"found":true,"nearestAddress":"\"서울특별시 중구  다산로 248 (신당동, 신당파출소)\"","nearestDistance":185.92992676389008,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":11,"AT4":8,"CS2":15,"SC4":5,"MT1":1,"BK9":15,"HP8":15,"AC5":12,"CE7":15,"SW8":2,"PO3":9,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"placesAfterFilter":{"CT1":11,"AT4":8,"CS2":15,"SC4":5,"MT1":1,"BK9":15,"HP8":15,"AC5":12,"CE7":15,"SW8":2,"PO3":9,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"totalBeforeFilter":155,"totalAfterFilter":155,"filterRate":1.0,"filterExecutionTimeNs":173500,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:56:59.786 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.786653500Z","nanoTime":28205801520200,"traceId":"25d0ee7a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:56:59.786 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:56:59.786 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 75.70, 편의성: 40.90, 종합: 58.30
2025-11-21 19:56:59.786 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.786653500Z","nanoTime":28205801783400,"traceId":"25d0ee7a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":263200,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":76.75875915451374,"policeDistance":185.92992676389008,"cctvScore":66.66666666666666,"cctvCount":20,"arrestRateScore":86.6910799,"arrestRate":0.866910799,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":75.70161838302079,"success":true},"convenienceScore":{"categoryScores":{"CT1":44.0,"AT4":24.0,"CS2":11.431706982486624,"SC4":10.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":12.0,"CE7":30.0,"SW8":100.0,"PO3":27.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"중구","guPopulation":131214,"finalScore":40.89544713216578,"success":true},"overallScore":58.29853275759328,"errorMessage":null,"success":true}}
2025-11-21 19:56:59.786 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.786653500Z","nanoTime":28205801920900,"traceId":"25d0ee7a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:56:59.786 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:56:59.786 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address="서울특별시 중구  다산로 248 (신당동, 신당파출소)", latitude=37.56504, longitude=127.016383, geohashId=wydmdqd)
2025-11-21 19:56:59.786 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 185.92992676389008
2025-11-21 19:56:59.786 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdqf
2025-11-21 19:56:59.786 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:56:59.786 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.786653500Z","nanoTime":28205803310300,"traceId":"25d0ee7a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1389400,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["약국이(가) 37m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdqf","dataSize":21182,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":21182,"errorMessage":null,"success":true}}
2025-11-21 19:56:59.786 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:56:59.940 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:56:59.940 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56415809024006, longitude=127.01607248791521, radius=500)
2025-11-21 19:56:59.940 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:56:59.940 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56415809024006, longitude=127.01607248791521, radius=500
2025-11-21 19:56:59.940 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.940111400Z","nanoTime":28205954165000,"traceId":"dda54457","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:56:59.940 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:56:59.940 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56415809024006, lon=127.01607248791521
2025-11-21 19:56:59.940 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.940111400Z","nanoTime":28205954255400,"traceId":"dda54457","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:56:59.940 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.940111400Z","nanoTime":28205954301800,"traceId":"dda54457","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":46400,"duration_ms":0,"resultData":{"latitude":37.56415809024006,"longitude":127.01607248791521,"precision":7,"centerHash":"wydmdq6","adjacentHashes":["wydmdq6","wydmdqd","wydmdqe","wydmdq7","wydmdq5","wydmdq4","wydmdq1","wydmdq3","wydmdq9"],"errorMessage":null,"success":true}}
2025-11-21 19:56:59.940 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdq6, wydmdqd, wydmdqe, wydmdq7, wydmdq5, wydmdq4, wydmdq1, wydmdq3, wydmdq9]
2025-11-21 19:56:59.940 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdq6
2025-11-21 19:56:59.940 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.940111400Z","nanoTime":28205954429900,"traceId":"dda54457","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":264900,"duration_ms":0,"resultData":{"requestLatitude":37.56415809024006,"requestLongitude":127.01607248791521,"requestRadius":500,"centerGeohashId":"wydmdq6","nineBlockGeohashes":["wydmdq6","wydmdqd","wydmdqe","wydmdq7","wydmdq5","wydmdq4","wydmdq1","wydmdq3","wydmdq9"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:56:59.940 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.940111400Z","nanoTime":28205954490200,"traceId":"dda54457","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:56:59.940 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:56:59.940 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdq6
2025-11-21 19:56:59.941 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5904ms)
2025-11-21 19:56:59.941 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:56:59.944 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:56:59.944 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 5개, 미스: 4개
2025-11-21 19:56:59.944 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.9446ms, 역직렬화: 0.2874ms
2025-11-21 19:56:59.944 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:56:59.944 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.944204800Z","nanoTime":28205958455400,"traceId":"dda54457","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3965200,"duration_ms":3,"resultData":{"centerGeohashId":"wydmdq6","nineBlockGeohashes":["wydmdq6","wydmdqd","wydmdqe","wydmdq7","wydmdq5","wydmdq4","wydmdq1","wydmdq3","wydmdq9"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdq6","hit":false,"valueSize":0,"l1CacheGetDurationNs":590400,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdq6","cacheKey":"data:wydmdq6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":274700},{"geohashId":"wydmdqd","cacheKey":"data:wydmdqd:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":130,"l2CacheGetDurationNs":473600},{"geohashId":"wydmdqe","cacheKey":"data:wydmdqe:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":129,"l2CacheGetDurationNs":246400},{"geohashId":"wydmdq7","cacheKey":"data:wydmdq7:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":651,"l2CacheGetDurationNs":409500},{"geohashId":"wydmdq5","cacheKey":"data:wydmdq5:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":649,"l2CacheGetDurationNs":408100},{"geohashId":"wydmdq4","cacheKey":"data:wydmdq4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":125000},{"geohashId":"wydmdq1","cacheKey":"data:wydmdq1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":117500},{"geohashId":"wydmdq3","cacheKey":"data:wydmdq3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":122500},{"geohashId":"wydmdq9","cacheKey":"data:wydmdq9:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":131,"l2CacheGetDurationNs":360800}],"l2TotalHits":5,"l2TotalMisses":4,"l2CacheTotalDurationNs":2944600,"l2JsonDeserializeTotalDurationNs":287400,"errorMessage":null,"success":true}}
2025-11-21 19:56:59.944 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.944204800Z","nanoTime":28205958653600,"traceId":"dda54457","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:56:59.944 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:56:59.944 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 4개
2025-11-21 19:56:59.947 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 12건
2025-11-21 19:56:59.948 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:56:59.948 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:56:59.948 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.948986Z","nanoTime":28205962839800,"traceId":"dda54457","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4186200,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmdq6","wydmdq4","wydmdq1","wydmdq3"],"cctvQueryResult":{"queryGeohashIds":["wydmdq6","wydmdq4","wydmdq1","wydmdq3"],"totalRowsReturned":12,"rowsPerGrid":{"wydmdq4":2,"wydmdq6":3,"wydmdq1":5,"wydmdq3":2},"queryExecutionTimeNs":2664600,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdq4","cacheKey":"data:wydmdq4:cctv","dataCount":2,"dataSize":258,"errorMessage":null,"success":true},{"geohashId":"wydmdq6","cacheKey":"data:wydmdq6:cctv","dataCount":3,"dataSize":384,"errorMessage":null,"success":true},{"geohashId":"wydmdq1","cacheKey":"data:wydmdq1:cctv","dataCount":5,"dataSize":644,"errorMessage":null,"success":true},{"geohashId":"wydmdq3","cacheKey":"data:wydmdq3:cctv","dataCount":2,"dataSize":256,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:56:59.948 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:56:59.948986Z","nanoTime":28205962952500,"traceId":"dda54457","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:56:59.948 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:56:59.948 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56415809024006, 127.01607248791521)
2025-11-21 19:56:59.948 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:57:00.030 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:57:00.032 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:57:00.032 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:57:00.032 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56415809024006, 127.01607248791521), 반경: 500m
2025-11-21 19:57:00.108 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:57:00.108 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 152건
2025-11-21 19:57:00.109 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:57:00.109 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:57:00.109 [http-nio-8185-exec-1] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:57:00.109 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:57:00.109 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:57:00.109 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:57:00.109 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:57:00.110 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.110142900Z","nanoTime":28206123899900,"traceId":"dda54457","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":160947400,"duration_ms":160,"resultData":{"latitude":37.56415809024006,"longitude":127.01607248791521,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":160822200,"addressApiResult":{"cached":false,"cacheKey":"address:37.56415809024006:127.01607248791521","roadAddress":"주소 없음","jibunAddress":"서울 중구 신당동 100","responseSize":56,"executionTimeNs":83237200,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":52400,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56415809024006:127.01607248791521:500","categoryCount":15,"placesByCategory":{"CT1":8,"AT4":7,"CS2":15,"SC4":6,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":6,"FD6":15,"PK6":15,"OL7":2,"PM9":13},"totalPlaces":152,"responseSize":17428,"executionTimeNs":77532600,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:00.110 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.110142900Z","nanoTime":28206124234100,"traceId":"dda54457","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:57:00.110 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:57:00.110 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:57:00.110 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 25개
2025-11-21 19:57:00.110 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 25개 (총 카메라 대수: 70대)
2025-11-21 19:57:00.110 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:57:00.190 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: "서울특별시 중구  다산로 248 (신당동, 신당파출소)" (거리: 102m)
2025-11-21 19:57:00.190 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:57:00.190 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:57:00.190 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:57:00.190 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:57:00.190 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.190858700Z","nanoTime":28206205236100,"traceId":"dda54457","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":81002000,"duration_ms":81,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":25,"totalCctvAfterFilter":25,"totalCameraCount":70,"filterRate":1.0,"filterExecutionTimeNs":21000,"success":true},"policeQuery":{"queryDurationNs":80169400,"found":true,"nearestAddress":"\"서울특별시 중구  다산로 248 (신당동, 신당파출소)\"","nearestDistance":101.8114521595137,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":8,"AT4":7,"CS2":15,"SC4":6,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":6,"FD6":15,"PK6":15,"OL7":2,"PM9":13},"placesAfterFilter":{"CT1":8,"AT4":7,"CS2":15,"SC4":6,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":6,"FD6":15,"PK6":15,"OL7":2,"PM9":13},"totalBeforeFilter":152,"totalAfterFilter":152,"filterRate":1.0,"filterExecutionTimeNs":225000,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:00.190 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.190858700Z","nanoTime":28206205467800,"traceId":"dda54457","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:57:00.190 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:57:00.190 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 59.52, 편의성: 39.12, 종합: 49.32
2025-11-21 19:57:00.190 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.190858700Z","nanoTime":28206205742200,"traceId":"dda54457","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":274400,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":87.27356848006079,"policeDistance":101.8114521595137,"cctvScore":83.33333333333334,"cctvCount":25,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":59.515403877351574,"success":true},"convenienceScore":{"categoryScores":{"CT1":32.0,"AT4":21.0,"CS2":3.75,"SC4":12.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":18.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":39.11666666666667,"success":true},"overallScore":49.31603527200912,"errorMessage":null,"success":true}}
2025-11-21 19:57:00.190 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.190858700Z","nanoTime":28206205888400,"traceId":"dda54457","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:57:00.190 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:57:00.190 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address="서울특별시 중구  다산로 248 (신당동, 신당파출소)", latitude=37.56504, longitude=127.016383, geohashId=wydmdqd)
2025-11-21 19:57:00.190 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 101.8114521595137
2025-11-21 19:57:00.190 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdq6
2025-11-21 19:57:00.190 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:57:00.190 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.190858700Z","nanoTime":28206207344400,"traceId":"dda54457","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1456000,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["은행이(가) 41m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdq6","dataSize":21082,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":21082,"errorMessage":null,"success":true}}
2025-11-21 19:57:00.190 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:57:00.323 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:57:00.323 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.561365535019235, longitude=127.0114993227065, radius=500)
2025-11-21 19:57:00.323 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:57:00.323 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.561365535019235, longitude=127.0114993227065, radius=500
2025-11-21 19:57:00.323 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.323990200Z","nanoTime":28206338424200,"traceId":"cfd3243b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:57:00.323 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:57:00.323 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.561365535019235, lon=127.0114993227065
2025-11-21 19:57:00.323 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.323990200Z","nanoTime":28206338500000,"traceId":"cfd3243b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:57:00.323 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.323990200Z","nanoTime":28206338544300,"traceId":"cfd3243b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":44300,"duration_ms":0,"resultData":{"latitude":37.561365535019235,"longitude":127.0114993227065,"precision":7,"centerHash":"wydmdjy","adjacentHashes":["wydmdjy","wydmdnn","wydmdnp","wydmdjz","wydmdjx","wydmdjw","wydmdjt","wydmdjv","wydmdnj"],"errorMessage":null,"success":true}}
2025-11-21 19:57:00.323 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdjy, wydmdnn, wydmdnp, wydmdjz, wydmdjx, wydmdjw, wydmdjt, wydmdjv, wydmdnj]
2025-11-21 19:57:00.323 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdjy
2025-11-21 19:57:00.323 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.323990200Z","nanoTime":28206338654300,"traceId":"cfd3243b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":230100,"duration_ms":0,"resultData":{"requestLatitude":37.561365535019235,"requestLongitude":127.0114993227065,"requestRadius":500,"centerGeohashId":"wydmdjy","nineBlockGeohashes":["wydmdjy","wydmdnn","wydmdnp","wydmdjz","wydmdjx","wydmdjw","wydmdjt","wydmdjv","wydmdnj"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:57:00.323 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.323990200Z","nanoTime":28206338706000,"traceId":"cfd3243b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:57:00.323 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:57:00.324 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdjy
2025-11-21 19:57:00.325 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4288ms)
2025-11-21 19:57:00.325 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:57:00.327 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:57:00.328 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 6개, 미스: 3개
2025-11-21 19:57:00.328 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.8169ms, 역직렬화: 0.2945ms
2025-11-21 19:57:00.328 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:57:00.328 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.328403100Z","nanoTime":28206342324800,"traceId":"cfd3243b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3618800,"duration_ms":3,"resultData":{"centerGeohashId":"wydmdjy","nineBlockGeohashes":["wydmdjy","wydmdnn","wydmdnp","wydmdjz","wydmdjx","wydmdjw","wydmdjt","wydmdjv","wydmdnj"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdjy","hit":false,"valueSize":0,"l1CacheGetDurationNs":428800,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdjy","cacheKey":"data:wydmdjy:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":648,"l2CacheGetDurationNs":442300},{"geohashId":"wydmdnn","cacheKey":"data:wydmdnn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":158300},{"geohashId":"wydmdnp","cacheKey":"data:wydmdnp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":145300},{"geohashId":"wydmdjz","cacheKey":"data:wydmdjz:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":521,"l2CacheGetDurationNs":303500},{"geohashId":"wydmdjx","cacheKey":"data:wydmdjx:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":522,"l2CacheGetDurationNs":280400},{"geohashId":"wydmdjw","cacheKey":"data:wydmdjw:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":257,"l2CacheGetDurationNs":268300},{"geohashId":"wydmdjt","cacheKey":"data:wydmdjt:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":131,"l2CacheGetDurationNs":314600},{"geohashId":"wydmdjv","cacheKey":"data:wydmdjv:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":649,"l2CacheGetDurationNs":375000},{"geohashId":"wydmdnj","cacheKey":"data:wydmdnj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":129700}],"l2TotalHits":6,"l2TotalMisses":3,"l2CacheTotalDurationNs":2816900,"l2JsonDeserializeTotalDurationNs":294500,"errorMessage":null,"success":true}}
2025-11-21 19:57:00.328 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.328403100Z","nanoTime":28206342504800,"traceId":"cfd3243b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:57:00.328 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:57:00.328 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 3개
2025-11-21 19:57:00.331 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 12건
2025-11-21 19:57:00.332 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:57:00.332 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:57:00.332 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.332974800Z","nanoTime":28206347185000,"traceId":"cfd3243b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4680200,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmdnn","wydmdnp","wydmdnj"],"cctvQueryResult":{"queryGeohashIds":["wydmdnn","wydmdnp","wydmdnj"],"totalRowsReturned":12,"rowsPerGrid":{"wydmdnj":7,"wydmdnn":3,"wydmdnp":2},"queryExecutionTimeNs":3159800,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdnj","cacheKey":"data:wydmdnj:cctv","dataCount":7,"dataSize":907,"errorMessage":null,"success":true},{"geohashId":"wydmdnn","cacheKey":"data:wydmdnn:cctv","dataCount":3,"dataSize":389,"errorMessage":null,"success":true},{"geohashId":"wydmdnp","cacheKey":"data:wydmdnp:cctv","dataCount":2,"dataSize":261,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:57:00.332 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.332974800Z","nanoTime":28206347360100,"traceId":"cfd3243b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:57:00.332 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:57:00.332 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.561365535019235, 127.0114993227065)
2025-11-21 19:57:00.332 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:57:00.390 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:57:00.390 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:57:00.390 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:57:00.390 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.561365535019235, 127.0114993227065), 반경: 500m
2025-11-21 19:57:00.473 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:57:00.473 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 135건
2025-11-21 19:57:00.475 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:57:00.475 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:57:00.475 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 중구
2025-11-21 19:57:00.475 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 중구
2025-11-21 19:57:00.475 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:57:00.475 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:57:00.475 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:57:00.475 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.866910799
2025-11-21 19:57:00.475 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.475765100Z","nanoTime":28206490874300,"traceId":"cfd3243b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":143514200,"duration_ms":143,"resultData":{"latitude":37.561365535019235,"longitude":127.0114993227065,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":143380500,"addressApiResult":{"cached":false,"cacheKey":"address:37.561365535019235:127.0114993227065","roadAddress":"서울특별시 중구 청구로16길 7","jibunAddress":"서울 중구 신당동 390-4","responseSize":70,"executionTimeNs":59134400,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:중구","guName":"중구","arrestRate":0.866910799,"dataFound":true,"executionTimeNs":711700,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.561365535019235:127.0114993227065:500","categoryCount":15,"placesByCategory":{"CT1":2,"AT4":3,"CS2":15,"SC4":5,"MT1":1,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":5,"FD6":15,"PK6":15,"OL7":3,"PM9":10},"totalPlaces":135,"responseSize":15550,"executionTimeNs":83534400,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:00.475 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.475765100Z","nanoTime":28206491095700,"traceId":"cfd3243b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:57:00.475 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:57:00.475 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:57:00.475 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 33개
2025-11-21 19:57:00.475 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 33개 (총 카메라 대수: 81대)
2025-11-21 19:57:00.475 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:57:00.548 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  퇴계로 375-1 (거리: 465m)
2025-11-21 19:57:00.548 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:57:00.548 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:57:00.548 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:57:00.548 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:57:00.548 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.548691Z","nanoTime":28206562604400,"traceId":"cfd3243b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":71508700,"duration_ms":71,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":33,"totalCctvAfterFilter":33,"totalCameraCount":81,"filterRate":1.0,"filterExecutionTimeNs":25300,"success":true},"policeQuery":{"queryDurationNs":70823100,"found":true,"nearestAddress":"서울특별시 중구  퇴계로 375-1","nearestDistance":464.83028176865696,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":2,"AT4":3,"CS2":15,"SC4":5,"MT1":1,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":5,"FD6":15,"PK6":15,"OL7":3,"PM9":10},"placesAfterFilter":{"CT1":2,"AT4":3,"CS2":15,"SC4":5,"MT1":1,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":5,"FD6":15,"PK6":15,"OL7":3,"PM9":10},"totalBeforeFilter":135,"totalAfterFilter":135,"filterRate":1.0,"filterExecutionTimeNs":206400,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:00.548 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.548691Z","nanoTime":28206562901200,"traceId":"cfd3243b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:57:00.548 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:57:00.548 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 78.58, 편의성: 35.56, 종합: 57.07
2025-11-21 19:57:00.548 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.548691Z","nanoTime":28206563279900,"traceId":"cfd3243b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":378700,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":41.89621477891788,"policeDistance":464.83028176865696,"cctvScore":100.0,"cctvCount":33,"arrestRateScore":86.6910799,"arrestRate":0.866910799,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":78.57618840367536,"success":true},"convenienceScore":{"categoryScores":{"CT1":8.0,"AT4":9.0,"CS2":11.431706982486624,"SC4":10.0,"MT1":10.0,"BK9":70.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":15.0,"FD6":15.0,"PK6":45.0,"OL7":15.0,"PM9":80.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"중구","guPopulation":131214,"finalScore":35.56211379883244,"success":true},"overallScore":57.0691511012539,"errorMessage":null,"success":true}}
2025-11-21 19:57:00.548 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.548691Z","nanoTime":28206563420200,"traceId":"cfd3243b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:57:00.548 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:57:00.548 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  퇴계로 375-1, latitude=37.565271, longitude=127.01338, geohashId=wydmdq8)
2025-11-21 19:57:00.548 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 464.83028176865696
2025-11-21 19:57:00.548 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdjy
2025-11-21 19:57:00.548 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:57:00.548 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.548691Z","nanoTime":28206564565600,"traceId":"cfd3243b","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1145400,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 75m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdjy","dataSize":20254,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20254,"errorMessage":null,"success":true}}
2025-11-21 19:57:00.548 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:57:00.737 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:57:00.737 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.560248713396774, longitude=127.00586275615936, radius=500)
2025-11-21 19:57:00.737 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:57:00.737 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.560248713396774, longitude=127.00586275615936, radius=500
2025-11-21 19:57:00.737 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.737706100Z","nanoTime":28206752265000,"traceId":"14eaafae","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:57:00.737 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:57:00.737 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.560248713396774, lon=127.00586275615936
2025-11-21 19:57:00.737 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.737706100Z","nanoTime":28206752373800,"traceId":"14eaafae","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:57:00.738 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.738667Z","nanoTime":28206752439800,"traceId":"14eaafae","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":66000,"duration_ms":0,"resultData":{"latitude":37.560248713396774,"longitude":127.00586275615936,"precision":7,"centerHash":"wydmdjd","adjacentHashes":["wydmdjd","wydmdjf","wydmdjg","wydmdje","wydmdj7","wydmdj6","wydmdj3","wydmdj9","wydmdjc"],"errorMessage":null,"success":true}}
2025-11-21 19:57:00.738 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdjd, wydmdjf, wydmdjg, wydmdje, wydmdj7, wydmdj6, wydmdj3, wydmdj9, wydmdjc]
2025-11-21 19:57:00.738 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdjd
2025-11-21 19:57:00.738 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.738667Z","nanoTime":28206752700700,"traceId":"14eaafae","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":435700,"duration_ms":0,"resultData":{"requestLatitude":37.560248713396774,"requestLongitude":127.00586275615936,"requestRadius":500,"centerGeohashId":"wydmdjd","nineBlockGeohashes":["wydmdjd","wydmdjf","wydmdjg","wydmdje","wydmdj7","wydmdj6","wydmdj3","wydmdj9","wydmdjc"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:57:00.738 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.738667Z","nanoTime":28206752768500,"traceId":"14eaafae","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:57:00.738 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:57:00.738 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdjd
2025-11-21 19:57:00.738 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5568ms)
2025-11-21 19:57:00.738 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:57:00.742 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:57:00.742 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 6개, 미스: 3개
2025-11-21 19:57:00.742 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 3.5853ms, 역직렬화: 0.4261ms
2025-11-21 19:57:00.743 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:57:00.743 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.743516Z","nanoTime":28206757302400,"traceId":"14eaafae","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":4533900,"duration_ms":4,"resultData":{"centerGeohashId":"wydmdjd","nineBlockGeohashes":["wydmdjd","wydmdjf","wydmdjg","wydmdje","wydmdj7","wydmdj6","wydmdj3","wydmdj9","wydmdjc"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdjd","hit":false,"valueSize":0,"l1CacheGetDurationNs":556800,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdjd","cacheKey":"data:wydmdjd:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":133,"l2CacheGetDurationNs":635000},{"geohashId":"wydmdjf","cacheKey":"data:wydmdjf:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":656,"l2CacheGetDurationNs":384100},{"geohashId":"wydmdjg","cacheKey":"data:wydmdjg:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":393,"l2CacheGetDurationNs":480400},{"geohashId":"wydmdje","cacheKey":"data:wydmdje:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":132,"l2CacheGetDurationNs":479200},{"geohashId":"wydmdj7","cacheKey":"data:wydmdj7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":180100},{"geohashId":"wydmdj6","cacheKey":"data:wydmdj6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":126400},{"geohashId":"wydmdj3","cacheKey":"data:wydmdj3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":104500},{"geohashId":"wydmdj9","cacheKey":"data:wydmdj9:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":266,"l2CacheGetDurationNs":317600},{"geohashId":"wydmdjc","cacheKey":"data:wydmdjc:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":525,"l2CacheGetDurationNs":281700}],"l2TotalHits":6,"l2TotalMisses":3,"l2CacheTotalDurationNs":3585300,"l2JsonDeserializeTotalDurationNs":426100,"errorMessage":null,"success":true}}
2025-11-21 19:57:00.743 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.743516Z","nanoTime":28206757484000,"traceId":"14eaafae","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:57:00.743 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:57:00.743 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 3개
2025-11-21 19:57:00.746 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 0건
2025-11-21 19:57:00.746 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:57:00.746 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 6개
2025-11-21 19:57:00.746 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.746502100Z","nanoTime":28206760447500,"traceId":"14eaafae","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":2963500,"duration_ms":2,"resultData":{"inputCctvMissGrids":["wydmdj7","wydmdj6","wydmdj3"],"cctvQueryResult":{"queryGeohashIds":["wydmdj7","wydmdj6","wydmdj3"],"totalRowsReturned":0,"rowsPerGrid":{},"queryExecutionTimeNs":2701500,"errorMessage":null,"success":true},"cctvCacheWrites":[],"errorMessage":null,"success":true}}
2025-11-21 19:57:00.746 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.746502100Z","nanoTime":28206760694300,"traceId":"14eaafae","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:57:00.746 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:57:00.746 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.560248713396774, 127.00586275615936)
2025-11-21 19:57:00.746 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:57:00.816 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:57:00.816 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:57:00.816 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:57:00.816 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.560248713396774, 127.00586275615936), 반경: 500m
2025-11-21 19:57:00.900 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:57:00.900 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 128건
2025-11-21 19:57:00.908 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:57:00.908 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:57:00.908 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 중구
2025-11-21 19:57:00.908 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 중구
2025-11-21 19:57:00.908 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:57:00.908 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:57:00.908 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:57:00.908 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.866910799
2025-11-21 19:57:00.908 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.908640800Z","nanoTime":28206923248400,"traceId":"14eaafae","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":162554100,"duration_ms":162,"resultData":{"latitude":37.560248713396774,"longitude":127.00586275615936,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":162409300,"addressApiResult":{"cached":false,"cacheKey":"address:37.560248713396774:127.00586275615936","roadAddress":"서울특별시 중구 장충단로 174","jibunAddress":"서울 중구 장충동1가 62-18","responseSize":72,"executionTimeNs":74573300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:중구","guName":"중구","arrestRate":0.866910799,"dataFound":true,"executionTimeNs":772100,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.560248713396774:127.00586275615936:500","categoryCount":15,"placesByCategory":{"CT1":9,"AT4":3,"CS2":15,"SC4":3,"MT1":0,"BK9":15,"HP8":9,"AC5":15,"CE7":15,"SW8":2,"PO3":7,"FD6":15,"PK6":15,"OL7":2,"PM9":3},"totalPlaces":128,"responseSize":14857,"executionTimeNs":87063900,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:00.908 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.908640800Z","nanoTime":28206923542500,"traceId":"14eaafae","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:57:00.908 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:57:00.908 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:57:00.908 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 16개
2025-11-21 19:57:00.908 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 16개 (총 카메라 대수: 31대)
2025-11-21 19:57:00.908 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:57:00.990 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  동호로 261 (거리: 190m)
2025-11-21 19:57:00.990 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:57:00.990 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:57:00.990 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:57:00.990 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:57:00.990 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.990146600Z","nanoTime":28207006543200,"traceId":"14eaafae","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":83000700,"duration_ms":83,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":16,"totalCctvAfterFilter":16,"totalCameraCount":31,"filterRate":1.0,"filterExecutionTimeNs":11800,"success":true},"policeQuery":{"queryDurationNs":82401500,"found":true,"nearestAddress":"서울특별시 중구  동호로 261","nearestDistance":189.51505925666987,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":9,"AT4":3,"CS2":15,"SC4":3,"BK9":15,"HP8":9,"AC5":15,"CE7":15,"SW8":2,"PO3":7,"FD6":15,"PK6":15,"OL7":2,"PM9":3},"placesAfterFilter":{"CT1":9,"AT4":3,"CS2":15,"SC4":3,"BK9":15,"HP8":9,"AC5":15,"CE7":15,"SW8":2,"PO3":7,"FD6":15,"PK6":15,"OL7":2,"PM9":3},"totalBeforeFilter":128,"totalAfterFilter":128,"filterRate":1.0,"filterExecutionTimeNs":159600,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:00.990 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.990146600Z","nanoTime":28207006808600,"traceId":"14eaafae","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:57:00.990 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:57:00.990 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 70.23, 편의성: 35.53, 종합: 52.88
2025-11-21 19:57:00.990 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.990146600Z","nanoTime":28207007415500,"traceId":"14eaafae","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":606900,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":76.31061759291626,"policeDistance":189.51505925666987,"cctvScore":53.333333333333336,"cctvCount":16,"arrestRateScore":86.6910799,"arrestRate":0.866910799,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":70.23384258120822,"success":true},"convenienceScore":{"categoryScores":{"CT1":36.0,"AT4":9.0,"CS2":11.431706982486624,"SC4":6.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":21.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":24.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"중구","guPopulation":131214,"finalScore":35.53083621303476,"success":true},"overallScore":52.88233939712149,"errorMessage":null,"success":true}}
2025-11-21 19:57:00.990 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.990146600Z","nanoTime":28207007669400,"traceId":"14eaafae","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:57:00.990 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:57:00.990 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  동호로 261, latitude=37.558764, longitude=127.004807, geohashId=wydmdj6)
2025-11-21 19:57:00.990 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 189.51505925666987
2025-11-21 19:57:00.994 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdjd
2025-11-21 19:57:00.994 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:57:00.994 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:00.994183400Z","nanoTime":28207009262800,"traceId":"14eaafae","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1593400,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["음식점이(가) 3m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdjd","dataSize":17895,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17895,"errorMessage":null,"success":true}}
2025-11-21 19:57:00.994 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:57:01.074 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:57:01.074 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56066331725919, longitude=126.9997510012543, radius=500)
2025-11-21 19:57:01.074 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:57:01.074 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56066331725919, longitude=126.9997510012543, radius=500
2025-11-21 19:57:01.074 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.074204700Z","nanoTime":28207088845500,"traceId":"6f446f22","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:57:01.074 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:57:01.074 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56066331725919, lon=126.9997510012543
2025-11-21 19:57:01.074 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.074204700Z","nanoTime":28207088931300,"traceId":"6f446f22","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:57:01.075 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.075204200Z","nanoTime":28207088977000,"traceId":"6f446f22","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":45700,"duration_ms":0,"resultData":{"latitude":37.56066331725919,"longitude":126.9997510012543,"precision":7,"centerHash":"wydm9vw","adjacentHashes":["wydm9vw","wydm9vy","wydm9vz","wydm9vx","wydm9vr","wydm9vq","wydm9vm","wydm9vt","wydm9vv"],"errorMessage":null,"success":true}}
2025-11-21 19:57:01.075 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9vw, wydm9vy, wydm9vz, wydm9vx, wydm9vr, wydm9vq, wydm9vm, wydm9vt, wydm9vv]
2025-11-21 19:57:01.075 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9vw
2025-11-21 19:57:01.075 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.075204200Z","nanoTime":28207089103500,"traceId":"6f446f22","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":258000,"duration_ms":0,"resultData":{"requestLatitude":37.56066331725919,"requestLongitude":126.9997510012543,"requestRadius":500,"centerGeohashId":"wydm9vw","nineBlockGeohashes":["wydm9vw","wydm9vy","wydm9vz","wydm9vx","wydm9vr","wydm9vq","wydm9vm","wydm9vt","wydm9vv"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:57:01.075 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.075204200Z","nanoTime":28207089147500,"traceId":"6f446f22","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:57:01.075 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:57:01.075 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9vw
2025-11-21 19:57:01.075 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4733ms)
2025-11-21 19:57:01.075 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:57:01.078 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:57:01.078 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 6개, 미스: 3개
2025-11-21 19:57:01.078 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 3.4458ms, 역직렬화: 0.3475ms
2025-11-21 19:57:01.078 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:57:01.079 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.078805400Z","nanoTime":28207093532000,"traceId":"6f446f22","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":4384500,"duration_ms":4,"resultData":{"centerGeohashId":"wydm9vw","nineBlockGeohashes":["wydm9vw","wydm9vy","wydm9vz","wydm9vx","wydm9vr","wydm9vq","wydm9vm","wydm9vt","wydm9vv"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9vw","hit":false,"valueSize":0,"l1CacheGetDurationNs":473300,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9vw","cacheKey":"data:wydm9vw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":283100},{"geohashId":"wydm9vy","cacheKey":"data:wydm9vy:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":259,"l2CacheGetDurationNs":456300},{"geohashId":"wydm9vz","cacheKey":"data:wydm9vz:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":648,"l2CacheGetDurationNs":408200},{"geohashId":"wydm9vx","cacheKey":"data:wydm9vx:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":519,"l2CacheGetDurationNs":295900},{"geohashId":"wydm9vr","cacheKey":"data:wydm9vr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":152100},{"geohashId":"wydm9vq","cacheKey":"data:wydm9vq:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":134,"l2CacheGetDurationNs":356300},{"geohashId":"wydm9vm","cacheKey":"data:wydm9vm:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":262,"l2CacheGetDurationNs":447000},{"geohashId":"wydm9vt","cacheKey":"data:wydm9vt:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":131,"l2CacheGetDurationNs":346100},{"geohashId":"wydm9vv","cacheKey":"data:wydm9vv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":193300}],"l2TotalHits":6,"l2TotalMisses":3,"l2CacheTotalDurationNs":3445800,"l2JsonDeserializeTotalDurationNs":347500,"errorMessage":null,"success":true}}
2025-11-21 19:57:01.079 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.079803200Z","nanoTime":28207093750800,"traceId":"6f446f22","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:57:01.079 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:57:01.079 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 3개
2025-11-21 19:57:01.081 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 8건
2025-11-21 19:57:01.083 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:57:01.083 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:57:01.083 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.083864800Z","nanoTime":28207098136600,"traceId":"6f446f22","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4385800,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydm9vw","wydm9vr","wydm9vv"],"cctvQueryResult":{"queryGeohashIds":["wydm9vw","wydm9vr","wydm9vv"],"totalRowsReturned":8,"rowsPerGrid":{"wydm9vr":5,"wydm9vv":3},"queryExecutionTimeNs":3012400,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9vr","cacheKey":"data:wydm9vr:cctv","dataCount":5,"dataSize":664,"errorMessage":null,"success":true},{"geohashId":"wydm9vv","cacheKey":"data:wydm9vv:cctv","dataCount":3,"dataSize":389,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:57:01.083 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.083864800Z","nanoTime":28207098262900,"traceId":"6f446f22","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:57:01.083 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:57:01.083 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56066331725919, 126.9997510012543)
2025-11-21 19:57:01.083 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:57:01.153 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:57:01.153 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:57:01.153 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:57:01.153 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56066331725919, 126.9997510012543), 반경: 500m
2025-11-21 19:57:01.246 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:57:01.246 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 145건
2025-11-21 19:57:01.248 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:57:01.248 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:57:01.248 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 중구
2025-11-21 19:57:01.249 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 중구
2025-11-21 19:57:01.249 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:57:01.249 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:57:01.249 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:57:01.249 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.866910799
2025-11-21 19:57:01.250 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.249639400Z","nanoTime":28207263853300,"traceId":"6f446f22","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":165590400,"duration_ms":165,"resultData":{"latitude":37.56066331725919,"longitude":126.9997510012543,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":165407200,"addressApiResult":{"cached":false,"cacheKey":"address:37.56066331725919:126.9997510012543","roadAddress":"서울특별시 중구 서애로1길 34","jibunAddress":"서울 중구 묵정동 11-67","responseSize":70,"executionTimeNs":71155500,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:중구","guName":"중구","arrestRate":0.866910799,"dataFound":true,"executionTimeNs":1065200,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56066331725919:126.9997510012543:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":5,"CS2":15,"SC4":2,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":9,"FD6":15,"PK6":15,"OL7":1,"PM9":7},"totalPlaces":145,"responseSize":16697,"executionTimeNs":93186500,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:01.250 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.250212800Z","nanoTime":28207264270500,"traceId":"6f446f22","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:57:01.250 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:57:01.250 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:57:01.250 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 23개
2025-11-21 19:57:01.250 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 23개 (총 카메라 대수: 65대)
2025-11-21 19:57:01.250 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:57:01.322 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  동호로 261 (거리: 493m)
2025-11-21 19:57:01.322 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:57:01.322 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:57:01.322 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:57:01.322 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:57:01.322 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.322389200Z","nanoTime":28207339823500,"traceId":"6f446f22","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":75553000,"duration_ms":75,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":23,"totalCctvAfterFilter":23,"totalCameraCount":65,"filterRate":1.0,"filterExecutionTimeNs":19100,"success":true},"policeQuery":{"queryDurationNs":74950800,"found":true,"nearestAddress":"서울특별시 중구  동호로 261","nearestDistance":493.17598806216637,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":5,"CS2":15,"SC4":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":9,"FD6":15,"PK6":15,"OL7":1,"PM9":7},"placesAfterFilter":{"CT1":15,"AT4":5,"CS2":15,"SC4":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":9,"FD6":15,"PK6":15,"OL7":1,"PM9":7},"totalBeforeFilter":145,"totalAfterFilter":145,"filterRate":1.0,"filterExecutionTimeNs":155300,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:01.322 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.322389200Z","nanoTime":28207340021300,"traceId":"6f446f22","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:57:01.322 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:57:01.322 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 68.18, 편의성: 39.89, 종합: 54.03
2025-11-21 19:57:01.322 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.322389200Z","nanoTime":28207340401100,"traceId":"6f446f22","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":379800,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":38.353001492229204,"policeDistance":493.17598806216637,"cctvScore":76.66666666666667,"cctvCount":23,"arrestRateScore":86.6910799,"arrestRate":0.866910799,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":68.17989108433544,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":15.0,"CS2":11.431706982486624,"SC4":4.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":27.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":56.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"중구","guPopulation":131214,"finalScore":39.887979070177614,"success":true},"overallScore":54.03393507725653,"errorMessage":null,"success":true}}
2025-11-21 19:57:01.322 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.322389200Z","nanoTime":28207340542200,"traceId":"6f446f22","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:57:01.322 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:57:01.322 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  동호로 261, latitude=37.558764, longitude=127.004807, geohashId=wydmdj6)
2025-11-21 19:57:01.322 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 493.17598806216637
2025-11-21 19:57:01.328 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9vw
2025-11-21 19:57:01.328 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:57:01.328 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.328056300Z","nanoTime":28207342023200,"traceId":"6f446f22","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1481000,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["병원이(가) 32m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydm9vw","dataSize":20231,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20231,"errorMessage":null,"success":true}}
2025-11-21 19:57:01.328 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:57:01.414 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:57:01.414 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5623570012168, longitude=126.99329951844211, radius=500)
2025-11-21 19:57:01.414 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:57:01.414 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5623570012168, longitude=126.99329951844211, radius=500
2025-11-21 19:57:01.414 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.414431700Z","nanoTime":28207428580900,"traceId":"078609b3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:57:01.414 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:57:01.414 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5623570012168, lon=126.99329951844211
2025-11-21 19:57:01.414 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.414431700Z","nanoTime":28207428657200,"traceId":"078609b3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:57:01.414 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.414431700Z","nanoTime":28207428702100,"traceId":"078609b3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":44900,"duration_ms":0,"resultData":{"latitude":37.5623570012168,"longitude":126.99329951844211,"precision":7,"centerHash":"wydm9y1","adjacentHashes":["wydm9y1","wydm9y3","wydm9y6","wydm9y4","wydm9vf","wydm9vc","wydm9vb","wydm9y0","wydm9y2"],"errorMessage":null,"success":true}}
2025-11-21 19:57:01.414 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9y1, wydm9y3, wydm9y6, wydm9y4, wydm9vf, wydm9vc, wydm9vb, wydm9y0, wydm9y2]
2025-11-21 19:57:01.414 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9y1
2025-11-21 19:57:01.414 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.414431700Z","nanoTime":28207428800500,"traceId":"078609b3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":219600,"duration_ms":0,"resultData":{"requestLatitude":37.5623570012168,"requestLongitude":126.99329951844211,"requestRadius":500,"centerGeohashId":"wydm9y1","nineBlockGeohashes":["wydm9y1","wydm9y3","wydm9y6","wydm9y4","wydm9vf","wydm9vc","wydm9vb","wydm9y0","wydm9y2"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:57:01.414 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.414431700Z","nanoTime":28207428845200,"traceId":"078609b3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:57:01.414 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:57:01.414 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9y1
2025-11-21 19:57:01.415 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3285ms)
2025-11-21 19:57:01.415 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:57:01.417 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:57:01.418 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 3개, 미스: 6개
2025-11-21 19:57:01.418 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.2818ms, 역직렬화: 0.3444ms
2025-11-21 19:57:01.418 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:57:01.418 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.418010600Z","nanoTime":28207431872800,"traceId":"078609b3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3027600,"duration_ms":3,"resultData":{"centerGeohashId":"wydm9y1","nineBlockGeohashes":["wydm9y1","wydm9y3","wydm9y6","wydm9y4","wydm9vf","wydm9vc","wydm9vb","wydm9y0","wydm9y2"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9y1","hit":false,"valueSize":0,"l1CacheGetDurationNs":328500,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9y1","cacheKey":"data:wydm9y1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":170300},{"geohashId":"wydm9y3","cacheKey":"data:wydm9y3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":172800},{"geohashId":"wydm9y6","cacheKey":"data:wydm9y6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":186100},{"geohashId":"wydm9y4","cacheKey":"data:wydm9y4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":154700},{"geohashId":"wydm9vf","cacheKey":"data:wydm9vf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":102200},{"geohashId":"wydm9vc","cacheKey":"data:wydm9vc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":108800},{"geohashId":"wydm9vb","cacheKey":"data:wydm9vb:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":388,"l2CacheGetDurationNs":256300},{"geohashId":"wydm9y0","cacheKey":"data:wydm9y0:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":128,"l2CacheGetDurationNs":229000},{"geohashId":"wydm9y2","cacheKey":"data:wydm9y2:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":513,"l2CacheGetDurationNs":456000}],"l2TotalHits":3,"l2TotalMisses":6,"l2CacheTotalDurationNs":2281800,"l2JsonDeserializeTotalDurationNs":344400,"errorMessage":null,"success":true}}
2025-11-21 19:57:01.418 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.418010600Z","nanoTime":28207432094500,"traceId":"078609b3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:57:01.418 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:57:01.418 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 6개
2025-11-21 19:57:01.420 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 7건
2025-11-21 19:57:01.422 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:57:01.422 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:57:01.422 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.422019400Z","nanoTime":28207435989700,"traceId":"078609b3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":3895200,"duration_ms":3,"resultData":{"inputCctvMissGrids":["wydm9y1","wydm9y3","wydm9y6","wydm9y4","wydm9vf","wydm9vc"],"cctvQueryResult":{"queryGeohashIds":["wydm9y1","wydm9y3","wydm9y6","wydm9y4","wydm9vf","wydm9vc"],"totalRowsReturned":7,"rowsPerGrid":{"wydm9y1":1,"wydm9vc":1,"wydm9y6":2,"wydm9y4":1,"wydm9y3":1,"wydm9vf":1},"queryExecutionTimeNs":2560900,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9y1","cacheKey":"data:wydm9y1:cctv","dataCount":1,"dataSize":132,"errorMessage":null,"success":true},{"geohashId":"wydm9vc","cacheKey":"data:wydm9vc:cctv","dataCount":1,"dataSize":129,"errorMessage":null,"success":true},{"geohashId":"wydm9y6","cacheKey":"data:wydm9y6:cctv","dataCount":2,"dataSize":261,"errorMessage":null,"success":true},{"geohashId":"wydm9y4","cacheKey":"data:wydm9y4:cctv","dataCount":1,"dataSize":130,"errorMessage":null,"success":true},{"geohashId":"wydm9y3","cacheKey":"data:wydm9y3:cctv","dataCount":1,"dataSize":128,"errorMessage":null,"success":true},{"geohashId":"wydm9vf","cacheKey":"data:wydm9vf:cctv","dataCount":1,"dataSize":130,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:57:01.422 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.422019400Z","nanoTime":28207436118600,"traceId":"078609b3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:57:01.422 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:57:01.422 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5623570012168, 126.99329951844211)
2025-11-21 19:57:01.422 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:57:01.471 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:57:01.471 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:57:01.471 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:57:01.471 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5623570012168, 126.99329951844211), 반경: 500m
2025-11-21 19:57:01.567 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:57:01.567 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 157건
2025-11-21 19:57:01.567 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:57:01.567 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:57:01.567 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 중구
2025-11-21 19:57:01.570 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 중구
2025-11-21 19:57:01.570 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:57:01.570 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:57:01.570 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:57:01.570 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.866910799
2025-11-21 19:57:01.570 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.570712800Z","nanoTime":28207585125600,"traceId":"078609b3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":149007000,"duration_ms":149,"resultData":{"latitude":37.5623570012168,"longitude":126.99329951844211,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":148828400,"addressApiResult":{"cached":false,"cacheKey":"address:37.5623570012168:126.99329951844211","roadAddress":"서울특별시 중구 충무로 14-1","jibunAddress":"서울 중구 충무로3가 38-17","responseSize":72,"executionTimeNs":51500500,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:중구","guName":"중구","arrestRate":0.866910799,"dataFound":true,"executionTimeNs":724400,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5623570012168:126.99329951844211:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":7,"CS2":15,"SC4":1,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":10,"FD6":15,"PK6":15,"OL7":1,"PM9":14},"totalPlaces":157,"responseSize":18051,"executionTimeNs":96603500,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:01.570 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.570712800Z","nanoTime":28207585511000,"traceId":"078609b3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:57:01.570 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:57:01.570 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:57:01.570 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 15개
2025-11-21 19:57:01.570 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 15개 (총 카메라 대수: 36대)
2025-11-21 19:57:01.570 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:57:01.637 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  퇴계로 178 (거리: 224m)
2025-11-21 19:57:01.637 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:57:01.637 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:57:01.637 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:57:01.637 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:57:01.637 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.637685200Z","nanoTime":28207651450100,"traceId":"078609b3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":65939100,"duration_ms":65,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":15,"totalCctvAfterFilter":15,"totalCameraCount":36,"filterRate":1.0,"filterExecutionTimeNs":12100,"success":true},"policeQuery":{"queryDurationNs":65436300,"found":true,"nearestAddress":"서울특별시 중구  퇴계로 178","nearestDistance":223.5439664754465,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":7,"CS2":15,"SC4":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":10,"FD6":15,"PK6":15,"OL7":1,"PM9":14},"placesAfterFilter":{"CT1":15,"AT4":7,"CS2":15,"SC4":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":10,"FD6":15,"PK6":15,"OL7":1,"PM9":14},"totalBeforeFilter":157,"totalAfterFilter":157,"filterRate":1.0,"filterExecutionTimeNs":146100,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:01.637 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.637685200Z","nanoTime":28207651612600,"traceId":"078609b3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:57:01.637 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:57:01.637 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 67.62, 편의성: 43.53, 종합: 55.58
2025-11-21 19:57:01.637 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.637685200Z","nanoTime":28207651830400,"traceId":"078609b3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":217800,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":72.05700419056919,"policeDistance":223.5439664754465,"cctvScore":50.0,"cctvCount":15,"arrestRateScore":86.6910799,"arrestRate":0.866910799,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":67.62442522717076,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":21.0,"CS2":11.431706982486624,"SC4":2.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":30.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"중구","guPopulation":131214,"finalScore":43.53083621303476,"success":true},"overallScore":55.57763072010276,"errorMessage":null,"success":true}}
2025-11-21 19:57:01.637 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.637685200Z","nanoTime":28207651956000,"traceId":"078609b3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:57:01.637 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:57:01.637 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  퇴계로 178, latitude=37.56088, longitude=126.991579, geohashId=wydm9v8)
2025-11-21 19:57:01.637 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 223.5439664754465
2025-11-21 19:57:01.637 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9y1
2025-11-21 19:57:01.637 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:57:01.639 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.637685200Z","nanoTime":28207653166200,"traceId":"078609b3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1210200,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["주차장이(가) 30m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydm9y1","dataSize":20484,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20484,"errorMessage":null,"success":true}}
2025-11-21 19:57:01.639 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:57:01.843 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:57:01.843 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56403228675088, longitude=126.98662137409207, radius=500)
2025-11-21 19:57:01.843 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:57:01.843 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56403228675088, longitude=126.98662137409207, radius=500
2025-11-21 19:57:01.843 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.843993800Z","nanoTime":28207858599600,"traceId":"a3c02158","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:57:01.843 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:57:01.843 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56403228675088, lon=126.98662137409207
2025-11-21 19:57:01.843 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.843993800Z","nanoTime":28207858690300,"traceId":"a3c02158","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:57:01.845 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.843993800Z","nanoTime":28207858737900,"traceId":"a3c02158","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":47600,"duration_ms":0,"resultData":{"latitude":37.56403228675088,"longitude":126.98662137409207,"precision":7,"centerHash":"wydm9wk","adjacentHashes":["wydm9wk","wydm9ws","wydm9wt","wydm9wm","wydm9wj","wydm9wh","wydm9w5","wydm9w7","wydm9we"],"errorMessage":null,"success":true}}
2025-11-21 19:57:01.845 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9wk, wydm9ws, wydm9wt, wydm9wm, wydm9wj, wydm9wh, wydm9w5, wydm9w7, wydm9we]
2025-11-21 19:57:01.845 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9wk
2025-11-21 19:57:01.845 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.845011800Z","nanoTime":28207858854300,"traceId":"a3c02158","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":254700,"duration_ms":0,"resultData":{"requestLatitude":37.56403228675088,"requestLongitude":126.98662137409207,"requestRadius":500,"centerGeohashId":"wydm9wk","nineBlockGeohashes":["wydm9wk","wydm9ws","wydm9wt","wydm9wm","wydm9wj","wydm9wh","wydm9w5","wydm9w7","wydm9we"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:57:01.845 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.845011800Z","nanoTime":28207858896000,"traceId":"a3c02158","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:57:01.845 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:57:01.845 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9wk
2025-11-21 19:57:01.845 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.2875ms)
2025-11-21 19:57:01.845 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:57:01.847 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:57:01.847 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 3개, 미스: 6개
2025-11-21 19:57:01.847 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.796ms, 역직렬화: 0.1316ms
2025-11-21 19:57:01.847 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:57:01.847 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.847105300Z","nanoTime":28207861246300,"traceId":"a3c02158","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2350300,"duration_ms":2,"resultData":{"centerGeohashId":"wydm9wk","nineBlockGeohashes":["wydm9wk","wydm9ws","wydm9wt","wydm9wm","wydm9wj","wydm9wh","wydm9w5","wydm9w7","wydm9we"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9wk","hit":false,"valueSize":0,"l1CacheGetDurationNs":287500,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9wk","cacheKey":"data:wydm9wk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":128600},{"geohashId":"wydm9ws","cacheKey":"data:wydm9ws:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":93200},{"geohashId":"wydm9wt","cacheKey":"data:wydm9wt:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":83100},{"geohashId":"wydm9wm","cacheKey":"data:wydm9wm:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":81100},{"geohashId":"wydm9wj","cacheKey":"data:wydm9wj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":93000},{"geohashId":"wydm9wh","cacheKey":"data:wydm9wh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":123900},{"geohashId":"wydm9w5","cacheKey":"data:wydm9w5:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":259,"l2CacheGetDurationNs":263900},{"geohashId":"wydm9w7","cacheKey":"data:wydm9w7:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":386,"l2CacheGetDurationNs":381100},{"geohashId":"wydm9we","cacheKey":"data:wydm9we:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":132,"l2CacheGetDurationNs":345100}],"l2TotalHits":3,"l2TotalMisses":6,"l2CacheTotalDurationNs":1796000,"l2JsonDeserializeTotalDurationNs":131600,"errorMessage":null,"success":true}}
2025-11-21 19:57:01.847 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.847105300Z","nanoTime":28207861378300,"traceId":"a3c02158","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:57:01.847 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:57:01.847 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 6개
2025-11-21 19:57:01.850 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 9건
2025-11-21 19:57:01.850 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:57:01.850 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 6개
2025-11-21 19:57:01.850 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.850805400Z","nanoTime":28207864972900,"traceId":"a3c02158","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":3594600,"duration_ms":3,"resultData":{"inputCctvMissGrids":["wydm9wk","wydm9ws","wydm9wt","wydm9wm","wydm9wj","wydm9wh"],"cctvQueryResult":{"queryGeohashIds":["wydm9wk","wydm9ws","wydm9wt","wydm9wm","wydm9wj","wydm9wh"],"totalRowsReturned":9,"rowsPerGrid":{"wydm9wk":2,"wydm9wm":6,"wydm9wt":1},"queryExecutionTimeNs":2612900,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9wk","cacheKey":"data:wydm9wk:cctv","dataCount":2,"dataSize":258,"errorMessage":null,"success":true},{"geohashId":"wydm9wm","cacheKey":"data:wydm9wm:cctv","dataCount":6,"dataSize":779,"errorMessage":null,"success":true},{"geohashId":"wydm9wt","cacheKey":"data:wydm9wt:cctv","dataCount":1,"dataSize":129,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:57:01.850 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:01.850805400Z","nanoTime":28207865070900,"traceId":"a3c02158","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:57:01.850 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:57:01.850 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56403228675088, 126.98662137409207)
2025-11-21 19:57:01.850 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:57:01.930 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:57:01.930 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:57:01.930 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:57:01.930 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56403228675088, 126.98662137409207), 반경: 500m
2025-11-21 19:57:02.011 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:57:02.011 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 162건
2025-11-21 19:57:02.013 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:57:02.013 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:57:02.013 [http-nio-8185-exec-6] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:57:02.013 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:57:02.013 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:57:02.013 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:57:02.013 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:57:02.013 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:02.013409Z","nanoTime":28208028832900,"traceId":"a3c02158","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":163762000,"duration_ms":163,"resultData":{"latitude":37.56403228675088,"longitude":126.98662137409207,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":163602700,"addressApiResult":{"cached":false,"cacheKey":"address:37.56403228675088:126.98662137409207","roadAddress":"주소 없음","jibunAddress":"서울 중구 명동2가 1-18","responseSize":58,"executionTimeNs":79563000,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":44900,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56403228675088:126.98662137409207:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":8,"CS2":15,"SC4":1,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":15,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":162,"responseSize":18708,"executionTimeNs":83994800,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:02.013 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:02.013409Z","nanoTime":28208029042900,"traceId":"a3c02158","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:57:02.013 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:57:02.013 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:57:02.013 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 15개
2025-11-21 19:57:02.013 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 15개 (총 카메라 대수: 46대)
2025-11-21 19:57:02.013 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:57:02.100 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  통일로 13 (거리: 239m)
2025-11-21 19:57:02.100 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:57:02.100 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:57:02.100 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 19:57:02.100 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:57:02.101 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:02.101486100Z","nanoTime":28208115247600,"traceId":"a3c02158","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":86204700,"duration_ms":86,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":15,"totalCctvAfterFilter":15,"totalCameraCount":46,"filterRate":1.0,"filterExecutionTimeNs":12500,"success":true},"policeQuery":{"queryDurationNs":85683800,"found":true,"nearestAddress":"서울특별시 중구  통일로 13","nearestDistance":239.48721309010074,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":8,"CS2":15,"SC4":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":15,"FD6":15,"PK6":15,"PM9":15},"placesAfterFilter":{"CT1":15,"AT4":8,"CS2":15,"SC4":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":15,"FD6":15,"PK6":15,"PM9":15},"totalBeforeFilter":162,"totalAfterFilter":162,"filterRate":1.0,"filterExecutionTimeNs":171800,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:02.101 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:02.101486100Z","nanoTime":28208115439600,"traceId":"a3c02158","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:57:02.101 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:57:02.101 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 41.02, 편의성: 47.29, 종합: 44.15
2025-11-21 19:57:02.101 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:02.101486100Z","nanoTime":28208115663500,"traceId":"a3c02158","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":223900,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":70.0640983637374,"policeDistance":239.48721309010074,"cctvScore":50.0,"cctvCount":15,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":41.01922950912122,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":24.0,"CS2":3.75,"SC4":2.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":45.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":47.28846153846154,"success":true},"overallScore":44.153845523791375,"errorMessage":null,"success":true}}
2025-11-21 19:57:02.101 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:02.101486100Z","nanoTime":28208115767300,"traceId":"a3c02158","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:57:02.101 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:57:02.101 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  통일로 13, latitude=37.563587, longitude=126.983963, geohashId=wydm9w4)
2025-11-21 19:57:02.101 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 239.48721309010074
2025-11-21 19:57:02.103 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9wk
2025-11-21 19:57:02.103 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:57:02.103 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:02.103463200Z","nanoTime":28208117289400,"traceId":"a3c02158","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1522100,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["약국이(가) 42m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm9wk","dataSize":21128,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":21128,"errorMessage":null,"success":true}}
2025-11-21 19:57:02.103 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:57:02.956 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:57:02.956 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.562140942131634, longitude=126.99846070462704, radius=500)
2025-11-21 19:57:02.956 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:57:02.956 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.562140942131634, longitude=126.99846070462704, radius=500
2025-11-21 19:57:02.956 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:02.956593100Z","nanoTime":28208972527000,"traceId":"51365065","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:57:02.956 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:57:02.956 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.562140942131634, lon=126.99846070462704
2025-11-21 19:57:02.956 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:02.956593100Z","nanoTime":28208972633800,"traceId":"51365065","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:57:02.956 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:02.956593100Z","nanoTime":28208972682900,"traceId":"51365065","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":49100,"duration_ms":0,"resultData":{"latitude":37.562140942131634,"longitude":126.99846070462704,"precision":7,"centerHash":"wydm9vv","adjacentHashes":["wydm9vv","wydm9yj","wydm9yn","wydm9vy","wydm9vw","wydm9vt","wydm9vs","wydm9vu","wydm9yh"],"errorMessage":null,"success":true}}
2025-11-21 19:57:02.956 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydm9vv, wydm9yj, wydm9yn, wydm9vy, wydm9vw, wydm9vt, wydm9vs, wydm9vu, wydm9yh]
2025-11-21 19:57:02.956 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydm9vv
2025-11-21 19:57:02.956 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:02.956593100Z","nanoTime":28208972808600,"traceId":"51365065","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":281600,"duration_ms":0,"resultData":{"requestLatitude":37.562140942131634,"requestLongitude":126.99846070462704,"requestRadius":500,"centerGeohashId":"wydm9vv","nineBlockGeohashes":["wydm9vv","wydm9yj","wydm9yn","wydm9vy","wydm9vw","wydm9vt","wydm9vs","wydm9vu","wydm9yh"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:57:02.956 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:02.956593100Z","nanoTime":28208972861000,"traceId":"51365065","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:57:02.956 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:57:02.956 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydm9vv
2025-11-21 19:57:02.956 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.402ms)
2025-11-21 19:57:02.956 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:57:02.963 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:57:02.963 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 5개, 미스: 4개
2025-11-21 19:57:02.963 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 5.4292ms, 역직렬화: 0.2836ms
2025-11-21 19:57:02.963 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:57:02.963 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:02.963992Z","nanoTime":28208979107400,"traceId":"51365065","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":6246400,"duration_ms":6,"resultData":{"centerGeohashId":"wydm9vv","nineBlockGeohashes":["wydm9vv","wydm9yj","wydm9yn","wydm9vy","wydm9vw","wydm9vt","wydm9vs","wydm9vu","wydm9yh"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydm9vv","hit":false,"valueSize":0,"l1CacheGetDurationNs":402000,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydm9vv","cacheKey":"data:wydm9vv:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":389,"l2CacheGetDurationNs":351400},{"geohashId":"wydm9yj","cacheKey":"data:wydm9yj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":218200},{"geohashId":"wydm9yn","cacheKey":"data:wydm9yn:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":131,"l2CacheGetDurationNs":2293500},{"geohashId":"wydm9vy","cacheKey":"data:wydm9vy:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":259,"l2CacheGetDurationNs":296600},{"geohashId":"wydm9vw","cacheKey":"data:wydm9vw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":119100},{"geohashId":"wydm9vt","cacheKey":"data:wydm9vt:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":131,"l2CacheGetDurationNs":239800},{"geohashId":"wydm9vs","cacheKey":"data:wydm9vs:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":385,"l2CacheGetDurationNs":511900},{"geohashId":"wydm9vu","cacheKey":"data:wydm9vu:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":737100},{"geohashId":"wydm9yh","cacheKey":"data:wydm9yh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":229300}],"l2TotalHits":5,"l2TotalMisses":4,"l2CacheTotalDurationNs":5429200,"l2JsonDeserializeTotalDurationNs":283600,"errorMessage":null,"success":true}}
2025-11-21 19:57:02.963 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:02.963992Z","nanoTime":28208979382300,"traceId":"51365065","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:57:02.963 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:57:02.963 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 4개
2025-11-21 19:57:02.973 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 5건
2025-11-21 19:57:02.974 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:57:02.975 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:57:02.975 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:02.975302600Z","nanoTime":28208989554700,"traceId":"51365065","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":10172400,"duration_ms":10,"resultData":{"inputCctvMissGrids":["wydm9yj","wydm9vw","wydm9vu","wydm9yh"],"cctvQueryResult":{"queryGeohashIds":["wydm9yj","wydm9vw","wydm9vu","wydm9yh"],"totalRowsReturned":5,"rowsPerGrid":{"wydm9yj":3,"wydm9vu":1,"wydm9yh":1},"queryExecutionTimeNs":7629600,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydm9yj","cacheKey":"data:wydm9yj:cctv","dataCount":3,"dataSize":386,"errorMessage":null,"success":true},{"geohashId":"wydm9vu","cacheKey":"data:wydm9vu:cctv","dataCount":1,"dataSize":129,"errorMessage":null,"success":true},{"geohashId":"wydm9yh","cacheKey":"data:wydm9yh:cctv","dataCount":1,"dataSize":132,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:57:02.975 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:02.975302600Z","nanoTime":28208989871400,"traceId":"51365065","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:57:02.975 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:57:02.975 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.562140942131634, 126.99846070462704)
2025-11-21 19:57:02.976 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:57:03.040 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:57:03.040 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:57:03.040 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:57:03.040 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.562140942131634, 126.99846070462704), 반경: 500m
2025-11-21 19:57:03.145 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:57:03.145 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 152건
2025-11-21 19:57:03.145 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:57:03.145 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:57:03.145 [http-nio-8185-exec-7] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:57:03.145 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:57:03.145 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:57:03.145 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:57:03.145 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:57:03.147 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.145756200Z","nanoTime":28209161496300,"traceId":"51365065","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":171624900,"duration_ms":171,"resultData":{"latitude":37.562140942131634,"longitude":126.99846070462704,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":171348200,"addressApiResult":{"cached":false,"cacheKey":"address:37.562140942131634:126.99846070462704","roadAddress":"주소 없음","jibunAddress":"서울 중구 충무로5가 55-20","responseSize":60,"executionTimeNs":71369600,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":48300,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.562140942131634:126.99846070462704:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":6,"CS2":15,"SC4":3,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":8,"FD6":15,"PK6":15,"OL7":2,"PM9":11},"totalPlaces":152,"responseSize":17502,"executionTimeNs":99930300,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:03.147 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.147766200Z","nanoTime":28209161755900,"traceId":"51365065","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:57:03.147 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:57:03.147 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:57:03.147 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 15개
2025-11-21 19:57:03.147 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 15개 (총 카메라 대수: 48대)
2025-11-21 19:57:03.147 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:57:03.241 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  퇴계로 178 (거리: 623m)
2025-11-21 19:57:03.241 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:57:03.241 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:57:03.242 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:57:03.242 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:57:03.242 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.242005400Z","nanoTime":28209256045200,"traceId":"51365065","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":94289300,"duration_ms":94,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":15,"totalCctvAfterFilter":15,"totalCameraCount":48,"filterRate":1.0,"filterExecutionTimeNs":14200,"success":true},"policeQuery":{"queryDurationNs":93691000,"found":true,"nearestAddress":"서울특별시 중구  퇴계로 178","nearestDistance":622.5758064181176,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":6,"CS2":15,"SC4":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":8,"FD6":15,"PK6":15,"OL7":2,"PM9":11},"placesAfterFilter":{"CT1":15,"AT4":6,"CS2":15,"SC4":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":8,"FD6":15,"PK6":15,"OL7":2,"PM9":11},"totalBeforeFilter":152,"totalAfterFilter":152,"filterRate":1.0,"filterExecutionTimeNs":193900,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:03.242 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.242345300Z","nanoTime":28209256288200,"traceId":"51365065","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:57:03.242 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:57:03.242 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 26.65, 편의성: 42.13, 종합: 34.39
2025-11-21 19:57:03.242 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.242345300Z","nanoTime":28209256581700,"traceId":"51365065","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":293500,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":22.178024197735297,"policeDistance":622.5758064181176,"cctvScore":50.0,"cctvCount":15,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":26.653407259320588,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":18.0,"CS2":3.75,"SC4":6.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":24.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":88.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":42.125,"success":true},"overallScore":34.389203629660294,"errorMessage":null,"success":true}}
2025-11-21 19:57:03.242 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.242345300Z","nanoTime":28209256706000,"traceId":"51365065","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:57:03.242 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:57:03.242 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  퇴계로 178, latitude=37.56088, longitude=126.991579, geohashId=wydm9v8)
2025-11-21 19:57:03.242 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 622.5758064181176
2025-11-21 19:57:03.242 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydm9vv
2025-11-21 19:57:03.242 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:57:03.242 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.242345300Z","nanoTime":28209258239700,"traceId":"51365065","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1533700,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["병원이(가) 50m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydm9vv","dataSize":20164,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20164,"errorMessage":null,"success":true}}
2025-11-21 19:57:03.242 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:57:03.358 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:57:03.358 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.561131745557354, longitude=127.00461782382963, radius=500)
2025-11-21 19:57:03.358 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:57:03.358 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.561131745557354, longitude=127.00461782382963, radius=500
2025-11-21 19:57:03.358 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.358741100Z","nanoTime":28209372858800,"traceId":"9af9b9fe","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:57:03.358 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:57:03.358 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.561131745557354, lon=127.00461782382963
2025-11-21 19:57:03.358 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.358741100Z","nanoTime":28209372911100,"traceId":"9af9b9fe","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:57:03.358 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.358741100Z","nanoTime":28209372940000,"traceId":"9af9b9fe","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":28900,"duration_ms":0,"resultData":{"latitude":37.561131745557354,"longitude":127.00461782382963,"precision":7,"centerHash":"wydmdjc","adjacentHashes":["wydmdjc","wydmdn1","wydmdn4","wydmdjf","wydmdjd","wydmdj9","wydmdj8","wydmdjb","wydmdn0"],"errorMessage":null,"success":true}}
2025-11-21 19:57:03.358 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdjc, wydmdn1, wydmdn4, wydmdjf, wydmdjd, wydmdj9, wydmdj8, wydmdjb, wydmdn0]
2025-11-21 19:57:03.358 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdjc
2025-11-21 19:57:03.358 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.358741100Z","nanoTime":28209373021100,"traceId":"9af9b9fe","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":162300,"duration_ms":0,"resultData":{"requestLatitude":37.561131745557354,"requestLongitude":127.00461782382963,"requestRadius":500,"centerGeohashId":"wydmdjc","nineBlockGeohashes":["wydmdjc","wydmdn1","wydmdn4","wydmdjf","wydmdjd","wydmdj9","wydmdj8","wydmdjb","wydmdn0"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:57:03.358 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.358741100Z","nanoTime":28209373054700,"traceId":"9af9b9fe","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:57:03.358 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:57:03.358 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdjc
2025-11-21 19:57:03.358 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3186ms)
2025-11-21 19:57:03.358 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:57:03.361 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:57:03.361 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 9개, 미스: 0개
2025-11-21 19:57:03.361 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 4.339ms, 역직렬화: 0.444ms
2025-11-21 19:57:03.361 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:57:03.364 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.361818600Z","nanoTime":28209378021700,"traceId":"9af9b9fe","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":4967000,"duration_ms":4,"resultData":{"centerGeohashId":"wydmdjc","nineBlockGeohashes":["wydmdjc","wydmdn1","wydmdn4","wydmdjf","wydmdjd","wydmdj9","wydmdj8","wydmdjb","wydmdn0"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdjc","hit":false,"valueSize":0,"l1CacheGetDurationNs":318600,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdjc","cacheKey":"data:wydmdjc:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":525,"l2CacheGetDurationNs":520800},{"geohashId":"wydmdn1","cacheKey":"data:wydmdn1:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":131,"l2CacheGetDurationNs":352400},{"geohashId":"wydmdn4","cacheKey":"data:wydmdn4:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":385,"l2CacheGetDurationNs":253100},{"geohashId":"wydmdjf","cacheKey":"data:wydmdjf:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":656,"l2CacheGetDurationNs":228900},{"geohashId":"wydmdjd","cacheKey":"data:wydmdjd:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":133,"l2CacheGetDurationNs":431500},{"geohashId":"wydmdj9","cacheKey":"data:wydmdj9:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":266,"l2CacheGetDurationNs":506400},{"geohashId":"wydmdj8","cacheKey":"data:wydmdj8:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":529,"l2CacheGetDurationNs":576500},{"geohashId":"wydmdjb","cacheKey":"data:wydmdjb:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":130,"l2CacheGetDurationNs":443800},{"geohashId":"wydmdn0","cacheKey":"data:wydmdn0:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":132,"l2CacheGetDurationNs":434600}],"l2TotalHits":9,"l2TotalMisses":0,"l2CacheTotalDurationNs":4339000,"l2JsonDeserializeTotalDurationNs":444000,"errorMessage":null,"success":true}}
2025-11-21 19:57:03.364 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.364286500Z","nanoTime":28209378338600,"traceId":"9af9b9fe","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:57:03.364 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:57:03.364 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터는 모두 캐시에서 조회됨
2025-11-21 19:57:03.364 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:57:03.364 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:57:03.364 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.364286500Z","nanoTime":28209378470600,"traceId":"9af9b9fe","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":132000,"duration_ms":0,"resultData":{"inputCctvMissGrids":[],"cctvQueryResult":null,"cctvCacheWrites":[],"errorMessage":null,"success":true}}
2025-11-21 19:57:03.364 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.364286500Z","nanoTime":28209378535000,"traceId":"9af9b9fe","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:57:03.364 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:57:03.364 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.561131745557354, 127.00461782382963)
2025-11-21 19:57:03.365 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:57:03.448 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:57:03.448 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:57:03.448 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:57:03.448 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.561131745557354, 127.00461782382963), 반경: 500m
2025-11-21 19:57:03.540 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:57:03.540 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 135건
2025-11-21 19:57:03.542 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:57:03.542 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:57:03.542 [http-nio-8185-exec-8] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:57:03.542 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:57:03.542 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:57:03.542 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:57:03.542 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:57:03.542 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.542685700Z","nanoTime":28209557590200,"traceId":"9af9b9fe","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":179055200,"duration_ms":179,"resultData":{"latitude":37.561131745557354,"longitude":127.00461782382963,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":178770000,"addressApiResult":{"cached":false,"cacheKey":"address:37.561131745557354:127.00461782382963","roadAddress":"주소 없음","jibunAddress":"서울 중구 장충동2가 39-1","responseSize":59,"executionTimeNs":87301600,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":104400,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.561131745557354:127.00461782382963:500","categoryCount":15,"placesByCategory":{"CT1":11,"AT4":5,"CS2":15,"SC4":2,"MT1":0,"BK9":15,"HP8":11,"AC5":15,"CE7":15,"SW8":2,"PO3":8,"FD6":15,"PK6":15,"OL7":2,"PM9":4},"totalPlaces":135,"responseSize":15690,"executionTimeNs":91364000,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:03.542 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.542685700Z","nanoTime":28209557871000,"traceId":"9af9b9fe","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:57:03.542 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:57:03.542 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:57:03.542 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 22개
2025-11-21 19:57:03.542 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 22개 (총 카메라 대수: 48대)
2025-11-21 19:57:03.542 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:57:03.625 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  동호로 261 (거리: 264m)
2025-11-21 19:57:03.625 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:57:03.625 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:57:03.625 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:57:03.625 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:57:03.625 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.625336900Z","nanoTime":28209648710900,"traceId":"9af9b9fe","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":90839900,"duration_ms":90,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":22,"totalCctvAfterFilter":22,"totalCameraCount":48,"filterRate":1.0,"filterExecutionTimeNs":24100,"success":true},"policeQuery":{"queryDurationNs":90028000,"found":true,"nearestAddress":"서울특별시 중구  동호로 261","nearestDistance":263.8088308194764,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":11,"AT4":5,"CS2":15,"SC4":2,"BK9":15,"HP8":11,"AC5":15,"CE7":15,"SW8":2,"PO3":8,"FD6":15,"PK6":15,"OL7":2,"PM9":4},"placesAfterFilter":{"CT1":11,"AT4":5,"CS2":15,"SC4":2,"BK9":15,"HP8":11,"AC5":15,"CE7":15,"SW8":2,"PO3":8,"FD6":15,"PK6":15,"OL7":2,"PM9":4},"totalBeforeFilter":135,"totalAfterFilter":135,"filterRate":1.0,"filterExecutionTimeNs":195500,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:03.625 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.625336900Z","nanoTime":28209648977000,"traceId":"9af9b9fe","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:57:03.625 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:57:03.625 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 49.44, 편의성: 36.63, 종합: 43.03
2025-11-21 19:57:03.625 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.625336900Z","nanoTime":28209649303200,"traceId":"9af9b9fe","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":326200,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":67.02389614756545,"policeDistance":263.8088308194764,"cctvScore":73.33333333333333,"cctvCount":22,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":49.440502177602966,"success":true},"convenienceScore":{"categoryScores":{"CT1":44.0,"AT4":15.0,"CS2":3.75,"SC4":4.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":24.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":32.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":36.625,"success":true},"overallScore":43.03275108880148,"errorMessage":null,"success":true}}
2025-11-21 19:57:03.625 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.625336900Z","nanoTime":28209649491200,"traceId":"9af9b9fe","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:57:03.625 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:57:03.625 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  동호로 261, latitude=37.558764, longitude=127.004807, geohashId=wydmdj6)
2025-11-21 19:57:03.625 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 263.8088308194764
2025-11-21 19:57:03.625 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdjc
2025-11-21 19:57:03.625 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:57:03.625 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.625336900Z","nanoTime":28209651182100,"traceId":"9af9b9fe","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1690900,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["음식점이(가) 36m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdjc","dataSize":19382,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19382,"errorMessage":null,"success":true}}
2025-11-21 19:57:03.625 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:57:03.709 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:57:03.709 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55981570237509, longitude=127.01265352016081, radius=500)
2025-11-21 19:57:03.709 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:57:03.709 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55981570237509, longitude=127.01265352016081, radius=500
2025-11-21 19:57:03.709 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.709255Z","nanoTime":28209723236000,"traceId":"e6113bf2","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:57:03.709 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:57:03.709 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55981570237509, lon=127.01265352016081
2025-11-21 19:57:03.709 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.709255Z","nanoTime":28209723310100,"traceId":"e6113bf2","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:57:03.709 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.709255Z","nanoTime":28209723354400,"traceId":"e6113bf2","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":44300,"duration_ms":0,"resultData":{"latitude":37.55981570237509,"longitude":127.01265352016081,"precision":7,"centerHash":"wydmdjx","adjacentHashes":["wydmdjx","wydmdjz","wydmdmb","wydmdm8","wydmdm2","wydmdjr","wydmdjq","wydmdjw","wydmdjy"],"errorMessage":null,"success":true}}
2025-11-21 19:57:03.709 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdjx, wydmdjz, wydmdmb, wydmdm8, wydmdm2, wydmdjr, wydmdjq, wydmdjw, wydmdjy]
2025-11-21 19:57:03.709 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdjx
2025-11-21 19:57:03.709 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.709255Z","nanoTime":28209723485900,"traceId":"e6113bf2","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":249900,"duration_ms":0,"resultData":{"requestLatitude":37.55981570237509,"requestLongitude":127.01265352016081,"requestRadius":500,"centerGeohashId":"wydmdjx","nineBlockGeohashes":["wydmdjx","wydmdjz","wydmdmb","wydmdm8","wydmdm2","wydmdjr","wydmdjq","wydmdjw","wydmdjy"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:57:03.709 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.709255Z","nanoTime":28209723540400,"traceId":"e6113bf2","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:57:03.709 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:57:03.709 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdjx
2025-11-21 19:57:03.709 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3426ms)
2025-11-21 19:57:03.710 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:57:03.712 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:57:03.712 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 8개, 미스: 1개
2025-11-21 19:57:03.712 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.798ms, 역직렬화: 0.2893ms
2025-11-21 19:57:03.712 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:57:03.712 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.712863400Z","nanoTime":28209727031200,"traceId":"e6113bf2","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3490800,"duration_ms":3,"resultData":{"centerGeohashId":"wydmdjx","nineBlockGeohashes":["wydmdjx","wydmdjz","wydmdmb","wydmdm8","wydmdm2","wydmdjr","wydmdjq","wydmdjw","wydmdjy"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdjx","hit":false,"valueSize":0,"l1CacheGetDurationNs":342600,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdjx","cacheKey":"data:wydmdjx:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":522,"l2CacheGetDurationNs":471700},{"geohashId":"wydmdjz","cacheKey":"data:wydmdjz:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":521,"l2CacheGetDurationNs":323100},{"geohashId":"wydmdmb","cacheKey":"data:wydmdmb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":91000},{"geohashId":"wydmdm8","cacheKey":"data:wydmdm8:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":648,"l2CacheGetDurationNs":272900},{"geohashId":"wydmdm2","cacheKey":"data:wydmdm2:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":521,"l2CacheGetDurationNs":190800},{"geohashId":"wydmdjr","cacheKey":"data:wydmdjr:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":389,"l2CacheGetDurationNs":298600},{"geohashId":"wydmdjq","cacheKey":"data:wydmdjq:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":389,"l2CacheGetDurationNs":250100},{"geohashId":"wydmdjw","cacheKey":"data:wydmdjw:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":257,"l2CacheGetDurationNs":254900},{"geohashId":"wydmdjy","cacheKey":"data:wydmdjy:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":648,"l2CacheGetDurationNs":261900}],"l2TotalHits":8,"l2TotalMisses":1,"l2CacheTotalDurationNs":2798000,"l2JsonDeserializeTotalDurationNs":289300,"errorMessage":null,"success":true}}
2025-11-21 19:57:03.712 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.712863400Z","nanoTime":28209727221500,"traceId":"e6113bf2","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:57:03.712 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:57:03.712 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 1개
2025-11-21 19:57:03.715 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 8건
2025-11-21 19:57:03.716 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:57:03.716 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:57:03.716 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.716739700Z","nanoTime":28209731022700,"traceId":"e6113bf2","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":3801200,"duration_ms":3,"resultData":{"inputCctvMissGrids":["wydmdmb"],"cctvQueryResult":{"queryGeohashIds":["wydmdmb"],"totalRowsReturned":8,"rowsPerGrid":{"wydmdmb":8},"queryExecutionTimeNs":3000200,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdmb","cacheKey":"data:wydmdmb:cctv","dataCount":8,"dataSize":1047,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:57:03.716 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.716739700Z","nanoTime":28209731163700,"traceId":"e6113bf2","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:57:03.716 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:57:03.716 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.55981570237509, 127.01265352016081)
2025-11-21 19:57:03.716 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:57:03.789 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:57:03.790 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:57:03.790 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:57:03.790 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.55981570237509, 127.01265352016081), 반경: 500m
2025-11-21 19:57:03.903 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:57:03.903 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 127건
2025-11-21 19:57:03.905 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:57:03.905 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:57:03.905 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 중구
2025-11-21 19:57:03.905 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 중구
2025-11-21 19:57:03.905 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:57:03.905 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:57:03.905 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:57:03.905 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.866910799
2025-11-21 19:57:03.905 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.905524200Z","nanoTime":28209920292500,"traceId":"e6113bf2","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":189128800,"duration_ms":189,"resultData":{"latitude":37.55981570237509,"longitude":127.01265352016081,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":188997800,"addressApiResult":{"cached":false,"cacheKey":"address:37.55981570237509:127.01265352016081","roadAddress":"서울특별시 중구 동호로12길 110-5","jibunAddress":"서울 중구 신당동 308-55","responseSize":75,"executionTimeNs":72776800,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:중구","guName":"중구","arrestRate":0.866910799,"dataFound":true,"executionTimeNs":453600,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.55981570237509:127.01265352016081:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":3,"CS2":15,"SC4":3,"MT1":1,"BK9":13,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":6,"FD6":15,"PK6":15,"OL7":1,"PM9":7},"totalPlaces":127,"responseSize":14673,"executionTimeNs":115767400,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:03.905 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.905524200Z","nanoTime":28209920508400,"traceId":"e6113bf2","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:57:03.905 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:57:03.905 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:57:03.905 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 38개
2025-11-21 19:57:03.905 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 38개 (총 카메라 대수: 135대)
2025-11-21 19:57:03.905 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:57:03.981 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  퇴계로 375-1 (거리: 610m)
2025-11-21 19:57:03.981 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:57:03.981 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:57:03.981 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:57:03.981 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:57:03.981 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.981102200Z","nanoTime":28209998549000,"traceId":"e6113bf2","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":78040600,"duration_ms":78,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":38,"totalCctvAfterFilter":38,"totalCameraCount":135,"filterRate":1.0,"filterExecutionTimeNs":21700,"success":true},"policeQuery":{"queryDurationNs":77399600,"found":true,"nearestAddress":"서울특별시 중구  퇴계로 375-1","nearestDistance":609.9718372208924,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"AT4":3,"CS2":15,"SC4":3,"MT1":1,"BK9":13,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":6,"FD6":15,"PK6":15,"OL7":1,"PM9":7},"placesAfterFilter":{"CT1":1,"AT4":3,"CS2":15,"SC4":3,"MT1":1,"BK9":13,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":6,"FD6":15,"PK6":15,"OL7":1,"PM9":7},"totalBeforeFilter":127,"totalAfterFilter":127,"filterRate":1.0,"filterExecutionTimeNs":198100,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:03.981 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.981102200Z","nanoTime":28209998899800,"traceId":"e6113bf2","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:57:03.981 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:57:03.981 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 73.13, 편의성: 32.63, 종합: 52.88
2025-11-21 19:57:03.981 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.981102200Z","nanoTime":28209999146500,"traceId":"e6113bf2","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":246700,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":23.753520347388445,"policeDistance":609.9718372208924,"cctvScore":100.0,"cctvCount":38,"arrestRateScore":86.6910799,"arrestRate":0.866910799,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":73.13338007421653,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"AT4":9.0,"CS2":11.431706982486624,"SC4":6.0,"MT1":10.0,"BK9":65.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":18.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":56.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"중구","guPopulation":131214,"finalScore":32.628780465499105,"success":true},"overallScore":52.88108026985782,"errorMessage":null,"success":true}}
2025-11-21 19:57:03.981 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.981102200Z","nanoTime":28209999249100,"traceId":"e6113bf2","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:57:03.981 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:57:03.981 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  퇴계로 375-1, latitude=37.565271, longitude=127.01338, geohashId=wydmdq8)
2025-11-21 19:57:03.981 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 609.9718372208924
2025-11-21 19:57:03.981 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdjx
2025-11-21 19:57:03.981 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:57:03.981 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:03.981102200Z","nanoTime":28210000653100,"traceId":"e6113bf2","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1404000,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["은행이(가) 48m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdjx","dataSize":20053,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20053,"errorMessage":null,"success":true}}
2025-11-21 19:57:03.981 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:57:04.047 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:57:04.048 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55840900837855, longitude=127.02071154426919, radius=500)
2025-11-21 19:57:04.048 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:57:04.048 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55840900837855, longitude=127.02071154426919, radius=500
2025-11-21 19:57:04.048 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.048924300Z","nanoTime":28210062842000,"traceId":"960d0e14","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:57:04.048 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:57:04.048 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55840900837855, lon=127.02071154426919
2025-11-21 19:57:04.048 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.048924300Z","nanoTime":28210062935700,"traceId":"960d0e14","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:57:04.048 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.048924300Z","nanoTime":28210062985600,"traceId":"960d0e14","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":49900,"duration_ms":0,"resultData":{"latitude":37.55840900837855,"longitude":127.02071154426919,"precision":7,"centerHash":"wydmdmm","adjacentHashes":["wydmdmm","wydmdmt","wydmdmw","wydmdmq","wydmdmn","wydmdmj","wydmdmh","wydmdmk","wydmdms"],"errorMessage":null,"success":true}}
2025-11-21 19:57:04.048 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdmm, wydmdmt, wydmdmw, wydmdmq, wydmdmn, wydmdmj, wydmdmh, wydmdmk, wydmdms]
2025-11-21 19:57:04.049 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdmm
2025-11-21 19:57:04.049 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.049334200Z","nanoTime":28210063108900,"traceId":"960d0e14","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":266900,"duration_ms":0,"resultData":{"requestLatitude":37.55840900837855,"requestLongitude":127.02071154426919,"requestRadius":500,"centerGeohashId":"wydmdmm","nineBlockGeohashes":["wydmdmm","wydmdmt","wydmdmw","wydmdmq","wydmdmn","wydmdmj","wydmdmh","wydmdmk","wydmdms"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:57:04.049 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.049334200Z","nanoTime":28210063172700,"traceId":"960d0e14","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:57:04.049 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:57:04.049 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdmm
2025-11-21 19:57:04.049 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4604ms)
2025-11-21 19:57:04.049 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:57:04.052 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:57:04.052 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 4개, 미스: 5개
2025-11-21 19:57:04.052 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.2638ms, 역직렬화: 0.222ms
2025-11-21 19:57:04.052 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:57:04.052 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.052101300Z","nanoTime":28210066199200,"traceId":"960d0e14","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3026500,"duration_ms":3,"resultData":{"centerGeohashId":"wydmdmm","nineBlockGeohashes":["wydmdmm","wydmdmt","wydmdmw","wydmdmq","wydmdmn","wydmdmj","wydmdmh","wydmdmk","wydmdms"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdmm","hit":false,"valueSize":0,"l1CacheGetDurationNs":460400,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdmm","cacheKey":"data:wydmdmm:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":388,"l2CacheGetDurationNs":516500},{"geohashId":"wydmdmt","cacheKey":"data:wydmdmt:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":620,"l2CacheGetDurationNs":372700},{"geohashId":"wydmdmw","cacheKey":"data:wydmdmw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":139900},{"geohashId":"wydmdmq","cacheKey":"data:wydmdmq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":136000},{"geohashId":"wydmdmn","cacheKey":"data:wydmdmn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":135900},{"geohashId":"wydmdmj","cacheKey":"data:wydmdmj:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":656,"l2CacheGetDurationNs":237500},{"geohashId":"wydmdmh","cacheKey":"data:wydmdmh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":105500},{"geohashId":"wydmdmk","cacheKey":"data:wydmdmk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":93900},{"geohashId":"wydmdms","cacheKey":"data:wydmdms:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":256,"l2CacheGetDurationNs":175200}],"l2TotalHits":4,"l2TotalMisses":5,"l2CacheTotalDurationNs":2263800,"l2JsonDeserializeTotalDurationNs":222000,"errorMessage":null,"success":true}}
2025-11-21 19:57:04.052 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.052101300Z","nanoTime":28210066323500,"traceId":"960d0e14","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:57:04.052 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:57:04.052 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 5개
2025-11-21 19:57:04.054 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 0건
2025-11-21 19:57:04.054 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:57:04.054 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 4개
2025-11-21 19:57:04.054 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.054550200Z","nanoTime":28210068712700,"traceId":"960d0e14","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":2389200,"duration_ms":2,"resultData":{"inputCctvMissGrids":["wydmdmw","wydmdmq","wydmdmn","wydmdmh","wydmdmk"],"cctvQueryResult":{"queryGeohashIds":["wydmdmw","wydmdmq","wydmdmn","wydmdmh","wydmdmk"],"totalRowsReturned":0,"rowsPerGrid":{},"queryExecutionTimeNs":2162800,"errorMessage":null,"success":true},"cctvCacheWrites":[],"errorMessage":null,"success":true}}
2025-11-21 19:57:04.054 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.054550200Z","nanoTime":28210068847200,"traceId":"960d0e14","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:57:04.054 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:57:04.054 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.55840900837855, 127.02071154426919)
2025-11-21 19:57:04.054 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:57:04.137 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:57:04.137 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:57:04.137 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:57:04.137 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.55840900837855, 127.02071154426919), 반경: 500m
2025-11-21 19:57:04.221 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:57:04.221 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 115건
2025-11-21 19:57:04.221 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:57:04.221 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:57:04.221 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 중구
2025-11-21 19:57:04.221 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 중구
2025-11-21 19:57:04.221 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:57:04.221 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:57:04.221 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:57:04.221 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.866910799
2025-11-21 19:57:04.221 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.221344700Z","nanoTime":28210238271600,"traceId":"960d0e14","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":169424400,"duration_ms":169,"resultData":{"latitude":37.55840900837855,"longitude":127.02071154426919,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":169290100,"addressApiResult":{"cached":false,"cacheKey":"address:37.55840900837855:127.02071154426919","roadAddress":"서울특별시 중구 청구로 6","jibunAddress":"서울 중구 신당동 36-227","responseSize":68,"executionTimeNs":85780200,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:중구","guName":"중구","arrestRate":0.866910799,"dataFound":true,"executionTimeNs":609100,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.55840900837855:127.02071154426919:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":2,"CS2":14,"SC4":5,"MT1":1,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":11,"OL7":0,"PM9":3},"totalPlaces":115,"responseSize":13497,"executionTimeNs":82900800,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:04.221 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.221344700Z","nanoTime":28210238459400,"traceId":"960d0e14","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:57:04.221 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:57:04.221 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:57:04.221 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 15개
2025-11-21 19:57:04.221 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 15개 (총 카메라 대수: 40대)
2025-11-21 19:57:04.221 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:57:04.298 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 성동구  광나루로2길 35 성수지구대 (거리: 419m)
2025-11-21 19:57:04.298 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:57:04.298 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:57:04.298 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:57:04.298 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:57:04.298 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.298163Z","nanoTime":28210322596400,"traceId":"960d0e14","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":84137000,"duration_ms":84,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":15,"totalCctvAfterFilter":15,"totalCameraCount":40,"filterRate":1.0,"filterExecutionTimeNs":13800,"success":true},"policeQuery":{"queryDurationNs":83589100,"found":true,"nearestAddress":"서울특별시 성동구  광나루로2길 35 성수지구대","nearestDistance":418.9719219159868,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"AT4":2,"CS2":14,"SC4":5,"MT1":1,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":11,"PM9":3},"placesAfterFilter":{"CT1":1,"AT4":2,"CS2":14,"SC4":5,"MT1":1,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":14,"PK6":11,"PM9":3},"totalBeforeFilter":115,"totalAfterFilter":114,"filterRate":0.991304347826087,"filterExecutionTimeNs":148400,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:04.298 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.298163Z","nanoTime":28210322799500,"traceId":"960d0e14","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:57:04.298 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:57:04.298 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 60.30, 편의성: 31.12, 종합: 45.71
2025-11-21 19:57:04.298 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.298163Z","nanoTime":28210323026600,"traceId":"960d0e14","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":227100,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":47.62850976050165,"policeDistance":418.9719219159868,"cctvScore":50.0,"cctvCount":15,"arrestRateScore":86.6910799,"arrestRate":0.866910799,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":60.295876898150496,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"AT4":6.0,"CS2":10.669593183654184,"SC4":10.0,"MT1":10.0,"BK9":70.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":9.0,"FD6":14.0,"PK6":33.0,"PM9":24.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"중구","guPopulation":131214,"finalScore":31.1192566559753,"success":true},"overallScore":45.707566777062894,"errorMessage":null,"success":true}}
2025-11-21 19:57:04.298 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.298163Z","nanoTime":28210323146800,"traceId":"960d0e14","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:57:04.298 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:57:04.298 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 성동구  광나루로2길 35 성수지구대, latitude=37.554742, longitude=127.019619, geohashId=wydmdks)
2025-11-21 19:57:04.298 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 418.9719219159868
2025-11-21 19:57:04.298 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdmm
2025-11-21 19:57:04.298 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:57:04.298 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.298163Z","nanoTime":28210324642800,"traceId":"960d0e14","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1496000,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["학교이(가) 47m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdmm","dataSize":16447,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":16447,"errorMessage":null,"success":true}}
2025-11-21 19:57:04.298 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:57:04.434 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:57:04.434 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55719991154596, longitude=127.02906359890368, radius=500)
2025-11-21 19:57:04.434 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:57:04.434 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55719991154596, longitude=127.02906359890368, radius=500
2025-11-21 19:57:04.434 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.434164200Z","nanoTime":28210448365400,"traceId":"0b20762c","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:57:04.434 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:57:04.434 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55719991154596, lon=127.02906359890368
2025-11-21 19:57:04.434 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.434164200Z","nanoTime":28210448453300,"traceId":"0b20762c","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:57:04.434 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.434164200Z","nanoTime":28210448497000,"traceId":"0b20762c","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":43700,"duration_ms":0,"resultData":{"latitude":37.55719991154596,"longitude":127.02906359890368,"precision":7,"centerHash":"wydmdt5","adjacentHashes":["wydmdt5","wydmdt7","wydmdtk","wydmdth","wydmdsu","wydmdsg","wydmdsf","wydmdt4","wydmdt6"],"errorMessage":null,"success":true}}
2025-11-21 19:57:04.434 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdt5, wydmdt7, wydmdtk, wydmdth, wydmdsu, wydmdsg, wydmdsf, wydmdt4, wydmdt6]
2025-11-21 19:57:04.434 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdt5
2025-11-21 19:57:04.434 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.434164200Z","nanoTime":28210448597300,"traceId":"0b20762c","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":231900,"duration_ms":0,"resultData":{"requestLatitude":37.55719991154596,"requestLongitude":127.02906359890368,"requestRadius":500,"centerGeohashId":"wydmdt5","nineBlockGeohashes":["wydmdt5","wydmdt7","wydmdtk","wydmdth","wydmdsu","wydmdsg","wydmdsf","wydmdt4","wydmdt6"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:57:04.434 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.434164200Z","nanoTime":28210448641600,"traceId":"0b20762c","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:57:04.434 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:57:04.434 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdt5
2025-11-21 19:57:04.435 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3031ms)
2025-11-21 19:57:04.435 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:57:04.436 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:57:04.436 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 1개, 미스: 8개
2025-11-21 19:57:04.436 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.5146ms, 역직렬화: 0.0914ms
2025-11-21 19:57:04.436 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:57:04.436 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.436504400Z","nanoTime":28210450751900,"traceId":"0b20762c","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2110300,"duration_ms":2,"resultData":{"centerGeohashId":"wydmdt5","nineBlockGeohashes":["wydmdt5","wydmdt7","wydmdtk","wydmdth","wydmdsu","wydmdsg","wydmdsf","wydmdt4","wydmdt6"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdt5","hit":false,"valueSize":0,"l1CacheGetDurationNs":303100,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdt5","cacheKey":"data:wydmdt5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":133800},{"geohashId":"wydmdt7","cacheKey":"data:wydmdt7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":169500},{"geohashId":"wydmdtk","cacheKey":"data:wydmdtk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":90200},{"geohashId":"wydmdth","cacheKey":"data:wydmdth:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":85600},{"geohashId":"wydmdsu","cacheKey":"data:wydmdsu:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":81400},{"geohashId":"wydmdsg","cacheKey":"data:wydmdsg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":77900},{"geohashId":"wydmdsf","cacheKey":"data:wydmdsf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":101400},{"geohashId":"wydmdt4","cacheKey":"data:wydmdt4:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":130,"l2CacheGetDurationNs":424800},{"geohashId":"wydmdt6","cacheKey":"data:wydmdt6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":186700}],"l2TotalHits":1,"l2TotalMisses":8,"l2CacheTotalDurationNs":1514600,"l2JsonDeserializeTotalDurationNs":91400,"errorMessage":null,"success":true}}
2025-11-21 19:57:04.436 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.436504400Z","nanoTime":28210450910600,"traceId":"0b20762c","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:57:04.436 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:57:04.436 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 8개
2025-11-21 19:57:04.439 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 14건
2025-11-21 19:57:04.440 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:57:04.440 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 5개
2025-11-21 19:57:04.441 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.440236800Z","nanoTime":28210454931200,"traceId":"0b20762c","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4020600,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmdt5","wydmdt7","wydmdtk","wydmdth","wydmdsu","wydmdsg","wydmdsf","wydmdt6"],"cctvQueryResult":{"queryGeohashIds":["wydmdt5","wydmdt7","wydmdtk","wydmdth","wydmdsu","wydmdsg","wydmdsf","wydmdt6"],"totalRowsReturned":14,"rowsPerGrid":{"wydmdtk":5,"wydmdt7":1,"wydmdth":5,"wydmdt5":3},"queryExecutionTimeNs":2810100,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdtk","cacheKey":"data:wydmdtk:cctv","dataCount":5,"dataSize":630,"errorMessage":null,"success":true},{"geohashId":"wydmdt7","cacheKey":"data:wydmdt7:cctv","dataCount":1,"dataSize":134,"errorMessage":null,"success":true},{"geohashId":"wydmdth","cacheKey":"data:wydmdth:cctv","dataCount":5,"dataSize":654,"errorMessage":null,"success":true},{"geohashId":"wydmdt5","cacheKey":"data:wydmdt5:cctv","dataCount":3,"dataSize":391,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:57:04.441 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.441234900Z","nanoTime":28210455057900,"traceId":"0b20762c","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:57:04.441 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:57:04.441 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.55719991154596, 127.02906359890368)
2025-11-21 19:57:04.441 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:57:04.509 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:57:04.509 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:57:04.509 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:57:04.509 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.55719991154596, 127.02906359890368), 반경: 500m
2025-11-21 19:57:04.604 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:57:04.604 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 114건
2025-11-21 19:57:04.604 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:57:04.604 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:57:04.604 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 19:57:04.604 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 성동구
2025-11-21 19:57:04.604 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:57:04.604 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:57:04.604 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:57:04.604 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 19:57:04.604 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.604500700Z","nanoTime":28210623786100,"traceId":"0b20762c","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":168728200,"duration_ms":168,"resultData":{"latitude":37.55719991154596,"longitude":127.02906359890368,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":168555700,"addressApiResult":{"cached":false,"cacheKey":"address:37.55719991154596:127.02906359890368","roadAddress":"서울특별시 성동구 행당로 지하 89","jibunAddress":"서울 성동구 행당동 317-241","responseSize":75,"executionTimeNs":70680900,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":618500,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.55719991154596:127.02906359890368:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":0,"CS2":14,"SC4":5,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":7,"OL7":0,"PM9":9},"totalPlaces":114,"responseSize":13231,"executionTimeNs":97256300,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:04.604 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.604500700Z","nanoTime":28210624133500,"traceId":"0b20762c","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:57:04.604 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:57:04.604 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:57:04.604 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 15개
2025-11-21 19:57:04.604 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 15개 (총 카메라 대수: 44대)
2025-11-21 19:57:04.604 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:57:04.693 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구 영신로20길 11 (거리: 32m)
2025-11-21 19:57:04.693 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:57:04.693 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:57:04.693 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 12개 카테고리
2025-11-21 19:57:04.693 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:57:04.693 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.693248300Z","nanoTime":28210711981400,"traceId":"0b20762c","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":87847900,"duration_ms":87,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":15,"totalCctvAfterFilter":15,"totalCameraCount":44,"filterRate":1.0,"filterExecutionTimeNs":12700,"success":true},"policeQuery":{"queryDurationNs":87173500,"found":true,"nearestAddress":"서울특별시 영등포구 영신로20길 11","nearestDistance":31.57221057263052,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"BK9":15,"HP8":15,"CS2":14,"AC5":15,"CE7":15,"SC4":5,"SW8":1,"PO3":2,"FD6":15,"PK6":7,"MT1":1,"PM9":9},"placesAfterFilter":{"BK9":15,"HP8":15,"CS2":14,"AC5":15,"CE7":15,"SC4":5,"SW8":1,"PO3":2,"FD6":15,"PK6":7,"MT1":1,"PM9":9},"totalBeforeFilter":114,"totalAfterFilter":114,"filterRate":1.0,"filterExecutionTimeNs":229800,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:04.693 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.693248300Z","nanoTime":28210712261100,"traceId":"0b20762c","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:57:04.693 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:57:04.693 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 71.17, 편의성: 38.25, 종합: 54.71
2025-11-21 19:57:04.693 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.693248300Z","nanoTime":28210712582800,"traceId":"0b20762c","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":321700,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":96.05347367842118,"policeDistance":31.57221057263052,"cctvScore":50.0,"cctvCount":15,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":71.17096498352636,"success":true},"convenienceScore":{"categoryScores":{"BK9":75.0,"HP8":100.0,"CS2":4.97761849398597,"AC5":15.0,"CE7":30.0,"SC4":10.0,"SW8":100.0,"PO3":6.0,"FD6":15.0,"PK6":21.0,"MT1":10.0,"PM9":72.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":38.24813487449883,"success":true},"overallScore":54.709549929012596,"errorMessage":null,"success":true}}
2025-11-21 19:57:04.693 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.693248300Z","nanoTime":28210712727800,"traceId":"0b20762c","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:57:04.693 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:57:04.693 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구 영신로20길 11, latitude=37.557429, longitude=127.028852, geohashId=wydmdt5)
2025-11-21 19:57:04.693 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 31.57221057263052
2025-11-21 19:57:04.699 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdt5
2025-11-21 19:57:04.699 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:57:04.699 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.699956200Z","nanoTime":28210714498000,"traceId":"0b20762c","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1770200,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 17m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdt5","dataSize":15901,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":15901,"errorMessage":null,"success":true}}
2025-11-21 19:57:04.699 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:57:04.789 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:57:04.789 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55640461062187, longitude=127.03764193998606, radius=500)
2025-11-21 19:57:04.789 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:57:04.789 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55640461062187, longitude=127.03764193998606, radius=500
2025-11-21 19:57:04.789 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.789762700Z","nanoTime":28210805332600,"traceId":"c92b023a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:57:04.789 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:57:04.789 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55640461062187, lon=127.03764193998606
2025-11-21 19:57:04.789 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.789762700Z","nanoTime":28210805443200,"traceId":"c92b023a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:57:04.789 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.789762700Z","nanoTime":28210805497800,"traceId":"c92b023a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":54600,"duration_ms":0,"resultData":{"latitude":37.55640461062187,"longitude":127.03764193998606,"precision":7,"centerHash":"wydmduc","adjacentHashes":["wydmduc","wydmdv1","wydmdv4","wydmduf","wydmdud","wydmdu9","wydmdu8","wydmdub","wydmdv0"],"errorMessage":null,"success":true}}
2025-11-21 19:57:04.791 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmduc, wydmdv1, wydmdv4, wydmduf, wydmdud, wydmdu9, wydmdu8, wydmdub, wydmdv0]
2025-11-21 19:57:04.791 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmduc
2025-11-21 19:57:04.791 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.791831300Z","nanoTime":28210805658900,"traceId":"c92b023a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":326300,"duration_ms":0,"resultData":{"requestLatitude":37.55640461062187,"requestLongitude":127.03764193998606,"requestRadius":500,"centerGeohashId":"wydmduc","nineBlockGeohashes":["wydmduc","wydmdv1","wydmdv4","wydmduf","wydmdud","wydmdu9","wydmdu8","wydmdub","wydmdv0"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:57:04.791 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.791831300Z","nanoTime":28210805741100,"traceId":"c92b023a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:57:04.791 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:57:04.791 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmduc
2025-11-21 19:57:04.791 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4105ms)
2025-11-21 19:57:04.791 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:57:04.794 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:57:04.794 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 4개, 미스: 5개
2025-11-21 19:57:04.794 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.5514ms, 역직렬화: 0.2598ms
2025-11-21 19:57:04.794 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:57:04.794 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.794959500Z","nanoTime":28210809020600,"traceId":"c92b023a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3279500,"duration_ms":3,"resultData":{"centerGeohashId":"wydmduc","nineBlockGeohashes":["wydmduc","wydmdv1","wydmdv4","wydmduf","wydmdud","wydmdu9","wydmdu8","wydmdub","wydmdv0"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmduc","hit":false,"valueSize":0,"l1CacheGetDurationNs":410500,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmduc","cacheKey":"data:wydmduc:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":268,"l2CacheGetDurationNs":468300},{"geohashId":"wydmdv1","cacheKey":"data:wydmdv1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":224400},{"geohashId":"wydmdv4","cacheKey":"data:wydmdv4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":243700},{"geohashId":"wydmduf","cacheKey":"data:wydmduf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":158500},{"geohashId":"wydmdud","cacheKey":"data:wydmdud:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":128700},{"geohashId":"wydmdu9","cacheKey":"data:wydmdu9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":154300},{"geohashId":"wydmdu8","cacheKey":"data:wydmdu8:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":259,"l2CacheGetDurationNs":217600},{"geohashId":"wydmdub","cacheKey":"data:wydmdub:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":134,"l2CacheGetDurationNs":180100},{"geohashId":"wydmdv0","cacheKey":"data:wydmdv0:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":399,"l2CacheGetDurationNs":380100}],"l2TotalHits":4,"l2TotalMisses":5,"l2CacheTotalDurationNs":2551400,"l2JsonDeserializeTotalDurationNs":259800,"errorMessage":null,"success":true}}
2025-11-21 19:57:04.794 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.794959500Z","nanoTime":28210809216200,"traceId":"c92b023a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:57:04.794 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:57:04.794 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 5개
2025-11-21 19:57:04.799 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 1건
2025-11-21 19:57:04.799 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:57:04.799 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 5개
2025-11-21 19:57:04.800 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.799031900Z","nanoTime":28210813998000,"traceId":"c92b023a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4781800,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmdv1","wydmdv4","wydmduf","wydmdud","wydmdu9"],"cctvQueryResult":{"queryGeohashIds":["wydmdv1","wydmdv4","wydmduf","wydmdud","wydmdu9"],"totalRowsReturned":1,"rowsPerGrid":{"wydmdv4":1},"queryExecutionTimeNs":3987200,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdv4","cacheKey":"data:wydmdv4:cctv","dataCount":1,"dataSize":128,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:57:04.800 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.800384900Z","nanoTime":28210814183400,"traceId":"c92b023a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:57:04.800 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:57:04.800 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.55640461062187, 127.03764193998606)
2025-11-21 19:57:04.800 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:57:04.861 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:57:04.861 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:57:04.867 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:57:04.867 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.55640461062187, 127.03764193998606), 반경: 500m
2025-11-21 19:57:04.946 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:57:04.946 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 129건
2025-11-21 19:57:04.946 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:57:04.946 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:57:04.946 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 19:57:04.952 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 성동구
2025-11-21 19:57:04.952 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:57:04.952 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:57:04.952 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:57:04.953 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 19:57:04.953 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.953174100Z","nanoTime":28210966980900,"traceId":"c92b023a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":152797500,"duration_ms":152,"resultData":{"latitude":37.55640461062187,"longitude":127.03764193998606,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":152528500,"addressApiResult":{"cached":false,"cacheKey":"address:37.55640461062187:127.03764193998606","roadAddress":"서울특별시 성동구 고산자로2길 71","jibunAddress":"서울 성동구 행당동 128-7","responseSize":73,"executionTimeNs":67279100,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":912900,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.55640461062187:127.03764193998606:500","categoryCount":15,"placesByCategory":{"CT1":5,"AT4":2,"CS2":15,"SC4":3,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":15,"OL7":0,"PM9":9},"totalPlaces":129,"responseSize":14965,"executionTimeNs":84336500,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:04.953 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:04.953174100Z","nanoTime":28210967541600,"traceId":"c92b023a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:57:04.953 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:57:04.953 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:57:04.953 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 9개
2025-11-21 19:57:04.953 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 9개 (총 카메라 대수: 28대)
2025-11-21 19:57:04.953 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:57:05.037 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구  선유로 95 (거리: 567m)
2025-11-21 19:57:05.037 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:57:05.037 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:57:05.037 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:57:05.037 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:57:05.037 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.037953300Z","nanoTime":28211053600800,"traceId":"c92b023a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":86059200,"duration_ms":86,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":9,"totalCctvAfterFilter":9,"totalCameraCount":28,"filterRate":1.0,"filterExecutionTimeNs":19800,"success":true},"policeQuery":{"queryDurationNs":85481100,"found":true,"nearestAddress":"서울특별시 영등포구  선유로 95","nearestDistance":567.3833791193404,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":5,"AT4":2,"CS2":15,"SC4":3,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":15,"PM9":9},"placesAfterFilter":{"CT1":5,"AT4":2,"CS2":15,"SC4":3,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":15,"PM9":9},"totalBeforeFilter":129,"totalAfterFilter":129,"filterRate":1.0,"filterExecutionTimeNs":138000,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:05.037 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.037953300Z","nanoTime":28211053771700,"traceId":"c92b023a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:57:05.037 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:57:05.037 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 43.08, 편의성: 36.31, 종합: 39.69
2025-11-21 19:57:05.037 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.037953300Z","nanoTime":28211053980600,"traceId":"c92b023a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":208900,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":29.07707761008245,"policeDistance":567.3833791193404,"cctvScore":30.0,"cctvCount":9,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":43.07804616302474,"success":true},"convenienceScore":{"categoryScores":{"CT1":20.0,"AT4":6.0,"CS2":5.333162672127825,"SC4":6.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":45.0,"PM9":72.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":36.30951161943771,"success":true},"overallScore":39.69377889123122,"errorMessage":null,"success":true}}
2025-11-21 19:57:05.037 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.037953300Z","nanoTime":28211054089600,"traceId":"c92b023a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:57:05.037 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:57:05.037 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구  선유로 95, latitude=37.560301, longitude=127.041798, geohashId=wydmdvt)
2025-11-21 19:57:05.037 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 567.3833791193404
2025-11-21 19:57:05.037 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmduc
2025-11-21 19:57:05.037 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:57:05.037 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.037953300Z","nanoTime":28211055010300,"traceId":"c92b023a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":920700,"duration_ms":0,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 36m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmduc","dataSize":17159,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17159,"errorMessage":null,"success":true}}
2025-11-21 19:57:05.037 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:57:05.109 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:57:05.109 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.557879515470525, longitude=127.04540662613914, radius=500)
2025-11-21 19:57:05.110 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:57:05.110 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.557879515470525, longitude=127.04540662613914, radius=500
2025-11-21 19:57:05.110 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.110579700Z","nanoTime":28211124388000,"traceId":"d5497688","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:57:05.110 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:57:05.110 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.557879515470525, lon=127.04540662613914
2025-11-21 19:57:05.110 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.110579700Z","nanoTime":28211124485200,"traceId":"d5497688","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:57:05.110 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.110579700Z","nanoTime":28211124532000,"traceId":"d5497688","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":46800,"duration_ms":0,"resultData":{"latitude":37.557879515470525,"longitude":127.04540662613914,"precision":7,"centerHash":"wydmdvp","adjacentHashes":["wydmdvp","wydmdvr","wydmej2","wydmej0","wydmehb","wydmduz","wydmduy","wydmdvn","wydmdvq"],"errorMessage":null,"success":true}}
2025-11-21 19:57:05.110 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdvp, wydmdvr, wydmej2, wydmej0, wydmehb, wydmduz, wydmduy, wydmdvn, wydmdvq]
2025-11-21 19:57:05.110 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdvp
2025-11-21 19:57:05.110 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.110579700Z","nanoTime":28211124644300,"traceId":"d5497688","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":256300,"duration_ms":0,"resultData":{"requestLatitude":37.557879515470525,"requestLongitude":127.04540662613914,"requestRadius":500,"centerGeohashId":"wydmdvp","nineBlockGeohashes":["wydmdvp","wydmdvr","wydmej2","wydmej0","wydmehb","wydmduz","wydmduy","wydmdvn","wydmdvq"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:57:05.110 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.110579700Z","nanoTime":28211124768100,"traceId":"d5497688","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:57:05.110 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:57:05.110 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdvp
2025-11-21 19:57:05.110 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4625ms)
2025-11-21 19:57:05.111 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:57:05.112 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:57:05.112 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:57:05.112 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.2809ms, 역직렬화: 0.0ms
2025-11-21 19:57:05.112 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:57:05.112 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.112588200Z","nanoTime":28211126808700,"traceId":"d5497688","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2040600,"duration_ms":2,"resultData":{"centerGeohashId":"wydmdvp","nineBlockGeohashes":["wydmdvp","wydmdvr","wydmej2","wydmej0","wydmehb","wydmduz","wydmduy","wydmdvn","wydmdvq"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdvp","hit":false,"valueSize":0,"l1CacheGetDurationNs":462500,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdvp","cacheKey":"data:wydmdvp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":239500},{"geohashId":"wydmdvr","cacheKey":"data:wydmdvr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":195200},{"geohashId":"wydmej2","cacheKey":"data:wydmej2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":157100},{"geohashId":"wydmej0","cacheKey":"data:wydmej0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":130800},{"geohashId":"wydmehb","cacheKey":"data:wydmehb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":109800},{"geohashId":"wydmduz","cacheKey":"data:wydmduz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":129000},{"geohashId":"wydmduy","cacheKey":"data:wydmduy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":80300},{"geohashId":"wydmdvn","cacheKey":"data:wydmdvn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":80400},{"geohashId":"wydmdvq","cacheKey":"data:wydmdvq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":85000}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1280900,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:57:05.112 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.112588200Z","nanoTime":28211126932800,"traceId":"d5497688","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:57:05.112 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:57:05.112 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:57:05.115 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 0건
2025-11-21 19:57:05.115 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:57:05.115 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 0개
2025-11-21 19:57:05.115 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.115591400Z","nanoTime":28211129550300,"traceId":"d5497688","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":2617500,"duration_ms":2,"resultData":{"inputCctvMissGrids":["wydmdvp","wydmdvr","wydmej2","wydmej0","wydmehb","wydmduz","wydmduy","wydmdvn","wydmdvq"],"cctvQueryResult":{"queryGeohashIds":["wydmdvp","wydmdvr","wydmej2","wydmej0","wydmehb","wydmduz","wydmduy","wydmdvn","wydmdvq"],"totalRowsReturned":0,"rowsPerGrid":{},"queryExecutionTimeNs":2403600,"errorMessage":null,"success":true},"cctvCacheWrites":[],"errorMessage":null,"success":true}}
2025-11-21 19:57:05.115 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.115591400Z","nanoTime":28211129663900,"traceId":"d5497688","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:57:05.115 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:57:05.115 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.557879515470525, 127.04540662613914)
2025-11-21 19:57:05.115 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:57:05.159 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:57:05.159 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:57:05.159 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:57:05.159 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.557879515470525, 127.04540662613914), 반경: 500m
2025-11-21 19:57:05.251 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:57:05.251 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 118건
2025-11-21 19:57:05.251 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:57:05.251 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:57:05.257 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 19:57:05.257 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 성동구
2025-11-21 19:57:05.257 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:57:05.257 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:57:05.257 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:57:05.257 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 19:57:05.257 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.257222900Z","nanoTime":28211271660000,"traceId":"d5497688","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":141996100,"duration_ms":141,"resultData":{"latitude":37.557879515470525,"longitude":127.04540662613914,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":141769400,"addressApiResult":{"cached":false,"cacheKey":"address:37.557879515470525:127.04540662613914","roadAddress":"서울특별시 성동구 왕십리로 222","jibunAddress":"서울 성동구 사근동 110","responseSize":70,"executionTimeNs":46354300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":541700,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.557879515470525:127.04540662613914:500","categoryCount":15,"placesByCategory":{"CT1":6,"AT4":1,"CS2":15,"SC4":5,"MT1":0,"BK9":15,"HP8":15,"AC5":6,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":0,"PM9":7},"totalPlaces":118,"responseSize":13784,"executionTimeNs":94873400,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:05.257 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.257222900Z","nanoTime":28211271959000,"traceId":"d5497688","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:57:05.257 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:57:05.257 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:57:05.257 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 0개
2025-11-21 19:57:05.258 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 0개 (총 카메라 대수: 0대)
2025-11-21 19:57:05.258 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:57:05.337 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구  선유로 95 (거리: 417m)
2025-11-21 19:57:05.337 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:57:05.337 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:57:05.337 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 19:57:05.337 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:57:05.337 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.337315600Z","nanoTime":28211351820800,"traceId":"d5497688","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":79861800,"duration_ms":79,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":0,"totalCctvAfterFilter":0,"totalCameraCount":0,"filterRate":0.0,"filterExecutionTimeNs":300,"success":true},"policeQuery":{"queryDurationNs":79267600,"found":true,"nearestAddress":"서울특별시 영등포구  선유로 95","nearestDistance":416.7495818655898,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":6,"AT4":1,"CS2":15,"SC4":5,"BK9":15,"HP8":15,"AC5":6,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"PM9":7},"placesAfterFilter":{"CT1":6,"AT4":1,"CS2":15,"SC4":5,"BK9":15,"HP8":15,"AC5":6,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"PM9":7},"totalBeforeFilter":118,"totalAfterFilter":118,"filterRate":1.0,"filterExecutionTimeNs":176400,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:05.338 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.338331800Z","nanoTime":28211352181200,"traceId":"d5497688","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:57:05.338 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:57:05.338 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 36.73, 편의성: 36.56, 종합: 36.65
2025-11-21 19:57:05.338 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.338331800Z","nanoTime":28211352434600,"traceId":"d5497688","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":253400,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":47.906302266801276,"policeDistance":416.7495818655898,"cctvScore":0.0,"cctvCount":0,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":36.726813560040384,"success":true},"convenienceScore":{"categoryScores":{"CT1":24.0,"AT4":3.0,"CS2":5.333162672127825,"SC4":10.0,"BK9":75.0,"HP8":100.0,"AC5":6.0,"CE7":30.0,"SW8":100.0,"PO3":6.0,"FD6":15.0,"PK6":45.0,"PM9":56.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":36.56408943631753,"success":true},"overallScore":36.64545149817896,"errorMessage":null,"success":true}}
2025-11-21 19:57:05.338 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.338688400Z","nanoTime":28211352558700,"traceId":"d5497688","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:57:05.338 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:57:05.338 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구  선유로 95, latitude=37.560301, longitude=127.041798, geohashId=wydmdvt)
2025-11-21 19:57:05.338 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 416.7495818655898
2025-11-21 19:57:05.338 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdvp
2025-11-21 19:57:05.338 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:57:05.338 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.338688400Z","nanoTime":28211353903600,"traceId":"d5497688","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1344900,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["주차장이(가) 86m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","CCTV 설치 대수가 적은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdvp","dataSize":15254,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":15254,"errorMessage":null,"success":true}}
2025-11-21 19:57:05.338 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:57:05.697 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:57:05.697 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56063326296863, longitude=127.05330834442182, radius=500)
2025-11-21 19:57:05.697 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:57:05.697 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56063326296863, longitude=127.05330834442182, radius=500
2025-11-21 19:57:05.697 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.697263600Z","nanoTime":28211711526700,"traceId":"f37df5d5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:57:05.697 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:57:05.697 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56063326296863, lon=127.05330834442182
2025-11-21 19:57:05.697 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.697263600Z","nanoTime":28211711601100,"traceId":"f37df5d5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:57:05.697 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.697263600Z","nanoTime":28211711642500,"traceId":"f37df5d5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":41400,"duration_ms":0,"resultData":{"latitude":37.56063326296863,"longitude":127.05330834442182,"precision":7,"centerHash":"wydmejt","adjacentHashes":["wydmejt","wydmejv","wydmejy","wydmejw","wydmejq","wydmejm","wydmejk","wydmejs","wydmeju"],"errorMessage":null,"success":true}}
2025-11-21 19:57:05.697 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmejt, wydmejv, wydmejy, wydmejw, wydmejq, wydmejm, wydmejk, wydmejs, wydmeju]
2025-11-21 19:57:05.697 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmejt
2025-11-21 19:57:05.697 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.697263600Z","nanoTime":28211711744600,"traceId":"f37df5d5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":217900,"duration_ms":0,"resultData":{"requestLatitude":37.56063326296863,"requestLongitude":127.05330834442182,"requestRadius":500,"centerGeohashId":"wydmejt","nineBlockGeohashes":["wydmejt","wydmejv","wydmejy","wydmejw","wydmejq","wydmejm","wydmejk","wydmejs","wydmeju"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:57:05.697 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.697263600Z","nanoTime":28211711793000,"traceId":"f37df5d5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:57:05.697 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:57:05.697 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmejt
2025-11-21 19:57:05.698 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.2852ms)
2025-11-21 19:57:05.698 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:57:05.698 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:57:05.698 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:57:05.698 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 0.7662ms, 역직렬화: 0.0ms
2025-11-21 19:57:05.698 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:57:05.699 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.699264Z","nanoTime":28211713020000,"traceId":"f37df5d5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1227000,"duration_ms":1,"resultData":{"centerGeohashId":"wydmejt","nineBlockGeohashes":["wydmejt","wydmejv","wydmejy","wydmejw","wydmejq","wydmejm","wydmejk","wydmejs","wydmeju"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmejt","hit":false,"valueSize":0,"l1CacheGetDurationNs":285200,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmejt","cacheKey":"data:wydmejt:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":104500},{"geohashId":"wydmejv","cacheKey":"data:wydmejv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":81500},{"geohashId":"wydmejy","cacheKey":"data:wydmejy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":64800},{"geohashId":"wydmejw","cacheKey":"data:wydmejw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":73100},{"geohashId":"wydmejq","cacheKey":"data:wydmejq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":71900},{"geohashId":"wydmejm","cacheKey":"data:wydmejm:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":70200},{"geohashId":"wydmejk","cacheKey":"data:wydmejk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":82500},{"geohashId":"wydmejs","cacheKey":"data:wydmejs:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":72400},{"geohashId":"wydmeju","cacheKey":"data:wydmeju:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":92300}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":766200,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:57:05.699 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.699264Z","nanoTime":28211713129800,"traceId":"f37df5d5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:57:05.699 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:57:05.699 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:57:05.702 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 16건
2025-11-21 19:57:05.703 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:57:05.703 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 5개
2025-11-21 19:57:05.703 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.703067500Z","nanoTime":28211717484900,"traceId":"f37df5d5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4355100,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmejt","wydmejv","wydmejy","wydmejw","wydmejq","wydmejm","wydmejk","wydmejs","wydmeju"],"cctvQueryResult":{"queryGeohashIds":["wydmejt","wydmejv","wydmejy","wydmejw","wydmejq","wydmejm","wydmejk","wydmejs","wydmeju"],"totalRowsReturned":16,"rowsPerGrid":{"wydmejt":2,"wydmeju":5,"wydmejv":3,"wydmejw":2,"wydmejy":4},"queryExecutionTimeNs":3105300,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmejt","cacheKey":"data:wydmejt:cctv","dataCount":2,"dataSize":263,"errorMessage":null,"success":true},{"geohashId":"wydmeju","cacheKey":"data:wydmeju:cctv","dataCount":5,"dataSize":654,"errorMessage":null,"success":true},{"geohashId":"wydmejv","cacheKey":"data:wydmejv:cctv","dataCount":3,"dataSize":394,"errorMessage":null,"success":true},{"geohashId":"wydmejw","cacheKey":"data:wydmejw:cctv","dataCount":2,"dataSize":262,"errorMessage":null,"success":true},{"geohashId":"wydmejy","cacheKey":"data:wydmejy:cctv","dataCount":4,"dataSize":523,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:57:05.703 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.703067500Z","nanoTime":28211717592300,"traceId":"f37df5d5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:57:05.703 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:57:05.703 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56063326296863, 127.05330834442182)
2025-11-21 19:57:05.703 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:57:05.769 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:57:05.769 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:57:05.777 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:57:05.777 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56063326296863, 127.05330834442182), 반경: 500m
2025-11-21 19:57:05.855 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:57:05.856 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 99건
2025-11-21 19:57:05.857 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:57:05.857 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:57:05.857 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 19:57:05.857 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 성동구
2025-11-21 19:57:05.857 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:57:05.857 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:57:05.857 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:57:05.857 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 19:57:05.857 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.857728800Z","nanoTime":28211872570800,"traceId":"f37df5d5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":154978500,"duration_ms":154,"resultData":{"latitude":37.56063326296863,"longitude":127.05330834442182,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":154853700,"addressApiResult":{"cached":false,"cacheKey":"address:37.56063326296863:127.05330834442182","roadAddress":"서울특별시 성동구 용답25길 1","jibunAddress":"서울 성동구 용답동 29","responseSize":68,"executionTimeNs":73028900,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":466100,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56063326296863:127.05330834442182:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":2,"CS2":8,"SC4":3,"MT1":0,"BK9":14,"HP8":7,"AC5":14,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":10,"OL7":1,"PM9":6},"totalPlaces":99,"responseSize":11459,"executionTimeNs":81358700,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:05.857 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.857728800Z","nanoTime":28211872784700,"traceId":"f37df5d5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:57:05.857 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:57:05.857 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:57:05.857 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 16개
2025-11-21 19:57:05.857 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 16개 (총 카메라 대수: 51대)
2025-11-21 19:57:05.857 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:57:05.936 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 성동구  마장로 205 (거리: 481m)
2025-11-21 19:57:05.943 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:57:05.943 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:57:05.943 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:57:05.943 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:57:05.943 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.943434800Z","nanoTime":28211957597600,"traceId":"f37df5d5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":84812900,"duration_ms":84,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":16,"totalCctvAfterFilter":16,"totalCameraCount":51,"filterRate":1.0,"filterExecutionTimeNs":16000,"success":true},"policeQuery":{"queryDurationNs":84208100,"found":true,"nearestAddress":"서울특별시 성동구  마장로 205","nearestDistance":481.2390556118169,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"AT4":2,"CS2":8,"SC4":3,"BK9":14,"HP8":7,"AC5":14,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":10,"OL7":1,"PM9":6},"placesAfterFilter":{"CT1":1,"AT4":2,"CS2":8,"SC4":3,"BK9":14,"HP8":7,"AC5":14,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":10,"OL7":1,"PM9":6},"totalBeforeFilter":99,"totalAfterFilter":99,"filterRate":1.0,"filterExecutionTimeNs":162200,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:05.943 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.943434800Z","nanoTime":28211957850800,"traceId":"f37df5d5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:57:05.943 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:57:05.943 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 55.64, 편의성: 31.20, 종합: 43.42
2025-11-21 19:57:05.943 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.943434800Z","nanoTime":28211958114700,"traceId":"f37df5d5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":263900,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":39.845118048522885,"policeDistance":481.2390556118169,"cctvScore":53.333333333333336,"cctvCount":16,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":55.6417916278902,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"AT4":6.0,"CS2":2.84435342513484,"SC4":6.0,"BK9":70.0,"HP8":100.0,"AC5":14.0,"CE7":30.0,"SW8":100.0,"PO3":6.0,"FD6":15.0,"PK6":30.0,"OL7":5.0,"PM9":48.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":31.203168101795345,"success":true},"overallScore":43.42247986484277,"errorMessage":null,"success":true}}
2025-11-21 19:57:05.943 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.943434800Z","nanoTime":28211958253200,"traceId":"f37df5d5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:57:05.943 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:57:05.943 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 성동구  마장로 205, latitude=37.564783, longitude=127.051758, geohashId=wydmenk)
2025-11-21 19:57:05.943 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 481.2390556118169
2025-11-21 19:57:05.943 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmejt
2025-11-21 19:57:05.943 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:57:05.943 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:05.943434800Z","nanoTime":28211959287000,"traceId":"f37df5d5","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1033800,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["학원이(가) 16m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmejt","dataSize":14458,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":14458,"errorMessage":null,"success":true}}
2025-11-21 19:57:05.943 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:57:06.419 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:57:06.419 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.562834349686185, longitude=127.04706212716361, radius=500)
2025-11-21 19:57:06.419 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:57:06.419 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.562834349686185, longitude=127.04706212716361, radius=500
2025-11-21 19:57:06.419 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:06.419837200Z","nanoTime":28212434362500,"traceId":"8d139eb6","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:57:06.419 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:57:06.419 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.562834349686185, lon=127.04706212716361
2025-11-21 19:57:06.419 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:06.419837200Z","nanoTime":28212434506900,"traceId":"8d139eb6","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:57:06.420 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:06.419837200Z","nanoTime":28212434567900,"traceId":"8d139eb6","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":61000,"duration_ms":0,"resultData":{"latitude":37.562834349686185,"longitude":127.04706212716361,"precision":7,"centerHash":"wydmen0","adjacentHashes":["wydmen0","wydmen2","wydmen3","wydmen1","wydmejc","wydmejb","wydmdvz","wydmdyp","wydmdyr"],"errorMessage":null,"success":true}}
2025-11-21 19:57:06.420 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmen0, wydmen2, wydmen3, wydmen1, wydmejc, wydmejb, wydmdvz, wydmdyp, wydmdyr]
2025-11-21 19:57:06.420 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmen0
2025-11-21 19:57:06.420 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:06.420836300Z","nanoTime":28212434838100,"traceId":"8d139eb6","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":475600,"duration_ms":0,"resultData":{"requestLatitude":37.562834349686185,"requestLongitude":127.04706212716361,"requestRadius":500,"centerGeohashId":"wydmen0","nineBlockGeohashes":["wydmen0","wydmen2","wydmen3","wydmen1","wydmejc","wydmejb","wydmdvz","wydmdyp","wydmdyr"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:57:06.420 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:06.420836300Z","nanoTime":28212434923600,"traceId":"8d139eb6","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:57:06.420 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:57:06.420 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmen0
2025-11-21 19:57:06.420 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3914ms)
2025-11-21 19:57:06.420 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:57:06.424 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:57:06.424 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 4개, 미스: 5개
2025-11-21 19:57:06.424 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.8538ms, 역직렬화: 0.294ms
2025-11-21 19:57:06.424 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:57:06.424 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:06.424169400Z","nanoTime":28212438532500,"traceId":"8d139eb6","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3608900,"duration_ms":3,"resultData":{"centerGeohashId":"wydmen0","nineBlockGeohashes":["wydmen0","wydmen2","wydmen3","wydmen1","wydmejc","wydmejb","wydmdvz","wydmdyp","wydmdyr"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmen0","hit":false,"valueSize":0,"l1CacheGetDurationNs":391400,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmen0","cacheKey":"data:wydmen0:cctv","hit":true,"dataType":"cctv","dataCount":7,"dataSize":926,"l2CacheGetDurationNs":448200},{"geohashId":"wydmen2","cacheKey":"data:wydmen2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":185600},{"geohashId":"wydmen3","cacheKey":"data:wydmen3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":365500},{"geohashId":"wydmen1","cacheKey":"data:wydmen1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":166700},{"geohashId":"wydmejc","cacheKey":"data:wydmejc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":143300},{"geohashId":"wydmejb","cacheKey":"data:wydmejb:cctv","hit":true,"dataType":"cctv","dataCount":6,"dataSize":796,"l2CacheGetDurationNs":274100},{"geohashId":"wydmdvz","cacheKey":"data:wydmdvz:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":263,"l2CacheGetDurationNs":320800},{"geohashId":"wydmdyp","cacheKey":"data:wydmdyp:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":263,"l2CacheGetDurationNs":366800},{"geohashId":"wydmdyr","cacheKey":"data:wydmdyr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":163400}],"l2TotalHits":4,"l2TotalMisses":5,"l2CacheTotalDurationNs":2853800,"l2JsonDeserializeTotalDurationNs":294000,"errorMessage":null,"success":true}}
2025-11-21 19:57:06.424 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:06.424169400Z","nanoTime":28212438759600,"traceId":"8d139eb6","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:57:06.424 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:57:06.424 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 5개
2025-11-21 19:57:06.428 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 11건
2025-11-21 19:57:06.429 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:57:06.429 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:57:06.429 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:06.429230800Z","nanoTime":28212443938100,"traceId":"8d139eb6","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5178500,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydmen2","wydmen3","wydmen1","wydmejc","wydmdyr"],"cctvQueryResult":{"queryGeohashIds":["wydmen2","wydmen3","wydmen1","wydmejc","wydmdyr"],"totalRowsReturned":11,"rowsPerGrid":{"wydmdyr":1,"wydmejc":3,"wydmen1":2,"wydmen2":3,"wydmen3":2},"queryExecutionTimeNs":3340400,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdyr","cacheKey":"data:wydmdyr:cctv","dataCount":1,"dataSize":133,"errorMessage":null,"success":true},{"geohashId":"wydmejc","cacheKey":"data:wydmejc:cctv","dataCount":3,"dataSize":397,"errorMessage":null,"success":true},{"geohashId":"wydmen1","cacheKey":"data:wydmen1:cctv","dataCount":2,"dataSize":266,"errorMessage":null,"success":true},{"geohashId":"wydmen2","cacheKey":"data:wydmen2:cctv","dataCount":3,"dataSize":398,"errorMessage":null,"success":true},{"geohashId":"wydmen3","cacheKey":"data:wydmen3:cctv","dataCount":2,"dataSize":267,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:57:06.429 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:06.429230800Z","nanoTime":28212444111700,"traceId":"8d139eb6","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:57:06.429 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:57:06.429 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.562834349686185, 127.04706212716361)
2025-11-21 19:57:06.429 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:57:06.494 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:57:06.494 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:57:06.494 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:57:06.494 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.562834349686185, 127.04706212716361), 반경: 500m
2025-11-21 19:57:06.577 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:57:06.577 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 105건
2025-11-21 19:57:06.578 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:57:06.578 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:57:06.578 [http-nio-8185-exec-4] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:57:06.578 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:57:06.578 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:57:06.578 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:57:06.578 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:57:06.578 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:06.578607500Z","nanoTime":28212593357200,"traceId":"8d139eb6","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":149245500,"duration_ms":149,"resultData":{"latitude":37.562834349686185,"longitude":127.04706212716361,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":149117400,"addressApiResult":{"cached":false,"cacheKey":"address:37.562834349686185:127.04706212716361","roadAddress":"주소 없음","jibunAddress":"서울 성동구 사근동 226-42","responseSize":60,"executionTimeNs":65447600,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":43400,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.562834349686185:127.04706212716361:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":2,"CS2":13,"SC4":4,"MT1":0,"BK9":13,"HP8":15,"AC5":9,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":9,"OL7":0,"PM9":5},"totalPlaces":105,"responseSize":12211,"executionTimeNs":83626400,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:06.578 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:06.578607500Z","nanoTime":28212593568700,"traceId":"8d139eb6","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:57:06.578 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:57:06.578 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:57:06.578 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 28개
2025-11-21 19:57:06.578 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 28개 (총 카메라 대수: 85대)
2025-11-21 19:57:06.578 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:57:06.661 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 성동구  마장로 205 (거리: 467m)
2025-11-21 19:57:06.661 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:57:06.661 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:57:06.661 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 19:57:06.661 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:57:06.661 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:06.661909100Z","nanoTime":28212682276500,"traceId":"8d139eb6","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":88707800,"duration_ms":88,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":28,"totalCctvAfterFilter":28,"totalCameraCount":85,"filterRate":1.0,"filterExecutionTimeNs":21500,"success":true},"policeQuery":{"queryDurationNs":88136100,"found":true,"nearestAddress":"서울특별시 성동구  마장로 205","nearestDistance":467.18755680809005,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"AT4":2,"CS2":13,"SC4":4,"BK9":13,"HP8":15,"AC5":9,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":9,"PM9":5},"placesAfterFilter":{"CT1":1,"AT4":2,"CS2":13,"SC4":4,"BK9":13,"HP8":15,"AC5":9,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":9,"PM9":5},"totalBeforeFilter":105,"totalAfterFilter":105,"filterRate":1.0,"filterExecutionTimeNs":155400,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:06.661 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:06.661909100Z","nanoTime":28212682493900,"traceId":"8d139eb6","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:57:06.661 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:57:06.661 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 49.81, 편의성: 32.02, 종합: 40.92
2025-11-21 19:57:06.661 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:06.661909100Z","nanoTime":28212682767600,"traceId":"8d139eb6","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":273700,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":41.601555398988744,"policeDistance":467.18755680809005,"cctvScore":93.33333333333333,"cctvCount":28,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":49.81379995302996,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"AT4":6.0,"CS2":3.25,"SC4":8.0,"BK9":65.0,"HP8":100.0,"AC5":9.0,"CE7":30.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":27.0,"PM9":40.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":32.01923076923077,"success":true},"overallScore":40.916515361130365,"errorMessage":null,"success":true}}
2025-11-21 19:57:06.661 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:06.661909100Z","nanoTime":28212682918000,"traceId":"8d139eb6","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:57:06.661 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:57:06.661 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 성동구  마장로 205, latitude=37.564783, longitude=127.051758, geohashId=wydmenk)
2025-11-21 19:57:06.661 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 467.18755680809005
2025-11-21 19:57:06.670 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmen0
2025-11-21 19:57:06.670 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:57:06.670 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:06.670060300Z","nanoTime":28212684504100,"traceId":"8d139eb6","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1586100,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["학교이(가) 62m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmen0","dataSize":16593,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":16593,"errorMessage":null,"success":true}}
2025-11-21 19:57:06.670 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:57:06.753 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:57:06.753 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56471091019168, longitude=127.04033997830224, radius=500)
2025-11-21 19:57:06.753 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:57:06.753 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56471091019168, longitude=127.04033997830224, radius=500
2025-11-21 19:57:06.753 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:06.753913500Z","nanoTime":28212767905000,"traceId":"4c60c87d","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:57:06.753 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:57:06.753 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56471091019168, lon=127.04033997830224
2025-11-21 19:57:06.753 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:06.753913500Z","nanoTime":28212767962300,"traceId":"4c60c87d","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:57:06.753 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:06.753913500Z","nanoTime":28212767992800,"traceId":"4c60c87d","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":30500,"duration_ms":0,"resultData":{"latitude":37.56471091019168,"longitude":127.04033997830224,"precision":7,"centerHash":"wydmdy7","adjacentHashes":["wydmdy7","wydmdye","wydmdys","wydmdyk","wydmdyh","wydmdy5","wydmdy4","wydmdy6","wydmdyd"],"errorMessage":null,"success":true}}
2025-11-21 19:57:06.753 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdy7, wydmdye, wydmdys, wydmdyk, wydmdyh, wydmdy5, wydmdy4, wydmdy6, wydmdyd]
2025-11-21 19:57:06.753 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdy7
2025-11-21 19:57:06.753 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:06.753913500Z","nanoTime":28212768079000,"traceId":"4c60c87d","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":174000,"duration_ms":0,"resultData":{"requestLatitude":37.56471091019168,"requestLongitude":127.04033997830224,"requestRadius":500,"centerGeohashId":"wydmdy7","nineBlockGeohashes":["wydmdy7","wydmdye","wydmdys","wydmdyk","wydmdyh","wydmdy5","wydmdy4","wydmdy6","wydmdyd"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:57:06.753 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:06.753913500Z","nanoTime":28212768110200,"traceId":"4c60c87d","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:57:06.753 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:57:06.753 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdy7
2025-11-21 19:57:06.753 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3513ms)
2025-11-21 19:57:06.753 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:57:06.755 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:57:06.755 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 3개, 미스: 6개
2025-11-21 19:57:06.755 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.5992ms, 역직렬화: 0.1227ms
2025-11-21 19:57:06.755 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:57:06.755 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:06.755351Z","nanoTime":28212770274300,"traceId":"4c60c87d","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2164100,"duration_ms":2,"resultData":{"centerGeohashId":"wydmdy7","nineBlockGeohashes":["wydmdy7","wydmdye","wydmdys","wydmdyk","wydmdyh","wydmdy5","wydmdy4","wydmdy6","wydmdyd"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdy7","hit":false,"valueSize":0,"l1CacheGetDurationNs":351300,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdy7","cacheKey":"data:wydmdy7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":133000},{"geohashId":"wydmdye","cacheKey":"data:wydmdye:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":113800},{"geohashId":"wydmdys","cacheKey":"data:wydmdys:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":265,"l2CacheGetDurationNs":249400},{"geohashId":"wydmdyk","cacheKey":"data:wydmdyk:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":527,"l2CacheGetDurationNs":287100},{"geohashId":"wydmdyh","cacheKey":"data:wydmdyh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":106300},{"geohashId":"wydmdy5","cacheKey":"data:wydmdy5:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":399,"l2CacheGetDurationNs":192600},{"geohashId":"wydmdy4","cacheKey":"data:wydmdy4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":97000},{"geohashId":"wydmdy6","cacheKey":"data:wydmdy6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":125600},{"geohashId":"wydmdyd","cacheKey":"data:wydmdyd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":99400}],"l2TotalHits":3,"l2TotalMisses":6,"l2CacheTotalDurationNs":1599200,"l2JsonDeserializeTotalDurationNs":122700,"errorMessage":null,"success":true}}
2025-11-21 19:57:06.755 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:06.755351Z","nanoTime":28212770449900,"traceId":"4c60c87d","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:57:06.755 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:57:06.755 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 6개
2025-11-21 19:57:06.759 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 11건
2025-11-21 19:57:06.760 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:57:06.760 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 7개
2025-11-21 19:57:06.760 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:06.760407100Z","nanoTime":28212775010600,"traceId":"4c60c87d","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4560700,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmdy7","wydmdye","wydmdyh","wydmdy4","wydmdy6","wydmdyd"],"cctvQueryResult":{"queryGeohashIds":["wydmdy7","wydmdye","wydmdyh","wydmdy4","wydmdy6","wydmdyd"],"totalRowsReturned":11,"rowsPerGrid":{"wydmdyd":3,"wydmdye":3,"wydmdy6":1,"wydmdy7":4},"queryExecutionTimeNs":3528400,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdyd","cacheKey":"data:wydmdyd:cctv","dataCount":3,"dataSize":394,"errorMessage":null,"success":true},{"geohashId":"wydmdye","cacheKey":"data:wydmdye:cctv","dataCount":3,"dataSize":394,"errorMessage":null,"success":true},{"geohashId":"wydmdy6","cacheKey":"data:wydmdy6:cctv","dataCount":1,"dataSize":134,"errorMessage":null,"success":true},{"geohashId":"wydmdy7","cacheKey":"data:wydmdy7:cctv","dataCount":4,"dataSize":530,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:57:06.760 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:06.760407100Z","nanoTime":28212775104000,"traceId":"4c60c87d","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:57:06.760 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:57:06.760 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56471091019168, 127.04033997830224)
2025-11-21 19:57:06.761 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:57:06.833 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:57:06.833 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:57:06.833 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:57:06.833 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56471091019168, 127.04033997830224), 반경: 500m
2025-11-21 19:57:06.926 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:57:06.927 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 137건
2025-11-21 19:57:06.928 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:57:06.928 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:57:06.928 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 19:57:06.929 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 성동구
2025-11-21 19:57:06.929 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:57:06.929 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:57:06.929 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:57:06.929 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 19:57:06.929 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:06.929692500Z","nanoTime":28212944010200,"traceId":"4c60c87d","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":168906200,"duration_ms":168,"resultData":{"latitude":37.56471091019168,"longitude":127.04033997830224,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":168764700,"addressApiResult":{"cached":false,"cacheKey":"address:37.56471091019168:127.04033997830224","roadAddress":"서울특별시 성동구 마조로15가길 23","jibunAddress":"서울 성동구 마장동 831","responseSize":72,"executionTimeNs":72750400,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":783600,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56471091019168:127.04033997830224:500","categoryCount":15,"placesByCategory":{"CT1":2,"AT4":3,"CS2":15,"SC4":5,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":5,"PO3":5,"FD6":15,"PK6":15,"OL7":2,"PM9":9},"totalPlaces":137,"responseSize":15823,"executionTimeNs":95230700,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:06.929 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:06.929692500Z","nanoTime":28212944256000,"traceId":"4c60c87d","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:57:06.929 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:57:06.929 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:57:06.929 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 20개
2025-11-21 19:57:06.929 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 20개 (총 카메라 대수: 56대)
2025-11-21 19:57:06.929 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:57:07.008 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구  선유로 95 (거리: 507m)
2025-11-21 19:57:07.008 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:57:07.008 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:57:07.008 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:57:07.008 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:57:07.008 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:07.008677400Z","nanoTime":28213022749800,"traceId":"4c60c87d","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":78493800,"duration_ms":78,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":20,"totalCctvAfterFilter":20,"totalCameraCount":56,"filterRate":1.0,"filterExecutionTimeNs":23900,"success":true},"policeQuery":{"queryDurationNs":77791700,"found":true,"nearestAddress":"서울특별시 영등포구  선유로 95","nearestDistance":506.9206222116542,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":2,"AT4":3,"CS2":15,"SC4":5,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":5,"PO3":5,"FD6":15,"PK6":15,"OL7":2,"PM9":9},"placesAfterFilter":{"CT1":2,"AT4":3,"CS2":15,"SC4":5,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":5,"PO3":5,"FD6":15,"PK6":15,"OL7":2,"PM9":9},"totalBeforeFilter":137,"totalAfterFilter":137,"filterRate":1.0,"filterExecutionTimeNs":195100,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:07.008 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:07.008677400Z","nanoTime":28213022968600,"traceId":"4c60c87d","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:57:07.008 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:57:07.008 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 60.01, 편의성: 34.62, 종합: 47.32
2025-11-21 19:57:07.008 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:07.008677400Z","nanoTime":28213023210800,"traceId":"4c60c87d","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":242200,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":36.63492222354323,"policeDistance":506.9206222116542,"cctvScore":66.66666666666666,"cctvCount":20,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":60.01206621372964,"success":true},"convenienceScore":{"categoryScores":{"CT1":8.0,"AT4":9.0,"CS2":5.333162672127825,"SC4":10.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":15.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":72.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":34.62221084480852,"success":true},"overallScore":47.31713852926908,"errorMessage":null,"success":true}}
2025-11-21 19:57:07.008 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:07.008677400Z","nanoTime":28213023345200,"traceId":"4c60c87d","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:57:07.008 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:57:07.008 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구  선유로 95, latitude=37.560301, longitude=127.041798, geohashId=wydmdvt)
2025-11-21 19:57:07.008 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 506.9206222116542
2025-11-21 19:57:07.008 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdy7
2025-11-21 19:57:07.008 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:57:07.008 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:07.008677400Z","nanoTime":28213024623200,"traceId":"4c60c87d","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1278000,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["음식점이(가) 49m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdy7","dataSize":19136,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19136,"errorMessage":null,"success":true}}
2025-11-21 19:57:07.008 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:57:07.112 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:57:07.112 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.566551079880114, longitude=127.03350428558724, radius=500)
2025-11-21 19:57:07.112 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:57:07.112 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.566551079880114, longitude=127.03350428558724, radius=500
2025-11-21 19:57:07.112 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:07.112229600Z","nanoTime":28213126642500,"traceId":"0a5762f3","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:57:07.112 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:57:07.112 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.566551079880114, lon=127.03350428558724
2025-11-21 19:57:07.112 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:07.112229600Z","nanoTime":28213126765700,"traceId":"0a5762f3","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:57:07.112 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:07.112229600Z","nanoTime":28213126847600,"traceId":"0a5762f3","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":81900,"duration_ms":0,"resultData":{"latitude":37.566551079880114,"longitude":127.03350428558724,"precision":7,"centerHash":"wydmdwy","adjacentHashes":["wydmdwy","wydmdxn","wydmdxp","wydmdwz","wydmdwx","wydmdww","wydmdwt","wydmdwv","wydmdxj"],"errorMessage":null,"success":true}}
2025-11-21 19:57:07.112 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdwy, wydmdxn, wydmdxp, wydmdwz, wydmdwx, wydmdww, wydmdwt, wydmdwv, wydmdxj]
2025-11-21 19:57:07.112 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdwy
2025-11-21 19:57:07.112 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:07.112229600Z","nanoTime":28213127057200,"traceId":"0a5762f3","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":414700,"duration_ms":0,"resultData":{"requestLatitude":37.566551079880114,"requestLongitude":127.03350428558724,"requestRadius":500,"centerGeohashId":"wydmdwy","nineBlockGeohashes":["wydmdwy","wydmdxn","wydmdxp","wydmdwz","wydmdwx","wydmdww","wydmdwt","wydmdwv","wydmdxj"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:57:07.112 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:07.112229600Z","nanoTime":28213127117300,"traceId":"0a5762f3","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:57:07.112 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:57:07.112 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdwy
2025-11-21 19:57:07.113 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.364ms)
2025-11-21 19:57:07.113 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:57:07.116 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:57:07.116 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 4개, 미스: 5개
2025-11-21 19:57:07.116 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.3867ms, 역직렬화: 0.3052ms
2025-11-21 19:57:07.116 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:57:07.116 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:07.116267Z","nanoTime":28213130201200,"traceId":"0a5762f3","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3083900,"duration_ms":3,"resultData":{"centerGeohashId":"wydmdwy","nineBlockGeohashes":["wydmdwy","wydmdxn","wydmdxp","wydmdwz","wydmdwx","wydmdww","wydmdwt","wydmdwv","wydmdxj"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdwy","hit":false,"valueSize":0,"l1CacheGetDurationNs":364000,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdwy","cacheKey":"data:wydmdwy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":278200},{"geohashId":"wydmdxn","cacheKey":"data:wydmdxn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":139800},{"geohashId":"wydmdxp","cacheKey":"data:wydmdxp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":156900},{"geohashId":"wydmdwz","cacheKey":"data:wydmdwz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":133000},{"geohashId":"wydmdwx","cacheKey":"data:wydmdwx:cctv","hit":true,"dataType":"cctv","dataCount":6,"dataSize":785,"l2CacheGetDurationNs":312500},{"geohashId":"wydmdww","cacheKey":"data:wydmdww:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":160500},{"geohashId":"wydmdwt","cacheKey":"data:wydmdwt:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":651,"l2CacheGetDurationNs":273100},{"geohashId":"wydmdwv","cacheKey":"data:wydmdwv:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":131,"l2CacheGetDurationNs":271600},{"geohashId":"wydmdxj","cacheKey":"data:wydmdxj:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":129,"l2CacheGetDurationNs":236500}],"l2TotalHits":4,"l2TotalMisses":5,"l2CacheTotalDurationNs":2386700,"l2JsonDeserializeTotalDurationNs":305200,"errorMessage":null,"success":true}}
2025-11-21 19:57:07.116 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:07.116267Z","nanoTime":28213130390200,"traceId":"0a5762f3","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:57:07.116 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:57:07.116 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 5개
2025-11-21 19:57:07.119 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 23건
2025-11-21 19:57:07.121 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:57:07.121 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:57:07.121 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:07.121481500Z","nanoTime":28213135705900,"traceId":"0a5762f3","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5315700,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydmdwy","wydmdxn","wydmdxp","wydmdwz","wydmdww"],"cctvQueryResult":{"queryGeohashIds":["wydmdwy","wydmdxn","wydmdxp","wydmdwz","wydmdww"],"totalRowsReturned":23,"rowsPerGrid":{"wydmdxp":6,"wydmdwz":4,"wydmdxn":3,"wydmdww":7,"wydmdwy":3},"queryExecutionTimeNs":3484800,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdxp","cacheKey":"data:wydmdxp:cctv","dataCount":6,"dataSize":788,"errorMessage":null,"success":true},{"geohashId":"wydmdwz","cacheKey":"data:wydmdwz:cctv","dataCount":4,"dataSize":532,"errorMessage":null,"success":true},{"geohashId":"wydmdxn","cacheKey":"data:wydmdxn:cctv","dataCount":3,"dataSize":395,"errorMessage":null,"success":true},{"geohashId":"wydmdww","cacheKey":"data:wydmdww:cctv","dataCount":7,"dataSize":910,"errorMessage":null,"success":true},{"geohashId":"wydmdwy","cacheKey":"data:wydmdwy:cctv","dataCount":3,"dataSize":362,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:57:07.121 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:07.121481500Z","nanoTime":28213135824000,"traceId":"0a5762f3","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:57:07.121 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:57:07.121 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.566551079880114, 127.03350428558724)
2025-11-21 19:57:07.121 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:57:07.193 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:57:07.193 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:57:07.193 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:57:07.193 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.566551079880114, 127.03350428558724), 반경: 500m
2025-11-21 19:57:07.296 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:57:07.296 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 131건
2025-11-21 19:57:07.296 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:57:07.296 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:57:07.296 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 19:57:07.296 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 성동구
2025-11-21 19:57:07.296 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:57:07.296 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:57:07.296 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:57:07.296 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 19:57:07.296 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:07.296699300Z","nanoTime":28213315256100,"traceId":"0a5762f3","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":179432100,"duration_ms":179,"resultData":{"latitude":37.566551079880114,"longitude":127.03350428558724,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":179294100,"addressApiResult":{"cached":false,"cacheKey":"address:37.566551079880114:127.03350428558724","roadAddress":"서울특별시 성동구 마장로 219","jibunAddress":"서울 성동구 홍익동 119-1","responseSize":71,"executionTimeNs":72223100,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":577200,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.566551079880114:127.03350428558724:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":2,"CS2":15,"SC4":2,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalPlaces":131,"responseSize":15152,"executionTimeNs":106493800,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:07.296 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:07.296699300Z","nanoTime":28213315546000,"traceId":"0a5762f3","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:57:07.296 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:57:07.296 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:57:07.296 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 36개
2025-11-21 19:57:07.296 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 36개 (총 카메라 대수: 111대)
2025-11-21 19:57:07.296 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:57:07.381 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구 대림로 197 (거리: 76m)
2025-11-21 19:57:07.381 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:57:07.381 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:57:07.381 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:57:07.381 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:57:07.381 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:07.381159400Z","nanoTime":28213396682100,"traceId":"0a5762f3","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":81136100,"duration_ms":81,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":36,"totalCctvAfterFilter":36,"totalCameraCount":111,"filterRate":1.0,"filterExecutionTimeNs":18900,"success":true},"policeQuery":{"queryDurationNs":80590600,"found":true,"nearestAddress":"서울특별시 영등포구 대림로 197","nearestDistance":75.91868773941385,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"AT4":2,"CS2":15,"SC4":2,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"placesAfterFilter":{"CT1":1,"AT4":2,"CS2":15,"SC4":2,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalBeforeFilter":131,"totalAfterFilter":131,"filterRate":1.0,"filterExecutionTimeNs":175100,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:07.381 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:07.381159400Z","nanoTime":28213396872600,"traceId":"0a5762f3","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:57:07.381 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:57:07.381 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 89.51, 편의성: 35.36, 종합: 62.43
2025-11-21 19:57:07.381 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:07.381159400Z","nanoTime":28213397119800,"traceId":"0a5762f3","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":247200,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":90.51016403257327,"policeDistance":75.91868773941385,"cctvScore":100.0,"cctvCount":36,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":89.50797208977198,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"AT4":6.0,"CS2":5.333162672127825,"SC4":4.0,"MT1":20.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":6.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":35.355544178141855,"success":true},"overallScore":62.43175813395692,"errorMessage":null,"success":true}}
2025-11-21 19:57:07.381 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:07.381159400Z","nanoTime":28213397266000,"traceId":"0a5762f3","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:57:07.381 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:57:07.381 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구 대림로 197, latitude=37.566665, longitude=127.032655, geohashId=wydmdwy)
2025-11-21 19:57:07.383 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 75.91868773941385
2025-11-21 19:57:07.383 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdwy
2025-11-21 19:57:07.383 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:57:07.383 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:07.383593900Z","nanoTime":28213398714800,"traceId":"0a5762f3","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1448800,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["이 지역은 안전 인프라가 잘 갖춰져 있습니다.","병원이(가) 57m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdwy","dataSize":20284,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20284,"errorMessage":null,"success":true}}
2025-11-21 19:57:07.383 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:57:08.973 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:57:08.973 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56211921954065, longitude=127.02960879029571, radius=500)
2025-11-21 19:57:08.973 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:57:08.973 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56211921954065, longitude=127.02960879029571, radius=500
2025-11-21 19:57:08.974 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:08.973629Z","nanoTime":28214988363100,"traceId":"82ddaf71","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:57:08.974 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:57:08.974 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56211921954065, lon=127.02960879029571
2025-11-21 19:57:08.974 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:08.974630200Z","nanoTime":28214988447300,"traceId":"82ddaf71","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:57:08.974 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:08.974630200Z","nanoTime":28214988489500,"traceId":"82ddaf71","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":42200,"duration_ms":0,"resultData":{"latitude":37.56211921954065,"longitude":127.02960879029571,"precision":7,"centerHash":"wydmdtu","adjacentHashes":["wydmdtu","wydmdwh","wydmdwj","wydmdtv","wydmdtt","wydmdts","wydmdte","wydmdtg","wydmdw5"],"errorMessage":null,"success":true}}
2025-11-21 19:57:08.974 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdtu, wydmdwh, wydmdwj, wydmdtv, wydmdtt, wydmdts, wydmdte, wydmdtg, wydmdw5]
2025-11-21 19:57:08.974 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdtu
2025-11-21 19:57:08.974 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:08.974630200Z","nanoTime":28214988599800,"traceId":"82ddaf71","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":236700,"duration_ms":0,"resultData":{"requestLatitude":37.56211921954065,"requestLongitude":127.02960879029571,"requestRadius":500,"centerGeohashId":"wydmdtu","nineBlockGeohashes":["wydmdtu","wydmdwh","wydmdwj","wydmdtv","wydmdtt","wydmdts","wydmdte","wydmdtg","wydmdw5"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:57:08.974 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:08.974630200Z","nanoTime":28214988636700,"traceId":"82ddaf71","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:57:08.974 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:57:08.974 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdtu
2025-11-21 19:57:08.974 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5965ms)
2025-11-21 19:57:08.974 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:57:08.977 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:57:08.977 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 4개, 미스: 5개
2025-11-21 19:57:08.977 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 3.7831ms, 역직렬화: 0.3115ms
2025-11-21 19:57:08.977 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:57:08.977 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:08.977995600Z","nanoTime":28214993363400,"traceId":"82ddaf71","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":4726700,"duration_ms":4,"resultData":{"centerGeohashId":"wydmdtu","nineBlockGeohashes":["wydmdtu","wydmdwh","wydmdwj","wydmdtv","wydmdtt","wydmdts","wydmdte","wydmdtg","wydmdw5"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdtu","hit":false,"valueSize":0,"l1CacheGetDurationNs":596500,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdtu","cacheKey":"data:wydmdtu:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":257200},{"geohashId":"wydmdwh","cacheKey":"data:wydmdwh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":238100},{"geohashId":"wydmdwj","cacheKey":"data:wydmdwj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":192500},{"geohashId":"wydmdtv","cacheKey":"data:wydmdtv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":260300},{"geohashId":"wydmdtt","cacheKey":"data:wydmdtt:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":531,"l2CacheGetDurationNs":413200},{"geohashId":"wydmdts","cacheKey":"data:wydmdts:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":137200},{"geohashId":"wydmdte","cacheKey":"data:wydmdte:cctv","hit":true,"dataType":"cctv","dataCount":8,"dataSize":1060,"l2CacheGetDurationNs":693300},{"geohashId":"wydmdtg","cacheKey":"data:wydmdtg:cctv","hit":true,"dataType":"cctv","dataCount":7,"dataSize":944,"l2CacheGetDurationNs":679200},{"geohashId":"wydmdw5","cacheKey":"data:wydmdw5:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":405,"l2CacheGetDurationNs":492600}],"l2TotalHits":4,"l2TotalMisses":5,"l2CacheTotalDurationNs":3783100,"l2JsonDeserializeTotalDurationNs":311500,"errorMessage":null,"success":true}}
2025-11-21 19:57:08.977 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:08.977995600Z","nanoTime":28214993496600,"traceId":"82ddaf71","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:57:08.977 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:57:08.977 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 5개
2025-11-21 19:57:08.984 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 24건
2025-11-21 19:57:08.986 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:57:08.986 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:57:08.986 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:08.986747900Z","nanoTime":28215001238200,"traceId":"82ddaf71","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":7741600,"duration_ms":7,"resultData":{"inputCctvMissGrids":["wydmdtu","wydmdwh","wydmdwj","wydmdtv","wydmdts"],"cctvQueryResult":{"queryGeohashIds":["wydmdtu","wydmdwh","wydmdwj","wydmdtv","wydmdts"],"totalRowsReturned":24,"rowsPerGrid":{"wydmdwj":5,"wydmdts":5,"wydmdtu":4,"wydmdwh":5,"wydmdtv":5},"queryExecutionTimeNs":5489100,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdwj","cacheKey":"data:wydmdwj:cctv","dataCount":5,"dataSize":670,"errorMessage":null,"success":true},{"geohashId":"wydmdts","cacheKey":"data:wydmdts:cctv","dataCount":5,"dataSize":669,"errorMessage":null,"success":true},{"geohashId":"wydmdtu","cacheKey":"data:wydmdtu:cctv","dataCount":4,"dataSize":538,"errorMessage":null,"success":true},{"geohashId":"wydmdwh","cacheKey":"data:wydmdwh:cctv","dataCount":5,"dataSize":673,"errorMessage":null,"success":true},{"geohashId":"wydmdtv","cacheKey":"data:wydmdtv:cctv","dataCount":5,"dataSize":638,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:57:08.986 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:08.986747900Z","nanoTime":28215001420200,"traceId":"82ddaf71","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:57:08.986 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:57:08.986 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56211921954065, 127.02960879029571)
2025-11-21 19:57:08.986 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:57:09.075 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:57:09.075 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:57:09.075 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:57:09.075 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56211921954065, 127.02960879029571), 반경: 500m
2025-11-21 19:57:09.484 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:57:09.484 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 127건
2025-11-21 19:57:09.484 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:57:09.484 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:57:09.484 [http-nio-8185-exec-8] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:57:09.484 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:57:09.484 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:57:09.484 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:57:09.484 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:57:09.484 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:09.484403100Z","nanoTime":28215503421400,"traceId":"82ddaf71","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":502001200,"duration_ms":502,"resultData":{"latitude":37.56211921954065,"longitude":127.02960879029571,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":501842000,"addressApiResult":{"cached":false,"cacheKey":"address:37.56211921954065:127.02960879029571","roadAddress":"주소 없음","jibunAddress":"서울 성동구 하왕십리동 986-82","responseSize":62,"executionTimeNs":90968600,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":49500,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56211921954065:127.02960879029571:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":0,"CS2":15,"SC4":2,"MT1":2,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalPlaces":127,"responseSize":14725,"executionTimeNs":410823900,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:09.484 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:09.484403100Z","nanoTime":28215503628500,"traceId":"82ddaf71","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:57:09.484 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:57:09.484 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:57:09.484 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 46개
2025-11-21 19:57:09.484 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 46개 (총 카메라 대수: 140대)
2025-11-21 19:57:09.484 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:57:09.561 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구 영신로20길 11 (거리: 526m)
2025-11-21 19:57:09.561 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:57:09.561 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:57:09.563 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 19:57:09.563 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:57:09.563 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:09.563146100Z","nanoTime":28215577035300,"traceId":"82ddaf71","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":73406800,"duration_ms":73,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":46,"totalCctvAfterFilter":46,"totalCameraCount":140,"filterRate":1.0,"filterExecutionTimeNs":24700,"success":true},"policeQuery":{"queryDurationNs":72893000,"found":true,"nearestAddress":"서울특별시 영등포구 영신로20길 11","nearestDistance":525.7775970166765,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CS2":15,"SC4":2,"MT1":2,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"placesAfterFilter":{"CS2":15,"SC4":2,"MT1":2,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalBeforeFilter":127,"totalAfterFilter":127,"filterRate":1.0,"filterExecutionTimeNs":136900,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:09.563 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:09.563146100Z","nanoTime":28215577202900,"traceId":"82ddaf71","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:57:09.563 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:57:09.563 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 50.28, 편의성: 39.52, 종합: 44.90
2025-11-21 19:57:09.563 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:09.563146100Z","nanoTime":28215577630700,"traceId":"82ddaf71","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":427800,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":34.277800372915436,"policeDistance":525.7775970166765,"cctvScore":100.0,"cctvCount":46,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":50.28334011187463,"success":true},"convenienceScore":{"categoryScores":{"CS2":3.75,"SC4":4.0,"MT1":20.0,"BK9":70.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":6.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":39.51923076923077,"success":true},"overallScore":44.9012854405527,"errorMessage":null,"success":true}}
2025-11-21 19:57:09.563 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:09.563146100Z","nanoTime":28215577730400,"traceId":"82ddaf71","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:57:09.563 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:57:09.563 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구 영신로20길 11, latitude=37.557429, longitude=127.028852, geohashId=wydmdt5)
2025-11-21 19:57:09.563 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 525.7775970166765
2025-11-21 19:57:09.563 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdtu
2025-11-21 19:57:09.563 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:57:09.563 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:09.563146100Z","nanoTime":28215578720500,"traceId":"82ddaf71","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":990100,"duration_ms":0,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["카페이(가) 84m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdtu","dataSize":21049,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":21049,"errorMessage":null,"success":true}}
2025-11-21 19:57:09.563 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:57:10.610 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:57:10.610 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56260718151571, longitude=127.02324803218221, radius=500)
2025-11-21 19:57:10.610 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:57:10.610 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56260718151571, longitude=127.02324803218221, radius=500
2025-11-21 19:57:10.610 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:10.610628300Z","nanoTime":28216624759500,"traceId":"61fe8c00","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:57:10.610 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:57:10.610 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56260718151571, lon=127.02324803218221
2025-11-21 19:57:10.610 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:10.610628300Z","nanoTime":28216624873000,"traceId":"61fe8c00","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:57:10.611 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:10.611181900Z","nanoTime":28216624945300,"traceId":"61fe8c00","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":72300,"duration_ms":0,"resultData":{"latitude":37.56260718151571,"longitude":127.02324803218221,"precision":7,"centerHash":"wydmdqp","adjacentHashes":["wydmdqp","wydmdqr","wydmdw2","wydmdw0","wydmdtb","wydmdmz","wydmdmy","wydmdqn","wydmdqq"],"errorMessage":null,"success":true}}
2025-11-21 19:57:10.611 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdqp, wydmdqr, wydmdw2, wydmdw0, wydmdtb, wydmdmz, wydmdmy, wydmdqn, wydmdqq]
2025-11-21 19:57:10.611 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdqp
2025-11-21 19:57:10.611 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:10.611181900Z","nanoTime":28216625135200,"traceId":"61fe8c00","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":375700,"duration_ms":0,"resultData":{"requestLatitude":37.56260718151571,"requestLongitude":127.02324803218221,"requestRadius":500,"centerGeohashId":"wydmdqp","nineBlockGeohashes":["wydmdqp","wydmdqr","wydmdw2","wydmdw0","wydmdtb","wydmdmz","wydmdmy","wydmdqn","wydmdqq"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:57:10.611 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:10.611181900Z","nanoTime":28216625197400,"traceId":"61fe8c00","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:57:10.611 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:57:10.611 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdqp
2025-11-21 19:57:10.611 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4172ms)
2025-11-21 19:57:10.611 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:57:10.614 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:57:10.615 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 7개, 미스: 2개
2025-11-21 19:57:10.615 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 3.6378ms, 역직렬화: 0.3104ms
2025-11-21 19:57:10.615 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:57:10.615 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:10.615795600Z","nanoTime":28216629613500,"traceId":"61fe8c00","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":4416100,"duration_ms":4,"resultData":{"centerGeohashId":"wydmdqp","nineBlockGeohashes":["wydmdqp","wydmdqr","wydmdw2","wydmdw0","wydmdtb","wydmdmz","wydmdmy","wydmdqn","wydmdqq"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdqp","hit":false,"valueSize":0,"l1CacheGetDurationNs":417200,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdqp","cacheKey":"data:wydmdqp:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":522,"l2CacheGetDurationNs":376400},{"geohashId":"wydmdqr","cacheKey":"data:wydmdqr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":169300},{"geohashId":"wydmdw2","cacheKey":"data:wydmdw2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":126100},{"geohashId":"wydmdw0","cacheKey":"data:wydmdw0:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":654,"l2CacheGetDurationNs":445500},{"geohashId":"wydmdtb","cacheKey":"data:wydmdtb:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":132,"l2CacheGetDurationNs":542400},{"geohashId":"wydmdmz","cacheKey":"data:wydmdmz:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":267,"l2CacheGetDurationNs":429700},{"geohashId":"wydmdmy","cacheKey":"data:wydmdmy:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":262,"l2CacheGetDurationNs":493300},{"geohashId":"wydmdqn","cacheKey":"data:wydmdqn:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":654,"l2CacheGetDurationNs":312600},{"geohashId":"wydmdqq","cacheKey":"data:wydmdqq:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":132,"l2CacheGetDurationNs":307100}],"l2TotalHits":7,"l2TotalMisses":2,"l2CacheTotalDurationNs":3637800,"l2JsonDeserializeTotalDurationNs":310400,"errorMessage":null,"success":true}}
2025-11-21 19:57:10.615 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:10.615795600Z","nanoTime":28216629745900,"traceId":"61fe8c00","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:57:10.615 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:57:10.615 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 2개
2025-11-21 19:57:10.620 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 3건
2025-11-21 19:57:10.621 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:57:10.621 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:57:10.622 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:10.621392100Z","nanoTime":28216635930400,"traceId":"61fe8c00","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6184500,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydmdqr","wydmdw2"],"cctvQueryResult":{"queryGeohashIds":["wydmdqr","wydmdw2"],"totalRowsReturned":3,"rowsPerGrid":{"wydmdqr":3},"queryExecutionTimeNs":5183700,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdqr","cacheKey":"data:wydmdqr:cctv","dataCount":3,"dataSize":389,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:57:10.622 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:10.622206400Z","nanoTime":28216636156300,"traceId":"61fe8c00","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:57:10.622 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:57:10.622 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56260718151571, 127.02324803218221)
2025-11-21 19:57:10.622 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:57:10.693 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:57:10.693 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:57:10.694 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:57:10.694 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56260718151571, 127.02324803218221), 반경: 500m
2025-11-21 19:57:10.778 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:57:10.778 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 128건
2025-11-21 19:57:10.778 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:57:10.778 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:57:10.778 [http-nio-8185-exec-9] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:57:10.778 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:57:10.778 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:57:10.778 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:57:10.778 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:57:10.778 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:10.778194500Z","nanoTime":28216793433300,"traceId":"61fe8c00","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":157277000,"duration_ms":157,"resultData":{"latitude":37.56260718151571,"longitude":127.02324803218221,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":157145400,"addressApiResult":{"cached":false,"cacheKey":"address:37.56260718151571:127.02324803218221","roadAddress":"주소 없음","jibunAddress":"서울 중구 신당동 851-3","responseSize":58,"executionTimeNs":72307800,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":31800,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56260718151571:127.02324803218221:500","categoryCount":15,"placesByCategory":{"CT1":2,"AT4":3,"CS2":15,"SC4":3,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":11},"totalPlaces":128,"responseSize":14898,"executionTimeNs":84805800,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:10.778 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:10.778194500Z","nanoTime":28216793659300,"traceId":"61fe8c00","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:57:10.778 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:57:10.778 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:57:10.778 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 23개
2025-11-21 19:57:10.778 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 23개 (총 카메라 대수: 73대)
2025-11-21 19:57:10.778 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:57:10.861 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: "서울특별시 중구  다산로 248 (신당동, 신당파출소)" (거리: 663m)
2025-11-21 19:57:10.863 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:57:10.863 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:57:10.863 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:57:10.863 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:57:10.863 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:10.863271200Z","nanoTime":28216877540400,"traceId":"61fe8c00","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":83881100,"duration_ms":83,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":23,"totalCctvAfterFilter":23,"totalCameraCount":73,"filterRate":1.0,"filterExecutionTimeNs":19000,"success":true},"policeQuery":{"queryDurationNs":83157400,"found":true,"nearestAddress":"\"서울특별시 중구  다산로 248 (신당동, 신당파출소)\"","nearestDistance":662.8104989604169,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":2,"AT4":3,"CS2":15,"SC4":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":11},"placesAfterFilter":{"CT1":2,"AT4":3,"CS2":15,"SC4":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":11},"totalBeforeFilter":128,"totalAfterFilter":128,"filterRate":1.0,"filterExecutionTimeNs":218200,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:10.863 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:10.863271200Z","nanoTime":28216877865400,"traceId":"61fe8c00","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:57:10.863 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:57:10.863 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 35.81, 편의성: 36.13, 종합: 35.97
2025-11-21 19:57:10.863 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:10.863271200Z","nanoTime":28216878136000,"traceId":"61fe8c00","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":270600,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":17.148687629947887,"policeDistance":662.8104989604169,"cctvScore":76.66666666666667,"cctvCount":23,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":35.811272955651035,"success":true},"convenienceScore":{"categoryScores":{"CT1":8.0,"AT4":9.0,"CS2":3.75,"SC4":6.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":6.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":88.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":36.125,"success":true},"overallScore":35.96813647782552,"errorMessage":null,"success":true}}
2025-11-21 19:57:10.863 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:10.863271200Z","nanoTime":28216878252000,"traceId":"61fe8c00","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:57:10.863 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:57:10.863 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address="서울특별시 중구  다산로 248 (신당동, 신당파출소)", latitude=37.56504, longitude=127.016383, geohashId=wydmdqd)
2025-11-21 19:57:10.863 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 662.8104989604169
2025-11-21 19:57:10.863 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdqp
2025-11-21 19:57:10.863 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:57:10.863 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:10.863271200Z","nanoTime":28216879656300,"traceId":"61fe8c00","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1404300,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["주차장이(가) 150m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdqp","dataSize":18781,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":18781,"errorMessage":null,"success":true}}
2025-11-21 19:57:10.863 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:57:11.394 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:57:11.394 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.564983853103094, longitude=127.03166994164609, radius=500)
2025-11-21 19:57:11.394 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:57:11.394 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.564983853103094, longitude=127.03166994164609, radius=500
2025-11-21 19:57:11.394 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:11.394625400Z","nanoTime":28217409134900,"traceId":"801d656a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:57:11.394 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:57:11.394 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.564983853103094, lon=127.03166994164609
2025-11-21 19:57:11.394 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:11.394625400Z","nanoTime":28217409217700,"traceId":"801d656a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:57:11.394 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:11.394625400Z","nanoTime":28217409270400,"traceId":"801d656a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":52700,"duration_ms":0,"resultData":{"latitude":37.564983853103094,"longitude":127.03166994164609,"precision":7,"centerHash":"wydmdwm","adjacentHashes":["wydmdwm","wydmdwt","wydmdww","wydmdwq","wydmdwn","wydmdwj","wydmdwh","wydmdwk","wydmdws"],"errorMessage":null,"success":true}}
2025-11-21 19:57:11.394 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdwm, wydmdwt, wydmdww, wydmdwq, wydmdwn, wydmdwj, wydmdwh, wydmdwk, wydmdws]
2025-11-21 19:57:11.394 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdwm
2025-11-21 19:57:11.395 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:11.395628300Z","nanoTime":28217409380700,"traceId":"801d656a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":245800,"duration_ms":0,"resultData":{"requestLatitude":37.564983853103094,"requestLongitude":127.03166994164609,"requestRadius":500,"centerGeohashId":"wydmdwm","nineBlockGeohashes":["wydmdwm","wydmdwt","wydmdww","wydmdwq","wydmdwn","wydmdwj","wydmdwh","wydmdwk","wydmdws"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:57:11.395 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:11.395628300Z","nanoTime":28217409432700,"traceId":"801d656a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:57:11.395 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:57:11.395 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdwm
2025-11-21 19:57:11.395 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3816ms)
2025-11-21 19:57:11.395 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:57:11.398 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:57:11.398 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 6개, 미스: 3개
2025-11-21 19:57:11.398 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 3.1584ms, 역직렬화: 0.2511ms
2025-11-21 19:57:11.398 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:57:11.398 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:11.398604300Z","nanoTime":28217413246700,"traceId":"801d656a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3814000,"duration_ms":3,"resultData":{"centerGeohashId":"wydmdwm","nineBlockGeohashes":["wydmdwm","wydmdwt","wydmdww","wydmdwq","wydmdwn","wydmdwj","wydmdwh","wydmdwk","wydmdws"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdwm","hit":false,"valueSize":0,"l1CacheGetDurationNs":381600,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdwm","cacheKey":"data:wydmdwm:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":237600},{"geohashId":"wydmdwt","cacheKey":"data:wydmdwt:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":651,"l2CacheGetDurationNs":536900},{"geohashId":"wydmdww","cacheKey":"data:wydmdww:cctv","hit":true,"dataType":"cctv","dataCount":7,"dataSize":910,"l2CacheGetDurationNs":562700},{"geohashId":"wydmdwq","cacheKey":"data:wydmdwq:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":530,"l2CacheGetDurationNs":417200},{"geohashId":"wydmdwn","cacheKey":"data:wydmdwn:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":644,"l2CacheGetDurationNs":393200},{"geohashId":"wydmdwj","cacheKey":"data:wydmdwj:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":670,"l2CacheGetDurationNs":232100},{"geohashId":"wydmdwh","cacheKey":"data:wydmdwh:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":673,"l2CacheGetDurationNs":221000},{"geohashId":"wydmdwk","cacheKey":"data:wydmdwk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":107800},{"geohashId":"wydmdws","cacheKey":"data:wydmdws:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":115000}],"l2TotalHits":6,"l2TotalMisses":3,"l2CacheTotalDurationNs":3158400,"l2JsonDeserializeTotalDurationNs":251100,"errorMessage":null,"success":true}}
2025-11-21 19:57:11.398 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:11.398604300Z","nanoTime":28217413389600,"traceId":"801d656a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:57:11.398 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:57:11.398 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 3개
2025-11-21 19:57:11.402 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 6건
2025-11-21 19:57:11.403 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:57:11.403 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:57:11.404 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:11.403874800Z","nanoTime":28217418283400,"traceId":"801d656a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4893800,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmdwm","wydmdwk","wydmdws"],"cctvQueryResult":{"queryGeohashIds":["wydmdwm","wydmdwk","wydmdws"],"totalRowsReturned":6,"rowsPerGrid":{"wydmdwk":2,"wydmdwm":4},"queryExecutionTimeNs":3706900,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdwk","cacheKey":"data:wydmdwk:cctv","dataCount":2,"dataSize":238,"errorMessage":null,"success":true},{"geohashId":"wydmdwm","cacheKey":"data:wydmdwm:cctv","dataCount":4,"dataSize":520,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:57:11.404 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:11.404654100Z","nanoTime":28217418450000,"traceId":"801d656a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:57:11.404 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:57:11.404 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.564983853103094, 127.03166994164609)
2025-11-21 19:57:11.404 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:57:11.480 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:57:11.480 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:57:11.481 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:57:11.481 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.564983853103094, 127.03166994164609), 반경: 500m
2025-11-21 19:57:11.560 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:57:11.560 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 134건
2025-11-21 19:57:11.560 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:57:11.560 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:57:11.560 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 19:57:11.560 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 성동구
2025-11-21 19:57:11.560 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:57:11.560 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:57:11.560 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:57:11.560 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 19:57:11.560 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:11.560070500Z","nanoTime":28217577076200,"traceId":"801d656a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":158626200,"duration_ms":158,"resultData":{"latitude":37.564983853103094,"longitude":127.03166994164609,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":158486400,"addressApiResult":{"cached":false,"cacheKey":"address:37.564983853103094:127.03166994164609","roadAddress":"서울특별시 성동구 왕십리로28길 13","jibunAddress":"서울 성동구 도선동 335","responseSize":72,"executionTimeNs":76563700,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":612300,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.564983853103094:127.03166994164609:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":2,"CS2":15,"SC4":3,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":4,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalPlaces":134,"responseSize":15481,"executionTimeNs":81310400,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:11.560 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:11.560070500Z","nanoTime":28217577317400,"traceId":"801d656a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:57:11.560 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:57:11.560 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:57:11.560 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 37개
2025-11-21 19:57:11.560 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 37개 (총 카메라 대수: 109대)
2025-11-21 19:57:11.560 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:57:11.647 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구 대림로 197 (거리: 206m)
2025-11-21 19:57:11.647 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:57:11.647 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:57:11.647 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:57:11.647 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:57:11.647 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:11.647686700Z","nanoTime":28217662092500,"traceId":"801d656a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":84775100,"duration_ms":84,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":37,"totalCctvAfterFilter":37,"totalCameraCount":109,"filterRate":1.0,"filterExecutionTimeNs":26600,"success":true},"policeQuery":{"queryDurationNs":84112800,"found":true,"nearestAddress":"서울특별시 영등포구 대림로 197","nearestDistance":206.1134960286295,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"AT4":2,"CS2":15,"SC4":3,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":4,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"placesAfterFilter":{"CT1":1,"AT4":2,"CS2":15,"SC4":3,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":4,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalBeforeFilter":134,"totalAfterFilter":134,"filterRate":1.0,"filterExecutionTimeNs":206900,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:11.647 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:11.647686700Z","nanoTime":28217662378800,"traceId":"801d656a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:57:11.647 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:57:11.647 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 84.63, 편의성: 35.89, 종합: 60.26
2025-11-21 19:57:11.647 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:11.647686700Z","nanoTime":28217662680700,"traceId":"801d656a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":301900,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":74.23581299642132,"policeDistance":206.1134960286295,"cctvScore":100.0,"cctvCount":37,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":84.6256667789264,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"AT4":6.0,"CS2":5.333162672127825,"SC4":6.0,"MT1":20.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":12.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":35.888877511475194,"success":true},"overallScore":60.2572721452008,"errorMessage":null,"success":true}}
2025-11-21 19:57:11.647 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:11.647686700Z","nanoTime":28217662854900,"traceId":"801d656a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:57:11.647 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:57:11.647 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구 대림로 197, latitude=37.566665, longitude=127.032655, geohashId=wydmdwy)
2025-11-21 19:57:11.647 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 206.1134960286295
2025-11-21 19:57:11.650 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdwm
2025-11-21 19:57:11.650 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:57:11.650 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:11.650439600Z","nanoTime":28217664680000,"traceId":"801d656a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1825100,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["이 지역은 안전 인프라가 잘 갖춰져 있습니다.","편의점이(가) 19m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdwm","dataSize":20813,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20813,"errorMessage":null,"success":true}}
2025-11-21 19:57:11.650 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:57:12.034 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:57:12.034 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5606592387848, longitude=127.0310342961291, radius=500)
2025-11-21 19:57:12.034 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:57:12.034 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5606592387848, longitude=127.0310342961291, radius=500
2025-11-21 19:57:12.034 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:12.034581500Z","nanoTime":28218049268100,"traceId":"5ab099d7","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:57:12.035 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:57:12.035 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5606592387848, lon=127.0310342961291
2025-11-21 19:57:12.035 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:12.035571500Z","nanoTime":28218049383300,"traceId":"5ab099d7","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:57:12.035 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:12.035571500Z","nanoTime":28218049431700,"traceId":"5ab099d7","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":48400,"duration_ms":0,"resultData":{"latitude":37.5606592387848,"longitude":127.0310342961291,"precision":7,"centerHash":"wydmdtt","adjacentHashes":["wydmdtt","wydmdtv","wydmdty","wydmdtw","wydmdtq","wydmdtm","wydmdtk","wydmdts","wydmdtu"],"errorMessage":null,"success":true}}
2025-11-21 19:57:12.035 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdtt, wydmdtv, wydmdty, wydmdtw, wydmdtq, wydmdtm, wydmdtk, wydmdts, wydmdtu]
2025-11-21 19:57:12.035 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdtt
2025-11-21 19:57:12.035 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:12.035571500Z","nanoTime":28218049549200,"traceId":"5ab099d7","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":281100,"duration_ms":0,"resultData":{"requestLatitude":37.5606592387848,"requestLongitude":127.0310342961291,"requestRadius":500,"centerGeohashId":"wydmdtt","nineBlockGeohashes":["wydmdtt","wydmdtv","wydmdty","wydmdtw","wydmdtq","wydmdtm","wydmdtk","wydmdts","wydmdtu"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:57:12.035 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:12.035571500Z","nanoTime":28218049598900,"traceId":"5ab099d7","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:57:12.035 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:57:12.035 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdtt
2025-11-21 19:57:12.035 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4882ms)
2025-11-21 19:57:12.035 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:57:12.039 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:57:12.039 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 9개, 미스: 0개
2025-11-21 19:57:12.039 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 4.1289ms, 역직렬화: 0.4023ms
2025-11-21 19:57:12.039 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:57:12.039 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:12.039969800Z","nanoTime":28218054514200,"traceId":"5ab099d7","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":4915300,"duration_ms":4,"resultData":{"centerGeohashId":"wydmdtt","nineBlockGeohashes":["wydmdtt","wydmdtv","wydmdty","wydmdtw","wydmdtq","wydmdtm","wydmdtk","wydmdts","wydmdtu"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdtt","hit":false,"valueSize":0,"l1CacheGetDurationNs":488200,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdtt","cacheKey":"data:wydmdtt:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":531,"l2CacheGetDurationNs":496400},{"geohashId":"wydmdtv","cacheKey":"data:wydmdtv:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":638,"l2CacheGetDurationNs":550200},{"geohashId":"wydmdty","cacheKey":"data:wydmdty:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":534,"l2CacheGetDurationNs":416600},{"geohashId":"wydmdtw","cacheKey":"data:wydmdtw:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":664,"l2CacheGetDurationNs":345800},{"geohashId":"wydmdtq","cacheKey":"data:wydmdtq:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":398,"l2CacheGetDurationNs":328200},{"geohashId":"wydmdtm","cacheKey":"data:wydmdtm:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":400,"l2CacheGetDurationNs":375000},{"geohashId":"wydmdtk","cacheKey":"data:wydmdtk:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":630,"l2CacheGetDurationNs":359800},{"geohashId":"wydmdts","cacheKey":"data:wydmdts:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":669,"l2CacheGetDurationNs":352600},{"geohashId":"wydmdtu","cacheKey":"data:wydmdtu:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":538,"l2CacheGetDurationNs":379600}],"l2TotalHits":9,"l2TotalMisses":0,"l2CacheTotalDurationNs":4128900,"l2JsonDeserializeTotalDurationNs":402300,"errorMessage":null,"success":true}}
2025-11-21 19:57:12.039 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:12.039969800Z","nanoTime":28218054677100,"traceId":"5ab099d7","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:57:12.039 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:57:12.039 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터는 모두 캐시에서 조회됨
2025-11-21 19:57:12.040 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:57:12.040 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:57:12.040 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:12.040978500Z","nanoTime":28218054771600,"traceId":"5ab099d7","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":94500,"duration_ms":0,"resultData":{"inputCctvMissGrids":[],"cctvQueryResult":null,"cctvCacheWrites":[],"errorMessage":null,"success":true}}
2025-11-21 19:57:12.040 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:12.040978500Z","nanoTime":28218054825000,"traceId":"5ab099d7","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:57:12.040 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:57:12.040 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5606592387848, 127.0310342961291)
2025-11-21 19:57:12.040 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:57:12.127 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:57:12.127 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:57:12.127 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:57:12.127 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5606592387848, 127.0310342961291), 반경: 500m
2025-11-21 19:57:12.216 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:57:12.216 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 139건
2025-11-21 19:57:12.216 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:57:12.216 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:57:12.216 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 19:57:12.216 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 성동구
2025-11-21 19:57:12.216 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:57:12.216 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:57:12.216 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:57:12.216 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 19:57:12.216 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:12.216588700Z","nanoTime":28218233824200,"traceId":"5ab099d7","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":178999200,"duration_ms":178,"resultData":{"latitude":37.5606592387848,"longitude":127.0310342961291,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":178871700,"addressApiResult":{"cached":false,"cacheKey":"address:37.5606592387848:127.0310342961291","roadAddress":"서울특별시 성동구 무학봉길 76","jibunAddress":"서울 성동구 하왕십리동 1064","responseSize":72,"executionTimeNs":87327000,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":618400,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5606592387848:127.0310342961291:500","categoryCount":15,"placesByCategory":{"CT1":3,"AT4":1,"CS2":15,"SC4":4,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":6,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":139,"responseSize":16136,"executionTimeNs":90926300,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:12.216 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:12.216588700Z","nanoTime":28218234056000,"traceId":"5ab099d7","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:57:12.216 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:57:12.216 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:57:12.216 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 38개
2025-11-21 19:57:12.216 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 38개 (총 카메라 대수: 109대)
2025-11-21 19:57:12.216 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:57:12.293 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구 영신로20길 11 (거리: 407m)
2025-11-21 19:57:12.293 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:57:12.293 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:57:12.293 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 19:57:12.293 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:57:12.293 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:12.293421800Z","nanoTime":28218314028000,"traceId":"5ab099d7","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":79972000,"duration_ms":79,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":38,"totalCctvAfterFilter":38,"totalCameraCount":109,"filterRate":1.0,"filterExecutionTimeNs":25600,"success":true},"policeQuery":{"queryDurationNs":79149300,"found":true,"nearestAddress":"서울특별시 영등포구 영신로20길 11","nearestDistance":407.45333773813826,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":3,"AT4":1,"CS2":15,"SC4":4,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":6,"FD6":15,"PK6":15,"PM9":15},"placesAfterFilter":{"CT1":3,"AT4":1,"CS2":15,"SC4":4,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":6,"FD6":15,"PK6":15,"PM9":15},"totalBeforeFilter":139,"totalAfterFilter":139,"filterRate":1.0,"filterExecutionTimeNs":350000,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:12.293 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:12.293421800Z","nanoTime":28218314280000,"traceId":"5ab099d7","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:57:12.293 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:57:12.293 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 77.08, 편의성: 39.74, 종합: 58.41
2025-11-21 19:57:12.293 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:12.293421800Z","nanoTime":28218314715300,"traceId":"5ab099d7","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":435300,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":49.06833278273272,"policeDistance":407.45333773813826,"cctvScore":100.0,"cctvCount":38,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":77.07542271481982,"success":true},"convenienceScore":{"categoryScores":{"CT1":12.0,"AT4":3.0,"CS2":5.333162672127825,"SC4":8.0,"MT1":30.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":18.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":39.73808304800913,"success":true},"overallScore":58.40675288141448,"errorMessage":null,"success":true}}
2025-11-21 19:57:12.293 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:12.293421800Z","nanoTime":28218315000200,"traceId":"5ab099d7","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:57:12.293 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:57:12.301 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구 영신로20길 11, latitude=37.557429, longitude=127.028852, geohashId=wydmdt5)
2025-11-21 19:57:12.301 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 407.45333773813826
2025-11-21 19:57:12.301 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdtt
2025-11-21 19:57:12.301 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:57:12.303 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:12.301292100Z","nanoTime":28218317044700,"traceId":"5ab099d7","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":2044500,"duration_ms":2,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 83m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdtt","dataSize":21509,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":21509,"errorMessage":null,"success":true}}
2025-11-21 19:57:12.303 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:57:13.213 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:57:13.213 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56334519883037, longitude=127.02700601355214, radius=500)
2025-11-21 19:57:13.213 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:57:13.213 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56334519883037, longitude=127.02700601355214, radius=500
2025-11-21 19:57:13.213 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:13.213735100Z","nanoTime":28219228290900,"traceId":"e537a882","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:57:13.213 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:57:13.213 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56334519883037, lon=127.02700601355214
2025-11-21 19:57:13.213 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:13.213735100Z","nanoTime":28219228422200,"traceId":"e537a882","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:57:13.214 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:13.213735100Z","nanoTime":28219228479200,"traceId":"e537a882","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":57000,"duration_ms":0,"resultData":{"latitude":37.56334519883037,"longitude":127.02700601355214,"precision":7,"centerHash":"wydmdw4","adjacentHashes":["wydmdw4","wydmdw6","wydmdw7","wydmdw5","wydmdtg","wydmdtf","wydmdtc","wydmdw1","wydmdw3"],"errorMessage":null,"success":true}}
2025-11-21 19:57:13.214 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdw4, wydmdw6, wydmdw7, wydmdw5, wydmdtg, wydmdtf, wydmdtc, wydmdw1, wydmdw3]
2025-11-21 19:57:13.214 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdw4
2025-11-21 19:57:13.214 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:13.214734900Z","nanoTime":28219228585000,"traceId":"e537a882","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":294100,"duration_ms":0,"resultData":{"requestLatitude":37.56334519883037,"requestLongitude":127.02700601355214,"requestRadius":500,"centerGeohashId":"wydmdw4","nineBlockGeohashes":["wydmdw4","wydmdw6","wydmdw7","wydmdw5","wydmdtg","wydmdtf","wydmdtc","wydmdw1","wydmdw3"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:57:13.214 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:13.214734900Z","nanoTime":28219228627300,"traceId":"e537a882","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:57:13.214 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:57:13.214 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdw4
2025-11-21 19:57:13.214 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4428ms)
2025-11-21 19:57:13.214 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:57:13.218 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:57:13.218 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 8개, 미스: 1개
2025-11-21 19:57:13.218 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 3.8685ms, 역직렬화: 0.3725ms
2025-11-21 19:57:13.218 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:57:13.218 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:13.218706200Z","nanoTime":28219233442500,"traceId":"e537a882","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":4815200,"duration_ms":4,"resultData":{"centerGeohashId":"wydmdw4","nineBlockGeohashes":["wydmdw4","wydmdw6","wydmdw7","wydmdw5","wydmdtg","wydmdtf","wydmdtc","wydmdw1","wydmdw3"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdw4","hit":false,"valueSize":0,"l1CacheGetDurationNs":442800,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdw4","cacheKey":"data:wydmdw4:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":401,"l2CacheGetDurationNs":341200},{"geohashId":"wydmdw6","cacheKey":"data:wydmdw6:cctv","hit":true,"dataType":"cctv","dataCount":7,"dataSize":945,"l2CacheGetDurationNs":695600},{"geohashId":"wydmdw7","cacheKey":"data:wydmdw7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":228800},{"geohashId":"wydmdw5","cacheKey":"data:wydmdw5:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":405,"l2CacheGetDurationNs":378600},{"geohashId":"wydmdtg","cacheKey":"data:wydmdtg:cctv","hit":true,"dataType":"cctv","dataCount":7,"dataSize":944,"l2CacheGetDurationNs":305400},{"geohashId":"wydmdtf","cacheKey":"data:wydmdtf:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":137,"l2CacheGetDurationNs":267600},{"geohashId":"wydmdtc","cacheKey":"data:wydmdtc:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":136,"l2CacheGetDurationNs":312900},{"geohashId":"wydmdw1","cacheKey":"data:wydmdw1:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":269,"l2CacheGetDurationNs":322300},{"geohashId":"wydmdw3","cacheKey":"data:wydmdw3:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":385,"l2CacheGetDurationNs":544600}],"l2TotalHits":8,"l2TotalMisses":1,"l2CacheTotalDurationNs":3868500,"l2JsonDeserializeTotalDurationNs":372500,"errorMessage":null,"success":true}}
2025-11-21 19:57:13.218 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:13.218706200Z","nanoTime":28219233739600,"traceId":"e537a882","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:57:13.218 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:57:13.218 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 1개
2025-11-21 19:57:13.224 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 4건
2025-11-21 19:57:13.224 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:57:13.224 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:57:13.224 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:13.224843900Z","nanoTime":28219239979200,"traceId":"e537a882","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6239600,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydmdw7"],"cctvQueryResult":{"queryGeohashIds":["wydmdw7"],"totalRowsReturned":4,"rowsPerGrid":{"wydmdw7":4},"queryExecutionTimeNs":5206700,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdw7","cacheKey":"data:wydmdw7:cctv","dataCount":4,"dataSize":538,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:57:13.224 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:13.224843900Z","nanoTime":28219240230700,"traceId":"e537a882","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:57:13.224 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:57:13.224 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56334519883037, 127.02700601355214)
2025-11-21 19:57:13.226 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:57:13.281 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:57:13.281 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:57:13.281 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:57:13.281 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56334519883037, 127.02700601355214), 반경: 500m
2025-11-21 19:57:13.368 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:57:13.368 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 127건
2025-11-21 19:57:13.373 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:57:13.373 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:57:13.373 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 19:57:13.374 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 성동구
2025-11-21 19:57:13.374 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:57:13.374 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:57:13.374 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:57:13.374 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 19:57:13.374 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:13.374256300Z","nanoTime":28219388307400,"traceId":"e537a882","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":148076700,"duration_ms":148,"resultData":{"latitude":37.56334519883037,"longitude":127.02700601355214,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":147919800,"addressApiResult":{"cached":false,"cacheKey":"address:37.56334519883037:127.02700601355214","roadAddress":"서울특별시 성동구 왕십리로33길 18-4","jibunAddress":"서울 성동구 하왕십리동 890-59","responseSize":79,"executionTimeNs":57995200,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":721000,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56334519883037:127.02700601355214:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":0,"CS2":15,"SC4":5,"MT1":2,"BK9":11,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalPlaces":127,"responseSize":14750,"executionTimeNs":89203600,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:13.374 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:13.374256300Z","nanoTime":28219388590900,"traceId":"e537a882","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:57:13.374 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:57:13.374 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:57:13.374 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 31개
2025-11-21 19:57:13.374 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 31개 (총 카메라 대수: 92대)
2025-11-21 19:57:13.374 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:57:13.458 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구 대림로 197 (거리: 620m)
2025-11-21 19:57:13.458 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:57:13.458 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:57:13.458 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 19:57:13.458 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:57:13.458 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:13.458789600Z","nanoTime":28219473969300,"traceId":"e537a882","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":85378400,"duration_ms":85,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":31,"totalCctvAfterFilter":31,"totalCameraCount":92,"filterRate":1.0,"filterExecutionTimeNs":17100,"success":true},"policeQuery":{"queryDurationNs":84825800,"found":true,"nearestAddress":"서울특별시 영등포구 대림로 197","nearestDistance":619.8178710987361,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CS2":15,"SC4":5,"MT1":2,"BK9":11,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"placesAfterFilter":{"CS2":15,"SC4":5,"MT1":2,"BK9":11,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalBeforeFilter":127,"totalAfterFilter":127,"filterRate":1.0,"filterExecutionTimeNs":137000,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:13.458 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:13.458789600Z","nanoTime":28219474128700,"traceId":"e537a882","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:57:13.458 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:57:13.458 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 69.11, 편의성: 38.95, 종합: 54.03
2025-11-21 19:57:13.458 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:13.458789600Z","nanoTime":28219474449300,"traceId":"e537a882","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":320600,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":22.52276611265799,"policeDistance":619.8178710987361,"cctvScore":100.0,"cctvCount":31,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":69.1117527137974,"success":true},"convenienceScore":{"categoryScores":{"CS2":5.333162672127825,"SC4":10.0,"MT1":20.0,"BK9":55.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":6.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":38.94870482093291,"success":true},"overallScore":54.03022876736516,"errorMessage":null,"success":true}}
2025-11-21 19:57:13.458 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:13.458789600Z","nanoTime":28219474569500,"traceId":"e537a882","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:57:13.458 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:57:13.458 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구 대림로 197, latitude=37.566665, longitude=127.032655, geohashId=wydmdwy)
2025-11-21 19:57:13.458 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 619.8178710987361
2025-11-21 19:57:13.458 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdw4
2025-11-21 19:57:13.458 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:57:13.458 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:13.458789600Z","nanoTime":28219476043000,"traceId":"e537a882","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1473500,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["학원이(가) 19m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdw4","dataSize":19406,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19406,"errorMessage":null,"success":true}}
2025-11-21 19:57:13.458 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:57:14.322 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:57:14.322 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56824760017164, longitude=127.0222989662542, radius=500)
2025-11-21 19:57:14.322 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:57:14.322 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56824760017164, longitude=127.0222989662542, radius=500
2025-11-21 19:57:14.323 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:14.323406500Z","nanoTime":28220337160100,"traceId":"d57ccc73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:57:14.323 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:57:14.323 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56824760017164, lon=127.0222989662542
2025-11-21 19:57:14.323 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:14.323406500Z","nanoTime":28220337279400,"traceId":"d57ccc73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:57:14.323 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:14.323406500Z","nanoTime":28220337354600,"traceId":"d57ccc73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":75200,"duration_ms":0,"resultData":{"latitude":37.56824760017164,"longitude":127.0222989662542,"precision":7,"centerHash":"wydmdrn","adjacentHashes":["wydmdrn","wydmdrq","wydmdrr","wydmdrp","wydmdqz","wydmdqy","wydmdqv","wydmdrj","wydmdrm"],"errorMessage":null,"success":true}}
2025-11-21 19:57:14.323 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdrn, wydmdrq, wydmdrr, wydmdrp, wydmdqz, wydmdqy, wydmdqv, wydmdrj, wydmdrm]
2025-11-21 19:57:14.323 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdrn
2025-11-21 19:57:14.323 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:14.323406500Z","nanoTime":28220337546600,"traceId":"d57ccc73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":386500,"duration_ms":0,"resultData":{"requestLatitude":37.56824760017164,"requestLongitude":127.0222989662542,"requestRadius":500,"centerGeohashId":"wydmdrn","nineBlockGeohashes":["wydmdrn","wydmdrq","wydmdrr","wydmdrp","wydmdqz","wydmdqy","wydmdqv","wydmdrj","wydmdrm"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:57:14.323 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:14.323406500Z","nanoTime":28220337638900,"traceId":"d57ccc73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:57:14.323 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:57:14.323 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdrn
2025-11-21 19:57:14.323 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.43ms)
2025-11-21 19:57:14.323 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:57:14.325 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:57:14.325 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 19:57:14.325 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.6368ms, 역직렬화: 0.0ms
2025-11-21 19:57:14.325 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:57:14.325 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:14.325321300Z","nanoTime":28220340119500,"traceId":"d57ccc73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2480600,"duration_ms":2,"resultData":{"centerGeohashId":"wydmdrn","nineBlockGeohashes":["wydmdrn","wydmdrq","wydmdrr","wydmdrp","wydmdqz","wydmdqy","wydmdqv","wydmdrj","wydmdrm"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdrn","hit":false,"valueSize":0,"l1CacheGetDurationNs":430000,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdrn","cacheKey":"data:wydmdrn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":189400},{"geohashId":"wydmdrq","cacheKey":"data:wydmdrq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":141900},{"geohashId":"wydmdrr","cacheKey":"data:wydmdrr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":155200},{"geohashId":"wydmdrp","cacheKey":"data:wydmdrp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":251300},{"geohashId":"wydmdqz","cacheKey":"data:wydmdqz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":113500},{"geohashId":"wydmdqy","cacheKey":"data:wydmdqy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":158200},{"geohashId":"wydmdqv","cacheKey":"data:wydmdqv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":228800},{"geohashId":"wydmdrj","cacheKey":"data:wydmdrj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":157600},{"geohashId":"wydmdrm","cacheKey":"data:wydmdrm:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":140300}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1636800,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 19:57:14.325 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:14.325321300Z","nanoTime":28220340265900,"traceId":"d57ccc73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:57:14.325 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:57:14.325 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 19:57:14.330 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 15건
2025-11-21 19:57:14.330 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:57:14.330 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 19:57:14.330 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:14.330269400Z","nanoTime":28220346457700,"traceId":"d57ccc73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6191800,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydmdrn","wydmdrq","wydmdrr","wydmdrp","wydmdqz","wydmdqy","wydmdqv","wydmdrj","wydmdrm"],"cctvQueryResult":{"queryGeohashIds":["wydmdrn","wydmdrq","wydmdrr","wydmdrp","wydmdqz","wydmdqy","wydmdqv","wydmdrj","wydmdrm"],"totalRowsReturned":15,"rowsPerGrid":{"wydmdrm":1,"wydmdrn":3,"wydmdrp":2,"wydmdqy":3,"wydmdrj":1,"wydmdqz":1,"wydmdqv":2,"wydmdrq":2},"queryExecutionTimeNs":4433000,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdrm","cacheKey":"data:wydmdrm:cctv","dataCount":1,"dataSize":128,"errorMessage":null,"success":true},{"geohashId":"wydmdrn","cacheKey":"data:wydmdrn:cctv","dataCount":3,"dataSize":385,"errorMessage":null,"success":true},{"geohashId":"wydmdrp","cacheKey":"data:wydmdrp:cctv","dataCount":2,"dataSize":256,"errorMessage":null,"success":true},{"geohashId":"wydmdqy","cacheKey":"data:wydmdqy:cctv","dataCount":3,"dataSize":383,"errorMessage":null,"success":true},{"geohashId":"wydmdrj","cacheKey":"data:wydmdrj:cctv","dataCount":1,"dataSize":128,"errorMessage":null,"success":true},{"geohashId":"wydmdqz","cacheKey":"data:wydmdqz:cctv","dataCount":1,"dataSize":132,"errorMessage":null,"success":true},{"geohashId":"wydmdqv","cacheKey":"data:wydmdqv:cctv","dataCount":2,"dataSize":256,"errorMessage":null,"success":true},{"geohashId":"wydmdrq","cacheKey":"data:wydmdrq:cctv","dataCount":2,"dataSize":257,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:57:14.330 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:14.330269400Z","nanoTime":28220346623000,"traceId":"d57ccc73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:57:14.330 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:57:14.330 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56824760017164, 127.0222989662542)
2025-11-21 19:57:14.336 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:57:14.412 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:57:14.412 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:57:14.412 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:57:14.412 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56824760017164, 127.0222989662542), 반경: 500m
2025-11-21 19:57:14.491 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:57:14.491 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 135건
2025-11-21 19:57:14.491 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:57:14.491 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:57:14.491 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 중구
2025-11-21 19:57:14.491 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 중구
2025-11-21 19:57:14.491 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:57:14.491 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:57:14.491 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:57:14.491 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.866910799
2025-11-21 19:57:14.491 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:14.491798900Z","nanoTime":28220510055400,"traceId":"d57ccc73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":163432400,"duration_ms":163,"resultData":{"latitude":37.56824760017164,"longitude":127.0222989662542,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":163304400,"addressApiResult":{"cached":false,"cacheKey":"address:37.56824760017164:127.0222989662542","roadAddress":"서울특별시 중구 마장로 111-1","jibunAddress":"서울 중구 황학동 1158","responseSize":70,"executionTimeNs":81364400,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:중구","guName":"중구","arrestRate":0.866910799,"dataFound":true,"executionTimeNs":380500,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56824760017164:127.0222989662542:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":2,"CS2":15,"SC4":4,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"totalPlaces":135,"responseSize":15694,"executionTimeNs":81559500,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:14.491 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:14.491798900Z","nanoTime":28220510226200,"traceId":"d57ccc73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:57:14.491 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:57:14.491 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:57:14.491 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 15개
2025-11-21 19:57:14.491 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 15개 (총 카메라 대수: 46대)
2025-11-21 19:57:14.491 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:57:14.577 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: "서울특별시 중구  다산로 248 (신당동, 신당파출소)" (거리: 632m)
2025-11-21 19:57:14.577 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:57:14.577 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:57:14.577 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:57:14.577 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:57:14.577 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:14.577471Z","nanoTime":28220592144900,"traceId":"d57ccc73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":81918700,"duration_ms":81,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":15,"totalCctvAfterFilter":15,"totalCameraCount":46,"filterRate":1.0,"filterExecutionTimeNs":10800,"success":true},"policeQuery":{"queryDurationNs":81350900,"found":true,"nearestAddress":"\"서울특별시 중구  다산로 248 (신당동, 신당파출소)\"","nearestDistance":631.7384210262735,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"AT4":2,"CS2":15,"SC4":4,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"placesAfterFilter":{"CT1":1,"AT4":2,"CS2":15,"SC4":4,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"totalBeforeFilter":135,"totalAfterFilter":135,"filterRate":1.0,"filterExecutionTimeNs":205000,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:14.577 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:14.577471Z","nanoTime":28220592366400,"traceId":"d57ccc73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:57:14.577 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:57:14.577 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 52.32, 편의성: 36.56, 종합: 44.44
2025-11-21 19:57:14.577 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:14.577471Z","nanoTime":28220592675100,"traceId":"d57ccc73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":308700,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":21.032697371715813,"policeDistance":631.7384210262735,"cctvScore":50.0,"cctvCount":15,"arrestRateScore":86.6910799,"arrestRate":0.866910799,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":52.31713318151475,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"AT4":6.0,"CS2":11.431706982486624,"SC4":8.0,"MT1":20.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"중구","guPopulation":131214,"finalScore":36.56211379883244,"success":true},"overallScore":44.439623490173595,"errorMessage":null,"success":true}}
2025-11-21 19:57:14.577 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:14.577471Z","nanoTime":28220592798500,"traceId":"d57ccc73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:57:14.577 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:57:14.577 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address="서울특별시 중구  다산로 248 (신당동, 신당파출소)", latitude=37.56504, longitude=127.016383, geohashId=wydmdqd)
2025-11-21 19:57:14.577 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 631.7384210262735
2025-11-21 19:57:14.579 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdrn
2025-11-21 19:57:14.579 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:57:14.579 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:14.579739200Z","nanoTime":28220594320000,"traceId":"d57ccc73","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1521500,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 63m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdrn","dataSize":18623,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":18623,"errorMessage":null,"success":true}}
2025-11-21 19:57:14.579 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:57:15.045 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:57:15.045 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56714962979377, longitude=127.0142620736956, radius=500)
2025-11-21 19:57:15.045 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:57:15.045 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56714962979377, longitude=127.0142620736956, radius=500
2025-11-21 19:57:15.045 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:15.045900400Z","nanoTime":28221059980800,"traceId":"36a4f725","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:57:15.045 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:57:15.045 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56714962979377, lon=127.0142620736956
2025-11-21 19:57:15.045 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:15.045900400Z","nanoTime":28221060068500,"traceId":"36a4f725","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:57:15.045 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:15.045900400Z","nanoTime":28221060112200,"traceId":"36a4f725","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":43700,"duration_ms":0,"resultData":{"latitude":37.56714962979377,"longitude":127.0142620736956,"precision":7,"centerHash":"wydmdqb","adjacentHashes":["wydmdqb","wydmdr0","wydmdr1","wydmdqc","wydmdq9","wydmdq8","wydmdnx","wydmdnz","wydmdpp"],"errorMessage":null,"success":true}}
2025-11-21 19:57:15.045 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdqb, wydmdr0, wydmdr1, wydmdqc, wydmdq9, wydmdq8, wydmdnx, wydmdnz, wydmdpp]
2025-11-21 19:57:15.045 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdqb
2025-11-21 19:57:15.045 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:15.045900400Z","nanoTime":28221060224700,"traceId":"36a4f725","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":243900,"duration_ms":0,"resultData":{"requestLatitude":37.56714962979377,"requestLongitude":127.0142620736956,"requestRadius":500,"centerGeohashId":"wydmdqb","nineBlockGeohashes":["wydmdqb","wydmdr0","wydmdr1","wydmdqc","wydmdq9","wydmdq8","wydmdnx","wydmdnz","wydmdpp"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:57:15.045 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:15.045900400Z","nanoTime":28221060272400,"traceId":"36a4f725","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:57:15.045 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:57:15.045 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdqb
2025-11-21 19:57:15.046 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3577ms)
2025-11-21 19:57:15.046 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:57:15.048 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:57:15.049 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 3개, 미스: 6개
2025-11-21 19:57:15.049 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.094ms, 역직렬화: 0.1498ms
2025-11-21 19:57:15.049 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:57:15.049 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:15.049221500Z","nanoTime":28221063040900,"traceId":"36a4f725","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2768500,"duration_ms":2,"resultData":{"centerGeohashId":"wydmdqb","nineBlockGeohashes":["wydmdqb","wydmdr0","wydmdr1","wydmdqc","wydmdq9","wydmdq8","wydmdnx","wydmdnz","wydmdpp"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdqb","hit":false,"valueSize":0,"l1CacheGetDurationNs":357700,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdqb","cacheKey":"data:wydmdqb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":134900},{"geohashId":"wydmdr0","cacheKey":"data:wydmdr0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":101000},{"geohashId":"wydmdr1","cacheKey":"data:wydmdr1:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":259,"l2CacheGetDurationNs":244200},{"geohashId":"wydmdqc","cacheKey":"data:wydmdqc:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":133,"l2CacheGetDurationNs":296800},{"geohashId":"wydmdq9","cacheKey":"data:wydmdq9:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":131,"l2CacheGetDurationNs":407600},{"geohashId":"wydmdq8","cacheKey":"data:wydmdq8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":178900},{"geohashId":"wydmdnx","cacheKey":"data:wydmdnx:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":157300},{"geohashId":"wydmdnz","cacheKey":"data:wydmdnz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":126000},{"geohashId":"wydmdpp","cacheKey":"data:wydmdpp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":212300}],"l2TotalHits":3,"l2TotalMisses":6,"l2CacheTotalDurationNs":2094000,"l2JsonDeserializeTotalDurationNs":149800,"errorMessage":null,"success":true}}
2025-11-21 19:57:15.049 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:15.049221500Z","nanoTime":28221063260000,"traceId":"36a4f725","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:57:15.049 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:57:15.049 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 6개
2025-11-21 19:57:15.052 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 13건
2025-11-21 19:57:15.054 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:57:15.055 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:57:15.055 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:15.055024800Z","nanoTime":28221068891700,"traceId":"36a4f725","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5631700,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydmdqb","wydmdr0","wydmdq8","wydmdnx","wydmdnz","wydmdpp"],"cctvQueryResult":{"queryGeohashIds":["wydmdqb","wydmdr0","wydmdq8","wydmdnx","wydmdnz","wydmdpp"],"totalRowsReturned":13,"rowsPerGrid":{"wydmdnz":4,"wydmdr0":2,"wydmdq8":3,"wydmdnx":1,"wydmdpp":2,"wydmdqb":1},"queryExecutionTimeNs":3673800,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdnz","cacheKey":"data:wydmdnz:cctv","dataCount":4,"dataSize":490,"errorMessage":null,"success":true},{"geohashId":"wydmdr0","cacheKey":"data:wydmdr0:cctv","dataCount":2,"dataSize":259,"errorMessage":null,"success":true},{"geohashId":"wydmdq8","cacheKey":"data:wydmdq8:cctv","dataCount":3,"dataSize":390,"errorMessage":null,"success":true},{"geohashId":"wydmdnx","cacheKey":"data:wydmdnx:cctv","dataCount":1,"dataSize":132,"errorMessage":null,"success":true},{"geohashId":"wydmdpp","cacheKey":"data:wydmdpp:cctv","dataCount":2,"dataSize":262,"errorMessage":null,"success":true},{"geohashId":"wydmdqb","cacheKey":"data:wydmdqb:cctv","dataCount":1,"dataSize":132,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:57:15.055 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:15.055024800Z","nanoTime":28221069092100,"traceId":"36a4f725","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:57:15.055 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:57:15.055 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56714962979377, 127.0142620736956)
2025-11-21 19:57:15.055 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:57:15.126 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:57:15.127 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:57:15.127 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:57:15.127 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56714962979377, 127.0142620736956), 반경: 500m
2025-11-21 19:57:15.211 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:57:15.211 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 149건
2025-11-21 19:57:15.211 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:57:15.211 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:57:15.211 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 중구
2025-11-21 19:57:15.211 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 중구
2025-11-21 19:57:15.211 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:57:15.211 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:57:15.211 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:57:15.211 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.866910799
2025-11-21 19:57:15.211 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:15.211331900Z","nanoTime":28221228749800,"traceId":"36a4f725","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":159657700,"duration_ms":159,"resultData":{"latitude":37.56714962979377,"longitude":127.0142620736956,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":159492200,"addressApiResult":{"cached":false,"cacheKey":"address:37.56714962979377:127.0142620736956","roadAddress":"서울특별시 중구 퇴계로73길 54-14","jibunAddress":"서울 중구 신당동 251-43","responseSize":75,"executionTimeNs":72043000,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:중구","guName":"중구","arrestRate":0.866910799,"dataFound":true,"executionTimeNs":740800,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56714962979377:127.0142620736956:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":8,"CS2":15,"SC4":5,"MT1":1,"BK9":15,"HP8":15,"AC5":8,"CE7":15,"SW8":3,"PO3":8,"FD6":15,"PK6":15,"OL7":2,"PM9":9},"totalPlaces":149,"responseSize":17374,"executionTimeNs":86708400,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:15.211 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:15.211331900Z","nanoTime":28221228945100,"traceId":"36a4f725","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:57:15.211 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:57:15.211 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:57:15.211 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 17개
2025-11-21 19:57:15.211 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 17개 (총 카메라 대수: 56대)
2025-11-21 19:57:15.211 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:57:15.294 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 중구  퇴계로 375-1 (거리: 223m)
2025-11-21 19:57:15.294 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:57:15.294 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:57:15.294 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:57:15.294 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:57:15.294 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:15.294607800Z","nanoTime":28221310781800,"traceId":"36a4f725","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":81836700,"duration_ms":81,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":17,"totalCctvAfterFilter":17,"totalCameraCount":56,"filterRate":1.0,"filterExecutionTimeNs":19300,"success":true},"policeQuery":{"queryDurationNs":81212900,"found":true,"nearestAddress":"서울특별시 중구  퇴계로 375-1","nearestDistance":222.89232481343493,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":8,"CS2":15,"SC4":5,"MT1":1,"BK9":15,"HP8":15,"AC5":8,"CE7":15,"SW8":3,"PO3":8,"FD6":15,"PK6":15,"OL7":2,"PM9":9},"placesAfterFilter":{"CT1":15,"AT4":8,"CS2":15,"SC4":5,"MT1":1,"BK9":15,"HP8":15,"AC5":8,"CE7":15,"SW8":3,"PO3":8,"FD6":15,"PK6":15,"OL7":2,"PM9":9},"totalBeforeFilter":149,"totalAfterFilter":149,"filterRate":1.0,"filterExecutionTimeNs":179000,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:15.294 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:15.294607800Z","nanoTime":28221311013100,"traceId":"36a4f725","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:57:15.294 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:57:15.294 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 70.32, 편의성: 39.63, 종합: 54.97
2025-11-21 19:57:15.297 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:15.297526500Z","nanoTime":28221311291300,"traceId":"36a4f725","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":278200,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":72.13845939832063,"policeDistance":222.89232481343493,"cctvScore":56.666666666666664,"cctvCount":17,"arrestRateScore":86.6910799,"arrestRate":0.866910799,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":70.31552845616287,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":24.0,"CS2":11.431706982486624,"SC4":10.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":8.0,"CE7":30.0,"SW8":100.0,"PO3":24.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":72.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"중구","guPopulation":131214,"finalScore":39.628780465499105,"success":true},"overallScore":54.972154460830986,"errorMessage":null,"success":true}}
2025-11-21 19:57:15.297 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:15.297526500Z","nanoTime":28221311490000,"traceId":"36a4f725","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:57:15.297 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:57:15.297 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 중구  퇴계로 375-1, latitude=37.565271, longitude=127.01338, geohashId=wydmdq8)
2025-11-21 19:57:15.297 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 222.89232481343493
2025-11-21 19:57:15.299 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdqb
2025-11-21 19:57:15.299 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:57:15.299 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:15.299348200Z","nanoTime":28221313433300,"traceId":"36a4f725","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1943300,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["카페이(가) 55m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdqb","dataSize":20469,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":20469,"errorMessage":null,"success":true}}
2025-11-21 19:57:15.299 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:57:15.852 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:57:15.852 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.562914866762746, longitude=127.01491773736988, radius=500)
2025-11-21 19:57:15.852 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:57:15.852 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.562914866762746, longitude=127.01491773736988, radius=500
2025-11-21 19:57:15.852 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:15.852732100Z","nanoTime":28221866910600,"traceId":"be5e0f70","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:57:15.852 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:57:15.852 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.562914866762746, lon=127.01491773736988
2025-11-21 19:57:15.852 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:15.852732100Z","nanoTime":28221866991200,"traceId":"be5e0f70","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:57:15.852 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:15.852732100Z","nanoTime":28221867042300,"traceId":"be5e0f70","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":51100,"duration_ms":0,"resultData":{"latitude":37.562914866762746,"longitude":127.01491773736988,"precision":7,"centerHash":"wydmdq1","adjacentHashes":["wydmdq1","wydmdq3","wydmdq6","wydmdq4","wydmdmf","wydmdmc","wydmdmb","wydmdq0","wydmdq2"],"errorMessage":null,"success":true}}
2025-11-21 19:57:15.852 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdq1, wydmdq3, wydmdq6, wydmdq4, wydmdmf, wydmdmc, wydmdmb, wydmdq0, wydmdq2]
2025-11-21 19:57:15.852 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdq1
2025-11-21 19:57:15.852 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:15.852732100Z","nanoTime":28221867161800,"traceId":"be5e0f70","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":251200,"duration_ms":0,"resultData":{"requestLatitude":37.562914866762746,"requestLongitude":127.01491773736988,"requestRadius":500,"centerGeohashId":"wydmdq1","nineBlockGeohashes":["wydmdq1","wydmdq3","wydmdq6","wydmdq4","wydmdmf","wydmdmc","wydmdmb","wydmdq0","wydmdq2"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:57:15.852 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:15.852732100Z","nanoTime":28221867222500,"traceId":"be5e0f70","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:57:15.852 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:57:15.852 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdq1
2025-11-21 19:57:15.853 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5766ms)
2025-11-21 19:57:15.853 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 19:57:15.856 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 19:57:15.856 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 5개, 미스: 4개
2025-11-21 19:57:15.856 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 3.9945ms, 역직렬화: 0.3968ms
2025-11-21 19:57:15.856 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 19:57:15.856 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:15.856914300Z","nanoTime":28221872151000,"traceId":"be5e0f70","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":4928500,"duration_ms":4,"resultData":{"centerGeohashId":"wydmdq1","nineBlockGeohashes":["wydmdq1","wydmdq3","wydmdq6","wydmdq4","wydmdmf","wydmdmc","wydmdmb","wydmdq0","wydmdq2"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdq1","hit":false,"valueSize":0,"l1CacheGetDurationNs":576600,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdq1","cacheKey":"data:wydmdq1:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":644,"l2CacheGetDurationNs":520100},{"geohashId":"wydmdq3","cacheKey":"data:wydmdq3:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":256,"l2CacheGetDurationNs":518300},{"geohashId":"wydmdq6","cacheKey":"data:wydmdq6:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":384,"l2CacheGetDurationNs":368400},{"geohashId":"wydmdq4","cacheKey":"data:wydmdq4:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":258,"l2CacheGetDurationNs":279000},{"geohashId":"wydmdmf","cacheKey":"data:wydmdmf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":321000},{"geohashId":"wydmdmc","cacheKey":"data:wydmdmc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":337400},{"geohashId":"wydmdmb","cacheKey":"data:wydmdmb:cctv","hit":true,"dataType":"cctv","dataCount":8,"dataSize":1047,"l2CacheGetDurationNs":555500},{"geohashId":"wydmdq0","cacheKey":"data:wydmdq0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":214500},{"geohashId":"wydmdq2","cacheKey":"data:wydmdq2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":334800}],"l2TotalHits":5,"l2TotalMisses":4,"l2CacheTotalDurationNs":3994500,"l2JsonDeserializeTotalDurationNs":396800,"errorMessage":null,"success":true}}
2025-11-21 19:57:15.856 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:15.856914300Z","nanoTime":28221872371100,"traceId":"be5e0f70","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 19:57:15.856 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 19:57:15.856 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 4개
2025-11-21 19:57:15.863 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 15건
2025-11-21 19:57:15.864 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 19:57:15.865 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 19:57:15.865 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:15.865072Z","nanoTime":28221878939800,"traceId":"be5e0f70","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6568700,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydmdmf","wydmdmc","wydmdq0","wydmdq2"],"cctvQueryResult":{"queryGeohashIds":["wydmdmf","wydmdmc","wydmdq0","wydmdq2"],"totalRowsReturned":15,"rowsPerGrid":{"wydmdmf":3,"wydmdmc":2,"wydmdq0":7,"wydmdq2":3},"queryExecutionTimeNs":4546700,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdmf","cacheKey":"data:wydmdmf:cctv","dataCount":3,"dataSize":390,"errorMessage":null,"success":true},{"geohashId":"wydmdmc","cacheKey":"data:wydmdmc:cctv","dataCount":2,"dataSize":258,"errorMessage":null,"success":true},{"geohashId":"wydmdq0","cacheKey":"data:wydmdq0:cctv","dataCount":7,"dataSize":881,"errorMessage":null,"success":true},{"geohashId":"wydmdq2","cacheKey":"data:wydmdq2:cctv","dataCount":3,"dataSize":391,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 19:57:15.865 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:15.865072Z","nanoTime":28221879272900,"traceId":"be5e0f70","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 19:57:15.865 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 19:57:15.865 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.562914866762746, 127.01491773736988)
2025-11-21 19:57:15.865 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 19:57:15.939 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 19:57:15.939 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 19:57:15.941 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 19:57:15.941 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.562914866762746, 127.01491773736988), 반경: 500m
2025-11-21 19:57:16.030 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 19:57:16.030 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 149건
2025-11-21 19:57:16.032 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 19:57:16.032 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 19:57:16.032 [http-nio-8185-exec-4] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 19:57:16.032 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 19:57:16.032 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 19:57:16.033 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 19:57:16.033 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 19:57:16.033 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:16.033039Z","nanoTime":28222046923800,"traceId":"be5e0f70","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":167650900,"duration_ms":167,"resultData":{"latitude":37.562914866762746,"longitude":127.01491773736988,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":167413700,"addressApiResult":{"cached":false,"cacheKey":"address:37.562914866762746:127.01491773736988","roadAddress":"주소 없음","jibunAddress":"서울 중구 신당동 304-684","responseSize":60,"executionTimeNs":75489500,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":64500,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.562914866762746:127.01491773736988:500","categoryCount":15,"placesByCategory":{"CT1":7,"AT4":5,"CS2":15,"SC4":6,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":6,"FD6":15,"PK6":15,"OL7":3,"PM9":13},"totalPlaces":149,"responseSize":17105,"executionTimeNs":91859700,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:16.033 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:16.033039Z","nanoTime":28222047177100,"traceId":"be5e0f70","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 19:57:16.033 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 19:57:16.033 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 19:57:16.033 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 35개
2025-11-21 19:57:16.033 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 35개 (총 카메라 대수: 99대)
2025-11-21 19:57:16.033 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 19:57:16.118 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: "서울특별시 중구  다산로 248 (신당동, 신당파출소)" (거리: 269m)
2025-11-21 19:57:16.118 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 19:57:16.118 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 19:57:16.118 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 19:57:16.121 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 19:57:16.121 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:16.121051200Z","nanoTime":28222134886300,"traceId":"be5e0f70","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":87709200,"duration_ms":87,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":35,"totalCctvAfterFilter":35,"totalCameraCount":99,"filterRate":1.0,"filterExecutionTimeNs":30400,"success":true},"policeQuery":{"queryDurationNs":86882300,"found":true,"nearestAddress":"\"서울특별시 중구  다산로 248 (신당동, 신당파출소)\"","nearestDistance":269.29413445729546,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":7,"AT4":5,"CS2":15,"SC4":6,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":6,"FD6":15,"PK6":15,"OL7":3,"PM9":13},"placesAfterFilter":{"CT1":7,"AT4":5,"CS2":15,"SC4":6,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":3,"PO3":6,"FD6":15,"PK6":15,"OL7":3,"PM9":13},"totalBeforeFilter":149,"totalAfterFilter":149,"filterRate":1.0,"filterExecutionTimeNs":204200,"success":true},"errorMessage":null,"success":true}}
2025-11-21 19:57:16.121 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:16.121051200Z","nanoTime":28222135122000,"traceId":"be5e0f70","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 19:57:16.121 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 19:57:16.121 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 59.90, 편의성: 38.78, 종합: 49.34
2025-11-21 19:57:16.121 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:16.121051200Z","nanoTime":28222135525900,"traceId":"be5e0f70","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":403900,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":66.33823319283806,"policeDistance":269.29413445729546,"cctvScore":100.0,"cctvCount":35,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":59.90146995785142,"success":true},"convenienceScore":{"categoryScores":{"CT1":28.0,"AT4":15.0,"CS2":3.75,"SC4":12.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":18.0,"FD6":15.0,"PK6":45.0,"OL7":15.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":38.78333333333333,"success":true},"overallScore":49.342401645592375,"errorMessage":null,"success":true}}
2025-11-21 19:57:16.121 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:16.121051200Z","nanoTime":28222135772000,"traceId":"be5e0f70","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 19:57:16.121 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 19:57:16.121 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address="서울특별시 중구  다산로 248 (신당동, 신당파출소)", latitude=37.56504, longitude=127.016383, geohashId=wydmdqd)
2025-11-21 19:57:16.121 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 269.29413445729546
2025-11-21 19:57:16.123 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdq1
2025-11-21 19:57:16.123 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 19:57:16.123 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:16.123060800Z","nanoTime":28222137446400,"traceId":"be5e0f70","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1674400,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["음식점이(가) 12m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdq1","dataSize":21870,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":21870,"errorMessage":null,"success":true}}
2025-11-21 19:57:16.123 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 19:57:16.355 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 19:57:16.356 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55952769127261, longitude=127.00934862918788, radius=500)
2025-11-21 19:57:16.356 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 19:57:16.356 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55952769127261, longitude=127.00934862918788, radius=500
2025-11-21 19:57:16.356 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:16.356790800Z","nanoTime":28222370681300,"traceId":"deac1701","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 19:57:16.356 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 19:57:16.356 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55952769127261, lon=127.00934862918788
2025-11-21 19:57:16.356 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:16.356790800Z","nanoTime":28222370751900,"traceId":"deac1701","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 19:57:16.356 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:16.356790800Z","nanoTime":28222370787100,"traceId":"deac1701","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":35200,"duration_ms":0,"resultData":{"latitude":37.55952769127261,"longitude":127.00934862918788,"precision":7,"centerHash":"wydmdjt","adjacentHashes":["wydmdjt","wydmdjv","wydmdjy","wydmdjw","wydmdjq","wydmdjm","wydmdjk","wydmdjs","wydmdju"],"errorMessage":null,"success":true}}
2025-11-21 19:57:16.356 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdjt, wydmdjv, wydmdjy, wydmdjw, wydmdjq, wydmdjm, wydmdjk, wydmdjs, wydmdju]
2025-11-21 19:57:16.356 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdjt
2025-11-21 19:57:16.356 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:16.356790800Z","nanoTime":28222370900900,"traceId":"deac1701","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":219600,"duration_ms":0,"resultData":{"requestLatitude":37.55952769127261,"requestLongitude":127.00934862918788,"requestRadius":500,"centerGeohashId":"wydmdjt","nineBlockGeohashes":["wydmdjt","wydmdjv","wydmdjy","wydmdjw","wydmdjq","wydmdjm","wydmdjk","wydmdjs","wydmdju"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 19:57:16.356 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:16.356790800Z","nanoTime":28222370933900,"traceId":"deac1701","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 19:57:16.356 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 19:57:16.356 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdjt
2025-11-21 19:57:16.357 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 히트! JSON 역직렬화 시도
2025-11-21 19:57:16.358 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 히트 성공! 즉시 반환 (L1 조회: 1.0307ms, 역직렬화: 0.4116ms)
2025-11-21 19:57:16.358 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T10:57:16.358534300Z","nanoTime":28222372557600,"traceId":"deac1701","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1623700,"duration_ms":1,"resultData":{"centerGeohashId":"wydmdjt","nineBlockGeohashes":["wydmdjt","wydmdjv","wydmdjy","wydmdjw","wydmdjq","wydmdjm","wydmdjk","wydmdjs","wydmdju"],"l1CacheHit":true,"l1CacheResult":{"cacheKey":"dto:wydmdjt","hit":true,"valueSize":16211,"l1CacheGetDurationNs":1030700,"l1JsonDeserializeDurationNs":411600},"l2CacheRequired":false,"l2CacheResults":null,"l2TotalHits":0,"l2TotalMisses":0,"l2CacheTotalDurationNs":null,"l2JsonDeserializeTotalDurationNs":null,"errorMessage":null,"success":true}}
2025-11-21 19:57:16.358 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 1단계 캐시 히트: 즉시 반환 ===
2025-11-21 19:57:16.358 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:43:10.324 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:43:10.324 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.562860573870005, longitude=127.01666076893564, radius=500)
2025-11-21 20:43:10.324 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:43:10.324 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.562860573870005, longitude=127.01666076893564, radius=500
2025-11-21 20:43:10.324 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:10.324130800Z","nanoTime":30976338601400,"traceId":"822403fc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:43:10.324 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:43:10.324 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.562860573870005, lon=127.01666076893564
2025-11-21 20:43:10.324 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:10.324130800Z","nanoTime":30976338727600,"traceId":"822403fc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:43:10.324 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:10.324130800Z","nanoTime":30976338785900,"traceId":"822403fc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":58300,"duration_ms":0,"resultData":{"latitude":37.562860573870005,"longitude":127.01666076893564,"precision":7,"centerHash":"wydmdq4","adjacentHashes":["wydmdq4","wydmdq6","wydmdq7","wydmdq5","wydmdmg","wydmdmf","wydmdmc","wydmdq1","wydmdq3"],"errorMessage":null,"success":true}}
2025-11-21 20:43:10.324 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdq4, wydmdq6, wydmdq7, wydmdq5, wydmdmg, wydmdmf, wydmdmc, wydmdq1, wydmdq3]
2025-11-21 20:43:10.324 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdq4
2025-11-21 20:43:10.324 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:10.324130800Z","nanoTime":30976338936100,"traceId":"822403fc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":334700,"duration_ms":0,"resultData":{"requestLatitude":37.562860573870005,"requestLongitude":127.01666076893564,"requestRadius":500,"centerGeohashId":"wydmdq4","nineBlockGeohashes":["wydmdq4","wydmdq6","wydmdq7","wydmdq5","wydmdmg","wydmdmf","wydmdmc","wydmdq1","wydmdq3"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:43:10.324 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:10.324130800Z","nanoTime":30976338981700,"traceId":"822403fc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:43:10.324 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:43:10.325 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdq4
2025-11-21 20:43:10.325 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.7279ms)
2025-11-21 20:43:10.325 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:43:10.329 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:43:10.329 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 9개, 미스: 0개
2025-11-21 20:43:10.329 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 3.9039ms, 역직렬화: 0.404ms
2025-11-21 20:43:10.329 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:43:10.329 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:10.329537100Z","nanoTime":30976343942300,"traceId":"822403fc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":4960600,"duration_ms":4,"resultData":{"centerGeohashId":"wydmdq4","nineBlockGeohashes":["wydmdq4","wydmdq6","wydmdq7","wydmdq5","wydmdmg","wydmdmf","wydmdmc","wydmdq1","wydmdq3"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdq4","hit":false,"valueSize":0,"l1CacheGetDurationNs":727900,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdq4","cacheKey":"data:wydmdq4:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":258,"l2CacheGetDurationNs":408100},{"geohashId":"wydmdq6","cacheKey":"data:wydmdq6:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":384,"l2CacheGetDurationNs":420000},{"geohashId":"wydmdq7","cacheKey":"data:wydmdq7:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":651,"l2CacheGetDurationNs":410600},{"geohashId":"wydmdq5","cacheKey":"data:wydmdq5:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":649,"l2CacheGetDurationNs":251800},{"geohashId":"wydmdmg","cacheKey":"data:wydmdmg:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":260,"l2CacheGetDurationNs":264900},{"geohashId":"wydmdmf","cacheKey":"data:wydmdmf:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":390,"l2CacheGetDurationNs":360100},{"geohashId":"wydmdmc","cacheKey":"data:wydmdmc:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":258,"l2CacheGetDurationNs":289200},{"geohashId":"wydmdq1","cacheKey":"data:wydmdq1:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":644,"l2CacheGetDurationNs":493200},{"geohashId":"wydmdq3","cacheKey":"data:wydmdq3:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":256,"l2CacheGetDurationNs":475100}],"l2TotalHits":9,"l2TotalMisses":0,"l2CacheTotalDurationNs":3903900,"l2JsonDeserializeTotalDurationNs":404000,"errorMessage":null,"success":true}}
2025-11-21 20:43:10.329 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:10.329537100Z","nanoTime":30976344139900,"traceId":"822403fc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:43:10.329 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:43:10.329 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터는 모두 캐시에서 조회됨
2025-11-21 20:43:10.329 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:43:10.329 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 20:43:10.329 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:10.329537100Z","nanoTime":30976344224900,"traceId":"822403fc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":85000,"duration_ms":0,"resultData":{"inputCctvMissGrids":[],"cctvQueryResult":null,"cctvCacheWrites":[],"errorMessage":null,"success":true}}
2025-11-21 20:43:10.329 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:10.329537100Z","nanoTime":30976344267700,"traceId":"822403fc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:43:10.329 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:43:10.329 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.562860573870005, 127.01666076893564)
2025-11-21 20:43:10.330 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:43:10.556 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:43:10.556 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:43:10.558 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:43:10.558 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.562860573870005, 127.01666076893564), 반경: 500m
2025-11-21 20:43:10.737 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:43:10.737 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 149건
2025-11-21 20:43:10.737 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:43:10.737 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:43:10.737 [http-nio-8185-exec-8] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 20:43:10.737 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:43:10.737 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:43:10.737 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:43:10.737 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 20:43:10.737 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:10.737248500Z","nanoTime":30976753122300,"traceId":"822403fc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":408854600,"duration_ms":408,"resultData":{"latitude":37.562860573870005,"longitude":127.01666076893564,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":408734400,"addressApiResult":{"cached":false,"cacheKey":"address:37.562860573870005:127.01666076893564","roadAddress":"주소 없음","jibunAddress":"서울 중구 신당동 276-9","responseSize":58,"executionTimeNs":227570500,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":34200,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.562860573870005:127.01666076893564:500","categoryCount":15,"placesByCategory":{"CT1":8,"AT4":6,"CS2":15,"SC4":4,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":6,"FD6":15,"PK6":15,"OL7":2,"PM9":13},"totalPlaces":149,"responseSize":17126,"executionTimeNs":181129700,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:10.737 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:10.737248500Z","nanoTime":30976753261700,"traceId":"822403fc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:43:10.737 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:43:10.737 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:43:10.737 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 29개
2025-11-21 20:43:10.737 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 29개 (총 카메라 대수: 90대)
2025-11-21 20:43:10.737 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:43:10.801 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: "서울특별시 중구  다산로 248 (신당동, 신당파출소)" (거리: 244m)
2025-11-21 20:43:10.801 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:43:10.801 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:43:10.801 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 20:43:10.801 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:43:10.802 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:10.801249200Z","nanoTime":30976815942100,"traceId":"822403fc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":62680400,"duration_ms":62,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":29,"totalCctvAfterFilter":29,"totalCameraCount":90,"filterRate":1.0,"filterExecutionTimeNs":19400,"success":true},"policeQuery":{"queryDurationNs":62184500,"found":true,"nearestAddress":"\"서울특별시 중구  다산로 248 (신당동, 신당파출소)\"","nearestDistance":243.5747014839725,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":8,"AT4":6,"CS2":15,"SC4":4,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":6,"FD6":15,"PK6":15,"OL7":2,"PM9":13},"placesAfterFilter":{"CT1":8,"AT4":6,"CS2":15,"SC4":4,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":6,"FD6":15,"PK6":15,"OL7":2,"PM9":13},"totalBeforeFilter":149,"totalAfterFilter":149,"filterRate":1.0,"filterExecutionTimeNs":156800,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:10.802 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:10.802241300Z","nanoTime":30976816145600,"traceId":"822403fc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:43:10.802 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:43:10.802 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 59.53, 편의성: 38.65, 종합: 49.09
2025-11-21 20:43:10.802 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:10.802241300Z","nanoTime":30976816331100,"traceId":"822403fc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":185500,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":69.55316231450344,"policeDistance":243.5747014839725,"cctvScore":96.66666666666667,"cctvCount":29,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":59.532615361017704,"success":true},"convenienceScore":{"categoryScores":{"CT1":32.0,"AT4":18.0,"CS2":3.75,"SC4":8.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":18.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":38.65,"success":true},"overallScore":49.09130768050885,"errorMessage":null,"success":true}}
2025-11-21 20:43:10.802 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:10.802241300Z","nanoTime":30976816429900,"traceId":"822403fc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:43:10.802 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:43:10.802 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address="서울특별시 중구  다산로 248 (신당동, 신당파출소)", latitude=37.56504, longitude=127.016383, geohashId=wydmdqd)
2025-11-21 20:43:10.802 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 243.5747014839725
2025-11-21 20:43:10.803 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdq4
2025-11-21 20:43:10.803 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:43:10.803 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:10.803241100Z","nanoTime":30976817626700,"traceId":"822403fc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1196800,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["카페이(가) 37m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdq4","dataSize":21303,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":21303,"errorMessage":null,"success":true}}
2025-11-21 20:43:10.803 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:43:11.390 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:43:11.390 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.565598439755654, longitude=127.02349797690775, radius=500)
2025-11-21 20:43:11.390 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:43:11.390 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.565598439755654, longitude=127.02349797690775, radius=500
2025-11-21 20:43:11.391 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:11.390592600Z","nanoTime":30977405279200,"traceId":"abca3a20","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:43:11.391 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:43:11.391 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.565598439755654, lon=127.02349797690775
2025-11-21 20:43:11.391 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:11.391534900Z","nanoTime":30977405482000,"traceId":"abca3a20","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:43:11.391 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:11.391534900Z","nanoTime":30977405543100,"traceId":"abca3a20","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":61100,"duration_ms":0,"resultData":{"latitude":37.565598439755654,"longitude":127.02349797690775,"precision":7,"centerHash":"wydmdqx","adjacentHashes":["wydmdqx","wydmdqz","wydmdwb","wydmdw8","wydmdw2","wydmdqr","wydmdqq","wydmdqw","wydmdqy"],"errorMessage":null,"success":true}}
2025-11-21 20:43:11.391 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdqx, wydmdqz, wydmdwb, wydmdw8, wydmdw2, wydmdqr, wydmdqq, wydmdqw, wydmdqy]
2025-11-21 20:43:11.391 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdqx
2025-11-21 20:43:11.391 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:11.391534900Z","nanoTime":30977405643100,"traceId":"abca3a20","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":363900,"duration_ms":0,"resultData":{"requestLatitude":37.565598439755654,"requestLongitude":127.02349797690775,"requestRadius":500,"centerGeohashId":"wydmdqx","nineBlockGeohashes":["wydmdqx","wydmdqz","wydmdwb","wydmdw8","wydmdw2","wydmdqr","wydmdqq","wydmdqw","wydmdqy"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:43:11.391 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:11.391534900Z","nanoTime":30977405686100,"traceId":"abca3a20","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:43:11.391 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:43:11.391 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdqx
2025-11-21 20:43:11.391 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4096ms)
2025-11-21 20:43:11.391 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:43:11.395 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:43:11.395 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 5개, 미스: 4개
2025-11-21 20:43:11.395 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 3.684ms, 역직렬화: 0.2295ms
2025-11-21 20:43:11.395 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:43:11.395 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:11.395536600Z","nanoTime":30977410045700,"traceId":"abca3a20","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":4359600,"duration_ms":4,"resultData":{"centerGeohashId":"wydmdqx","nineBlockGeohashes":["wydmdqx","wydmdqz","wydmdwb","wydmdw8","wydmdw2","wydmdqr","wydmdqq","wydmdqw","wydmdqy"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdqx","hit":false,"valueSize":0,"l1CacheGetDurationNs":409600,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdqx","cacheKey":"data:wydmdqx:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":381500},{"geohashId":"wydmdqz","cacheKey":"data:wydmdqz:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":132,"l2CacheGetDurationNs":561600},{"geohashId":"wydmdwb","cacheKey":"data:wydmdwb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":159700},{"geohashId":"wydmdw8","cacheKey":"data:wydmdw8:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":133,"l2CacheGetDurationNs":442900},{"geohashId":"wydmdw2","cacheKey":"data:wydmdw2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":256900},{"geohashId":"wydmdqr","cacheKey":"data:wydmdqr:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":389,"l2CacheGetDurationNs":538900},{"geohashId":"wydmdqq","cacheKey":"data:wydmdqq:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":132,"l2CacheGetDurationNs":506800},{"geohashId":"wydmdqw","cacheKey":"data:wydmdqw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":241300},{"geohashId":"wydmdqy","cacheKey":"data:wydmdqy:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":383,"l2CacheGetDurationNs":265700}],"l2TotalHits":5,"l2TotalMisses":4,"l2CacheTotalDurationNs":3684000,"l2JsonDeserializeTotalDurationNs":229500,"errorMessage":null,"success":true}}
2025-11-21 20:43:11.395 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:11.395536600Z","nanoTime":30977410193700,"traceId":"abca3a20","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:43:11.395 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:43:11.395 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 4개
2025-11-21 20:43:11.400 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 6건
2025-11-21 20:43:11.400 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:43:11.400 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 20:43:11.401 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:11.400257200Z","nanoTime":30977414955800,"traceId":"abca3a20","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4762100,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmdqx","wydmdwb","wydmdw2","wydmdqw"],"cctvQueryResult":{"queryGeohashIds":["wydmdqx","wydmdwb","wydmdw2","wydmdqw"],"totalRowsReturned":6,"rowsPerGrid":{"wydmdwb":1,"wydmdqx":1,"wydmdqw":4},"queryExecutionTimeNs":3754600,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdwb","cacheKey":"data:wydmdwb:cctv","dataCount":1,"dataSize":135,"errorMessage":null,"success":true},{"geohashId":"wydmdqx","cacheKey":"data:wydmdqx:cctv","dataCount":1,"dataSize":127,"errorMessage":null,"success":true},{"geohashId":"wydmdqw","cacheKey":"data:wydmdqw:cctv","dataCount":4,"dataSize":516,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:43:11.401 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:11.401260500Z","nanoTime":30977415095500,"traceId":"abca3a20","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:43:11.401 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:43:11.401 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.565598439755654, 127.02349797690775)
2025-11-21 20:43:11.401 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:43:11.517 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:43:11.517 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:43:11.517 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:43:11.517 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.565598439755654, 127.02349797690775), 반경: 500m
2025-11-21 20:43:11.596 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:43:11.596 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 136건
2025-11-21 20:43:11.598 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:43:11.598 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:43:11.598 [http-nio-8185-exec-9] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 20:43:11.598 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:43:11.598 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:43:11.598 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:43:11.598 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 20:43:11.598 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:11.598631200Z","nanoTime":30977613503400,"traceId":"abca3a20","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":198407900,"duration_ms":198,"resultData":{"latitude":37.565598439755654,"longitude":127.02349797690775,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":198270400,"addressApiResult":{"cached":false,"cacheKey":"address:37.565598439755654:127.02349797690775","roadAddress":"주소 없음","jibunAddress":"서울 중구 신당동 17-1","responseSize":57,"executionTimeNs":116579200,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":35300,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.565598439755654:127.02349797690775:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":3,"CS2":15,"SC4":5,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalPlaces":136,"responseSize":15847,"executionTimeNs":81655900,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:11.598 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:11.598631200Z","nanoTime":30977613694800,"traceId":"abca3a20","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:43:11.598 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:43:11.598 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:43:11.598 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 15개
2025-11-21 20:43:11.598 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 15개 (총 카메라 대수: 51대)
2025-11-21 20:43:11.598 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:43:11.666 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: "서울특별시 중구  다산로 248 (신당동, 신당파출소)" (거리: 630m)
2025-11-21 20:43:11.668 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:43:11.668 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:43:11.668 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 20:43:11.668 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:43:11.668 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:11.668128100Z","nanoTime":30977682203500,"traceId":"abca3a20","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":68508700,"duration_ms":68,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":15,"totalCctvAfterFilter":15,"totalCameraCount":51,"filterRate":1.0,"filterExecutionTimeNs":17000,"success":true},"policeQuery":{"queryDurationNs":67973600,"found":true,"nearestAddress":"\"서울특별시 중구  다산로 248 (신당동, 신당파출소)\"","nearestDistance":630.1783070879376,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"AT4":3,"CS2":15,"SC4":5,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"placesAfterFilter":{"CT1":1,"AT4":3,"CS2":15,"SC4":5,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalBeforeFilter":136,"totalAfterFilter":136,"filterRate":1.0,"filterExecutionTimeNs":142500,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:11.668 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:11.668128100Z","nanoTime":30977682398600,"traceId":"abca3a20","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:43:11.668 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:43:11.668 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 26.37, 편의성: 36.05, 종합: 31.21
2025-11-21 20:43:11.668 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:11.668128100Z","nanoTime":30977682603200,"traceId":"abca3a20","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":204600,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":21.227711614007802,"policeDistance":630.1783070879376,"cctvScore":50.0,"cctvCount":15,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":26.36831348420234,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"AT4":9.0,"CS2":3.75,"SC4":10.0,"MT1":20.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":36.05,"success":true},"overallScore":31.209156742101168,"errorMessage":null,"success":true}}
2025-11-21 20:43:11.668 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:11.668128100Z","nanoTime":30977682744800,"traceId":"abca3a20","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:43:11.668 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:43:11.668 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address="서울특별시 중구  다산로 248 (신당동, 신당파출소)", latitude=37.56504, longitude=127.016383, geohashId=wydmdqd)
2025-11-21 20:43:11.668 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 630.1783070879376
2025-11-21 20:43:11.668 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdqx
2025-11-21 20:43:11.670 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:43:11.670 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:11.670140700Z","nanoTime":30977683959900,"traceId":"abca3a20","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1215100,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["주차장이(가) 17m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdqx","dataSize":18964,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":18964,"errorMessage":null,"success":true}}
2025-11-21 20:43:11.670 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:43:12.189 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:43:12.190 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.564713332862674, longitude=127.03248477619209, radius=500)
2025-11-21 20:43:12.190 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:43:12.190 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.564713332862674, longitude=127.03248477619209, radius=500
2025-11-21 20:43:12.190 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:12.190476400Z","nanoTime":30978204414500,"traceId":"63aa3a19","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:43:12.190 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:43:12.190 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.564713332862674, lon=127.03248477619209
2025-11-21 20:43:12.190 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:12.190476400Z","nanoTime":30978204527900,"traceId":"63aa3a19","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:43:12.190 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:12.190476400Z","nanoTime":30978204561900,"traceId":"63aa3a19","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":34000,"duration_ms":0,"resultData":{"latitude":37.564713332862674,"longitude":127.03248477619209,"precision":7,"centerHash":"wydmdwq","adjacentHashes":["wydmdwq","wydmdww","wydmdwx","wydmdwr","wydmdwp","wydmdwn","wydmdwj","wydmdwm","wydmdwt"],"errorMessage":null,"success":true}}
2025-11-21 20:43:12.190 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdwq, wydmdww, wydmdwx, wydmdwr, wydmdwp, wydmdwn, wydmdwj, wydmdwm, wydmdwt]
2025-11-21 20:43:12.190 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdwq
2025-11-21 20:43:12.190 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:12.190476400Z","nanoTime":30978204682600,"traceId":"63aa3a19","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":268100,"duration_ms":0,"resultData":{"requestLatitude":37.564713332862674,"requestLongitude":127.03248477619209,"requestRadius":500,"centerGeohashId":"wydmdwq","nineBlockGeohashes":["wydmdwq","wydmdww","wydmdwx","wydmdwr","wydmdwp","wydmdwn","wydmdwj","wydmdwm","wydmdwt"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:43:12.190 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:12.190476400Z","nanoTime":30978204727200,"traceId":"63aa3a19","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:43:12.190 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:43:12.190 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdwq
2025-11-21 20:43:12.190 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4245ms)
2025-11-21 20:43:12.190 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:43:12.194 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:43:12.194 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 9개, 미스: 0개
2025-11-21 20:43:12.194 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 4.3752ms, 역직렬화: 0.4342ms
2025-11-21 20:43:12.194 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:43:12.194 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:12.194973200Z","nanoTime":30978209837500,"traceId":"63aa3a19","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":5110300,"duration_ms":5,"resultData":{"centerGeohashId":"wydmdwq","nineBlockGeohashes":["wydmdwq","wydmdww","wydmdwx","wydmdwr","wydmdwp","wydmdwn","wydmdwj","wydmdwm","wydmdwt"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdwq","hit":false,"valueSize":0,"l1CacheGetDurationNs":424500,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdwq","cacheKey":"data:wydmdwq:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":530,"l2CacheGetDurationNs":616600},{"geohashId":"wydmdww","cacheKey":"data:wydmdww:cctv","hit":true,"dataType":"cctv","dataCount":7,"dataSize":910,"l2CacheGetDurationNs":408600},{"geohashId":"wydmdwx","cacheKey":"data:wydmdwx:cctv","hit":true,"dataType":"cctv","dataCount":6,"dataSize":785,"l2CacheGetDurationNs":436600},{"geohashId":"wydmdwr","cacheKey":"data:wydmdwr:cctv","hit":true,"dataType":"cctv","dataCount":6,"dataSize":776,"l2CacheGetDurationNs":450100},{"geohashId":"wydmdwp","cacheKey":"data:wydmdwp:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":362,"l2CacheGetDurationNs":412400},{"geohashId":"wydmdwn","cacheKey":"data:wydmdwn:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":644,"l2CacheGetDurationNs":280400},{"geohashId":"wydmdwj","cacheKey":"data:wydmdwj:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":670,"l2CacheGetDurationNs":270200},{"geohashId":"wydmdwm","cacheKey":"data:wydmdwm:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":520,"l2CacheGetDurationNs":367500},{"geohashId":"wydmdwt","cacheKey":"data:wydmdwt:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":651,"l2CacheGetDurationNs":580900}],"l2TotalHits":9,"l2TotalMisses":0,"l2CacheTotalDurationNs":4375200,"l2JsonDeserializeTotalDurationNs":434200,"errorMessage":null,"success":true}}
2025-11-21 20:43:12.194 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:12.194973200Z","nanoTime":30978210051100,"traceId":"63aa3a19","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:43:12.194 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:43:12.194 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터는 모두 캐시에서 조회됨
2025-11-21 20:43:12.194 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:43:12.194 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 20:43:12.194 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:12.194973200Z","nanoTime":30978210146300,"traceId":"63aa3a19","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":95200,"duration_ms":0,"resultData":{"inputCctvMissGrids":[],"cctvQueryResult":null,"cctvCacheWrites":[],"errorMessage":null,"success":true}}
2025-11-21 20:43:12.194 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:12.194973200Z","nanoTime":30978210186800,"traceId":"63aa3a19","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:43:12.194 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:43:12.194 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.564713332862674, 127.03248477619209)
2025-11-21 20:43:12.194 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:43:12.305 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:43:12.305 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:43:12.305 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:43:12.305 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.564713332862674, 127.03248477619209), 반경: 500m
2025-11-21 20:43:12.391 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:43:12.393 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 134건
2025-11-21 20:43:12.394 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:43:12.394 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:43:12.394 [http-nio-8185-exec-10] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 20:43:12.394 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:43:12.394 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:43:12.394 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:43:12.394 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 20:43:12.394 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:12.394639600Z","nanoTime":30978408831500,"traceId":"63aa3a19","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":198644700,"duration_ms":198,"resultData":{"latitude":37.564713332862674,"longitude":127.03248477619209,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":198535500,"addressApiResult":{"cached":false,"cacheKey":"address:37.564713332862674:127.03248477619209","roadAddress":"주소 없음","jibunAddress":"서울 성동구 도선동 418","responseSize":57,"executionTimeNs":110198500,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":35900,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.564713332862674:127.03248477619209:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":2,"CS2":15,"SC4":1,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":6,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalPlaces":134,"responseSize":15514,"executionTimeNs":88301100,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:12.394 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:12.394639600Z","nanoTime":30978409012300,"traceId":"63aa3a19","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:43:12.394 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:43:12.394 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:43:12.394 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 45개
2025-11-21 20:43:12.394 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 45개 (총 카메라 대수: 127대)
2025-11-21 20:43:12.394 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:43:12.471 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구 대림로 197 (거리: 218m)
2025-11-21 20:43:12.471 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:43:12.471 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:43:12.471 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 20:43:12.471 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:43:12.474 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:12.471503400Z","nanoTime":30978487941000,"traceId":"63aa3a19","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":78928700,"duration_ms":78,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":45,"totalCctvAfterFilter":45,"totalCameraCount":127,"filterRate":1.0,"filterExecutionTimeNs":33800,"success":true},"policeQuery":{"queryDurationNs":78181500,"found":true,"nearestAddress":"서울특별시 영등포구 대림로 197","nearestDistance":217.5334964872152,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"AT4":2,"CS2":15,"SC4":1,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":6,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"placesAfterFilter":{"CT1":1,"AT4":2,"CS2":15,"SC4":1,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":6,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalBeforeFilter":134,"totalAfterFilter":134,"filterRate":1.0,"filterExecutionTimeNs":149200,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:12.474 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:12.474259700Z","nanoTime":30978488155800,"traceId":"63aa3a19","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:43:12.474 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:43:12.474 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 61.84, 편의성: 35.92, 종합: 48.88
2025-11-21 20:43:12.474 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:12.474259700Z","nanoTime":30978488382600,"traceId":"63aa3a19","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":226800,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":72.8083129390981,"policeDistance":217.5334964872152,"cctvScore":100.0,"cctvCount":45,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":61.842493881729425,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"AT4":6.0,"CS2":3.75,"SC4":2.0,"MT1":20.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":18.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":35.916666666666664,"success":true},"overallScore":48.87958027419805,"errorMessage":null,"success":true}}
2025-11-21 20:43:12.474 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:12.474259700Z","nanoTime":30978488607900,"traceId":"63aa3a19","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:43:12.474 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:43:12.474 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구 대림로 197, latitude=37.566665, longitude=127.032655, geohashId=wydmdwy)
2025-11-21 20:43:12.474 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 217.5334964872152
2025-11-21 20:43:12.474 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdwq
2025-11-21 20:43:12.474 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:43:12.474 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:12.474259700Z","nanoTime":30978489872300,"traceId":"63aa3a19","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1264400,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["카페이(가) 34m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdwq","dataSize":21622,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":21622,"errorMessage":null,"success":true}}
2025-11-21 20:43:12.474 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:43:12.931 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:43:12.931 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.560369852310934, longitude=127.03485968711402, radius=500)
2025-11-21 20:43:12.931 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:43:12.931 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.560369852310934, longitude=127.03485968711402, radius=500
2025-11-21 20:43:12.931 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:12.931875100Z","nanoTime":30978945996400,"traceId":"72e58727","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:43:12.931 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:43:12.931 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.560369852310934, lon=127.03485968711402
2025-11-21 20:43:12.931 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:12.931875100Z","nanoTime":30978946081500,"traceId":"72e58727","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:43:12.931 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:12.931875100Z","nanoTime":30978946212900,"traceId":"72e58727","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":131400,"duration_ms":0,"resultData":{"latitude":37.560369852310934,"longitude":127.03485968711402,"precision":7,"centerHash":"wydmdtx","adjacentHashes":["wydmdtx","wydmdtz","wydmdvb","wydmdv8","wydmdv2","wydmdtr","wydmdtq","wydmdtw","wydmdty"],"errorMessage":null,"success":true}}
2025-11-21 20:43:12.931 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdtx, wydmdtz, wydmdvb, wydmdv8, wydmdv2, wydmdtr, wydmdtq, wydmdtw, wydmdty]
2025-11-21 20:43:12.931 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdtx
2025-11-21 20:43:12.931 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:12.931875100Z","nanoTime":30978946393400,"traceId":"72e58727","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":397000,"duration_ms":0,"resultData":{"requestLatitude":37.560369852310934,"requestLongitude":127.03485968711402,"requestRadius":500,"centerGeohashId":"wydmdtx","nineBlockGeohashes":["wydmdtx","wydmdtz","wydmdvb","wydmdv8","wydmdv2","wydmdtr","wydmdtq","wydmdtw","wydmdty"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:43:12.931 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:12.931875100Z","nanoTime":30978946446000,"traceId":"72e58727","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:43:12.931 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:43:12.931 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdtx
2025-11-21 20:43:12.932 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3487ms)
2025-11-21 20:43:12.932 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:43:12.935 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:43:12.935 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 8개, 미스: 1개
2025-11-21 20:43:12.935 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.9389ms, 역직렬화: 0.3611ms
2025-11-21 20:43:12.935 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:43:12.935 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:12.935364Z","nanoTime":30978949988700,"traceId":"72e58727","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3542700,"duration_ms":3,"resultData":{"centerGeohashId":"wydmdtx","nineBlockGeohashes":["wydmdtx","wydmdtz","wydmdvb","wydmdv8","wydmdv2","wydmdtr","wydmdtq","wydmdtw","wydmdty"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdtx","hit":false,"valueSize":0,"l1CacheGetDurationNs":348700,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdtx","cacheKey":"data:wydmdtx:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":392,"l2CacheGetDurationNs":305600},{"geohashId":"wydmdtz","cacheKey":"data:wydmdtz:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":529,"l2CacheGetDurationNs":292700},{"geohashId":"wydmdvb","cacheKey":"data:wydmdvb:cctv","hit":true,"dataType":"cctv","dataCount":7,"dataSize":881,"l2CacheGetDurationNs":291900},{"geohashId":"wydmdv8","cacheKey":"data:wydmdv8:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":396,"l2CacheGetDurationNs":281500},{"geohashId":"wydmdv2","cacheKey":"data:wydmdv2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":147300},{"geohashId":"wydmdtr","cacheKey":"data:wydmdtr:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":129,"l2CacheGetDurationNs":246300},{"geohashId":"wydmdtq","cacheKey":"data:wydmdtq:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":398,"l2CacheGetDurationNs":346100},{"geohashId":"wydmdtw","cacheKey":"data:wydmdtw:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":664,"l2CacheGetDurationNs":298800},{"geohashId":"wydmdty","cacheKey":"data:wydmdty:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":534,"l2CacheGetDurationNs":263000}],"l2TotalHits":8,"l2TotalMisses":1,"l2CacheTotalDurationNs":2938900,"l2JsonDeserializeTotalDurationNs":361100,"errorMessage":null,"success":true}}
2025-11-21 20:43:12.936 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:12.936371Z","nanoTime":30978950173300,"traceId":"72e58727","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:43:12.936 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:43:12.936 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 1개
2025-11-21 20:43:12.938 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 3건
2025-11-21 20:43:12.939 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:43:12.939 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 20:43:12.939 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:12.939840600Z","nanoTime":30978954006500,"traceId":"72e58727","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":3833200,"duration_ms":3,"resultData":{"inputCctvMissGrids":["wydmdv2"],"cctvQueryResult":{"queryGeohashIds":["wydmdv2"],"totalRowsReturned":3,"rowsPerGrid":{"wydmdv2":3},"queryExecutionTimeNs":3067600,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdv2","cacheKey":"data:wydmdv2:cctv","dataCount":3,"dataSize":362,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:43:12.939 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:12.939840600Z","nanoTime":30978954147500,"traceId":"72e58727","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:43:12.939 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:43:12.939 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.560369852310934, 127.03485968711402)
2025-11-21 20:43:12.940 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:43:13.039 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:43:13.039 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:43:13.039 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:43:13.039 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.560369852310934, 127.03485968711402), 반경: 500m
2025-11-21 20:43:13.116 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:43:13.116 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 144건
2025-11-21 20:43:13.116 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:43:13.116 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:43:13.116 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 20:43:13.122 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 성동구
2025-11-21 20:43:13.122 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:43:13.122 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:43:13.122 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:43:13.122 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 20:43:13.122 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:13.122222Z","nanoTime":30979136417300,"traceId":"72e58727","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":182269800,"duration_ms":182,"resultData":{"latitude":37.560369852310934,"longitude":127.03485968711402,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":182103500,"addressApiResult":{"cached":false,"cacheKey":"address:37.560369852310934:127.03485968711402","roadAddress":"서울특별시 성동구 고산자로 232","jibunAddress":"서울 성동구 행당동 266-4","responseSize":72,"executionTimeNs":99199400,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":664800,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.560369852310934:127.03485968711402:500","categoryCount":15,"placesByCategory":{"CT1":5,"AT4":1,"CS2":15,"SC4":3,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":7,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalPlaces":144,"responseSize":16739,"executionTimeNs":82239300,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:13.122 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:13.122222Z","nanoTime":30979136604000,"traceId":"72e58727","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:43:13.122 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:43:13.122 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:43:13.122 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 33개
2025-11-21 20:43:13.122 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 33개 (총 카메라 대수: 106대)
2025-11-21 20:43:13.122 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:43:13.192 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구  선유로 95 (거리: 612m)
2025-11-21 20:43:13.192 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:43:13.192 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:43:13.193 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 20:43:13.193 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:43:13.193 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:13.193426200Z","nanoTime":30979207448000,"traceId":"72e58727","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":70844000,"duration_ms":70,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":33,"totalCctvAfterFilter":33,"totalCameraCount":106,"filterRate":1.0,"filterExecutionTimeNs":23700,"success":true},"policeQuery":{"queryDurationNs":69991800,"found":true,"nearestAddress":"서울특별시 영등포구  선유로 95","nearestDistance":611.629221731817,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":5,"AT4":1,"CS2":15,"SC4":3,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":7,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"placesAfterFilter":{"CT1":5,"AT4":1,"CS2":15,"SC4":3,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":7,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalBeforeFilter":144,"totalAfterFilter":144,"filterRate":1.0,"filterExecutionTimeNs":357200,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:13.193 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:13.193426200Z","nanoTime":30979207618500,"traceId":"72e58727","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:43:13.193 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:43:13.193 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 69.42, 편의성: 38.02, 종합: 53.72
2025-11-21 20:43:13.193 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:13.193883100Z","nanoTime":30979207829600,"traceId":"72e58727","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":211100,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":23.546347283522877,"policeDistance":611.629221731817,"cctvScore":100.0,"cctvCount":33,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":69.41882706505686,"success":true},"convenienceScore":{"categoryScores":{"CT1":20.0,"AT4":3.0,"CS2":5.333162672127825,"SC4":6.0,"MT1":30.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":21.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":38.02221084480853,"success":true},"overallScore":53.72051895493269,"errorMessage":null,"success":true}}
2025-11-21 20:43:13.193 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:13.193883100Z","nanoTime":30979208017400,"traceId":"72e58727","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:43:13.193 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:43:13.193 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구  선유로 95, latitude=37.560301, longitude=127.041798, geohashId=wydmdvt)
2025-11-21 20:43:13.193 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 611.629221731817
2025-11-21 20:43:13.193 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdtx
2025-11-21 20:43:13.193 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:43:13.193 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:13.193883100Z","nanoTime":30979209074800,"traceId":"72e58727","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1057400,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["카페이(가) 26m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdtx","dataSize":21527,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":21527,"errorMessage":null,"success":true}}
2025-11-21 20:43:13.193 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:43:13.778 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:43:13.778 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56069576314415, longitude=127.02913286555491, radius=500)
2025-11-21 20:43:13.778 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:43:13.778 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56069576314415, longitude=127.02913286555491, radius=500
2025-11-21 20:43:13.778 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:13.778614100Z","nanoTime":30979792762000,"traceId":"24ae3ad2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:43:13.778 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:43:13.778 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56069576314415, lon=127.02913286555491
2025-11-21 20:43:13.778 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:13.778614100Z","nanoTime":30979792870900,"traceId":"24ae3ad2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:43:13.778 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:13.778614100Z","nanoTime":30979792919300,"traceId":"24ae3ad2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":48400,"duration_ms":0,"resultData":{"latitude":37.56069576314415,"longitude":127.02913286555491,"precision":7,"centerHash":"wydmdte","adjacentHashes":["wydmdte","wydmdtg","wydmdtu","wydmdts","wydmdtk","wydmdt7","wydmdt6","wydmdtd","wydmdtf"],"errorMessage":null,"success":true}}
2025-11-21 20:43:13.778 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdte, wydmdtg, wydmdtu, wydmdts, wydmdtk, wydmdt7, wydmdt6, wydmdtd, wydmdtf]
2025-11-21 20:43:13.778 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdte
2025-11-21 20:43:13.778 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:13.778614100Z","nanoTime":30979793021100,"traceId":"24ae3ad2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":259100,"duration_ms":0,"resultData":{"requestLatitude":37.56069576314415,"requestLongitude":127.02913286555491,"requestRadius":500,"centerGeohashId":"wydmdte","nineBlockGeohashes":["wydmdte","wydmdtg","wydmdtu","wydmdts","wydmdtk","wydmdt7","wydmdt6","wydmdtd","wydmdtf"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:43:13.778 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:13.778614100Z","nanoTime":30979793066700,"traceId":"24ae3ad2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:43:13.778 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:43:13.778 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdte
2025-11-21 20:43:13.779 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4172ms)
2025-11-21 20:43:13.779 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:43:13.783 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:43:13.783 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 8개, 미스: 1개
2025-11-21 20:43:13.783 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 3.1969ms, 역직렬화: 0.2711ms
2025-11-21 20:43:13.783 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:43:13.783 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:13.783060800Z","nanoTime":30979797010600,"traceId":"24ae3ad2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3943900,"duration_ms":3,"resultData":{"centerGeohashId":"wydmdte","nineBlockGeohashes":["wydmdte","wydmdtg","wydmdtu","wydmdts","wydmdtk","wydmdt7","wydmdt6","wydmdtd","wydmdtf"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdte","hit":false,"valueSize":0,"l1CacheGetDurationNs":417200,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdte","cacheKey":"data:wydmdte:cctv","hit":true,"dataType":"cctv","dataCount":8,"dataSize":1060,"l2CacheGetDurationNs":356000},{"geohashId":"wydmdtg","cacheKey":"data:wydmdtg:cctv","hit":true,"dataType":"cctv","dataCount":7,"dataSize":944,"l2CacheGetDurationNs":259900},{"geohashId":"wydmdtu","cacheKey":"data:wydmdtu:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":538,"l2CacheGetDurationNs":297400},{"geohashId":"wydmdts","cacheKey":"data:wydmdts:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":669,"l2CacheGetDurationNs":410700},{"geohashId":"wydmdtk","cacheKey":"data:wydmdtk:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":630,"l2CacheGetDurationNs":321900},{"geohashId":"wydmdt7","cacheKey":"data:wydmdt7:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":134,"l2CacheGetDurationNs":424400},{"geohashId":"wydmdt6","cacheKey":"data:wydmdt6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":203600},{"geohashId":"wydmdtd","cacheKey":"data:wydmdtd:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":268,"l2CacheGetDurationNs":276300},{"geohashId":"wydmdtf","cacheKey":"data:wydmdtf:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":137,"l2CacheGetDurationNs":280100}],"l2TotalHits":8,"l2TotalMisses":1,"l2CacheTotalDurationNs":3196900,"l2JsonDeserializeTotalDurationNs":271100,"errorMessage":null,"success":true}}
2025-11-21 20:43:13.783 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:13.783060800Z","nanoTime":30979797153800,"traceId":"24ae3ad2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:43:13.783 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:43:13.783 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 1개
2025-11-21 20:43:13.784 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 0건
2025-11-21 20:43:13.784 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:43:13.784 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 20:43:13.784 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:13.784110100Z","nanoTime":30979800706800,"traceId":"24ae3ad2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":3553000,"duration_ms":3,"resultData":{"inputCctvMissGrids":["wydmdt6"],"cctvQueryResult":{"queryGeohashIds":["wydmdt6"],"totalRowsReturned":0,"rowsPerGrid":{},"queryExecutionTimeNs":3298200,"errorMessage":null,"success":true},"cctvCacheWrites":[],"errorMessage":null,"success":true}}
2025-11-21 20:43:13.784 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:13.784110100Z","nanoTime":30979800857700,"traceId":"24ae3ad2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:43:13.784 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:43:13.784 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56069576314415, 127.02913286555491)
2025-11-21 20:43:13.784 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:43:13.878 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:43:13.878 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:43:13.878 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:43:13.878 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56069576314415, 127.02913286555491), 반경: 500m
2025-11-21 20:43:13.959 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:43:13.959 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 131건
2025-11-21 20:43:13.959 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:43:13.959 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:43:13.959 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 20:43:13.959 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 성동구
2025-11-21 20:43:13.961 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:43:13.961 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:43:13.961 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:43:13.961 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 20:43:13.961 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:13.961135300Z","nanoTime":30979975073200,"traceId":"24ae3ad2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":174215500,"duration_ms":174,"resultData":{"latitude":37.56069576314415,"longitude":127.02913286555491,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":174011900,"addressApiResult":{"cached":false,"cacheKey":"address:37.56069576314415:127.02913286555491","roadAddress":"서울특별시 성동구 무학봉길 57","jibunAddress":"서울 성동구 하왕십리동 982-4","responseSize":73,"executionTimeNs":91464100,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":691400,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56069576314415:127.02913286555491:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":0,"CS2":15,"SC4":3,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":3,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":131,"responseSize":15195,"executionTimeNs":81856400,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:13.961 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:13.961135300Z","nanoTime":30979975381300,"traceId":"24ae3ad2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:43:13.961 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:43:13.961 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:43:13.961 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 33개
2025-11-21 20:43:13.961 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 33개 (총 카메라 대수: 101대)
2025-11-21 20:43:13.961 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:43:14.030 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구 영신로20길 11 (거리: 364m)
2025-11-21 20:43:14.030 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:43:14.030 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:43:14.030 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 12개 카테고리
2025-11-21 20:43:14.030 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:43:14.032 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:14.030084Z","nanoTime":30980045951900,"traceId":"24ae3ad2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":70570600,"duration_ms":70,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":33,"totalCctvAfterFilter":33,"totalCameraCount":101,"filterRate":1.0,"filterExecutionTimeNs":23600,"success":true},"policeQuery":{"queryDurationNs":69931900,"found":true,"nearestAddress":"서울특별시 영등포구 영신로20길 11","nearestDistance":364.0901946958974,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SC4":3,"SW8":2,"PO3":3,"FD6":15,"PK6":15,"MT1":3,"PM9":15},"placesAfterFilter":{"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SC4":3,"SW8":2,"PO3":3,"FD6":15,"PK6":15,"MT1":3,"PM9":15},"totalBeforeFilter":131,"totalAfterFilter":131,"filterRate":1.0,"filterExecutionTimeNs":160500,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:14.032 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:14.032266800Z","nanoTime":30980046168500,"traceId":"24ae3ad2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:43:14.032 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:43:14.032 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 78.70, 편의성: 44.19, 종합: 61.45
2025-11-21 20:43:14.032 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:14.032266800Z","nanoTime":30980046356400,"traceId":"24ae3ad2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":187900,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":54.48872566301283,"policeDistance":364.0901946958974,"cctvScore":100.0,"cctvCount":33,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":78.70154057890385,"success":true},"convenienceScore":{"categoryScores":{"BK9":75.0,"HP8":100.0,"CS2":5.333162672127825,"AC5":15.0,"CE7":30.0,"SC4":6.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":45.0,"MT1":30.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":44.19443022267732,"success":true},"overallScore":61.447985400790586,"errorMessage":null,"success":true}}
2025-11-21 20:43:14.032 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:14.032266800Z","nanoTime":30980046470900,"traceId":"24ae3ad2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:43:14.032 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:43:14.032 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구 영신로20길 11, latitude=37.557429, longitude=127.028852, geohashId=wydmdt5)
2025-11-21 20:43:14.032 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 364.0901946958974
2025-11-21 20:43:14.033 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdte
2025-11-21 20:43:14.033 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:43:14.033 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:14.033718200Z","nanoTime":30980047535600,"traceId":"24ae3ad2","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1064700,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 17m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdte","dataSize":19946,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19946,"errorMessage":null,"success":true}}
2025-11-21 20:43:14.033 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:43:14.322 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:43:14.323 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.563668133608765, longitude=127.03264278245352, radius=500)
2025-11-21 20:43:14.323 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:43:14.323 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.563668133608765, longitude=127.03264278245352, radius=500
2025-11-21 20:43:14.323 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:14.323319800Z","nanoTime":30980337153000,"traceId":"6eb36d4d","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:43:14.323 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:43:14.323 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.563668133608765, lon=127.03264278245352
2025-11-21 20:43:14.323 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:14.323319800Z","nanoTime":30980337238600,"traceId":"6eb36d4d","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:43:14.323 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:14.323319800Z","nanoTime":30980337316100,"traceId":"6eb36d4d","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":77500,"duration_ms":0,"resultData":{"latitude":37.563668133608765,"longitude":127.03264278245352,"precision":7,"centerHash":"wydmdwq","adjacentHashes":["wydmdwq","wydmdww","wydmdwx","wydmdwr","wydmdwp","wydmdwn","wydmdwj","wydmdwm","wydmdwt"],"errorMessage":null,"success":true}}
2025-11-21 20:43:14.323 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdwq, wydmdww, wydmdwx, wydmdwr, wydmdwp, wydmdwn, wydmdwj, wydmdwm, wydmdwt]
2025-11-21 20:43:14.323 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdwq
2025-11-21 20:43:14.323 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:14.323319800Z","nanoTime":30980337446500,"traceId":"6eb36d4d","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":293500,"duration_ms":0,"resultData":{"requestLatitude":37.563668133608765,"requestLongitude":127.03264278245352,"requestRadius":500,"centerGeohashId":"wydmdwq","nineBlockGeohashes":["wydmdwq","wydmdww","wydmdwx","wydmdwr","wydmdwp","wydmdwn","wydmdwj","wydmdwm","wydmdwt"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:43:14.323 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:14.323319800Z","nanoTime":30980337492100,"traceId":"6eb36d4d","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:43:14.323 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:43:14.323 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdwq
2025-11-21 20:43:14.324 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 히트! JSON 역직렬화 시도
2025-11-21 20:43:14.325 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 히트 성공! 즉시 반환 (L1 조회: 0.901ms, 역직렬화: 0.6815ms)
2025-11-21 20:43:14.325 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:14.325365Z","nanoTime":30980339348300,"traceId":"6eb36d4d","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1856200,"duration_ms":1,"resultData":{"centerGeohashId":"wydmdwq","nineBlockGeohashes":["wydmdwq","wydmdww","wydmdwx","wydmdwr","wydmdwp","wydmdwn","wydmdwj","wydmdwm","wydmdwt"],"l1CacheHit":true,"l1CacheResult":{"cacheKey":"dto:wydmdwq","hit":true,"valueSize":18614,"l1CacheGetDurationNs":901000,"l1JsonDeserializeDurationNs":681500},"l2CacheRequired":false,"l2CacheResults":null,"l2TotalHits":0,"l2TotalMisses":0,"l2CacheTotalDurationNs":null,"l2JsonDeserializeTotalDurationNs":null,"errorMessage":null,"success":true}}
2025-11-21 20:43:14.325 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 1단계 캐시 히트: 즉시 반환 ===
2025-11-21 20:43:14.325 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:43:14.786 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:43:14.786 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.562909618432165, longitude=127.03823377274514, radius=500)
2025-11-21 20:43:14.786 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:43:14.786 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.562909618432165, longitude=127.03823377274514, radius=500
2025-11-21 20:43:14.786 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:14.786073900Z","nanoTime":30980800101400,"traceId":"57515e28","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:43:14.786 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:43:14.786 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.562909618432165, lon=127.03823377274514
2025-11-21 20:43:14.786 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:14.786073900Z","nanoTime":30980800182600,"traceId":"57515e28","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:43:14.786 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:14.786073900Z","nanoTime":30980800233600,"traceId":"57515e28","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":51000,"duration_ms":0,"resultData":{"latitude":37.562909618432165,"longitude":127.03823377274514,"precision":7,"centerHash":"wydmdy4","adjacentHashes":["wydmdy4","wydmdy6","wydmdy7","wydmdy5","wydmdvg","wydmdvf","wydmdvc","wydmdy1","wydmdy3"],"errorMessage":null,"success":true}}
2025-11-21 20:43:14.786 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdy4, wydmdy6, wydmdy7, wydmdy5, wydmdvg, wydmdvf, wydmdvc, wydmdy1, wydmdy3]
2025-11-21 20:43:14.786 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdy4
2025-11-21 20:43:14.786 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:14.786073900Z","nanoTime":30980800355500,"traceId":"57515e28","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":254100,"duration_ms":0,"resultData":{"requestLatitude":37.562909618432165,"requestLongitude":127.03823377274514,"requestRadius":500,"centerGeohashId":"wydmdy4","nineBlockGeohashes":["wydmdy4","wydmdy6","wydmdy7","wydmdy5","wydmdvg","wydmdvf","wydmdvc","wydmdy1","wydmdy3"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:43:14.786 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:14.786073900Z","nanoTime":30980800405100,"traceId":"57515e28","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:43:14.786 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:43:14.786 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdy4
2025-11-21 20:43:14.786 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3235ms)
2025-11-21 20:43:14.787 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:43:14.788 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:43:14.788 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 7개, 미스: 2개
2025-11-21 20:43:14.788 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.8122ms, 역직렬화: 0.1437ms
2025-11-21 20:43:14.788 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:43:14.788 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:14.788148900Z","nanoTime":30980802785600,"traceId":"57515e28","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2380500,"duration_ms":2,"resultData":{"centerGeohashId":"wydmdy4","nineBlockGeohashes":["wydmdy4","wydmdy6","wydmdy7","wydmdy5","wydmdvg","wydmdvf","wydmdvc","wydmdy1","wydmdy3"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdy4","hit":false,"valueSize":0,"l1CacheGetDurationNs":323500,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdy4","cacheKey":"data:wydmdy4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":203300},{"geohashId":"wydmdy6","cacheKey":"data:wydmdy6:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":134,"l2CacheGetDurationNs":339300},{"geohashId":"wydmdy7","cacheKey":"data:wydmdy7:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":530,"l2CacheGetDurationNs":199200},{"geohashId":"wydmdy5","cacheKey":"data:wydmdy5:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":399,"l2CacheGetDurationNs":164700},{"geohashId":"wydmdvg","cacheKey":"data:wydmdvg:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":395,"l2CacheGetDurationNs":158300},{"geohashId":"wydmdvf","cacheKey":"data:wydmdvf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":74200},{"geohashId":"wydmdvc","cacheKey":"data:wydmdvc:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":660,"l2CacheGetDurationNs":162000},{"geohashId":"wydmdy1","cacheKey":"data:wydmdy1:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":383,"l2CacheGetDurationNs":153500},{"geohashId":"wydmdy3","cacheKey":"data:wydmdy3:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":257,"l2CacheGetDurationNs":151100}],"l2TotalHits":7,"l2TotalMisses":2,"l2CacheTotalDurationNs":1812200,"l2JsonDeserializeTotalDurationNs":143700,"errorMessage":null,"success":true}}
2025-11-21 20:43:14.789 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:14.789130400Z","nanoTime":30980802893000,"traceId":"57515e28","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:43:14.789 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:43:14.789 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 2개
2025-11-21 20:43:14.790 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 0건
2025-11-21 20:43:14.790 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:43:14.790 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 7개
2025-11-21 20:43:14.792 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:14.790665900Z","nanoTime":30980806335400,"traceId":"57515e28","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":3442400,"duration_ms":3,"resultData":{"inputCctvMissGrids":["wydmdy4","wydmdvf"],"cctvQueryResult":{"queryGeohashIds":["wydmdy4","wydmdvf"],"totalRowsReturned":0,"rowsPerGrid":{},"queryExecutionTimeNs":3183800,"errorMessage":null,"success":true},"cctvCacheWrites":[],"errorMessage":null,"success":true}}
2025-11-21 20:43:14.792 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:14.792677500Z","nanoTime":30980806508200,"traceId":"57515e28","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:43:14.792 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:43:14.792 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.562909618432165, 127.03823377274514)
2025-11-21 20:43:14.792 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:43:14.903 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:43:14.903 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:43:14.903 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:43:14.903 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.562909618432165, 127.03823377274514), 반경: 500m
2025-11-21 20:43:14.992 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:43:14.992 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 143건
2025-11-21 20:43:14.992 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:43:14.992 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:43:14.992 [http-nio-8185-exec-5] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 20:43:14.992 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:43:14.992 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:43:14.992 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:43:14.992 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 20:43:14.992 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:14.992268500Z","nanoTime":30981007787400,"traceId":"57515e28","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":201279200,"duration_ms":201,"resultData":{"latitude":37.562909618432165,"longitude":127.03823377274514,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":201146100,"addressApiResult":{"cached":false,"cacheKey":"address:37.562909618432165:127.03823377274514","roadAddress":"주소 없음","jibunAddress":"서울 성동구 행당동 168-151","responseSize":61,"executionTimeNs":111575300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":39400,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.562909618432165:127.03823377274514:500","categoryCount":15,"placesByCategory":{"CT1":5,"AT4":3,"CS2":15,"SC4":3,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":6,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalPlaces":143,"responseSize":16529,"executionTimeNs":89531400,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:14.992 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:14.992268500Z","nanoTime":30981007982600,"traceId":"57515e28","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:43:14.992 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:43:14.992 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:43:14.994 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 21개
2025-11-21 20:43:14.994 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 21개 (총 카메라 대수: 62대)
2025-11-21 20:43:14.994 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:43:15.062 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구  선유로 95 (거리: 428m)
2025-11-21 20:43:15.062 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:43:15.062 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:43:15.064 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 20:43:15.064 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:43:15.064 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:15.064123600Z","nanoTime":30981078014800,"traceId":"57515e28","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":70032200,"duration_ms":70,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":21,"totalCctvAfterFilter":21,"totalCameraCount":62,"filterRate":1.0,"filterExecutionTimeNs":23700,"success":true},"policeQuery":{"queryDurationNs":69465900,"found":true,"nearestAddress":"서울특별시 영등포구  선유로 95","nearestDistance":427.5952043468341,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":5,"AT4":3,"CS2":15,"SC4":3,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":6,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"placesAfterFilter":{"CT1":5,"AT4":3,"CS2":15,"SC4":3,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":6,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalBeforeFilter":143,"totalAfterFilter":143,"filterRate":1.0,"filterExecutionTimeNs":188700,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:15.064 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:15.064123600Z","nanoTime":30981078250700,"traceId":"57515e28","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:43:15.064 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:43:15.064 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 41.97, 편의성: 36.78, 종합: 39.37
2025-11-21 20:43:15.064 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:15.064123600Z","nanoTime":30981078511700,"traceId":"57515e28","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":261000,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":46.550599456645735,"policeDistance":427.5952043468341,"cctvScore":70.0,"cctvCount":21,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":41.96517983699372,"success":true},"convenienceScore":{"categoryScores":{"CT1":20.0,"AT4":9.0,"CS2":3.75,"SC4":6.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":18.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":36.78333333333333,"success":true},"overallScore":39.37425658516352,"errorMessage":null,"success":true}}
2025-11-21 20:43:15.064 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:15.064123600Z","nanoTime":30981078653900,"traceId":"57515e28","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:43:15.064 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:43:15.064 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구  선유로 95, latitude=37.560301, longitude=127.041798, geohashId=wydmdvt)
2025-11-21 20:43:15.064 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 427.5952043468341
2025-11-21 20:43:15.066 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdy4
2025-11-21 20:43:15.066 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:43:15.066 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:15.066154500Z","nanoTime":30981080126200,"traceId":"57515e28","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1472300,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["주차장이(가) 81m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdy4","dataSize":19978,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19978,"errorMessage":null,"success":true}}
2025-11-21 20:43:15.066 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:43:15.370 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:43:15.370 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56252913885687, longitude=127.04414178639347, radius=500)
2025-11-21 20:43:15.370 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:43:15.370 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56252913885687, longitude=127.04414178639347, radius=500
2025-11-21 20:43:15.371 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:15.371262700Z","nanoTime":30981385019600,"traceId":"162d48d3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:43:15.371 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:43:15.371 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56252913885687, lon=127.04414178639347
2025-11-21 20:43:15.371 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:15.371262700Z","nanoTime":30981385104400,"traceId":"162d48d3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:43:15.371 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:15.371262700Z","nanoTime":30981385149200,"traceId":"162d48d3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":44800,"duration_ms":0,"resultData":{"latitude":37.56252913885687,"longitude":127.04414178639347,"precision":7,"centerHash":"wydmdyn","adjacentHashes":["wydmdyn","wydmdyq","wydmdyr","wydmdyp","wydmdvz","wydmdvy","wydmdvv","wydmdyj","wydmdym"],"errorMessage":null,"success":true}}
2025-11-21 20:43:15.371 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdyn, wydmdyq, wydmdyr, wydmdyp, wydmdvz, wydmdvy, wydmdvv, wydmdyj, wydmdym]
2025-11-21 20:43:15.371 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdyn
2025-11-21 20:43:15.371 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:15.371262700Z","nanoTime":30981385249700,"traceId":"162d48d3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":230100,"duration_ms":0,"resultData":{"requestLatitude":37.56252913885687,"requestLongitude":127.04414178639347,"requestRadius":500,"centerGeohashId":"wydmdyn","nineBlockGeohashes":["wydmdyn","wydmdyq","wydmdyr","wydmdyp","wydmdvz","wydmdvy","wydmdvv","wydmdyj","wydmdym"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:43:15.371 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:15.371262700Z","nanoTime":30981385292500,"traceId":"162d48d3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:43:15.371 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:43:15.371 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdyn
2025-11-21 20:43:15.371 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3629ms)
2025-11-21 20:43:15.371 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:43:15.373 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:43:15.373 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 7개, 미스: 2개
2025-11-21 20:43:15.373 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.9866ms, 역직렬화: 0.1392ms
2025-11-21 20:43:15.373 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:43:15.373 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:15.373734300Z","nanoTime":30981387914900,"traceId":"162d48d3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2622400,"duration_ms":2,"resultData":{"centerGeohashId":"wydmdyn","nineBlockGeohashes":["wydmdyn","wydmdyq","wydmdyr","wydmdyp","wydmdvz","wydmdvy","wydmdvv","wydmdyj","wydmdym"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdyn","hit":false,"valueSize":0,"l1CacheGetDurationNs":362900,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdyn","cacheKey":"data:wydmdyn:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":133,"l2CacheGetDurationNs":344600},{"geohashId":"wydmdyq","cacheKey":"data:wydmdyq:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":397,"l2CacheGetDurationNs":303300},{"geohashId":"wydmdyr","cacheKey":"data:wydmdyr:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":133,"l2CacheGetDurationNs":222200},{"geohashId":"wydmdyp","cacheKey":"data:wydmdyp:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":263,"l2CacheGetDurationNs":154600},{"geohashId":"wydmdvz","cacheKey":"data:wydmdvz:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":263,"l2CacheGetDurationNs":257900},{"geohashId":"wydmdvy","cacheKey":"data:wydmdvy:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":133,"l2CacheGetDurationNs":172700},{"geohashId":"wydmdvv","cacheKey":"data:wydmdvv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":84900},{"geohashId":"wydmdyj","cacheKey":"data:wydmdyj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":75400},{"geohashId":"wydmdym","cacheKey":"data:wydmdym:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":266,"l2CacheGetDurationNs":167000}],"l2TotalHits":7,"l2TotalMisses":2,"l2CacheTotalDurationNs":1986600,"l2JsonDeserializeTotalDurationNs":139200,"errorMessage":null,"success":true}}
2025-11-21 20:43:15.373 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:15.373734300Z","nanoTime":30981388069800,"traceId":"162d48d3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:43:15.373 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:43:15.373 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 2개
2025-11-21 20:43:15.376 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 7건
2025-11-21 20:43:15.377 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:43:15.377 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 20:43:15.377 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:15.377347400Z","nanoTime":30981391684400,"traceId":"162d48d3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":3614600,"duration_ms":3,"resultData":{"inputCctvMissGrids":["wydmdvv","wydmdyj"],"cctvQueryResult":{"queryGeohashIds":["wydmdvv","wydmdyj"],"totalRowsReturned":7,"rowsPerGrid":{"wydmdvv":1,"wydmdyj":6},"queryExecutionTimeNs":2819400,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdvv","cacheKey":"data:wydmdvv:cctv","dataCount":1,"dataSize":134,"errorMessage":null,"success":true},{"geohashId":"wydmdyj","cacheKey":"data:wydmdyj:cctv","dataCount":6,"dataSize":795,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:43:15.377 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:15.377347400Z","nanoTime":30981391789800,"traceId":"162d48d3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:43:15.377 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:43:15.377 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56252913885687, 127.04414178639347)
2025-11-21 20:43:15.377 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:43:15.482 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:43:15.482 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:43:15.483 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:43:15.483 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56252913885687, 127.04414178639347), 반경: 500m
2025-11-21 20:43:15.569 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:43:15.569 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 129건
2025-11-21 20:43:15.569 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:43:15.569 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:43:15.569 [http-nio-8185-exec-4] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 20:43:15.569 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:43:15.569 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:43:15.569 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:43:15.569 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 20:43:15.569 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:15.569911600Z","nanoTime":30981585483900,"traceId":"162d48d3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":193694100,"duration_ms":193,"resultData":{"latitude":37.56252913885687,"longitude":127.04414178639347,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":193576300,"addressApiResult":{"cached":false,"cacheKey":"address:37.56252913885687:127.04414178639347","roadAddress":"주소 없음","jibunAddress":"서울 성동구 마장동 산 25","responseSize":58,"executionTimeNs":105660900,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":43100,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56252913885687:127.04414178639347:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":2,"CS2":15,"SC4":4,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":15,"OL7":1,"PM9":12},"totalPlaces":129,"responseSize":14914,"executionTimeNs":87872300,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:15.569 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:15.569911600Z","nanoTime":30981585668200,"traceId":"162d48d3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:43:15.571 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:43:15.571 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:43:15.571 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 19개
2025-11-21 20:43:15.571 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 19개 (총 카메라 대수: 50대)
2025-11-21 20:43:15.571 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:43:15.648 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구  선유로 95 (거리: 323m)
2025-11-21 20:43:15.648 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:43:15.648 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:43:15.650 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 20:43:15.650 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:43:15.650 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:15.650077100Z","nanoTime":30981664018500,"traceId":"162d48d3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":78350300,"duration_ms":78,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":19,"totalCctvAfterFilter":19,"totalCameraCount":50,"filterRate":1.0,"filterExecutionTimeNs":21000,"success":true},"policeQuery":{"queryDurationNs":77508800,"found":true,"nearestAddress":"서울특별시 영등포구  선유로 95","nearestDistance":322.5893155187155,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"AT4":2,"CS2":15,"SC4":4,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":15,"OL7":1,"PM9":12},"placesAfterFilter":{"AT4":2,"CS2":15,"SC4":4,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":15,"OL7":1,"PM9":12},"totalBeforeFilter":129,"totalAfterFilter":129,"filterRate":1.0,"filterExecutionTimeNs":258000,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:15.650 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:15.650077100Z","nanoTime":30981664337100,"traceId":"162d48d3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:43:15.650 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:43:15.650 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 43.24, 편의성: 36.98, 종합: 40.11
2025-11-21 20:43:15.650 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:15.650077100Z","nanoTime":30981664694300,"traceId":"162d48d3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":357200,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":59.67633556016057,"policeDistance":322.5893155187155,"cctvScore":63.33333333333333,"cctvCount":19,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":43.236234001381504,"success":true},"convenienceScore":{"categoryScores":{"AT4":6.0,"CS2":3.75,"SC4":8.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":96.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":36.982142857142854,"success":true},"overallScore":40.109188429262176,"errorMessage":null,"success":true}}
2025-11-21 20:43:15.651 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:15.651091400Z","nanoTime":30981664861700,"traceId":"162d48d3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:43:15.651 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:43:15.651 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구  선유로 95, latitude=37.560301, longitude=127.041798, geohashId=wydmdvt)
2025-11-21 20:43:15.651 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 322.5893155187155
2025-11-21 20:43:15.652 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdyn
2025-11-21 20:43:15.652 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:43:15.652 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:15.652767900Z","nanoTime":30981666593600,"traceId":"162d48d3","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1731900,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["학교이(가) 121m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdyn","dataSize":18197,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":18197,"errorMessage":null,"success":true}}
2025-11-21 20:43:15.652 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:43:16.148 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:43:16.148 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.566476761168914, longitude=127.04063522463638, radius=500)
2025-11-21 20:43:16.149 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:43:16.149 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.566476761168914, longitude=127.04063522463638, radius=500
2025-11-21 20:43:16.149 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.149574100Z","nanoTime":30982163379400,"traceId":"e9337953","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:43:16.149 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:43:16.149 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.566476761168914, lon=127.04063522463638
2025-11-21 20:43:16.149 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.149574100Z","nanoTime":30982163455500,"traceId":"e9337953","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:43:16.149 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.149574100Z","nanoTime":30982163504100,"traceId":"e9337953","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":48600,"duration_ms":0,"resultData":{"latitude":37.566476761168914,"longitude":127.04063522463638,"precision":7,"centerHash":"wydmdyu","adjacentHashes":["wydmdyu","wydmdzh","wydmdzj","wydmdyv","wydmdyt","wydmdys","wydmdye","wydmdyg","wydmdz5"],"errorMessage":null,"success":true}}
2025-11-21 20:43:16.149 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdyu, wydmdzh, wydmdzj, wydmdyv, wydmdyt, wydmdys, wydmdye, wydmdyg, wydmdz5]
2025-11-21 20:43:16.149 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdyu
2025-11-21 20:43:16.149 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.149574100Z","nanoTime":30982163592800,"traceId":"e9337953","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":213400,"duration_ms":0,"resultData":{"requestLatitude":37.566476761168914,"requestLongitude":127.04063522463638,"requestRadius":500,"centerGeohashId":"wydmdyu","nineBlockGeohashes":["wydmdyu","wydmdzh","wydmdzj","wydmdyv","wydmdyt","wydmdys","wydmdye","wydmdyg","wydmdz5"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:43:16.149 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.149574100Z","nanoTime":30982163630300,"traceId":"e9337953","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:43:16.149 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:43:16.149 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdyu
2025-11-21 20:43:16.149 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4185ms)
2025-11-21 20:43:16.149 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:43:16.151 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:43:16.151 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 4개, 미스: 5개
2025-11-21 20:43:16.151 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.8984ms, 역직렬화: 0.0971ms
2025-11-21 20:43:16.151 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:43:16.151 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.151738600Z","nanoTime":30982166181500,"traceId":"e9337953","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2551200,"duration_ms":2,"resultData":{"centerGeohashId":"wydmdyu","nineBlockGeohashes":["wydmdyu","wydmdzh","wydmdzj","wydmdyv","wydmdyt","wydmdys","wydmdye","wydmdyg","wydmdz5"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdyu","hit":false,"valueSize":0,"l1CacheGetDurationNs":418500,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdyu","cacheKey":"data:wydmdyu:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":270000},{"geohashId":"wydmdzh","cacheKey":"data:wydmdzh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":247200},{"geohashId":"wydmdzj","cacheKey":"data:wydmdzj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":191400},{"geohashId":"wydmdyv","cacheKey":"data:wydmdyv:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":134,"l2CacheGetDurationNs":266600},{"geohashId":"wydmdyt","cacheKey":"data:wydmdyt:cctv","hit":true,"dataType":"cctv","dataCount":7,"dataSize":891,"l2CacheGetDurationNs":178600},{"geohashId":"wydmdys","cacheKey":"data:wydmdys:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":265,"l2CacheGetDurationNs":192300},{"geohashId":"wydmdye","cacheKey":"data:wydmdye:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":394,"l2CacheGetDurationNs":234800},{"geohashId":"wydmdyg","cacheKey":"data:wydmdyg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":83300},{"geohashId":"wydmdz5","cacheKey":"data:wydmdz5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":72900}],"l2TotalHits":4,"l2TotalMisses":5,"l2CacheTotalDurationNs":1898400,"l2JsonDeserializeTotalDurationNs":97100,"errorMessage":null,"success":true}}
2025-11-21 20:43:16.151 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.151738600Z","nanoTime":30982166301500,"traceId":"e9337953","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:43:16.151 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:43:16.151 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 5개
2025-11-21 20:43:16.155 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 4건
2025-11-21 20:43:16.156 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:43:16.156 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 7개
2025-11-21 20:43:16.156 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.156367600Z","nanoTime":30982170822300,"traceId":"e9337953","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4520800,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmdyu","wydmdzh","wydmdzj","wydmdyg","wydmdz5"],"cctvQueryResult":{"queryGeohashIds":["wydmdyu","wydmdzh","wydmdzj","wydmdyg","wydmdz5"],"totalRowsReturned":4,"rowsPerGrid":{"wydmdz5":2,"wydmdyg":1,"wydmdzh":1},"queryExecutionTimeNs":3473400,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdz5","cacheKey":"data:wydmdz5:cctv","dataCount":2,"dataSize":258,"errorMessage":null,"success":true},{"geohashId":"wydmdyg","cacheKey":"data:wydmdyg:cctv","dataCount":1,"dataSize":130,"errorMessage":null,"success":true},{"geohashId":"wydmdzh","cacheKey":"data:wydmdzh:cctv","dataCount":1,"dataSize":133,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:43:16.156 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.156367600Z","nanoTime":30982170973600,"traceId":"e9337953","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:43:16.156 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:43:16.156 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.566476761168914, 127.04063522463638)
2025-11-21 20:43:16.157 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:43:16.261 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:43:16.261 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:43:16.261 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:43:16.261 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.566476761168914, 127.04063522463638), 반경: 500m
2025-11-21 20:43:16.450 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:43:16.450 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 122건
2025-11-21 20:43:16.451 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:43:16.451 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:43:16.451 [http-nio-8185-exec-6] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 20:43:16.451 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:43:16.451 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:43:16.451 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:43:16.451 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 20:43:16.451 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.451227500Z","nanoTime":30982465919800,"traceId":"e9337953","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":294946200,"duration_ms":294,"resultData":{"latitude":37.566476761168914,"longitude":127.04063522463638,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":294815600,"addressApiResult":{"cached":false,"cacheKey":"address:37.566476761168914:127.04063522463638","roadAddress":"주소 없음","jibunAddress":"서울 성동구 마장동 765-1","responseSize":59,"executionTimeNs":105570400,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":47300,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.566476761168914:127.04063522463638:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":2,"CS2":15,"SC4":3,"MT1":0,"BK9":15,"HP8":12,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":2,"PM9":10},"totalPlaces":122,"responseSize":14122,"executionTimeNs":189197900,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:16.451 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.451227500Z","nanoTime":30982466104800,"traceId":"e9337953","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:43:16.451 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:43:16.451 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:43:16.451 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 17개
2025-11-21 20:43:16.451 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 17개 (총 카메라 대수: 53대)
2025-11-21 20:43:16.451 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:43:16.504 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구  선유로 95 (거리: 694m)
2025-11-21 20:43:16.504 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:43:16.504 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:43:16.504 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 20:43:16.504 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:43:16.504 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.504437800Z","nanoTime":30982529847200,"traceId":"e9337953","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":63742400,"duration_ms":63,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":17,"totalCctvAfterFilter":17,"totalCameraCount":53,"filterRate":1.0,"filterExecutionTimeNs":12500,"success":true},"policeQuery":{"queryDurationNs":63370100,"found":true,"nearestAddress":"서울특별시 영등포구  선유로 95","nearestDistance":694.3192478656579,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"AT4":2,"CS2":15,"SC4":3,"BK9":15,"HP8":12,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":2,"PM9":10},"placesAfterFilter":{"AT4":2,"CS2":15,"SC4":3,"BK9":15,"HP8":12,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":2,"PM9":10},"totalBeforeFilter":122,"totalAfterFilter":122,"filterRate":1.0,"filterExecutionTimeNs":99700,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:16.504 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.504437800Z","nanoTime":30982529978200,"traceId":"e9337953","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:43:16.504 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:43:16.504 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 26.63, 편의성: 37.83, 종합: 32.23
2025-11-21 20:43:16.504 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.504437800Z","nanoTime":30982530132700,"traceId":"e9337953","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":154500,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":13.210094016792768,"policeDistance":694.3192478656579,"cctvScore":56.666666666666664,"cctvCount":17,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":26.629694871704498,"success":true},"convenienceScore":{"categoryScores":{"AT4":6.0,"CS2":3.75,"SC4":6.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":6.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":80.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":37.82692307692308,"success":true},"overallScore":32.22830897431379,"errorMessage":null,"success":true}}
2025-11-21 20:43:16.504 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.504437800Z","nanoTime":30982530215600,"traceId":"e9337953","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:43:16.504 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:43:16.504 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구  선유로 95, latitude=37.560301, longitude=127.041798, geohashId=wydmdvt)
2025-11-21 20:43:16.504 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 694.3192478656579
2025-11-21 20:43:16.504 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdyu
2025-11-21 20:43:16.504 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:43:16.504 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.504437800Z","nanoTime":30982531117300,"traceId":"e9337953","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":901700,"duration_ms":0,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["병원이(가) 111m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdyu","dataSize":17076,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17076,"errorMessage":null,"success":true}}
2025-11-21 20:43:16.504 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:43:16.601 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:43:16.601 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56717653541545, longitude=127.04858161950892, radius=500)
2025-11-21 20:43:16.601 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:43:16.601 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56717653541545, longitude=127.04858161950892, radius=500
2025-11-21 20:43:16.601 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.601169100Z","nanoTime":30982615090700,"traceId":"4d58a825","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:43:16.601 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:43:16.601 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56717653541545, lon=127.04858161950892
2025-11-21 20:43:16.601 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.601169100Z","nanoTime":30982615161900,"traceId":"4d58a825","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:43:16.601 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.601169100Z","nanoTime":30982615206800,"traceId":"4d58a825","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":44900,"duration_ms":0,"resultData":{"latitude":37.56717653541545,"longitude":127.04858161950892,"precision":7,"centerHash":"wydmenc","adjacentHashes":["wydmenc","wydmep1","wydmep4","wydmenf","wydmend","wydmen9","wydmen8","wydmenb","wydmep0"],"errorMessage":null,"success":true}}
2025-11-21 20:43:16.601 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmenc, wydmep1, wydmep4, wydmenf, wydmend, wydmen9, wydmen8, wydmenb, wydmep0]
2025-11-21 20:43:16.601 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmenc
2025-11-21 20:43:16.601 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.601169100Z","nanoTime":30982615303900,"traceId":"4d58a825","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":213200,"duration_ms":0,"resultData":{"requestLatitude":37.56717653541545,"requestLongitude":127.04858161950892,"requestRadius":500,"centerGeohashId":"wydmenc","nineBlockGeohashes":["wydmenc","wydmep1","wydmep4","wydmenf","wydmend","wydmen9","wydmen8","wydmenb","wydmep0"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:43:16.601 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.601169100Z","nanoTime":30982615348000,"traceId":"4d58a825","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:43:16.601 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:43:16.601 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmenc
2025-11-21 20:43:16.601 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3041ms)
2025-11-21 20:43:16.601 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:43:16.602 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:43:16.603 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:43:16.603 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.1561ms, 역직렬화: 0.0ms
2025-11-21 20:43:16.603 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:43:16.603 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.603236800Z","nanoTime":30982617117400,"traceId":"4d58a825","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1769400,"duration_ms":1,"resultData":{"centerGeohashId":"wydmenc","nineBlockGeohashes":["wydmenc","wydmep1","wydmep4","wydmenf","wydmend","wydmen9","wydmen8","wydmenb","wydmep0"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmenc","hit":false,"valueSize":0,"l1CacheGetDurationNs":304100,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmenc","cacheKey":"data:wydmenc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":107300},{"geohashId":"wydmep1","cacheKey":"data:wydmep1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":150300},{"geohashId":"wydmep4","cacheKey":"data:wydmep4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":114500},{"geohashId":"wydmenf","cacheKey":"data:wydmenf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":187100},{"geohashId":"wydmend","cacheKey":"data:wydmend:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":116200},{"geohashId":"wydmen9","cacheKey":"data:wydmen9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":98400},{"geohashId":"wydmen8","cacheKey":"data:wydmen8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":80100},{"geohashId":"wydmenb","cacheKey":"data:wydmenb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":75300},{"geohashId":"wydmep0","cacheKey":"data:wydmep0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":163500}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1156100,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:43:16.603 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.603236800Z","nanoTime":30982617249100,"traceId":"4d58a825","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:43:16.603 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:43:16.603 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:43:16.605 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 6건
2025-11-21 20:43:16.606 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:43:16.606 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 4개
2025-11-21 20:43:16.606 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.606245700Z","nanoTime":30982620566900,"traceId":"4d58a825","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":3317800,"duration_ms":3,"resultData":{"inputCctvMissGrids":["wydmenc","wydmep1","wydmep4","wydmenf","wydmend","wydmen9","wydmen8","wydmenb","wydmep0"],"cctvQueryResult":{"queryGeohashIds":["wydmenc","wydmep1","wydmep4","wydmenf","wydmend","wydmen9","wydmen8","wydmenb","wydmep0"],"totalRowsReturned":6,"rowsPerGrid":{"wydmen8":3,"wydmenb":1,"wydmep0":1,"wydmep1":1},"queryExecutionTimeNs":2393200,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmen8","cacheKey":"data:wydmen8:cctv","dataCount":3,"dataSize":390,"errorMessage":null,"success":true},{"geohashId":"wydmenb","cacheKey":"data:wydmenb:cctv","dataCount":1,"dataSize":131,"errorMessage":null,"success":true},{"geohashId":"wydmep0","cacheKey":"data:wydmep0:cctv","dataCount":1,"dataSize":130,"errorMessage":null,"success":true},{"geohashId":"wydmep1","cacheKey":"data:wydmep1:cctv","dataCount":1,"dataSize":131,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:43:16.606 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.606245700Z","nanoTime":30982620676600,"traceId":"4d58a825","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:43:16.606 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:43:16.606 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56717653541545, 127.04858161950892)
2025-11-21 20:43:16.606 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:43:16.687 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:43:16.687 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:43:16.687 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:43:16.687 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56717653541545, 127.04858161950892), 반경: 500m
2025-11-21 20:43:16.766 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:43:16.766 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 115건
2025-11-21 20:43:16.767 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:43:16.767 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:43:16.767 [http-nio-8185-exec-7] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 20:43:16.767 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:43:16.767 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:43:16.767 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:43:16.767 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 20:43:16.768 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.767258Z","nanoTime":30982782030800,"traceId":"4d58a825","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":161354200,"duration_ms":161,"resultData":{"latitude":37.56717653541545,"longitude":127.04858161950892,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":161231500,"addressApiResult":{"cached":false,"cacheKey":"address:37.56717653541545:127.04858161950892","roadAddress":"주소 없음","jibunAddress":"서울 성동구 용답동 130","responseSize":57,"executionTimeNs":81332800,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":54500,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56717653541545:127.04858161950892:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":1,"CS2":13,"SC4":1,"MT1":1,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":2,"FD6":15,"PK6":13,"OL7":1,"PM9":7},"totalPlaces":115,"responseSize":13307,"executionTimeNs":79844200,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:16.768 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.768285700Z","nanoTime":30982782348300,"traceId":"4d58a825","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:43:16.768 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:43:16.768 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:43:16.768 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 6개
2025-11-21 20:43:16.768 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 6개 (총 카메라 대수: 22대)
2025-11-21 20:43:16.768 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:43:16.833 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 성동구  마장로 205 (거리: 386m)
2025-11-21 20:43:16.835 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:43:16.835 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:43:16.835 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 20:43:16.835 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:43:16.835 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.835181400Z","nanoTime":30982849344400,"traceId":"4d58a825","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":66996100,"duration_ms":66,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":6,"totalCctvAfterFilter":6,"totalCameraCount":22,"filterRate":1.0,"filterExecutionTimeNs":8100,"success":true},"policeQuery":{"queryDurationNs":66346800,"found":true,"nearestAddress":"서울특별시 성동구  마장로 205","nearestDistance":386.28268797508673,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"AT4":1,"CS2":13,"SC4":1,"MT1":1,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":2,"FD6":15,"PK6":13,"OL7":1,"PM9":7},"placesAfterFilter":{"AT4":1,"CS2":13,"SC4":1,"MT1":1,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":2,"FD6":15,"PK6":13,"OL7":1,"PM9":7},"totalBeforeFilter":115,"totalAfterFilter":115,"filterRate":1.0,"filterExecutionTimeNs":161700,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:16.835 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.835181400Z","nanoTime":30982849562400,"traceId":"4d58a825","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:43:16.835 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:43:16.835 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 23.51, 편의성: 32.45, 종합: 27.98
2025-11-21 20:43:16.835 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.835181400Z","nanoTime":30982849784000,"traceId":"4d58a825","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":221600,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":51.714664003114166,"policeDistance":386.28268797508673,"cctvScore":20.0,"cctvCount":6,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":23.51439920093425,"success":true},"convenienceScore":{"categoryScores":{"AT4":3.0,"CS2":3.25,"SC4":2.0,"MT1":10.0,"BK9":70.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":6.0,"FD6":15.0,"PK6":39.0,"OL7":5.0,"PM9":56.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":32.44642857142857,"success":true},"overallScore":27.98041388618141,"errorMessage":null,"success":true}}
2025-11-21 20:43:16.835 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.835181400Z","nanoTime":30982849913200,"traceId":"4d58a825","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:43:16.835 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:43:16.835 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 성동구  마장로 205, latitude=37.564783, longitude=127.051758, geohashId=wydmenk)
2025-11-21 20:43:16.835 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 386.28268797508673
2025-11-21 20:43:16.836 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmenc
2025-11-21 20:43:16.836 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:43:16.836 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:16.836530600Z","nanoTime":30982851036600,"traceId":"4d58a825","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1123400,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["관광명소이(가) 78m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmenc","dataSize":15292,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":15292,"errorMessage":null,"success":true}}
2025-11-21 20:43:16.836 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:43:17.305 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:43:17.306 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56765854259646, longitude=127.05856545095496, radius=500)
2025-11-21 20:43:17.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:43:17.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56765854259646, longitude=127.05856545095496, radius=500
2025-11-21 20:43:17.306 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:17.306084Z","nanoTime":30983319969000,"traceId":"6d2d5f9a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:43:17.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:43:17.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56765854259646, lon=127.05856545095496
2025-11-21 20:43:17.306 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:17.306084Z","nanoTime":30983320047700,"traceId":"6d2d5f9a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:43:17.306 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:17.306084Z","nanoTime":30983320103300,"traceId":"6d2d5f9a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":55600,"duration_ms":0,"resultData":{"latitude":37.56765854259646,"longitude":127.05856545095496,"precision":7,"centerHash":"wydmeqc","adjacentHashes":["wydmeqc","wydmer1","wydmer4","wydmeqf","wydmeqd","wydmeq9","wydmeq8","wydmeqb","wydmer0"],"errorMessage":null,"success":true}}
2025-11-21 20:43:17.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmeqc, wydmer1, wydmer4, wydmeqf, wydmeqd, wydmeq9, wydmeq8, wydmeqb, wydmer0]
2025-11-21 20:43:17.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmeqc
2025-11-21 20:43:17.306 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:17.306084Z","nanoTime":30983320238600,"traceId":"6d2d5f9a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":269600,"duration_ms":0,"resultData":{"requestLatitude":37.56765854259646,"requestLongitude":127.05856545095496,"requestRadius":500,"centerGeohashId":"wydmeqc","nineBlockGeohashes":["wydmeqc","wydmer1","wydmer4","wydmeqf","wydmeqd","wydmeq9","wydmeq8","wydmeqb","wydmer0"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:43:17.306 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:17.306084Z","nanoTime":30983320304000,"traceId":"6d2d5f9a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:43:17.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:43:17.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmeqc
2025-11-21 20:43:17.307 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4518ms)
2025-11-21 20:43:17.307 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:43:17.307 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:43:17.307 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:43:17.307 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 0.7933ms, 역직렬화: 0.0ms
2025-11-21 20:43:17.307 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:43:17.307 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:17.307073500Z","nanoTime":30983321782400,"traceId":"6d2d5f9a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1478400,"duration_ms":1,"resultData":{"centerGeohashId":"wydmeqc","nineBlockGeohashes":["wydmeqc","wydmer1","wydmer4","wydmeqf","wydmeqd","wydmeq9","wydmeq8","wydmeqb","wydmer0"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmeqc","hit":false,"valueSize":0,"l1CacheGetDurationNs":451800,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmeqc","cacheKey":"data:wydmeqc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":164600},{"geohashId":"wydmer1","cacheKey":"data:wydmer1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":96900},{"geohashId":"wydmer4","cacheKey":"data:wydmer4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":82500},{"geohashId":"wydmeqf","cacheKey":"data:wydmeqf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":68600},{"geohashId":"wydmeqd","cacheKey":"data:wydmeqd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":67100},{"geohashId":"wydmeq9","cacheKey":"data:wydmeq9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":66900},{"geohashId":"wydmeq8","cacheKey":"data:wydmeq8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":65200},{"geohashId":"wydmeqb","cacheKey":"data:wydmeqb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":66300},{"geohashId":"wydmer0","cacheKey":"data:wydmer0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":66500}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":793300,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:43:17.308 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:17.307073500Z","nanoTime":30983321888200,"traceId":"6d2d5f9a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:43:17.308 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:43:17.308 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:43:17.310 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 19건
2025-11-21 20:43:17.310 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:43:17.310 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 20:43:17.310 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:17.310809Z","nanoTime":30983325666000,"traceId":"6d2d5f9a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":3777800,"duration_ms":3,"resultData":{"inputCctvMissGrids":["wydmeqc","wydmer1","wydmer4","wydmeqf","wydmeqd","wydmeq9","wydmeq8","wydmeqb","wydmer0"],"cctvQueryResult":{"queryGeohashIds":["wydmeqc","wydmer1","wydmer4","wydmeqf","wydmeqd","wydmeq9","wydmeq8","wydmeqb","wydmer0"],"totalRowsReturned":19,"rowsPerGrid":{"wydmeq8":1,"wydmeq9":4,"wydmeqc":3,"wydmer4":1,"wydmeqd":1,"wydmer0":3,"wydmer1":2,"wydmeqb":4},"queryExecutionTimeNs":2260600,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmeq8","cacheKey":"data:wydmeq8:cctv","dataCount":1,"dataSize":146,"errorMessage":null,"success":true},{"geohashId":"wydmeq9","cacheKey":"data:wydmeq9:cctv","dataCount":4,"dataSize":564,"errorMessage":null,"success":true},{"geohashId":"wydmeqc","cacheKey":"data:wydmeqc:cctv","dataCount":3,"dataSize":438,"errorMessage":null,"success":true},{"geohashId":"wydmer4","cacheKey":"data:wydmer4:cctv","dataCount":1,"dataSize":137,"errorMessage":null,"success":true},{"geohashId":"wydmeqd","cacheKey":"data:wydmeqd:cctv","dataCount":1,"dataSize":136,"errorMessage":null,"success":true},{"geohashId":"wydmer0","cacheKey":"data:wydmer0:cctv","dataCount":3,"dataSize":420,"errorMessage":null,"success":true},{"geohashId":"wydmer1","cacheKey":"data:wydmer1:cctv","dataCount":2,"dataSize":289,"errorMessage":null,"success":true},{"geohashId":"wydmeqb","cacheKey":"data:wydmeqb:cctv","dataCount":4,"dataSize":579,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:43:17.310 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:17.310809Z","nanoTime":30983325796500,"traceId":"6d2d5f9a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:43:17.310 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:43:17.310 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56765854259646, 127.05856545095496)
2025-11-21 20:43:17.310 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:43:17.392 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:43:17.392 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:43:17.393 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:43:17.393 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56765854259646, 127.05856545095496), 반경: 500m
2025-11-21 20:43:17.472 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:43:17.472 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 131건
2025-11-21 20:43:17.472 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:43:17.472 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:43:17.472 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 동대문구
2025-11-21 20:43:17.472 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 미스 - DB 조회
2025-11-21 20:43:17.477 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 성공 및 캐싱 완료 - 동대문구: 0.713272637
2025-11-21 20:43:17.477 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:43:17.477 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:43:17.477 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:43:17.477 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.713272637
2025-11-21 20:43:17.477 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:17.477761400Z","nanoTime":30983491996000,"traceId":"6d2d5f9a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":166199500,"duration_ms":166,"resultData":{"latitude":37.56765854259646,"longitude":127.05856545095496,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":166065500,"addressApiResult":{"cached":false,"cacheKey":"address:37.56765854259646:127.05856545095496","roadAddress":"서울특별시 동대문구 답십리로56길 105","jibunAddress":"서울 동대문구 답십리동 1014","responseSize":77,"executionTimeNs":81225100,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":"arrest_rate:동대문구","guName":"동대문구","arrestRate":0.713272637,"dataFound":true,"executionTimeNs":4234300,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56765854259646:127.05856545095496:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":2,"CS2":15,"SC4":2,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":0,"PO3":3,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"totalPlaces":131,"responseSize":15232,"executionTimeNs":80606100,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:17.477 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:17.477761400Z","nanoTime":30983492226900,"traceId":"6d2d5f9a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:43:17.477 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:43:17.477 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:43:17.477 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 19개
2025-11-21 20:43:17.477 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 19개 (총 카메라 대수: 63대)
2025-11-21 20:43:17.477 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:43:17.550 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 성동구  마장로 205 (거리: 680m)
2025-11-21 20:43:17.551 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:43:17.551 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:43:17.551 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 20:43:17.551 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:43:17.551 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:17.551746600Z","nanoTime":30983565931800,"traceId":"6d2d5f9a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":73704900,"duration_ms":73,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":19,"totalCctvAfterFilter":19,"totalCameraCount":63,"filterRate":1.0,"filterExecutionTimeNs":15400,"success":true},"policeQuery":{"queryDurationNs":73076000,"found":true,"nearestAddress":"서울특별시 성동구  마장로 205","nearestDistance":679.8795122977468,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"AT4":2,"CS2":15,"SC4":2,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"PO3":3,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"placesAfterFilter":{"AT4":2,"CS2":15,"SC4":2,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"PO3":3,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"totalBeforeFilter":131,"totalAfterFilter":131,"filterRate":1.0,"filterExecutionTimeNs":194300,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:17.551 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:17.551746600Z","nanoTime":30983566175200,"traceId":"6d2d5f9a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:43:17.551 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:43:17.551 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 51.24, 편의성: 33.32, 종합: 42.28
2025-11-21 20:43:17.551 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:17.551746600Z","nanoTime":30983566394600,"traceId":"6d2d5f9a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":219400,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":15.015060962781646,"policeDistance":679.8795122977468,"cctvScore":63.33333333333333,"cctvCount":19,"arrestRateScore":71.3272637,"arrestRate":0.713272637,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":51.236030732167826,"success":true},"convenienceScore":{"categoryScores":{"AT4":6.0,"CS2":4.182898637211624,"SC4":4.0,"MT1":20.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"PO3":9.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"동대문구","guPopulation":358603,"finalScore":33.321761433631664,"success":true},"overallScore":42.27889608289975,"errorMessage":null,"success":true}}
2025-11-21 20:43:17.552 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:17.552777800Z","nanoTime":30983566541800,"traceId":"6d2d5f9a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:43:17.552 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:43:17.552 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 성동구  마장로 205, latitude=37.564783, longitude=127.051758, geohashId=wydmenk)
2025-11-21 20:43:17.552 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 679.8795122977468
2025-11-21 20:43:17.553 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmeqc
2025-11-21 20:43:17.553 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:43:17.553 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:17.553215400Z","nanoTime":30983567588300,"traceId":"6d2d5f9a","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1046500,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["은행이(가) 19m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmeqc","dataSize":18912,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":18912,"errorMessage":null,"success":true}}
2025-11-21 20:43:17.553 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:43:17.939 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:43:17.939 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.566140737762964, longitude=127.0663743393518, radius=500)
2025-11-21 20:43:17.939 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:43:17.939 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.566140737762964, longitude=127.0663743393518, radius=500
2025-11-21 20:43:17.939 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:17.939352200Z","nanoTime":30983953578800,"traceId":"70aa0d96","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:43:17.939 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:43:17.939 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.566140737762964, lon=127.0663743393518
2025-11-21 20:43:17.939 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:17.939352200Z","nanoTime":30983953655800,"traceId":"70aa0d96","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:43:17.939 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:17.939352200Z","nanoTime":30983953703000,"traceId":"70aa0d96","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":47200,"duration_ms":0,"resultData":{"latitude":37.566140737762964,"longitude":127.0663743393518,"precision":7,"centerHash":"wydmeqw","adjacentHashes":["wydmeqw","wydmeqy","wydmeqz","wydmeqx","wydmeqr","wydmeqq","wydmeqm","wydmeqt","wydmeqv"],"errorMessage":null,"success":true}}
2025-11-21 20:43:17.939 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmeqw, wydmeqy, wydmeqz, wydmeqx, wydmeqr, wydmeqq, wydmeqm, wydmeqt, wydmeqv]
2025-11-21 20:43:17.939 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmeqw
2025-11-21 20:43:17.939 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:17.939352200Z","nanoTime":30983953801900,"traceId":"70aa0d96","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":223100,"duration_ms":0,"resultData":{"requestLatitude":37.566140737762964,"requestLongitude":127.0663743393518,"requestRadius":500,"centerGeohashId":"wydmeqw","nineBlockGeohashes":["wydmeqw","wydmeqy","wydmeqz","wydmeqx","wydmeqr","wydmeqq","wydmeqm","wydmeqt","wydmeqv"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:43:17.939 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:17.939352200Z","nanoTime":30983953845900,"traceId":"70aa0d96","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:43:17.939 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:43:17.939 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmeqw
2025-11-21 20:43:17.940 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3092ms)
2025-11-21 20:43:17.940 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:43:17.940 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:43:17.940 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:43:17.940 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 0.7385ms, 역직렬화: 0.0ms
2025-11-21 20:43:17.940 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:43:17.941 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:17.940336100Z","nanoTime":30983955083500,"traceId":"70aa0d96","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1237600,"duration_ms":1,"resultData":{"centerGeohashId":"wydmeqw","nineBlockGeohashes":["wydmeqw","wydmeqy","wydmeqz","wydmeqx","wydmeqr","wydmeqq","wydmeqm","wydmeqt","wydmeqv"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmeqw","hit":false,"valueSize":0,"l1CacheGetDurationNs":309200,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmeqw","cacheKey":"data:wydmeqw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":120900},{"geohashId":"wydmeqy","cacheKey":"data:wydmeqy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":82000},{"geohashId":"wydmeqz","cacheKey":"data:wydmeqz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":72200},{"geohashId":"wydmeqx","cacheKey":"data:wydmeqx:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":70200},{"geohashId":"wydmeqr","cacheKey":"data:wydmeqr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":70000},{"geohashId":"wydmeqq","cacheKey":"data:wydmeqq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":67900},{"geohashId":"wydmeqm","cacheKey":"data:wydmeqm:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":68200},{"geohashId":"wydmeqt","cacheKey":"data:wydmeqt:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":67300},{"geohashId":"wydmeqv","cacheKey":"data:wydmeqv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":68800}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":738500,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:43:17.941 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:17.941335500Z","nanoTime":30983955197700,"traceId":"70aa0d96","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:43:17.941 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:43:17.941 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:43:17.942 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 17건
2025-11-21 20:43:17.946 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:43:17.946 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 20:43:17.946 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:17.946726100Z","nanoTime":30983960759300,"traceId":"70aa0d96","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5561600,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydmeqw","wydmeqy","wydmeqz","wydmeqx","wydmeqr","wydmeqq","wydmeqm","wydmeqt","wydmeqv"],"cctvQueryResult":{"queryGeohashIds":["wydmeqw","wydmeqy","wydmeqz","wydmeqx","wydmeqr","wydmeqq","wydmeqm","wydmeqt","wydmeqv"],"totalRowsReturned":17,"rowsPerGrid":{"wydmeqm":1,"wydmeqw":1,"wydmeqx":2,"wydmeqy":2,"wydmeqz":1,"wydmeqt":4,"wydmeqv":2,"wydmeqq":3,"wydmeqr":1},"queryExecutionTimeNs":3028500,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmeqm","cacheKey":"data:wydmeqm:cctv","dataCount":1,"dataSize":146,"errorMessage":null,"success":true},{"geohashId":"wydmeqw","cacheKey":"data:wydmeqw:cctv","dataCount":1,"dataSize":146,"errorMessage":null,"success":true},{"geohashId":"wydmeqx","cacheKey":"data:wydmeqx:cctv","dataCount":2,"dataSize":289,"errorMessage":null,"success":true},{"geohashId":"wydmeqy","cacheKey":"data:wydmeqy:cctv","dataCount":2,"dataSize":282,"errorMessage":null,"success":true},{"geohashId":"wydmeqz","cacheKey":"data:wydmeqz:cctv","dataCount":1,"dataSize":145,"errorMessage":null,"success":true},{"geohashId":"wydmeqt","cacheKey":"data:wydmeqt:cctv","dataCount":4,"dataSize":566,"errorMessage":null,"success":true},{"geohashId":"wydmeqv","cacheKey":"data:wydmeqv:cctv","dataCount":2,"dataSize":290,"errorMessage":null,"success":true},{"geohashId":"wydmeqq","cacheKey":"data:wydmeqq:cctv","dataCount":3,"dataSize":427,"errorMessage":null,"success":true},{"geohashId":"wydmeqr","cacheKey":"data:wydmeqr:cctv","dataCount":1,"dataSize":144,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:43:17.946 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:17.946726100Z","nanoTime":30983960880900,"traceId":"70aa0d96","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:43:17.946 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:43:17.946 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.566140737762964, 127.0663743393518)
2025-11-21 20:43:17.946 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:43:18.040 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:43:18.040 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:43:18.041 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:43:18.041 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.566140737762964, 127.0663743393518), 반경: 500m
2025-11-21 20:43:18.127 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:43:18.127 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 133건
2025-11-21 20:43:18.128 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:43:18.128 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:43:18.128 [http-nio-8185-exec-9] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 20:43:18.128 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:43:18.128 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:43:18.128 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:43:18.128 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 20:43:18.128 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:18.128793200Z","nanoTime":30984143375300,"traceId":"70aa0d96","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":182494400,"duration_ms":182,"resultData":{"latitude":37.566140737762964,"longitude":127.0663743393518,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":182382900,"addressApiResult":{"cached":false,"cacheKey":"address:37.566140737762964:127.0663743393518","roadAddress":"주소 없음","jibunAddress":"서울 동대문구 장안동 428-10","responseSize":61,"executionTimeNs":93758600,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":37400,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.566140737762964:127.0663743393518:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":2,"CS2":15,"SC4":2,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":0,"PO3":6,"FD6":15,"PK6":15,"OL7":2,"PM9":14},"totalPlaces":133,"responseSize":15417,"executionTimeNs":88586900,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:18.128 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:18.128793200Z","nanoTime":30984143535900,"traceId":"70aa0d96","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:43:18.129 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:43:18.129 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:43:18.129 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 17개
2025-11-21 20:43:18.129 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 17개 (총 카메라 대수: 49대)
2025-11-21 20:43:18.129 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:43:18.200 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구 여의대방로 130 (거리: 1249m)
2025-11-21 20:43:18.200 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:43:18.200 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:43:18.200 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 20:43:18.200 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:43:18.200 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:18.200738900Z","nanoTime":30984215742900,"traceId":"70aa0d96","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":72207000,"duration_ms":72,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":17,"totalCctvAfterFilter":17,"totalCameraCount":49,"filterRate":1.0,"filterExecutionTimeNs":13300,"success":true},"policeQuery":{"queryDurationNs":71533200,"found":true,"nearestAddress":"서울특별시 동작구 여의대방로 130","nearestDistance":1248.5026528785527,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"AT4":2,"CS2":15,"SC4":2,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"PO3":6,"FD6":15,"PK6":15,"OL7":2,"PM9":14},"placesAfterFilter":{"AT4":2,"CS2":15,"SC4":2,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"PO3":6,"FD6":15,"PK6":15,"OL7":2,"PM9":14},"totalBeforeFilter":133,"totalAfterFilter":133,"filterRate":1.0,"filterExecutionTimeNs":202800,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:18.200 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:18.200738900Z","nanoTime":30984216018200,"traceId":"70aa0d96","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:43:18.200 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:43:18.200 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 22.67, 편의성: 33.98, 종합: 28.32
2025-11-21 20:43:18.200 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:18.200738900Z","nanoTime":30984216276700,"traceId":"70aa0d96","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":258500,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":0.0,"policeDistance":1248.5026528785527,"cctvScore":56.666666666666664,"cctvCount":17,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":22.666666666666668,"success":true},"convenienceScore":{"categoryScores":{"AT4":6.0,"CS2":3.75,"SC4":4.0,"MT1":20.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"PO3":18.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":33.98076923076923,"success":true},"overallScore":28.32371794871795,"errorMessage":null,"success":true}}
2025-11-21 20:43:18.200 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:18.200738900Z","nanoTime":30984216421200,"traceId":"70aa0d96","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:43:18.200 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:43:18.200 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구 여의대방로 130, latitude=37.568809, longitude=127.080134, geohashId=wydmez0)
2025-11-21 20:43:18.202 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 1248.5026528785527
2025-11-21 20:43:18.202 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmeqw
2025-11-21 20:43:18.202 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:43:18.202 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:18.202748100Z","nanoTime":30984218091100,"traceId":"70aa0d96","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1669900,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["카페이(가) 28m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","가장 가까운 파출소가 1km 이상 떨어져 있습니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmeqw","dataSize":18792,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":18792,"errorMessage":null,"success":true}}
2025-11-21 20:43:18.202 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:43:18.649 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:43:18.649 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56963460058338, longitude=127.0698412005692, radius=500)
2025-11-21 20:43:18.649 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:43:18.649 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56963460058338, longitude=127.0698412005692, radius=500
2025-11-21 20:43:18.649 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:18.649460Z","nanoTime":30984663392300,"traceId":"d2985379","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:43:18.649 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:43:18.649 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56963460058338, lon=127.0698412005692
2025-11-21 20:43:18.649 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:18.649460Z","nanoTime":30984663461100,"traceId":"d2985379","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:43:18.649 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:18.649460Z","nanoTime":30984663509200,"traceId":"d2985379","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":48100,"duration_ms":0,"resultData":{"latitude":37.56963460058338,"longitude":127.0698412005692,"precision":7,"centerHash":"wydmex3","adjacentHashes":["wydmex3","wydmex9","wydmexd","wydmex6","wydmex4","wydmex1","wydmex0","wydmex2","wydmex8"],"errorMessage":null,"success":true}}
2025-11-21 20:43:18.649 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmex3, wydmex9, wydmexd, wydmex6, wydmex4, wydmex1, wydmex0, wydmex2, wydmex8]
2025-11-21 20:43:18.649 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmex3
2025-11-21 20:43:18.649 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:18.649460Z","nanoTime":30984663590800,"traceId":"d2985379","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":198500,"duration_ms":0,"resultData":{"requestLatitude":37.56963460058338,"requestLongitude":127.0698412005692,"requestRadius":500,"centerGeohashId":"wydmex3","nineBlockGeohashes":["wydmex3","wydmex9","wydmexd","wydmex6","wydmex4","wydmex1","wydmex0","wydmex2","wydmex8"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:43:18.649 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:18.649460Z","nanoTime":30984663617800,"traceId":"d2985379","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:43:18.649 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:43:18.649 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmex3
2025-11-21 20:43:18.649 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3402ms)
2025-11-21 20:43:18.649 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:43:18.650 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:43:18.650 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:43:18.650 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 0.9942ms, 역직렬화: 0.0ms
2025-11-21 20:43:18.650 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:43:18.650 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:18.650907800Z","nanoTime":30984665198300,"traceId":"d2985379","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1580500,"duration_ms":1,"resultData":{"centerGeohashId":"wydmex3","nineBlockGeohashes":["wydmex3","wydmex9","wydmexd","wydmex6","wydmex4","wydmex1","wydmex0","wydmex2","wydmex8"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmex3","hit":false,"valueSize":0,"l1CacheGetDurationNs":340200,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmex3","cacheKey":"data:wydmex3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":136100},{"geohashId":"wydmex9","cacheKey":"data:wydmex9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":143500},{"geohashId":"wydmexd","cacheKey":"data:wydmexd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":87700},{"geohashId":"wydmex6","cacheKey":"data:wydmex6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":83000},{"geohashId":"wydmex4","cacheKey":"data:wydmex4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":106600},{"geohashId":"wydmex1","cacheKey":"data:wydmex1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":107100},{"geohashId":"wydmex0","cacheKey":"data:wydmex0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":88500},{"geohashId":"wydmex2","cacheKey":"data:wydmex2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":79100},{"geohashId":"wydmex8","cacheKey":"data:wydmex8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":76600}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":994200,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:43:18.650 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:18.650907800Z","nanoTime":30984665426000,"traceId":"d2985379","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:43:18.651 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:43:18.651 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:43:18.654 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 17건
2025-11-21 20:43:18.655 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:43:18.655 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 20:43:18.655 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:18.655365100Z","nanoTime":30984669692000,"traceId":"d2985379","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4266000,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmex3","wydmex9","wydmexd","wydmex6","wydmex4","wydmex1","wydmex0","wydmex2","wydmex8"],"cctvQueryResult":{"queryGeohashIds":["wydmex3","wydmex9","wydmexd","wydmex6","wydmex4","wydmex1","wydmex0","wydmex2","wydmex8"],"totalRowsReturned":17,"rowsPerGrid":{"wydmex2":1,"wydmex3":2,"wydmex4":3,"wydmexd":2,"wydmex0":2,"wydmex1":1,"wydmex6":2,"wydmex8":3,"wydmex9":1},"queryExecutionTimeNs":2744300,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmex2","cacheKey":"data:wydmex2:cctv","dataCount":1,"dataSize":139,"errorMessage":null,"success":true},{"geohashId":"wydmex3","cacheKey":"data:wydmex3:cctv","dataCount":2,"dataSize":289,"errorMessage":null,"success":true},{"geohashId":"wydmex4","cacheKey":"data:wydmex4:cctv","dataCount":3,"dataSize":425,"errorMessage":null,"success":true},{"geohashId":"wydmexd","cacheKey":"data:wydmexd:cctv","dataCount":2,"dataSize":283,"errorMessage":null,"success":true},{"geohashId":"wydmex0","cacheKey":"data:wydmex0:cctv","dataCount":2,"dataSize":289,"errorMessage":null,"success":true},{"geohashId":"wydmex1","cacheKey":"data:wydmex1:cctv","dataCount":1,"dataSize":137,"errorMessage":null,"success":true},{"geohashId":"wydmex6","cacheKey":"data:wydmex6:cctv","dataCount":2,"dataSize":284,"errorMessage":null,"success":true},{"geohashId":"wydmex8","cacheKey":"data:wydmex8:cctv","dataCount":3,"dataSize":425,"errorMessage":null,"success":true},{"geohashId":"wydmex9","cacheKey":"data:wydmex9:cctv","dataCount":1,"dataSize":145,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:43:18.655 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:18.655365100Z","nanoTime":30984669825900,"traceId":"d2985379","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:43:18.655 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:43:18.655 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56963460058338, 127.0698412005692)
2025-11-21 20:43:18.656 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:43:18.724 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:43:18.724 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:43:18.725 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:43:18.725 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56963460058338, 127.0698412005692), 반경: 500m
2025-11-21 20:43:18.807 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:43:18.808 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 130건
2025-11-21 20:43:18.808 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:43:18.808 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:43:18.808 [http-nio-8185-exec-10] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 20:43:18.808 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:43:18.808 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:43:18.809 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:43:18.809 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 20:43:18.809 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:18.809537100Z","nanoTime":30984823343300,"traceId":"d2985379","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":153517400,"duration_ms":153,"resultData":{"latitude":37.56963460058338,"longitude":127.0698412005692,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":153368600,"addressApiResult":{"cached":false,"cacheKey":"address:37.56963460058338:127.0698412005692","roadAddress":"주소 없음","jibunAddress":"서울 동대문구 장안동 469-8","responseSize":60,"executionTimeNs":69651100,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":57800,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56963460058338:127.0698412005692:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":2,"CS2":15,"SC4":2,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":0,"PO3":3,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"totalPlaces":130,"responseSize":15178,"executionTimeNs":83659700,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:18.809 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:18.809537100Z","nanoTime":30984823640900,"traceId":"d2985379","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:43:18.809 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:43:18.809 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:43:18.809 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 17개
2025-11-21 20:43:18.809 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 17개 (총 카메라 대수: 43대)
2025-11-21 20:43:18.809 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:43:18.879 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동대문구 전농로38다길 21 (거리: 892m)
2025-11-21 20:43:18.879 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:43:18.879 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:43:18.879 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 20:43:18.879 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:43:18.880 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:18.879770300Z","nanoTime":30984893949000,"traceId":"d2985379","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":70308100,"duration_ms":70,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":17,"totalCctvAfterFilter":17,"totalCameraCount":43,"filterRate":1.0,"filterExecutionTimeNs":12900,"success":true},"policeQuery":{"queryDurationNs":69751200,"found":true,"nearestAddress":"서울특별시 동대문구 전농로38다길 21","nearestDistance":891.6864282564782,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"AT4":2,"CS2":15,"SC4":2,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"PO3":3,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"placesAfterFilter":{"AT4":2,"CS2":15,"SC4":2,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"PO3":3,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"totalBeforeFilter":130,"totalAfterFilter":130,"filterRate":1.0,"filterExecutionTimeNs":179900,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:18.880 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:18.880235800Z","nanoTime":30984894143600,"traceId":"d2985379","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:43:18.880 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:43:18.880 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 22.67, 편의성: 32.52, 종합: 27.59
2025-11-21 20:43:18.880 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:18.880235800Z","nanoTime":30984894420200,"traceId":"d2985379","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":276600,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":0.0,"policeDistance":891.6864282564782,"cctvScore":56.666666666666664,"cctvCount":17,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":22.666666666666668,"success":true},"convenienceScore":{"categoryScores":{"AT4":6.0,"CS2":3.75,"SC4":4.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"PO3":9.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":32.51923076923077,"success":true},"overallScore":27.592948717948715,"errorMessage":null,"success":true}}
2025-11-21 20:43:18.880 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:18.880235800Z","nanoTime":30984894572200,"traceId":"d2985379","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:43:18.880 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:43:18.880 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동대문구 전농로38다길 21, latitude=37.576792, longitude=127.074404, geohashId=wydmg8s)
2025-11-21 20:43:18.880 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 891.6864282564782
2025-11-21 20:43:18.880 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmex3
2025-11-21 20:43:18.880 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:43:18.880 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:18.880235800Z","nanoTime":30984895819200,"traceId":"d2985379","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1247000,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 9m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmex3","dataSize":18565,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":18565,"errorMessage":null,"success":true}}
2025-11-21 20:43:18.880 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:43:19.257 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:43:19.257 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.57122306816906, longitude=127.06508840121803, radius=500)
2025-11-21 20:43:19.257 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:43:19.257 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.57122306816906, longitude=127.06508840121803, radius=500
2025-11-21 20:43:19.257 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:19.257703100Z","nanoTime":30985271728000,"traceId":"14d8cd9f","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:43:19.258 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:43:19.258 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.57122306816906, lon=127.06508840121803
2025-11-21 20:43:19.258 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:19.258019900Z","nanoTime":30985271828200,"traceId":"14d8cd9f","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:43:19.258 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:19.258019900Z","nanoTime":30985271868200,"traceId":"14d8cd9f","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":40000,"duration_ms":0,"resultData":{"latitude":37.57122306816906,"longitude":127.06508840121803,"precision":7,"centerHash":"wydmert","adjacentHashes":["wydmert","wydmerv","wydmery","wydmerw","wydmerq","wydmerm","wydmerk","wydmers","wydmeru"],"errorMessage":null,"success":true}}
2025-11-21 20:43:19.258 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmert, wydmerv, wydmery, wydmerw, wydmerq, wydmerm, wydmerk, wydmers, wydmeru]
2025-11-21 20:43:19.258 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmert
2025-11-21 20:43:19.258 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:19.258019900Z","nanoTime":30985271952500,"traceId":"14d8cd9f","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":224500,"duration_ms":0,"resultData":{"requestLatitude":37.57122306816906,"requestLongitude":127.06508840121803,"requestRadius":500,"centerGeohashId":"wydmert","nineBlockGeohashes":["wydmert","wydmerv","wydmery","wydmerw","wydmerq","wydmerm","wydmerk","wydmers","wydmeru"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:43:19.258 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:19.258019900Z","nanoTime":30985271990500,"traceId":"14d8cd9f","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:43:19.258 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:43:19.258 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmert
2025-11-21 20:43:19.258 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.343ms)
2025-11-21 20:43:19.258 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:43:19.260 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:43:19.260 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:43:19.260 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.591ms, 역직렬화: 0.0ms
2025-11-21 20:43:19.260 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:43:19.260 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:19.260022100Z","nanoTime":30985274257500,"traceId":"14d8cd9f","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2267000,"duration_ms":2,"resultData":{"centerGeohashId":"wydmert","nineBlockGeohashes":["wydmert","wydmerv","wydmery","wydmerw","wydmerq","wydmerm","wydmerk","wydmers","wydmeru"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmert","hit":false,"valueSize":0,"l1CacheGetDurationNs":343000,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmert","cacheKey":"data:wydmert:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":287900},{"geohashId":"wydmerv","cacheKey":"data:wydmerv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":185100},{"geohashId":"wydmery","cacheKey":"data:wydmery:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":164100},{"geohashId":"wydmerw","cacheKey":"data:wydmerw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":132600},{"geohashId":"wydmerq","cacheKey":"data:wydmerq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":131800},{"geohashId":"wydmerm","cacheKey":"data:wydmerm:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":143700},{"geohashId":"wydmerk","cacheKey":"data:wydmerk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":188300},{"geohashId":"wydmers","cacheKey":"data:wydmers:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":126200},{"geohashId":"wydmeru","cacheKey":"data:wydmeru:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":138000}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1591000,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:43:19.260 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:19.260022100Z","nanoTime":30985274477800,"traceId":"14d8cd9f","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:43:19.260 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:43:19.260 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:43:19.264 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 7건
2025-11-21 20:43:19.265 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:43:19.266 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 6개
2025-11-21 20:43:19.266 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:19.266209500Z","nanoTime":30985280060800,"traceId":"14d8cd9f","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5583000,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydmert","wydmerv","wydmery","wydmerw","wydmerq","wydmerm","wydmerk","wydmers","wydmeru"],"cctvQueryResult":{"queryGeohashIds":["wydmert","wydmerv","wydmery","wydmerw","wydmerq","wydmerm","wydmerk","wydmers","wydmeru"],"totalRowsReturned":7,"rowsPerGrid":{"wydmery":1,"wydmerk":1,"wydmert":1,"wydmerv":1,"wydmerw":1,"wydmerq":2},"queryExecutionTimeNs":3421200,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmery","cacheKey":"data:wydmery:cctv","dataCount":1,"dataSize":136,"errorMessage":null,"success":true},{"geohashId":"wydmerk","cacheKey":"data:wydmerk:cctv","dataCount":1,"dataSize":139,"errorMessage":null,"success":true},{"geohashId":"wydmert","cacheKey":"data:wydmert:cctv","dataCount":1,"dataSize":138,"errorMessage":null,"success":true},{"geohashId":"wydmerv","cacheKey":"data:wydmerv:cctv","dataCount":1,"dataSize":145,"errorMessage":null,"success":true},{"geohashId":"wydmerw","cacheKey":"data:wydmerw:cctv","dataCount":1,"dataSize":146,"errorMessage":null,"success":true},{"geohashId":"wydmerq","cacheKey":"data:wydmerq:cctv","dataCount":2,"dataSize":290,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:43:19.266 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:19.266209500Z","nanoTime":30985280333200,"traceId":"14d8cd9f","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:43:19.266 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:43:19.266 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.57122306816906, 127.06508840121803)
2025-11-21 20:43:19.266 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:43:19.337 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:43:19.337 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:43:19.337 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:43:19.337 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.57122306816906, 127.06508840121803), 반경: 500m
2025-11-21 20:43:19.453 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:43:19.453 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 125건
2025-11-21 20:43:19.453 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:43:19.453 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:43:19.453 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 동대문구
2025-11-21 20:43:19.455 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 동대문구
2025-11-21 20:43:19.455 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:43:19.455 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:43:19.455 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:43:19.455 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.713272637
2025-11-21 20:43:19.455 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:19.455254400Z","nanoTime":30985469464000,"traceId":"14d8cd9f","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":189130800,"duration_ms":189,"resultData":{"latitude":37.57122306816906,"longitude":127.06508840121803,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":188985600,"addressApiResult":{"cached":false,"cacheKey":"address:37.57122306816906:127.06508840121803","roadAddress":"서울특별시 동대문구 한천로 111","jibunAddress":"서울 동대문구 답십리동 753","responseSize":72,"executionTimeNs":70911000,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:동대문구","guName":"동대문구","arrestRate":0.713272637,"dataFound":true,"executionTimeNs":589100,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.57122306816906:127.06508840121803:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":1,"CS2":15,"SC4":1,"MT1":0,"BK9":11,"HP8":15,"AC5":15,"CE7":15,"SW8":0,"PO3":2,"FD6":15,"PK6":15,"OL7":4,"PM9":15},"totalPlaces":125,"responseSize":14458,"executionTimeNs":117485500,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:19.455 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:19.455254400Z","nanoTime":30985469674600,"traceId":"14d8cd9f","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:43:19.455 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:43:19.455 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:43:19.455 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 7개
2025-11-21 20:43:19.455 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 7개 (총 카메라 대수: 21대)
2025-11-21 20:43:19.455 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:43:19.539 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동대문구 전농로38다길 21 (거리: 1028m)
2025-11-21 20:43:19.539 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:43:19.539 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:43:19.539 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 20:43:19.539 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:43:19.539 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:19.539858400Z","nanoTime":30985557122000,"traceId":"14d8cd9f","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":87447400,"duration_ms":87,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":7,"totalCctvAfterFilter":7,"totalCameraCount":21,"filterRate":1.0,"filterExecutionTimeNs":8900,"success":true},"policeQuery":{"queryDurationNs":87004600,"found":true,"nearestAddress":"서울특별시 동대문구 전농로38다길 21","nearestDistance":1028.3281901015507,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"AT4":1,"CS2":15,"SC4":1,"BK9":11,"HP8":15,"AC5":15,"CE7":15,"PO3":2,"FD6":15,"PK6":15,"OL7":4,"PM9":15},"placesAfterFilter":{"CT1":1,"AT4":1,"CS2":15,"SC4":1,"BK9":11,"HP8":15,"AC5":15,"CE7":15,"PO3":2,"FD6":15,"PK6":15,"OL7":4,"PM9":15},"totalBeforeFilter":125,"totalAfterFilter":125,"filterRate":1.0,"filterExecutionTimeNs":145800,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:19.543 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:19.539858400Z","nanoTime":30985557421300,"traceId":"14d8cd9f","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:43:19.543 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:43:19.543 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 30.73, 편의성: 30.71, 종합: 30.72
2025-11-21 20:43:19.543 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:19.543674100Z","nanoTime":30985557647400,"traceId":"14d8cd9f","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":226100,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":0.0,"policeDistance":1028.3281901015507,"cctvScore":23.333333333333332,"cctvCount":7,"arrestRateScore":71.3272637,"arrestRate":0.713272637,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":30.731512443333337,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"AT4":3.0,"CS2":4.182898637211624,"SC4":2.0,"BK9":55.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"PO3":6.0,"FD6":15.0,"PK6":45.0,"OL7":20.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"동대문구","guPopulation":358603,"finalScore":30.706376818247048,"success":true},"overallScore":30.71894463079019,"errorMessage":null,"success":true}}
2025-11-21 20:43:19.543 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:19.543674100Z","nanoTime":30985557745300,"traceId":"14d8cd9f","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:43:19.543 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:43:19.543 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동대문구 전농로38다길 21, latitude=37.576792, longitude=127.074404, geohashId=wydmg8s)
2025-11-21 20:43:19.543 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 1028.3281901015507
2025-11-21 20:43:19.544 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmert
2025-11-21 20:43:19.544 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:43:19.544 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:19.544086500Z","nanoTime":30985558903500,"traceId":"14d8cd9f","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1158200,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 39m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","가장 가까운 파출소가 1km 이상 떨어져 있습니다."],"cacheWrite":{"cacheKey":"dto:wydmert","dataSize":16522,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":16522,"errorMessage":null,"success":true}}
2025-11-21 20:43:19.544 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:43:19.951 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:43:19.951 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.57514743542961, longitude=127.07192928668263, radius=500)
2025-11-21 20:43:19.951 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:43:19.951 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.57514743542961, longitude=127.07192928668263, radius=500
2025-11-21 20:43:19.951 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:19.951182900Z","nanoTime":30985965975200,"traceId":"945ceb79","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:43:19.951 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:43:19.951 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.57514743542961, lon=127.07192928668263
2025-11-21 20:43:19.951 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:19.951182900Z","nanoTime":30985966063300,"traceId":"945ceb79","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:43:19.952 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:19.952329600Z","nanoTime":30985966135400,"traceId":"945ceb79","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":72100,"duration_ms":0,"resultData":{"latitude":37.57514743542961,"longitude":127.07192928668263,"precision":7,"centerHash":"wydmg86","adjacentHashes":["wydmg86","wydmg8d","wydmg8e","wydmg87","wydmg85","wydmg84","wydmg81","wydmg83","wydmg89"],"errorMessage":null,"success":true}}
2025-11-21 20:43:19.952 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmg86, wydmg8d, wydmg8e, wydmg87, wydmg85, wydmg84, wydmg81, wydmg83, wydmg89]
2025-11-21 20:43:19.952 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmg86
2025-11-21 20:43:19.952 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:19.952329600Z","nanoTime":30985966280900,"traceId":"945ceb79","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":305700,"duration_ms":0,"resultData":{"requestLatitude":37.57514743542961,"requestLongitude":127.07192928668263,"requestRadius":500,"centerGeohashId":"wydmg86","nineBlockGeohashes":["wydmg86","wydmg8d","wydmg8e","wydmg87","wydmg85","wydmg84","wydmg81","wydmg83","wydmg89"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:43:19.952 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:19.952329600Z","nanoTime":30985966355700,"traceId":"945ceb79","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:43:19.952 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:43:19.952 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmg86
2025-11-21 20:43:19.952 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4018ms)
2025-11-21 20:43:19.952 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:43:19.953 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:43:19.953 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:43:19.953 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.11ms, 역직렬화: 0.0ms
2025-11-21 20:43:19.953 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:43:19.954 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:19.953326900Z","nanoTime":30985968120500,"traceId":"945ceb79","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1764800,"duration_ms":1,"resultData":{"centerGeohashId":"wydmg86","nineBlockGeohashes":["wydmg86","wydmg8d","wydmg8e","wydmg87","wydmg85","wydmg84","wydmg81","wydmg83","wydmg89"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmg86","hit":false,"valueSize":0,"l1CacheGetDurationNs":401800,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmg86","cacheKey":"data:wydmg86:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":200800},{"geohashId":"wydmg8d","cacheKey":"data:wydmg8d:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":133800},{"geohashId":"wydmg8e","cacheKey":"data:wydmg8e:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":102400},{"geohashId":"wydmg87","cacheKey":"data:wydmg87:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":119900},{"geohashId":"wydmg85","cacheKey":"data:wydmg85:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":104300},{"geohashId":"wydmg84","cacheKey":"data:wydmg84:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":84100},{"geohashId":"wydmg81","cacheKey":"data:wydmg81:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":91900},{"geohashId":"wydmg83","cacheKey":"data:wydmg83:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":101400},{"geohashId":"wydmg89","cacheKey":"data:wydmg89:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":95900}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1110000,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:43:19.954 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:19.954399200Z","nanoTime":30985968288800,"traceId":"945ceb79","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:43:19.954 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:43:19.954 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:43:19.956 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 15건
2025-11-21 20:43:19.958 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:43:19.958 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 20:43:19.958 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:19.958404600Z","nanoTime":30985972465300,"traceId":"945ceb79","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4176500,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmg86","wydmg8d","wydmg8e","wydmg87","wydmg85","wydmg84","wydmg81","wydmg83","wydmg89"],"cctvQueryResult":{"queryGeohashIds":["wydmg86","wydmg8d","wydmg8e","wydmg87","wydmg85","wydmg84","wydmg81","wydmg83","wydmg89"],"totalRowsReturned":15,"rowsPerGrid":{"wydmg81":1,"wydmg83":3,"wydmg89":2,"wydmg84":2,"wydmg8d":4,"wydmg85":1,"wydmg8e":1,"wydmg86":1},"queryExecutionTimeNs":2520400,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmg81","cacheKey":"data:wydmg81:cctv","dataCount":1,"dataSize":144,"errorMessage":null,"success":true},{"geohashId":"wydmg83","cacheKey":"data:wydmg83:cctv","dataCount":3,"dataSize":435,"errorMessage":null,"success":true},{"geohashId":"wydmg89","cacheKey":"data:wydmg89:cctv","dataCount":2,"dataSize":290,"errorMessage":null,"success":true},{"geohashId":"wydmg84","cacheKey":"data:wydmg84:cctv","dataCount":2,"dataSize":290,"errorMessage":null,"success":true},{"geohashId":"wydmg8d","cacheKey":"data:wydmg8d:cctv","dataCount":4,"dataSize":569,"errorMessage":null,"success":true},{"geohashId":"wydmg85","cacheKey":"data:wydmg85:cctv","dataCount":1,"dataSize":145,"errorMessage":null,"success":true},{"geohashId":"wydmg8e","cacheKey":"data:wydmg8e:cctv","dataCount":1,"dataSize":139,"errorMessage":null,"success":true},{"geohashId":"wydmg86","cacheKey":"data:wydmg86:cctv","dataCount":1,"dataSize":143,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:43:19.958 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:19.958404600Z","nanoTime":30985972588800,"traceId":"945ceb79","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:43:19.958 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:43:19.958 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.57514743542961, 127.07192928668263)
2025-11-21 20:43:19.958 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:43:20.023 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:43:20.023 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:43:20.023 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:43:20.023 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.57514743542961, 127.07192928668263), 반경: 500m
2025-11-21 20:43:20.100 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:43:20.100 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 131건
2025-11-21 20:43:20.102 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:43:20.102 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:43:20.102 [http-nio-8185-exec-3] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 20:43:20.102 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:43:20.102 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:43:20.102 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:43:20.102 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 20:43:20.102 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:20.102801600Z","nanoTime":30986117001400,"traceId":"945ceb79","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":144412600,"duration_ms":144,"resultData":{"latitude":37.57514743542961,"longitude":127.07192928668263,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":144287800,"addressApiResult":{"cached":false,"cacheKey":"address:37.57514743542961:127.07192928668263","roadAddress":"주소 없음","jibunAddress":"서울 동대문구 장안동 469-4","responseSize":60,"executionTimeNs":66694800,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":42900,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.57514743542961:127.07192928668263:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":3,"CS2":15,"SC4":3,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":0,"PO3":2,"FD6":15,"PK6":14,"OL7":2,"PM9":15},"totalPlaces":131,"responseSize":15324,"executionTimeNs":77550100,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:20.102 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:20.102801600Z","nanoTime":30986117187600,"traceId":"945ceb79","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:43:20.102 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:43:20.102 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:43:20.102 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 15개
2025-11-21 20:43:20.102 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 15개 (총 카메라 대수: 38대)
2025-11-21 20:43:20.102 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:43:20.187 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동대문구 전농로38다길 21 (거리: 285m)
2025-11-21 20:43:20.187 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:43:20.187 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:43:20.187 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 20:43:20.187 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:43:20.187 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:20.187839700Z","nanoTime":30986202636000,"traceId":"945ceb79","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":85448400,"duration_ms":85,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":15,"totalCctvAfterFilter":15,"totalCameraCount":38,"filterRate":1.0,"filterExecutionTimeNs":12600,"success":true},"policeQuery":{"queryDurationNs":84883200,"found":true,"nearestAddress":"서울특별시 동대문구 전농로38다길 21","nearestDistance":284.6107924475064,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"AT4":3,"CS2":15,"SC4":3,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"PO3":2,"FD6":15,"PK6":14,"OL7":2,"PM9":15},"placesAfterFilter":{"AT4":3,"CS2":15,"SC4":3,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"PO3":2,"FD6":15,"PK6":14,"OL7":2,"PM9":15},"totalBeforeFilter":131,"totalAfterFilter":131,"filterRate":1.0,"filterExecutionTimeNs":182900,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:20.187 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:20.187839700Z","nanoTime":30986202843700,"traceId":"945ceb79","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:43:20.187 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:43:20.187 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 39.33, 편의성: 33.21, 종합: 36.27
2025-11-21 20:43:20.187 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:20.187839700Z","nanoTime":30986203067100,"traceId":"945ceb79","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":223400,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":64.4236509440617,"policeDistance":284.6107924475064,"cctvScore":50.0,"cctvCount":15,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":39.32709528321851,"success":true},"convenienceScore":{"categoryScores":{"AT4":9.0,"CS2":3.75,"SC4":6.0,"MT1":20.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"PO3":6.0,"FD6":15.0,"PK6":42.0,"OL7":10.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":33.21153846153846,"success":true},"overallScore":36.26931687237848,"errorMessage":null,"success":true}}
2025-11-21 20:43:20.187 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:20.187839700Z","nanoTime":30986203183700,"traceId":"945ceb79","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:43:20.187 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:43:20.187 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동대문구 전농로38다길 21, latitude=37.576792, longitude=127.074404, geohashId=wydmg8s)
2025-11-21 20:43:20.187 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 284.6107924475064
2025-11-21 20:43:20.189 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmg86
2025-11-21 20:43:20.189 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:43:20.189 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:20.189847100Z","nanoTime":30986204770000,"traceId":"945ceb79","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1586300,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["카페이(가) 21m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmg86","dataSize":18631,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":18631,"errorMessage":null,"success":true}}
2025-11-21 20:43:20.189 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:43:20.561 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:43:20.561 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.57326747170595, longitude=127.08102878215679, radius=500)
2025-11-21 20:43:20.561 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:43:20.561 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.57326747170595, longitude=127.08102878215679, radius=500
2025-11-21 20:43:20.561 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:20.561744100Z","nanoTime":30986575732000,"traceId":"e89cf9f0","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:43:20.561 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:43:20.561 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.57326747170595, lon=127.08102878215679
2025-11-21 20:43:20.561 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:20.561744100Z","nanoTime":30986575847000,"traceId":"e89cf9f0","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:43:20.561 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:20.561744100Z","nanoTime":30986575900400,"traceId":"e89cf9f0","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":53400,"duration_ms":0,"resultData":{"latitude":37.57326747170595,"longitude":127.08102878215679,"precision":7,"centerHash":"wydmgb1","adjacentHashes":["wydmgb1","wydmgb3","wydmgb6","wydmgb4","wydmezf","wydmezc","wydmezb","wydmgb0","wydmgb2"],"errorMessage":null,"success":true}}
2025-11-21 20:43:20.561 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmgb1, wydmgb3, wydmgb6, wydmgb4, wydmezf, wydmezc, wydmezb, wydmgb0, wydmgb2]
2025-11-21 20:43:20.561 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmgb1
2025-11-21 20:43:20.561 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:20.561744100Z","nanoTime":30986576013400,"traceId":"e89cf9f0","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":281400,"duration_ms":0,"resultData":{"requestLatitude":37.57326747170595,"requestLongitude":127.08102878215679,"requestRadius":500,"centerGeohashId":"wydmgb1","nineBlockGeohashes":["wydmgb1","wydmgb3","wydmgb6","wydmgb4","wydmezf","wydmezc","wydmezb","wydmgb0","wydmgb2"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:43:20.561 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:20.561744100Z","nanoTime":30986576064800,"traceId":"e89cf9f0","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:43:20.561 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:43:20.561 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmgb1
2025-11-21 20:43:20.562 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4565ms)
2025-11-21 20:43:20.562 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:43:20.563 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:43:20.563 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:43:20.563 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.0286ms, 역직렬화: 0.0ms
2025-11-21 20:43:20.563 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:43:20.563 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:20.563741700Z","nanoTime":30986577907300,"traceId":"e89cf9f0","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1842500,"duration_ms":1,"resultData":{"centerGeohashId":"wydmgb1","nineBlockGeohashes":["wydmgb1","wydmgb3","wydmgb6","wydmgb4","wydmezf","wydmezc","wydmezb","wydmgb0","wydmgb2"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmgb1","hit":false,"valueSize":0,"l1CacheGetDurationNs":456500,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmgb1","cacheKey":"data:wydmgb1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":190700},{"geohashId":"wydmgb3","cacheKey":"data:wydmgb3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":93100},{"geohashId":"wydmgb6","cacheKey":"data:wydmgb6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":107200},{"geohashId":"wydmgb4","cacheKey":"data:wydmgb4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":137300},{"geohashId":"wydmezf","cacheKey":"data:wydmezf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":90800},{"geohashId":"wydmezc","cacheKey":"data:wydmezc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":83200},{"geohashId":"wydmezb","cacheKey":"data:wydmezb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":87600},{"geohashId":"wydmgb0","cacheKey":"data:wydmgb0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":89600},{"geohashId":"wydmgb2","cacheKey":"data:wydmgb2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":81900}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1028600,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:43:20.563 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:20.563741700Z","nanoTime":30986578032700,"traceId":"e89cf9f0","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:43:20.563 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:43:20.563 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:43:20.565 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 12건
2025-11-21 20:43:20.567 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:43:20.567 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 6개
2025-11-21 20:43:20.567 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:20.567243100Z","nanoTime":30986581587900,"traceId":"e89cf9f0","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":3555200,"duration_ms":3,"resultData":{"inputCctvMissGrids":["wydmgb1","wydmgb3","wydmgb6","wydmgb4","wydmezf","wydmezc","wydmezb","wydmgb0","wydmgb2"],"cctvQueryResult":{"queryGeohashIds":["wydmgb1","wydmgb3","wydmgb6","wydmgb4","wydmezf","wydmezc","wydmezb","wydmgb0","wydmgb2"],"totalRowsReturned":12,"rowsPerGrid":{"wydmezf":1,"wydmgb6":2,"wydmezc":5,"wydmgb3":1,"wydmgb4":1,"wydmgb1":2},"queryExecutionTimeNs":2297500,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmezf","cacheKey":"data:wydmezf:cctv","dataCount":1,"dataSize":133,"errorMessage":null,"success":true},{"geohashId":"wydmgb6","cacheKey":"data:wydmgb6:cctv","dataCount":2,"dataSize":262,"errorMessage":null,"success":true},{"geohashId":"wydmezc","cacheKey":"data:wydmezc:cctv","dataCount":5,"dataSize":657,"errorMessage":null,"success":true},{"geohashId":"wydmgb3","cacheKey":"data:wydmgb3:cctv","dataCount":1,"dataSize":133,"errorMessage":null,"success":true},{"geohashId":"wydmgb4","cacheKey":"data:wydmgb4:cctv","dataCount":1,"dataSize":133,"errorMessage":null,"success":true},{"geohashId":"wydmgb1","cacheKey":"data:wydmgb1:cctv","dataCount":2,"dataSize":264,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:43:20.567 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:20.567243100Z","nanoTime":30986581717000,"traceId":"e89cf9f0","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:43:20.567 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:43:20.567 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.57326747170595, 127.08102878215679)
2025-11-21 20:43:20.567 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:43:20.680 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:43:20.680 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:43:20.680 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:43:20.680 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.57326747170595, 127.08102878215679), 반경: 500m
2025-11-21 20:43:20.803 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:43:20.803 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 98건
2025-11-21 20:43:20.803 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:43:20.803 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:43:20.803 [http-nio-8185-exec-2] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 20:43:20.803 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:43:20.803 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:43:20.803 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:43:20.803 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 20:43:20.803 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:20.803577Z","nanoTime":30986819321400,"traceId":"e89cf9f0","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":237604400,"duration_ms":237,"resultData":{"latitude":37.57326747170595,"longitude":127.08102878215679,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":237469100,"addressApiResult":{"cached":false,"cacheKey":"address:37.57326747170595:127.08102878215679","roadAddress":"주소 없음","jibunAddress":"서울 중랑구 면목동 698-1","responseSize":59,"executionTimeNs":112976200,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":58700,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.57326747170595:127.08102878215679:500","categoryCount":15,"placesByCategory":{"CT1":2,"AT4":3,"CS2":15,"SC4":2,"MT1":0,"BK9":10,"HP8":5,"AC5":15,"CE7":15,"SW8":0,"PO3":4,"FD6":15,"PK6":7,"OL7":1,"PM9":4},"totalPlaces":98,"responseSize":11361,"executionTimeNs":124434200,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:20.803 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:20.803577Z","nanoTime":30986819545200,"traceId":"e89cf9f0","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:43:20.803 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:43:20.803 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:43:20.803 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 12개
2025-11-21 20:43:20.803 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 12개 (총 카메라 대수: 45대)
2025-11-21 20:43:20.803 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:43:20.891 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구 여의대방로 130 (거리: 502m)
2025-11-21 20:43:20.891 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:43:20.891 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:43:20.891 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 20:43:20.891 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:43:20.891 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:20.891600200Z","nanoTime":30986905977300,"traceId":"e89cf9f0","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":86432100,"duration_ms":86,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":12,"totalCctvAfterFilter":12,"totalCameraCount":45,"filterRate":1.0,"filterExecutionTimeNs":11800,"success":true},"policeQuery":{"queryDurationNs":85877600,"found":true,"nearestAddress":"서울특별시 동작구 여의대방로 130","nearestDistance":501.9923030077165,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":2,"AT4":3,"CS2":15,"SC4":2,"BK9":10,"HP8":5,"AC5":15,"CE7":15,"PO3":4,"FD6":15,"PK6":7,"OL7":1,"PM9":4},"placesAfterFilter":{"CT1":2,"AT4":3,"CS2":15,"SC4":2,"BK9":10,"HP8":5,"AC5":15,"CE7":15,"PO3":3,"FD6":15,"PK6":7,"OL7":1,"PM9":4},"totalBeforeFilter":98,"totalAfterFilter":97,"filterRate":0.9897959183673469,"filterExecutionTimeNs":169600,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:20.891 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:20.891600200Z","nanoTime":30986906214700,"traceId":"e89cf9f0","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:43:20.891 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:43:20.892 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 27.18, 편의성: 23.21, 종합: 25.19
2025-11-21 20:43:20.892 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:20.892598800Z","nanoTime":30986906488900,"traceId":"e89cf9f0","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":274200,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":37.25096212403544,"policeDistance":501.9923030077165,"cctvScore":40.0,"cctvCount":12,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":27.17528863721063,"success":true},"convenienceScore":{"categoryScores":{"CT1":8.0,"AT4":9.0,"CS2":3.75,"SC4":4.0,"BK9":50.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"PO3":9.0,"FD6":15.0,"PK6":21.0,"OL7":5.0,"PM9":32.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":23.21153846153846,"success":true},"overallScore":25.193413549374547,"errorMessage":null,"success":true}}
2025-11-21 20:43:20.892 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:20.892598800Z","nanoTime":30986906651800,"traceId":"e89cf9f0","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:43:20.892 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:43:20.892 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구 여의대방로 130, latitude=37.568809, longitude=127.080134, geohashId=wydmez0)
2025-11-21 20:43:20.892 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 501.9923030077165
2025-11-21 20:43:20.893 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmgb1
2025-11-21 20:43:20.893 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:43:20.894 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:20.893600200Z","nanoTime":30986908270500,"traceId":"e89cf9f0","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1618700,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["카페이(가) 46m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmgb1","dataSize":13861,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":13861,"errorMessage":null,"success":true}}
2025-11-21 20:43:20.894 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:43:21.572 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:43:21.572 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56849168640587, longitude=127.08177068261841, radius=500)
2025-11-21 20:43:21.572 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:43:21.572 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56849168640587, longitude=127.08177068261841, radius=500
2025-11-21 20:43:21.572 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:21.572787Z","nanoTime":30987587205100,"traceId":"0b8dbf7b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:43:21.572 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:43:21.572 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56849168640587, lon=127.08177068261841
2025-11-21 20:43:21.572 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:21.572787Z","nanoTime":30987587303800,"traceId":"0b8dbf7b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:43:21.572 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:21.572787Z","nanoTime":30987587367200,"traceId":"0b8dbf7b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":63400,"duration_ms":0,"resultData":{"latitude":37.56849168640587,"longitude":127.08177068261841,"precision":7,"centerHash":"wydmez4","adjacentHashes":["wydmez4","wydmez6","wydmez7","wydmez5","wydmeyg","wydmeyf","wydmeyc","wydmez1","wydmez3"],"errorMessage":null,"success":true}}
2025-11-21 20:43:21.572 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmez4, wydmez6, wydmez7, wydmez5, wydmeyg, wydmeyf, wydmeyc, wydmez1, wydmez3]
2025-11-21 20:43:21.572 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmez4
2025-11-21 20:43:21.573 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:21.572787Z","nanoTime":30987587534600,"traceId":"0b8dbf7b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":329500,"duration_ms":0,"resultData":{"requestLatitude":37.56849168640587,"requestLongitude":127.08177068261841,"requestRadius":500,"centerGeohashId":"wydmez4","nineBlockGeohashes":["wydmez4","wydmez6","wydmez7","wydmez5","wydmeyg","wydmeyf","wydmeyc","wydmez1","wydmez3"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:43:21.573 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:21.573786700Z","nanoTime":30987587652700,"traceId":"0b8dbf7b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:43:21.573 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:43:21.573 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmez4
2025-11-21 20:43:21.573 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.443ms)
2025-11-21 20:43:21.573 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:43:21.574 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:43:21.574 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:43:21.574 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.0576ms, 역직렬화: 0.0ms
2025-11-21 20:43:21.574 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:43:21.574 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:21.574944Z","nanoTime":30987589431600,"traceId":"0b8dbf7b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1778900,"duration_ms":1,"resultData":{"centerGeohashId":"wydmez4","nineBlockGeohashes":["wydmez4","wydmez6","wydmez7","wydmez5","wydmeyg","wydmeyf","wydmeyc","wydmez1","wydmez3"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmez4","hit":false,"valueSize":0,"l1CacheGetDurationNs":443000,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmez4","cacheKey":"data:wydmez4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":234200},{"geohashId":"wydmez6","cacheKey":"data:wydmez6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":120300},{"geohashId":"wydmez7","cacheKey":"data:wydmez7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":84200},{"geohashId":"wydmez5","cacheKey":"data:wydmez5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":84100},{"geohashId":"wydmeyg","cacheKey":"data:wydmeyg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":92900},{"geohashId":"wydmeyf","cacheKey":"data:wydmeyf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":97100},{"geohashId":"wydmeyc","cacheKey":"data:wydmeyc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":79200},{"geohashId":"wydmez1","cacheKey":"data:wydmez1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":77300},{"geohashId":"wydmez3","cacheKey":"data:wydmez3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":127100}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1057600,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:43:21.574 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:21.574944Z","nanoTime":30987589629500,"traceId":"0b8dbf7b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:43:21.574 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:43:21.575 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:43:21.579 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 31건
2025-11-21 20:43:21.582 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:43:21.582 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 20:43:21.582 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:21.582800300Z","nanoTime":30987597205000,"traceId":"0b8dbf7b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":7575500,"duration_ms":7,"resultData":{"inputCctvMissGrids":["wydmez4","wydmez6","wydmez7","wydmez5","wydmeyg","wydmeyf","wydmeyc","wydmez1","wydmez3"],"cctvQueryResult":{"queryGeohashIds":["wydmez4","wydmez6","wydmez7","wydmez5","wydmeyg","wydmeyf","wydmeyc","wydmez1","wydmez3"],"totalRowsReturned":31,"rowsPerGrid":{"wydmeyc":3,"wydmez4":2,"wydmez5":4,"wydmez6":2,"wydmeyf":3,"wydmez7":4,"wydmez1":3,"wydmez3":6,"wydmeyg":4},"queryExecutionTimeNs":4905100,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmeyc","cacheKey":"data:wydmeyc:cctv","dataCount":3,"dataSize":301,"errorMessage":null,"success":true},{"geohashId":"wydmez4","cacheKey":"data:wydmez4:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydmez5","cacheKey":"data:wydmez5:cctv","dataCount":4,"dataSize":401,"errorMessage":null,"success":true},{"geohashId":"wydmez6","cacheKey":"data:wydmez6:cctv","dataCount":2,"dataSize":199,"errorMessage":null,"success":true},{"geohashId":"wydmeyf","cacheKey":"data:wydmeyf:cctv","dataCount":3,"dataSize":301,"errorMessage":null,"success":true},{"geohashId":"wydmez7","cacheKey":"data:wydmez7:cctv","dataCount":4,"dataSize":401,"errorMessage":null,"success":true},{"geohashId":"wydmez1","cacheKey":"data:wydmez1:cctv","dataCount":3,"dataSize":300,"errorMessage":null,"success":true},{"geohashId":"wydmez3","cacheKey":"data:wydmez3:cctv","dataCount":6,"dataSize":599,"errorMessage":null,"success":true},{"geohashId":"wydmeyg","cacheKey":"data:wydmeyg:cctv","dataCount":4,"dataSize":399,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:43:21.582 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:21.582800300Z","nanoTime":30987597340600,"traceId":"0b8dbf7b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:43:21.582 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:43:21.582 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56849168640587, 127.08177068261841)
2025-11-21 20:43:21.583 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:43:21.637 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:43:21.637 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:43:21.639 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:43:21.639 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56849168640587, 127.08177068261841), 반경: 500m
2025-11-21 20:43:21.728 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:43:21.728 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 122건
2025-11-21 20:43:21.728 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:43:21.728 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:43:21.728 [http-nio-8185-exec-5] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 20:43:21.728 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:43:21.728 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:43:21.728 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:43:21.728 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 20:43:21.728 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:21.728943700Z","nanoTime":30987746410200,"traceId":"0b8dbf7b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":149069600,"duration_ms":149,"resultData":{"latitude":37.56849168640587,"longitude":127.08177068261841,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":148946500,"addressApiResult":{"cached":false,"cacheKey":"address:37.56849168640587:127.08177068261841","roadAddress":"주소 없음","jibunAddress":"서울 광진구 중곡동 687-13","responseSize":60,"executionTimeNs":55617300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":44800,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56849168640587:127.08177068261841:500","categoryCount":15,"placesByCategory":{"CT1":2,"AT4":1,"CS2":15,"SC4":2,"MT1":0,"BK9":11,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":10,"OL7":3,"PM9":14},"totalPlaces":122,"responseSize":14029,"executionTimeNs":93284400,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:21.732 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:21.732865Z","nanoTime":30987746646200,"traceId":"0b8dbf7b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:43:21.732 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:43:21.732 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:43:21.732 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 31개
2025-11-21 20:43:21.732 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 31개 (총 카메라 대수: 31대)
2025-11-21 20:43:21.732 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:43:21.808 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구 여의대방로 130 (거리: 149m)
2025-11-21 20:43:21.808 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:43:21.809 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:43:21.809 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 20:43:21.809 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:43:21.809 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:21.809327500Z","nanoTime":30987823447000,"traceId":"0b8dbf7b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":76800800,"duration_ms":76,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":31,"totalCctvAfterFilter":31,"totalCameraCount":31,"filterRate":1.0,"filterExecutionTimeNs":38900,"success":true},"policeQuery":{"queryDurationNs":75944500,"found":true,"nearestAddress":"서울특별시 동작구 여의대방로 130","nearestDistance":148.50268202143417,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":2,"AT4":1,"CS2":15,"SC4":2,"BK9":11,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":10,"OL7":3,"PM9":14},"placesAfterFilter":{"CT1":2,"AT4":1,"CS2":15,"SC4":2,"BK9":11,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":10,"OL7":3,"PM9":14},"totalBeforeFilter":122,"totalAfterFilter":122,"filterRate":1.0,"filterExecutionTimeNs":244600,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:21.809 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:21.809820800Z","nanoTime":30987823687600,"traceId":"0b8dbf7b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:43:21.809 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:43:21.809 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 64.43, 편의성: 34.84, 종합: 49.64
2025-11-21 20:43:21.809 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:21.809820800Z","nanoTime":30987823945200,"traceId":"0b8dbf7b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":257600,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":81.43716474732074,"policeDistance":148.50268202143417,"cctvScore":100.0,"cctvCount":31,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":64.43114942419622,"success":true},"convenienceScore":{"categoryScores":{"CT1":8.0,"AT4":3.0,"CS2":3.75,"SC4":4.0,"BK9":55.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":30.0,"OL7":15.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":34.839285714285715,"success":true},"overallScore":49.635217569240965,"errorMessage":null,"success":true}}
2025-11-21 20:43:21.809 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:21.809820800Z","nanoTime":30987824090000,"traceId":"0b8dbf7b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:43:21.809 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:43:21.809 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구 여의대방로 130, latitude=37.568809, longitude=127.080134, geohashId=wydmez0)
2025-11-21 20:43:21.809 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 148.50268202143417
2025-11-21 20:43:21.809 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmez4
2025-11-21 20:43:21.809 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:43:21.809 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:21.809820800Z","nanoTime":30987825206700,"traceId":"0b8dbf7b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1116700,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 49m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmez4","dataSize":16985,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":16985,"errorMessage":null,"success":true}}
2025-11-21 20:43:21.809 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:43:22.298 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:43:22.299 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56379112436773, longitude=127.07787194788777, radius=500)
2025-11-21 20:43:22.299 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:43:22.299 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56379112436773, longitude=127.07787194788777, radius=500
2025-11-21 20:43:22.299 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:22.299611600Z","nanoTime":30988313475500,"traceId":"e1001be2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:43:22.299 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:43:22.299 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56379112436773, lon=127.07787194788777
2025-11-21 20:43:22.299 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:22.299611600Z","nanoTime":30988313580800,"traceId":"e1001be2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:43:22.299 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:22.299611600Z","nanoTime":30988313616100,"traceId":"e1001be2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":35300,"duration_ms":0,"resultData":{"latitude":37.56379112436773,"longitude":127.07787194788777,"precision":7,"centerHash":"wydmewr","adjacentHashes":["wydmewr","wydmewx","wydmey8","wydmey2","wydmey0","wydmewp","wydmewn","wydmewq","wydmeww"],"errorMessage":null,"success":true}}
2025-11-21 20:43:22.299 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmewr, wydmewx, wydmey8, wydmey2, wydmey0, wydmewp, wydmewn, wydmewq, wydmeww]
2025-11-21 20:43:22.299 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmewr
2025-11-21 20:43:22.299 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:22.299611600Z","nanoTime":30988313729200,"traceId":"e1001be2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":253700,"duration_ms":0,"resultData":{"requestLatitude":37.56379112436773,"requestLongitude":127.07787194788777,"requestRadius":500,"centerGeohashId":"wydmewr","nineBlockGeohashes":["wydmewr","wydmewx","wydmey8","wydmey2","wydmey0","wydmewp","wydmewn","wydmewq","wydmeww"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:43:22.299 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:22.299611600Z","nanoTime":30988313774500,"traceId":"e1001be2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:43:22.299 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:43:22.299 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmewr
2025-11-21 20:43:22.299 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3025ms)
2025-11-21 20:43:22.299 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:43:22.300 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:43:22.300 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:43:22.300 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 0.9173ms, 역직렬화: 0.0ms
2025-11-21 20:43:22.300 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:43:22.301 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:22.300611400Z","nanoTime":30988315247000,"traceId":"e1001be2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1472500,"duration_ms":1,"resultData":{"centerGeohashId":"wydmewr","nineBlockGeohashes":["wydmewr","wydmewx","wydmey8","wydmey2","wydmey0","wydmewp","wydmewn","wydmewq","wydmeww"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmewr","hit":false,"valueSize":0,"l1CacheGetDurationNs":302500,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmewr","cacheKey":"data:wydmewr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":114300},{"geohashId":"wydmewx","cacheKey":"data:wydmewx:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":93700},{"geohashId":"wydmey8","cacheKey":"data:wydmey8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":77900},{"geohashId":"wydmey2","cacheKey":"data:wydmey2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":71100},{"geohashId":"wydmey0","cacheKey":"data:wydmey0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":71000},{"geohashId":"wydmewp","cacheKey":"data:wydmewp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":69100},{"geohashId":"wydmewn","cacheKey":"data:wydmewn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":133300},{"geohashId":"wydmewq","cacheKey":"data:wydmewq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":135400},{"geohashId":"wydmeww","cacheKey":"data:wydmeww:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":79300}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":917300,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:43:22.301 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:22.301614500Z","nanoTime":30988315431400,"traceId":"e1001be2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:43:22.301 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:43:22.301 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:43:22.304 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 18건
2025-11-21 20:43:22.305 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:43:22.305 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 7개
2025-11-21 20:43:22.305 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:22.305729600Z","nanoTime":30988320055500,"traceId":"e1001be2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4624100,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmewr","wydmewx","wydmey8","wydmey2","wydmey0","wydmewp","wydmewn","wydmewq","wydmeww"],"cctvQueryResult":{"queryGeohashIds":["wydmewr","wydmewx","wydmey8","wydmey2","wydmey0","wydmewp","wydmewn","wydmewq","wydmeww"],"totalRowsReturned":18,"rowsPerGrid":{"wydmewq":1,"wydmewr":5,"wydmewn":2,"wydmewp":1,"wydmey2":3,"wydmey8":4,"wydmewx":2},"queryExecutionTimeNs":3171600,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmewq","cacheKey":"data:wydmewq:cctv","dataCount":1,"dataSize":100,"errorMessage":null,"success":true},{"geohashId":"wydmewr","cacheKey":"data:wydmewr:cctv","dataCount":5,"dataSize":497,"errorMessage":null,"success":true},{"geohashId":"wydmewn","cacheKey":"data:wydmewn:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydmewp","cacheKey":"data:wydmewp:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmey2","cacheKey":"data:wydmey2:cctv","dataCount":3,"dataSize":301,"errorMessage":null,"success":true},{"geohashId":"wydmey8","cacheKey":"data:wydmey8:cctv","dataCount":4,"dataSize":400,"errorMessage":null,"success":true},{"geohashId":"wydmewx","cacheKey":"data:wydmewx:cctv","dataCount":2,"dataSize":200,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:43:22.305 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:22.305729600Z","nanoTime":30988320191000,"traceId":"e1001be2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:43:22.305 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:43:22.305 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56379112436773, 127.07787194788777)
2025-11-21 20:43:22.305 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:43:22.410 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:43:22.410 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:43:22.412 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:43:22.412 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56379112436773, 127.07787194788777), 반경: 500m
2025-11-21 20:43:22.509 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:43:22.509 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 109건
2025-11-21 20:43:22.509 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:43:22.509 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:43:22.509 [http-nio-8185-exec-4] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 20:43:22.509 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:43:22.509 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:43:22.509 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:43:22.509 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 20:43:22.509 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:22.509677100Z","nanoTime":30988525632400,"traceId":"e1001be2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":205441400,"duration_ms":205,"resultData":{"latitude":37.56379112436773,"longitude":127.07787194788777,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":205331400,"addressApiResult":{"cached":false,"cacheKey":"address:37.56379112436773:127.07787194788777","roadAddress":"주소 없음","jibunAddress":"서울 광진구 중곡동 280-2","responseSize":59,"executionTimeNs":105610600,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":28400,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56379112436773:127.07787194788777:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":0,"CS2":13,"SC4":2,"MT1":1,"BK9":8,"HP8":15,"AC5":15,"CE7":15,"SW8":0,"PO3":2,"FD6":15,"PK6":6,"OL7":4,"PM9":12},"totalPlaces":109,"responseSize":12502,"executionTimeNs":99692400,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:22.509 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:22.509677100Z","nanoTime":30988525810900,"traceId":"e1001be2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:43:22.509 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:43:22.509 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:43:22.509 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 18개
2025-11-21 20:43:22.512 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 18개 (총 카메라 대수: 18대)
2025-11-21 20:43:22.512 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:43:22.592 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구 노량진로 248 (거리: 433m)
2025-11-21 20:43:22.592 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:43:22.592 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:43:22.592 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 20:43:22.592 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:43:22.592 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:22.592892900Z","nanoTime":30988607034900,"traceId":"e1001be2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":81224000,"duration_ms":81,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":18,"totalCctvAfterFilter":18,"totalCameraCount":18,"filterRate":1.0,"filterExecutionTimeNs":7900,"success":true},"policeQuery":{"queryDurationNs":80848400,"found":true,"nearestAddress":"서울특별시 동작구 노량진로 248","nearestDistance":433.47680202675787,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"CS2":13,"SC4":2,"MT1":1,"BK9":8,"HP8":15,"AC5":15,"CE7":15,"PO3":2,"FD6":15,"PK6":6,"OL7":4,"PM9":12},"placesAfterFilter":{"CT1":1,"CS2":13,"SC4":2,"MT1":1,"BK9":8,"HP8":15,"AC5":15,"CE7":15,"PO3":2,"FD6":15,"PK6":6,"OL7":4,"PM9":12},"totalBeforeFilter":109,"totalAfterFilter":109,"filterRate":1.0,"filterExecutionTimeNs":79700,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:22.592 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:22.592892900Z","nanoTime":30988607245300,"traceId":"e1001be2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:43:22.592 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:43:22.592 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 37.74, 편의성: 27.79, 종합: 32.77
2025-11-21 20:43:22.592 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:22.592892900Z","nanoTime":30988607460300,"traceId":"e1001be2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":215000,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":45.81539974665527,"policeDistance":433.47680202675787,"cctvScore":60.0,"cctvCount":18,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":37.74461992399658,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"CS2":3.25,"SC4":4.0,"MT1":10.0,"BK9":40.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"PO3":6.0,"FD6":15.0,"PK6":18.0,"OL7":20.0,"PM9":96.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":27.78846153846154,"success":true},"overallScore":32.76654073122906,"errorMessage":null,"success":true}}
2025-11-21 20:43:22.592 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:22.592892900Z","nanoTime":30988607576700,"traceId":"e1001be2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:43:22.592 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:43:22.592 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구 노량진로 248, latitude=37.563716, longitude=127.082789, geohashId=wydmey6)
2025-11-21 20:43:22.593 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 433.47680202675787
2025-11-21 20:43:22.594 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmewr
2025-11-21 20:43:22.594 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:43:22.594 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:22.594431600Z","nanoTime":30988608861000,"traceId":"e1001be2","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1284300,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["음식점이(가) 61m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmewr","dataSize":14739,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":14739,"errorMessage":null,"success":true}}
2025-11-21 20:43:22.594 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:43:22.931 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:43:22.931 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56263567055476, longitude=127.08110781344173, radius=500)
2025-11-21 20:43:22.931 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:43:22.931 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56263567055476, longitude=127.08110781344173, radius=500
2025-11-21 20:43:22.931 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:22.931858700Z","nanoTime":30988946491600,"traceId":"9b431d74","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:43:22.931 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:43:22.931 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56263567055476, lon=127.08110781344173
2025-11-21 20:43:22.931 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:22.931858700Z","nanoTime":30988946563600,"traceId":"9b431d74","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:43:22.932 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:22.932822300Z","nanoTime":30988946621200,"traceId":"9b431d74","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":57600,"duration_ms":0,"resultData":{"latitude":37.56263567055476,"longitude":127.08110781344173,"precision":7,"centerHash":"wydmey1","adjacentHashes":["wydmey1","wydmey3","wydmey6","wydmey4","wydmevf","wydmevc","wydmevb","wydmey0","wydmey2"],"errorMessage":null,"success":true}}
2025-11-21 20:43:22.932 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmey1, wydmey3, wydmey6, wydmey4, wydmevf, wydmevc, wydmevb, wydmey0, wydmey2]
2025-11-21 20:43:22.932 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmey1
2025-11-21 20:43:22.932 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:22.932822300Z","nanoTime":30988946756400,"traceId":"9b431d74","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":264800,"duration_ms":0,"resultData":{"requestLatitude":37.56263567055476,"requestLongitude":127.08110781344173,"requestRadius":500,"centerGeohashId":"wydmey1","nineBlockGeohashes":["wydmey1","wydmey3","wydmey6","wydmey4","wydmevf","wydmevc","wydmevb","wydmey0","wydmey2"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:43:22.932 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:22.932822300Z","nanoTime":30988946856900,"traceId":"9b431d74","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:43:22.932 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:43:22.932 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmey1
2025-11-21 20:43:22.932 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4972ms)
2025-11-21 20:43:22.932 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:43:22.934 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:43:22.934 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 1개, 미스: 8개
2025-11-21 20:43:22.934 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.3524ms, 역직렬화: 0.0539ms
2025-11-21 20:43:22.934 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:43:22.934 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:22.934936700Z","nanoTime":30988948996500,"traceId":"9b431d74","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2139600,"duration_ms":2,"resultData":{"centerGeohashId":"wydmey1","nineBlockGeohashes":["wydmey1","wydmey3","wydmey6","wydmey4","wydmevf","wydmevc","wydmevb","wydmey0","wydmey2"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmey1","hit":false,"valueSize":0,"l1CacheGetDurationNs":497200,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmey1","cacheKey":"data:wydmey1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":176600},{"geohashId":"wydmey3","cacheKey":"data:wydmey3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":173700},{"geohashId":"wydmey6","cacheKey":"data:wydmey6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":93700},{"geohashId":"wydmey4","cacheKey":"data:wydmey4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":82500},{"geohashId":"wydmevf","cacheKey":"data:wydmevf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":80300},{"geohashId":"wydmevc","cacheKey":"data:wydmevc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":96700},{"geohashId":"wydmevb","cacheKey":"data:wydmevb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":105300},{"geohashId":"wydmey0","cacheKey":"data:wydmey0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":134700},{"geohashId":"wydmey2","cacheKey":"data:wydmey2:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":301,"l2CacheGetDurationNs":273800}],"l2TotalHits":1,"l2TotalMisses":8,"l2CacheTotalDurationNs":1352400,"l2JsonDeserializeTotalDurationNs":53900,"errorMessage":null,"success":true}}
2025-11-21 20:43:22.934 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:22.934936700Z","nanoTime":30988949167200,"traceId":"9b431d74","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:43:22.934 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:43:22.934 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 8개
2025-11-21 20:43:22.937 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 18건
2025-11-21 20:43:22.938 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:43:22.938 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 20:43:22.938 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:22.938599200Z","nanoTime":30988952902800,"traceId":"9b431d74","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":3735600,"duration_ms":3,"resultData":{"inputCctvMissGrids":["wydmey1","wydmey3","wydmey6","wydmey4","wydmevf","wydmevc","wydmevb","wydmey0"],"cctvQueryResult":{"queryGeohashIds":["wydmey1","wydmey3","wydmey6","wydmey4","wydmevf","wydmevc","wydmevb","wydmey0"],"totalRowsReturned":18,"rowsPerGrid":{"wydmey3":2,"wydmey4":2,"wydmevb":5,"wydmevc":1,"wydmey6":3,"wydmey1":4,"wydmevf":1},"queryExecutionTimeNs":2398500,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmey3","cacheKey":"data:wydmey3:cctv","dataCount":2,"dataSize":200,"errorMessage":null,"success":true},{"geohashId":"wydmey4","cacheKey":"data:wydmey4:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydmevb","cacheKey":"data:wydmevb:cctv","dataCount":5,"dataSize":500,"errorMessage":null,"success":true},{"geohashId":"wydmevc","cacheKey":"data:wydmevc:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmey6","cacheKey":"data:wydmey6:cctv","dataCount":3,"dataSize":300,"errorMessage":null,"success":true},{"geohashId":"wydmey1","cacheKey":"data:wydmey1:cctv","dataCount":4,"dataSize":401,"errorMessage":null,"success":true},{"geohashId":"wydmevf","cacheKey":"data:wydmevf:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:43:22.938 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:22.938599200Z","nanoTime":30988953014200,"traceId":"9b431d74","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:43:22.938 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:43:22.938 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56263567055476, 127.08110781344173)
2025-11-21 20:43:22.938 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:43:23.014 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:43:23.014 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:43:23.014 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:43:23.014 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56263567055476, 127.08110781344173), 반경: 500m
2025-11-21 20:43:23.100 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:43:23.100 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 126건
2025-11-21 20:43:23.102 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:43:23.102 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:43:23.102 [http-nio-8185-exec-6] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 20:43:23.102 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:43:23.102 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:43:23.102 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:43:23.102 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 20:43:23.102 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:23.102561600Z","nanoTime":30989117224900,"traceId":"9b431d74","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":164210700,"duration_ms":164,"resultData":{"latitude":37.56263567055476,"longitude":127.08110781344173,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":164061100,"addressApiResult":{"cached":false,"cacheKey":"address:37.56263567055476:127.08110781344173","roadAddress":"주소 없음","jibunAddress":"서울 광진구 중곡동 277-6","responseSize":59,"executionTimeNs":75964200,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":36900,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56263567055476:127.08110781344173:500","categoryCount":15,"placesByCategory":{"CT1":4,"AT4":1,"CS2":15,"SC4":2,"MT1":1,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":4,"FD6":15,"PK6":9,"OL7":2,"PM9":13},"totalPlaces":126,"responseSize":14527,"executionTimeNs":88060000,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:23.102 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:23.102561600Z","nanoTime":30989117476400,"traceId":"9b431d74","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:43:23.102 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:43:23.102 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:43:23.102 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 21개
2025-11-21 20:43:23.102 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 21개 (총 카메라 대수: 21대)
2025-11-21 20:43:23.102 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:43:23.176 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구 노량진로 248 (거리: 191m)
2025-11-21 20:43:23.176 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:43:23.176 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:43:23.176 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 20:43:23.176 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:43:23.176 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:23.176546Z","nanoTime":30989191797100,"traceId":"9b431d74","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":74320700,"duration_ms":74,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":21,"totalCctvAfterFilter":21,"totalCameraCount":21,"filterRate":1.0,"filterExecutionTimeNs":10200,"success":true},"policeQuery":{"queryDurationNs":73906200,"found":true,"nearestAddress":"서울특별시 동작구 노량진로 248","nearestDistance":190.75865568099908,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":4,"AT4":1,"CS2":15,"SC4":2,"MT1":1,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":4,"FD6":15,"PK6":9,"OL7":2,"PM9":13},"placesAfterFilter":{"CT1":4,"AT4":1,"CS2":15,"SC4":2,"MT1":1,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":4,"FD6":15,"PK6":9,"OL7":2,"PM9":13},"totalBeforeFilter":126,"totalAfterFilter":126,"filterRate":1.0,"filterExecutionTimeNs":78600,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:23.178 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:23.178291300Z","nanoTime":30989192101600,"traceId":"9b431d74","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:43:23.178 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:43:23.178 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 50.85, 편의성: 34.38, 종합: 42.61
2025-11-21 20:43:23.178 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:23.178291300Z","nanoTime":30989192397200,"traceId":"9b431d74","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":295600,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":76.15516803987512,"policeDistance":190.75865568099908,"cctvScore":70.0,"cctvCount":21,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":50.84655041196254,"success":true},"convenienceScore":{"categoryScores":{"CT1":16.0,"AT4":3.0,"CS2":3.75,"SC4":4.0,"MT1":10.0,"BK9":70.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":12.0,"FD6":15.0,"PK6":27.0,"OL7":10.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":34.38333333333333,"success":true},"overallScore":42.61494187264793,"errorMessage":null,"success":true}}
2025-11-21 20:43:23.178 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:23.178291300Z","nanoTime":30989192547400,"traceId":"9b431d74","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:43:23.178 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:43:23.178 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구 노량진로 248, latitude=37.563716, longitude=127.082789, geohashId=wydmey6)
2025-11-21 20:43:23.178 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 190.75865568099908
2025-11-21 20:43:23.178 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmey1
2025-11-21 20:43:23.178 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:43:23.180 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:23.178291300Z","nanoTime":30989193995500,"traceId":"9b431d74","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1448100,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 11m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmey1","dataSize":17016,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17016,"errorMessage":null,"success":true}}
2025-11-21 20:43:23.180 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:43:23.497 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:43:23.497 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56034814274709, longitude=127.07963398402815, radius=500)
2025-11-21 20:43:23.497 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:43:23.497 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56034814274709, longitude=127.07963398402815, radius=500
2025-11-21 20:43:23.497 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:23.497005200Z","nanoTime":30989511673600,"traceId":"950fbaed","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:43:23.497 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:43:23.497 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56034814274709, lon=127.07963398402815
2025-11-21 20:43:23.498 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:23.497005200Z","nanoTime":30989511770100,"traceId":"950fbaed","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:43:23.498 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:23.498019900Z","nanoTime":30989511880700,"traceId":"950fbaed","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":110600,"duration_ms":0,"resultData":{"latitude":37.56034814274709,"longitude":127.07963398402815,"precision":7,"centerHash":"wydmev8","adjacentHashes":["wydmev8","wydmevb","wydmevc","wydmev9","wydmev3","wydmev2","wydmetr","wydmetx","wydmetz"],"errorMessage":null,"success":true}}
2025-11-21 20:43:23.498 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmev8, wydmevb, wydmevc, wydmev9, wydmev3, wydmev2, wydmetr, wydmetx, wydmetz]
2025-11-21 20:43:23.498 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmev8
2025-11-21 20:43:23.498 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:23.498019900Z","nanoTime":30989512026600,"traceId":"950fbaed","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":353000,"duration_ms":0,"resultData":{"requestLatitude":37.56034814274709,"requestLongitude":127.07963398402815,"requestRadius":500,"centerGeohashId":"wydmev8","nineBlockGeohashes":["wydmev8","wydmevb","wydmevc","wydmev9","wydmev3","wydmev2","wydmetr","wydmetx","wydmetz"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:43:23.498 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:23.498019900Z","nanoTime":30989512200000,"traceId":"950fbaed","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:43:23.498 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:43:23.498 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmev8
2025-11-21 20:43:23.498 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3781ms)
2025-11-21 20:43:23.498 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:43:23.500 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:43:23.500 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 2개, 미스: 7개
2025-11-21 20:43:23.500 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.8823ms, 역직렬화: 0.0822ms
2025-11-21 20:43:23.500 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:43:23.501 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:23.500016500Z","nanoTime":30989514727900,"traceId":"950fbaed","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2527900,"duration_ms":2,"resultData":{"centerGeohashId":"wydmev8","nineBlockGeohashes":["wydmev8","wydmevb","wydmevc","wydmev9","wydmev3","wydmev2","wydmetr","wydmetx","wydmetz"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmev8","hit":false,"valueSize":0,"l1CacheGetDurationNs":378100,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmev8","cacheKey":"data:wydmev8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":188100},{"geohashId":"wydmevb","cacheKey":"data:wydmevb:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":500,"l2CacheGetDurationNs":383300},{"geohashId":"wydmevc","cacheKey":"data:wydmevc:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":101,"l2CacheGetDurationNs":441100},{"geohashId":"wydmev9","cacheKey":"data:wydmev9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":197900},{"geohashId":"wydmev3","cacheKey":"data:wydmev3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":109300},{"geohashId":"wydmev2","cacheKey":"data:wydmev2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":116000},{"geohashId":"wydmetr","cacheKey":"data:wydmetr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":105600},{"geohashId":"wydmetx","cacheKey":"data:wydmetx:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":91500},{"geohashId":"wydmetz","cacheKey":"data:wydmetz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":84900}],"l2TotalHits":2,"l2TotalMisses":7,"l2CacheTotalDurationNs":1882300,"l2JsonDeserializeTotalDurationNs":82200,"errorMessage":null,"success":true}}
2025-11-21 20:43:23.501 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:23.501055100Z","nanoTime":30989514857800,"traceId":"950fbaed","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:43:23.501 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:43:23.501 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 7개
2025-11-21 20:43:23.502 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 7건
2025-11-21 20:43:23.504 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:43:23.504 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 20:43:23.504 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:23.504578900Z","nanoTime":30989518997000,"traceId":"950fbaed","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4139200,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmev8","wydmev9","wydmev3","wydmev2","wydmetr","wydmetx","wydmetz"],"cctvQueryResult":{"queryGeohashIds":["wydmev8","wydmev9","wydmev3","wydmev2","wydmetr","wydmetx","wydmetz"],"totalRowsReturned":7,"rowsPerGrid":{"wydmev2":1,"wydmev3":1,"wydmetz":1,"wydmev8":1,"wydmev9":1,"wydmetx":1,"wydmetr":1},"queryExecutionTimeNs":2540800,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmev2","cacheKey":"data:wydmev2:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmev3","cacheKey":"data:wydmev3:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmetz","cacheKey":"data:wydmetz:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmev8","cacheKey":"data:wydmev8:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmev9","cacheKey":"data:wydmev9:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmetx","cacheKey":"data:wydmetx:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmetr","cacheKey":"data:wydmetr:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:43:23.504 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:23.504578900Z","nanoTime":30989519135400,"traceId":"950fbaed","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:43:23.504 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:43:23.504 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56034814274709, 127.07963398402815)
2025-11-21 20:43:23.504 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:43:23.592 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:43:23.592 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:43:23.592 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:43:23.593 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56034814274709, 127.07963398402815), 반경: 500m
2025-11-21 20:43:23.681 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:43:23.682 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 136건
2025-11-21 20:43:23.682 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:43:23.682 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:43:23.683 [http-nio-8185-exec-7] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 20:43:23.683 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:43:23.683 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:43:23.683 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:43:23.683 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 20:43:23.683 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:23.683551500Z","nanoTime":30989697423500,"traceId":"950fbaed","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":178288100,"duration_ms":178,"resultData":{"latitude":37.56034814274709,"longitude":127.07963398402815,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":178152200,"addressApiResult":{"cached":false,"cacheKey":"address:37.56034814274709:127.07963398402815","roadAddress":"주소 없음","jibunAddress":"서울 광진구 중곡동 258-3","responseSize":59,"executionTimeNs":87504500,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":58100,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56034814274709:127.07963398402815:500","categoryCount":15,"placesByCategory":{"CT1":3,"AT4":2,"CS2":15,"SC4":1,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":4,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalPlaces":136,"responseSize":15722,"executionTimeNs":90589600,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:23.683 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:23.683551500Z","nanoTime":30989697586100,"traceId":"950fbaed","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:43:23.683 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:43:23.683 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:43:23.683 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 13개
2025-11-21 20:43:23.683 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 13개 (총 카메라 대수: 13대)
2025-11-21 20:43:23.683 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:43:23.784 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구 신대방1다길 24 (거리: 164m)
2025-11-21 20:43:23.784 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:43:23.784 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:43:23.784 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 20:43:23.784 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:43:23.784 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:23.784979600Z","nanoTime":30989800268700,"traceId":"950fbaed","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":102682600,"duration_ms":102,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":13,"totalCctvAfterFilter":13,"totalCameraCount":13,"filterRate":1.0,"filterExecutionTimeNs":6600,"success":true},"policeQuery":{"queryDurationNs":102175000,"found":true,"nearestAddress":"서울특별시 동작구 신대방1다길 24","nearestDistance":163.5767473582032,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":3,"AT4":2,"CS2":15,"SC4":1,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":4,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"placesAfterFilter":{"CT1":3,"AT4":2,"CS2":15,"SC4":1,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":4,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalBeforeFilter":136,"totalAfterFilter":136,"filterRate":1.0,"filterExecutionTimeNs":97300,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:23.784 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:23.784979600Z","nanoTime":30989800490300,"traceId":"950fbaed","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:43:23.784 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:43:23.784 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 41.20, 편의성: 36.72, 종합: 38.96
2025-11-21 20:43:23.784 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:23.784979600Z","nanoTime":30989800718700,"traceId":"950fbaed","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":228400,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":79.5529065802246,"policeDistance":163.5767473582032,"cctvScore":43.333333333333336,"cctvCount":13,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":41.19920530740072,"success":true},"convenienceScore":{"categoryScores":{"CT1":12.0,"AT4":6.0,"CS2":3.75,"SC4":2.0,"MT1":30.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":12.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":36.71666666666667,"success":true},"overallScore":38.95793598703369,"errorMessage":null,"success":true}}
2025-11-21 20:43:23.784 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:23.784979600Z","nanoTime":30989800844600,"traceId":"950fbaed","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:43:23.784 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:43:23.784 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구 신대방1다길 24, latitude=37.560151, longitude=127.081473, geohashId=wydmev9)
2025-11-21 20:43:23.784 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 163.5767473582032
2025-11-21 20:43:23.787 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmev8
2025-11-21 20:43:23.787 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:43:23.787 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:23.787904Z","nanoTime":30989802802700,"traceId":"950fbaed","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1958100,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["카페이(가) 18m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmev8","dataSize":17693,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17693,"errorMessage":null,"success":true}}
2025-11-21 20:43:23.787 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:43:24.006 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:43:24.006 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55802101050936, longitude=127.0833437202505, radius=500)
2025-11-21 20:43:24.006 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:43:24.006 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55802101050936, longitude=127.0833437202505, radius=500
2025-11-21 20:43:24.006 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.006872200Z","nanoTime":30990020914500,"traceId":"2fbec19d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:43:24.006 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:43:24.006 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55802101050936, lon=127.0833437202505
2025-11-21 20:43:24.006 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.006872200Z","nanoTime":30990021000300,"traceId":"2fbec19d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:43:24.006 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.006872200Z","nanoTime":30990021048700,"traceId":"2fbec19d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":48400,"duration_ms":0,"resultData":{"latitude":37.55802101050936,"longitude":127.0833437202505,"precision":7,"centerHash":"wydmev5","adjacentHashes":["wydmev5","wydmev7","wydmevk","wydmevh","wydmeuu","wydmeug","wydmeuf","wydmev4","wydmev6"],"errorMessage":null,"success":true}}
2025-11-21 20:43:24.006 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmev5, wydmev7, wydmevk, wydmevh, wydmeuu, wydmeug, wydmeuf, wydmev4, wydmev6]
2025-11-21 20:43:24.006 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmev5
2025-11-21 20:43:24.006 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.006872200Z","nanoTime":30990021278100,"traceId":"2fbec19d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":363600,"duration_ms":0,"resultData":{"requestLatitude":37.55802101050936,"requestLongitude":127.0833437202505,"requestRadius":500,"centerGeohashId":"wydmev5","nineBlockGeohashes":["wydmev5","wydmev7","wydmevk","wydmevh","wydmeuu","wydmeug","wydmeuf","wydmev4","wydmev6"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:43:24.006 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.006872200Z","nanoTime":30990021350900,"traceId":"2fbec19d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:43:24.006 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:43:24.006 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmev5
2025-11-21 20:43:24.007 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4095ms)
2025-11-21 20:43:24.007 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:43:24.009 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:43:24.009 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:43:24.009 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.3278ms, 역직렬화: 0.0ms
2025-11-21 20:43:24.009 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:43:24.009 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.009539600Z","nanoTime":30990023882200,"traceId":"2fbec19d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2531300,"duration_ms":2,"resultData":{"centerGeohashId":"wydmev5","nineBlockGeohashes":["wydmev5","wydmev7","wydmevk","wydmevh","wydmeuu","wydmeug","wydmeuf","wydmev4","wydmev6"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmev5","hit":false,"valueSize":0,"l1CacheGetDurationNs":409500,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmev5","cacheKey":"data:wydmev5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":222400},{"geohashId":"wydmev7","cacheKey":"data:wydmev7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":142800},{"geohashId":"wydmevk","cacheKey":"data:wydmevk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":120500},{"geohashId":"wydmevh","cacheKey":"data:wydmevh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":150700},{"geohashId":"wydmeuu","cacheKey":"data:wydmeuu:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":146200},{"geohashId":"wydmeug","cacheKey":"data:wydmeug:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":106700},{"geohashId":"wydmeuf","cacheKey":"data:wydmeuf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":118700},{"geohashId":"wydmev4","cacheKey":"data:wydmev4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":117900},{"geohashId":"wydmev6","cacheKey":"data:wydmev6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":121400}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1327800,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:43:24.009 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.009539600Z","nanoTime":30990024236500,"traceId":"2fbec19d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:43:24.009 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:43:24.009 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:43:24.013 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 18건
2025-11-21 20:43:24.016 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:43:24.016 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 20:43:24.016 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.016213100Z","nanoTime":30990030114300,"traceId":"2fbec19d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5877800,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydmev5","wydmev7","wydmevk","wydmevh","wydmeuu","wydmeug","wydmeuf","wydmev4","wydmev6"],"cctvQueryResult":{"queryGeohashIds":["wydmev5","wydmev7","wydmevk","wydmevh","wydmeuu","wydmeug","wydmeuf","wydmev4","wydmev6"],"totalRowsReturned":18,"rowsPerGrid":{"wydmeug":2,"wydmevh":1,"wydmevk":4,"wydmev4":1,"wydmev5":2,"wydmeuu":3,"wydmev6":3,"wydmev7":2},"queryExecutionTimeNs":3654200,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmeug","cacheKey":"data:wydmeug:cctv","dataCount":2,"dataSize":199,"errorMessage":null,"success":true},{"geohashId":"wydmevh","cacheKey":"data:wydmevh:cctv","dataCount":1,"dataSize":100,"errorMessage":null,"success":true},{"geohashId":"wydmevk","cacheKey":"data:wydmevk:cctv","dataCount":4,"dataSize":401,"errorMessage":null,"success":true},{"geohashId":"wydmev4","cacheKey":"data:wydmev4:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmev5","cacheKey":"data:wydmev5:cctv","dataCount":2,"dataSize":233,"errorMessage":null,"success":true},{"geohashId":"wydmeuu","cacheKey":"data:wydmeuu:cctv","dataCount":3,"dataSize":301,"errorMessage":null,"success":true},{"geohashId":"wydmev6","cacheKey":"data:wydmev6:cctv","dataCount":3,"dataSize":300,"errorMessage":null,"success":true},{"geohashId":"wydmev7","cacheKey":"data:wydmev7:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:43:24.016 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.016213100Z","nanoTime":30990030320900,"traceId":"2fbec19d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:43:24.016 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:43:24.016 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.55802101050936, 127.0833437202505)
2025-11-21 20:43:24.016 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:43:24.084 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:43:24.084 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:43:24.084 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:43:24.084 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.55802101050936, 127.0833437202505), 반경: 500m
2025-11-21 20:43:24.254 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:43:24.254 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 136건
2025-11-21 20:43:24.256 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:43:24.257 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:43:24.257 [http-nio-8185-exec-8] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 20:43:24.257 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:43:24.257 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:43:24.257 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:43:24.257 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 20:43:24.257 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.257358400Z","nanoTime":30990271369100,"traceId":"2fbec19d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":241048200,"duration_ms":241,"resultData":{"latitude":37.55802101050936,"longitude":127.0833437202505,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":240911200,"addressApiResult":{"cached":false,"cacheKey":"address:37.55802101050936:127.0833437202505","roadAddress":"주소 없음","jibunAddress":"서울 광진구 중곡동 138-3","responseSize":59,"executionTimeNs":69088100,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":73100,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.55802101050936:127.0833437202505:500","categoryCount":15,"placesByCategory":{"CT1":3,"AT4":2,"CS2":15,"SC4":1,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":3,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"totalPlaces":136,"responseSize":15718,"executionTimeNs":171750000,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:24.257 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.257358400Z","nanoTime":30990271604700,"traceId":"2fbec19d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:43:24.257 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:43:24.257 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:43:24.257 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 18개
2025-11-21 20:43:24.257 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 18개 (총 카메라 대수: 18대)
2025-11-21 20:43:24.257 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:43:24.344 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구 신대방1다길 24 (거리: 289m)
2025-11-21 20:43:24.344 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:43:24.344 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:43:24.344 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 20:43:24.344 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:43:24.345 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.344297400Z","nanoTime":30990358897400,"traceId":"2fbec19d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":87292700,"duration_ms":87,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":18,"totalCctvAfterFilter":18,"totalCameraCount":18,"filterRate":1.0,"filterExecutionTimeNs":7800,"success":true},"policeQuery":{"queryDurationNs":86896100,"found":true,"nearestAddress":"서울특별시 동작구 신대방1다길 24","nearestDistance":288.59413634657625,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":3,"AT4":2,"CS2":15,"SC4":1,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":3,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"placesAfterFilter":{"CT1":3,"AT4":2,"CS2":15,"SC4":1,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":3,"FD6":15,"PK6":15,"OL7":2,"PM9":15},"totalBeforeFilter":136,"totalAfterFilter":136,"filterRate":1.0,"filterExecutionTimeNs":82900,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:24.345 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.345294Z","nanoTime":30990359107700,"traceId":"2fbec19d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:43:24.345 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:43:24.345 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 43.18, 편의성: 36.85, 종합: 40.01
2025-11-21 20:43:24.345 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.345294Z","nanoTime":30990359291200,"traceId":"2fbec19d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":183500,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":63.92573295667797,"policeDistance":288.59413634657625,"cctvScore":60.0,"cctvCount":18,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":43.17771988700339,"success":true},"convenienceScore":{"categoryScores":{"CT1":12.0,"AT4":6.0,"CS2":3.75,"SC4":2.0,"MT1":30.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":36.85,"success":true},"overallScore":40.0138599435017,"errorMessage":null,"success":true}}
2025-11-21 20:43:24.345 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.345294Z","nanoTime":30990359399300,"traceId":"2fbec19d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:43:24.345 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:43:24.345 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구 신대방1다길 24, latitude=37.560151, longitude=127.081473, geohashId=wydmev9)
2025-11-21 20:43:24.345 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 288.59413634657625
2025-11-21 20:43:24.346 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmev5
2025-11-21 20:43:24.346 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:43:24.346 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.346302900Z","nanoTime":30990360492900,"traceId":"2fbec19d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1093600,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["음식점이(가) 38m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmev5","dataSize":18048,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":18048,"errorMessage":null,"success":true}}
2025-11-21 20:43:24.346 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:43:24.437 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:43:24.437 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.555657754581595, longitude=127.08700791430562, radius=500)
2025-11-21 20:43:24.437 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:43:24.437 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.555657754581595, longitude=127.08700791430562, radius=500
2025-11-21 20:43:24.437 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.437752500Z","nanoTime":30990452138300,"traceId":"bd709eb0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:43:24.437 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:43:24.437 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.555657754581595, lon=127.08700791430562
2025-11-21 20:43:24.437 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.437752500Z","nanoTime":30990452223600,"traceId":"bd709eb0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:43:24.437 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.437752500Z","nanoTime":30990452281100,"traceId":"bd709eb0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":57500,"duration_ms":0,"resultData":{"latitude":37.555657754581595,"longitude":127.08700791430562,"precision":7,"centerHash":"wydmeuv","adjacentHashes":["wydmeuv","wydmevj","wydmevn","wydmeuy","wydmeuw","wydmeut","wydmeus","wydmeuu","wydmevh"],"errorMessage":null,"success":true}}
2025-11-21 20:43:24.437 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmeuv, wydmevj, wydmevn, wydmeuy, wydmeuw, wydmeut, wydmeus, wydmeuu, wydmevh]
2025-11-21 20:43:24.437 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmeuv
2025-11-21 20:43:24.437 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.437752500Z","nanoTime":30990452399100,"traceId":"bd709eb0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":260800,"duration_ms":0,"resultData":{"requestLatitude":37.555657754581595,"requestLongitude":127.08700791430562,"requestRadius":500,"centerGeohashId":"wydmeuv","nineBlockGeohashes":["wydmeuv","wydmevj","wydmevn","wydmeuy","wydmeuw","wydmeut","wydmeus","wydmeuu","wydmevh"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:43:24.437 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.437752500Z","nanoTime":30990452444600,"traceId":"bd709eb0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:43:24.437 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:43:24.437 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmeuv
2025-11-21 20:43:24.438 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3606ms)
2025-11-21 20:43:24.438 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:43:24.440 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:43:24.440 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 2개, 미스: 7개
2025-11-21 20:43:24.440 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.6903ms, 역직렬화: 0.0969ms
2025-11-21 20:43:24.440 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:43:24.440 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.440754Z","nanoTime":30990454782900,"traceId":"bd709eb0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2338300,"duration_ms":2,"resultData":{"centerGeohashId":"wydmeuv","nineBlockGeohashes":["wydmeuv","wydmevj","wydmevn","wydmeuy","wydmeuw","wydmeut","wydmeus","wydmeuu","wydmevh"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmeuv","hit":false,"valueSize":0,"l1CacheGetDurationNs":360600,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmeuv","cacheKey":"data:wydmeuv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":163500},{"geohashId":"wydmevj","cacheKey":"data:wydmevj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":117100},{"geohashId":"wydmevn","cacheKey":"data:wydmevn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":106500},{"geohashId":"wydmeuy","cacheKey":"data:wydmeuy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":105300},{"geohashId":"wydmeuw","cacheKey":"data:wydmeuw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":174600},{"geohashId":"wydmeut","cacheKey":"data:wydmeut:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":192300},{"geohashId":"wydmeus","cacheKey":"data:wydmeus:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":128300},{"geohashId":"wydmeuu","cacheKey":"data:wydmeuu:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":301,"l2CacheGetDurationNs":274900},{"geohashId":"wydmevh","cacheKey":"data:wydmevh:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":100,"l2CacheGetDurationNs":246900}],"l2TotalHits":2,"l2TotalMisses":7,"l2CacheTotalDurationNs":1690300,"l2JsonDeserializeTotalDurationNs":96900,"errorMessage":null,"success":true}}
2025-11-21 20:43:24.440 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.440754Z","nanoTime":30990454980300,"traceId":"bd709eb0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:43:24.440 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:43:24.440 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 7개
2025-11-21 20:43:24.444 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 14건
2025-11-21 20:43:24.445 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:43:24.445 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 20:43:24.445 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.445895400Z","nanoTime":30990460463800,"traceId":"bd709eb0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5483500,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydmeuv","wydmevj","wydmevn","wydmeuy","wydmeuw","wydmeut","wydmeus"],"cctvQueryResult":{"queryGeohashIds":["wydmeuv","wydmevj","wydmevn","wydmeuy","wydmeuw","wydmeut","wydmeus"],"totalRowsReturned":14,"rowsPerGrid":{"wydmevn":4,"wydmeuw":1,"wydmeuy":2,"wydmevj":2,"wydmeus":2,"wydmeuv":3},"queryExecutionTimeNs":3508500,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmevn","cacheKey":"data:wydmevn:cctv","dataCount":4,"dataSize":401,"errorMessage":null,"success":true},{"geohashId":"wydmeuw","cacheKey":"data:wydmeuw:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmeuy","cacheKey":"data:wydmeuy:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydmevj","cacheKey":"data:wydmevj:cctv","dataCount":2,"dataSize":200,"errorMessage":null,"success":true},{"geohashId":"wydmeus","cacheKey":"data:wydmeus:cctv","dataCount":2,"dataSize":200,"errorMessage":null,"success":true},{"geohashId":"wydmeuv","cacheKey":"data:wydmeuv:cctv","dataCount":3,"dataSize":301,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:43:24.446 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.446844Z","nanoTime":30990460631700,"traceId":"bd709eb0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:43:24.446 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:43:24.446 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.555657754581595, 127.08700791430562)
2025-11-21 20:43:24.446 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:43:24.505 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:43:24.505 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:43:24.505 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:43:24.505 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.555657754581595, 127.08700791430562), 반경: 500m
2025-11-21 20:43:24.593 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:43:24.593 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 129건
2025-11-21 20:43:24.597 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:43:24.597 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:43:24.597 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 광진구
2025-11-21 20:43:24.597 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 광진구
2025-11-21 20:43:24.597 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:43:24.597 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:43:24.597 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:43:24.597 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.672940923
2025-11-21 20:43:24.597 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.597557800Z","nanoTime":30990612898100,"traceId":"bd709eb0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":152266400,"duration_ms":152,"resultData":{"latitude":37.555657754581595,"longitude":127.08700791430562,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":152090000,"addressApiResult":{"cached":false,"cacheKey":"address:37.555657754581595:127.08700791430562","roadAddress":"서울특별시 광진구 천호대로123길 12","jibunAddress":"서울 광진구 중곡동 118-28","responseSize":76,"executionTimeNs":59405700,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:광진구","guName":"광진구","arrestRate":0.672940923,"dataFound":true,"executionTimeNs":576900,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.555657754581595:127.08700791430562:500","categoryCount":15,"placesByCategory":{"CT1":2,"AT4":1,"CS2":15,"SC4":1,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":2,"PM9":13},"totalPlaces":129,"responseSize":14895,"executionTimeNs":92107400,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:24.597 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.597557800Z","nanoTime":30990613185000,"traceId":"bd709eb0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:43:24.597 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:43:24.597 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:43:24.597 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 18개
2025-11-21 20:43:24.597 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 18개 (총 카메라 대수: 18대)
2025-11-21 20:43:24.597 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:43:24.679 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구 신대방1다길 24 (거리: 698m)
2025-11-21 20:43:24.679 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:43:24.679 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:43:24.679 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 20:43:24.679 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:43:24.679 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.679668900Z","nanoTime":30990694981700,"traceId":"bd709eb0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":81796700,"duration_ms":81,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":18,"totalCctvAfterFilter":18,"totalCameraCount":18,"filterRate":1.0,"filterExecutionTimeNs":7500,"success":true},"policeQuery":{"queryDurationNs":81378500,"found":true,"nearestAddress":"서울특별시 동작구 신대방1다길 24","nearestDistance":698.3313640877625,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":2,"AT4":1,"CS2":15,"SC4":1,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":2,"PM9":13},"placesAfterFilter":{"CT1":2,"AT4":1,"CS2":15,"SC4":1,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":2,"PM9":13},"totalBeforeFilter":129,"totalAfterFilter":129,"filterRate":1.0,"filterExecutionTimeNs":83600,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:24.679 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.679668900Z","nanoTime":30990695151600,"traceId":"bd709eb0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:43:24.679 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:43:24.679 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 48.00, 편의성: 35.56, 종합: 41.78
2025-11-21 20:43:24.679 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.679668900Z","nanoTime":30990695344700,"traceId":"bd709eb0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":193100,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":12.70857948902969,"policeDistance":698.3313640877625,"cctvScore":60.0,"cctvCount":18,"arrestRateScore":67.2940923,"arrestRate":0.672940923,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":48.000801536708906,"success":true},"convenienceScore":{"categoryScores":{"CT1":8.0,"AT4":3.0,"CS2":4.339624824968466,"SC4":2.0,"MT1":20.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":6.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"광진구","guPopulation":345652,"finalScore":35.555974988331236,"success":true},"overallScore":41.77838826252007,"errorMessage":null,"success":true}}
2025-11-21 20:43:24.681 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.681682200Z","nanoTime":30990695471300,"traceId":"bd709eb0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:43:24.681 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:43:24.681 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구 신대방1다길 24, latitude=37.560151, longitude=127.081473, geohashId=wydmev9)
2025-11-21 20:43:24.681 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 698.3313640877625
2025-11-21 20:43:24.683 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmeuv
2025-11-21 20:43:24.683 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:43:24.683 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.683448700Z","nanoTime":30990697504500,"traceId":"bd709eb0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":2033200,"duration_ms":2,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["학원이(가) 78m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmeuv","dataSize":17136,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17136,"errorMessage":null,"success":true}}
2025-11-21 20:43:24.683 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:43:24.888 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:43:24.888 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55343854378283, longitude=127.09067205151058, radius=500)
2025-11-21 20:43:24.888 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:43:24.888 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55343854378283, longitude=127.09067205151058, radius=500
2025-11-21 20:43:24.888 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.888596Z","nanoTime":30990903090700,"traceId":"44636939","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:43:24.888 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:43:24.888 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55343854378283, lon=127.09067205151058
2025-11-21 20:43:24.888 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.888596Z","nanoTime":30990903183300,"traceId":"44636939","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:43:24.888 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.888596Z","nanoTime":30990903220400,"traceId":"44636939","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":37100,"duration_ms":0,"resultData":{"latitude":37.55343854378283,"longitude":127.09067205151058,"precision":7,"centerHash":"wydmsh2","adjacentHashes":["wydmsh2","wydmsh8","wydmsh9","wydmsh3","wydmsh1","wydmsh0","wydmeup","wydmeur","wydmeux"],"errorMessage":null,"success":true}}
2025-11-21 20:43:24.888 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmsh2, wydmsh8, wydmsh9, wydmsh3, wydmsh1, wydmsh0, wydmeup, wydmeur, wydmeux]
2025-11-21 20:43:24.888 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmsh2
2025-11-21 20:43:24.888 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.888596Z","nanoTime":30990903308900,"traceId":"44636939","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":218200,"duration_ms":0,"resultData":{"requestLatitude":37.55343854378283,"requestLongitude":127.09067205151058,"requestRadius":500,"centerGeohashId":"wydmsh2","nineBlockGeohashes":["wydmsh2","wydmsh8","wydmsh9","wydmsh3","wydmsh1","wydmsh0","wydmeup","wydmeur","wydmeux"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:43:24.889 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.889586900Z","nanoTime":30990903355300,"traceId":"44636939","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:43:24.889 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:43:24.889 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmsh2
2025-11-21 20:43:24.889 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.267ms)
2025-11-21 20:43:24.889 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:43:24.890 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:43:24.890 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:43:24.890 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 0.8365ms, 역직렬화: 0.0ms
2025-11-21 20:43:24.890 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:43:24.890 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.890933900Z","nanoTime":30990904693400,"traceId":"44636939","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1338100,"duration_ms":1,"resultData":{"centerGeohashId":"wydmsh2","nineBlockGeohashes":["wydmsh2","wydmsh8","wydmsh9","wydmsh3","wydmsh1","wydmsh0","wydmeup","wydmeur","wydmeux"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmsh2","hit":false,"valueSize":0,"l1CacheGetDurationNs":267000,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmsh2","cacheKey":"data:wydmsh2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":107400},{"geohashId":"wydmsh8","cacheKey":"data:wydmsh8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":81100},{"geohashId":"wydmsh9","cacheKey":"data:wydmsh9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":75800},{"geohashId":"wydmsh3","cacheKey":"data:wydmsh3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":109500},{"geohashId":"wydmsh1","cacheKey":"data:wydmsh1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":73000},{"geohashId":"wydmsh0","cacheKey":"data:wydmsh0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":71500},{"geohashId":"wydmeup","cacheKey":"data:wydmeup:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":76400},{"geohashId":"wydmeur","cacheKey":"data:wydmeur:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":106400},{"geohashId":"wydmeux","cacheKey":"data:wydmeux:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":83900}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":836500,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:43:24.890 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.890933900Z","nanoTime":30990904833000,"traceId":"44636939","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:43:24.890 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:43:24.890 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:43:24.894 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 15건
2025-11-21 20:43:24.896 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:43:24.896 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 20:43:24.896 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.896614Z","nanoTime":30990910962800,"traceId":"44636939","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6129800,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydmsh2","wydmsh8","wydmsh9","wydmsh3","wydmsh1","wydmsh0","wydmeup","wydmeur","wydmeux"],"cctvQueryResult":{"queryGeohashIds":["wydmsh2","wydmsh8","wydmsh9","wydmsh3","wydmsh1","wydmsh0","wydmeup","wydmeur","wydmeux"],"totalRowsReturned":15,"rowsPerGrid":{"wydmeup":2,"wydmeur":2,"wydmsh0":4,"wydmsh1":2,"wydmsh2":1,"wydmsh3":1,"wydmeux":2,"wydmsh8":1},"queryExecutionTimeNs":4419500,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmeup","cacheKey":"data:wydmeup:cctv","dataCount":2,"dataSize":200,"errorMessage":null,"success":true},{"geohashId":"wydmeur","cacheKey":"data:wydmeur:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydmsh0","cacheKey":"data:wydmsh0:cctv","dataCount":4,"dataSize":400,"errorMessage":null,"success":true},{"geohashId":"wydmsh1","cacheKey":"data:wydmsh1:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydmsh2","cacheKey":"data:wydmsh2:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmsh3","cacheKey":"data:wydmsh3:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmeux","cacheKey":"data:wydmeux:cctv","dataCount":2,"dataSize":199,"errorMessage":null,"success":true},{"geohashId":"wydmsh8","cacheKey":"data:wydmsh8:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:43:24.896 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:24.896614Z","nanoTime":30990911104900,"traceId":"44636939","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:43:24.896 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:43:24.896 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.55343854378283, 127.09067205151058)
2025-11-21 20:43:24.896 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:43:24.984 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:43:24.984 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:43:24.984 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:43:24.984 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.55343854378283, 127.09067205151058), 반경: 500m
2025-11-21 20:43:25.066 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:43:25.066 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 128건
2025-11-21 20:43:25.066 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:43:25.066 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:43:25.066 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 광진구
2025-11-21 20:43:25.066 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 광진구
2025-11-21 20:43:25.066 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:43:25.066 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:43:25.066 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:43:25.066 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.672940923
2025-11-21 20:43:25.066 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:25.066806900Z","nanoTime":30991082842700,"traceId":"44636939","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":171737800,"duration_ms":171,"resultData":{"latitude":37.55343854378283,"longitude":127.09067205151058,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":171577200,"addressApiResult":{"cached":false,"cacheKey":"address:37.55343854378283:127.09067205151058","roadAddress":"서울특별시 광진구 자양로45길 54","jibunAddress":"서울 광진구 중곡동 112-22","responseSize":74,"executionTimeNs":93452500,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:광진구","guName":"광진구","arrestRate":0.672940923,"dataFound":true,"executionTimeNs":687600,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.55343854378283:127.09067205151058:500","categoryCount":15,"placesByCategory":{"CT1":2,"AT4":1,"CS2":15,"SC4":2,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":1,"FD6":15,"PK6":15,"OL7":0,"PM9":14},"totalPlaces":128,"responseSize":14808,"executionTimeNs":77437100,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:25.066 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:25.066806900Z","nanoTime":30991083119200,"traceId":"44636939","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:43:25.066 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:43:25.066 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:43:25.066 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 15개
2025-11-21 20:43:25.066 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 15개 (총 카메라 대수: 15대)
2025-11-21 20:43:25.066 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:43:25.150 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 광진구 동일로76가길 28 (거리: 844m)
2025-11-21 20:43:25.150 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:43:25.150 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:43:25.150 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 20:43:25.150 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:43:25.150 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:25.150290800Z","nanoTime":30991164436800,"traceId":"44636939","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":81317600,"duration_ms":81,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":15,"totalCctvAfterFilter":15,"totalCameraCount":15,"filterRate":1.0,"filterExecutionTimeNs":9900,"success":true},"policeQuery":{"queryDurationNs":80830900,"found":true,"nearestAddress":"서울특별시 광진구 동일로76가길 28","nearestDistance":843.663412995297,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":2,"AT4":1,"CS2":15,"SC4":2,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":1,"FD6":15,"PK6":15,"PM9":14},"placesAfterFilter":{"CT1":2,"AT4":1,"CS2":15,"SC4":2,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":1,"FD6":15,"PK6":15,"PM9":14},"totalBeforeFilter":128,"totalAfterFilter":128,"filterRate":1.0,"filterExecutionTimeNs":104200,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:43:25.150 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:25.150290800Z","nanoTime":30991164710600,"traceId":"44636939","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:43:25.150 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:43:25.150 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 40.19, 편의성: 37.31, 종합: 38.75
2025-11-21 20:43:25.150 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:25.150290800Z","nanoTime":30991165029200,"traceId":"44636939","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":318600,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":0.0,"policeDistance":843.663412995297,"cctvScore":50.0,"cctvCount":15,"arrestRateScore":67.2940923,"arrestRate":0.672940923,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":40.188227690000005,"success":true},"convenienceScore":{"categoryScores":{"CT1":8.0,"AT4":3.0,"CS2":4.339624824968466,"SC4":4.0,"MT1":20.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":3.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"광진구","guPopulation":345652,"finalScore":37.309973201783464,"success":true},"overallScore":38.749100445891735,"errorMessage":null,"success":true}}
2025-11-21 20:43:25.150 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:25.150290800Z","nanoTime":30991165168900,"traceId":"44636939","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:43:25.150 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:43:25.150 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 광진구 동일로76가길 28, latitude=37.545892, longitude=127.091662, geohashId=wydms51)
2025-11-21 20:43:25.150 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 843.663412995297
2025-11-21 20:43:25.152 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmsh2
2025-11-21 20:43:25.152 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:43:25.152 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:43:25.152301Z","nanoTime":30991166507700,"traceId":"44636939","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1338800,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 49m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmsh2","dataSize":16896,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":16896,"errorMessage":null,"success":true}}
2025-11-21 20:43:25.152 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:46:05.025 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - ========================================
2025-11-21 20:46:05.025 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - === Geohash Indexing ETL 프로세스 시작 ===
2025-11-21 20:46:05.025 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - ========================================
2025-11-21 20:46:05.025 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-01] ETL 대상 테이블: CCTV → CCTV_GEO, POLICEOFFICE → POLICEOFFICE_GEO
2025-11-21 20:46:05.025 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - --- [CCTV] ETL 처리 시작 ---
2025-11-21 20:46:05.025 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-02] CCTV_GEO 테이블 초기화 중...
2025-11-21 20:46:05.069 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - 테이블 CCTV_GEO TRUNCATE 완료
2025-11-21 20:46:05.069 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-03] CCTV 원본 데이터 추출 중...
2025-11-21 20:46:05.306 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - 추출된 CCTV 데이터: 46764건
2025-11-21 20:46:05.306 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-03 & B-04] Geohash ID 계산 및 CCTV_GEO 테이블 적재 중...
2025-11-21 20:46:12.495 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - CCTV_GEO 테이블 적재 완료: 총 46764건
2025-11-21 20:46:12.495 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-05] CCTV_GEO 테이블에 B-Tree 인덱스 생성 중...
2025-11-21 20:46:12.498 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - 인덱스 IDX_CCTV_GEO_GEOHASH가 이미 존재합니다. 생성을 건너뜁니다.
2025-11-21 20:46:12.498 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - --- [CCTV] ETL 처리 완료 (소요 시간: 7473ms) ---
2025-11-21 20:46:12.498 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - --- [POLICEOFFICE] ETL 처리 시작 ---
2025-11-21 20:46:12.498 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-02] POLICEOFFICE_GEO 테이블 초기화 중...
2025-11-21 20:46:12.505 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - 테이블 POLICEOFFICE_GEO TRUNCATE 완료
2025-11-21 20:46:12.505 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-03] POLICEOFFICE 원본 데이터 추출 중...
2025-11-21 20:46:12.514 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - 추출된 POLICEOFFICE 데이터: 1951건
2025-11-21 20:46:12.514 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-03 & B-04] Geohash ID 계산 및 POLICEOFFICE_GEO 테이블 적재 중...
2025-11-21 20:46:12.770 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - POLICEOFFICE_GEO 테이블 적재 완료: 총 1951건
2025-11-21 20:46:12.770 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-05] POLICEOFFICE_GEO 테이블에 B-Tree 인덱스 생성 중...
2025-11-21 20:46:12.770 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - 인덱스 IDX_POLICE_GEO_GEOHASH가 이미 존재합니다. 생성을 건너뜁니다.
2025-11-21 20:46:12.770 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - --- [POLICEOFFICE] ETL 처리 완료 (소요 시간: 272ms) ---
2025-11-21 20:46:12.770 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - ========================================
2025-11-21 20:46:12.770 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - === ETL 프로세스 정상 완료 ===
2025-11-21 20:46:12.770 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - 총 소요 시간: 7745ms (7.745초)
2025-11-21 20:46:12.770 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - ========================================
2025-11-21 20:57:39.239 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:57:39.239 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55822678864747, longitude=127.09703843010564, radius=500)
2025-11-21 20:57:39.239 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:57:39.239 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55822678864747, longitude=127.09703843010564, radius=500
2025-11-21 20:57:39.239 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:39.239812200Z","nanoTime":31845255320000,"traceId":"79f6509e","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:57:39.239 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:57:39.239 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55822678864747, lon=127.09703843010564
2025-11-21 20:57:39.239 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:39.239812200Z","nanoTime":31845255438600,"traceId":"79f6509e","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:57:39.241 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:39.239812200Z","nanoTime":31845255485000,"traceId":"79f6509e","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":46400,"duration_ms":0,"resultData":{"latitude":37.55822678864747,"longitude":127.09703843010564,"precision":7,"centerHash":"wydmsjm","adjacentHashes":["wydmsjm","wydmsjt","wydmsjw","wydmsjq","wydmsjn","wydmsjj","wydmsjh","wydmsjk","wydmsjs"],"errorMessage":null,"success":true}}
2025-11-21 20:57:39.241 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmsjm, wydmsjt, wydmsjw, wydmsjq, wydmsjn, wydmsjj, wydmsjh, wydmsjk, wydmsjs]
2025-11-21 20:57:39.241 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmsjm
2025-11-21 20:57:39.241 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:39.241819700Z","nanoTime":31845255713400,"traceId":"79f6509e","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":393400,"duration_ms":0,"resultData":{"requestLatitude":37.55822678864747,"requestLongitude":127.09703843010564,"requestRadius":500,"centerGeohashId":"wydmsjm","nineBlockGeohashes":["wydmsjm","wydmsjt","wydmsjw","wydmsjq","wydmsjn","wydmsjj","wydmsjh","wydmsjk","wydmsjs"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:57:39.241 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:39.241819700Z","nanoTime":31845255783400,"traceId":"79f6509e","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:57:39.241 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:57:39.241 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmsjm
2025-11-21 20:57:39.241 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.6751ms)
2025-11-21 20:57:39.241 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:57:39.243 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:57:39.244 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:57:39.244 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.303ms, 역직렬화: 0.0ms
2025-11-21 20:57:39.244 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:57:39.244 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:39.244212Z","nanoTime":31845258055700,"traceId":"79f6509e","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2272300,"duration_ms":2,"resultData":{"centerGeohashId":"wydmsjm","nineBlockGeohashes":["wydmsjm","wydmsjt","wydmsjw","wydmsjq","wydmsjn","wydmsjj","wydmsjh","wydmsjk","wydmsjs"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmsjm","hit":false,"valueSize":0,"l1CacheGetDurationNs":675100,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmsjm","cacheKey":"data:wydmsjm:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":208600},{"geohashId":"wydmsjt","cacheKey":"data:wydmsjt:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":221000},{"geohashId":"wydmsjw","cacheKey":"data:wydmsjw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":184100},{"geohashId":"wydmsjq","cacheKey":"data:wydmsjq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":108500},{"geohashId":"wydmsjn","cacheKey":"data:wydmsjn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":90800},{"geohashId":"wydmsjj","cacheKey":"data:wydmsjj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":87900},{"geohashId":"wydmsjh","cacheKey":"data:wydmsjh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":93700},{"geohashId":"wydmsjk","cacheKey":"data:wydmsjk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":100500},{"geohashId":"wydmsjs","cacheKey":"data:wydmsjs:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":139200}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1303000,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:57:39.244 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:39.244212Z","nanoTime":31845258228900,"traceId":"79f6509e","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:57:39.244 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:57:39.244 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:57:39.252 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 1건
2025-11-21 20:57:39.252 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:57:39.252 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 1개
2025-11-21 20:57:39.252 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:39.252442800Z","nanoTime":31845267067800,"traceId":"79f6509e","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":8838900,"duration_ms":8,"resultData":{"inputCctvMissGrids":["wydmsjm","wydmsjt","wydmsjw","wydmsjq","wydmsjn","wydmsjj","wydmsjh","wydmsjk","wydmsjs"],"cctvQueryResult":{"queryGeohashIds":["wydmsjm","wydmsjt","wydmsjw","wydmsjq","wydmsjn","wydmsjj","wydmsjh","wydmsjk","wydmsjs"],"totalRowsReturned":1,"rowsPerGrid":{"wydmsjs":1},"queryExecutionTimeNs":8121000,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmsjs","cacheKey":"data:wydmsjs:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:57:39.252 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:39.252442800Z","nanoTime":31845267200700,"traceId":"79f6509e","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:57:39.252 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:57:39.252 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.55822678864747, 127.09703843010564)
2025-11-21 20:57:39.252 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:57:39.484 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:57:39.484 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:57:39.485 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:57:39.485 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.55822678864747, 127.09703843010564), 반경: 500m
2025-11-21 20:57:39.668 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:57:39.668 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 39건
2025-11-21 20:57:39.669 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:57:39.669 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:57:39.669 [http-nio-8185-exec-3] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 20:57:39.669 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:57:39.669 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:57:39.669 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:57:39.669 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 20:57:39.669 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:39.669221Z","nanoTime":31845683626100,"traceId":"79f6509e","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":416425400,"duration_ms":416,"resultData":{"latitude":37.55822678864747,"longitude":127.09703843010564,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":416324200,"addressApiResult":{"cached":false,"cacheKey":"address:37.55822678864747:127.09703843010564","roadAddress":"주소 없음","jibunAddress":"서울 광진구 중곡동 143-135","responseSize":61,"executionTimeNs":231786200,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":40100,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.55822678864747:127.09703843010564:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":0,"CS2":6,"SC4":0,"MT1":0,"BK9":2,"HP8":0,"AC5":7,"CE7":7,"SW8":0,"PO3":0,"FD6":15,"PK6":2,"OL7":0,"PM9":0},"totalPlaces":39,"responseSize":4524,"executionTimeNs":184497900,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:39.669 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:39.669221Z","nanoTime":31845683786900,"traceId":"79f6509e","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:57:39.669 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:57:39.669 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:57:39.669 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 1개
2025-11-21 20:57:39.669 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 1개 (총 카메라 대수: 1대)
2025-11-21 20:57:39.669 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:57:39.736 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 광진구 아차산로 567 (거리: 1171m)
2025-11-21 20:57:39.736 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:57:39.736 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:57:39.736 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 6개 카테고리
2025-11-21 20:57:39.736 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:57:39.736 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:39.736304100Z","nanoTime":31845750643000,"traceId":"79f6509e","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":66856100,"duration_ms":66,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":1,"totalCctvAfterFilter":1,"totalCameraCount":1,"filterRate":1.0,"filterExecutionTimeNs":6300,"success":true},"policeQuery":{"queryDurationNs":66554900,"found":true,"nearestAddress":"서울특별시 광진구 아차산로 567","nearestDistance":1170.6193459904894,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"BK9":2,"CS2":6,"AC5":7,"CE7":7,"FD6":15,"PK6":2},"placesAfterFilter":{"BK9":2,"CS2":6,"AC5":7,"CE7":7,"FD6":15,"PK6":2},"totalBeforeFilter":39,"totalAfterFilter":39,"filterRate":1.0,"filterExecutionTimeNs":32100,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:39.736 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:39.736304100Z","nanoTime":31845750795200,"traceId":"79f6509e","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:57:39.736 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:57:39.737 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 1.33, 편의성: 8.92, 종합: 5.13
2025-11-21 20:57:39.737 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:39.737406500Z","nanoTime":31845751269600,"traceId":"79f6509e","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":474400,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":0.0,"policeDistance":1170.6193459904894,"cctvScore":3.3333333333333335,"cctvCount":1,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":1.3333333333333335,"success":true},"convenienceScore":{"categoryScores":{"BK9":10.0,"CS2":1.5,"AC5":7.0,"CE7":14.0,"FD6":15.0,"PK6":6.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":8.916666666666666,"success":true},"overallScore":5.125,"errorMessage":null,"success":true}}
2025-11-21 20:57:39.737 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:39.737406500Z","nanoTime":31845751370900,"traceId":"79f6509e","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:57:39.737 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:57:39.737 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 광진구 아차산로 567, latitude=37.565354, longitude=127.087264, geohashId=wydmeyw)
2025-11-21 20:57:39.737 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 1170.6193459904894
2025-11-21 20:57:39.738 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmsjm
2025-11-21 20:57:39.738 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:57:39.738 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:39.738282700Z","nanoTime":31845752189100,"traceId":"79f6509e","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":818200,"duration_ms":0,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":[],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","가장 가까운 파출소가 1km 이상 떨어져 있습니다.","CCTV 설치 대수가 적은 편입니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmsjm","dataSize":5505,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":5505,"errorMessage":null,"success":true}}
2025-11-21 20:57:39.738 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:57:40.267 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:57:40.268 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55883157533464, longitude=127.1062066673364, radius=500)
2025-11-21 20:57:40.268 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:57:40.268 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55883157533464, longitude=127.1062066673364, radius=500
2025-11-21 20:57:40.268 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:40.268122200Z","nanoTime":31846282095800,"traceId":"6fad7950","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:57:40.268 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:57:40.268 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55883157533464, lon=127.1062066673364
2025-11-21 20:57:40.268 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:40.268122200Z","nanoTime":31846282177600,"traceId":"6fad7950","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:57:40.268 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:40.268122200Z","nanoTime":31846282215900,"traceId":"6fad7950","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":38300,"duration_ms":0,"resultData":{"latitude":37.55883157533464,"longitude":127.1062066673364,"precision":7,"centerHash":"wydmsm7","adjacentHashes":["wydmsm7","wydmsme","wydmsms","wydmsmk","wydmsmh","wydmsm5","wydmsm4","wydmsm6","wydmsmd"],"errorMessage":null,"success":true}}
2025-11-21 20:57:40.268 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmsm7, wydmsme, wydmsms, wydmsmk, wydmsmh, wydmsm5, wydmsm4, wydmsm6, wydmsmd]
2025-11-21 20:57:40.268 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmsm7
2025-11-21 20:57:40.268 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:40.268122200Z","nanoTime":31846282318900,"traceId":"6fad7950","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":223100,"duration_ms":0,"resultData":{"requestLatitude":37.55883157533464,"requestLongitude":127.1062066673364,"requestRadius":500,"centerGeohashId":"wydmsm7","nineBlockGeohashes":["wydmsm7","wydmsme","wydmsms","wydmsmk","wydmsmh","wydmsm5","wydmsm4","wydmsm6","wydmsmd"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:57:40.268 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:40.268122200Z","nanoTime":31846282357800,"traceId":"6fad7950","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:57:40.268 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:57:40.268 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmsm7
2025-11-21 20:57:40.268 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3899ms)
2025-11-21 20:57:40.268 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:57:40.268 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:57:40.268 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:57:40.268 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.1794ms, 역직렬화: 0.0ms
2025-11-21 20:57:40.268 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:57:40.268 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:40.268940500Z","nanoTime":31846284105800,"traceId":"6fad7950","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1748000,"duration_ms":1,"resultData":{"centerGeohashId":"wydmsm7","nineBlockGeohashes":["wydmsm7","wydmsme","wydmsms","wydmsmk","wydmsmh","wydmsm5","wydmsm4","wydmsm6","wydmsmd"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmsm7","hit":false,"valueSize":0,"l1CacheGetDurationNs":389900,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmsm7","cacheKey":"data:wydmsm7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":243700},{"geohashId":"wydmsme","cacheKey":"data:wydmsme:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":110600},{"geohashId":"wydmsms","cacheKey":"data:wydmsms:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":96400},{"geohashId":"wydmsmk","cacheKey":"data:wydmsmk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":88200},{"geohashId":"wydmsmh","cacheKey":"data:wydmsmh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":135100},{"geohashId":"wydmsm5","cacheKey":"data:wydmsm5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":126000},{"geohashId":"wydmsm4","cacheKey":"data:wydmsm4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":149300},{"geohashId":"wydmsm6","cacheKey":"data:wydmsm6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":88700},{"geohashId":"wydmsmd","cacheKey":"data:wydmsmd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":93400}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1179400,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:57:40.268 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:40.268940500Z","nanoTime":31846284227600,"traceId":"6fad7950","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:57:40.268 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:57:40.268 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:57:40.272 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 0건
2025-11-21 20:57:40.272 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:57:40.272 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 0개
2025-11-21 20:57:40.273 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:40.272624700Z","nanoTime":31846287362300,"traceId":"6fad7950","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":3134700,"duration_ms":3,"resultData":{"inputCctvMissGrids":["wydmsm7","wydmsme","wydmsms","wydmsmk","wydmsmh","wydmsm5","wydmsm4","wydmsm6","wydmsmd"],"cctvQueryResult":{"queryGeohashIds":["wydmsm7","wydmsme","wydmsms","wydmsmk","wydmsmh","wydmsm5","wydmsm4","wydmsm6","wydmsmd"],"totalRowsReturned":0,"rowsPerGrid":{},"queryExecutionTimeNs":2958400,"errorMessage":null,"success":true},"cctvCacheWrites":[],"errorMessage":null,"success":true}}
2025-11-21 20:57:40.273 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:40.273622Z","nanoTime":31846287503100,"traceId":"6fad7950","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:57:40.273 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:57:40.273 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.55883157533464, 127.1062066673364)
2025-11-21 20:57:40.273 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:57:40.358 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:57:40.358 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:57:40.358 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:57:40.358 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.55883157533464, 127.1062066673364), 반경: 500m
2025-11-21 20:57:40.450 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:57:40.450 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 6건
2025-11-21 20:57:40.450 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:57:40.450 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:57:40.450 [http-nio-8185-exec-2] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 20:57:40.450 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:57:40.450 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:57:40.450 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:57:40.450 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 20:57:40.450 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:40.450752Z","nanoTime":31846465852400,"traceId":"6fad7950","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":178349300,"duration_ms":178,"resultData":{"latitude":37.55883157533464,"longitude":127.1062066673364,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":178220700,"addressApiResult":{"cached":false,"cacheKey":"address:37.55883157533464:127.1062066673364","roadAddress":"주소 없음","jibunAddress":"경기 구리시 아천동 산 49-1","responseSize":60,"executionTimeNs":85424300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":42900,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.55883157533464:127.1062066673364:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":1,"CS2":0,"SC4":0,"MT1":0,"BK9":0,"HP8":0,"AC5":0,"CE7":0,"SW8":0,"PO3":0,"FD6":1,"PK6":3,"OL7":0,"PM9":0},"totalPlaces":6,"responseSize":837,"executionTimeNs":92753500,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:40.450 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:40.450752Z","nanoTime":31846466034100,"traceId":"6fad7950","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:57:40.450 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:57:40.450 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:57:40.450 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 0개
2025-11-21 20:57:40.450 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 0개 (총 카메라 대수: 0대)
2025-11-21 20:57:40.450 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:57:40.522 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구  등용로 24  (거리: 1619m)
2025-11-21 20:57:40.522 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:57:40.522 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:57:40.522 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 4개 카테고리
2025-11-21 20:57:40.522 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:57:40.522 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:40.522402600Z","nanoTime":31846537077400,"traceId":"6fad7950","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":71043300,"duration_ms":71,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":0,"totalCctvAfterFilter":0,"totalCameraCount":0,"filterRate":0.0,"filterExecutionTimeNs":200,"success":true},"policeQuery":{"queryDurationNs":70714800,"found":true,"nearestAddress":"서울특별시 동작구  등용로 24 ","nearestDistance":1618.9775356950836,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"AT4":1,"FD6":1,"PK6":3},"placesAfterFilter":{"CT1":1,"AT4":1,"FD6":1,"PK6":3},"totalBeforeFilter":6,"totalAfterFilter":6,"filterRate":1.0,"filterExecutionTimeNs":17000,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:40.522 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:40.522402600Z","nanoTime":31846537270900,"traceId":"6fad7950","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:57:40.522 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:57:40.522 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 0.00, 편의성: 4.25, 종합: 2.13
2025-11-21 20:57:40.522 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:40.522402600Z","nanoTime":31846537756700,"traceId":"6fad7950","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":485800,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":0.0,"policeDistance":1618.9775356950836,"cctvScore":0.0,"cctvCount":0,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":0.0,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"AT4":3.0,"FD6":1.0,"PK6":9.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":4.25,"success":true},"overallScore":2.125,"errorMessage":null,"success":true}}
2025-11-21 20:57:40.522 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:40.522402600Z","nanoTime":31846537915200,"traceId":"6fad7950","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:57:40.522 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:57:40.522 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구  등용로 24 , latitude=37.544453, longitude=127.103318, geohashId=wydms6c)
2025-11-21 20:57:40.522 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 1618.9775356950836
2025-11-21 20:57:40.524 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmsm7
2025-11-21 20:57:40.524 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:57:40.524 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:40.524820900Z","nanoTime":31846538785600,"traceId":"6fad7950","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":870400,"duration_ms":0,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":[],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","가장 가까운 파출소가 1km 이상 떨어져 있습니다.","CCTV 설치 대수가 적은 편입니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmsm7","dataSize":1875,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":1875,"errorMessage":null,"success":true}}
2025-11-21 20:57:40.524 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:57:41.240 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:57:41.240 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55996097965148, longitude=127.11252372180506, radius=500)
2025-11-21 20:57:41.240 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:57:41.240 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55996097965148, longitude=127.11252372180506, radius=500
2025-11-21 20:57:41.240 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:41.240474800Z","nanoTime":31847254545400,"traceId":"d7a13b63","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:57:41.240 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:57:41.240 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55996097965148, lon=127.11252372180506
2025-11-21 20:57:41.240 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:41.240474800Z","nanoTime":31847254663600,"traceId":"d7a13b63","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:57:41.240 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:41.240474800Z","nanoTime":31847254730300,"traceId":"d7a13b63","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":66700,"duration_ms":0,"resultData":{"latitude":37.55996097965148,"longitude":127.11252372180506,"precision":7,"centerHash":"wydmst8","adjacentHashes":["wydmst8","wydmstb","wydmstc","wydmst9","wydmst3","wydmst2","wydmsmr","wydmsmx","wydmsmz"],"errorMessage":null,"success":true}}
2025-11-21 20:57:41.240 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmst8, wydmstb, wydmstc, wydmst9, wydmst3, wydmst2, wydmsmr, wydmsmx, wydmsmz]
2025-11-21 20:57:41.240 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmst8
2025-11-21 20:57:41.240 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:41.240474800Z","nanoTime":31847254828300,"traceId":"d7a13b63","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":282900,"duration_ms":0,"resultData":{"requestLatitude":37.55996097965148,"requestLongitude":127.11252372180506,"requestRadius":500,"centerGeohashId":"wydmst8","nineBlockGeohashes":["wydmst8","wydmstb","wydmstc","wydmst9","wydmst3","wydmst2","wydmsmr","wydmsmx","wydmsmz"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:57:41.240 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:41.240474800Z","nanoTime":31847254871000,"traceId":"d7a13b63","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:57:41.240 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:57:41.240 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmst8
2025-11-21 20:57:41.241 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3788ms)
2025-11-21 20:57:41.241 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:57:41.241 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:57:41.241 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:57:41.241 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.1012ms, 역직렬화: 0.0ms
2025-11-21 20:57:41.241 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:57:41.241 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:41.241954300Z","nanoTime":31847256587900,"traceId":"d7a13b63","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1716900,"duration_ms":1,"resultData":{"centerGeohashId":"wydmst8","nineBlockGeohashes":["wydmst8","wydmstb","wydmstc","wydmst9","wydmst3","wydmst2","wydmsmr","wydmsmx","wydmsmz"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmst8","hit":false,"valueSize":0,"l1CacheGetDurationNs":378800,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmst8","cacheKey":"data:wydmst8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":255800},{"geohashId":"wydmstb","cacheKey":"data:wydmstb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":186400},{"geohashId":"wydmstc","cacheKey":"data:wydmstc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":159300},{"geohashId":"wydmst9","cacheKey":"data:wydmst9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":80300},{"geohashId":"wydmst3","cacheKey":"data:wydmst3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":71000},{"geohashId":"wydmst2","cacheKey":"data:wydmst2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":69400},{"geohashId":"wydmsmr","cacheKey":"data:wydmsmr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":68600},{"geohashId":"wydmsmx","cacheKey":"data:wydmsmx:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":71400},{"geohashId":"wydmsmz","cacheKey":"data:wydmsmz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":68500}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1101200,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:57:41.241 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:41.241954300Z","nanoTime":31847256709100,"traceId":"d7a13b63","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:57:41.241 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:57:41.241 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:57:41.246 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 0건
2025-11-21 20:57:41.246 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:57:41.246 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 0개
2025-11-21 20:57:41.246 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:41.246064Z","nanoTime":31847260480200,"traceId":"d7a13b63","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":3771100,"duration_ms":3,"resultData":{"inputCctvMissGrids":["wydmst8","wydmstb","wydmstc","wydmst9","wydmst3","wydmst2","wydmsmr","wydmsmx","wydmsmz"],"cctvQueryResult":{"queryGeohashIds":["wydmst8","wydmstb","wydmstc","wydmst9","wydmst3","wydmst2","wydmsmr","wydmsmx","wydmsmz"],"totalRowsReturned":0,"rowsPerGrid":{},"queryExecutionTimeNs":3572700,"errorMessage":null,"success":true},"cctvCacheWrites":[],"errorMessage":null,"success":true}}
2025-11-21 20:57:41.246 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:41.246064Z","nanoTime":31847260613400,"traceId":"d7a13b63","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:57:41.246 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:57:41.246 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.55996097965148, 127.11252372180506)
2025-11-21 20:57:41.247 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:57:41.324 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:57:41.324 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:57:41.324 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:57:41.324 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.55996097965148, 127.11252372180506), 반경: 500m
2025-11-21 20:57:41.395 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:57:41.395 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 20건
2025-11-21 20:57:41.395 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:57:41.395 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:57:41.395 [http-nio-8185-exec-5] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 20:57:41.395 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:57:41.395 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:57:41.395 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:57:41.395 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 20:57:41.395 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:41.395833300Z","nanoTime":31847410439400,"traceId":"d7a13b63","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":149826000,"duration_ms":149,"resultData":{"latitude":37.55996097965148,"longitude":127.11252372180506,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":149715000,"addressApiResult":{"cached":false,"cacheKey":"address:37.55996097965148:127.11252372180506","roadAddress":"주소 없음","jibunAddress":"경기 구리시 아천동 산 42-2","responseSize":60,"executionTimeNs":78713800,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":42700,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.55996097965148:127.11252372180506:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":0,"CS2":1,"SC4":0,"MT1":0,"BK9":0,"HP8":0,"AC5":0,"CE7":5,"SW8":0,"PO3":0,"FD6":8,"PK6":4,"OL7":1,"PM9":0},"totalPlaces":20,"responseSize":2384,"executionTimeNs":70958500,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:41.396 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:41.396840Z","nanoTime":31847410619400,"traceId":"d7a13b63","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:57:41.396 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:57:41.396 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:57:41.396 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 0개
2025-11-21 20:57:41.396 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 0개 (총 카메라 대수: 0대)
2025-11-21 20:57:41.396 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:57:41.462 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구  등용로 24  (거리: 1906m)
2025-11-21 20:57:41.462 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:57:41.462 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:57:41.462 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 6개 카테고리
2025-11-21 20:57:41.462 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:57:41.462 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:41.462815600Z","nanoTime":31847477566200,"traceId":"d7a13b63","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":66946800,"duration_ms":66,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":0,"totalCctvAfterFilter":0,"totalCameraCount":0,"filterRate":0.0,"filterExecutionTimeNs":200,"success":true},"policeQuery":{"queryDurationNs":66598700,"found":true,"nearestAddress":"서울특별시 동작구  등용로 24 ","nearestDistance":1905.8250355176374,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"CS2":1,"CE7":5,"FD6":8,"PK6":4,"OL7":1},"placesAfterFilter":{"CT1":1,"CS2":1,"CE7":5,"FD6":8,"PK6":4,"OL7":1},"totalBeforeFilter":20,"totalAfterFilter":20,"filterRate":1.0,"filterExecutionTimeNs":27800,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:41.462 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:41.462815600Z","nanoTime":31847477764400,"traceId":"d7a13b63","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:57:41.462 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:57:41.462 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 0.00, 편의성: 6.54, 종합: 3.27
2025-11-21 20:57:41.462 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:41.462815600Z","nanoTime":31847477957600,"traceId":"d7a13b63","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":193200,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":0.0,"policeDistance":1905.8250355176374,"cctvScore":0.0,"cctvCount":0,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":0.0,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"CS2":0.25,"CE7":10.0,"FD6":8.0,"PK6":12.0,"OL7":5.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":6.541666666666667,"success":true},"overallScore":3.2708333333333335,"errorMessage":null,"success":true}}
2025-11-21 20:57:41.462 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:41.462815600Z","nanoTime":31847478066700,"traceId":"d7a13b63","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:57:41.462 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:57:41.462 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구  등용로 24 , latitude=37.544453, longitude=127.103318, geohashId=wydms6c)
2025-11-21 20:57:41.462 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 1905.8250355176374
2025-11-21 20:57:41.464 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmst8
2025-11-21 20:57:41.464 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:57:41.464 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:41.464828800Z","nanoTime":31847478929700,"traceId":"d7a13b63","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":863000,"duration_ms":0,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["음식점이(가) 66m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","가장 가까운 파출소가 1km 이상 떨어져 있습니다.","CCTV 설치 대수가 적은 편입니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmst8","dataSize":3498,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":3498,"errorMessage":null,"success":true}}
2025-11-21 20:57:41.464 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:57:42.286 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:57:42.351 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56237958420141, longitude=127.10831692228922, radius=500)
2025-11-21 20:57:42.351 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:57:42.351 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56237958420141, longitude=127.10831692228922, radius=500
2025-11-21 20:57:42.351 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:42.351918100Z","nanoTime":31848367065400,"traceId":"fc907205","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:57:42.351 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:57:42.351 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56237958420141, lon=127.10831692228922
2025-11-21 20:57:42.351 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:42.351918100Z","nanoTime":31848367184000,"traceId":"fc907205","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:57:42.351 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:42.351918100Z","nanoTime":31848367238500,"traceId":"fc907205","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":54500,"duration_ms":0,"resultData":{"latitude":37.56237958420141,"longitude":127.10831692228922,"precision":7,"centerHash":"wydmsqj","adjacentHashes":["wydmsqj","wydmsqm","wydmsqq","wydmsqn","wydmsmy","wydmsmv","wydmsmu","wydmsqh","wydmsqk"],"errorMessage":null,"success":true}}
2025-11-21 20:57:42.351 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmsqj, wydmsqm, wydmsqq, wydmsqn, wydmsmy, wydmsmv, wydmsmu, wydmsqh, wydmsqk]
2025-11-21 20:57:42.351 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmsqj
2025-11-21 20:57:42.351 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:42.351918100Z","nanoTime":31848367382900,"traceId":"fc907205","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":317500,"duration_ms":0,"resultData":{"requestLatitude":37.56237958420141,"requestLongitude":127.10831692228922,"requestRadius":500,"centerGeohashId":"wydmsqj","nineBlockGeohashes":["wydmsqj","wydmsqm","wydmsqq","wydmsqn","wydmsmy","wydmsmv","wydmsmu","wydmsqh","wydmsqk"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:57:42.351 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:42.351918100Z","nanoTime":31848367435400,"traceId":"fc907205","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:57:42.351 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:57:42.351 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmsqj
2025-11-21 20:57:42.353 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5353ms)
2025-11-21 20:57:42.353 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:57:42.355 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:57:42.355 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:57:42.355 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.3492ms, 역직렬화: 0.0ms
2025-11-21 20:57:42.355 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:57:42.355 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:42.355088400Z","nanoTime":31848369661000,"traceId":"fc907205","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2225600,"duration_ms":2,"resultData":{"centerGeohashId":"wydmsqj","nineBlockGeohashes":["wydmsqj","wydmsqm","wydmsqq","wydmsqn","wydmsmy","wydmsmv","wydmsmu","wydmsqh","wydmsqk"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmsqj","hit":false,"valueSize":0,"l1CacheGetDurationNs":535300,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmsqj","cacheKey":"data:wydmsqj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":331400},{"geohashId":"wydmsqm","cacheKey":"data:wydmsqm:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":262500},{"geohashId":"wydmsqq","cacheKey":"data:wydmsqq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":129000},{"geohashId":"wydmsqn","cacheKey":"data:wydmsqn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":87900},{"geohashId":"wydmsmy","cacheKey":"data:wydmsmy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":78700},{"geohashId":"wydmsmv","cacheKey":"data:wydmsmv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":76200},{"geohashId":"wydmsmu","cacheKey":"data:wydmsmu:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":79200},{"geohashId":"wydmsqh","cacheKey":"data:wydmsqh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":87000},{"geohashId":"wydmsqk","cacheKey":"data:wydmsqk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":113100}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1349200,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:57:42.355 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:42.355088400Z","nanoTime":31848369807100,"traceId":"fc907205","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:57:42.355 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:57:42.356 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:57:42.358 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 0건
2025-11-21 20:57:42.358 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:57:42.358 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 0개
2025-11-21 20:57:42.358 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:42.358606200Z","nanoTime":31848373114500,"traceId":"fc907205","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":3307400,"duration_ms":3,"resultData":{"inputCctvMissGrids":["wydmsqj","wydmsqm","wydmsqq","wydmsqn","wydmsmy","wydmsmv","wydmsmu","wydmsqh","wydmsqk"],"cctvQueryResult":{"queryGeohashIds":["wydmsqj","wydmsqm","wydmsqq","wydmsqn","wydmsmy","wydmsmv","wydmsmu","wydmsqh","wydmsqk"],"totalRowsReturned":0,"rowsPerGrid":{},"queryExecutionTimeNs":3071800,"errorMessage":null,"success":true},"cctvCacheWrites":[],"errorMessage":null,"success":true}}
2025-11-21 20:57:42.358 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:42.358606200Z","nanoTime":31848373240000,"traceId":"fc907205","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:57:42.358 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:57:42.358 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56237958420141, 127.10831692228922)
2025-11-21 20:57:42.358 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:57:42.464 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:57:42.464 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:57:42.464 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:57:42.464 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56237958420141, 127.10831692228922), 반경: 500m
2025-11-21 20:57:42.538 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:57:42.538 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 7건
2025-11-21 20:57:42.538 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:57:42.538 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:57:42.538 [http-nio-8185-exec-4] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 20:57:42.538 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:57:42.538 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:57:42.538 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:57:42.538 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 20:57:42.538 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:42.538954200Z","nanoTime":31848553421100,"traceId":"fc907205","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":180181100,"duration_ms":180,"resultData":{"latitude":37.56237958420141,"longitude":127.10831692228922,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":180050400,"addressApiResult":{"cached":false,"cacheKey":"address:37.56237958420141:127.10831692228922","roadAddress":"주소 없음","jibunAddress":"경기 구리시 아천동 산 49-4","responseSize":60,"executionTimeNs":106011400,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":44900,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56237958420141:127.10831692228922:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":0,"CS2":0,"SC4":0,"MT1":0,"BK9":0,"HP8":0,"AC5":0,"CE7":4,"SW8":0,"PO3":0,"FD6":1,"PK6":1,"OL7":0,"PM9":0},"totalPlaces":7,"responseSize":906,"executionTimeNs":73994100,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:42.538 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:42.538954200Z","nanoTime":31848553579800,"traceId":"fc907205","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:57:42.538 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:57:42.538 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:57:42.538 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 0개
2025-11-21 20:57:42.538 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 0개 (총 카메라 대수: 0대)
2025-11-21 20:57:42.538 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:57:42.603 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 광진구 아차산로 567 (거리: 1885m)
2025-11-21 20:57:42.603 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:57:42.603 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:57:42.603 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 4개 카테고리
2025-11-21 20:57:42.603 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:57:42.603 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:42.603402700Z","nanoTime":31848621523400,"traceId":"fc907205","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":67943600,"duration_ms":67,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":0,"totalCctvAfterFilter":0,"totalCameraCount":0,"filterRate":0.0,"filterExecutionTimeNs":200,"success":true},"policeQuery":{"queryDurationNs":67708000,"found":true,"nearestAddress":"서울특별시 광진구 아차산로 567","nearestDistance":1884.8775201769586,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"CE7":4,"FD6":1,"PK6":1},"placesAfterFilter":{"CT1":1,"CE7":4,"FD6":1,"PK6":1},"totalBeforeFilter":7,"totalAfterFilter":7,"filterRate":1.0,"filterExecutionTimeNs":16200,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:42.603 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:42.603402700Z","nanoTime":31848621651200,"traceId":"fc907205","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:57:42.603 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:57:42.603 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 0.00, 편의성: 4.00, 종합: 2.00
2025-11-21 20:57:42.603 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:42.603402700Z","nanoTime":31848621797700,"traceId":"fc907205","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":146500,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":0.0,"policeDistance":1884.8775201769586,"cctvScore":0.0,"cctvCount":0,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":0.0,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"CE7":8.0,"FD6":1.0,"PK6":3.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":4.0,"success":true},"overallScore":2.0,"errorMessage":null,"success":true}}
2025-11-21 20:57:42.603 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:42.603402700Z","nanoTime":31848621882700,"traceId":"fc907205","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:57:42.603 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:57:42.603 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 광진구 아차산로 567, latitude=37.565354, longitude=127.087264, geohashId=wydmeyw)
2025-11-21 20:57:42.603 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 1884.8775201769586
2025-11-21 20:57:42.603 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmsqj
2025-11-21 20:57:42.603 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:57:42.603 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:42.603402700Z","nanoTime":31848622514900,"traceId":"fc907205","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":632200,"duration_ms":0,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":[],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","가장 가까운 파출소가 1km 이상 떨어져 있습니다.","CCTV 설치 대수가 적은 편입니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmsqj","dataSize":1873,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":1873,"errorMessage":null,"success":true}}
2025-11-21 20:57:42.603 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:57:42.917 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:57:42.917 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56525066626102, longitude=127.10166561667853, radius=500)
2025-11-21 20:57:42.917 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:57:42.917 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56525066626102, longitude=127.10166561667853, radius=500
2025-11-21 20:57:42.917 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:42.917408600Z","nanoTime":31848932100500,"traceId":"62598ed3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:57:42.918 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:57:42.918 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56525066626102, lon=127.10166561667853
2025-11-21 20:57:42.918 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:42.918404700Z","nanoTime":31848932208900,"traceId":"62598ed3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:57:42.918 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:42.918404700Z","nanoTime":31848932244600,"traceId":"62598ed3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":35700,"duration_ms":0,"resultData":{"latitude":37.56525066626102,"longitude":127.10166561667853,"precision":7,"centerHash":"wydmsq8","adjacentHashes":["wydmsq8","wydmsqb","wydmsqc","wydmsq9","wydmsq3","wydmsq2","wydmsnr","wydmsnx","wydmsnz"],"errorMessage":null,"success":true}}
2025-11-21 20:57:42.918 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmsq8, wydmsqb, wydmsqc, wydmsq9, wydmsq3, wydmsq2, wydmsnr, wydmsnx, wydmsnz]
2025-11-21 20:57:42.918 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmsq8
2025-11-21 20:57:42.918 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:42.918404700Z","nanoTime":31848932356600,"traceId":"62598ed3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":256100,"duration_ms":0,"resultData":{"requestLatitude":37.56525066626102,"requestLongitude":127.10166561667853,"requestRadius":500,"centerGeohashId":"wydmsq8","nineBlockGeohashes":["wydmsq8","wydmsqb","wydmsqc","wydmsq9","wydmsq3","wydmsq2","wydmsnr","wydmsnx","wydmsnz"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:57:42.918 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:42.918404700Z","nanoTime":31848932402700,"traceId":"62598ed3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:57:42.918 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:57:42.918 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmsq8
2025-11-21 20:57:42.918 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5638ms)
2025-11-21 20:57:42.918 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:57:42.919 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:57:42.919 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:57:42.919 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.4576ms, 역직렬화: 0.0ms
2025-11-21 20:57:42.919 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:57:42.919 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:42.919789Z","nanoTime":31848934670300,"traceId":"62598ed3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2267600,"duration_ms":2,"resultData":{"centerGeohashId":"wydmsq8","nineBlockGeohashes":["wydmsq8","wydmsqb","wydmsqc","wydmsq9","wydmsq3","wydmsq2","wydmsnr","wydmsnx","wydmsnz"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmsq8","hit":false,"valueSize":0,"l1CacheGetDurationNs":563800,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmsq8","cacheKey":"data:wydmsq8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":169200},{"geohashId":"wydmsqb","cacheKey":"data:wydmsqb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":114900},{"geohashId":"wydmsqc","cacheKey":"data:wydmsqc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":167700},{"geohashId":"wydmsq9","cacheKey":"data:wydmsq9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":169800},{"geohashId":"wydmsq3","cacheKey":"data:wydmsq3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":123900},{"geohashId":"wydmsq2","cacheKey":"data:wydmsq2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":176500},{"geohashId":"wydmsnr","cacheKey":"data:wydmsnr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":101200},{"geohashId":"wydmsnx","cacheKey":"data:wydmsnx:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":256200},{"geohashId":"wydmsnz","cacheKey":"data:wydmsnz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":107900}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1457600,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:57:42.919 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:42.919789Z","nanoTime":31848934812300,"traceId":"62598ed3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:57:42.919 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:57:42.919 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:57:42.923 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 0건
2025-11-21 20:57:42.923 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:57:42.923 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 0개
2025-11-21 20:57:42.923 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:42.923154600Z","nanoTime":31848937321800,"traceId":"62598ed3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":2509500,"duration_ms":2,"resultData":{"inputCctvMissGrids":["wydmsq8","wydmsqb","wydmsqc","wydmsq9","wydmsq3","wydmsq2","wydmsnr","wydmsnx","wydmsnz"],"cctvQueryResult":{"queryGeohashIds":["wydmsq8","wydmsqb","wydmsqc","wydmsq9","wydmsq3","wydmsq2","wydmsnr","wydmsnx","wydmsnz"],"totalRowsReturned":0,"rowsPerGrid":{},"queryExecutionTimeNs":2299300,"errorMessage":null,"success":true},"cctvCacheWrites":[],"errorMessage":null,"success":true}}
2025-11-21 20:57:42.923 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:42.923154600Z","nanoTime":31848937432200,"traceId":"62598ed3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:57:42.923 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:57:42.923 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56525066626102, 127.10166561667853)
2025-11-21 20:57:42.923 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:57:43.022 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:57:43.022 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:57:43.022 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:57:43.022 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56525066626102, 127.10166561667853), 반경: 500m
2025-11-21 20:57:43.099 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:57:43.099 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 2건
2025-11-21 20:57:43.101 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:57:43.101 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:57:43.101 [http-nio-8185-exec-6] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 20:57:43.101 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:57:43.101 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:57:43.101 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:57:43.101 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 20:57:43.101 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:43.101275200Z","nanoTime":31849115771400,"traceId":"62598ed3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":178339200,"duration_ms":178,"resultData":{"latitude":37.56525066626102,"longitude":127.10166561667853,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":178233200,"addressApiResult":{"cached":false,"cacheKey":"address:37.56525066626102:127.10166561667853","roadAddress":"주소 없음","jibunAddress":"서울 광진구 중곡동 143-127","responseSize":61,"executionTimeNs":99668400,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":27000,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56525066626102:127.10166561667853:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":2,"CS2":0,"SC4":0,"MT1":0,"BK9":0,"HP8":0,"AC5":0,"CE7":0,"SW8":0,"PO3":0,"FD6":0,"PK6":0,"OL7":0,"PM9":0},"totalPlaces":2,"responseSize":377,"executionTimeNs":78537800,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:43.101 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:43.101275200Z","nanoTime":31849115994500,"traceId":"62598ed3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:57:43.101 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:57:43.101 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:57:43.101 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 0개
2025-11-21 20:57:43.101 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 0개 (총 카메라 대수: 0대)
2025-11-21 20:57:43.101 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:57:43.168 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 광진구 아차산로 567 (거리: 1269m)
2025-11-21 20:57:43.168 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:57:43.168 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:57:43.168 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 1개 카테고리
2025-11-21 20:57:43.168 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:57:43.168 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:43.168114300Z","nanoTime":31849182510400,"traceId":"62598ed3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":66515900,"duration_ms":66,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":0,"totalCctvAfterFilter":0,"totalCameraCount":0,"filterRate":0.0,"filterExecutionTimeNs":200,"success":true},"policeQuery":{"queryDurationNs":66214800,"found":true,"nearestAddress":"서울특별시 광진구 아차산로 567","nearestDistance":1269.405582478115,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"AT4":2},"placesAfterFilter":{"AT4":2},"totalBeforeFilter":2,"totalAfterFilter":2,"filterRate":1.0,"filterExecutionTimeNs":14400,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:43.168 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:43.168114300Z","nanoTime":31849182663500,"traceId":"62598ed3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:57:43.168 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:57:43.168 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 0.00, 편의성: 6.00, 종합: 3.00
2025-11-21 20:57:43.168 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:43.168114300Z","nanoTime":31849182925700,"traceId":"62598ed3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":262200,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":0.0,"policeDistance":1269.405582478115,"cctvScore":0.0,"cctvCount":0,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":0.0,"success":true},"convenienceScore":{"categoryScores":{"AT4":6.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":6.0,"success":true},"overallScore":3.0,"errorMessage":null,"success":true}}
2025-11-21 20:57:43.168 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:43.168114300Z","nanoTime":31849183133500,"traceId":"62598ed3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:57:43.168 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:57:43.168 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 광진구 아차산로 567, latitude=37.565354, longitude=127.087264, geohashId=wydmeyw)
2025-11-21 20:57:43.168 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 1269.405582478115
2025-11-21 20:57:43.170 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmsq8
2025-11-21 20:57:43.170 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:57:43.170 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:43.170131300Z","nanoTime":31849184042100,"traceId":"62598ed3","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":908600,"duration_ms":0,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":[],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","가장 가까운 파출소가 1km 이상 떨어져 있습니다.","CCTV 설치 대수가 적은 편입니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmsq8","dataSize":1119,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":1119,"errorMessage":null,"success":true}}
2025-11-21 20:57:43.170 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:57:44.528 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:57:44.528 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56729298447882, longitude=127.09435623853594, radius=500)
2025-11-21 20:57:44.528 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:57:44.528 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56729298447882, longitude=127.09435623853594, radius=500
2025-11-21 20:57:44.528 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:44.528425400Z","nanoTime":31850542426700,"traceId":"07cc8a16","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:57:44.528 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:57:44.528 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56729298447882, lon=127.09435623853594
2025-11-21 20:57:44.528 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:44.528425400Z","nanoTime":31850542509400,"traceId":"07cc8a16","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:57:44.528 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:44.528425400Z","nanoTime":31850542644100,"traceId":"07cc8a16","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":134700,"duration_ms":0,"resultData":{"latitude":37.56729298447882,"longitude":127.09435623853594,"precision":7,"centerHash":"wydmsng","adjacentHashes":["wydmsng","wydmsp5","wydmsph","wydmsnu","wydmsns","wydmsne","wydmsnd","wydmsnf","wydmsp4"],"errorMessage":null,"success":true}}
2025-11-21 20:57:44.528 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmsng, wydmsp5, wydmsph, wydmsnu, wydmsns, wydmsne, wydmsnd, wydmsnf, wydmsp4]
2025-11-21 20:57:44.528 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmsng
2025-11-21 20:57:44.528 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:44.528425400Z","nanoTime":31850542768300,"traceId":"07cc8a16","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":341600,"duration_ms":0,"resultData":{"requestLatitude":37.56729298447882,"requestLongitude":127.09435623853594,"requestRadius":500,"centerGeohashId":"wydmsng","nineBlockGeohashes":["wydmsng","wydmsp5","wydmsph","wydmsnu","wydmsns","wydmsne","wydmsnd","wydmsnf","wydmsp4"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:57:44.528 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:44.528425400Z","nanoTime":31850542884000,"traceId":"07cc8a16","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:57:44.528 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:57:44.528 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmsng
2025-11-21 20:57:44.529 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4544ms)
2025-11-21 20:57:44.529 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:57:44.529 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:57:44.529 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:57:44.529 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.4948ms, 역직렬화: 0.0ms
2025-11-21 20:57:44.529 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:57:44.529 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:44.529495500Z","nanoTime":31850545129500,"traceId":"07cc8a16","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2245500,"duration_ms":2,"resultData":{"centerGeohashId":"wydmsng","nineBlockGeohashes":["wydmsng","wydmsp5","wydmsph","wydmsnu","wydmsns","wydmsne","wydmsnd","wydmsnf","wydmsp4"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmsng","hit":false,"valueSize":0,"l1CacheGetDurationNs":454400,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmsng","cacheKey":"data:wydmsng:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":204800},{"geohashId":"wydmsp5","cacheKey":"data:wydmsp5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":127500},{"geohashId":"wydmsph","cacheKey":"data:wydmsph:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":258200},{"geohashId":"wydmsnu","cacheKey":"data:wydmsnu:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":194100},{"geohashId":"wydmsns","cacheKey":"data:wydmsns:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":126400},{"geohashId":"wydmsne","cacheKey":"data:wydmsne:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":119300},{"geohashId":"wydmsnd","cacheKey":"data:wydmsnd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":202900},{"geohashId":"wydmsnf","cacheKey":"data:wydmsnf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":102200},{"geohashId":"wydmsp4","cacheKey":"data:wydmsp4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":79000}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1494800,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:57:44.529 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:44.529495500Z","nanoTime":31850545346300,"traceId":"07cc8a16","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:57:44.529 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:57:44.529 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:57:44.534 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 0건
2025-11-21 20:57:44.534 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:57:44.534 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 0개
2025-11-21 20:57:44.534 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:44.534071900Z","nanoTime":31850548171700,"traceId":"07cc8a16","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":2825400,"duration_ms":2,"resultData":{"inputCctvMissGrids":["wydmsng","wydmsp5","wydmsph","wydmsnu","wydmsns","wydmsne","wydmsnd","wydmsnf","wydmsp4"],"cctvQueryResult":{"queryGeohashIds":["wydmsng","wydmsp5","wydmsph","wydmsnu","wydmsns","wydmsne","wydmsnd","wydmsnf","wydmsp4"],"totalRowsReturned":0,"rowsPerGrid":{},"queryExecutionTimeNs":2638900,"errorMessage":null,"success":true},"cctvCacheWrites":[],"errorMessage":null,"success":true}}
2025-11-21 20:57:44.534 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:44.534071900Z","nanoTime":31850548266800,"traceId":"07cc8a16","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:57:44.534 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:57:44.534 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56729298447882, 127.09435623853594)
2025-11-21 20:57:44.534 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:57:44.637 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:57:44.637 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:57:44.637 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:57:44.637 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56729298447882, 127.09435623853594), 반경: 500m
2025-11-21 20:57:44.726 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:57:44.726 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 5건
2025-11-21 20:57:44.726 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:57:44.726 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:57:44.726 [http-nio-8185-exec-7] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 20:57:44.726 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:57:44.726 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:57:44.726 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:57:44.726 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 20:57:44.726 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:44.726151600Z","nanoTime":31850741600900,"traceId":"07cc8a16","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":193334100,"duration_ms":193,"resultData":{"latitude":37.56729298447882,"longitude":127.09435623853594,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":193204300,"addressApiResult":{"cached":false,"cacheKey":"address:37.56729298447882:127.09435623853594","roadAddress":"주소 없음","jibunAddress":"서울 광진구 중곡동 143-127","responseSize":61,"executionTimeNs":104637100,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":42700,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56729298447882:127.09435623853594:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":3,"CS2":0,"SC4":1,"MT1":0,"BK9":0,"HP8":0,"AC5":0,"CE7":0,"SW8":0,"PO3":0,"FD6":0,"PK6":1,"OL7":0,"PM9":0},"totalPlaces":5,"responseSize":703,"executionTimeNs":88524500,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:44.726 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:44.726151600Z","nanoTime":31850741766700,"traceId":"07cc8a16","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:57:44.726 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:57:44.726 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:57:44.726 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 0개
2025-11-21 20:57:44.726 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 0개 (총 카메라 대수: 0대)
2025-11-21 20:57:44.728 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:57:44.798 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 광진구 아차산로 567 (거리: 661m)
2025-11-21 20:57:44.798 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:57:44.798 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:57:44.798 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 3개 카테고리
2025-11-21 20:57:44.798 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:57:44.798 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:44.798203700Z","nanoTime":31850813117200,"traceId":"07cc8a16","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":71350500,"duration_ms":71,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":0,"totalCctvAfterFilter":0,"totalCameraCount":0,"filterRate":0.0,"filterExecutionTimeNs":100,"success":true},"policeQuery":{"queryDurationNs":70938500,"found":true,"nearestAddress":"서울특별시 광진구 아차산로 567","nearestDistance":661.2369258702013,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"AT4":3,"SC4":1,"PK6":1},"placesAfterFilter":{"AT4":3,"SC4":1,"PK6":1},"totalBeforeFilter":5,"totalAfterFilter":5,"filterRate":1.0,"filterExecutionTimeNs":17800,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:44.798 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:44.798203700Z","nanoTime":31850813336900,"traceId":"07cc8a16","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:57:44.798 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:57:44.798 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 5.20, 편의성: 4.67, 종합: 4.94
2025-11-21 20:57:44.798 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:44.798203700Z","nanoTime":31850813556100,"traceId":"07cc8a16","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":219200,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":17.34538426622484,"policeDistance":661.2369258702013,"cctvScore":0.0,"cctvCount":0,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":5.203615279867452,"success":true},"convenienceScore":{"categoryScores":{"AT4":9.0,"SC4":2.0,"PK6":3.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":4.666666666666667,"success":true},"overallScore":4.9351409732670595,"errorMessage":null,"success":true}}
2025-11-21 20:57:44.798 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:44.798203700Z","nanoTime":31850813667300,"traceId":"07cc8a16","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:57:44.798 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:57:44.798 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 광진구 아차산로 567, latitude=37.565354, longitude=127.087264, geohashId=wydmeyw)
2025-11-21 20:57:44.798 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 661.2369258702013
2025-11-21 20:57:44.800 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmsng
2025-11-21 20:57:44.800 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:57:44.800 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:44.800216500Z","nanoTime":31850814578500,"traceId":"07cc8a16","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":911200,"duration_ms":0,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["관광명소이(가) 198m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","CCTV 설치 대수가 적은 편입니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmsng","dataSize":1586,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":1586,"errorMessage":null,"success":true}}
2025-11-21 20:57:44.800 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:57:45.236 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:57:45.236 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56933484996216, longitude=127.08704646044814, radius=500)
2025-11-21 20:57:45.236 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:57:45.236 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56933484996216, longitude=127.08704646044814, radius=500
2025-11-21 20:57:45.236 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:45.236077300Z","nanoTime":31851250733700,"traceId":"e1bb76dc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:57:45.236 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:57:45.236 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56933484996216, lon=127.08704646044814
2025-11-21 20:57:45.236 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:45.236077300Z","nanoTime":31851250814400,"traceId":"e1bb76dc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:57:45.237 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:45.236077300Z","nanoTime":31851250856400,"traceId":"e1bb76dc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":42000,"duration_ms":0,"resultData":{"latitude":37.56933484996216,"longitude":127.08704646044814,"precision":7,"centerHash":"wydmezm","adjacentHashes":["wydmezm","wydmezt","wydmezw","wydmezq","wydmezn","wydmezj","wydmezh","wydmezk","wydmezs"],"errorMessage":null,"success":true}}
2025-11-21 20:57:45.237 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmezm, wydmezt, wydmezw, wydmezq, wydmezn, wydmezj, wydmezh, wydmezk, wydmezs]
2025-11-21 20:57:45.237 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmezm
2025-11-21 20:57:45.237 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:45.237119900Z","nanoTime":31851251008300,"traceId":"e1bb76dc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":274600,"duration_ms":0,"resultData":{"requestLatitude":37.56933484996216,"requestLongitude":127.08704646044814,"requestRadius":500,"centerGeohashId":"wydmezm","nineBlockGeohashes":["wydmezm","wydmezt","wydmezw","wydmezq","wydmezn","wydmezj","wydmezh","wydmezk","wydmezs"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:57:45.237 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:45.237119900Z","nanoTime":31851251138500,"traceId":"e1bb76dc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:57:45.237 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:57:45.237 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmezm
2025-11-21 20:57:45.237 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4824ms)
2025-11-21 20:57:45.237 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:57:45.238 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:57:45.238 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:57:45.238 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 0.9171ms, 역직렬화: 0.0ms
2025-11-21 20:57:45.238 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:57:45.238 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:45.238075400Z","nanoTime":31851252754400,"traceId":"e1bb76dc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1615900,"duration_ms":1,"resultData":{"centerGeohashId":"wydmezm","nineBlockGeohashes":["wydmezm","wydmezt","wydmezw","wydmezq","wydmezn","wydmezj","wydmezh","wydmezk","wydmezs"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmezm","hit":false,"valueSize":0,"l1CacheGetDurationNs":482400,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmezm","cacheKey":"data:wydmezm:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":209600},{"geohashId":"wydmezt","cacheKey":"data:wydmezt:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":107400},{"geohashId":"wydmezw","cacheKey":"data:wydmezw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":87300},{"geohashId":"wydmezq","cacheKey":"data:wydmezq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":73800},{"geohashId":"wydmezn","cacheKey":"data:wydmezn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":69600},{"geohashId":"wydmezj","cacheKey":"data:wydmezj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":85700},{"geohashId":"wydmezh","cacheKey":"data:wydmezh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":74300},{"geohashId":"wydmezk","cacheKey":"data:wydmezk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":70600},{"geohashId":"wydmezs","cacheKey":"data:wydmezs:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":70400}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":917100,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:57:45.239 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:45.239080300Z","nanoTime":31851252855100,"traceId":"e1bb76dc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:57:45.239 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:57:45.239 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:57:45.240 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 25건
2025-11-21 20:57:45.243 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:57:45.243 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 20:57:45.244 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:45.243177900Z","nanoTime":31851257845100,"traceId":"e1bb76dc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4990000,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmezm","wydmezt","wydmezw","wydmezq","wydmezn","wydmezj","wydmezh","wydmezk","wydmezs"],"cctvQueryResult":{"queryGeohashIds":["wydmezm","wydmezt","wydmezw","wydmezq","wydmezn","wydmezj","wydmezh","wydmezk","wydmezs"],"totalRowsReturned":25,"rowsPerGrid":{"wydmezt":5,"wydmezw":5,"wydmezq":2,"wydmezs":2,"wydmezn":3,"wydmezh":1,"wydmezj":3,"wydmezk":4},"queryExecutionTimeNs":2643500,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmezt","cacheKey":"data:wydmezt:cctv","dataCount":5,"dataSize":628,"errorMessage":null,"success":true},{"geohashId":"wydmezw","cacheKey":"data:wydmezw:cctv","dataCount":5,"dataSize":563,"errorMessage":null,"success":true},{"geohashId":"wydmezq","cacheKey":"data:wydmezq:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydmezs","cacheKey":"data:wydmezs:cctv","dataCount":2,"dataSize":265,"errorMessage":null,"success":true},{"geohashId":"wydmezn","cacheKey":"data:wydmezn:cctv","dataCount":3,"dataSize":301,"errorMessage":null,"success":true},{"geohashId":"wydmezh","cacheKey":"data:wydmezh:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmezj","cacheKey":"data:wydmezj:cctv","dataCount":3,"dataSize":301,"errorMessage":null,"success":true},{"geohashId":"wydmezk","cacheKey":"data:wydmezk:cctv","dataCount":4,"dataSize":401,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:57:45.244 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:45.244193400Z","nanoTime":31851257991800,"traceId":"e1bb76dc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:57:45.244 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:57:45.244 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56933484996216, 127.08704646044814)
2025-11-21 20:57:45.244 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:57:45.346 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:57:45.346 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:57:45.346 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:57:45.346 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56933484996216, 127.08704646044814), 반경: 500m
2025-11-21 20:57:45.436 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:57:45.436 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 99건
2025-11-21 20:57:45.438 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:57:45.438 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:57:45.438 [http-nio-8185-exec-8] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 20:57:45.438 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:57:45.438 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:57:45.438 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:57:45.438 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 20:57:45.438 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:45.438059800Z","nanoTime":31851452228500,"traceId":"e1bb76dc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":194236700,"duration_ms":194,"resultData":{"latitude":37.56933484996216,"longitude":127.08704646044814,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":194080800,"addressApiResult":{"cached":false,"cacheKey":"address:37.56933484996216:127.08704646044814","roadAddress":"주소 없음","jibunAddress":"서울 광진구 중곡동 316-1","responseSize":59,"executionTimeNs":103125600,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":41200,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56933484996216:127.08704646044814:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":0,"CS2":15,"SC4":2,"MT1":0,"BK9":9,"HP8":7,"AC5":15,"CE7":15,"SW8":2,"PO3":2,"FD6":15,"PK6":8,"OL7":0,"PM9":8},"totalPlaces":99,"responseSize":11369,"executionTimeNs":90914000,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:45.438 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:45.438059800Z","nanoTime":31851452387700,"traceId":"e1bb76dc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:57:45.438 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:57:45.438 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:57:45.438 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 25개
2025-11-21 20:57:45.438 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 25개 (총 카메라 대수: 45대)
2025-11-21 20:57:45.438 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:57:45.503 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 광진구 아차산로 567 (거리: 443m)
2025-11-21 20:57:45.503 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:57:45.503 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:57:45.503 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 12개 카테고리
2025-11-21 20:57:45.503 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:57:45.505 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:45.503984700Z","nanoTime":31851519694000,"traceId":"e1bb76dc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":67306300,"duration_ms":67,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":25,"totalCctvAfterFilter":25,"totalCameraCount":45,"filterRate":1.0,"filterExecutionTimeNs":10400,"success":true},"policeQuery":{"queryDurationNs":66901300,"found":true,"nearestAddress":"서울특별시 광진구 아차산로 567","nearestDistance":443.0653701189238,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"BK9":9,"HP8":7,"CS2":15,"AC5":15,"CE7":15,"SC4":2,"SW8":2,"PO3":2,"FD6":15,"PK6":8,"PM9":8},"placesAfterFilter":{"CT1":1,"BK9":9,"HP8":7,"CS2":15,"AC5":15,"CE7":15,"SC4":2,"SW8":2,"PO3":2,"FD6":15,"PK6":8,"PM9":8},"totalBeforeFilter":99,"totalAfterFilter":99,"filterRate":1.0,"filterExecutionTimeNs":71800,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:45.505 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:45.505994700Z","nanoTime":31851519878800,"traceId":"e1bb76dc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:57:45.505 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:57:45.505 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 46.72, 편의성: 34.23, 종합: 40.47
2025-11-21 20:57:45.505 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:45.505994700Z","nanoTime":31851520048100,"traceId":"e1bb76dc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":169300,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":44.616828735134526,"policeDistance":443.0653701189238,"cctvScore":83.33333333333334,"cctvCount":25,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":46.718381953873696,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"BK9":45.0,"HP8":100.0,"CS2":3.75,"AC5":15.0,"CE7":30.0,"SC4":4.0,"SW8":100.0,"PO3":6.0,"FD6":15.0,"PK6":24.0,"PM9":64.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":34.229166666666664,"success":true},"overallScore":40.47377431027018,"errorMessage":null,"success":true}}
2025-11-21 20:57:45.505 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:45.505994700Z","nanoTime":31851520152700,"traceId":"e1bb76dc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:57:45.505 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:57:45.505 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 광진구 아차산로 567, latitude=37.565354, longitude=127.087264, geohashId=wydmeyw)
2025-11-21 20:57:45.505 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 443.0653701189238
2025-11-21 20:57:45.505 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmezm
2025-11-21 20:57:45.505 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:57:45.505 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:45.505994700Z","nanoTime":31851521291800,"traceId":"e1bb76dc","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1139100,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["주차장이(가) 46m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmezm","dataSize":14241,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":14241,"errorMessage":null,"success":true}}
2025-11-21 20:57:45.505 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:57:46.377 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:57:46.378 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56834766819224, longitude=127.08156677805977, radius=500)
2025-11-21 20:57:46.378 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:57:46.378 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56834766819224, longitude=127.08156677805977, radius=500
2025-11-21 20:57:46.378 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:46.378603Z","nanoTime":31852392448600,"traceId":"3d333b1b","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:57:46.378 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:57:46.378 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56834766819224, lon=127.08156677805977
2025-11-21 20:57:46.378 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:46.378603Z","nanoTime":31852392547400,"traceId":"3d333b1b","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:57:46.378 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:46.378603Z","nanoTime":31852392592900,"traceId":"3d333b1b","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":45500,"duration_ms":0,"resultData":{"latitude":37.56834766819224,"longitude":127.08156677805977,"precision":7,"centerHash":"wydmez1","adjacentHashes":["wydmez1","wydmez3","wydmez6","wydmez4","wydmeyf","wydmeyc","wydmeyb","wydmez0","wydmez2"],"errorMessage":null,"success":true}}
2025-11-21 20:57:46.378 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmez1, wydmez3, wydmez6, wydmez4, wydmeyf, wydmeyc, wydmeyb, wydmez0, wydmez2]
2025-11-21 20:57:46.378 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmez1
2025-11-21 20:57:46.378 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:46.378603Z","nanoTime":31852392728300,"traceId":"3d333b1b","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":279700,"duration_ms":0,"resultData":{"requestLatitude":37.56834766819224,"requestLongitude":127.08156677805977,"requestRadius":500,"centerGeohashId":"wydmez1","nineBlockGeohashes":["wydmez1","wydmez3","wydmez6","wydmez4","wydmeyf","wydmeyc","wydmeyb","wydmez0","wydmez2"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:57:46.378 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:46.378603Z","nanoTime":31852392807000,"traceId":"3d333b1b","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:57:46.378 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:57:46.378 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmez1
2025-11-21 20:57:46.378 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4051ms)
2025-11-21 20:57:46.379 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:57:46.382 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:57:46.382 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 6개, 미스: 3개
2025-11-21 20:57:46.382 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.8801ms, 역직렬화: 0.1775ms
2025-11-21 20:57:46.382 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:57:46.382 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:46.382111400Z","nanoTime":31852396516300,"traceId":"3d333b1b","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3709300,"duration_ms":3,"resultData":{"centerGeohashId":"wydmez1","nineBlockGeohashes":["wydmez1","wydmez3","wydmez6","wydmez4","wydmeyf","wydmeyc","wydmeyb","wydmez0","wydmez2"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmez1","hit":false,"valueSize":0,"l1CacheGetDurationNs":405100,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmez1","cacheKey":"data:wydmez1:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":300,"l2CacheGetDurationNs":521900},{"geohashId":"wydmez3","cacheKey":"data:wydmez3:cctv","hit":true,"dataType":"cctv","dataCount":6,"dataSize":599,"l2CacheGetDurationNs":322300},{"geohashId":"wydmez6","cacheKey":"data:wydmez6:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":199,"l2CacheGetDurationNs":291500},{"geohashId":"wydmez4","cacheKey":"data:wydmez4:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":201,"l2CacheGetDurationNs":312300},{"geohashId":"wydmeyf","cacheKey":"data:wydmeyf:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":301,"l2CacheGetDurationNs":356400},{"geohashId":"wydmeyc","cacheKey":"data:wydmeyc:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":301,"l2CacheGetDurationNs":276900},{"geohashId":"wydmeyb","cacheKey":"data:wydmeyb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":223100},{"geohashId":"wydmez0","cacheKey":"data:wydmez0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":169600},{"geohashId":"wydmez2","cacheKey":"data:wydmez2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":118500}],"l2TotalHits":6,"l2TotalMisses":3,"l2CacheTotalDurationNs":2880100,"l2JsonDeserializeTotalDurationNs":177500,"errorMessage":null,"success":true}}
2025-11-21 20:57:46.382 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:46.382111400Z","nanoTime":31852396696900,"traceId":"3d333b1b","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:57:46.382 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:57:46.382 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 3개
2025-11-21 20:57:46.387 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 5건
2025-11-21 20:57:46.387 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:57:46.387 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 20:57:46.387 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:46.387135400Z","nanoTime":31852402468800,"traceId":"3d333b1b","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5771900,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydmeyb","wydmez0","wydmez2"],"cctvQueryResult":{"queryGeohashIds":["wydmeyb","wydmez0","wydmez2"],"totalRowsReturned":5,"rowsPerGrid":{"wydmez0":2,"wydmeyb":3},"queryExecutionTimeNs":4611300,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmez0","cacheKey":"data:wydmez0:cctv","dataCount":2,"dataSize":200,"errorMessage":null,"success":true},{"geohashId":"wydmeyb","cacheKey":"data:wydmeyb:cctv","dataCount":3,"dataSize":301,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:57:46.387 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:46.387135400Z","nanoTime":31852402644200,"traceId":"3d333b1b","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:57:46.387 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:57:46.387 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56834766819224, 127.08156677805977)
2025-11-21 20:57:46.389 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:57:46.479 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:57:46.479 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:57:46.479 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:57:46.479 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56834766819224, 127.08156677805977), 반경: 500m
2025-11-21 20:57:46.569 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:57:46.569 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 125건
2025-11-21 20:57:46.569 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:57:46.569 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:57:46.569 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 광진구
2025-11-21 20:57:46.571 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 광진구
2025-11-21 20:57:46.571 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:57:46.571 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:57:46.571 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:57:46.571 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.672940923
2025-11-21 20:57:46.571 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:46.571915300Z","nanoTime":31852585916900,"traceId":"3d333b1b","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":183272700,"duration_ms":183,"resultData":{"latitude":37.56834766819224,"longitude":127.08156677805977,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":183123500,"addressApiResult":{"cached":false,"cacheKey":"address:37.56834766819224:127.08156677805977","roadAddress":"서울특별시 광진구 동일로76길 51-4","jibunAddress":"서울 광진구 중곡동 693-1","responseSize":75,"executionTimeNs":91452500,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:광진구","guName":"광진구","arrestRate":0.672940923,"dataFound":true,"executionTimeNs":570900,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56834766819224:127.08156677805977:500","categoryCount":15,"placesByCategory":{"CT1":2,"AT4":1,"CS2":15,"SC4":2,"MT1":1,"BK9":12,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":10,"OL7":3,"PM9":15},"totalPlaces":125,"responseSize":14390,"executionTimeNs":91100100,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:46.571 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:46.571915300Z","nanoTime":31852586136400,"traceId":"3d333b1b","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:57:46.571 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:57:46.571 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:57:46.571 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 24개
2025-11-21 20:57:46.571 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 24개 (총 카메라 대수: 24대)
2025-11-21 20:57:46.571 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:57:46.640 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구 여의대방로 130 (거리: 136m)
2025-11-21 20:57:46.640 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:57:46.640 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:57:46.640 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 20:57:46.640 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:57:46.640 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:46.640764500Z","nanoTime":31852655212000,"traceId":"3d333b1b","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":69075600,"duration_ms":69,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":24,"totalCctvAfterFilter":24,"totalCameraCount":24,"filterRate":1.0,"filterExecutionTimeNs":9700,"success":true},"policeQuery":{"queryDurationNs":68659700,"found":true,"nearestAddress":"서울특별시 동작구 여의대방로 130","nearestDistance":136.3005853862146,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":2,"AT4":1,"CS2":15,"SC4":2,"MT1":1,"BK9":12,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":10,"OL7":3,"PM9":15},"placesAfterFilter":{"CT1":2,"AT4":1,"CS2":15,"SC4":2,"MT1":1,"BK9":12,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":10,"OL7":3,"PM9":15},"totalBeforeFilter":125,"totalAfterFilter":125,"filterRate":1.0,"filterExecutionTimeNs":87100,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:46.640 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:46.640764500Z","nanoTime":31852655374800,"traceId":"3d333b1b","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:57:46.640 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:57:46.640 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 77.08, 편의성: 33.56, 종합: 55.32
2025-11-21 20:57:46.640 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:46.640764500Z","nanoTime":31852655593900,"traceId":"3d333b1b","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":219100,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":82.96242682672317,"policeDistance":136.3005853862146,"cctvScore":80.0,"cctvCount":24,"arrestRateScore":67.2940923,"arrestRate":0.672940923,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":77.07695573801695,"success":true},"convenienceScore":{"categoryScores":{"CT1":8.0,"AT4":3.0,"CS2":4.339624824968466,"SC4":4.0,"MT1":10.0,"BK9":60.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":30.0,"OL7":15.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"광진구","guPopulation":345652,"finalScore":33.555974988331236,"success":true},"overallScore":55.31646536317409,"errorMessage":null,"success":true}}
2025-11-21 20:57:46.640 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:46.640764500Z","nanoTime":31852655738300,"traceId":"3d333b1b","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:57:46.640 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:57:46.640 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구 여의대방로 130, latitude=37.568809, longitude=127.080134, geohashId=wydmez0)
2025-11-21 20:57:46.640 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 136.3005853862146
2025-11-21 20:57:46.642 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmez1
2025-11-21 20:57:46.643 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:57:46.643 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:46.643217800Z","nanoTime":31852657056600,"traceId":"3d333b1b","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1318300,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["음식점이(가) 31m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmez1","dataSize":17007,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17007,"errorMessage":null,"success":true}}
2025-11-21 20:57:46.643 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:57:47.180 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:57:47.180 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56555097165288, longitude=127.08663457835624, radius=500)
2025-11-21 20:57:47.180 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:57:47.180 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56555097165288, longitude=127.08663457835624, radius=500
2025-11-21 20:57:47.180 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:47.180145500Z","nanoTime":31853194266400,"traceId":"57cf6711","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:57:47.180 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:57:47.180 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56555097165288, lon=127.08663457835624
2025-11-21 20:57:47.180 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:47.180145500Z","nanoTime":31853194360100,"traceId":"57cf6711","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:57:47.180 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:47.180145500Z","nanoTime":31853194399200,"traceId":"57cf6711","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":39100,"duration_ms":0,"resultData":{"latitude":37.56555097165288,"longitude":127.08663457835624,"precision":7,"centerHash":"wydmeyt","adjacentHashes":["wydmeyt","wydmeyv","wydmeyy","wydmeyw","wydmeyq","wydmeym","wydmeyk","wydmeys","wydmeyu"],"errorMessage":null,"success":true}}
2025-11-21 20:57:47.180 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmeyt, wydmeyv, wydmeyy, wydmeyw, wydmeyq, wydmeym, wydmeyk, wydmeys, wydmeyu]
2025-11-21 20:57:47.180 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmeyt
2025-11-21 20:57:47.180 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:47.180145500Z","nanoTime":31853194576500,"traceId":"57cf6711","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":310100,"duration_ms":0,"resultData":{"requestLatitude":37.56555097165288,"requestLongitude":127.08663457835624,"requestRadius":500,"centerGeohashId":"wydmeyt","nineBlockGeohashes":["wydmeyt","wydmeyv","wydmeyy","wydmeyw","wydmeyq","wydmeym","wydmeyk","wydmeys","wydmeyu"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:57:47.180 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:47.180145500Z","nanoTime":31853194649100,"traceId":"57cf6711","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:57:47.180 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:57:47.180 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmeyt
2025-11-21 20:57:47.181 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4534ms)
2025-11-21 20:57:47.181 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:57:47.182 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:57:47.182 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:57:47.182 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.6165ms, 역직렬화: 0.0ms
2025-11-21 20:57:47.182 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:57:47.182 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:47.182015900Z","nanoTime":31853196962600,"traceId":"57cf6711","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2313500,"duration_ms":2,"resultData":{"centerGeohashId":"wydmeyt","nineBlockGeohashes":["wydmeyt","wydmeyv","wydmeyy","wydmeyw","wydmeyq","wydmeym","wydmeyk","wydmeys","wydmeyu"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmeyt","hit":false,"valueSize":0,"l1CacheGetDurationNs":453400,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmeyt","cacheKey":"data:wydmeyt:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":327300},{"geohashId":"wydmeyv","cacheKey":"data:wydmeyv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":278700},{"geohashId":"wydmeyy","cacheKey":"data:wydmeyy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":212900},{"geohashId":"wydmeyw","cacheKey":"data:wydmeyw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":204500},{"geohashId":"wydmeyq","cacheKey":"data:wydmeyq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":137200},{"geohashId":"wydmeym","cacheKey":"data:wydmeym:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":110900},{"geohashId":"wydmeyk","cacheKey":"data:wydmeyk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":98600},{"geohashId":"wydmeys","cacheKey":"data:wydmeys:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":93200},{"geohashId":"wydmeyu","cacheKey":"data:wydmeyu:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":91600}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1616500,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:57:47.182 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:47.182015900Z","nanoTime":31853197081100,"traceId":"57cf6711","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:57:47.182 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:57:47.182 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:57:47.186 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 18건
2025-11-21 20:57:47.188 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:57:47.188 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 20:57:47.188 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:47.188169600Z","nanoTime":31853202303800,"traceId":"57cf6711","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5222700,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydmeyt","wydmeyv","wydmeyy","wydmeyw","wydmeyq","wydmeym","wydmeyk","wydmeys","wydmeyu"],"cctvQueryResult":{"queryGeohashIds":["wydmeyt","wydmeyv","wydmeyy","wydmeyw","wydmeyq","wydmeym","wydmeyk","wydmeys","wydmeyu"],"totalRowsReturned":18,"rowsPerGrid":{"wydmeys":2,"wydmeyt":3,"wydmeyu":3,"wydmeyv":1,"wydmeyq":1,"wydmeyk":1,"wydmeym":1,"wydmeyw":2,"wydmeyy":4},"queryExecutionTimeNs":3011900,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmeys","cacheKey":"data:wydmeys:cctv","dataCount":2,"dataSize":199,"errorMessage":null,"success":true},{"geohashId":"wydmeyt","cacheKey":"data:wydmeyt:cctv","dataCount":3,"dataSize":298,"errorMessage":null,"success":true},{"geohashId":"wydmeyu","cacheKey":"data:wydmeyu:cctv","dataCount":3,"dataSize":300,"errorMessage":null,"success":true},{"geohashId":"wydmeyv","cacheKey":"data:wydmeyv:cctv","dataCount":1,"dataSize":100,"errorMessage":null,"success":true},{"geohashId":"wydmeyq","cacheKey":"data:wydmeyq:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmeyk","cacheKey":"data:wydmeyk:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmeym","cacheKey":"data:wydmeym:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmeyw","cacheKey":"data:wydmeyw:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydmeyy","cacheKey":"data:wydmeyy:cctv","dataCount":4,"dataSize":401,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:57:47.188 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:47.188169600Z","nanoTime":31853202460800,"traceId":"57cf6711","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:57:47.188 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:57:47.188 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56555097165288, 127.08663457835624)
2025-11-21 20:57:47.188 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:57:47.297 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:57:47.297 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:57:47.297 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:57:47.297 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56555097165288, 127.08663457835624), 반경: 500m
2025-11-21 20:57:47.375 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:57:47.375 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 120건
2025-11-21 20:57:47.377 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:57:47.377 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:57:47.377 [http-nio-8185-exec-1] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 20:57:47.377 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:57:47.377 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:57:47.377 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:57:47.377 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 20:57:47.377 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:47.377662Z","nanoTime":31853391869700,"traceId":"57cf6711","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":189408900,"duration_ms":189,"resultData":{"latitude":37.56555097165288,"longitude":127.08663457835624,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":189253000,"addressApiResult":{"cached":false,"cacheKey":"address:37.56555097165288:127.08663457835624","roadAddress":"주소 없음","jibunAddress":"서울 광진구 중곡동 266-1","responseSize":59,"executionTimeNs":108958000,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":59100,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56555097165288:127.08663457835624:500","categoryCount":15,"placesByCategory":{"CT1":2,"AT4":0,"CS2":15,"SC4":7,"MT1":0,"BK9":11,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":10,"OL7":1,"PM9":10},"totalPlaces":120,"responseSize":13834,"executionTimeNs":80235900,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:47.377 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:47.377662Z","nanoTime":31853392182000,"traceId":"57cf6711","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:57:47.377 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:57:47.377 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:57:47.377 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 18개
2025-11-21 20:57:47.377 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 18개 (총 카메라 대수: 18대)
2025-11-21 20:57:47.377 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:57:47.454 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 광진구 아차산로 567 (거리: 60m)
2025-11-21 20:57:47.454 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:57:47.454 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:57:47.454 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 20:57:47.454 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:57:47.454 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:47.454075800Z","nanoTime":31853469499200,"traceId":"57cf6711","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":77317200,"duration_ms":77,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":18,"totalCctvAfterFilter":18,"totalCameraCount":18,"filterRate":1.0,"filterExecutionTimeNs":11900,"success":true},"policeQuery":{"queryDurationNs":76852800,"found":true,"nearestAddress":"서울특별시 광진구 아차산로 567","nearestDistance":59.643898270188544,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":2,"CS2":15,"SC4":7,"BK9":11,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":10,"OL7":1,"PM9":10},"placesAfterFilter":{"CT1":2,"CS2":14,"SC4":7,"BK9":11,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":10,"OL7":1,"PM9":10},"totalBeforeFilter":120,"totalAfterFilter":119,"filterRate":0.9916666666666667,"filterExecutionTimeNs":79500,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:47.456 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:47.456066600Z","nanoTime":31853469832200,"traceId":"57cf6711","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:57:47.456 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:57:47.456 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 51.76, 편의성: 35.73, 종합: 43.75
2025-11-21 20:57:47.456 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:47.456066600Z","nanoTime":31853470150300,"traceId":"57cf6711","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":318100,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":92.54451271622644,"policeDistance":59.643898270188544,"cctvScore":60.0,"cctvCount":18,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":51.763353814867926,"success":true},"convenienceScore":{"categoryScores":{"CT1":8.0,"CS2":3.5,"SC4":14.0,"BK9":55.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":30.0,"OL7":5.0,"PM9":80.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":35.73076923076923,"success":true},"overallScore":43.74706152281858,"errorMessage":null,"success":true}}
2025-11-21 20:57:47.456 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:47.456438400Z","nanoTime":31853470339900,"traceId":"57cf6711","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:57:47.456 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:57:47.456 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 광진구 아차산로 567, latitude=37.565354, longitude=127.087264, geohashId=wydmeyw)
2025-11-21 20:57:47.456 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 59.643898270188544
2025-11-21 20:57:47.458 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmeyt
2025-11-21 20:57:47.458 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:57:47.458 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:47.458452400Z","nanoTime":31853472736400,"traceId":"57cf6711","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":2396500,"duration_ms":2,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["공공기관이(가) 64m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmeyt","dataSize":15931,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":15931,"errorMessage":null,"success":true}}
2025-11-21 20:57:47.458 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:57:47.734 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:57:47.734 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56093790831284, longitude=127.08658396396687, radius=500)
2025-11-21 20:57:47.734 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:57:47.734 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56093790831284, longitude=127.08658396396687, radius=500
2025-11-21 20:57:47.734 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:47.734829400Z","nanoTime":31853748971600,"traceId":"f760fecf","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:57:47.734 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:57:47.734 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56093790831284, lon=127.08658396396687
2025-11-21 20:57:47.734 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:47.734829400Z","nanoTime":31853749057800,"traceId":"f760fecf","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:57:47.734 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:47.734829400Z","nanoTime":31853749104800,"traceId":"f760fecf","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":47000,"duration_ms":0,"resultData":{"latitude":37.56093790831284,"longitude":127.08658396396687,"precision":7,"centerHash":"wydmevv","adjacentHashes":["wydmevv","wydmeyj","wydmeyn","wydmevy","wydmevw","wydmevt","wydmevs","wydmevu","wydmeyh"],"errorMessage":null,"success":true}}
2025-11-21 20:57:47.734 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmevv, wydmeyj, wydmeyn, wydmevy, wydmevw, wydmevt, wydmevs, wydmevu, wydmeyh]
2025-11-21 20:57:47.734 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmevv
2025-11-21 20:57:47.734 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:47.734829400Z","nanoTime":31853749250400,"traceId":"f760fecf","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":278800,"duration_ms":0,"resultData":{"requestLatitude":37.56093790831284,"requestLongitude":127.08658396396687,"requestRadius":500,"centerGeohashId":"wydmevv","nineBlockGeohashes":["wydmevv","wydmeyj","wydmeyn","wydmevy","wydmevw","wydmevt","wydmevs","wydmevu","wydmeyh"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:57:47.734 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:47.734829400Z","nanoTime":31853749308500,"traceId":"f760fecf","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:57:47.734 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:57:47.734 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmevv
2025-11-21 20:57:47.735 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5234ms)
2025-11-21 20:57:47.735 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:57:47.737 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:57:47.737 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:57:47.737 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.7285ms, 역직렬화: 0.0ms
2025-11-21 20:57:47.737 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:57:47.737 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:47.737810600Z","nanoTime":31853751935300,"traceId":"f760fecf","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2626800,"duration_ms":2,"resultData":{"centerGeohashId":"wydmevv","nineBlockGeohashes":["wydmevv","wydmeyj","wydmeyn","wydmevy","wydmevw","wydmevt","wydmevs","wydmevu","wydmeyh"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmevv","hit":false,"valueSize":0,"l1CacheGetDurationNs":523400,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmevv","cacheKey":"data:wydmevv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":372100},{"geohashId":"wydmeyj","cacheKey":"data:wydmeyj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":194400},{"geohashId":"wydmeyn","cacheKey":"data:wydmeyn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":197300},{"geohashId":"wydmevy","cacheKey":"data:wydmevy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":160100},{"geohashId":"wydmevw","cacheKey":"data:wydmevw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":121100},{"geohashId":"wydmevt","cacheKey":"data:wydmevt:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":99900},{"geohashId":"wydmevs","cacheKey":"data:wydmevs:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":223800},{"geohashId":"wydmevu","cacheKey":"data:wydmevu:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":137900},{"geohashId":"wydmeyh","cacheKey":"data:wydmeyh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":133000}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1728500,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:57:47.737 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:47.737810600Z","nanoTime":31853752162300,"traceId":"f760fecf","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:57:47.737 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:57:47.737 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:57:47.740 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 16건
2025-11-21 20:57:47.742 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:57:47.742 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 20:57:47.742 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:47.742188900Z","nanoTime":31853756770500,"traceId":"f760fecf","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4608200,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmevv","wydmeyj","wydmeyn","wydmevy","wydmevw","wydmevt","wydmevs","wydmevu","wydmeyh"],"cctvQueryResult":{"queryGeohashIds":["wydmevv","wydmeyj","wydmeyn","wydmevy","wydmevw","wydmevt","wydmevs","wydmevu","wydmeyh"],"totalRowsReturned":16,"rowsPerGrid":{"wydmevs":2,"wydmeyn":2,"wydmevt":1,"wydmevu":2,"wydmeyh":2,"wydmevv":4,"wydmevw":1,"wydmeyj":2},"queryExecutionTimeNs":2451200,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmevs","cacheKey":"data:wydmevs:cctv","dataCount":2,"dataSize":200,"errorMessage":null,"success":true},{"geohashId":"wydmeyn","cacheKey":"data:wydmeyn:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydmevt","cacheKey":"data:wydmevt:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmevu","cacheKey":"data:wydmevu:cctv","dataCount":2,"dataSize":200,"errorMessage":null,"success":true},{"geohashId":"wydmeyh","cacheKey":"data:wydmeyh:cctv","dataCount":2,"dataSize":197,"errorMessage":null,"success":true},{"geohashId":"wydmevv","cacheKey":"data:wydmevv:cctv","dataCount":4,"dataSize":398,"errorMessage":null,"success":true},{"geohashId":"wydmevw","cacheKey":"data:wydmevw:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmeyj","cacheKey":"data:wydmeyj:cctv","dataCount":2,"dataSize":200,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:57:47.742 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:47.742188900Z","nanoTime":31853756908400,"traceId":"f760fecf","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:57:47.742 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:57:47.743 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56093790831284, 127.08658396396687)
2025-11-21 20:57:47.743 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:57:47.831 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:57:47.831 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:57:47.831 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:57:47.831 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56093790831284, 127.08658396396687), 반경: 500m
2025-11-21 20:57:48.021 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:57:48.021 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 119건
2025-11-21 20:57:48.023 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:57:48.023 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:57:48.023 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 광진구
2025-11-21 20:57:48.024 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 광진구
2025-11-21 20:57:48.024 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:57:48.024 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:57:48.024 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:57:48.025 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.672940923
2025-11-21 20:57:48.025 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:48.025082100Z","nanoTime":31854038860600,"traceId":"f760fecf","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":281952200,"duration_ms":281,"resultData":{"latitude":37.56093790831284,"longitude":127.08658396396687,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":281816000,"addressApiResult":{"cached":false,"cacheKey":"address:37.56093790831284:127.08658396396687","roadAddress":"서울특별시 광진구 긴고랑로29길 23","jibunAddress":"서울 광진구 중곡동 149-5","responseSize":74,"executionTimeNs":89464500,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:광진구","guName":"광진구","arrestRate":0.672940923,"dataFound":true,"executionTimeNs":494000,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56093790831284:127.08658396396687:500","categoryCount":15,"placesByCategory":{"CT1":2,"AT4":1,"CS2":15,"SC4":5,"MT1":0,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":0,"PO3":5,"FD6":15,"PK6":10,"OL7":2,"PM9":5},"totalPlaces":119,"responseSize":13720,"executionTimeNs":191857500,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:48.025 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:48.025082100Z","nanoTime":31854039018100,"traceId":"f760fecf","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:57:48.025 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:57:48.025 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:57:48.025 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 16개
2025-11-21 20:57:48.025 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 16개 (총 카메라 대수: 16대)
2025-11-21 20:57:48.025 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:57:48.094 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구 노량진로 248 (거리: 455m)
2025-11-21 20:57:48.094 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:57:48.094 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:57:48.094 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 20:57:48.094 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:57:48.094 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:48.094597900Z","nanoTime":31854109186300,"traceId":"f760fecf","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":70168200,"duration_ms":70,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":16,"totalCctvAfterFilter":16,"totalCameraCount":16,"filterRate":1.0,"filterExecutionTimeNs":7400,"success":true},"policeQuery":{"queryDurationNs":69793800,"found":true,"nearestAddress":"서울특별시 동작구 노량진로 248","nearestDistance":455.3192064205915,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":2,"AT4":1,"CS2":15,"SC4":5,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"PO3":5,"FD6":15,"PK6":10,"OL7":2,"PM9":5},"placesAfterFilter":{"CT1":2,"AT4":1,"CS2":15,"SC4":5,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"PO3":5,"FD6":15,"PK6":10,"OL7":2,"PM9":5},"totalBeforeFilter":119,"totalAfterFilter":119,"filterRate":1.0,"filterExecutionTimeNs":70600,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:48.095 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:48.095591800Z","nanoTime":31854109352600,"traceId":"f760fecf","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:57:48.095 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:57:48.095 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 54.45, 편의성: 26.95, 종합: 40.70
2025-11-21 20:57:48.095 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:48.095591800Z","nanoTime":31854109533100,"traceId":"f760fecf","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":180500,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":43.08509919742606,"policeDistance":455.3192064205915,"cctvScore":53.333333333333336,"cctvCount":16,"arrestRateScore":67.2940923,"arrestRate":0.672940923,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":54.44709078256116,"success":true},"convenienceScore":{"categoryScores":{"CT1":8.0,"AT4":3.0,"CS2":4.339624824968466,"SC4":10.0,"BK9":70.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"PO3":15.0,"FD6":15.0,"PK6":30.0,"OL7":10.0,"PM9":40.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"광진구","guPopulation":345652,"finalScore":26.94920190961296,"success":true},"overallScore":40.69814634608706,"errorMessage":null,"success":true}}
2025-11-21 20:57:48.095 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:48.095591800Z","nanoTime":31854109628400,"traceId":"f760fecf","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:57:48.095 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:57:48.095 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구 노량진로 248, latitude=37.563716, longitude=127.082789, geohashId=wydmey6)
2025-11-21 20:57:48.095 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 455.3192064205915
2025-11-21 20:57:48.096 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmevv
2025-11-21 20:57:48.096 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:57:48.096 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:48.096591700Z","nanoTime":31854110643300,"traceId":"f760fecf","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1014900,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["음식점이(가) 67m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmevv","dataSize":15765,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":15765,"errorMessage":null,"success":true}}
2025-11-21 20:57:48.096 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:57:48.502 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:57:48.502 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55901443899038, longitude=127.0799721007774, radius=500)
2025-11-21 20:57:48.502 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:57:48.502 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55901443899038, longitude=127.0799721007774, radius=500
2025-11-21 20:57:48.502 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:48.502194300Z","nanoTime":31854516781200,"traceId":"b39e97fc","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:57:48.502 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:57:48.502 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55901443899038, lon=127.0799721007774
2025-11-21 20:57:48.502 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:48.502194300Z","nanoTime":31854516853300,"traceId":"b39e97fc","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:57:48.502 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:48.502194300Z","nanoTime":31854516894800,"traceId":"b39e97fc","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":41500,"duration_ms":0,"resultData":{"latitude":37.55901443899038,"longitude":127.0799721007774,"precision":7,"centerHash":"wydmev2","adjacentHashes":["wydmev2","wydmev8","wydmev9","wydmev3","wydmev1","wydmev0","wydmetp","wydmetr","wydmetx"],"errorMessage":null,"success":true}}
2025-11-21 20:57:48.503 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmev2, wydmev8, wydmev9, wydmev3, wydmev1, wydmev0, wydmetp, wydmetr, wydmetx]
2025-11-21 20:57:48.503 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmev2
2025-11-21 20:57:48.503 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:48.503193100Z","nanoTime":31854517009700,"traceId":"b39e97fc","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":228500,"duration_ms":0,"resultData":{"requestLatitude":37.55901443899038,"requestLongitude":127.0799721007774,"requestRadius":500,"centerGeohashId":"wydmev2","nineBlockGeohashes":["wydmev2","wydmev8","wydmev9","wydmev3","wydmev1","wydmev0","wydmetp","wydmetr","wydmetx"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:57:48.503 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:48.503193100Z","nanoTime":31854517064300,"traceId":"b39e97fc","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:57:48.503 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:57:48.503 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmev2
2025-11-21 20:57:48.503 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3543ms)
2025-11-21 20:57:48.503 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:57:48.505 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:57:48.505 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 6개, 미스: 3개
2025-11-21 20:57:48.505 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.9606ms, 역직렬화: 0.1424ms
2025-11-21 20:57:48.505 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:57:48.505 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:48.505190Z","nanoTime":31854519637500,"traceId":"b39e97fc","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2573200,"duration_ms":2,"resultData":{"centerGeohashId":"wydmev2","nineBlockGeohashes":["wydmev2","wydmev8","wydmev9","wydmev3","wydmev1","wydmev0","wydmetp","wydmetr","wydmetx"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmev2","hit":false,"valueSize":0,"l1CacheGetDurationNs":354300,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmev2","cacheKey":"data:wydmev2:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":101,"l2CacheGetDurationNs":244500},{"geohashId":"wydmev8","cacheKey":"data:wydmev8:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":101,"l2CacheGetDurationNs":272800},{"geohashId":"wydmev9","cacheKey":"data:wydmev9:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":101,"l2CacheGetDurationNs":308000},{"geohashId":"wydmev3","cacheKey":"data:wydmev3:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":101,"l2CacheGetDurationNs":312500},{"geohashId":"wydmev1","cacheKey":"data:wydmev1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":92000},{"geohashId":"wydmev0","cacheKey":"data:wydmev0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":102800},{"geohashId":"wydmetp","cacheKey":"data:wydmetp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":78500},{"geohashId":"wydmetr","cacheKey":"data:wydmetr:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":101,"l2CacheGetDurationNs":173000},{"geohashId":"wydmetx","cacheKey":"data:wydmetx:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":101,"l2CacheGetDurationNs":164200}],"l2TotalHits":6,"l2TotalMisses":3,"l2CacheTotalDurationNs":1960600,"l2JsonDeserializeTotalDurationNs":142400,"errorMessage":null,"success":true}}
2025-11-21 20:57:48.505 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:48.505190Z","nanoTime":31854519801700,"traceId":"b39e97fc","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:57:48.505 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:57:48.505 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 3개
2025-11-21 20:57:48.508 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 4건
2025-11-21 20:57:48.508 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:57:48.508 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 20:57:48.508 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:48.508869Z","nanoTime":31854523478200,"traceId":"b39e97fc","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":3676500,"duration_ms":3,"resultData":{"inputCctvMissGrids":["wydmev1","wydmev0","wydmetp"],"cctvQueryResult":{"queryGeohashIds":["wydmev1","wydmev0","wydmetp"],"totalRowsReturned":4,"rowsPerGrid":{"wydmev0":1,"wydmev1":2,"wydmetp":1},"queryExecutionTimeNs":2801300,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmev0","cacheKey":"data:wydmev0:cctv","dataCount":1,"dataSize":100,"errorMessage":null,"success":true},{"geohashId":"wydmev1","cacheKey":"data:wydmev1:cctv","dataCount":2,"dataSize":200,"errorMessage":null,"success":true},{"geohashId":"wydmetp","cacheKey":"data:wydmetp:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:57:48.508 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:48.508869Z","nanoTime":31854523577400,"traceId":"b39e97fc","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:57:48.508 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:57:48.508 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.55901443899038, 127.0799721007774)
2025-11-21 20:57:48.509 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:57:48.587 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:57:48.587 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:57:48.587 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:57:48.587 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.55901443899038, 127.0799721007774), 반경: 500m
2025-11-21 20:57:48.670 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:57:48.670 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 136건
2025-11-21 20:57:48.670 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:57:48.671 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:57:48.671 [http-nio-8185-exec-2] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 20:57:48.671 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:57:48.671 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:57:48.671 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:57:48.671 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 20:57:48.671 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:48.671355Z","nanoTime":31854685272500,"traceId":"b39e97fc","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":161695100,"duration_ms":161,"resultData":{"latitude":37.55901443899038,"longitude":127.0799721007774,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":161584100,"addressApiResult":{"cached":false,"cacheKey":"address:37.55901443899038:127.0799721007774","roadAddress":"주소 없음","jibunAddress":"서울 광진구 중곡동 647-8","responseSize":59,"executionTimeNs":79250000,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":60000,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.55901443899038:127.0799721007774:500","categoryCount":15,"placesByCategory":{"CT1":4,"AT4":2,"CS2":15,"SC4":1,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":3,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalPlaces":136,"responseSize":15736,"executionTimeNs":82274100,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:48.671 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:48.671355Z","nanoTime":31854685414200,"traceId":"b39e97fc","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:57:48.671 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:57:48.671 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:57:48.671 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 10개
2025-11-21 20:57:48.671 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 10개 (총 카메라 대수: 10대)
2025-11-21 20:57:48.671 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:57:48.744 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구 신대방1다길 24 (거리: 183m)
2025-11-21 20:57:48.744 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:57:48.744 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:57:48.744 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 20:57:48.744 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:57:48.744 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:48.744801700Z","nanoTime":31854759509000,"traceId":"b39e97fc","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":74094800,"duration_ms":74,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":10,"totalCctvAfterFilter":10,"totalCameraCount":10,"filterRate":1.0,"filterExecutionTimeNs":6100,"success":true},"policeQuery":{"queryDurationNs":73659400,"found":true,"nearestAddress":"서울특별시 동작구 신대방1다길 24","nearestDistance":182.96135617650094,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":4,"AT4":2,"CS2":15,"SC4":1,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":3,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"placesAfterFilter":{"CT1":4,"AT4":2,"CS2":15,"SC4":1,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":3,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalBeforeFilter":136,"totalAfterFilter":136,"filterRate":1.0,"filterExecutionTimeNs":91000,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:48.744 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:48.744801700Z","nanoTime":31854759742200,"traceId":"b39e97fc","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:57:48.744 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:57:48.744 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 36.47, 편의성: 36.78, 종합: 36.63
2025-11-21 20:57:48.744 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:48.744801700Z","nanoTime":31854759946700,"traceId":"b39e97fc","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":204500,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":77.12983047793739,"policeDistance":182.96135617650094,"cctvScore":33.33333333333333,"cctvCount":10,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":36.47228247671455,"success":true},"convenienceScore":{"categoryScores":{"CT1":16.0,"AT4":6.0,"CS2":3.75,"SC4":2.0,"MT1":30.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":36.78333333333333,"success":true},"overallScore":36.62780790502394,"errorMessage":null,"success":true}}
2025-11-21 20:57:48.744 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:48.744801700Z","nanoTime":31854760066500,"traceId":"b39e97fc","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:57:48.744 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:57:48.744 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구 신대방1다길 24, latitude=37.560151, longitude=127.081473, geohashId=wydmev9)
2025-11-21 20:57:48.744 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 182.96135617650094
2025-11-21 20:57:48.746 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmev2
2025-11-21 20:57:48.747 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:57:48.747 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:48.747477600Z","nanoTime":31854761346300,"traceId":"b39e97fc","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1279800,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["카페이(가) 46m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmev2","dataSize":17626,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17626,"errorMessage":null,"success":true}}
2025-11-21 20:57:48.747 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:57:49.098 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:57:49.098 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5558943384632, longitude=127.08379404770992, radius=500)
2025-11-21 20:57:49.098 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:57:49.098 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5558943384632, longitude=127.08379404770992, radius=500
2025-11-21 20:57:49.098 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.098791200Z","nanoTime":31855112689900,"traceId":"734e478e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:57:49.098 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:57:49.098 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5558943384632, lon=127.08379404770992
2025-11-21 20:57:49.098 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.098791200Z","nanoTime":31855112771400,"traceId":"734e478e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:57:49.098 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.098791200Z","nanoTime":31855112816500,"traceId":"734e478e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":45100,"duration_ms":0,"resultData":{"latitude":37.5558943384632,"longitude":127.08379404770992,"precision":7,"centerHash":"wydmeug","adjacentHashes":["wydmeug","wydmev5","wydmevh","wydmeuu","wydmeus","wydmeue","wydmeud","wydmeuf","wydmev4"],"errorMessage":null,"success":true}}
2025-11-21 20:57:49.098 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmeug, wydmev5, wydmevh, wydmeuu, wydmeus, wydmeue, wydmeud, wydmeuf, wydmev4]
2025-11-21 20:57:49.098 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmeug
2025-11-21 20:57:49.098 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.098791200Z","nanoTime":31855112939400,"traceId":"734e478e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":249500,"duration_ms":0,"resultData":{"requestLatitude":37.5558943384632,"requestLongitude":127.08379404770992,"requestRadius":500,"centerGeohashId":"wydmeug","nineBlockGeohashes":["wydmeug","wydmev5","wydmevh","wydmeuu","wydmeus","wydmeue","wydmeud","wydmeuf","wydmev4"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:57:49.098 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.098791200Z","nanoTime":31855112987800,"traceId":"734e478e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:57:49.098 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:57:49.098 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmeug
2025-11-21 20:57:49.098 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3702ms)
2025-11-21 20:57:49.098 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:57:49.101 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:57:49.101 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 6개, 미스: 3개
2025-11-21 20:57:49.101 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.3067ms, 역직렬화: 0.172ms
2025-11-21 20:57:49.101 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:57:49.101 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.101885300Z","nanoTime":31855115915000,"traceId":"734e478e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2927200,"duration_ms":2,"resultData":{"centerGeohashId":"wydmeug","nineBlockGeohashes":["wydmeug","wydmev5","wydmevh","wydmeuu","wydmeus","wydmeue","wydmeud","wydmeuf","wydmev4"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmeug","hit":false,"valueSize":0,"l1CacheGetDurationNs":370200,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmeug","cacheKey":"data:wydmeug:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":199,"l2CacheGetDurationNs":542900},{"geohashId":"wydmev5","cacheKey":"data:wydmev5:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":233,"l2CacheGetDurationNs":346300},{"geohashId":"wydmevh","cacheKey":"data:wydmevh:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":100,"l2CacheGetDurationNs":258500},{"geohashId":"wydmeuu","cacheKey":"data:wydmeuu:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":301,"l2CacheGetDurationNs":246600},{"geohashId":"wydmeus","cacheKey":"data:wydmeus:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":200,"l2CacheGetDurationNs":172900},{"geohashId":"wydmeue","cacheKey":"data:wydmeue:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":74700},{"geohashId":"wydmeud","cacheKey":"data:wydmeud:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":138400},{"geohashId":"wydmeuf","cacheKey":"data:wydmeuf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":74800},{"geohashId":"wydmev4","cacheKey":"data:wydmev4:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":101,"l2CacheGetDurationNs":199700}],"l2TotalHits":6,"l2TotalMisses":3,"l2CacheTotalDurationNs":2306700,"l2JsonDeserializeTotalDurationNs":172000,"errorMessage":null,"success":true}}
2025-11-21 20:57:49.101 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.101885300Z","nanoTime":31855116127600,"traceId":"734e478e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:57:49.101 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:57:49.101 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 3개
2025-11-21 20:57:49.104 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 5건
2025-11-21 20:57:49.104 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:57:49.104 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 20:57:49.104 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.104643600Z","nanoTime":31855119268300,"traceId":"734e478e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":3140700,"duration_ms":3,"resultData":{"inputCctvMissGrids":["wydmeue","wydmeud","wydmeuf"],"cctvQueryResult":{"queryGeohashIds":["wydmeue","wydmeud","wydmeuf"],"totalRowsReturned":5,"rowsPerGrid":{"wydmeud":3,"wydmeue":2},"queryExecutionTimeNs":2140300,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmeud","cacheKey":"data:wydmeud:cctv","dataCount":3,"dataSize":300,"errorMessage":null,"success":true},{"geohashId":"wydmeue","cacheKey":"data:wydmeue:cctv","dataCount":2,"dataSize":199,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:57:49.104 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.104643600Z","nanoTime":31855119398100,"traceId":"734e478e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:57:49.104 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:57:49.104 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5558943384632, 127.08379404770992)
2025-11-21 20:57:49.104 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:57:49.176 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:57:49.176 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:57:49.176 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:57:49.176 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5558943384632, 127.08379404770992), 반경: 500m
2025-11-21 20:57:49.247 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:57:49.247 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 137건
2025-11-21 20:57:49.247 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:57:49.247 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:57:49.247 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 광진구
2025-11-21 20:57:49.253 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 광진구
2025-11-21 20:57:49.253 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:57:49.254 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:57:49.254 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:57:49.254 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.672940923
2025-11-21 20:57:49.254 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.254301400Z","nanoTime":31855268183100,"traceId":"734e478e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":148785000,"duration_ms":148,"resultData":{"latitude":37.5558943384632,"longitude":127.08379404770992,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":148562300,"addressApiResult":{"cached":false,"cacheKey":"address:37.5558943384632:127.08379404770992","roadAddress":"서울특별시 광진구 천호대로 591","jibunAddress":"서울 광진구 중곡동 132-21","responseSize":73,"executionTimeNs":71180400,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:광진구","guName":"광진구","arrestRate":0.672940923,"dataFound":true,"executionTimeNs":921300,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5558943384632:127.08379404770992:500","categoryCount":15,"placesByCategory":{"CT1":5,"AT4":3,"CS2":15,"SC4":1,"MT1":4,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":1,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalPlaces":137,"responseSize":15848,"executionTimeNs":76460600,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:49.254 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.254301400Z","nanoTime":31855268469300,"traceId":"734e478e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:57:49.254 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:57:49.254 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:57:49.254 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 16개
2025-11-21 20:57:49.254 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 16개 (총 카메라 대수: 16대)
2025-11-21 20:57:49.254 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:57:49.323 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구 신대방1다길 24 (거리: 516m)
2025-11-21 20:57:49.323 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:57:49.323 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:57:49.328 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 20:57:49.328 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:57:49.328 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.328316100Z","nanoTime":31855342153800,"traceId":"734e478e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":73684500,"duration_ms":73,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":16,"totalCctvAfterFilter":16,"totalCameraCount":16,"filterRate":1.0,"filterExecutionTimeNs":9600,"success":true},"policeQuery":{"queryDurationNs":72951300,"found":true,"nearestAddress":"서울특별시 동작구 신대방1다길 24","nearestDistance":515.6459034795321,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":5,"AT4":3,"CS2":15,"SC4":1,"MT1":4,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":1,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"placesAfterFilter":{"CT1":5,"AT4":3,"CS2":15,"SC4":1,"MT1":4,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":1,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalBeforeFilter":137,"totalAfterFilter":137,"filterRate":1.0,"filterExecutionTimeNs":121500,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:49.328 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.328316100Z","nanoTime":31855342355100,"traceId":"734e478e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:57:49.328 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:57:49.328 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 52.18, 편의성: 37.56, 종합: 44.87
2025-11-21 20:57:49.328 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.328316100Z","nanoTime":31855342589200,"traceId":"734e478e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":234100,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":35.54426206505849,"policeDistance":515.6459034795321,"cctvScore":53.333333333333336,"cctvCount":16,"arrestRateScore":67.2940923,"arrestRate":0.672940923,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":52.18483964285089,"success":true},"convenienceScore":{"categoryScores":{"CT1":20.0,"AT4":9.0,"CS2":4.339624824968466,"SC4":2.0,"MT1":40.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":3.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"광진구","guPopulation":345652,"finalScore":37.555974988331236,"success":true},"overallScore":44.870407315591066,"errorMessage":null,"success":true}}
2025-11-21 20:57:49.328 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.328316100Z","nanoTime":31855342701800,"traceId":"734e478e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:57:49.328 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:57:49.328 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구 신대방1다길 24, latitude=37.560151, longitude=127.081473, geohashId=wydmev9)
2025-11-21 20:57:49.328 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 515.6459034795321
2025-11-21 20:57:49.328 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmeug
2025-11-21 20:57:49.328 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:57:49.330 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.328316100Z","nanoTime":31855344091900,"traceId":"734e478e","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1390100,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["음식점이(가) 4m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmeug","dataSize":18002,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":18002,"errorMessage":null,"success":true}}
2025-11-21 20:57:49.330 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:57:49.694 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:57:49.694 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55256285617483, longitude=127.08062158659199, radius=500)
2025-11-21 20:57:49.694 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:57:49.694 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55256285617483, longitude=127.08062158659199, radius=500
2025-11-21 20:57:49.694 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.694701700Z","nanoTime":31855709067600,"traceId":"c77b64eb","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:57:49.694 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:57:49.694 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55256285617483, lon=127.08062158659199
2025-11-21 20:57:49.694 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.694701700Z","nanoTime":31855709160100,"traceId":"c77b64eb","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:57:49.694 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.694701700Z","nanoTime":31855709217200,"traceId":"c77b64eb","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":57100,"duration_ms":0,"resultData":{"latitude":37.55256285617483,"longitude":127.08062158659199,"precision":7,"centerHash":"wydmeu1","adjacentHashes":["wydmeu1","wydmeu3","wydmeu6","wydmeu4","wydmegf","wydmegc","wydmegb","wydmeu0","wydmeu2"],"errorMessage":null,"success":true}}
2025-11-21 20:57:49.694 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmeu1, wydmeu3, wydmeu6, wydmeu4, wydmegf, wydmegc, wydmegb, wydmeu0, wydmeu2]
2025-11-21 20:57:49.695 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmeu1
2025-11-21 20:57:49.695 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.695701900Z","nanoTime":31855709613800,"traceId":"c77b64eb","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":546200,"duration_ms":0,"resultData":{"requestLatitude":37.55256285617483,"requestLongitude":127.08062158659199,"requestRadius":500,"centerGeohashId":"wydmeu1","nineBlockGeohashes":["wydmeu1","wydmeu3","wydmeu6","wydmeu4","wydmegf","wydmegc","wydmegb","wydmeu0","wydmeu2"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:57:49.695 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.695701900Z","nanoTime":31855709780700,"traceId":"c77b64eb","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:57:49.695 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:57:49.695 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmeu1
2025-11-21 20:57:49.695 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3411ms)
2025-11-21 20:57:49.695 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:57:49.697 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:57:49.697 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:57:49.697 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.2481ms, 역직렬화: 0.0ms
2025-11-21 20:57:49.697 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:57:49.697 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.697719300Z","nanoTime":31855711599600,"traceId":"c77b64eb","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1818900,"duration_ms":1,"resultData":{"centerGeohashId":"wydmeu1","nineBlockGeohashes":["wydmeu1","wydmeu3","wydmeu6","wydmeu4","wydmegf","wydmegc","wydmegb","wydmeu0","wydmeu2"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmeu1","hit":false,"valueSize":0,"l1CacheGetDurationNs":341100,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmeu1","cacheKey":"data:wydmeu1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":151600},{"geohashId":"wydmeu3","cacheKey":"data:wydmeu3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":118600},{"geohashId":"wydmeu6","cacheKey":"data:wydmeu6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":134300},{"geohashId":"wydmeu4","cacheKey":"data:wydmeu4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":141400},{"geohashId":"wydmegf","cacheKey":"data:wydmegf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":115400},{"geohashId":"wydmegc","cacheKey":"data:wydmegc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":112600},{"geohashId":"wydmegb","cacheKey":"data:wydmegb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":122500},{"geohashId":"wydmeu0","cacheKey":"data:wydmeu0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":133900},{"geohashId":"wydmeu2","cacheKey":"data:wydmeu2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":145000}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1248100,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:57:49.697 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.697719300Z","nanoTime":31855711820300,"traceId":"c77b64eb","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:57:49.697 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:57:49.697 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:57:49.699 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 15건
2025-11-21 20:57:49.701 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:57:49.701 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 5개
2025-11-21 20:57:49.701 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.701098400Z","nanoTime":31855715556400,"traceId":"c77b64eb","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":3736100,"duration_ms":3,"resultData":{"inputCctvMissGrids":["wydmeu1","wydmeu3","wydmeu6","wydmeu4","wydmegf","wydmegc","wydmegb","wydmeu0","wydmeu2"],"cctvQueryResult":{"queryGeohashIds":["wydmeu1","wydmeu3","wydmeu6","wydmeu4","wydmegf","wydmegc","wydmegb","wydmeu0","wydmeu2"],"totalRowsReturned":15,"rowsPerGrid":{"wydmeu0":2,"wydmeu2":5,"wydmeu3":3,"wydmeu4":1,"wydmeu6":4},"queryExecutionTimeNs":2377100,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmeu0","cacheKey":"data:wydmeu0:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydmeu2","cacheKey":"data:wydmeu2:cctv","dataCount":5,"dataSize":500,"errorMessage":null,"success":true},{"geohashId":"wydmeu3","cacheKey":"data:wydmeu3:cctv","dataCount":3,"dataSize":299,"errorMessage":null,"success":true},{"geohashId":"wydmeu4","cacheKey":"data:wydmeu4:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmeu6","cacheKey":"data:wydmeu6:cctv","dataCount":4,"dataSize":400,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:57:49.701 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.701098400Z","nanoTime":31855715683500,"traceId":"c77b64eb","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:57:49.701 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:57:49.701 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.55256285617483, 127.08062158659199)
2025-11-21 20:57:49.702 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:57:49.801 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:57:49.801 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:57:49.801 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:57:49.801 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.55256285617483, 127.08062158659199), 반경: 500m
2025-11-21 20:57:49.902 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:57:49.902 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 128건
2025-11-21 20:57:49.902 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:57:49.902 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:57:49.902 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 광진구
2025-11-21 20:57:49.904 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 광진구
2025-11-21 20:57:49.904 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:57:49.904 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:57:49.904 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:57:49.904 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.672940923
2025-11-21 20:57:49.904 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.904795400Z","nanoTime":31855919042000,"traceId":"c77b64eb","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":203358500,"duration_ms":203,"resultData":{"latitude":37.55256285617483,"longitude":127.08062158659199,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":203229700,"addressApiResult":{"cached":false,"cacheKey":"address:37.55256285617483:127.08062158659199","roadAddress":"서울특별시 광진구 능동로 216","jibunAddress":"서울 광진구 능동 18","responseSize":67,"executionTimeNs":100076800,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:광진구","guName":"광진구","arrestRate":0.672940923,"dataFound":true,"executionTimeNs":671800,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.55256285617483:127.08062158659199:500","categoryCount":15,"placesByCategory":{"CT1":10,"AT4":5,"CS2":15,"SC4":0,"MT1":2,"BK9":7,"HP8":15,"AC5":15,"CE7":15,"SW8":0,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":11},"totalPlaces":128,"responseSize":14844,"executionTimeNs":102481100,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:49.904 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.904795400Z","nanoTime":31855919244700,"traceId":"c77b64eb","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:57:49.904 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:57:49.904 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:57:49.904 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 15개
2025-11-21 20:57:49.904 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 15개 (총 카메라 대수: 15대)
2025-11-21 20:57:49.904 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:57:49.973 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구 신대방1다길 24 (거리: 847m)
2025-11-21 20:57:49.973 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:57:49.973 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:57:49.973 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 20:57:49.973 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:57:49.975 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.973736900Z","nanoTime":31855988728000,"traceId":"c77b64eb","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":69483300,"duration_ms":69,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":15,"totalCctvAfterFilter":15,"totalCameraCount":15,"filterRate":1.0,"filterExecutionTimeNs":6800,"success":true},"policeQuery":{"queryDurationNs":69028900,"found":true,"nearestAddress":"서울특별시 동작구 신대방1다길 24","nearestDistance":847.0944513853492,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":10,"AT4":5,"CS2":15,"MT1":2,"BK9":7,"HP8":15,"AC5":15,"CE7":15,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":11},"placesAfterFilter":{"CT1":10,"AT4":5,"CS2":15,"MT1":2,"BK9":7,"HP8":15,"AC5":15,"CE7":15,"PO3":2,"FD6":15,"PK6":14,"OL7":1,"PM9":11},"totalBeforeFilter":128,"totalAfterFilter":127,"filterRate":0.9921875,"filterExecutionTimeNs":73200,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:49.975 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.975092600Z","nanoTime":31855988896000,"traceId":"c77b64eb","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:57:49.975 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:57:49.975 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 40.19, 편의성: 31.95, 종합: 36.07
2025-11-21 20:57:49.975 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.975092600Z","nanoTime":31855989074000,"traceId":"c77b64eb","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":178000,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":0.0,"policeDistance":847.0944513853492,"cctvScore":50.0,"cctvCount":15,"arrestRateScore":67.2940923,"arrestRate":0.672940923,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":40.188227690000005,"success":true},"convenienceScore":{"categoryScores":{"CT1":40.0,"AT4":15.0,"CS2":4.339624824968466,"MT1":20.0,"BK9":35.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"PO3":6.0,"FD6":15.0,"PK6":42.0,"OL7":5.0,"PM9":88.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"광진구","guPopulation":345652,"finalScore":31.94920190961296,"success":true},"overallScore":36.068714799806486,"errorMessage":null,"success":true}}
2025-11-21 20:57:49.975 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.975092600Z","nanoTime":31855989247500,"traceId":"c77b64eb","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:57:49.975 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:57:49.975 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구 신대방1다길 24, latitude=37.560151, longitude=127.081473, geohashId=wydmev9)
2025-11-21 20:57:49.975 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 847.0944513853492
2025-11-21 20:57:49.976 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmeu1
2025-11-21 20:57:49.976 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:57:49.976 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:49.976428700Z","nanoTime":31855990504000,"traceId":"c77b64eb","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1256500,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["학원이(가) 70m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmeu1","dataSize":16721,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":16721,"errorMessage":null,"success":true}}
2025-11-21 20:57:49.976 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:57:50.169 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:57:50.169 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.551576622674894, longitude=127.07315147060551, radius=500)
2025-11-21 20:57:50.169 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:57:50.169 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.551576622674894, longitude=127.07315147060551, radius=500
2025-11-21 20:57:50.169 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.169464500Z","nanoTime":31856184056000,"traceId":"05fe9fd6","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:57:50.169 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:57:50.169 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.551576622674894, lon=127.07315147060551
2025-11-21 20:57:50.170 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.169464500Z","nanoTime":31856184139500,"traceId":"05fe9fd6","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:57:50.170 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.170396Z","nanoTime":31856184193400,"traceId":"05fe9fd6","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":53900,"duration_ms":0,"resultData":{"latitude":37.551576622674894,"longitude":127.07315147060551,"precision":7,"centerHash":"wydmes5","adjacentHashes":["wydmes5","wydmes7","wydmesk","wydmesh","wydmeeu","wydmeeg","wydmeef","wydmes4","wydmes6"],"errorMessage":null,"success":true}}
2025-11-21 20:57:50.170 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmes5, wydmes7, wydmesk, wydmesh, wydmeeu, wydmeeg, wydmeef, wydmes4, wydmes6]
2025-11-21 20:57:50.170 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmes5
2025-11-21 20:57:50.170 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.170396Z","nanoTime":31856184349700,"traceId":"05fe9fd6","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":293700,"duration_ms":0,"resultData":{"requestLatitude":37.551576622674894,"requestLongitude":127.07315147060551,"requestRadius":500,"centerGeohashId":"wydmes5","nineBlockGeohashes":["wydmes5","wydmes7","wydmesk","wydmesh","wydmeeu","wydmeeg","wydmeef","wydmes4","wydmes6"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:57:50.170 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.170396Z","nanoTime":31856184417700,"traceId":"05fe9fd6","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:57:50.170 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:57:50.170 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmes5
2025-11-21 20:57:50.170 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3919ms)
2025-11-21 20:57:50.170 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:57:50.170 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:57:50.170 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:57:50.170 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.1923ms, 역직렬화: 0.0ms
2025-11-21 20:57:50.170 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:57:50.170 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.170903100Z","nanoTime":31856186294400,"traceId":"05fe9fd6","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1876700,"duration_ms":1,"resultData":{"centerGeohashId":"wydmes5","nineBlockGeohashes":["wydmes5","wydmes7","wydmesk","wydmesh","wydmeeu","wydmeeg","wydmeef","wydmes4","wydmes6"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmes5","hit":false,"valueSize":0,"l1CacheGetDurationNs":391900,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmes5","cacheKey":"data:wydmes5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":269000},{"geohashId":"wydmes7","cacheKey":"data:wydmes7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":135400},{"geohashId":"wydmesk","cacheKey":"data:wydmesk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":117200},{"geohashId":"wydmesh","cacheKey":"data:wydmesh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":91300},{"geohashId":"wydmeeu","cacheKey":"data:wydmeeu:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":121600},{"geohashId":"wydmeeg","cacheKey":"data:wydmeeg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":118600},{"geohashId":"wydmeef","cacheKey":"data:wydmeef:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":81800},{"geohashId":"wydmes4","cacheKey":"data:wydmes4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":81700},{"geohashId":"wydmes6","cacheKey":"data:wydmes6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":98400}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1192300,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:57:50.170 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.170903100Z","nanoTime":31856186526700,"traceId":"05fe9fd6","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:57:50.170 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:57:50.170 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:57:50.174 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 10건
2025-11-21 20:57:50.175 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:57:50.175 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 5개
2025-11-21 20:57:50.175 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.175695800Z","nanoTime":31856190337000,"traceId":"05fe9fd6","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":3810300,"duration_ms":3,"resultData":{"inputCctvMissGrids":["wydmes5","wydmes7","wydmesk","wydmesh","wydmeeu","wydmeeg","wydmeef","wydmes4","wydmes6"],"cctvQueryResult":{"queryGeohashIds":["wydmes5","wydmes7","wydmesk","wydmesh","wydmeeu","wydmeeg","wydmeef","wydmes4","wydmes6"],"totalRowsReturned":10,"rowsPerGrid":{"wydmesk":3,"wydmes5":1,"wydmes6":3,"wydmes7":1,"wydmeef":2},"queryExecutionTimeNs":2797200,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmesk","cacheKey":"data:wydmesk:cctv","dataCount":3,"dataSize":301,"errorMessage":null,"success":true},{"geohashId":"wydmes5","cacheKey":"data:wydmes5:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmes6","cacheKey":"data:wydmes6:cctv","dataCount":3,"dataSize":301,"errorMessage":null,"success":true},{"geohashId":"wydmes7","cacheKey":"data:wydmes7:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmeef","cacheKey":"data:wydmeef:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:57:50.175 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.175695800Z","nanoTime":31856190438300,"traceId":"05fe9fd6","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:57:50.176 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:57:50.176 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.551576622674894, 127.07315147060551)
2025-11-21 20:57:50.176 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:57:50.250 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:57:50.250 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:57:50.250 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:57:50.250 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.551576622674894, 127.07315147060551), 반경: 500m
2025-11-21 20:57:50.332 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:57:50.332 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 133건
2025-11-21 20:57:50.334 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:57:50.334 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:57:50.334 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 광진구
2025-11-21 20:57:50.334 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 광진구
2025-11-21 20:57:50.334 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:57:50.334 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:57:50.334 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:57:50.334 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.672940923
2025-11-21 20:57:50.334 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.334958700Z","nanoTime":31856349433000,"traceId":"05fe9fd6","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":158994700,"duration_ms":158,"resultData":{"latitude":37.551576622674894,"longitude":127.07315147060551,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":158845400,"addressApiResult":{"cached":false,"cacheKey":"address:37.551576622674894:127.07315147060551","roadAddress":"서울특별시 광진구 능동로 209","jibunAddress":"서울 광진구 군자동 98","responseSize":68,"executionTimeNs":74697200,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:광진구","guName":"광진구","arrestRate":0.672940923,"dataFound":true,"executionTimeNs":424700,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.551576622674894:127.07315147060551:500","categoryCount":15,"placesByCategory":{"CT1":10,"AT4":0,"CS2":15,"SC4":4,"MT1":0,"BK9":11,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":4,"FD6":15,"PK6":15,"OL7":2,"PM9":11},"totalPlaces":133,"responseSize":15307,"executionTimeNs":83723500,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:50.334 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.334958700Z","nanoTime":31856349604200,"traceId":"05fe9fd6","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:57:50.334 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:57:50.334 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:57:50.334 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 10개
2025-11-21 20:57:50.334 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 10개 (총 카메라 대수: 10대)
2025-11-21 20:57:50.334 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:57:50.402 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구 사당로17나길 4 (거리: 583m)
2025-11-21 20:57:50.402 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:57:50.402 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:57:50.402 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 20:57:50.402 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:57:50.404 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.402630900Z","nanoTime":31856418168900,"traceId":"05fe9fd6","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":68564700,"duration_ms":68,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":10,"totalCctvAfterFilter":10,"totalCameraCount":10,"filterRate":1.0,"filterExecutionTimeNs":5700,"success":true},"policeQuery":{"queryDurationNs":68116200,"found":true,"nearestAddress":"서울특별시 동작구 사당로17나길 4","nearestDistance":582.84769501128,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":10,"CS2":15,"SC4":4,"BK9":11,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":4,"FD6":15,"PK6":15,"OL7":2,"PM9":11},"placesAfterFilter":{"CT1":10,"CS2":15,"SC4":4,"BK9":11,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":4,"FD6":15,"PK6":15,"OL7":2,"PM9":11},"totalBeforeFilter":133,"totalAfterFilter":133,"filterRate":1.0,"filterExecutionTimeNs":95000,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:50.404 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.404648400Z","nanoTime":31856418483000,"traceId":"05fe9fd6","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:57:50.404 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:57:50.404 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 41.66, 편의성: 40.18, 종합: 40.92
2025-11-21 20:57:50.404 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.404648400Z","nanoTime":31856418720900,"traceId":"05fe9fd6","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":237900,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":27.144038123589993,"policeDistance":582.84769501128,"cctvScore":33.33333333333333,"cctvCount":10,"arrestRateScore":67.2940923,"arrestRate":0.672940923,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":41.66477246041033,"success":true},"convenienceScore":{"categoryScores":{"CT1":40.0,"CS2":4.339624824968466,"SC4":8.0,"BK9":55.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":12.0,"FD6":15.0,"PK6":45.0,"OL7":10.0,"PM9":88.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"광진구","guPopulation":345652,"finalScore":40.17997114038219,"success":true},"overallScore":40.92237180039626,"errorMessage":null,"success":true}}
2025-11-21 20:57:50.404 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.404648400Z","nanoTime":31856418867300,"traceId":"05fe9fd6","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:57:50.404 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:57:50.404 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구 사당로17나길 4, latitude=37.546541, longitude=127.071316, geohashId=wydmee4)
2025-11-21 20:57:50.404 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 582.84769501128
2025-11-21 20:57:50.404 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmes5
2025-11-21 20:57:50.404 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:57:50.404 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.404648400Z","nanoTime":31856420033400,"traceId":"05fe9fd6","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1166100,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["문화시설이(가) 111m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmes5","dataSize":16861,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":16861,"errorMessage":null,"success":true}}
2025-11-21 20:57:50.404 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:57:50.739 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:57:50.739 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.54819139061974, longitude=127.06896115478176, radius=500)
2025-11-21 20:57:50.739 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:57:50.739 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.54819139061974, longitude=127.06896115478176, radius=500
2025-11-21 20:57:50.739 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.739132800Z","nanoTime":31856753744600,"traceId":"c8a94aaf","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:57:50.739 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:57:50.739 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.54819139061974, lon=127.06896115478176
2025-11-21 20:57:50.739 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.739132800Z","nanoTime":31856753846600,"traceId":"c8a94aaf","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:57:50.740 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.740128600Z","nanoTime":31856753888800,"traceId":"c8a94aaf","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":42200,"duration_ms":0,"resultData":{"latitude":37.54819139061974,"longitude":127.06896115478176,"precision":7,"centerHash":"wydmee2","adjacentHashes":["wydmee2","wydmee8","wydmee9","wydmee3","wydmee1","wydmee0","wydme7p","wydme7r","wydme7x"],"errorMessage":null,"success":true}}
2025-11-21 20:57:50.740 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmee2, wydmee8, wydmee9, wydmee3, wydmee1, wydmee0, wydme7p, wydme7r, wydme7x]
2025-11-21 20:57:50.740 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmee2
2025-11-21 20:57:50.740 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.740128600Z","nanoTime":31856753993300,"traceId":"c8a94aaf","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":248700,"duration_ms":0,"resultData":{"requestLatitude":37.54819139061974,"requestLongitude":127.06896115478176,"requestRadius":500,"centerGeohashId":"wydmee2","nineBlockGeohashes":["wydmee2","wydmee8","wydmee9","wydmee3","wydmee1","wydmee0","wydme7p","wydme7r","wydme7x"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:57:50.740 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.740128600Z","nanoTime":31856754051000,"traceId":"c8a94aaf","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:57:50.740 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:57:50.740 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmee2
2025-11-21 20:57:50.740 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4058ms)
2025-11-21 20:57:50.740 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:57:50.742 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:57:50.742 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:57:50.742 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.7739ms, 역직렬화: 0.0ms
2025-11-21 20:57:50.742 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:57:50.742 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.742207600Z","nanoTime":31856756590100,"traceId":"c8a94aaf","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2539100,"duration_ms":2,"resultData":{"centerGeohashId":"wydmee2","nineBlockGeohashes":["wydmee2","wydmee8","wydmee9","wydmee3","wydmee1","wydmee0","wydme7p","wydme7r","wydme7x"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmee2","hit":false,"valueSize":0,"l1CacheGetDurationNs":405800,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmee2","cacheKey":"data:wydmee2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":279200},{"geohashId":"wydmee8","cacheKey":"data:wydmee8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":134800},{"geohashId":"wydmee9","cacheKey":"data:wydmee9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":81000},{"geohashId":"wydmee3","cacheKey":"data:wydmee3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":177500},{"geohashId":"wydmee1","cacheKey":"data:wydmee1:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":235400},{"geohashId":"wydmee0","cacheKey":"data:wydmee0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":185500},{"geohashId":"wydme7p","cacheKey":"data:wydme7p:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":191400},{"geohashId":"wydme7r","cacheKey":"data:wydme7r:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":221000},{"geohashId":"wydme7x","cacheKey":"data:wydme7x:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":161800}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1773900,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:57:50.742 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.742207600Z","nanoTime":31856756741300,"traceId":"c8a94aaf","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:57:50.742 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:57:50.742 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:57:50.745 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 23건
2025-11-21 20:57:50.746 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:57:50.746 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 20:57:50.746 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.746221Z","nanoTime":31856760751300,"traceId":"c8a94aaf","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4010000,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmee2","wydmee8","wydmee9","wydmee3","wydmee1","wydmee0","wydme7p","wydme7r","wydme7x"],"cctvQueryResult":{"queryGeohashIds":["wydmee2","wydmee8","wydmee9","wydmee3","wydmee1","wydmee0","wydme7p","wydme7r","wydme7x"],"totalRowsReturned":23,"rowsPerGrid":{"wydme7r":1,"wydmee0":6,"wydmee1":3,"wydmee2":1,"wydme7p":3,"wydmee8":1,"wydmee9":1,"wydme7x":7},"queryExecutionTimeNs":2627200,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydme7r","cacheKey":"data:wydme7r:cctv","dataCount":1,"dataSize":134,"errorMessage":null,"success":true},{"geohashId":"wydmee0","cacheKey":"data:wydmee0:cctv","dataCount":6,"dataSize":601,"errorMessage":null,"success":true},{"geohashId":"wydmee1","cacheKey":"data:wydmee1:cctv","dataCount":3,"dataSize":298,"errorMessage":null,"success":true},{"geohashId":"wydmee2","cacheKey":"data:wydmee2:cctv","dataCount":1,"dataSize":100,"errorMessage":null,"success":true},{"geohashId":"wydme7p","cacheKey":"data:wydme7p:cctv","dataCount":3,"dataSize":301,"errorMessage":null,"success":true},{"geohashId":"wydmee8","cacheKey":"data:wydmee8:cctv","dataCount":1,"dataSize":100,"errorMessage":null,"success":true},{"geohashId":"wydmee9","cacheKey":"data:wydmee9:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydme7x","cacheKey":"data:wydme7x:cctv","dataCount":7,"dataSize":894,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:57:50.747 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.746221Z","nanoTime":31856760956900,"traceId":"c8a94aaf","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:57:50.747 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:57:50.747 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.54819139061974, 127.06896115478176)
2025-11-21 20:57:50.747 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:57:50.835 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:57:50.835 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:57:50.836 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:57:50.836 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.54819139061974, 127.06896115478176), 반경: 500m
2025-11-21 20:57:50.914 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:57:50.914 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 126건
2025-11-21 20:57:50.916 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:57:50.916 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:57:50.916 [http-nio-8185-exec-7] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 20:57:50.916 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:57:50.916 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:57:50.916 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:57:50.916 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 20:57:50.916 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.916407400Z","nanoTime":31856930352700,"traceId":"c8a94aaf","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":169395800,"duration_ms":169,"resultData":{"latitude":37.54819139061974,"longitude":127.06896115478176,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":169263300,"addressApiResult":{"cached":false,"cacheKey":"address:37.54819139061974:127.06896115478176","roadAddress":"주소 없음","jibunAddress":"서울 광진구 화양동 18-27","responseSize":59,"executionTimeNs":88925900,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":35600,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.54819139061974:127.06896115478176:500","categoryCount":15,"placesByCategory":{"CT1":3,"AT4":0,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":0,"PO3":3,"FD6":15,"PK6":15,"OL7":0,"PM9":13},"totalPlaces":126,"responseSize":14449,"executionTimeNs":80301800,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:50.916 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.916407400Z","nanoTime":31856930514400,"traceId":"c8a94aaf","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:57:50.916 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:57:50.916 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:57:50.916 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 23개
2025-11-21 20:57:50.916 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 23개 (총 카메라 대수: 34대)
2025-11-21 20:57:50.916 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:57:50.984 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구 사당로17나길 4 (거리: 277m)
2025-11-21 20:57:50.984 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:57:50.984 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:57:50.984 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 12개 카테고리
2025-11-21 20:57:50.984 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:57:50.984 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.984946700Z","nanoTime":31856999600400,"traceId":"c8a94aaf","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":69086000,"duration_ms":69,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":23,"totalCctvAfterFilter":23,"totalCameraCount":34,"filterRate":1.0,"filterExecutionTimeNs":8500,"success":true},"policeQuery":{"queryDurationNs":68565900,"found":true,"nearestAddress":"서울특별시 동작구 사당로17나길 4","nearestDistance":277.0879015907031,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":3,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SC4":1,"PO3":3,"FD6":15,"PK6":15,"MT1":1,"PM9":13},"placesAfterFilter":{"CT1":3,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SC4":1,"PO3":3,"FD6":15,"PK6":15,"MT1":1,"PM9":13},"totalBeforeFilter":126,"totalAfterFilter":126,"filterRate":1.0,"filterExecutionTimeNs":107600,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:50.984 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.984946700Z","nanoTime":31856999765400,"traceId":"c8a94aaf","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:57:50.984 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:57:50.984 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 50.28, 편의성: 34.73, 종합: 42.50
2025-11-21 20:57:50.984 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.984946700Z","nanoTime":31857000003400,"traceId":"c8a94aaf","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":238000,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":65.36401230116212,"policeDistance":277.0879015907031,"cctvScore":76.66666666666667,"cctvCount":23,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":50.27587035701531,"success":true},"convenienceScore":{"categoryScores":{"CT1":12.0,"BK9":75.0,"HP8":100.0,"CS2":3.75,"AC5":15.0,"CE7":30.0,"SC4":2.0,"PO3":9.0,"FD6":15.0,"PK6":45.0,"MT1":10.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":34.729166666666664,"success":true},"overallScore":42.50251851184099,"errorMessage":null,"success":true}}
2025-11-21 20:57:50.984 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.984946700Z","nanoTime":31857000141600,"traceId":"c8a94aaf","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:57:50.984 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:57:50.984 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구 사당로17나길 4, latitude=37.546541, longitude=127.071316, geohashId=wydmee4)
2025-11-21 20:57:50.984 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 277.0879015907031
2025-11-21 20:57:50.987 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmee2
2025-11-21 20:57:50.987 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:57:50.987 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:50.987752700Z","nanoTime":31857001790600,"traceId":"c8a94aaf","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1649000,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["약국이(가) 22m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmee2","dataSize":17064,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17064,"errorMessage":null,"success":true}}
2025-11-21 20:57:50.987 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:57:51.487 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:57:51.487 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.54447609442817, longitude=127.07420820547941, radius=500)
2025-11-21 20:57:51.487 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:57:51.487 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.54447609442817, longitude=127.07420820547941, radius=500
2025-11-21 20:57:51.487 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:51.487372300Z","nanoTime":31857501474300,"traceId":"cae7e251","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:57:51.487 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:57:51.487 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.54447609442817, lon=127.07420820547941
2025-11-21 20:57:51.487 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:51.487372300Z","nanoTime":31857501546700,"traceId":"cae7e251","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:57:51.487 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:51.487372300Z","nanoTime":31857501578100,"traceId":"cae7e251","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":31400,"duration_ms":0,"resultData":{"latitude":37.54447609442817,"longitude":127.07420820547941,"precision":7,"centerHash":"wydmedu","adjacentHashes":["wydmedu","wydmeeh","wydmeej","wydmedv","wydmedt","wydmeds","wydmede","wydmedg","wydmee5"],"errorMessage":null,"success":true}}
2025-11-21 20:57:51.487 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmedu, wydmeeh, wydmeej, wydmedv, wydmedt, wydmeds, wydmede, wydmedg, wydmee5]
2025-11-21 20:57:51.487 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmedu
2025-11-21 20:57:51.487 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:51.487372300Z","nanoTime":31857501665800,"traceId":"cae7e251","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":191500,"duration_ms":0,"resultData":{"requestLatitude":37.54447609442817,"requestLongitude":127.07420820547941,"requestRadius":500,"centerGeohashId":"wydmedu","nineBlockGeohashes":["wydmedu","wydmeeh","wydmeej","wydmedv","wydmedt","wydmeds","wydmede","wydmedg","wydmee5"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:57:51.487 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:51.487372300Z","nanoTime":31857501709600,"traceId":"cae7e251","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:57:51.487 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:57:51.487 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmedu
2025-11-21 20:57:51.487 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.305ms)
2025-11-21 20:57:51.488 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:57:51.488 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:57:51.488 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:57:51.488 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 0.7638ms, 역직렬화: 0.0ms
2025-11-21 20:57:51.488 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:57:51.488 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:51.488364200Z","nanoTime":31857502989300,"traceId":"cae7e251","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1279700,"duration_ms":1,"resultData":{"centerGeohashId":"wydmedu","nineBlockGeohashes":["wydmedu","wydmeeh","wydmeej","wydmedv","wydmedt","wydmeds","wydmede","wydmedg","wydmee5"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmedu","hit":false,"valueSize":0,"l1CacheGetDurationNs":305000,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmedu","cacheKey":"data:wydmedu:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":128600},{"geohashId":"wydmeeh","cacheKey":"data:wydmeeh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":78500},{"geohashId":"wydmeej","cacheKey":"data:wydmeej:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":70200},{"geohashId":"wydmedv","cacheKey":"data:wydmedv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":69000},{"geohashId":"wydmedt","cacheKey":"data:wydmedt:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":67300},{"geohashId":"wydmeds","cacheKey":"data:wydmeds:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":65100},{"geohashId":"wydmede","cacheKey":"data:wydmede:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":102600},{"geohashId":"wydmedg","cacheKey":"data:wydmedg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":70100},{"geohashId":"wydmee5","cacheKey":"data:wydmee5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":67500}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":763800,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:57:51.488 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:51.488364200Z","nanoTime":31857503091400,"traceId":"cae7e251","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:57:51.488 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:57:51.489 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:57:51.492 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 10건
2025-11-21 20:57:51.493 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:57:51.493 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 6개
2025-11-21 20:57:51.493 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:51.493574700Z","nanoTime":31857509043600,"traceId":"cae7e251","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5952200,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydmedu","wydmeeh","wydmeej","wydmedv","wydmedt","wydmeds","wydmede","wydmedg","wydmee5"],"cctvQueryResult":{"queryGeohashIds":["wydmedu","wydmeeh","wydmeej","wydmedv","wydmedt","wydmeds","wydmede","wydmedg","wydmee5"],"totalRowsReturned":10,"rowsPerGrid":{"wydmedv":2,"wydmedg":1,"wydmeej":2,"wydmee5":2,"wydmede":1,"wydmedu":2},"queryExecutionTimeNs":3742600,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmedv","cacheKey":"data:wydmedv:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydmedg","cacheKey":"data:wydmedg:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmeej","cacheKey":"data:wydmeej:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydmee5","cacheKey":"data:wydmee5:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydmede","cacheKey":"data:wydmede:cctv","dataCount":1,"dataSize":100,"errorMessage":null,"success":true},{"geohashId":"wydmedu","cacheKey":"data:wydmedu:cctv","dataCount":2,"dataSize":200,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:57:51.493 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:51.493574700Z","nanoTime":31857509184600,"traceId":"cae7e251","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:57:51.493 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:57:51.493 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.54447609442817, 127.07420820547941)
2025-11-21 20:57:51.493 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:57:51.568 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:57:51.568 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:57:51.568 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:57:51.568 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.54447609442817, 127.07420820547941), 반경: 500m
2025-11-21 20:57:51.651 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:57:51.651 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 133건
2025-11-21 20:57:51.654 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:57:51.654 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:57:51.654 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 광진구
2025-11-21 20:57:51.654 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 광진구
2025-11-21 20:57:51.654 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:57:51.654 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:57:51.654 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:57:51.654 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.672940923
2025-11-21 20:57:51.655 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:51.654415700Z","nanoTime":31857669219200,"traceId":"cae7e251","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":160034600,"duration_ms":160,"resultData":{"latitude":37.54447609442817,"longitude":127.07420820547941,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":159877000,"addressApiResult":{"cached":false,"cacheKey":"address:37.54447609442817:127.07420820547941","roadAddress":"서울특별시 광진구 능동로 120","jibunAddress":"서울 광진구 화양동 1","responseSize":67,"executionTimeNs":73692600,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:광진구","guName":"광진구","arrestRate":0.672940923,"dataFound":true,"executionTimeNs":689800,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.54447609442817:127.07420820547941:500","categoryCount":15,"placesByCategory":{"CT1":10,"AT4":2,"CS2":15,"SC4":2,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":3,"FD6":15,"PK6":15,"OL7":0,"PM9":8},"totalPlaces":133,"responseSize":15433,"executionTimeNs":85494600,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:51.655 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:51.655503500Z","nanoTime":31857669514100,"traceId":"cae7e251","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:57:51.655 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:57:51.655 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:57:51.655 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 10개
2025-11-21 20:57:51.655 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 10개 (총 카메라 대수: 10대)
2025-11-21 20:57:51.655 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:57:51.728 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구 사당로17나길 4 (거리: 343m)
2025-11-21 20:57:51.728 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:57:51.728 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:57:51.728 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 20:57:51.728 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:57:51.728 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:51.728191200Z","nanoTime":31857742502700,"traceId":"cae7e251","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":72988600,"duration_ms":72,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":10,"totalCctvAfterFilter":10,"totalCameraCount":10,"filterRate":1.0,"filterExecutionTimeNs":5500,"success":true},"policeQuery":{"queryDurationNs":72554600,"found":true,"nearestAddress":"서울특별시 동작구 사당로17나길 4","nearestDistance":343.1284082557357,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":10,"AT4":2,"CS2":15,"SC4":2,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":3,"FD6":15,"PK6":15,"PM9":8},"placesAfterFilter":{"CT1":10,"AT4":2,"CS2":15,"SC4":2,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":3,"FD6":15,"PK6":15,"PM9":8},"totalBeforeFilter":133,"totalAfterFilter":133,"filterRate":1.0,"filterExecutionTimeNs":105600,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:51.728 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:51.728191200Z","nanoTime":31857742784700,"traceId":"cae7e251","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:57:51.728 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:57:51.728 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 50.65, 편의성: 36.95, 종합: 43.80
2025-11-21 20:57:51.728 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:51.728191200Z","nanoTime":31857743256300,"traceId":"cae7e251","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":471600,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":57.10894896803303,"policeDistance":343.1284082557357,"cctvScore":33.33333333333333,"cctvCount":10,"arrestRateScore":67.2940923,"arrestRate":0.672940923,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":50.654245713743244,"success":true},"convenienceScore":{"categoryScores":{"CT1":40.0,"AT4":6.0,"CS2":4.339624824968466,"SC4":4.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":45.0,"PM9":64.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"광진구","guPopulation":345652,"finalScore":36.95283034464061,"success":true},"overallScore":43.80353802919193,"errorMessage":null,"success":true}}
2025-11-21 20:57:51.728 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:51.728191200Z","nanoTime":31857743391500,"traceId":"cae7e251","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:57:51.728 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:57:51.728 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구 사당로17나길 4, latitude=37.546541, longitude=127.071316, geohashId=wydmee4)
2025-11-21 20:57:51.728 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 343.1284082557357
2025-11-21 20:57:51.730 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmedu
2025-11-21 20:57:51.730 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:57:51.730 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:51.730862800Z","nanoTime":31857744850200,"traceId":"cae7e251","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1458700,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 92m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmedu","dataSize":17284,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17284,"errorMessage":null,"success":true}}
2025-11-21 20:57:51.730 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:57:52.161 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:57:52.162 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.54366096627952, longitude=127.08065726175009, radius=500)
2025-11-21 20:57:52.162 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:57:52.162 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.54366096627952, longitude=127.08065726175009, radius=500
2025-11-21 20:57:52.162 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:52.162097700Z","nanoTime":31858175917300,"traceId":"016793d0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:57:52.162 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:57:52.162 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.54366096627952, lon=127.08065726175009
2025-11-21 20:57:52.162 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:52.162097700Z","nanoTime":31858176015800,"traceId":"016793d0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:57:52.162 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:52.162097700Z","nanoTime":31858176055400,"traceId":"016793d0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":39600,"duration_ms":0,"resultData":{"latitude":37.54366096627952,"longitude":127.08065726175009,"precision":7,"centerHash":"wydmef9","adjacentHashes":["wydmef9","wydmefc","wydmeff","wydmefd","wydmef6","wydmef3","wydmef2","wydmef8","wydmefb"],"errorMessage":null,"success":true}}
2025-11-21 20:57:52.162 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmef9, wydmefc, wydmeff, wydmefd, wydmef6, wydmef3, wydmef2, wydmef8, wydmefb]
2025-11-21 20:57:52.162 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmef9
2025-11-21 20:57:52.162 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:52.162097700Z","nanoTime":31858176169800,"traceId":"016793d0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":252500,"duration_ms":0,"resultData":{"requestLatitude":37.54366096627952,"requestLongitude":127.08065726175009,"requestRadius":500,"centerGeohashId":"wydmef9","nineBlockGeohashes":["wydmef9","wydmefc","wydmeff","wydmefd","wydmef6","wydmef3","wydmef2","wydmef8","wydmefb"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:57:52.162 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:52.162097700Z","nanoTime":31858176224600,"traceId":"016793d0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:57:52.162 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:57:52.162 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmef9
2025-11-21 20:57:52.162 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5146ms)
2025-11-21 20:57:52.163 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:57:52.164 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:57:52.164 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:57:52.164 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.1562ms, 역직렬화: 0.0ms
2025-11-21 20:57:52.164 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:57:52.164 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:52.164094900Z","nanoTime":31858178176400,"traceId":"016793d0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1951800,"duration_ms":1,"resultData":{"centerGeohashId":"wydmef9","nineBlockGeohashes":["wydmef9","wydmefc","wydmeff","wydmefd","wydmef6","wydmef3","wydmef2","wydmef8","wydmefb"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmef9","hit":false,"valueSize":0,"l1CacheGetDurationNs":514600,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmef9","cacheKey":"data:wydmef9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":205600},{"geohashId":"wydmefc","cacheKey":"data:wydmefc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":138300},{"geohashId":"wydmeff","cacheKey":"data:wydmeff:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":147800},{"geohashId":"wydmefd","cacheKey":"data:wydmefd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":102300},{"geohashId":"wydmef6","cacheKey":"data:wydmef6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":83600},{"geohashId":"wydmef3","cacheKey":"data:wydmef3:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":124600},{"geohashId":"wydmef2","cacheKey":"data:wydmef2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":81600},{"geohashId":"wydmef8","cacheKey":"data:wydmef8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":77300},{"geohashId":"wydmefb","cacheKey":"data:wydmefb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":121500}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1156200,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:57:52.164 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:52.164094900Z","nanoTime":31858178315700,"traceId":"016793d0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:57:52.164 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:57:52.164 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:57:52.166 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 8건
2025-11-21 20:57:52.167 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:57:52.167 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 4개
2025-11-21 20:57:52.167 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:52.167993900Z","nanoTime":31858182504500,"traceId":"016793d0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4188800,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmef9","wydmefc","wydmeff","wydmefd","wydmef6","wydmef3","wydmef2","wydmef8","wydmefb"],"cctvQueryResult":{"queryGeohashIds":["wydmef9","wydmefc","wydmeff","wydmefd","wydmef6","wydmef3","wydmef2","wydmef8","wydmefb"],"totalRowsReturned":8,"rowsPerGrid":{"wydmefb":1,"wydmef9":3,"wydmefd":2,"wydmef6":2},"queryExecutionTimeNs":3151700,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmefb","cacheKey":"data:wydmefb:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmef9","cacheKey":"data:wydmef9:cctv","dataCount":3,"dataSize":300,"errorMessage":null,"success":true},{"geohashId":"wydmefd","cacheKey":"data:wydmefd:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydmef6","cacheKey":"data:wydmef6:cctv","dataCount":2,"dataSize":200,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:57:52.168 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:52.168981200Z","nanoTime":31858182747400,"traceId":"016793d0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:57:52.168 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:57:52.168 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.54366096627952, 127.08065726175009)
2025-11-21 20:57:52.168 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:57:52.251 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:57:52.251 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:57:52.252 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:57:52.252 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.54366096627952, 127.08065726175009), 반경: 500m
2025-11-21 20:57:52.340 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:57:52.340 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 115건
2025-11-21 20:57:52.342 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:57:52.342 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:57:52.342 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 광진구
2025-11-21 20:57:52.342 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 광진구
2025-11-21 20:57:52.342 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:57:52.342 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:57:52.342 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:57:52.342 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.672940923
2025-11-21 20:57:52.342 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:52.342782600Z","nanoTime":31858357203200,"traceId":"016793d0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":174455800,"duration_ms":174,"resultData":{"latitude":37.54366096627952,"longitude":127.08065726175009,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":174287600,"addressApiResult":{"cached":false,"cacheKey":"address:37.54366096627952:127.08065726175009","roadAddress":"서울특별시 광진구 광나루로 458","jibunAddress":"서울 광진구 구의동 680","responseSize":70,"executionTimeNs":83562300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:광진구","guName":"광진구","arrestRate":0.672940923,"dataFound":true,"executionTimeNs":416500,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.54366096627952:127.08065726175009:500","categoryCount":15,"placesByCategory":{"CT1":5,"AT4":3,"CS2":12,"SC4":5,"MT1":1,"BK9":11,"HP8":13,"AC5":15,"CE7":15,"SW8":0,"PO3":4,"FD6":15,"PK6":10,"OL7":1,"PM9":5},"totalPlaces":115,"responseSize":13356,"executionTimeNs":90308800,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:52.343 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:52.343735300Z","nanoTime":31858357517800,"traceId":"016793d0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:57:52.343 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:57:52.343 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:57:52.343 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 8개
2025-11-21 20:57:52.343 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 8개 (총 카메라 대수: 8대)
2025-11-21 20:57:52.343 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:57:52.420 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 광진구 능동로 385 (거리: 850m)
2025-11-21 20:57:52.420 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:57:52.420 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:57:52.420 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 20:57:52.420 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:57:52.420 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:52.420783Z","nanoTime":31858435797500,"traceId":"016793d0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":78279700,"duration_ms":78,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":8,"totalCctvAfterFilter":8,"totalCameraCount":8,"filterRate":1.0,"filterExecutionTimeNs":4600,"success":true},"policeQuery":{"queryDurationNs":77899000,"found":true,"nearestAddress":"서울특별시 광진구 능동로 385","nearestDistance":849.5727376917558,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":5,"AT4":3,"CS2":12,"SC4":5,"MT1":1,"BK9":11,"HP8":13,"AC5":15,"CE7":15,"PO3":4,"FD6":15,"PK6":10,"OL7":1,"PM9":5},"placesAfterFilter":{"CT1":5,"AT4":3,"CS2":12,"SC4":5,"MT1":1,"BK9":11,"HP8":13,"AC5":15,"CE7":15,"PO3":4,"FD6":15,"PK6":10,"OL7":1,"PM9":5},"totalBeforeFilter":115,"totalAfterFilter":115,"filterRate":1.0,"filterExecutionTimeNs":82100,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:52.420 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:52.420783Z","nanoTime":31858436328400,"traceId":"016793d0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:57:52.420 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:57:52.420 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 30.85, 편의성: 25.32, 종합: 28.09
2025-11-21 20:57:52.420 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:52.420783Z","nanoTime":31858436874400,"traceId":"016793d0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":546000,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":0.0,"policeDistance":849.5727376917558,"cctvScore":26.666666666666668,"cctvCount":8,"arrestRateScore":67.2940923,"arrestRate":0.672940923,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":30.85489435666667,"success":true},"convenienceScore":{"categoryScores":{"CT1":20.0,"AT4":9.0,"CS2":3.471699859974773,"SC4":10.0,"MT1":10.0,"BK9":55.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"PO3":12.0,"FD6":15.0,"PK6":30.0,"OL7":5.0,"PM9":40.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"광진구","guPopulation":345652,"finalScore":25.31940713285534,"success":true},"overallScore":28.087150744761004,"errorMessage":null,"success":true}}
2025-11-21 20:57:52.420 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:52.420783Z","nanoTime":31858437219800,"traceId":"016793d0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:57:52.420 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:57:52.420 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 광진구 능동로 385, latitude=37.536619, longitude=127.076919, geohashId=wydme9q)
2025-11-21 20:57:52.420 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 849.5727376917558
2025-11-21 20:57:52.425 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmef9
2025-11-21 20:57:52.425 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:57:52.425 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:52.425384600Z","nanoTime":31858439960400,"traceId":"016793d0","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":2740600,"duration_ms":2,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["학교이(가) 78m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","CCTV 설치 대수가 적은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmef9","dataSize":15293,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":15293,"errorMessage":null,"success":true}}
2025-11-21 20:57:52.425 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:57:52.834 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:57:52.834 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.54189064410757, longitude=127.08681086870186, radius=500)
2025-11-21 20:57:52.834 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:57:52.834 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.54189064410757, longitude=127.08681086870186, radius=500
2025-11-21 20:57:52.834 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:52.834318Z","nanoTime":31858848547800,"traceId":"770d44c6","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:57:52.834 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:57:52.834 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.54189064410757, lon=127.08681086870186
2025-11-21 20:57:52.834 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:52.834318Z","nanoTime":31858848615700,"traceId":"770d44c6","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:57:52.834 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:52.834318Z","nanoTime":31858848656800,"traceId":"770d44c6","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":41100,"duration_ms":0,"resultData":{"latitude":37.54189064410757,"longitude":127.08681086870186,"precision":7,"centerHash":"wydmefm","adjacentHashes":["wydmefm","wydmeft","wydmefw","wydmefq","wydmefn","wydmefj","wydmefh","wydmefk","wydmefs"],"errorMessage":null,"success":true}}
2025-11-21 20:57:52.834 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmefm, wydmeft, wydmefw, wydmefq, wydmefn, wydmefj, wydmefh, wydmefk, wydmefs]
2025-11-21 20:57:52.834 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmefm
2025-11-21 20:57:52.834 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:52.834318Z","nanoTime":31858848748100,"traceId":"770d44c6","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":200300,"duration_ms":0,"resultData":{"requestLatitude":37.54189064410757,"requestLongitude":127.08681086870186,"requestRadius":500,"centerGeohashId":"wydmefm","nineBlockGeohashes":["wydmefm","wydmeft","wydmefw","wydmefq","wydmefn","wydmefj","wydmefh","wydmefk","wydmefs"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:57:52.834 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:52.834318Z","nanoTime":31858848799500,"traceId":"770d44c6","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:57:52.834 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:57:52.834 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmefm
2025-11-21 20:57:52.835 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.2917ms)
2025-11-21 20:57:52.835 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:57:52.835 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:57:52.835 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:57:52.835 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 0.719ms, 역직렬화: 0.0ms
2025-11-21 20:57:52.835 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:57:52.836 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:52.835306200Z","nanoTime":31858850002700,"traceId":"770d44c6","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1203200,"duration_ms":1,"resultData":{"centerGeohashId":"wydmefm","nineBlockGeohashes":["wydmefm","wydmeft","wydmefw","wydmefq","wydmefn","wydmefj","wydmefh","wydmefk","wydmefs"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmefm","hit":false,"valueSize":0,"l1CacheGetDurationNs":291700,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmefm","cacheKey":"data:wydmefm:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":113400},{"geohashId":"wydmeft","cacheKey":"data:wydmeft:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":82800},{"geohashId":"wydmefw","cacheKey":"data:wydmefw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":70300},{"geohashId":"wydmefq","cacheKey":"data:wydmefq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":69000},{"geohashId":"wydmefn","cacheKey":"data:wydmefn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":67700},{"geohashId":"wydmefj","cacheKey":"data:wydmefj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":68100},{"geohashId":"wydmefh","cacheKey":"data:wydmefh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":67600},{"geohashId":"wydmefk","cacheKey":"data:wydmefk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":66500},{"geohashId":"wydmefs","cacheKey":"data:wydmefs:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":67200}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":719000,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:57:52.836 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:52.836305700Z","nanoTime":31858850111900,"traceId":"770d44c6","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:57:52.836 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:57:52.836 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:57:52.838 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 22건
2025-11-21 20:57:52.841 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:57:52.841 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 20:57:52.842 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:52.841909700Z","nanoTime":31858856599500,"traceId":"770d44c6","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6487600,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydmefm","wydmeft","wydmefw","wydmefq","wydmefn","wydmefj","wydmefh","wydmefk","wydmefs"],"cctvQueryResult":{"queryGeohashIds":["wydmefm","wydmeft","wydmefw","wydmefq","wydmefn","wydmefj","wydmefh","wydmefk","wydmefs"],"totalRowsReturned":22,"rowsPerGrid":{"wydmefq":5,"wydmefs":2,"wydmefm":2,"wydmefn":1,"wydmefh":2,"wydmefj":3,"wydmefk":2,"wydmeft":2,"wydmefw":3},"queryExecutionTimeNs":2376400,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmefq","cacheKey":"data:wydmefq:cctv","dataCount":5,"dataSize":501,"errorMessage":null,"success":true},{"geohashId":"wydmefs","cacheKey":"data:wydmefs:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydmefm","cacheKey":"data:wydmefm:cctv","dataCount":2,"dataSize":200,"errorMessage":null,"success":true},{"geohashId":"wydmefn","cacheKey":"data:wydmefn:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmefh","cacheKey":"data:wydmefh:cctv","dataCount":2,"dataSize":199,"errorMessage":null,"success":true},{"geohashId":"wydmefj","cacheKey":"data:wydmefj:cctv","dataCount":3,"dataSize":301,"errorMessage":null,"success":true},{"geohashId":"wydmefk","cacheKey":"data:wydmefk:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydmeft","cacheKey":"data:wydmeft:cctv","dataCount":2,"dataSize":199,"errorMessage":null,"success":true},{"geohashId":"wydmefw","cacheKey":"data:wydmefw:cctv","dataCount":3,"dataSize":301,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:57:52.842 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:52.842915900Z","nanoTime":31858856774800,"traceId":"770d44c6","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:57:52.842 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:57:52.842 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.54189064410757, 127.08681086870186)
2025-11-21 20:57:52.842 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:57:52.929 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:57:52.929 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:57:52.929 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:57:52.929 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.54189064410757, 127.08681086870186), 반경: 500m
2025-11-21 20:57:53.014 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:57:53.014 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 127건
2025-11-21 20:57:53.016 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:57:53.016 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:57:53.016 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 광진구
2025-11-21 20:57:53.017 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 광진구
2025-11-21 20:57:53.017 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:57:53.017 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:57:53.017 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:57:53.017 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.672940923
2025-11-21 20:57:53.017 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:53.017515Z","nanoTime":31859031421800,"traceId":"770d44c6","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":174647000,"duration_ms":174,"resultData":{"latitude":37.54189064410757,"longitude":127.08681086870186,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":174421300,"addressApiResult":{"cached":false,"cacheKey":"address:37.54189064410757:127.08681086870186","roadAddress":"서울특별시 광진구 광나루로36길 47","jibunAddress":"서울 광진구 구의동 238-1","responseSize":74,"executionTimeNs":87317500,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:광진구","guName":"광진구","arrestRate":0.672940923,"dataFound":true,"executionTimeNs":522200,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.54189064410757:127.08681086870186:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":1,"CS2":15,"SC4":3,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":0,"PO3":4,"FD6":15,"PK6":15,"OL7":0,"PM9":10},"totalPlaces":127,"responseSize":14681,"executionTimeNs":86581600,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:53.017 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:53.017515Z","nanoTime":31859031596100,"traceId":"770d44c6","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:57:53.017 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:57:53.017 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:57:53.017 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 22개
2025-11-21 20:57:53.017 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 22개 (총 카메라 대수: 22대)
2025-11-21 20:57:53.017 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:57:53.087 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 광진구 동일로76가길 28 (거리: 617m)
2025-11-21 20:57:53.087 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:57:53.087 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:57:53.087 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 20:57:53.087 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:57:53.087 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:53.087714700Z","nanoTime":31859101888300,"traceId":"770d44c6","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":70292200,"duration_ms":70,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":22,"totalCctvAfterFilter":22,"totalCameraCount":22,"filterRate":1.0,"filterExecutionTimeNs":13400,"success":true},"policeQuery":{"queryDurationNs":69817600,"found":true,"nearestAddress":"서울특별시 광진구 동일로76가길 28","nearestDistance":617.1631477791975,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"AT4":1,"CS2":15,"SC4":3,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"PO3":4,"FD6":15,"PK6":15,"PM9":10},"placesAfterFilter":{"CT1":1,"AT4":1,"CS2":15,"SC4":3,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"PO3":4,"FD6":15,"PK6":15,"PM9":10},"totalBeforeFilter":127,"totalAfterFilter":127,"filterRate":1.0,"filterExecutionTimeNs":110500,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:53.087 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:53.087714700Z","nanoTime":31859102092800,"traceId":"770d44c6","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:57:53.087 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:57:53.087 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 56.38, 편의성: 32.26, 종합: 44.32
2025-11-21 20:57:53.087 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:53.087714700Z","nanoTime":31859102394500,"traceId":"770d44c6","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":301700,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":22.85460652760031,"policeDistance":617.1631477791975,"cctvScore":73.33333333333333,"cctvCount":22,"arrestRateScore":67.2940923,"arrestRate":0.672940923,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":56.37794298161343,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"AT4":3.0,"CS2":4.339624824968466,"SC4":6.0,"MT1":30.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"PO3":12.0,"FD6":15.0,"PK6":45.0,"PM9":80.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"광진구","guPopulation":345652,"finalScore":32.256894217305266,"success":true},"overallScore":44.317418599459344,"errorMessage":null,"success":true}}
2025-11-21 20:57:53.087 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:53.087714700Z","nanoTime":31859102535800,"traceId":"770d44c6","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:57:53.087 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:57:53.087 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 광진구 동일로76가길 28, latitude=37.545892, longitude=127.091662, geohashId=wydms51)
2025-11-21 20:57:53.087 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 617.1631477791975
2025-11-21 20:57:53.089 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmefm
2025-11-21 20:57:53.089 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:57:53.089 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:53.089725Z","nanoTime":31859103663800,"traceId":"770d44c6","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1128000,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 34m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmefm","dataSize":17075,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17075,"errorMessage":null,"success":true}}
2025-11-21 20:57:53.089 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:57:53.377 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:57:53.377 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.54002993685413, longitude=127.09291881226028, radius=500)
2025-11-21 20:57:53.377 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:57:53.377 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.54002993685413, longitude=127.09291881226028, radius=500
2025-11-21 20:57:53.377 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:53.377397Z","nanoTime":31859391551900,"traceId":"423798b4","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:57:53.377 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:57:53.377 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.54002993685413, lon=127.09291881226028
2025-11-21 20:57:53.377 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:53.377397Z","nanoTime":31859391627000,"traceId":"423798b4","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:57:53.377 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:53.377397Z","nanoTime":31859391677100,"traceId":"423798b4","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":50100,"duration_ms":0,"resultData":{"latitude":37.54002993685413,"longitude":127.09291881226028,"precision":7,"centerHash":"wydms1f","adjacentHashes":["wydms1f","wydms44","wydms45","wydms1g","wydms1e","wydms1d","wydms19","wydms1c","wydms41"],"errorMessage":null,"success":true}}
2025-11-21 20:57:53.377 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydms1f, wydms44, wydms45, wydms1g, wydms1e, wydms1d, wydms19, wydms1c, wydms41]
2025-11-21 20:57:53.377 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydms1f
2025-11-21 20:57:53.377 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:53.377397Z","nanoTime":31859391770700,"traceId":"423798b4","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":218800,"duration_ms":0,"resultData":{"requestLatitude":37.54002993685413,"requestLongitude":127.09291881226028,"requestRadius":500,"centerGeohashId":"wydms1f","nineBlockGeohashes":["wydms1f","wydms44","wydms45","wydms1g","wydms1e","wydms1d","wydms19","wydms1c","wydms41"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:57:53.377 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:53.377397Z","nanoTime":31859391809500,"traceId":"423798b4","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:57:53.377 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:57:53.377 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydms1f
2025-11-21 20:57:53.378 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3389ms)
2025-11-21 20:57:53.378 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:57:53.379 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:57:53.379 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:57:53.379 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.4682ms, 역직렬화: 0.0ms
2025-11-21 20:57:53.379 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:57:53.379 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:53.379467300Z","nanoTime":31859393948800,"traceId":"423798b4","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2139300,"duration_ms":2,"resultData":{"centerGeohashId":"wydms1f","nineBlockGeohashes":["wydms1f","wydms44","wydms45","wydms1g","wydms1e","wydms1d","wydms19","wydms1c","wydms41"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydms1f","hit":false,"valueSize":0,"l1CacheGetDurationNs":338900,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydms1f","cacheKey":"data:wydms1f:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":196000},{"geohashId":"wydms44","cacheKey":"data:wydms44:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":352600},{"geohashId":"wydms45","cacheKey":"data:wydms45:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":146300},{"geohashId":"wydms1g","cacheKey":"data:wydms1g:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":111300},{"geohashId":"wydms1e","cacheKey":"data:wydms1e:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":99300},{"geohashId":"wydms1d","cacheKey":"data:wydms1d:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":97000},{"geohashId":"wydms19","cacheKey":"data:wydms19:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":168200},{"geohashId":"wydms1c","cacheKey":"data:wydms1c:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":138200},{"geohashId":"wydms41","cacheKey":"data:wydms41:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":82700}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1468200,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:57:53.379 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:53.379467300Z","nanoTime":31859394156900,"traceId":"423798b4","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:57:53.379 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:57:53.379 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:57:53.382 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 20건
2025-11-21 20:57:53.384 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:57:53.384 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 20:57:53.384 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:53.384485Z","nanoTime":31859398504100,"traceId":"423798b4","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4347200,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydms1f","wydms44","wydms45","wydms1g","wydms1e","wydms1d","wydms19","wydms1c","wydms41"],"cctvQueryResult":{"queryGeohashIds":["wydms1f","wydms44","wydms45","wydms1g","wydms1e","wydms1d","wydms19","wydms1c","wydms41"],"totalRowsReturned":20,"rowsPerGrid":{"wydms41":5,"wydms19":3,"wydms1f":1,"wydms1g":3,"wydms44":2,"wydms45":3,"wydms1c":2,"wydms1d":1},"queryExecutionTimeNs":2588600,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydms41","cacheKey":"data:wydms41:cctv","dataCount":5,"dataSize":500,"errorMessage":null,"success":true},{"geohashId":"wydms19","cacheKey":"data:wydms19:cctv","dataCount":3,"dataSize":301,"errorMessage":null,"success":true},{"geohashId":"wydms1f","cacheKey":"data:wydms1f:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydms1g","cacheKey":"data:wydms1g:cctv","dataCount":3,"dataSize":300,"errorMessage":null,"success":true},{"geohashId":"wydms44","cacheKey":"data:wydms44:cctv","dataCount":2,"dataSize":200,"errorMessage":null,"success":true},{"geohashId":"wydms45","cacheKey":"data:wydms45:cctv","dataCount":3,"dataSize":301,"errorMessage":null,"success":true},{"geohashId":"wydms1c","cacheKey":"data:wydms1c:cctv","dataCount":2,"dataSize":199,"errorMessage":null,"success":true},{"geohashId":"wydms1d","cacheKey":"data:wydms1d:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:57:53.384 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:53.384485Z","nanoTime":31859398662700,"traceId":"423798b4","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:57:53.384 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:57:53.384 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.54002993685413, 127.09291881226028)
2025-11-21 20:57:53.384 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:57:53.450 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:57:53.450 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:57:53.452 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:57:53.452 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.54002993685413, 127.09291881226028), 반경: 500m
2025-11-21 20:57:53.538 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:57:53.538 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 126건
2025-11-21 20:57:53.538 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:57:53.538 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:57:53.538 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 광진구
2025-11-21 20:57:53.538 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 광진구
2025-11-21 20:57:53.538 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:57:53.538 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:57:53.538 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:57:53.538 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.672940923
2025-11-21 20:57:53.540 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:53.540717500Z","nanoTime":31859554480800,"traceId":"423798b4","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":155818100,"duration_ms":155,"resultData":{"latitude":37.54002993685413,"longitude":127.09291881226028,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":155700000,"addressApiResult":{"cached":false,"cacheKey":"address:37.54002993685413:127.09291881226028","roadAddress":"서울특별시 광진구 아차산로63길 10","jibunAddress":"서울 광진구 구의동 212-26","responseSize":75,"executionTimeNs":67748000,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:광진구","guName":"광진구","arrestRate":0.672940923,"dataFound":true,"executionTimeNs":474700,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.54002993685413:127.09291881226028:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":0,"CS2":15,"SC4":1,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":0,"PO3":2,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":126,"responseSize":14615,"executionTimeNs":87477300,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:53.540 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:53.540717500Z","nanoTime":31859554762300,"traceId":"423798b4","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:57:53.540 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:57:53.540 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:57:53.540 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 20개
2025-11-21 20:57:53.540 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 20개 (총 카메라 대수: 20대)
2025-11-21 20:57:53.540 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:57:53.611 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 광진구 동일로76가길 28 (거리: 661m)
2025-11-21 20:57:53.611 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:57:53.611 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:57:53.611 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 11개 카테고리
2025-11-21 20:57:53.611 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:57:53.611 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:53.611355600Z","nanoTime":31859626853900,"traceId":"423798b4","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":72091600,"duration_ms":72,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":20,"totalCctvAfterFilter":20,"totalCameraCount":20,"filterRate":1.0,"filterExecutionTimeNs":8300,"success":true},"policeQuery":{"queryDurationNs":71651800,"found":true,"nearestAddress":"서울특별시 광진구 동일로76가길 28","nearestDistance":661.1830322537104,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SC4":1,"PO3":2,"FD6":15,"PK6":15,"MT1":3,"PM9":15},"placesAfterFilter":{"BK9":15,"HP8":15,"CS2":15,"AC5":14,"CE7":15,"SC4":1,"PO3":2,"FD6":15,"PK6":15,"MT1":3,"PM9":15},"totalBeforeFilter":126,"totalAfterFilter":125,"filterRate":0.9920634920634921,"filterExecutionTimeNs":80000,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:53.611 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:53.611355600Z","nanoTime":31859627031900,"traceId":"423798b4","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:57:53.611 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:57:53.613 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 52.06, 편의성: 38.30, 종합: 45.18
2025-11-21 20:57:53.613 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:53.613366500Z","nanoTime":31859627231000,"traceId":"423798b4","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":199100,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":17.3521209682862,"policeDistance":661.1830322537104,"cctvScore":66.66666666666666,"cctvCount":20,"arrestRateScore":67.2940923,"arrestRate":0.672940923,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":52.060530647152525,"success":true},"convenienceScore":{"categoryScores":{"BK9":75.0,"HP8":100.0,"CS2":4.339624824968466,"AC5":14.0,"CE7":30.0,"SC4":2.0,"PO3":6.0,"FD6":15.0,"PK6":45.0,"MT1":30.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"광진구","guPopulation":345652,"finalScore":38.30360225681532,"success":true},"overallScore":45.18206645198392,"errorMessage":null,"success":true}}
2025-11-21 20:57:53.613 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:53.613366500Z","nanoTime":31859627385200,"traceId":"423798b4","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:57:53.613 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:57:53.613 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 광진구 동일로76가길 28, latitude=37.545892, longitude=127.091662, geohashId=wydms51)
2025-11-21 20:57:53.613 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 661.1830322537104
2025-11-21 20:57:53.614 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydms1f
2025-11-21 20:57:53.614 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:57:53.614 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:53.614760900Z","nanoTime":31859628652700,"traceId":"423798b4","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1267500,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["학원이(가) 45m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydms1f","dataSize":16638,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":16638,"errorMessage":null,"success":true}}
2025-11-21 20:57:53.614 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:57:54.015 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:57:54.015 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.54164727922895, longitude=127.09842002870526, radius=500)
2025-11-21 20:57:54.015 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:57:54.015 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.54164727922895, longitude=127.09842002870526, radius=500
2025-11-21 20:57:54.015 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.015313800Z","nanoTime":31860029640400,"traceId":"bcfeec45","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:57:54.015 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:57:54.015 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.54164727922895, lon=127.09842002870526
2025-11-21 20:57:54.015 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.015313800Z","nanoTime":31860029724900,"traceId":"bcfeec45","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:57:54.015 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.015313800Z","nanoTime":31860029770300,"traceId":"bcfeec45","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":45400,"duration_ms":0,"resultData":{"latitude":37.54164727922895,"longitude":127.09842002870526,"precision":7,"centerHash":"wydms4n","adjacentHashes":["wydms4n","wydms4q","wydms4r","wydms4p","wydms1z","wydms1y","wydms1v","wydms4j","wydms4m"],"errorMessage":null,"success":true}}
2025-11-21 20:57:54.015 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydms4n, wydms4q, wydms4r, wydms4p, wydms1z, wydms1y, wydms1v, wydms4j, wydms4m]
2025-11-21 20:57:54.015 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydms4n
2025-11-21 20:57:54.015 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.015313800Z","nanoTime":31860029872600,"traceId":"bcfeec45","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":232200,"duration_ms":0,"resultData":{"requestLatitude":37.54164727922895,"requestLongitude":127.09842002870526,"requestRadius":500,"centerGeohashId":"wydms4n","nineBlockGeohashes":["wydms4n","wydms4q","wydms4r","wydms4p","wydms1z","wydms1y","wydms1v","wydms4j","wydms4m"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:57:54.015 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.015313800Z","nanoTime":31860029916900,"traceId":"bcfeec45","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:57:54.015 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:57:54.015 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydms4n
2025-11-21 20:57:54.016 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4038ms)
2025-11-21 20:57:54.016 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:57:54.017 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:57:54.017 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:57:54.017 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 0.9405ms, 역직렬화: 0.0ms
2025-11-21 20:57:54.017 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:57:54.017 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.017648100Z","nanoTime":31860031525000,"traceId":"bcfeec45","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1608100,"duration_ms":1,"resultData":{"centerGeohashId":"wydms4n","nineBlockGeohashes":["wydms4n","wydms4q","wydms4r","wydms4p","wydms1z","wydms1y","wydms1v","wydms4j","wydms4m"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydms4n","hit":false,"valueSize":0,"l1CacheGetDurationNs":403800,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydms4n","cacheKey":"data:wydms4n:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":148700},{"geohashId":"wydms4q","cacheKey":"data:wydms4q:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":98100},{"geohashId":"wydms4r","cacheKey":"data:wydms4r:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":84000},{"geohashId":"wydms4p","cacheKey":"data:wydms4p:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":77800},{"geohashId":"wydms1z","cacheKey":"data:wydms1z:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":77800},{"geohashId":"wydms1y","cacheKey":"data:wydms1y:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":129300},{"geohashId":"wydms1v","cacheKey":"data:wydms1v:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":89600},{"geohashId":"wydms4j","cacheKey":"data:wydms4j:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":87000},{"geohashId":"wydms4m","cacheKey":"data:wydms4m:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":96000}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":940500,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:57:54.017 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.017648100Z","nanoTime":31860031708700,"traceId":"bcfeec45","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:57:54.017 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:57:54.017 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:57:54.020 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 6건
2025-11-21 20:57:54.022 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:57:54.022 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 5개
2025-11-21 20:57:54.022 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.022075200Z","nanoTime":31860036190100,"traceId":"bcfeec45","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4481400,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydms4n","wydms4q","wydms4r","wydms4p","wydms1z","wydms1y","wydms1v","wydms4j","wydms4m"],"cctvQueryResult":{"queryGeohashIds":["wydms4n","wydms4q","wydms4r","wydms4p","wydms1z","wydms1y","wydms1v","wydms4j","wydms4m"],"totalRowsReturned":6,"rowsPerGrid":{"wydms4p":1,"wydms4q":2,"wydms4r":1,"wydms4n":1,"wydms4j":1},"queryExecutionTimeNs":2888500,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydms4p","cacheKey":"data:wydms4p:cctv","dataCount":1,"dataSize":97,"errorMessage":null,"success":true},{"geohashId":"wydms4q","cacheKey":"data:wydms4q:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydms4r","cacheKey":"data:wydms4r:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydms4n","cacheKey":"data:wydms4n:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydms4j","cacheKey":"data:wydms4j:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:57:54.022 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.022075200Z","nanoTime":31860036311500,"traceId":"bcfeec45","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:57:54.022 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:57:54.022 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.54164727922895, 127.09842002870526)
2025-11-21 20:57:54.022 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:57:54.078 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:57:54.078 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:57:54.079 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:57:54.079 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.54164727922895, 127.09842002870526), 반경: 500m
2025-11-21 20:57:54.161 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:57:54.161 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 119건
2025-11-21 20:57:54.161 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:57:54.161 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:57:54.161 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 광진구
2025-11-21 20:57:54.161 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 광진구
2025-11-21 20:57:54.161 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:57:54.161 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:57:54.161 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:57:54.161 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.672940923
2025-11-21 20:57:54.161 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.161045100Z","nanoTime":31860179367600,"traceId":"bcfeec45","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":143056100,"duration_ms":143,"resultData":{"latitude":37.54164727922895,"longitude":127.09842002870526,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":142948100,"addressApiResult":{"cached":false,"cacheKey":"address:37.54164727922895:127.09842002870526","roadAddress":"서울특별시 광진구 아차산로 508","jibunAddress":"서울 광진구 광장동 569","responseSize":70,"executionTimeNs":57234100,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:광진구","guName":"광진구","arrestRate":0.672940923,"dataFound":true,"executionTimeNs":590400,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.54164727922895:127.09842002870526:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":0,"CS2":15,"SC4":5,"MT1":3,"BK9":13,"HP8":15,"AC5":15,"CE7":15,"SW8":0,"PO3":1,"FD6":15,"PK6":10,"OL7":0,"PM9":12},"totalPlaces":119,"responseSize":13791,"executionTimeNs":85123600,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:54.161 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.161045100Z","nanoTime":31860179603600,"traceId":"bcfeec45","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:57:54.161 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:57:54.161 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:57:54.161 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 6개
2025-11-21 20:57:54.161 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 6개 (총 카메라 대수: 6대)
2025-11-21 20:57:54.161 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:57:54.251 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구  등용로 24  (거리: 533m)
2025-11-21 20:57:54.251 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:57:54.251 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:57:54.252 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 11개 카테고리
2025-11-21 20:57:54.252 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:57:54.252 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.252226500Z","nanoTime":31860266093300,"traceId":"bcfeec45","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":86489700,"duration_ms":86,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":6,"totalCctvAfterFilter":6,"totalCameraCount":6,"filterRate":1.0,"filterExecutionTimeNs":5800,"success":true},"policeQuery":{"queryDurationNs":86055900,"found":true,"nearestAddress":"서울특별시 동작구  등용로 24 ","nearestDistance":532.741683289483,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"BK9":13,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SC4":5,"PO3":1,"FD6":15,"PK6":10,"MT1":3,"PM9":12},"placesAfterFilter":{"BK9":13,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SC4":5,"PO3":1,"FD6":15,"PK6":10,"MT1":3,"PM9":12},"totalBeforeFilter":119,"totalAfterFilter":119,"filterRate":1.0,"filterExecutionTimeNs":78200,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:54.252 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.252226500Z","nanoTime":31860266312800,"traceId":"bcfeec45","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:57:54.252 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:57:54.252 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 38.21, 편의성: 36.21, 종합: 37.21
2025-11-21 20:57:54.252 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.252226500Z","nanoTime":31860266521800,"traceId":"bcfeec45","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":209000,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":33.40728958881462,"policeDistance":532.741683289483,"cctvScore":20.0,"cctvCount":6,"arrestRateScore":67.2940923,"arrestRate":0.672940923,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":38.21041456664439,"success":true},"convenienceScore":{"categoryScores":{"BK9":65.0,"HP8":100.0,"CS2":4.339624824968466,"AC5":15.0,"CE7":30.0,"SC4":10.0,"PO3":3.0,"FD6":15.0,"PK6":30.0,"MT1":30.0,"PM9":96.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"광진구","guPopulation":345652,"finalScore":36.212693165906224,"success":true},"overallScore":37.21155386627531,"errorMessage":null,"success":true}}
2025-11-21 20:57:54.252 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.252226500Z","nanoTime":31860266654900,"traceId":"bcfeec45","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:57:54.252 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:57:54.252 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구  등용로 24 , latitude=37.544453, longitude=127.103318, geohashId=wydms6c)
2025-11-21 20:57:54.252 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 532.741683289483
2025-11-21 20:57:54.253 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydms4n
2025-11-21 20:57:54.253 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:57:54.253 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.253658Z","nanoTime":31860267947300,"traceId":"bcfeec45","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1292400,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 34m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","CCTV 설치 대수가 적은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydms4n","dataSize":15251,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":15251,"errorMessage":null,"success":true}}
2025-11-21 20:57:54.253 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:57:54.597 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:57:54.598 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.54100674378508, longitude=127.08805451031752, radius=500)
2025-11-21 20:57:54.598 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:57:54.598 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.54100674378508, longitude=127.08805451031752, radius=500
2025-11-21 20:57:54.598 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.598262400Z","nanoTime":31860612118400,"traceId":"d216d4c3","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:57:54.598 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:57:54.598 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.54100674378508, lon=127.08805451031752
2025-11-21 20:57:54.598 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.598262400Z","nanoTime":31860612172000,"traceId":"d216d4c3","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:57:54.598 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.598262400Z","nanoTime":31860612198400,"traceId":"d216d4c3","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":26400,"duration_ms":0,"resultData":{"latitude":37.54100674378508,"longitude":127.08805451031752,"precision":7,"centerHash":"wydmefn","adjacentHashes":["wydmefn","wydmefq","wydmefr","wydmefp","wydmecz","wydmecy","wydmecv","wydmefj","wydmefm"],"errorMessage":null,"success":true}}
2025-11-21 20:57:54.598 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmefn, wydmefq, wydmefr, wydmefp, wydmecz, wydmecy, wydmecv, wydmefj, wydmefm]
2025-11-21 20:57:54.598 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmefn
2025-11-21 20:57:54.598 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.598262400Z","nanoTime":31860612276600,"traceId":"d216d4c3","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":158200,"duration_ms":0,"resultData":{"requestLatitude":37.54100674378508,"requestLongitude":127.08805451031752,"requestRadius":500,"centerGeohashId":"wydmefn","nineBlockGeohashes":["wydmefn","wydmefq","wydmefr","wydmefp","wydmecz","wydmecy","wydmecv","wydmefj","wydmefm"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:57:54.598 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.598262400Z","nanoTime":31860612308900,"traceId":"d216d4c3","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:57:54.598 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:57:54.598 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmefn
2025-11-21 20:57:54.598 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.2808ms)
2025-11-21 20:57:54.598 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:57:54.599 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:57:54.599 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 4개, 미스: 5개
2025-11-21 20:57:54.599 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.2138ms, 역직렬화: 0.0922ms
2025-11-21 20:57:54.599 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:57:54.600 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.599261100Z","nanoTime":31860613995600,"traceId":"d216d4c3","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1686700,"duration_ms":1,"resultData":{"centerGeohashId":"wydmefn","nineBlockGeohashes":["wydmefn","wydmefq","wydmefr","wydmefp","wydmecz","wydmecy","wydmecv","wydmefj","wydmefm"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmefn","hit":false,"valueSize":0,"l1CacheGetDurationNs":280800,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmefn","cacheKey":"data:wydmefn:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":101,"l2CacheGetDurationNs":219000},{"geohashId":"wydmefq","cacheKey":"data:wydmefq:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":501,"l2CacheGetDurationNs":177600},{"geohashId":"wydmefr","cacheKey":"data:wydmefr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":77300},{"geohashId":"wydmefp","cacheKey":"data:wydmefp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":71300},{"geohashId":"wydmecz","cacheKey":"data:wydmecz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":70800},{"geohashId":"wydmecy","cacheKey":"data:wydmecy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":64000},{"geohashId":"wydmecv","cacheKey":"data:wydmecv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":70700},{"geohashId":"wydmefj","cacheKey":"data:wydmefj:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":301,"l2CacheGetDurationNs":152400},{"geohashId":"wydmefm","cacheKey":"data:wydmefm:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":200,"l2CacheGetDurationNs":154900}],"l2TotalHits":4,"l2TotalMisses":5,"l2CacheTotalDurationNs":1213800,"l2JsonDeserializeTotalDurationNs":92200,"errorMessage":null,"success":true}}
2025-11-21 20:57:54.600 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.600260500Z","nanoTime":31860614129000,"traceId":"d216d4c3","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:57:54.600 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:57:54.600 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 5개
2025-11-21 20:57:54.603 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 11건
2025-11-21 20:57:54.604 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:57:54.605 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 20:57:54.605 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.605671400Z","nanoTime":31860619453700,"traceId":"d216d4c3","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5324700,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydmefr","wydmefp","wydmecz","wydmecy","wydmecv"],"cctvQueryResult":{"queryGeohashIds":["wydmefr","wydmefp","wydmecz","wydmecy","wydmecv"],"totalRowsReturned":11,"rowsPerGrid":{"wydmefp":4,"wydmecy":2,"wydmecz":2,"wydmecv":3},"queryExecutionTimeNs":4138800,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmefp","cacheKey":"data:wydmefp:cctv","dataCount":4,"dataSize":399,"errorMessage":null,"success":true},{"geohashId":"wydmecy","cacheKey":"data:wydmecy:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydmecz","cacheKey":"data:wydmecz:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydmecv","cacheKey":"data:wydmecv:cctv","dataCount":3,"dataSize":299,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:57:54.605 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.605671400Z","nanoTime":31860619622500,"traceId":"d216d4c3","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:57:54.605 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:57:54.605 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.54100674378508, 127.08805451031752)
2025-11-21 20:57:54.605 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:57:54.669 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:57:54.669 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:57:54.671 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:57:54.671 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.54100674378508, 127.08805451031752), 반경: 500m
2025-11-21 20:57:54.839 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:57:54.839 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 129건
2025-11-21 20:57:54.841 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:57:54.841 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:57:54.841 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 광진구
2025-11-21 20:57:54.843 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 광진구
2025-11-21 20:57:54.843 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:57:54.843 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:57:54.843 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:57:54.843 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.672940923
2025-11-21 20:57:54.843 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.843261300Z","nanoTime":31860858397900,"traceId":"d216d4c3","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":238775400,"duration_ms":238,"resultData":{"latitude":37.54100674378508,"longitude":127.08805451031752,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":238326000,"addressApiResult":{"cached":false,"cacheKey":"address:37.54100674378508:127.08805451031752","roadAddress":"서울특별시 광진구 자양로26길 71","jibunAddress":"서울 광진구 구의동 656","responseSize":71,"executionTimeNs":65322400,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:광진구","guName":"광진구","arrestRate":0.672940923,"dataFound":true,"executionTimeNs":1251200,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.54100674378508:127.08805451031752:500","categoryCount":15,"placesByCategory":{"CT1":3,"AT4":1,"CS2":15,"SC4":3,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":15,"OL7":0,"PM9":10},"totalPlaces":129,"responseSize":14943,"executionTimeNs":171752400,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:54.845 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.845269500Z","nanoTime":31860859031000,"traceId":"d216d4c3","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:57:54.845 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:57:54.845 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:57:54.845 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 22개
2025-11-21 20:57:54.845 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 22개 (총 카메라 대수: 22대)
2025-11-21 20:57:54.845 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:57:54.934 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 광진구 동일로76가길 28 (거리: 629m)
2025-11-21 20:57:54.934 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:57:54.934 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:57:54.934 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 20:57:54.934 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:57:54.935 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.934799400Z","nanoTime":31860949416200,"traceId":"d216d4c3","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":90385200,"duration_ms":90,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":22,"totalCctvAfterFilter":22,"totalCameraCount":22,"filterRate":1.0,"filterExecutionTimeNs":63100,"success":true},"policeQuery":{"queryDurationNs":89580100,"found":true,"nearestAddress":"서울특별시 광진구 동일로76가길 28","nearestDistance":629.4783761424578,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":3,"AT4":1,"CS2":15,"SC4":3,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":15,"PM9":10},"placesAfterFilter":{"CT1":3,"AT4":1,"CS2":15,"SC4":3,"MT1":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":15,"PM9":10},"totalBeforeFilter":129,"totalAfterFilter":129,"filterRate":1.0,"filterExecutionTimeNs":95600,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:54.935 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.935774500Z","nanoTime":31860949744300,"traceId":"d216d4c3","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:57:54.935 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:57:54.936 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 55.92, 편의성: 37.45, 종합: 46.68
2025-11-21 20:57:54.936 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.936098200Z","nanoTime":31860950017400,"traceId":"d216d4c3","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":273100,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":21.315202982192773,"policeDistance":629.4783761424578,"cctvScore":73.33333333333333,"cctvCount":22,"arrestRateScore":67.2940923,"arrestRate":0.672940923,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":55.91612191799116,"success":true},"convenienceScore":{"categoryScores":{"CT1":12.0,"AT4":3.0,"CS2":4.339624824968466,"SC4":6.0,"MT1":30.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":45.0,"PM9":80.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"광진구","guPopulation":345652,"finalScore":37.45283034464061,"success":true},"overallScore":46.68447613131589,"errorMessage":null,"success":true}}
2025-11-21 20:57:54.936 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.936098200Z","nanoTime":31860950179100,"traceId":"d216d4c3","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:57:54.936 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:57:54.936 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 광진구 동일로76가길 28, latitude=37.545892, longitude=127.091662, geohashId=wydms51)
2025-11-21 20:57:54.936 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 629.4783761424578
2025-11-21 20:57:54.937 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmefn
2025-11-21 20:57:54.937 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:57:54.937 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:54.937485700Z","nanoTime":31860951610600,"traceId":"d216d4c3","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1431500,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 81m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmefn","dataSize":17436,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17436,"errorMessage":null,"success":true}}
2025-11-21 20:57:54.937 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:57:55.013 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:57:55.013 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.53695555156804, longitude=127.0835013024654, radius=500)
2025-11-21 20:57:55.013 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:57:55.013 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.53695555156804, longitude=127.0835013024654, radius=500
2025-11-21 20:57:55.013 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.013309700Z","nanoTime":31861027334600,"traceId":"d61e01a7","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:57:55.013 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:57:55.013 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.53695555156804, lon=127.0835013024654
2025-11-21 20:57:55.013 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.013624500Z","nanoTime":31861027427400,"traceId":"d61e01a7","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:57:55.013 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.013624500Z","nanoTime":31861027471300,"traceId":"d61e01a7","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":43900,"duration_ms":0,"resultData":{"latitude":37.53695555156804,"longitude":127.0835013024654,"precision":7,"centerHash":"wydmec7","adjacentHashes":["wydmec7","wydmece","wydmecs","wydmeck","wydmech","wydmec5","wydmec4","wydmec6","wydmecd"],"errorMessage":null,"success":true}}
2025-11-21 20:57:55.013 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmec7, wydmece, wydmecs, wydmeck, wydmech, wydmec5, wydmec4, wydmec6, wydmecd]
2025-11-21 20:57:55.013 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmec7
2025-11-21 20:57:55.013 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.013624500Z","nanoTime":31861027617000,"traceId":"d61e01a7","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":282400,"duration_ms":0,"resultData":{"requestLatitude":37.53695555156804,"requestLongitude":127.0835013024654,"requestRadius":500,"centerGeohashId":"wydmec7","nineBlockGeohashes":["wydmec7","wydmece","wydmecs","wydmeck","wydmech","wydmec5","wydmec4","wydmec6","wydmecd"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:57:55.013 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.013624500Z","nanoTime":31861027662800,"traceId":"d61e01a7","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:57:55.013 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:57:55.013 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmec7
2025-11-21 20:57:55.014 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5487ms)
2025-11-21 20:57:55.014 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:57:55.016 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:57:55.016 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:57:55.016 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.4792ms, 역직렬화: 0.0ms
2025-11-21 20:57:55.016 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:57:55.016 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.016052300Z","nanoTime":31861030115900,"traceId":"d61e01a7","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2453100,"duration_ms":2,"resultData":{"centerGeohashId":"wydmec7","nineBlockGeohashes":["wydmec7","wydmece","wydmecs","wydmeck","wydmech","wydmec5","wydmec4","wydmec6","wydmecd"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmec7","hit":false,"valueSize":0,"l1CacheGetDurationNs":548700,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmec7","cacheKey":"data:wydmec7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":196600},{"geohashId":"wydmece","cacheKey":"data:wydmece:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":290900},{"geohashId":"wydmecs","cacheKey":"data:wydmecs:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":165000},{"geohashId":"wydmeck","cacheKey":"data:wydmeck:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":125200},{"geohashId":"wydmech","cacheKey":"data:wydmech:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":90500},{"geohashId":"wydmec5","cacheKey":"data:wydmec5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":79800},{"geohashId":"wydmec4","cacheKey":"data:wydmec4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":109200},{"geohashId":"wydmec6","cacheKey":"data:wydmec6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":167300},{"geohashId":"wydmecd","cacheKey":"data:wydmecd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":148900}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1479200,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:57:55.016 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.016052300Z","nanoTime":31861030310400,"traceId":"d61e01a7","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:57:55.016 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:57:55.016 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:57:55.018 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 14건
2025-11-21 20:57:55.019 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:57:55.019 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 20:57:55.019 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.019527400Z","nanoTime":31861034975600,"traceId":"d61e01a7","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4665200,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmec7","wydmece","wydmecs","wydmeck","wydmech","wydmec5","wydmec4","wydmec6","wydmecd"],"cctvQueryResult":{"queryGeohashIds":["wydmec7","wydmece","wydmecs","wydmeck","wydmech","wydmec5","wydmec4","wydmec6","wydmecd"],"totalRowsReturned":14,"rowsPerGrid":{"wydmeck":2,"wydmec5":2,"wydmece":1,"wydmec6":1,"wydmec7":2,"wydmecs":3,"wydmec4":2,"wydmecd":1},"queryExecutionTimeNs":2233000,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmeck","cacheKey":"data:wydmeck:cctv","dataCount":2,"dataSize":200,"errorMessage":null,"success":true},{"geohashId":"wydmec5","cacheKey":"data:wydmec5:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydmece","cacheKey":"data:wydmece:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmec6","cacheKey":"data:wydmec6:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmec7","cacheKey":"data:wydmec7:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydmecs","cacheKey":"data:wydmecs:cctv","dataCount":3,"dataSize":300,"errorMessage":null,"success":true},{"geohashId":"wydmec4","cacheKey":"data:wydmec4:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydmecd","cacheKey":"data:wydmecd:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:57:55.021 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.021393400Z","nanoTime":31861035154300,"traceId":"d61e01a7","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:57:55.021 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:57:55.021 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.53695555156804, 127.0835013024654)
2025-11-21 20:57:55.021 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:57:55.095 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:57:55.095 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:57:55.095 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:57:55.095 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.53695555156804, 127.0835013024654), 반경: 500m
2025-11-21 20:57:55.177 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:57:55.177 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 136건
2025-11-21 20:57:55.177 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:57:55.179 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:57:55.179 [http-nio-8185-exec-5] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 20:57:55.179 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:57:55.179 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:57:55.179 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:57:55.179 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 20:57:55.179 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.179560800Z","nanoTime":31861193681100,"traceId":"d61e01a7","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":158526800,"duration_ms":158,"resultData":{"latitude":37.53695555156804,"longitude":127.0835013024654,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":158389800,"addressApiResult":{"cached":false,"cacheKey":"address:37.53695555156804:127.0835013024654","roadAddress":"주소 없음","jibunAddress":"서울 광진구 자양동 204-2","responseSize":59,"executionTimeNs":76091700,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":155700,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.53695555156804:127.0835013024654:500","categoryCount":15,"placesByCategory":{"CT1":5,"AT4":3,"CS2":15,"SC4":3,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalPlaces":136,"responseSize":15739,"executionTimeNs":82142400,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:55.179 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.179560800Z","nanoTime":31861193972000,"traceId":"d61e01a7","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:57:55.179 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:57:55.179 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:57:55.179 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 14개
2025-11-21 20:57:55.179 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 14개 (총 카메라 대수: 14대)
2025-11-21 20:57:55.179 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:57:55.273 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 광진구 능동로 385 (거리: 582m)
2025-11-21 20:57:55.273 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:57:55.273 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:57:55.273 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 20:57:55.273 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:57:55.273 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.273072600Z","nanoTime":31861288199700,"traceId":"d61e01a7","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":94227700,"duration_ms":94,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":14,"totalCctvAfterFilter":14,"totalCameraCount":14,"filterRate":1.0,"filterExecutionTimeNs":8900,"success":true},"policeQuery":{"queryDurationNs":93747700,"found":true,"nearestAddress":"서울특별시 광진구 능동로 385","nearestDistance":581.5891495645225,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":5,"AT4":3,"CS2":15,"SC4":3,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"placesAfterFilter":{"CT1":5,"AT4":3,"CS2":15,"SC4":3,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalBeforeFilter":136,"totalAfterFilter":136,"filterRate":1.0,"filterExecutionTimeNs":97500,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:55.273 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.273072600Z","nanoTime":31861288418000,"traceId":"d61e01a7","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:57:55.273 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:57:55.273 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 26.86, 편의성: 35.98, 종합: 31.42
2025-11-21 20:57:55.273 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.273072600Z","nanoTime":31861288667100,"traceId":"d61e01a7","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":249100,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":27.301356304434695,"policeDistance":581.5891495645225,"cctvScore":46.666666666666664,"cctvCount":14,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":26.857073557997076,"success":true},"convenienceScore":{"categoryScores":{"CT1":20.0,"AT4":9.0,"CS2":3.75,"SC4":6.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":6.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":35.983333333333334,"success":true},"overallScore":31.420203445665205,"errorMessage":null,"success":true}}
2025-11-21 20:57:55.275 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.275097Z","nanoTime":31861288914600,"traceId":"d61e01a7","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:57:55.275 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:57:55.275 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 광진구 능동로 385, latitude=37.536619, longitude=127.076919, geohashId=wydme9q)
2025-11-21 20:57:55.275 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 581.5891495645225
2025-11-21 20:57:55.275 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmec7
2025-11-21 20:57:55.275 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:57:55.277 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.275097Z","nanoTime":31861290843500,"traceId":"d61e01a7","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1928900,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["은행이(가) 41m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmec7","dataSize":17927,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17927,"errorMessage":null,"success":true}}
2025-11-21 20:57:55.277 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:57:55.681 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:57:55.681 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.53445472610468, longitude=127.07770566420709, radius=500)
2025-11-21 20:57:55.681 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:57:55.681 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.53445472610468, longitude=127.07770566420709, radius=500
2025-11-21 20:57:55.681 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.681497200Z","nanoTime":31861695634400,"traceId":"0596b426","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:57:55.681 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:57:55.681 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.53445472610468, lon=127.07770566420709
2025-11-21 20:57:55.681 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.681497200Z","nanoTime":31861695686700,"traceId":"0596b426","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:57:55.681 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.681497200Z","nanoTime":31861695712400,"traceId":"0596b426","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":25700,"duration_ms":0,"resultData":{"latitude":37.53445472610468,"longitude":127.07770566420709,"precision":7,"centerHash":"wydme8z","adjacentHashes":["wydme8z","wydme9p","wydmec0","wydmebb","wydmeb8","wydme8x","wydme8w","wydme8y","wydme9n"],"errorMessage":null,"success":true}}
2025-11-21 20:57:55.681 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydme8z, wydme9p, wydmec0, wydmebb, wydmeb8, wydme8x, wydme8w, wydme8y, wydme9n]
2025-11-21 20:57:55.681 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydme8z
2025-11-21 20:57:55.681 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.681497200Z","nanoTime":31861695823700,"traceId":"0596b426","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":189300,"duration_ms":0,"resultData":{"requestLatitude":37.53445472610468,"requestLongitude":127.07770566420709,"requestRadius":500,"centerGeohashId":"wydme8z","nineBlockGeohashes":["wydme8z","wydme9p","wydmec0","wydmebb","wydmeb8","wydme8x","wydme8w","wydme8y","wydme9n"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:57:55.681 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.681497200Z","nanoTime":31861695866800,"traceId":"0596b426","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:57:55.681 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:57:55.681 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydme8z
2025-11-21 20:57:55.681 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3189ms)
2025-11-21 20:57:55.682 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:57:55.682 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:57:55.683 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:57:55.683 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 0.9408ms, 역직렬화: 0.0ms
2025-11-21 20:57:55.683 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:57:55.683 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.683495600Z","nanoTime":31861697302500,"traceId":"0596b426","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1435700,"duration_ms":1,"resultData":{"centerGeohashId":"wydme8z","nineBlockGeohashes":["wydme8z","wydme9p","wydmec0","wydmebb","wydmeb8","wydme8x","wydme8w","wydme8y","wydme9n"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydme8z","hit":false,"valueSize":0,"l1CacheGetDurationNs":318900,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydme8z","cacheKey":"data:wydme8z:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":158700},{"geohashId":"wydme9p","cacheKey":"data:wydme9p:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":100000},{"geohashId":"wydmec0","cacheKey":"data:wydmec0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":88100},{"geohashId":"wydmebb","cacheKey":"data:wydmebb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":83300},{"geohashId":"wydmeb8","cacheKey":"data:wydmeb8:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":82200},{"geohashId":"wydme8x","cacheKey":"data:wydme8x:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":82200},{"geohashId":"wydme8w","cacheKey":"data:wydme8w:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":80700},{"geohashId":"wydme8y","cacheKey":"data:wydme8y:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":134300},{"geohashId":"wydme9n","cacheKey":"data:wydme9n:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":93500}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":940800,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:57:55.683 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.683495600Z","nanoTime":31861697441500,"traceId":"0596b426","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:57:55.683 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:57:55.683 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:57:55.686 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 22건
2025-11-21 20:57:55.687 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:57:55.687 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 20:57:55.688 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.687341400Z","nanoTime":31861702033900,"traceId":"0596b426","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4592400,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydme8z","wydme9p","wydmec0","wydmebb","wydmeb8","wydme8x","wydme8w","wydme8y","wydme9n"],"cctvQueryResult":{"queryGeohashIds":["wydme8z","wydme9p","wydmec0","wydmebb","wydmeb8","wydme8x","wydme8w","wydme8y","wydme9n"],"totalRowsReturned":22,"rowsPerGrid":{"wydmec0":2,"wydmeb8":4,"wydme9p":3,"wydme8z":2,"wydme9n":1,"wydme8w":1,"wydme8x":4,"wydmebb":2,"wydme8y":3},"queryExecutionTimeNs":2829200,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmec0","cacheKey":"data:wydmec0:cctv","dataCount":2,"dataSize":200,"errorMessage":null,"success":true},{"geohashId":"wydmeb8","cacheKey":"data:wydmeb8:cctv","dataCount":4,"dataSize":401,"errorMessage":null,"success":true},{"geohashId":"wydme9p","cacheKey":"data:wydme9p:cctv","dataCount":3,"dataSize":300,"errorMessage":null,"success":true},{"geohashId":"wydme8z","cacheKey":"data:wydme8z:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydme9n","cacheKey":"data:wydme9n:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydme8w","cacheKey":"data:wydme8w:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydme8x","cacheKey":"data:wydme8x:cctv","dataCount":4,"dataSize":401,"errorMessage":null,"success":true},{"geohashId":"wydmebb","cacheKey":"data:wydmebb:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydme8y","cacheKey":"data:wydme8y:cctv","dataCount":3,"dataSize":301,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:57:55.688 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.688342900Z","nanoTime":31861702164400,"traceId":"0596b426","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:57:55.688 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:57:55.688 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.53445472610468, 127.07770566420709)
2025-11-21 20:57:55.688 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:57:55.772 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:57:55.772 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:57:55.773 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:57:55.773 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.53445472610468, 127.07770566420709), 반경: 500m
2025-11-21 20:57:55.849 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:57:55.849 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 127건
2025-11-21 20:57:55.849 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:57:55.849 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:57:55.849 [http-nio-8185-exec-4] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 20:57:55.849 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:57:55.849 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:57:55.849 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:57:55.849 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 20:57:55.849 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.849141400Z","nanoTime":31861867221600,"traceId":"0596b426","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":165057200,"duration_ms":165,"resultData":{"latitude":37.53445472610468,"longitude":127.07770566420709,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":164980700,"addressApiResult":{"cached":false,"cacheKey":"address:37.53445472610468:127.07770566420709","roadAddress":"주소 없음","jibunAddress":"서울 광진구 자양동 612-13","responseSize":60,"executionTimeNs":84650100,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":29800,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.53445472610468:127.07770566420709:500","categoryCount":15,"placesByCategory":{"CT1":2,"AT4":2,"CS2":15,"SC4":4,"MT1":1,"BK9":9,"HP8":15,"AC5":15,"CE7":15,"SW8":0,"PO3":4,"FD6":15,"PK6":15,"OL7":1,"PM9":14},"totalPlaces":127,"responseSize":14658,"executionTimeNs":80300800,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:55.849 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.849141400Z","nanoTime":31861867426900,"traceId":"0596b426","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:57:55.849 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:57:55.849 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:57:55.849 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 22개
2025-11-21 20:57:55.849 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 22개 (총 카메라 대수: 22대)
2025-11-21 20:57:55.849 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:57:55.942 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 광진구 능동로 385 (거리: 250m)
2025-11-21 20:57:55.942 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:57:55.942 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:57:55.942 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 20:57:55.942 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:57:55.942 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.942703200Z","nanoTime":31861957514800,"traceId":"0596b426","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":90087900,"duration_ms":90,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":22,"totalCctvAfterFilter":22,"totalCameraCount":22,"filterRate":1.0,"filterExecutionTimeNs":9300,"success":true},"policeQuery":{"queryDurationNs":89417400,"found":true,"nearestAddress":"서울특별시 광진구 능동로 385","nearestDistance":250.4532083985607,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":2,"AT4":2,"CS2":15,"SC4":4,"MT1":1,"BK9":9,"HP8":15,"AC5":15,"CE7":15,"PO3":4,"FD6":15,"PK6":15,"OL7":1,"PM9":14},"placesAfterFilter":{"CT1":2,"AT4":2,"CS2":15,"SC4":4,"MT1":1,"BK9":9,"HP8":15,"AC5":15,"CE7":15,"PO3":4,"FD6":15,"PK6":15,"OL7":1,"PM9":14},"totalBeforeFilter":127,"totalAfterFilter":127,"filterRate":1.0,"filterExecutionTimeNs":140900,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:55.942 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.942703200Z","nanoTime":31861957833300,"traceId":"0596b426","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:57:55.942 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:57:55.942 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 49.94, 편의성: 28.77, 종합: 39.35
2025-11-21 20:57:55.942 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.942703200Z","nanoTime":31861958119000,"traceId":"0596b426","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":285700,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":68.69334895017991,"policeDistance":250.4532083985607,"cctvScore":73.33333333333333,"cctvCount":22,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":49.941338018387306,"success":true},"convenienceScore":{"categoryScores":{"CT1":8.0,"AT4":6.0,"CS2":3.75,"SC4":8.0,"MT1":10.0,"BK9":45.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"PO3":12.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":28.767857142857142,"success":true},"overallScore":39.354597580622226,"errorMessage":null,"success":true}}
2025-11-21 20:57:55.942 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.942703200Z","nanoTime":31861958332200,"traceId":"0596b426","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:57:55.942 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:57:55.942 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 광진구 능동로 385, latitude=37.536619, longitude=127.076919, geohashId=wydme9q)
2025-11-21 20:57:55.944 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 250.4532083985607
2025-11-21 20:57:55.944 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydme8z
2025-11-21 20:57:55.944 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:57:55.944 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:55.944711900Z","nanoTime":31861960181400,"traceId":"0596b426","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1849200,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["학원이(가) 30m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydme8z","dataSize":17112,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17112,"errorMessage":null,"success":true}}
2025-11-21 20:57:55.944 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:57:56.677 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:57:56.677 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.53330489436081, longitude=127.0722737576413, radius=500)
2025-11-21 20:57:56.677 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:57:56.677 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.53330489436081, longitude=127.0722737576413, radius=500
2025-11-21 20:57:56.677 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:56.677957800Z","nanoTime":31862692483100,"traceId":"93ff9570","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:57:56.677 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:57:56.677 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.53330489436081, lon=127.0722737576413
2025-11-21 20:57:56.677 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:56.677957800Z","nanoTime":31862692560600,"traceId":"93ff9570","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:57:56.678 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:56.677957800Z","nanoTime":31862692607000,"traceId":"93ff9570","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":46400,"duration_ms":0,"resultData":{"latitude":37.53330489436081,"longitude":127.0722737576413,"precision":7,"centerHash":"wydme8e","adjacentHashes":["wydme8e","wydme8g","wydme8u","wydme8s","wydme8k","wydme87","wydme86","wydme8d","wydme8f"],"errorMessage":null,"success":true}}
2025-11-21 20:57:56.678 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydme8e, wydme8g, wydme8u, wydme8s, wydme8k, wydme87, wydme86, wydme8d, wydme8f]
2025-11-21 20:57:56.678 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydme8e
2025-11-21 20:57:56.678 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:56.678894100Z","nanoTime":31862692713100,"traceId":"93ff9570","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":230000,"duration_ms":0,"resultData":{"requestLatitude":37.53330489436081,"requestLongitude":127.0722737576413,"requestRadius":500,"centerGeohashId":"wydme8e","nineBlockGeohashes":["wydme8e","wydme8g","wydme8u","wydme8s","wydme8k","wydme87","wydme86","wydme8d","wydme8f"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:57:56.678 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:56.678894100Z","nanoTime":31862692756000,"traceId":"93ff9570","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:57:56.678 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:57:56.678 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydme8e
2025-11-21 20:57:56.679 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4211ms)
2025-11-21 20:57:56.679 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:57:56.680 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:57:56.680 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:57:56.680 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 0.9043ms, 역직렬화: 0.0ms
2025-11-21 20:57:56.680 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:57:56.680 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:56.680353900Z","nanoTime":31862694311800,"traceId":"93ff9570","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1555800,"duration_ms":1,"resultData":{"centerGeohashId":"wydme8e","nineBlockGeohashes":["wydme8e","wydme8g","wydme8u","wydme8s","wydme8k","wydme87","wydme86","wydme8d","wydme8f"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydme8e","hit":false,"valueSize":0,"l1CacheGetDurationNs":421100,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydme8e","cacheKey":"data:wydme8e:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":138100},{"geohashId":"wydme8g","cacheKey":"data:wydme8g:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":91700},{"geohashId":"wydme8u","cacheKey":"data:wydme8u:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":82700},{"geohashId":"wydme8s","cacheKey":"data:wydme8s:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":78700},{"geohashId":"wydme8k","cacheKey":"data:wydme8k:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":81500},{"geohashId":"wydme87","cacheKey":"data:wydme87:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":77900},{"geohashId":"wydme86","cacheKey":"data:wydme86:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":118000},{"geohashId":"wydme8d","cacheKey":"data:wydme8d:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":116500},{"geohashId":"wydme8f","cacheKey":"data:wydme8f:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":71700}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":904300,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:57:56.680 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:56.680660900Z","nanoTime":31862694468800,"traceId":"93ff9570","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:57:56.680 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:57:56.680 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:57:56.684 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 18건
2025-11-21 20:57:56.684 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:57:56.684 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 20:57:56.684 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:56.684823900Z","nanoTime":31862700524200,"traceId":"93ff9570","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6055400,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydme8e","wydme8g","wydme8u","wydme8s","wydme8k","wydme87","wydme86","wydme8d","wydme8f"],"cctvQueryResult":{"queryGeohashIds":["wydme8e","wydme8g","wydme8u","wydme8s","wydme8k","wydme87","wydme86","wydme8d","wydme8f"],"totalRowsReturned":18,"rowsPerGrid":{"wydme8s":4,"wydme8d":1,"wydme8e":2,"wydme8k":3,"wydme86":3,"wydme8f":3,"wydme87":1,"wydme8g":1},"queryExecutionTimeNs":3917600,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydme8s","cacheKey":"data:wydme8s:cctv","dataCount":4,"dataSize":400,"errorMessage":null,"success":true},{"geohashId":"wydme8d","cacheKey":"data:wydme8d:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydme8e","cacheKey":"data:wydme8e:cctv","dataCount":2,"dataSize":200,"errorMessage":null,"success":true},{"geohashId":"wydme8k","cacheKey":"data:wydme8k:cctv","dataCount":3,"dataSize":301,"errorMessage":null,"success":true},{"geohashId":"wydme86","cacheKey":"data:wydme86:cctv","dataCount":3,"dataSize":300,"errorMessage":null,"success":true},{"geohashId":"wydme8f","cacheKey":"data:wydme8f:cctv","dataCount":3,"dataSize":300,"errorMessage":null,"success":true},{"geohashId":"wydme87","cacheKey":"data:wydme87:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydme8g","cacheKey":"data:wydme8g:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:57:56.684 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:56.684823900Z","nanoTime":31862700672600,"traceId":"93ff9570","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:57:56.684 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:57:56.684 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.53330489436081, 127.0722737576413)
2025-11-21 20:57:56.684 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:57:56.784 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:57:56.784 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:57:56.784 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:57:56.784 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.53330489436081, 127.0722737576413), 반경: 500m
2025-11-21 20:57:56.857 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:57:56.857 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 108건
2025-11-21 20:57:56.862 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:57:56.862 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:57:56.862 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 광진구
2025-11-21 20:57:56.862 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 광진구
2025-11-21 20:57:56.862 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:57:56.862 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:57:56.862 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:57:56.862 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.672940923
2025-11-21 20:57:56.862 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:56.862669800Z","nanoTime":31862877252500,"traceId":"93ff9570","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":176579900,"duration_ms":176,"resultData":{"latitude":37.53330489436081,"longitude":127.0722737576413,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":176470000,"addressApiResult":{"cached":false,"cacheKey":"address:37.53330489436081:127.0722737576413","roadAddress":"서울특별시 광진구 뚝섬로36길 19","jibunAddress":"서울 광진구 자양동 789","responseSize":71,"executionTimeNs":101270600,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:광진구","guName":"광진구","arrestRate":0.672940923,"dataFound":true,"executionTimeNs":636900,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.53330489436081:127.0722737576413:500","categoryCount":15,"placesByCategory":{"CT1":2,"AT4":0,"CS2":15,"SC4":5,"MT1":0,"BK9":8,"HP8":15,"AC5":15,"CE7":15,"SW8":0,"PO3":3,"FD6":15,"PK6":6,"OL7":0,"PM9":9},"totalPlaces":108,"responseSize":12492,"executionTimeNs":74562500,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:56.862 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:56.862669800Z","nanoTime":31862877502100,"traceId":"93ff9570","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:57:56.862 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:57:56.862 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:57:56.862 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 18개
2025-11-21 20:57:56.862 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 18개 (총 카메라 대수: 18대)
2025-11-21 20:57:56.862 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:57:56.950 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 광진구  능동로17길 39 화양지구대 (거리: 85m)
2025-11-21 20:57:56.950 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:57:56.950 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:57:56.950 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 11개 카테고리
2025-11-21 20:57:56.950 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:57:56.950 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:56.950729200Z","nanoTime":31862964781600,"traceId":"93ff9570","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":87279500,"duration_ms":87,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":18,"totalCctvAfterFilter":18,"totalCameraCount":18,"filterRate":1.0,"filterExecutionTimeNs":11300,"success":true},"policeQuery":{"queryDurationNs":86818800,"found":true,"nearestAddress":"서울특별시 광진구  능동로17길 39 화양지구대","nearestDistance":84.75913978415174,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":2,"BK9":8,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SC4":5,"PO3":3,"FD6":15,"PK6":6,"PM9":9},"placesAfterFilter":{"CT1":2,"BK9":8,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SC4":5,"PO3":3,"FD6":15,"PK6":6,"PM9":9},"totalBeforeFilter":108,"totalAfterFilter":108,"filterRate":1.0,"filterExecutionTimeNs":89000,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:56.950 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:56.950729200Z","nanoTime":31862965018200,"traceId":"93ff9570","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:57:56.950 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:57:56.950 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 71.01, 편의성: 29.21, 종합: 50.11
2025-11-21 20:57:56.950 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:56.950729200Z","nanoTime":31862965379800,"traceId":"93ff9570","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":361600,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":89.40510752698103,"policeDistance":84.75913978415174,"cctvScore":60.0,"cctvCount":18,"arrestRateScore":67.2940923,"arrestRate":0.672940923,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":71.00975994809431,"success":true},"convenienceScore":{"categoryScores":{"CT1":8.0,"BK9":40.0,"HP8":100.0,"CS2":4.339624824968466,"AC5":15.0,"CE7":30.0,"SC4":10.0,"PO3":9.0,"FD6":15.0,"PK6":18.0,"PM9":72.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"광진구","guPopulation":345652,"finalScore":29.212693165906227,"success":true},"overallScore":50.11122655700027,"errorMessage":null,"success":true}}
2025-11-21 20:57:56.950 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:56.950729200Z","nanoTime":31862965556100,"traceId":"93ff9570","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:57:56.950 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:57:56.950 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 광진구  능동로17길 39 화양지구대, latitude=37.53386, longitude=127.071615, geohashId=wydme8f)
2025-11-21 20:57:56.950 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 84.75913978415174
2025-11-21 20:57:56.952 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydme8e
2025-11-21 20:57:56.952 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:57:56.952 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:56.952750Z","nanoTime":31862967138500,"traceId":"93ff9570","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1582400,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 54m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydme8e","dataSize":14561,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":14561,"errorMessage":null,"success":true}}
2025-11-21 20:57:56.952 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:57:57.947 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:57:57.947 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.534984827017425, longitude=127.0652831780169, radius=500)
2025-11-21 20:57:57.947 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:57:57.947 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.534984827017425, longitude=127.0652831780169, radius=500
2025-11-21 20:57:57.948 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:57.948281900Z","nanoTime":31863962051600,"traceId":"77c8b9ef","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:57:57.948 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:57:57.948 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.534984827017425, lon=127.0652831780169
2025-11-21 20:57:57.948 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:57.948281900Z","nanoTime":31863962118700,"traceId":"77c8b9ef","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:57:57.948 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:57.948281900Z","nanoTime":31863962154500,"traceId":"77c8b9ef","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":35800,"duration_ms":0,"resultData":{"latitude":37.534984827017425,"longitude":127.0652831780169,"precision":7,"centerHash":"wydme3n","adjacentHashes":["wydme3n","wydme3q","wydme3r","wydme3p","wydme2z","wydme2y","wydme2v","wydme3j","wydme3m"],"errorMessage":null,"success":true}}
2025-11-21 20:57:57.948 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydme3n, wydme3q, wydme3r, wydme3p, wydme2z, wydme2y, wydme2v, wydme3j, wydme3m]
2025-11-21 20:57:57.948 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydme3n
2025-11-21 20:57:57.948 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:57.948281900Z","nanoTime":31863962256600,"traceId":"77c8b9ef","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":205000,"duration_ms":0,"resultData":{"requestLatitude":37.534984827017425,"requestLongitude":127.0652831780169,"requestRadius":500,"centerGeohashId":"wydme3n","nineBlockGeohashes":["wydme3n","wydme3q","wydme3r","wydme3p","wydme2z","wydme2y","wydme2v","wydme3j","wydme3m"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:57:57.948 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:57.948281900Z","nanoTime":31863962289800,"traceId":"77c8b9ef","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:57:57.948 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:57:57.948 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydme3n
2025-11-21 20:57:57.948 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4517ms)
2025-11-21 20:57:57.948 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:57:57.950 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:57:57.950 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:57:57.950 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.5182ms, 역직렬화: 0.0ms
2025-11-21 20:57:57.950 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:57:57.950 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:57.950179800Z","nanoTime":31863964457400,"traceId":"77c8b9ef","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2167600,"duration_ms":2,"resultData":{"centerGeohashId":"wydme3n","nineBlockGeohashes":["wydme3n","wydme3q","wydme3r","wydme3p","wydme2z","wydme2y","wydme2v","wydme3j","wydme3m"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydme3n","hit":false,"valueSize":0,"l1CacheGetDurationNs":451700,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydme3n","cacheKey":"data:wydme3n:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":281300},{"geohashId":"wydme3q","cacheKey":"data:wydme3q:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":202400},{"geohashId":"wydme3r","cacheKey":"data:wydme3r:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":168800},{"geohashId":"wydme3p","cacheKey":"data:wydme3p:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":158700},{"geohashId":"wydme2z","cacheKey":"data:wydme2z:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":214700},{"geohashId":"wydme2y","cacheKey":"data:wydme2y:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":105900},{"geohashId":"wydme2v","cacheKey":"data:wydme2v:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":84400},{"geohashId":"wydme3j","cacheKey":"data:wydme3j:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":151700},{"geohashId":"wydme3m","cacheKey":"data:wydme3m:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":90600}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1518200,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:57:57.950 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:57.950179800Z","nanoTime":31863964572100,"traceId":"77c8b9ef","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:57:57.950 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:57:57.950 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:57:57.953 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 23건
2025-11-21 20:57:57.955 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:57:57.955 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 20:57:57.956 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:57.955542100Z","nanoTime":31863970286100,"traceId":"77c8b9ef","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5714000,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydme3n","wydme3q","wydme3r","wydme3p","wydme2z","wydme2y","wydme2v","wydme3j","wydme3m"],"cctvQueryResult":{"queryGeohashIds":["wydme3n","wydme3q","wydme3r","wydme3p","wydme2z","wydme2y","wydme2v","wydme3j","wydme3m"],"totalRowsReturned":23,"rowsPerGrid":{"wydme3m":1,"wydme3n":1,"wydme3p":3,"wydme2y":2,"wydme3j":4,"wydme2z":3,"wydme2v":1,"wydme3q":6,"wydme3r":2},"queryExecutionTimeNs":3023300,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydme3m","cacheKey":"data:wydme3m:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydme3n","cacheKey":"data:wydme3n:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydme3p","cacheKey":"data:wydme3p:cctv","dataCount":3,"dataSize":299,"errorMessage":null,"success":true},{"geohashId":"wydme2y","cacheKey":"data:wydme2y:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydme3j","cacheKey":"data:wydme3j:cctv","dataCount":4,"dataSize":399,"errorMessage":null,"success":true},{"geohashId":"wydme2z","cacheKey":"data:wydme2z:cctv","dataCount":3,"dataSize":301,"errorMessage":null,"success":true},{"geohashId":"wydme2v","cacheKey":"data:wydme2v:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydme3q","cacheKey":"data:wydme3q:cctv","dataCount":6,"dataSize":601,"errorMessage":null,"success":true},{"geohashId":"wydme3r","cacheKey":"data:wydme3r:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:57:57.956 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:57.956541100Z","nanoTime":31863970461500,"traceId":"77c8b9ef","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:57:57.956 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:57:57.956 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.534984827017425, 127.0652831780169)
2025-11-21 20:57:57.956 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:57:58.034 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:57:58.034 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:57:58.034 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:57:58.034 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.534984827017425, 127.0652831780169), 반경: 500m
2025-11-21 20:57:58.115 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:57:58.115 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 119건
2025-11-21 20:57:58.117 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:57:58.117 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:57:58.117 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 광진구
2025-11-21 20:57:58.117 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 광진구
2025-11-21 20:57:58.117 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:57:58.117 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:57:58.117 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:57:58.117 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.672940923
2025-11-21 20:57:58.117 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:58.117442700Z","nanoTime":31864132285000,"traceId":"77c8b9ef","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":161823500,"duration_ms":161,"resultData":{"latitude":37.534984827017425,"longitude":127.0652831780169,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":161701400,"addressApiResult":{"cached":false,"cacheKey":"address:37.534984827017425:127.0652831780169","roadAddress":"서울특별시 광진구 뚝섬로30가길 19-1","jibunAddress":"서울 광진구 자양동 50-9","responseSize":75,"executionTimeNs":78057300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:광진구","guName":"광진구","arrestRate":0.672940923,"dataFound":true,"executionTimeNs":545000,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.534984827017425:127.0652831780169:500","categoryCount":15,"placesByCategory":{"CT1":3,"AT4":1,"CS2":15,"SC4":2,"MT1":0,"BK9":9,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":10,"OL7":0,"PM9":15},"totalPlaces":119,"responseSize":13685,"executionTimeNs":83099100,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:58.117 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:58.117442700Z","nanoTime":31864132462400,"traceId":"77c8b9ef","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:57:58.117 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:57:58.117 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:57:58.117 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 23개
2025-11-21 20:57:58.117 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 23개 (총 카메라 대수: 23대)
2025-11-21 20:57:58.117 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:57:58.201 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 광진구  능동로 346 (거리: 147m)
2025-11-21 20:57:58.201 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:57:58.201 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:57:58.201 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 20:57:58.201 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:57:58.201 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:58.201780700Z","nanoTime":31864216034900,"traceId":"77c8b9ef","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":83572500,"duration_ms":83,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":23,"totalCctvAfterFilter":23,"totalCameraCount":23,"filterRate":1.0,"filterExecutionTimeNs":8400,"success":true},"policeQuery":{"queryDurationNs":83153100,"found":true,"nearestAddress":"서울특별시 광진구  능동로 346","nearestDistance":146.77747733275444,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":3,"AT4":1,"CS2":15,"SC4":2,"BK9":9,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":10,"PM9":15},"placesAfterFilter":{"CT1":3,"AT4":1,"CS2":15,"SC4":2,"BK9":9,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":10,"PM9":15},"totalBeforeFilter":119,"totalAfterFilter":119,"filterRate":1.0,"filterExecutionTimeNs":73900,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:58.201 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:58.201780700Z","nanoTime":31864216249600,"traceId":"77c8b9ef","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:57:58.201 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:57:58.201 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 75.35, 편의성: 35.95, 종합: 55.65
2025-11-21 20:57:58.202 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:58.201780700Z","nanoTime":31864216423800,"traceId":"77c8b9ef","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":174200,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":81.6528153334057,"policeDistance":146.77747733275444,"cctvScore":76.66666666666667,"cctvCount":23,"arrestRateScore":67.2940923,"arrestRate":0.672940923,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":75.35073895668839,"success":true},"convenienceScore":{"categoryScores":{"CT1":12.0,"AT4":3.0,"CS2":4.339624824968466,"SC4":4.0,"BK9":45.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":30.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"광진구","guPopulation":345652,"finalScore":35.94920190961296,"success":true},"overallScore":55.64997043315067,"errorMessage":null,"success":true}}
2025-11-21 20:57:58.202 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:58.202687500Z","nanoTime":31864216531400,"traceId":"77c8b9ef","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:57:58.202 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:57:58.202 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 광진구  능동로 346, latitude=37.535191, longitude=127.063639, geohashId=wydme3h)
2025-11-21 20:57:58.202 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 146.77747733275444
2025-11-21 20:57:58.203 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydme3n
2025-11-21 20:57:58.203 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:57:58.203 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:58.203694200Z","nanoTime":31864217646300,"traceId":"77c8b9ef","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1114900,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 43m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydme3n","dataSize":16071,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":16071,"errorMessage":null,"success":true}}
2025-11-21 20:57:58.203 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:57:58.840 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:57:58.840 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.539251907008804, longitude=127.07160060419959, radius=500)
2025-11-21 20:57:58.840 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:57:58.840 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.539251907008804, longitude=127.07160060419959, radius=500
2025-11-21 20:57:58.840 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:58.840133Z","nanoTime":31864854816500,"traceId":"10728911","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:57:58.840 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:57:58.840 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.539251907008804, lon=127.07160060419959
2025-11-21 20:57:58.841 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:58.841133Z","nanoTime":31864854897600,"traceId":"10728911","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:57:58.841 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:58.841133Z","nanoTime":31864854947200,"traceId":"10728911","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":49600,"duration_ms":0,"resultData":{"latitude":37.539251907008804,"longitude":127.07160060419959,"precision":7,"centerHash":"wydme9f","adjacentHashes":["wydme9f","wydmed4","wydmed5","wydme9g","wydme9e","wydme9d","wydme99","wydme9c","wydmed1"],"errorMessage":null,"success":true}}
2025-11-21 20:57:58.841 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydme9f, wydmed4, wydmed5, wydme9g, wydme9e, wydme9d, wydme99, wydme9c, wydmed1]
2025-11-21 20:57:58.841 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydme9f
2025-11-21 20:57:58.841 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:58.841133Z","nanoTime":31864855050700,"traceId":"10728911","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":234200,"duration_ms":0,"resultData":{"requestLatitude":37.539251907008804,"requestLongitude":127.07160060419959,"requestRadius":500,"centerGeohashId":"wydme9f","nineBlockGeohashes":["wydme9f","wydmed4","wydmed5","wydme9g","wydme9e","wydme9d","wydme99","wydme9c","wydmed1"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:57:58.841 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:58.841133Z","nanoTime":31864855105000,"traceId":"10728911","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:57:58.841 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:57:58.841 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydme9f
2025-11-21 20:57:58.841 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3273ms)
2025-11-21 20:57:58.841 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:57:58.843 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:57:58.843 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 4개, 미스: 5개
2025-11-21 20:57:58.843 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 3.0029ms, 역직렬화: 0.1941ms
2025-11-21 20:57:58.843 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:57:58.843 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:58.843768500Z","nanoTime":31864858739800,"traceId":"10728911","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3634800,"duration_ms":3,"resultData":{"centerGeohashId":"wydme9f","nineBlockGeohashes":["wydme9f","wydmed4","wydmed5","wydme9g","wydme9e","wydme9d","wydme99","wydme9c","wydmed1"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydme9f","hit":false,"valueSize":0,"l1CacheGetDurationNs":327300,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydme9f","cacheKey":"data:wydme9f:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":101,"l2CacheGetDurationNs":735000},{"geohashId":"wydmed4","cacheKey":"data:wydmed4:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":501,"l2CacheGetDurationNs":373700},{"geohashId":"wydmed5","cacheKey":"data:wydmed5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":200800},{"geohashId":"wydme9g","cacheKey":"data:wydme9g:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":155400},{"geohashId":"wydme9e","cacheKey":"data:wydme9e:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":131600},{"geohashId":"wydme9d","cacheKey":"data:wydme9d:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":126100},{"geohashId":"wydme99","cacheKey":"data:wydme99:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":128800},{"geohashId":"wydme9c","cacheKey":"data:wydme9c:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":551,"l2CacheGetDurationNs":423700},{"geohashId":"wydmed1","cacheKey":"data:wydmed1:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":399,"l2CacheGetDurationNs":361200}],"l2TotalHits":4,"l2TotalMisses":5,"l2CacheTotalDurationNs":3002900,"l2JsonDeserializeTotalDurationNs":194100,"errorMessage":null,"success":true}}
2025-11-21 20:57:58.843 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:58.843768500Z","nanoTime":31864858917800,"traceId":"10728911","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:57:58.843 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:57:58.843 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 5개
2025-11-21 20:57:58.848 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 2건
2025-11-21 20:57:58.849 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:57:58.849 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 6개
2025-11-21 20:57:58.849 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:58.849866700Z","nanoTime":31864863920000,"traceId":"10728911","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5002200,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydmed5","wydme9g","wydme9e","wydme9d","wydme99"],"cctvQueryResult":{"queryGeohashIds":["wydmed5","wydme9g","wydme9e","wydme9d","wydme99"],"totalRowsReturned":2,"rowsPerGrid":{"wydme9d":1,"wydme99":1},"queryExecutionTimeNs":3936800,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydme9d","cacheKey":"data:wydme9d:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydme99","cacheKey":"data:wydme99:cctv","dataCount":1,"dataSize":99,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:57:58.849 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:58.849866700Z","nanoTime":31864864065900,"traceId":"10728911","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:57:58.849 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:57:58.849 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.539251907008804, 127.07160060419959)
2025-11-21 20:57:58.849 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:57:58.906 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:57:58.906 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:57:58.906 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:57:58.906 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.539251907008804, 127.07160060419959), 반경: 500m
2025-11-21 20:57:59.007 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:57:59.007 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 142건
2025-11-21 20:57:59.012 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:57:59.012 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:57:59.012 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 광진구
2025-11-21 20:57:59.012 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 광진구
2025-11-21 20:57:59.012 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:57:59.012 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:57:59.012 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:57:59.012 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.672940923
2025-11-21 20:57:59.012 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.012625400Z","nanoTime":31865027743500,"traceId":"10728911","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":163677600,"duration_ms":163,"resultData":{"latitude":37.539251907008804,"longitude":127.07160060419959,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":163551000,"addressApiResult":{"cached":false,"cacheKey":"address:37.539251907008804:127.07160060419959","roadAddress":"서울특별시 광진구 능동로 92","jibunAddress":"서울 광진구 자양동 227-342","responseSize":72,"executionTimeNs":56947100,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:광진구","guName":"광진구","arrestRate":0.672940923,"dataFound":true,"executionTimeNs":502800,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.539251907008804:127.07160060419959:500","categoryCount":15,"placesByCategory":{"CT1":11,"AT4":5,"CS2":15,"SC4":2,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":0,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalPlaces":142,"responseSize":16542,"executionTimeNs":106101100,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:59.012 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.012625400Z","nanoTime":31865027964100,"traceId":"10728911","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:57:59.012 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:57:59.012 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:57:59.012 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 17개
2025-11-21 20:57:59.012 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 17개 (총 카메라 대수: 17대)
2025-11-21 20:57:59.012 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:57:59.093 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 광진구 능동로 385 (거리: 553m)
2025-11-21 20:57:59.093 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:57:59.093 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:57:59.093 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 20:57:59.093 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:57:59.093 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.093936Z","nanoTime":31865108311600,"traceId":"10728911","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":80347500,"duration_ms":80,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":17,"totalCctvAfterFilter":17,"totalCameraCount":17,"filterRate":1.0,"filterExecutionTimeNs":10400,"success":true},"policeQuery":{"queryDurationNs":79929200,"found":true,"nearestAddress":"서울특별시 광진구 능동로 385","nearestDistance":552.8207062852993,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":11,"AT4":5,"CS2":15,"SC4":2,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"placesAfterFilter":{"CT1":11,"AT4":5,"CS2":15,"SC4":2,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalBeforeFilter":142,"totalAfterFilter":142,"filterRate":1.0,"filterExecutionTimeNs":121000,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:59.093 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.093936Z","nanoTime":31865108596000,"traceId":"10728911","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:57:59.093 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:57:59.093 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 52.12, 편의성: 40.17, 종합: 46.15
2025-11-21 20:57:59.093 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.093936Z","nanoTime":31865108820800,"traceId":"10728911","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":224800,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":30.89741171433759,"policeDistance":552.8207062852993,"cctvScore":56.666666666666664,"cctvCount":17,"arrestRateScore":67.2940923,"arrestRate":0.672940923,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":52.12411787096795,"success":true},"convenienceScore":{"categoryScores":{"CT1":44.0,"AT4":15.0,"CS2":4.339624824968466,"SC4":4.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"광진구","guPopulation":345652,"finalScore":40.16711605892632,"success":true},"overallScore":46.14561696494714,"errorMessage":null,"success":true}}
2025-11-21 20:57:59.093 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.093936Z","nanoTime":31865108923400,"traceId":"10728911","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:57:59.093 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:57:59.093 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 광진구 능동로 385, latitude=37.536619, longitude=127.076919, geohashId=wydme9q)
2025-11-21 20:57:59.093 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 552.8207062852993
2025-11-21 20:57:59.095 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydme9f
2025-11-21 20:57:59.095 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:57:59.095 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.095686Z","nanoTime":31865110370200,"traceId":"10728911","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1446800,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["주차장이(가) 43m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydme9f","dataSize":18909,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":18909,"errorMessage":null,"success":true}}
2025-11-21 20:57:59.095 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:57:59.312 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:57:59.312 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.53957948564235, longitude=127.06607922914499, radius=500)
2025-11-21 20:57:59.312 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:57:59.312 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.53957948564235, longitude=127.06607922914499, radius=500
2025-11-21 20:57:59.312 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.312255800Z","nanoTime":31865326568200,"traceId":"c8843c11","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:57:59.312 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:57:59.312 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.53957948564235, lon=127.06607922914499
2025-11-21 20:57:59.312 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.312255800Z","nanoTime":31865326654900,"traceId":"c8843c11","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:57:59.312 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.312255800Z","nanoTime":31865326700500,"traceId":"c8843c11","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":45600,"duration_ms":0,"resultData":{"latitude":37.53957948564235,"longitude":127.06607922914499,"precision":7,"centerHash":"wydme3y","adjacentHashes":["wydme3y","wydme6n","wydme6p","wydme3z","wydme3x","wydme3w","wydme3t","wydme3v","wydme6j"],"errorMessage":null,"success":true}}
2025-11-21 20:57:59.312 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydme3y, wydme6n, wydme6p, wydme3z, wydme3x, wydme3w, wydme3t, wydme3v, wydme6j]
2025-11-21 20:57:59.312 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydme3y
2025-11-21 20:57:59.312 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.312255800Z","nanoTime":31865326805600,"traceId":"c8843c11","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":237400,"duration_ms":0,"resultData":{"requestLatitude":37.53957948564235,"requestLongitude":127.06607922914499,"requestRadius":500,"centerGeohashId":"wydme3y","nineBlockGeohashes":["wydme3y","wydme6n","wydme6p","wydme3z","wydme3x","wydme3w","wydme3t","wydme3v","wydme6j"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:57:59.312 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.312255800Z","nanoTime":31865326873000,"traceId":"c8843c11","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:57:59.312 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:57:59.312 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydme3y
2025-11-21 20:57:59.313 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3659ms)
2025-11-21 20:57:59.313 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:57:59.314 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:57:59.314 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:57:59.314 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.1855ms, 역직렬화: 0.0ms
2025-11-21 20:57:59.314 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:57:59.314 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.314260100Z","nanoTime":31865328655700,"traceId":"c8843c11","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1782700,"duration_ms":1,"resultData":{"centerGeohashId":"wydme3y","nineBlockGeohashes":["wydme3y","wydme6n","wydme6p","wydme3z","wydme3x","wydme3w","wydme3t","wydme3v","wydme6j"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydme3y","hit":false,"valueSize":0,"l1CacheGetDurationNs":365900,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydme3y","cacheKey":"data:wydme3y:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":158400},{"geohashId":"wydme6n","cacheKey":"data:wydme6n:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":114700},{"geohashId":"wydme6p","cacheKey":"data:wydme6p:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":83800},{"geohashId":"wydme3z","cacheKey":"data:wydme3z:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":218000},{"geohashId":"wydme3x","cacheKey":"data:wydme3x:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":208100},{"geohashId":"wydme3w","cacheKey":"data:wydme3w:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":95900},{"geohashId":"wydme3t","cacheKey":"data:wydme3t:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":78700},{"geohashId":"wydme3v","cacheKey":"data:wydme3v:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":77700},{"geohashId":"wydme6j","cacheKey":"data:wydme6j:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":75000}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1185500,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:57:59.314 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.314260100Z","nanoTime":31865328787800,"traceId":"c8843c11","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:57:59.314 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:57:59.314 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:57:59.316 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 17건
2025-11-21 20:57:59.318 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:57:59.318 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 20:57:59.318 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.318352300Z","nanoTime":31865332573400,"traceId":"c8843c11","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":3785600,"duration_ms":3,"resultData":{"inputCctvMissGrids":["wydme3y","wydme6n","wydme6p","wydme3z","wydme3x","wydme3w","wydme3t","wydme3v","wydme6j"],"cctvQueryResult":{"queryGeohashIds":["wydme3y","wydme6n","wydme6p","wydme3z","wydme3x","wydme3w","wydme3t","wydme3v","wydme6j"],"totalRowsReturned":17,"rowsPerGrid":{"wydme6p":2,"wydme3y":1,"wydme3z":2,"wydme6n":1,"wydme3v":2,"wydme3w":4,"wydme6j":2,"wydme3t":3},"queryExecutionTimeNs":2139500,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydme6p","cacheKey":"data:wydme6p:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydme3y","cacheKey":"data:wydme3y:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydme3z","cacheKey":"data:wydme3z:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydme6n","cacheKey":"data:wydme6n:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydme3v","cacheKey":"data:wydme3v:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydme3w","cacheKey":"data:wydme3w:cctv","dataCount":4,"dataSize":399,"errorMessage":null,"success":true},{"geohashId":"wydme6j","cacheKey":"data:wydme6j:cctv","dataCount":2,"dataSize":200,"errorMessage":null,"success":true},{"geohashId":"wydme3t","cacheKey":"data:wydme3t:cctv","dataCount":3,"dataSize":301,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:57:59.318 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.318352300Z","nanoTime":31865332716400,"traceId":"c8843c11","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:57:59.318 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:57:59.318 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.53957948564235, 127.06607922914499)
2025-11-21 20:57:59.318 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:57:59.410 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:57:59.410 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:57:59.410 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:57:59.410 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.53957948564235, 127.06607922914499), 반경: 500m
2025-11-21 20:57:59.492 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:57:59.492 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 137건
2025-11-21 20:57:59.493 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:57:59.493 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:57:59.493 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 광진구
2025-11-21 20:57:59.493 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 광진구
2025-11-21 20:57:59.493 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:57:59.493 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:57:59.493 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:57:59.493 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.672940923
2025-11-21 20:57:59.493 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.493452800Z","nanoTime":31865508664700,"traceId":"c8843c11","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":175948300,"duration_ms":175,"resultData":{"latitude":37.53957948564235,"longitude":127.06607922914499,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":175851600,"addressApiResult":{"cached":false,"cacheKey":"address:37.53957948564235:127.06607922914499","roadAddress":"서울특별시 광진구 아차산로28길 20-10","jibunAddress":"서울 광진구 자양동 10-23","responseSize":77,"executionTimeNs":93017700,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:광진구","guName":"광진구","arrestRate":0.672940923,"dataFound":true,"executionTimeNs":443600,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.53957948564235:127.06607922914499:500","categoryCount":15,"placesByCategory":{"CT1":8,"AT4":6,"CS2":15,"SC4":0,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":0,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalPlaces":137,"responseSize":15872,"executionTimeNs":82390300,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:59.493 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.493452800Z","nanoTime":31865508865200,"traceId":"c8843c11","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:57:59.493 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:57:59.493 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:57:59.493 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 17개
2025-11-21 20:57:59.493 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 17개 (총 카메라 대수: 17대)
2025-11-21 20:57:59.493 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:57:59.579 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 광진구  능동로 346 (거리: 533m)
2025-11-21 20:57:59.579 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:57:59.579 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:57:59.579 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 12개 카테고리
2025-11-21 20:57:59.579 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:57:59.579 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.579353600Z","nanoTime":31865593648300,"traceId":"c8843c11","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":84783100,"duration_ms":84,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":17,"totalCctvAfterFilter":17,"totalCameraCount":17,"filterRate":1.0,"filterExecutionTimeNs":8000,"success":true},"policeQuery":{"queryDurationNs":84131100,"found":true,"nearestAddress":"서울특별시 광진구  능동로 346","nearestDistance":533.3070154089603,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":8,"AT4":6,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SW8":2,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"placesAfterFilter":{"CT1":8,"AT4":6,"BK9":15,"HP8":15,"CS2":15,"AC5":15,"CE7":15,"SW8":2,"FD6":15,"PK6":15,"OL7":1,"PM9":15},"totalBeforeFilter":137,"totalAfterFilter":137,"filterRate":1.0,"filterExecutionTimeNs":94800,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:57:59.579 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.579920Z","nanoTime":31865593855800,"traceId":"c8843c11","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:57:59.579 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:57:59.579 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 52.86, 편의성: 44.94, 종합: 48.90
2025-11-21 20:57:59.579 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.579920Z","nanoTime":31865594084000,"traceId":"c8843c11","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":228200,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":33.33662307387996,"policeDistance":533.3070154089603,"cctvScore":56.666666666666664,"cctvCount":17,"arrestRateScore":67.2940923,"arrestRate":0.672940923,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":52.855881278830665,"success":true},"convenienceScore":{"categoryScores":{"CT1":32.0,"AT4":18.0,"BK9":75.0,"HP8":100.0,"CS2":4.339624824968466,"AC5":15.0,"CE7":30.0,"SW8":100.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"광진구","guPopulation":345652,"finalScore":44.944968735414044,"success":true},"overallScore":48.90042500712235,"errorMessage":null,"success":true}}
2025-11-21 20:57:59.579 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.579920Z","nanoTime":31865594261700,"traceId":"c8843c11","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:57:59.579 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:57:59.579 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 광진구  능동로 346, latitude=37.535191, longitude=127.063639, geohashId=wydme3h)
2025-11-21 20:57:59.579 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 533.3070154089603
2025-11-21 20:57:59.581 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydme3y
2025-11-21 20:57:59.581 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:57:59.581 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.581933700Z","nanoTime":31865596535000,"traceId":"c8843c11","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":2273300,"duration_ms":2,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["음식점이(가) 51m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydme3y","dataSize":17868,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17868,"errorMessage":null,"success":true}}
2025-11-21 20:57:59.581 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:57:59.958 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:57:59.958 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.541006713972685, longitude=127.05920087684994, radius=500)
2025-11-21 20:57:59.958 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:57:59.958 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.541006713972685, longitude=127.05920087684994, radius=500
2025-11-21 20:57:59.958 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.958431500Z","nanoTime":31865972950400,"traceId":"e3cf482a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:57:59.958 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:57:59.958 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.541006713972685, lon=127.05920087684994
2025-11-21 20:57:59.958 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.958431500Z","nanoTime":31865973034300,"traceId":"e3cf482a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:57:59.958 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.958431500Z","nanoTime":31865973075100,"traceId":"e3cf482a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":40800,"duration_ms":0,"resultData":{"latitude":37.541006713972685,"longitude":127.05920087684994,"precision":7,"centerHash":"wydme61","adjacentHashes":["wydme61","wydme63","wydme66","wydme64","wydme3f","wydme3c","wydme3b","wydme60","wydme62"],"errorMessage":null,"success":true}}
2025-11-21 20:57:59.959 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydme61, wydme63, wydme66, wydme64, wydme3f, wydme3c, wydme3b, wydme60, wydme62]
2025-11-21 20:57:59.959 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydme61
2025-11-21 20:57:59.959 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.959426100Z","nanoTime":31865973305200,"traceId":"e3cf482a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":354800,"duration_ms":0,"resultData":{"requestLatitude":37.541006713972685,"requestLongitude":127.05920087684994,"requestRadius":500,"centerGeohashId":"wydme61","nineBlockGeohashes":["wydme61","wydme63","wydme66","wydme64","wydme3f","wydme3c","wydme3b","wydme60","wydme62"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:57:59.959 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.959426100Z","nanoTime":31865973380900,"traceId":"e3cf482a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:57:59.959 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:57:59.959 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydme61
2025-11-21 20:57:59.959 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3947ms)
2025-11-21 20:57:59.959 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:57:59.961 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:57:59.961 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:57:59.961 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.3261ms, 역직렬화: 0.0ms
2025-11-21 20:57:59.961 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:57:59.961 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.961426200Z","nanoTime":31865975352400,"traceId":"e3cf482a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1971500,"duration_ms":1,"resultData":{"centerGeohashId":"wydme61","nineBlockGeohashes":["wydme61","wydme63","wydme66","wydme64","wydme3f","wydme3c","wydme3b","wydme60","wydme62"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydme61","hit":false,"valueSize":0,"l1CacheGetDurationNs":394700,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydme61","cacheKey":"data:wydme61:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":240300},{"geohashId":"wydme63","cacheKey":"data:wydme63:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":243700},{"geohashId":"wydme66","cacheKey":"data:wydme66:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":176400},{"geohashId":"wydme64","cacheKey":"data:wydme64:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":117200},{"geohashId":"wydme3f","cacheKey":"data:wydme3f:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":101600},{"geohashId":"wydme3c","cacheKey":"data:wydme3c:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":95800},{"geohashId":"wydme3b","cacheKey":"data:wydme3b:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":96300},{"geohashId":"wydme60","cacheKey":"data:wydme60:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":95200},{"geohashId":"wydme62","cacheKey":"data:wydme62:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":95100}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1326100,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:57:59.961 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.961426200Z","nanoTime":31865975610300,"traceId":"e3cf482a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:57:59.961 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:57:59.961 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:57:59.964 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 14건
2025-11-21 20:57:59.966 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:57:59.966 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 20:57:59.966 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.966316800Z","nanoTime":31865980909600,"traceId":"e3cf482a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5299300,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydme61","wydme63","wydme66","wydme64","wydme3f","wydme3c","wydme3b","wydme60","wydme62"],"cctvQueryResult":{"queryGeohashIds":["wydme61","wydme63","wydme66","wydme64","wydme3f","wydme3c","wydme3b","wydme60","wydme62"],"totalRowsReturned":14,"rowsPerGrid":{"wydme60":1,"wydme61":2,"wydme62":3,"wydme3f":1,"wydme64":2,"wydme3b":2,"wydme3c":1,"wydme66":2},"queryExecutionTimeNs":3147800,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydme60","cacheKey":"data:wydme60:cctv","dataCount":1,"dataSize":133,"errorMessage":null,"success":true},{"geohashId":"wydme61","cacheKey":"data:wydme61:cctv","dataCount":2,"dataSize":271,"errorMessage":null,"success":true},{"geohashId":"wydme62","cacheKey":"data:wydme62:cctv","dataCount":3,"dataSize":403,"errorMessage":null,"success":true},{"geohashId":"wydme3f","cacheKey":"data:wydme3f:cctv","dataCount":1,"dataSize":135,"errorMessage":null,"success":true},{"geohashId":"wydme64","cacheKey":"data:wydme64:cctv","dataCount":2,"dataSize":268,"errorMessage":null,"success":true},{"geohashId":"wydme3b","cacheKey":"data:wydme3b:cctv","dataCount":2,"dataSize":267,"errorMessage":null,"success":true},{"geohashId":"wydme3c","cacheKey":"data:wydme3c:cctv","dataCount":1,"dataSize":133,"errorMessage":null,"success":true},{"geohashId":"wydme66","cacheKey":"data:wydme66:cctv","dataCount":2,"dataSize":269,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:57:59.966 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:57:59.966316800Z","nanoTime":31865981061100,"traceId":"e3cf482a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:57:59.966 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:57:59.966 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.541006713972685, 127.05920087684994)
2025-11-21 20:57:59.967 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:58:00.077 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:58:00.077 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:58:00.077 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:58:00.077 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.541006713972685, 127.05920087684994), 반경: 500m
2025-11-21 20:58:00.165 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:58:00.165 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 139건
2025-11-21 20:58:00.167 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:58:00.167 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:58:00.167 [http-nio-8185-exec-10] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 20:58:00.167 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:58:00.167 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:58:00.167 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:58:00.167 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 20:58:00.167 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:00.167317200Z","nanoTime":31866182106000,"traceId":"e3cf482a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":201044900,"duration_ms":201,"resultData":{"latitude":37.541006713972685,"longitude":127.05920087684994,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":200866700,"addressApiResult":{"cached":false,"cacheKey":"address:37.541006713972685:127.05920087684994","roadAddress":"주소 없음","jibunAddress":"서울 성동구 성수동2가 271-7","responseSize":61,"executionTimeNs":111183500,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":27500,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.541006713972685:127.05920087684994:500","categoryCount":15,"placesByCategory":{"CT1":11,"AT4":4,"CS2":15,"SC4":2,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":4,"FD6":15,"PK6":15,"OL7":1,"PM9":10},"totalPlaces":139,"responseSize":16062,"executionTimeNs":89655700,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:58:00.167 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:00.167317200Z","nanoTime":31866182313000,"traceId":"e3cf482a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:58:00.167 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:58:00.167 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:58:00.167 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 14개
2025-11-21 20:58:00.167 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 14개 (총 카메라 대수: 54대)
2025-11-21 20:58:00.167 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:58:00.255 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구  대림로23길 16-1 (거리: 693m)
2025-11-21 20:58:00.255 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:58:00.255 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:58:00.255 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 20:58:00.255 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:58:00.255 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:00.255543Z","nanoTime":31866269838000,"traceId":"e3cf482a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":87525000,"duration_ms":87,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":14,"totalCctvAfterFilter":14,"totalCameraCount":54,"filterRate":1.0,"filterExecutionTimeNs":12900,"success":true},"policeQuery":{"queryDurationNs":87003400,"found":true,"nearestAddress":"서울특별시 영등포구  대림로23길 16-1","nearestDistance":693.4748691127487,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":11,"AT4":4,"CS2":15,"SC4":2,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":4,"FD6":15,"PK6":15,"OL7":1,"PM9":10},"placesAfterFilter":{"CT1":11,"AT4":4,"CS2":15,"SC4":2,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":4,"FD6":15,"PK6":15,"OL7":1,"PM9":10},"totalBeforeFilter":139,"totalAfterFilter":139,"filterRate":1.0,"filterExecutionTimeNs":102300,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:58:00.255 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:00.255543Z","nanoTime":31866270059800,"traceId":"e3cf482a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:58:00.255 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:58:00.255 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 22.66, 편의성: 36.72, 종합: 29.69
2025-11-21 20:58:00.255 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:00.255543Z","nanoTime":31866270246800,"traceId":"e3cf482a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":187000,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":13.31564136090641,"policeDistance":693.4748691127487,"cctvScore":46.666666666666664,"cctvCount":14,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":22.66135907493859,"success":true},"convenienceScore":{"categoryScores":{"CT1":44.0,"AT4":12.0,"CS2":3.75,"SC4":4.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":12.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":80.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":36.71666666666667,"success":true},"overallScore":29.689012870802628,"errorMessage":null,"success":true}}
2025-11-21 20:58:00.255 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:00.255543Z","nanoTime":31866270468200,"traceId":"e3cf482a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:58:00.255 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:58:00.255 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구  대림로23길 16-1, latitude=37.53806, longitude=127.052269, geohashId=wydme1s)
2025-11-21 20:58:00.255 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 693.4748691127487
2025-11-21 20:58:00.257 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydme61
2025-11-21 20:58:00.257 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:58:00.257 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:00.257557900Z","nanoTime":31866271853400,"traceId":"e3cf482a","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1385200,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 48m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydme61","dataSize":18857,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":18857,"errorMessage":null,"success":true}}
2025-11-21 20:58:00.257 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:58:00.853 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:58:00.853 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.54131656156379, longitude=127.05173309097935, radius=500)
2025-11-21 20:58:00.853 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:58:00.853 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.54131656156379, longitude=127.05173309097935, radius=500
2025-11-21 20:58:00.853 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:00.853803300Z","nanoTime":31866868020300,"traceId":"acd7eacd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:58:00.853 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:58:00.853 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.54131656156379, lon=127.05173309097935
2025-11-21 20:58:00.853 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:00.853803300Z","nanoTime":31866868194700,"traceId":"acd7eacd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:58:00.853 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:00.853803300Z","nanoTime":31866868249900,"traceId":"acd7eacd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":55200,"duration_ms":0,"resultData":{"latitude":37.54131656156379,"longitude":127.05173309097935,"precision":7,"centerHash":"wydme4h","adjacentHashes":["wydme4h","wydme4k","wydme4m","wydme4j","wydme1v","wydme1u","wydme1g","wydme45","wydme47"],"errorMessage":null,"success":true}}
2025-11-21 20:58:00.853 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydme4h, wydme4k, wydme4m, wydme4j, wydme1v, wydme1u, wydme1g, wydme45, wydme47]
2025-11-21 20:58:00.853 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydme4h
2025-11-21 20:58:00.853 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:00.853803300Z","nanoTime":31866868376900,"traceId":"acd7eacd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":356600,"duration_ms":0,"resultData":{"requestLatitude":37.54131656156379,"requestLongitude":127.05173309097935,"requestRadius":500,"centerGeohashId":"wydme4h","nineBlockGeohashes":["wydme4h","wydme4k","wydme4m","wydme4j","wydme1v","wydme1u","wydme1g","wydme45","wydme47"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:58:00.853 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:00.853803300Z","nanoTime":31866868436300,"traceId":"acd7eacd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:58:00.853 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:58:00.853 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydme4h
2025-11-21 20:58:00.854 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3485ms)
2025-11-21 20:58:00.854 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:58:00.856 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:58:00.856 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:58:00.856 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.6849ms, 역직렬화: 0.0ms
2025-11-21 20:58:00.856 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:58:00.856 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:00.856803400Z","nanoTime":31866870844100,"traceId":"acd7eacd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2407800,"duration_ms":2,"resultData":{"centerGeohashId":"wydme4h","nineBlockGeohashes":["wydme4h","wydme4k","wydme4m","wydme4j","wydme1v","wydme1u","wydme1g","wydme45","wydme47"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydme4h","hit":false,"valueSize":0,"l1CacheGetDurationNs":348500,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydme4h","cacheKey":"data:wydme4h:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":201800},{"geohashId":"wydme4k","cacheKey":"data:wydme4k:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":124200},{"geohashId":"wydme4m","cacheKey":"data:wydme4m:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":104800},{"geohashId":"wydme4j","cacheKey":"data:wydme4j:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":261100},{"geohashId":"wydme1v","cacheKey":"data:wydme1v:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":269600},{"geohashId":"wydme1u","cacheKey":"data:wydme1u:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":171700},{"geohashId":"wydme1g","cacheKey":"data:wydme1g:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":139200},{"geohashId":"wydme45","cacheKey":"data:wydme45:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":146600},{"geohashId":"wydme47","cacheKey":"data:wydme47:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":186700}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1684900,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:58:00.856 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:00.856803400Z","nanoTime":31866871136100,"traceId":"acd7eacd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:58:00.856 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:58:00.856 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:58:00.865 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 19건
2025-11-21 20:58:00.867 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:58:00.867 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 6개
2025-11-21 20:58:00.867 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:00.867686200Z","nanoTime":31866882184600,"traceId":"acd7eacd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":11048500,"duration_ms":11,"resultData":{"inputCctvMissGrids":["wydme4h","wydme4k","wydme4m","wydme4j","wydme1v","wydme1u","wydme1g","wydme45","wydme47"],"cctvQueryResult":{"queryGeohashIds":["wydme4h","wydme4k","wydme4m","wydme4j","wydme1v","wydme1u","wydme1g","wydme45","wydme47"],"totalRowsReturned":19,"rowsPerGrid":{"wydme1g":3,"wydme4k":1,"wydme4m":6,"wydme47":3,"wydme1v":5,"wydme45":1},"queryExecutionTimeNs":8041400,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydme1g","cacheKey":"data:wydme1g:cctv","dataCount":3,"dataSize":403,"errorMessage":null,"success":true},{"geohashId":"wydme4k","cacheKey":"data:wydme4k:cctv","dataCount":1,"dataSize":136,"errorMessage":null,"success":true},{"geohashId":"wydme4m","cacheKey":"data:wydme4m:cctv","dataCount":6,"dataSize":813,"errorMessage":null,"success":true},{"geohashId":"wydme47","cacheKey":"data:wydme47:cctv","dataCount":3,"dataSize":397,"errorMessage":null,"success":true},{"geohashId":"wydme1v","cacheKey":"data:wydme1v:cctv","dataCount":5,"dataSize":643,"errorMessage":null,"success":true},{"geohashId":"wydme45","cacheKey":"data:wydme45:cctv","dataCount":1,"dataSize":134,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:58:00.867 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:00.867686200Z","nanoTime":31866882457900,"traceId":"acd7eacd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:58:00.867 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:58:00.867 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.54131656156379, 127.05173309097935)
2025-11-21 20:58:00.867 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:58:00.927 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:58:00.927 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:58:00.929 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:58:00.929 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.54131656156379, 127.05173309097935), 반경: 500m
2025-11-21 20:58:01.009 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:58:01.009 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 139건
2025-11-21 20:58:01.015 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:58:01.015 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:58:01.016 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 20:58:01.016 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 성동구
2025-11-21 20:58:01.017 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:58:01.017 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:58:01.017 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:58:01.017 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 20:58:01.017 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:01.017191500Z","nanoTime":31867031022000,"traceId":"acd7eacd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":148564100,"duration_ms":148,"resultData":{"latitude":37.54131656156379,"longitude":127.05173309097935,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":148431300,"addressApiResult":{"cached":false,"cacheKey":"address:37.54131656156379:127.05173309097935","roadAddress":"서울특별시 성동구 성수일로4길 26","jibunAddress":"서울 성동구 성수동2가 843","responseSize":73,"executionTimeNs":60286500,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":464100,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.54131656156379:127.05173309097935:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":3,"CS2":15,"SC4":5,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":0,"PO3":5,"FD6":15,"PK6":15,"OL7":1,"PM9":5},"totalPlaces":139,"responseSize":16114,"executionTimeNs":87680700,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:58:01.017 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:01.017191500Z","nanoTime":31867031187100,"traceId":"acd7eacd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:58:01.017 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:58:01.017 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:58:01.017 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 19개
2025-11-21 20:58:01.017 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 19개 (총 카메라 대수: 53대)
2025-11-21 20:58:01.017 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:58:01.106 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구  대림로23길 16-1 (거리: 365m)
2025-11-21 20:58:01.106 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:58:01.106 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:58:01.106 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 20:58:01.106 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:58:01.106 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:01.106435500Z","nanoTime":31867121664700,"traceId":"acd7eacd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":90477600,"duration_ms":90,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":19,"totalCctvAfterFilter":19,"totalCameraCount":53,"filterRate":1.0,"filterExecutionTimeNs":10000,"success":true},"policeQuery":{"queryDurationNs":90042200,"found":true,"nearestAddress":"서울특별시 영등포구  대림로23길 16-1","nearestDistance":365.1829388047263,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":3,"CS2":15,"SC4":5,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"PO3":5,"FD6":15,"PK6":15,"OL7":1,"PM9":5},"placesAfterFilter":{"CT1":15,"AT4":3,"CS2":15,"SC4":5,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"PO3":5,"FD6":15,"PK6":15,"OL7":1,"PM9":5},"totalBeforeFilter":139,"totalAfterFilter":139,"filterRate":1.0,"filterExecutionTimeNs":93300,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:58:01.106 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:01.106435500Z","nanoTime":31867121880700,"traceId":"acd7eacd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:58:01.106 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:58:01.108 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 63.99, 편의성: 32.64, 종합: 48.32
2025-11-21 20:58:01.108 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:01.108230600Z","nanoTime":31867122152500,"traceId":"acd7eacd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":271800,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":54.352132649409214,"policeDistance":365.1829388047263,"cctvScore":63.33333333333333,"cctvCount":19,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":63.9938960081561,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":9.0,"CS2":5.333162672127825,"SC4":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"PO3":15.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":40.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":32.641012513240604,"success":true},"overallScore":48.317454260698355,"errorMessage":null,"success":true}}
2025-11-21 20:58:01.108 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:01.108230600Z","nanoTime":31867122298200,"traceId":"acd7eacd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:58:01.108 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:58:01.108 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구  대림로23길 16-1, latitude=37.53806, longitude=127.052269, geohashId=wydme1s)
2025-11-21 20:58:01.108 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 365.1829388047263
2025-11-21 20:58:01.108 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydme4h
2025-11-21 20:58:01.108 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:58:01.108 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:01.108680Z","nanoTime":31867123978300,"traceId":"acd7eacd","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1680100,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 101m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydme4h","dataSize":19175,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19175,"errorMessage":null,"success":true}}
2025-11-21 20:58:01.108 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:58:01.390 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:58:01.390 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.54438250408902, longitude=127.04555685808245, radius=500)
2025-11-21 20:58:01.390 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:58:01.390 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.54438250408902, longitude=127.04555685808245, radius=500
2025-11-21 20:58:01.390 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:01.390686800Z","nanoTime":31867405177900,"traceId":"01703eec","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:58:01.390 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:58:01.390 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.54438250408902, lon=127.04555685808245
2025-11-21 20:58:01.390 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:01.390686800Z","nanoTime":31867405308100,"traceId":"01703eec","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:58:01.390 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:01.390686800Z","nanoTime":31867405352900,"traceId":"01703eec","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":44800,"duration_ms":0,"resultData":{"latitude":37.54438250408902,"longitude":127.04555685808245,"precision":7,"centerHash":"wydmdfx","adjacentHashes":["wydmdfx","wydmdfz","wydme4b","wydme48","wydme42","wydmdfr","wydmdfq","wydmdfw","wydmdfy"],"errorMessage":null,"success":true}}
2025-11-21 20:58:01.390 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdfx, wydmdfz, wydme4b, wydme48, wydme42, wydmdfr, wydmdfq, wydmdfw, wydmdfy]
2025-11-21 20:58:01.391 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdfx
2025-11-21 20:58:01.391 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:01.391688900Z","nanoTime":31867405474100,"traceId":"01703eec","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":296200,"duration_ms":0,"resultData":{"requestLatitude":37.54438250408902,"requestLongitude":127.04555685808245,"requestRadius":500,"centerGeohashId":"wydmdfx","nineBlockGeohashes":["wydmdfx","wydmdfz","wydme4b","wydme48","wydme42","wydmdfr","wydmdfq","wydmdfw","wydmdfy"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:58:01.391 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:01.391688900Z","nanoTime":31867405523600,"traceId":"01703eec","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:58:01.391 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:58:01.391 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdfx
2025-11-21 20:58:01.392 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5432ms)
2025-11-21 20:58:01.392 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:58:01.392 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:58:01.392 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:58:01.392 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.2159ms, 역직렬화: 0.0ms
2025-11-21 20:58:01.392 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:58:01.393 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:01.392934200Z","nanoTime":31867407597400,"traceId":"01703eec","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2073800,"duration_ms":2,"resultData":{"centerGeohashId":"wydmdfx","nineBlockGeohashes":["wydmdfx","wydmdfz","wydme4b","wydme48","wydme42","wydmdfr","wydmdfq","wydmdfw","wydmdfy"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdfx","hit":false,"valueSize":0,"l1CacheGetDurationNs":543200,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdfx","cacheKey":"data:wydmdfx:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":300900},{"geohashId":"wydmdfz","cacheKey":"data:wydmdfz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":181000},{"geohashId":"wydme4b","cacheKey":"data:wydme4b:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":140400},{"geohashId":"wydme48","cacheKey":"data:wydme48:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":92500},{"geohashId":"wydme42","cacheKey":"data:wydme42:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":88200},{"geohashId":"wydmdfr","cacheKey":"data:wydmdfr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":78800},{"geohashId":"wydmdfq","cacheKey":"data:wydmdfq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":95100},{"geohashId":"wydmdfw","cacheKey":"data:wydmdfw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":83400},{"geohashId":"wydmdfy","cacheKey":"data:wydmdfy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":75800}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1215900,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:58:01.393 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:01.393942400Z","nanoTime":31867407777700,"traceId":"01703eec","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:58:01.393 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:58:01.393 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:58:01.395 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 13건
2025-11-21 20:58:01.397 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:58:01.397 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 20:58:01.397 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:01.397941700Z","nanoTime":31867411937400,"traceId":"01703eec","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4159700,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmdfx","wydmdfz","wydme4b","wydme48","wydme42","wydmdfr","wydmdfq","wydmdfw","wydmdfy"],"cctvQueryResult":{"queryGeohashIds":["wydmdfx","wydmdfz","wydme4b","wydme48","wydme42","wydmdfr","wydmdfq","wydmdfw","wydmdfy"],"totalRowsReturned":13,"rowsPerGrid":{"wydmdfq":1,"wydmdfy":1,"wydmdfz":2,"wydme48":1,"wydme42":2,"wydme4b":2,"wydmdfw":1,"wydmdfx":3},"queryExecutionTimeNs":2585500,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdfq","cacheKey":"data:wydmdfq:cctv","dataCount":1,"dataSize":135,"errorMessage":null,"success":true},{"geohashId":"wydmdfy","cacheKey":"data:wydmdfy:cctv","dataCount":1,"dataSize":135,"errorMessage":null,"success":true},{"geohashId":"wydmdfz","cacheKey":"data:wydmdfz:cctv","dataCount":2,"dataSize":272,"errorMessage":null,"success":true},{"geohashId":"wydme48","cacheKey":"data:wydme48:cctv","dataCount":1,"dataSize":137,"errorMessage":null,"success":true},{"geohashId":"wydme42","cacheKey":"data:wydme42:cctv","dataCount":2,"dataSize":274,"errorMessage":null,"success":true},{"geohashId":"wydme4b","cacheKey":"data:wydme4b:cctv","dataCount":2,"dataSize":272,"errorMessage":null,"success":true},{"geohashId":"wydmdfw","cacheKey":"data:wydmdfw:cctv","dataCount":1,"dataSize":105,"errorMessage":null,"success":true},{"geohashId":"wydmdfx","cacheKey":"data:wydmdfx:cctv","dataCount":3,"dataSize":404,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:58:01.397 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:01.397941700Z","nanoTime":31867412069900,"traceId":"01703eec","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:58:01.397 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:58:01.397 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.54438250408902, 127.04555685808245)
2025-11-21 20:58:01.397 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:58:01.458 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:58:01.458 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:58:01.458 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:58:01.458 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.54438250408902, 127.04555685808245), 반경: 500m
2025-11-21 20:58:01.545 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:58:01.545 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 148건
2025-11-21 20:58:01.547 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:58:01.547 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:58:01.547 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 20:58:01.547 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 성동구
2025-11-21 20:58:01.547 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:58:01.547 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:58:01.547 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:58:01.547 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 20:58:01.547 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:01.547258Z","nanoTime":31867562130000,"traceId":"01703eec","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":150060100,"duration_ms":150,"resultData":{"latitude":37.54438250408902,"longitude":127.04555685808245,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":149939600,"addressApiResult":{"cached":false,"cacheKey":"address:37.54438250408902:127.04555685808245","roadAddress":"서울특별시 성동구 왕십리로 80","jibunAddress":"서울 성동구 성수동1가 656-320","responseSize":75,"executionTimeNs":65422300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":531400,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.54438250408902:127.04555685808245:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":3,"CS2":15,"SC4":5,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":4,"FD6":15,"PK6":15,"OL7":1,"PM9":12},"totalPlaces":148,"responseSize":17116,"executionTimeNs":83985900,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:58:01.547 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:01.547258Z","nanoTime":31867562380200,"traceId":"01703eec","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:58:01.547 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:58:01.547 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:58:01.547 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 13개
2025-11-21 20:58:01.547 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 13개 (총 카메라 대수: 48대)
2025-11-21 20:58:01.547 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:58:01.634 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구  대림로23길 16-1 (거리: 919m)
2025-11-21 20:58:01.634 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:58:01.634 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:58:01.634 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 20:58:01.634 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:58:01.634 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:01.634783800Z","nanoTime":31867650858300,"traceId":"01703eec","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":88478100,"duration_ms":88,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":13,"totalCctvAfterFilter":13,"totalCameraCount":48,"filterRate":1.0,"filterExecutionTimeNs":7800,"success":true},"policeQuery":{"queryDurationNs":88040600,"found":true,"nearestAddress":"서울특별시 영등포구  대림로23길 16-1","nearestDistance":918.9534859471291,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":3,"CS2":15,"SC4":5,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":4,"FD6":15,"PK6":15,"OL7":1,"PM9":12},"placesAfterFilter":{"CT1":15,"AT4":3,"CS2":15,"SC4":5,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":4,"FD6":15,"PK6":15,"OL7":1,"PM9":12},"totalBeforeFilter":148,"totalAfterFilter":148,"filterRate":1.0,"filterExecutionTimeNs":106900,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:58:01.634 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:01.634783800Z","nanoTime":31867651085900,"traceId":"01703eec","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:58:01.634 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:58:01.637 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 39.69, 편의성: 39.16, 종합: 39.42
2025-11-21 20:58:01.637 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:01.637414Z","nanoTime":31867651356600,"traceId":"01703eec","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":270700,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":0.0,"policeDistance":918.9534859471291,"cctvScore":43.333333333333336,"cctvCount":13,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":39.68825621333333,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":9.0,"CS2":5.333162672127825,"SC4":10.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":12.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":96.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":39.15554417814186,"success":true},"overallScore":39.42190019573759,"errorMessage":null,"success":true}}
2025-11-21 20:58:01.637 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:01.637414Z","nanoTime":31867651524300,"traceId":"01703eec","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:58:01.637 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:58:01.637 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구  대림로23길 16-1, latitude=37.53806, longitude=127.052269, geohashId=wydme1s)
2025-11-21 20:58:01.637 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 918.9534859471291
2025-11-21 20:58:01.637 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdfx
2025-11-21 20:58:01.637 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:58:01.637 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:01.637414Z","nanoTime":31867653092700,"traceId":"01703eec","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1568400,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["문화시설이(가) 47m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다."],"cacheWrite":{"cacheKey":"dto:wydmdfx","dataSize":19745,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19745,"errorMessage":null,"success":true}}
2025-11-21 20:58:01.637 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:58:02.185 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:58:02.185 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.54574994809225, longitude=127.05064983112668, radius=500)
2025-11-21 20:58:02.186 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:58:02.186 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.54574994809225, longitude=127.05064983112668, radius=500
2025-11-21 20:58:02.186 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:02.186120700Z","nanoTime":31868199931300,"traceId":"aa56b94f","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:58:02.186 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:58:02.186 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.54574994809225, lon=127.05064983112668
2025-11-21 20:58:02.186 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:02.186120700Z","nanoTime":31868200028600,"traceId":"aa56b94f","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:58:02.186 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:02.186120700Z","nanoTime":31868200069000,"traceId":"aa56b94f","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":40400,"duration_ms":0,"resultData":{"latitude":37.54574994809225,"longitude":127.05064983112668,"precision":7,"centerHash":"wydme4g","adjacentHashes":["wydme4g","wydme55","wydme5h","wydme4u","wydme4s","wydme4e","wydme4d","wydme4f","wydme54"],"errorMessage":null,"success":true}}
2025-11-21 20:58:02.186 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydme4g, wydme55, wydme5h, wydme4u, wydme4s, wydme4e, wydme4d, wydme4f, wydme54]
2025-11-21 20:58:02.186 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydme4g
2025-11-21 20:58:02.186 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:02.186120700Z","nanoTime":31868200183400,"traceId":"aa56b94f","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":252100,"duration_ms":0,"resultData":{"requestLatitude":37.54574994809225,"requestLongitude":127.05064983112668,"requestRadius":500,"centerGeohashId":"wydme4g","nineBlockGeohashes":["wydme4g","wydme55","wydme5h","wydme4u","wydme4s","wydme4e","wydme4d","wydme4f","wydme54"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:58:02.186 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:02.186120700Z","nanoTime":31868200239900,"traceId":"aa56b94f","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:58:02.186 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:58:02.186 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydme4g
2025-11-21 20:58:02.186 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4337ms)
2025-11-21 20:58:02.186 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:58:02.187 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:58:02.187 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:58:02.187 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.2992ms, 역직렬화: 0.0ms
2025-11-21 20:58:02.187 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:58:02.187 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:02.187636200Z","nanoTime":31868202259900,"traceId":"aa56b94f","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2020000,"duration_ms":2,"resultData":{"centerGeohashId":"wydme4g","nineBlockGeohashes":["wydme4g","wydme55","wydme5h","wydme4u","wydme4s","wydme4e","wydme4d","wydme4f","wydme54"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydme4g","hit":false,"valueSize":0,"l1CacheGetDurationNs":433700,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydme4g","cacheKey":"data:wydme4g:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":266400},{"geohashId":"wydme55","cacheKey":"data:wydme55:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":146000},{"geohashId":"wydme5h","cacheKey":"data:wydme5h:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":142200},{"geohashId":"wydme4u","cacheKey":"data:wydme4u:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":233200},{"geohashId":"wydme4s","cacheKey":"data:wydme4s:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":125700},{"geohashId":"wydme4e","cacheKey":"data:wydme4e:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":94800},{"geohashId":"wydme4d","cacheKey":"data:wydme4d:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":81000},{"geohashId":"wydme4f","cacheKey":"data:wydme4f:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":70300},{"geohashId":"wydme54","cacheKey":"data:wydme54:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":81800}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1299200,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:58:02.187 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:02.187636200Z","nanoTime":31868202398700,"traceId":"aa56b94f","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:58:02.187 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:58:02.187 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:58:02.191 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 20건
2025-11-21 20:58:02.192 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:58:02.192 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 20:58:02.192 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:02.192842600Z","nanoTime":31868207441400,"traceId":"aa56b94f","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5042700,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydme4g","wydme55","wydme5h","wydme4u","wydme4s","wydme4e","wydme4d","wydme4f","wydme54"],"cctvQueryResult":{"queryGeohashIds":["wydme4g","wydme55","wydme5h","wydme4u","wydme4s","wydme4e","wydme4d","wydme4f","wydme54"],"totalRowsReturned":20,"rowsPerGrid":{"wydme4f":2,"wydme4g":1,"wydme4s":2,"wydme54":3,"wydme4d":6,"wydme55":2,"wydme4e":1,"wydme4u":3},"queryExecutionTimeNs":3316900,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydme4f","cacheKey":"data:wydme4f:cctv","dataCount":2,"dataSize":268,"errorMessage":null,"success":true},{"geohashId":"wydme4g","cacheKey":"data:wydme4g:cctv","dataCount":1,"dataSize":136,"errorMessage":null,"success":true},{"geohashId":"wydme4s","cacheKey":"data:wydme4s:cctv","dataCount":2,"dataSize":270,"errorMessage":null,"success":true},{"geohashId":"wydme54","cacheKey":"data:wydme54:cctv","dataCount":3,"dataSize":400,"errorMessage":null,"success":true},{"geohashId":"wydme4d","cacheKey":"data:wydme4d:cctv","dataCount":6,"dataSize":789,"errorMessage":null,"success":true},{"geohashId":"wydme55","cacheKey":"data:wydme55:cctv","dataCount":2,"dataSize":271,"errorMessage":null,"success":true},{"geohashId":"wydme4e","cacheKey":"data:wydme4e:cctv","dataCount":1,"dataSize":134,"errorMessage":null,"success":true},{"geohashId":"wydme4u","cacheKey":"data:wydme4u:cctv","dataCount":3,"dataSize":405,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:58:02.193 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:02.192842600Z","nanoTime":31868207591900,"traceId":"aa56b94f","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:58:02.193 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:58:02.193 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.54574994809225, 127.05064983112668)
2025-11-21 20:58:02.193 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:58:02.267 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:58:02.267 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:58:02.267 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:58:02.267 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.54574994809225, 127.05064983112668), 반경: 500m
2025-11-21 20:58:02.457 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:58:02.457 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 143건
2025-11-21 20:58:02.457 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:58:02.457 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:58:02.457 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 20:58:02.457 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 성동구
2025-11-21 20:58:02.457 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:58:02.457 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:58:02.457 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:58:02.457 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 20:58:02.457 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:02.457242600Z","nanoTime":31868474336700,"traceId":"aa56b94f","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":266744800,"duration_ms":266,"resultData":{"latitude":37.54574994809225,"longitude":127.05064983112668,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":266631300,"addressApiResult":{"cached":false,"cacheKey":"address:37.54574994809225:127.05064983112668","roadAddress":"서울특별시 성동구 성수일로6길 1","jibunAddress":"서울 성동구 성수동2가 301-6","responseSize":74,"executionTimeNs":74112600,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":556800,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.54574994809225:127.05064983112668:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":2,"CS2":15,"SC4":4,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":3,"FD6":15,"PK6":15,"OL7":0,"PM9":12},"totalPlaces":143,"responseSize":16475,"executionTimeNs":191961900,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:58:02.457 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:02.457242600Z","nanoTime":31868474586600,"traceId":"aa56b94f","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:58:02.457 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:58:02.457 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:58:02.457 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 20개
2025-11-21 20:58:02.457 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 20개 (총 카메라 대수: 66대)
2025-11-21 20:58:02.457 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:58:02.546 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구  당산로 221 (거리: 489m)
2025-11-21 20:58:02.546 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:58:02.546 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:58:02.546 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 20:58:02.546 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:58:02.546 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:02.546591200Z","nanoTime":31868561096100,"traceId":"aa56b94f","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":86509500,"duration_ms":86,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":20,"totalCctvAfterFilter":20,"totalCameraCount":66,"filterRate":1.0,"filterExecutionTimeNs":8600,"success":true},"policeQuery":{"queryDurationNs":86100000,"found":true,"nearestAddress":"서울특별시 영등포구  당산로 221","nearestDistance":489.28784157725426,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":2,"CS2":15,"SC4":4,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":3,"FD6":15,"PK6":15,"PM9":12},"placesAfterFilter":{"CT1":15,"AT4":2,"CS2":15,"SC4":4,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":3,"FD6":15,"PK6":15,"PM9":11},"totalBeforeFilter":143,"totalAfterFilter":142,"filterRate":0.993006993006993,"filterExecutionTimeNs":87000,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:58:02.546 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:02.546591200Z","nanoTime":31868561282100,"traceId":"aa56b94f","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:58:02.546 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:58:02.547 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 60.67, 편의성: 42.79, 종합: 51.73
2025-11-21 20:58:02.547 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:02.547608300Z","nanoTime":31868561488900,"traceId":"aa56b94f","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":206800,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":38.83901980284322,"policeDistance":489.28784157725426,"cctvScore":66.66666666666666,"cctvCount":20,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":60.673295487519624,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":6.0,"CS2":5.333162672127825,"SC4":8.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":45.0,"PM9":88.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":42.79485866708676,"success":true},"overallScore":51.73407707730319,"errorMessage":null,"success":true}}
2025-11-21 20:58:02.547 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:02.547608300Z","nanoTime":31868561612100,"traceId":"aa56b94f","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:58:02.547 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:58:02.547 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구  당산로 221, latitude=37.548221, longitude=127.055242, geohashId=wydme5q)
2025-11-21 20:58:02.547 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 489.28784157725426
2025-11-21 20:58:02.548 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydme4g
2025-11-21 20:58:02.548 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:58:02.548 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:02.548590400Z","nanoTime":31868562694000,"traceId":"aa56b94f","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1081900,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["음식점이(가) 43m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydme4g","dataSize":19506,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19506,"errorMessage":null,"success":true}}
2025-11-21 20:58:02.548 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:58:02.764 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:58:02.764 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.54906773219397, longitude=127.04546917848704, radius=500)
2025-11-21 20:58:02.764 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:58:02.764 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.54906773219397, longitude=127.04546917848704, radius=500
2025-11-21 20:58:02.764 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:02.764312100Z","nanoTime":31868778636300,"traceId":"fbfd6088","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:58:02.764 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:58:02.764 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.54906773219397, lon=127.04546917848704
2025-11-21 20:58:02.764 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:02.764312100Z","nanoTime":31868778698600,"traceId":"fbfd6088","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:58:02.764 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:02.764312100Z","nanoTime":31868778725200,"traceId":"fbfd6088","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":26600,"duration_ms":0,"resultData":{"latitude":37.54906773219397,"longitude":127.04546917848704,"precision":7,"centerHash":"wydmdgx","adjacentHashes":["wydmdgx","wydmdgz","wydme5b","wydme58","wydme52","wydmdgr","wydmdgq","wydmdgw","wydmdgy"],"errorMessage":null,"success":true}}
2025-11-21 20:58:02.764 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdgx, wydmdgz, wydme5b, wydme58, wydme52, wydmdgr, wydmdgq, wydmdgw, wydmdgy]
2025-11-21 20:58:02.764 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdgx
2025-11-21 20:58:02.764 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:02.764312100Z","nanoTime":31868778826300,"traceId":"fbfd6088","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":190000,"duration_ms":0,"resultData":{"requestLatitude":37.54906773219397,"requestLongitude":127.04546917848704,"requestRadius":500,"centerGeohashId":"wydmdgx","nineBlockGeohashes":["wydmdgx","wydmdgz","wydme5b","wydme58","wydme52","wydmdgr","wydmdgq","wydmdgw","wydmdgy"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:58:02.764 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:02.764312100Z","nanoTime":31868778872700,"traceId":"fbfd6088","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:58:02.764 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:58:02.764 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdgx
2025-11-21 20:58:02.765 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3939ms)
2025-11-21 20:58:02.765 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:58:02.767 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:58:02.767 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 20:58:02.767 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.9319ms, 역직렬화: 0.0ms
2025-11-21 20:58:02.767 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:58:02.767 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:02.767382200Z","nanoTime":31868781500200,"traceId":"fbfd6088","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2627500,"duration_ms":2,"resultData":{"centerGeohashId":"wydmdgx","nineBlockGeohashes":["wydmdgx","wydmdgz","wydme5b","wydme58","wydme52","wydmdgr","wydmdgq","wydmdgw","wydmdgy"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdgx","hit":false,"valueSize":0,"l1CacheGetDurationNs":393900,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdgx","cacheKey":"data:wydmdgx:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":244700},{"geohashId":"wydmdgz","cacheKey":"data:wydmdgz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":203500},{"geohashId":"wydme5b","cacheKey":"data:wydme5b:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":208800},{"geohashId":"wydme58","cacheKey":"data:wydme58:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":368600},{"geohashId":"wydme52","cacheKey":"data:wydme52:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":275700},{"geohashId":"wydmdgr","cacheKey":"data:wydmdgr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":201800},{"geohashId":"wydmdgq","cacheKey":"data:wydmdgq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":112700},{"geohashId":"wydmdgw","cacheKey":"data:wydmdgw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":123300},{"geohashId":"wydmdgy","cacheKey":"data:wydmdgy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":122200}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1931900,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 20:58:02.767 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:02.767382200Z","nanoTime":31868781695600,"traceId":"fbfd6088","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:58:02.767 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:58:02.767 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 20:58:02.769 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 21건
2025-11-21 20:58:02.771 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:58:02.773 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 20:58:02.773 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:02.773063100Z","nanoTime":31868786891500,"traceId":"fbfd6088","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5195900,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydmdgx","wydmdgz","wydme5b","wydme58","wydme52","wydmdgr","wydmdgq","wydmdgw","wydmdgy"],"cctvQueryResult":{"queryGeohashIds":["wydmdgx","wydmdgz","wydme5b","wydme58","wydme52","wydmdgr","wydmdgq","wydmdgw","wydmdgy"],"totalRowsReturned":21,"rowsPerGrid":{"wydmdgr":1,"wydme52":5,"wydme5b":2,"wydmdgq":3,"wydmdgz":3,"wydme58":1,"wydmdgw":1,"wydmdgx":4,"wydmdgy":1},"queryExecutionTimeNs":2757200,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdgr","cacheKey":"data:wydmdgr:cctv","dataCount":1,"dataSize":138,"errorMessage":null,"success":true},{"geohashId":"wydme52","cacheKey":"data:wydme52:cctv","dataCount":5,"dataSize":673,"errorMessage":null,"success":true},{"geohashId":"wydme5b","cacheKey":"data:wydme5b:cctv","dataCount":2,"dataSize":270,"errorMessage":null,"success":true},{"geohashId":"wydmdgq","cacheKey":"data:wydmdgq:cctv","dataCount":3,"dataSize":406,"errorMessage":null,"success":true},{"geohashId":"wydmdgz","cacheKey":"data:wydmdgz:cctv","dataCount":3,"dataSize":412,"errorMessage":null,"success":true},{"geohashId":"wydme58","cacheKey":"data:wydme58:cctv","dataCount":1,"dataSize":137,"errorMessage":null,"success":true},{"geohashId":"wydmdgw","cacheKey":"data:wydmdgw:cctv","dataCount":1,"dataSize":134,"errorMessage":null,"success":true},{"geohashId":"wydmdgx","cacheKey":"data:wydmdgx:cctv","dataCount":4,"dataSize":544,"errorMessage":null,"success":true},{"geohashId":"wydmdgy","cacheKey":"data:wydmdgy:cctv","dataCount":1,"dataSize":137,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:58:02.773 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:02.773063100Z","nanoTime":31868787045900,"traceId":"fbfd6088","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:58:02.773 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:58:02.773 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.54906773219397, 127.04546917848704)
2025-11-21 20:58:02.773 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:58:02.860 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:58:02.860 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:58:02.860 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:58:02.860 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.54906773219397, 127.04546917848704), 반경: 500m
2025-11-21 20:58:02.954 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:58:02.956 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 142건
2025-11-21 20:58:02.956 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:58:02.956 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:58:02.956 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 20:58:02.956 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 성동구
2025-11-21 20:58:02.956 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:58:02.956 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:58:02.956 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:58:02.956 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 20:58:02.958 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:02.956637300Z","nanoTime":31868972282200,"traceId":"fbfd6088","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":185236300,"duration_ms":185,"resultData":{"latitude":37.54906773219397,"longitude":127.04546917848704,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":185111100,"addressApiResult":{"cached":false,"cacheKey":"address:37.54906773219397:127.04546917848704","roadAddress":"서울특별시 성동구 왕십리로14길 11","jibunAddress":"서울 성동구 성수동1가 656-1252","responseSize":79,"executionTimeNs":87259000,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":624800,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.54906773219397:127.04546917848704:500","categoryCount":15,"placesByCategory":{"CT1":15,"AT4":5,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":15,"OL7":1,"PM9":10},"totalPlaces":142,"responseSize":16398,"executionTimeNs":97227300,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:58:02.958 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:02.958650800Z","nanoTime":31868972550400,"traceId":"fbfd6088","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:58:02.958 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:58:02.958 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:58:02.958 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 21개
2025-11-21 20:58:02.958 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 21개 (총 카메라 대수: 48대)
2025-11-21 20:58:02.958 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:58:03.042 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구  당산로 221 (거리: 867m)
2025-11-21 20:58:03.042 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:58:03.042 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:58:03.042 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 20:58:03.042 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:58:03.044 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:03.042907900Z","nanoTime":31869058408000,"traceId":"fbfd6088","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":85857600,"duration_ms":85,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":21,"totalCctvAfterFilter":21,"totalCameraCount":48,"filterRate":1.0,"filterExecutionTimeNs":7200,"success":true},"policeQuery":{"queryDurationNs":85394600,"found":true,"nearestAddress":"서울특별시 영등포구  당산로 221","nearestDistance":866.6949721479656,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":15,"AT4":5,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":15,"OL7":1,"PM9":10},"placesAfterFilter":{"CT1":15,"AT4":5,"CS2":15,"SC4":1,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":15,"OL7":1,"PM9":10},"totalBeforeFilter":142,"totalAfterFilter":142,"filterRate":1.0,"filterExecutionTimeNs":112300,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:58:03.044 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:03.044690800Z","nanoTime":31869058656000,"traceId":"fbfd6088","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:58:03.044 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:58:03.044 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 50.35, 편의성: 37.76, 종합: 44.06
2025-11-21 20:58:03.045 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:03.044690800Z","nanoTime":31869058942500,"traceId":"fbfd6088","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":286500,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":0.0,"policeDistance":866.6949721479656,"cctvScore":70.0,"cctvCount":21,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":50.354922880000004,"success":true},"convenienceScore":{"categoryScores":{"CT1":60.0,"AT4":15.0,"CS2":5.333162672127825,"SC4":2.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":80.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":37.755544178141854,"success":true},"overallScore":44.05523352907093,"errorMessage":null,"success":true}}
2025-11-21 20:58:03.045 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:03.045196900Z","nanoTime":31869059164000,"traceId":"fbfd6088","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:58:03.045 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:58:03.045 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구  당산로 221, latitude=37.548221, longitude=127.055242, geohashId=wydme5q)
2025-11-21 20:58:03.045 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 866.6949721479656
2025-11-21 20:58:03.045 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdgx
2025-11-21 20:58:03.045 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:58:03.045 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:03.045878800Z","nanoTime":31869060657100,"traceId":"fbfd6088","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1493100,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["카페이(가) 21m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdgx","dataSize":19868,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":19868,"errorMessage":null,"success":true}}
2025-11-21 20:58:03.045 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 20:58:03.953 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 20:58:03.953 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.55476696910297, longitude=127.03005857049743, radius=500)
2025-11-21 20:58:03.953 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 20:58:03.953 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.55476696910297, longitude=127.03005857049743, radius=500
2025-11-21 20:58:03.953 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:03.953767500Z","nanoTime":31869968330000,"traceId":"769ac90b","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 20:58:03.953 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 20:58:03.953 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.55476696910297, lon=127.03005857049743
2025-11-21 20:58:03.953 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:03.953767500Z","nanoTime":31869968422300,"traceId":"769ac90b","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 20:58:03.953 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:03.953767500Z","nanoTime":31869968468000,"traceId":"769ac90b","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":45700,"duration_ms":0,"resultData":{"latitude":37.55476696910297,"longitude":127.03005857049743,"precision":7,"centerHash":"wydmdss","adjacentHashes":["wydmdss","wydmdsu","wydmdsv","wydmdst","wydmdsm","wydmdsk","wydmds7","wydmdse","wydmdsg"],"errorMessage":null,"success":true}}
2025-11-21 20:58:03.953 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdss, wydmdsu, wydmdsv, wydmdst, wydmdsm, wydmdsk, wydmds7, wydmdse, wydmdsg]
2025-11-21 20:58:03.953 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdss
2025-11-21 20:58:03.953 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:03.953767500Z","nanoTime":31869968571400,"traceId":"769ac90b","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":241400,"duration_ms":0,"resultData":{"requestLatitude":37.55476696910297,"requestLongitude":127.03005857049743,"requestRadius":500,"centerGeohashId":"wydmdss","nineBlockGeohashes":["wydmdss","wydmdsu","wydmdsv","wydmdst","wydmdsm","wydmdsk","wydmds7","wydmdse","wydmdsg"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 20:58:03.953 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:03.953767500Z","nanoTime":31869968612700,"traceId":"769ac90b","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 20:58:03.953 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 20:58:03.953 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdss
2025-11-21 20:58:03.955 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3106ms)
2025-11-21 20:58:03.955 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 20:58:03.956 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 20:58:03.956 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 2개, 미스: 7개
2025-11-21 20:58:03.956 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.65ms, 역직렬화: 0.1009ms
2025-11-21 20:58:03.956 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 20:58:03.956 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:03.956369800Z","nanoTime":31869970834900,"traceId":"769ac90b","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2222200,"duration_ms":2,"resultData":{"centerGeohashId":"wydmdss","nineBlockGeohashes":["wydmdss","wydmdsu","wydmdsv","wydmdst","wydmdsm","wydmdsk","wydmds7","wydmdse","wydmdsg"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdss","hit":false,"valueSize":0,"l1CacheGetDurationNs":310600,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdss","cacheKey":"data:wydmdss:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":172700},{"geohashId":"wydmdsu","cacheKey":"data:wydmdsu:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":83600},{"geohashId":"wydmdsv","cacheKey":"data:wydmdsv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":115200},{"geohashId":"wydmdst","cacheKey":"data:wydmdst:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":124800},{"geohashId":"wydmdsm","cacheKey":"data:wydmdsm:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":133100},{"geohashId":"wydmdsk","cacheKey":"data:wydmdsk:cctv","hit":true,"dataType":"cctv","dataCount":8,"dataSize":1060,"l2CacheGetDurationNs":290300},{"geohashId":"wydmds7","cacheKey":"data:wydmds7:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":268,"l2CacheGetDurationNs":314200},{"geohashId":"wydmdse","cacheKey":"data:wydmdse:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":128200},{"geohashId":"wydmdsg","cacheKey":"data:wydmdsg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":114500}],"l2TotalHits":2,"l2TotalMisses":7,"l2CacheTotalDurationNs":1650000,"l2JsonDeserializeTotalDurationNs":100900,"errorMessage":null,"success":true}}
2025-11-21 20:58:03.957 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:03.956369800Z","nanoTime":31869971014000,"traceId":"769ac90b","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 20:58:03.957 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 20:58:03.957 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 7개
2025-11-21 20:58:03.961 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 4건
2025-11-21 20:58:03.963 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 20:58:03.964 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 4개
2025-11-21 20:58:03.964 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:03.964053500Z","nanoTime":31869977875100,"traceId":"769ac90b","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6861100,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydmdss","wydmdsu","wydmdsv","wydmdst","wydmdsm","wydmdse","wydmdsg"],"cctvQueryResult":{"queryGeohashIds":["wydmdss","wydmdsu","wydmdsv","wydmdst","wydmdsm","wydmdse","wydmdsg"],"totalRowsReturned":4,"rowsPerGrid":{"wydmdsm":2,"wydmdsv":2},"queryExecutionTimeNs":5542100,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdsm","cacheKey":"data:wydmdsm:cctv","dataCount":2,"dataSize":266,"errorMessage":null,"success":true},{"geohashId":"wydmdsv","cacheKey":"data:wydmdsv:cctv","dataCount":2,"dataSize":263,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 20:58:03.964 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:03.964053500Z","nanoTime":31869978051300,"traceId":"769ac90b","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 20:58:03.964 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 20:58:03.964 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.55476696910297, 127.03005857049743)
2025-11-21 20:58:03.964 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 20:58:04.027 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 20:58:04.027 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 20:58:04.027 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 20:58:04.027 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.55476696910297, 127.03005857049743), 반경: 500m
2025-11-21 20:58:04.123 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 20:58:04.123 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 109건
2025-11-21 20:58:04.125 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 20:58:04.125 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 20:58:04.125 [http-nio-8185-exec-4] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 20:58:04.125 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 20:58:04.125 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 20:58:04.125 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 20:58:04.125 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 20:58:04.125 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:04.125150800Z","nanoTime":31870139167800,"traceId":"769ac90b","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":161116500,"duration_ms":161,"resultData":{"latitude":37.55476696910297,"longitude":127.03005857049743,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":161008700,"addressApiResult":{"cached":false,"cacheKey":"address:37.55476696910297:127.03005857049743","roadAddress":"주소 없음","jibunAddress":"서울 성동구 행당동 346-4","responseSize":59,"executionTimeNs":64536300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":48400,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.55476696910297:127.03005857049743:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":0,"CS2":9,"SC4":4,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":8,"OL7":0,"PM9":8},"totalPlaces":109,"responseSize":12742,"executionTimeNs":96424000,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:58:04.125 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:04.125150800Z","nanoTime":31870139385200,"traceId":"769ac90b","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 20:58:04.125 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 20:58:04.125 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 20:58:04.125 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 14개
2025-11-21 20:58:04.125 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 14개 (총 카메라 대수: 39대)
2025-11-21 20:58:04.125 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 20:58:04.192 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구 영신로20길 11 (거리: 315m)
2025-11-21 20:58:04.192 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 20:58:04.192 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 20:58:04.193 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 12개 카테고리
2025-11-21 20:58:04.193 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 20:58:04.193 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:04.193586100Z","nanoTime":31870207443900,"traceId":"769ac90b","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":68058700,"duration_ms":68,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":14,"totalCctvAfterFilter":14,"totalCameraCount":39,"filterRate":1.0,"filterExecutionTimeNs":7700,"success":true},"policeQuery":{"queryDurationNs":67705100,"found":true,"nearestAddress":"서울특별시 영등포구 영신로20길 11","nearestDistance":314.53295758440686,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"BK9":15,"HP8":15,"CS2":9,"AC5":15,"CE7":15,"SC4":4,"SW8":1,"PO3":3,"FD6":15,"PK6":8,"MT1":1,"PM9":8},"placesAfterFilter":{"BK9":15,"HP8":15,"CS2":9,"AC5":15,"CE7":15,"SC4":4,"SW8":1,"PO3":3,"FD6":15,"PK6":8,"MT1":1,"PM9":8},"totalBeforeFilter":109,"totalAfterFilter":109,"filterRate":1.0,"filterExecutionTimeNs":66400,"success":true},"errorMessage":null,"success":true}}
2025-11-21 20:58:04.193 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:04.193586100Z","nanoTime":31870207599300,"traceId":"769ac90b","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 20:58:04.193 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 20:58:04.193 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 36.87, 편의성: 37.69, 종합: 37.28
2025-11-21 20:58:04.193 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:04.193952400Z","nanoTime":31870207762400,"traceId":"769ac90b","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":163100,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":60.68338030194914,"policeDistance":314.53295758440686,"cctvScore":46.666666666666664,"cctvCount":14,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":36.87168075725141,"success":true},"convenienceScore":{"categoryScores":{"BK9":75.0,"HP8":100.0,"CS2":2.25,"AC5":15.0,"CE7":30.0,"SC4":8.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":24.0,"MT1":10.0,"PM9":64.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":37.6875,"success":true},"overallScore":37.279590378625706,"errorMessage":null,"success":true}}
2025-11-21 20:58:04.193 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:04.193952400Z","nanoTime":31870207965200,"traceId":"769ac90b","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 20:58:04.193 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 20:58:04.193 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구 영신로20길 11, latitude=37.557429, longitude=127.028852, geohashId=wydmdt5)
2025-11-21 20:58:04.193 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 314.53295758440686
2025-11-21 20:58:04.193 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdss
2025-11-21 20:58:04.193 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 20:58:04.193 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T11:58:04.193952400Z","nanoTime":31870209073500,"traceId":"769ac90b","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1108300,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["주차장이(가) 167m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdss","dataSize":15617,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":15617,"errorMessage":null,"success":true}}
2025-11-21 20:58:04.193 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 21:04:24.475 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 21:04:24.475 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.556388116946515, longitude=127.0325037968508, radius=500)
2025-11-21 21:04:24.475 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 21:04:24.475 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.556388116946515, longitude=127.0325037968508, radius=500
2025-11-21 21:04:24.475 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:24.475846800Z","nanoTime":32250490287700,"traceId":"38cf8850","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 21:04:24.475 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 21:04:24.475 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.556388116946515, lon=127.0325037968508
2025-11-21 21:04:24.475 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:24.475846800Z","nanoTime":32250490408900,"traceId":"38cf8850","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 21:04:24.475 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:24.475846800Z","nanoTime":32250490460500,"traceId":"38cf8850","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":51600,"duration_ms":0,"resultData":{"latitude":37.556388116946515,"longitude":127.0325037968508,"precision":7,"centerHash":"wydmdsy","adjacentHashes":["wydmdsy","wydmdtn","wydmdtp","wydmdsz","wydmdsx","wydmdsw","wydmdst","wydmdsv","wydmdtj"],"errorMessage":null,"success":true}}
2025-11-21 21:04:24.475 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdsy, wydmdtn, wydmdtp, wydmdsz, wydmdsx, wydmdsw, wydmdst, wydmdsv, wydmdtj]
2025-11-21 21:04:24.475 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdsy
2025-11-21 21:04:24.476 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:24.475846800Z","nanoTime":32250490589300,"traceId":"38cf8850","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":301600,"duration_ms":0,"resultData":{"requestLatitude":37.556388116946515,"requestLongitude":127.0325037968508,"requestRadius":500,"centerGeohashId":"wydmdsy","nineBlockGeohashes":["wydmdsy","wydmdtn","wydmdtp","wydmdsz","wydmdsx","wydmdsw","wydmdst","wydmdsv","wydmdtj"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 21:04:24.476 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:24.476847Z","nanoTime":32250490646200,"traceId":"38cf8850","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 21:04:24.476 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 21:04:24.476 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdsy
2025-11-21 21:04:24.477 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.533ms)
2025-11-21 21:04:24.477 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 21:04:24.479 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 21:04:24.479 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 5개, 미스: 4개
2025-11-21 21:04:24.479 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.8073ms, 역직렬화: 0.1377ms
2025-11-21 21:04:24.479 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 21:04:24.479 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:24.479173500Z","nanoTime":32250493234300,"traceId":"38cf8850","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2588100,"duration_ms":2,"resultData":{"centerGeohashId":"wydmdsy","nineBlockGeohashes":["wydmdsy","wydmdtn","wydmdtp","wydmdsz","wydmdsx","wydmdsw","wydmdst","wydmdsv","wydmdtj"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdsy","hit":false,"valueSize":0,"l1CacheGetDurationNs":533000,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdsy","cacheKey":"data:wydmdsy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":247700},{"geohashId":"wydmdtn","cacheKey":"data:wydmdtn:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":129,"l2CacheGetDurationNs":335500},{"geohashId":"wydmdtp","cacheKey":"data:wydmdtp:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":262,"l2CacheGetDurationNs":187800},{"geohashId":"wydmdsz","cacheKey":"data:wydmdsz:cctv","hit":true,"dataType":"cctv","dataCount":6,"dataSize":774,"l2CacheGetDurationNs":213800},{"geohashId":"wydmdsx","cacheKey":"data:wydmdsx:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":78700},{"geohashId":"wydmdsw","cacheKey":"data:wydmdsw:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":89200},{"geohashId":"wydmdst","cacheKey":"data:wydmdst:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":75300},{"geohashId":"wydmdsv","cacheKey":"data:wydmdsv:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":263,"l2CacheGetDurationNs":173100},{"geohashId":"wydmdtj","cacheKey":"data:wydmdtj:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":397,"l2CacheGetDurationNs":195900}],"l2TotalHits":5,"l2TotalMisses":4,"l2CacheTotalDurationNs":1807300,"l2JsonDeserializeTotalDurationNs":137700,"errorMessage":null,"success":true}}
2025-11-21 21:04:24.479 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:24.479173500Z","nanoTime":32250493395900,"traceId":"38cf8850","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 21:04:24.479 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 21:04:24.479 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 4개
2025-11-21 21:04:24.485 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 2건
2025-11-21 21:04:24.485 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 21:04:24.485 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 7개
2025-11-21 21:04:24.485 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:24.485765500Z","nanoTime":32250500505400,"traceId":"38cf8850","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":7109500,"duration_ms":7,"resultData":{"inputCctvMissGrids":["wydmdsy","wydmdsx","wydmdsw","wydmdst"],"cctvQueryResult":{"queryGeohashIds":["wydmdsy","wydmdsx","wydmdsw","wydmdst"],"totalRowsReturned":2,"rowsPerGrid":{"wydmdsw":1,"wydmdsy":1},"queryExecutionTimeNs":6018200,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdsw","cacheKey":"data:wydmdsw:cctv","dataCount":1,"dataSize":129,"errorMessage":null,"success":true},{"geohashId":"wydmdsy","cacheKey":"data:wydmdsy:cctv","dataCount":1,"dataSize":131,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 21:04:24.485 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:24.485765500Z","nanoTime":32250500645800,"traceId":"38cf8850","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 21:04:24.485 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 21:04:24.485 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.556388116946515, 127.0325037968508)
2025-11-21 21:04:24.485 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 21:04:24.660 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 21:04:24.660 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 21:04:24.660 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 21:04:24.660 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.556388116946515, 127.0325037968508), 반경: 500m
2025-11-21 21:04:24.838 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 21:04:24.838 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56036796794163, longitude=127.0407450875696, radius=500)
2025-11-21 21:04:24.838 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 21:04:24.838 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56036796794163, longitude=127.0407450875696, radius=500
2025-11-21 21:04:24.838 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:24.838579400Z","nanoTime":32250853048200,"traceId":"33e4d03d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 21:04:24.838 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 21:04:24.838 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56036796794163, lon=127.0407450875696
2025-11-21 21:04:24.838 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:24.838579400Z","nanoTime":32250853121000,"traceId":"33e4d03d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 21:04:24.838 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:24.838579400Z","nanoTime":32250853158400,"traceId":"33e4d03d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":37400,"duration_ms":0,"resultData":{"latitude":37.56036796794163,"longitude":127.0407450875696,"precision":7,"centerHash":"wydmdvs","adjacentHashes":["wydmdvs","wydmdvu","wydmdvv","wydmdvt","wydmdvm","wydmdvk","wydmdv7","wydmdve","wydmdvg"],"errorMessage":null,"success":true}}
2025-11-21 21:04:24.838 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmdvs, wydmdvu, wydmdvv, wydmdvt, wydmdvm, wydmdvk, wydmdv7, wydmdve, wydmdvg]
2025-11-21 21:04:24.838 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmdvs
2025-11-21 21:04:24.838 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:24.838579400Z","nanoTime":32250853276800,"traceId":"33e4d03d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":228600,"duration_ms":0,"resultData":{"requestLatitude":37.56036796794163,"requestLongitude":127.0407450875696,"requestRadius":500,"centerGeohashId":"wydmdvs","nineBlockGeohashes":["wydmdvs","wydmdvu","wydmdvv","wydmdvt","wydmdvm","wydmdvk","wydmdv7","wydmdve","wydmdvg"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 21:04:24.838 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:24.838579400Z","nanoTime":32250853321800,"traceId":"33e4d03d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 21:04:24.838 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 21:04:24.838 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmdvs
2025-11-21 21:04:24.839 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.2424ms)
2025-11-21 21:04:24.839 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 21:04:24.842 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 21:04:24.842 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 7개, 미스: 2개
2025-11-21 21:04:24.842 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.9063ms, 역직렬화: 0.2439ms
2025-11-21 21:04:24.842 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 21:04:24.842 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:24.842384100Z","nanoTime":32250856758200,"traceId":"33e4d03d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3436400,"duration_ms":3,"resultData":{"centerGeohashId":"wydmdvs","nineBlockGeohashes":["wydmdvs","wydmdvu","wydmdvv","wydmdvt","wydmdvm","wydmdvk","wydmdv7","wydmdve","wydmdvg"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmdvs","hit":false,"valueSize":0,"l1CacheGetDurationNs":242400,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmdvs","cacheKey":"data:wydmdvs:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":655,"l2CacheGetDurationNs":344400},{"geohashId":"wydmdvu","cacheKey":"data:wydmdvu:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":84000},{"geohashId":"wydmdvv","cacheKey":"data:wydmdvv:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":134,"l2CacheGetDurationNs":191800},{"geohashId":"wydmdvt","cacheKey":"data:wydmdvt:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":401,"l2CacheGetDurationNs":423200},{"geohashId":"wydmdvm","cacheKey":"data:wydmdvm:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":127400},{"geohashId":"wydmdvk","cacheKey":"data:wydmdvk:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":527,"l2CacheGetDurationNs":338000},{"geohashId":"wydmdv7","cacheKey":"data:wydmdv7:cctv","hit":true,"dataType":"cctv","dataCount":8,"dataSize":970,"l2CacheGetDurationNs":359100},{"geohashId":"wydmdve","cacheKey":"data:wydmdve:cctv","hit":true,"dataType":"cctv","dataCount":6,"dataSize":728,"l2CacheGetDurationNs":395000},{"geohashId":"wydmdvg","cacheKey":"data:wydmdvg:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":395,"l2CacheGetDurationNs":303800}],"l2TotalHits":7,"l2TotalMisses":2,"l2CacheTotalDurationNs":2906300,"l2JsonDeserializeTotalDurationNs":243900,"errorMessage":null,"success":true}}
2025-11-21 21:04:24.842 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:24.842384100Z","nanoTime":32250856958500,"traceId":"33e4d03d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 21:04:24.842 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 21:04:24.842 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 2개
2025-11-21 21:04:24.842 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 21:04:24.842 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 127건
2025-11-21 21:04:24.844 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 21:04:24.844 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 21:04:24.844 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 성동구
2025-11-21 21:04:24.844 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 성동구
2025-11-21 21:04:24.844 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 21:04:24.844 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 21:04:24.844 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 21:04:24.844 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.745164096
2025-11-21 21:04:24.844 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:24.844395400Z","nanoTime":32250859636200,"traceId":"38cf8850","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":358990400,"duration_ms":358,"resultData":{"latitude":37.556388116946515,"longitude":127.0325037968508,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":358868400,"addressApiResult":{"cached":false,"cacheKey":"address:37.556388116946515:127.0325037968508","roadAddress":"서울특별시 성동구 행당로8길 8","jibunAddress":"서울 성동구 행당동 375","responseSize":69,"executionTimeNs":174115300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:성동구","guName":"성동구","arrestRate":0.745164096,"dataFound":true,"executionTimeNs":596300,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.556388116946515:127.0325037968508:500","categoryCount":15,"placesByCategory":{"CT1":3,"AT4":0,"CS2":14,"SC4":4,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":4,"FD6":15,"PK6":13,"OL7":0,"PM9":11},"totalPlaces":127,"responseSize":14739,"executionTimeNs":184156800,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:04:24.844 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:24.844395400Z","nanoTime":32250859967900,"traceId":"38cf8850","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 21:04:24.844 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 21:04:24.844 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 21:04:24.844 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 16개
2025-11-21 21:04:24.844 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 16개 (총 카메라 대수: 46대)
2025-11-21 21:04:24.844 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 21:04:24.847 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 4건
2025-11-21 21:04:24.847 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 21:04:24.847 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 21:04:24.847 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:24.847116800Z","nanoTime":32250862477400,"traceId":"33e4d03d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5518900,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydmdvu","wydmdvm"],"cctvQueryResult":{"queryGeohashIds":["wydmdvu","wydmdvm"],"totalRowsReturned":4,"rowsPerGrid":{"wydmdvu":4},"queryExecutionTimeNs":4593800,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmdvu","cacheKey":"data:wydmdvu:cctv","dataCount":4,"dataSize":521,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 21:04:24.847 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:24.847116800Z","nanoTime":32250862627400,"traceId":"33e4d03d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 21:04:24.847 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 21:04:24.847 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56036796794163, 127.0407450875696)
2025-11-21 21:04:24.849 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 21:04:24.921 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구 영신로20길 11 (거리: 342m)
2025-11-21 21:04:24.922 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 21:04:24.922 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 21:04:24.922 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 21:04:24.922 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 21:04:24.922 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:24.922258700Z","nanoTime":32250936175200,"traceId":"38cf8850","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":76207300,"duration_ms":76,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":16,"totalCctvAfterFilter":16,"totalCameraCount":46,"filterRate":1.0,"filterExecutionTimeNs":15100,"success":true},"policeQuery":{"queryDurationNs":75775000,"found":true,"nearestAddress":"서울특별시 영등포구 영신로20길 11","nearestDistance":342.0795188761874,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":3,"CS2":14,"SC4":4,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":4,"FD6":15,"PK6":13,"PM9":11},"placesAfterFilter":{"CT1":3,"CS2":14,"SC4":4,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":4,"FD6":15,"PK6":13,"PM9":11},"totalBeforeFilter":127,"totalAfterFilter":127,"filterRate":1.0,"filterExecutionTimeNs":84400,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:04:24.922 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:24.922258700Z","nanoTime":32250936474600,"traceId":"38cf8850","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 21:04:24.922 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 21:04:24.922 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 60.86, 편의성: 39.92, 종합: 50.39
2025-11-21 21:04:24.922 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:24.922750800Z","nanoTime":32250936725600,"traceId":"38cf8850","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":251000,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":57.240060140476565,"policeDistance":342.0795188761874,"cctvScore":53.333333333333336,"cctvCount":16,"arrestRateScore":74.5164096,"arrestRate":0.745164096,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":60.86027425547631,"success":true},"convenienceScore":{"categoryScores":{"CT1":12.0,"CS2":4.97761849398597,"SC4":8.0,"MT1":20.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":12.0,"FD6":15.0,"PK6":39.0,"PM9":88.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"성동구","guPopulation":281259,"finalScore":39.92135526876815,"success":true},"overallScore":50.39081476212223,"errorMessage":null,"success":true}}
2025-11-21 21:04:24.922 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:24.922750800Z","nanoTime":32250936870800,"traceId":"38cf8850","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 21:04:24.922 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 21:04:24.922 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구 영신로20길 11, latitude=37.557429, longitude=127.028852, geohashId=wydmdt5)
2025-11-21 21:04:24.922 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 342.0795188761874
2025-11-21 21:04:24.922 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdsy
2025-11-21 21:04:24.922 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 21:04:24.922 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:24.922750800Z","nanoTime":32250938174300,"traceId":"38cf8850","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1303500,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["학교이(가) 110m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmdsy","dataSize":17615,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17615,"errorMessage":null,"success":true}}
2025-11-21 21:04:24.922 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 21:04:24.924 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 21:04:24.924 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 21:04:24.926 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 21:04:24.926 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56036796794163, 127.0407450875696), 반경: 500m
2025-11-21 21:04:25.008 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 21:04:25.008 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 144건
2025-11-21 21:04:25.010 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 21:04:25.010 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 21:04:25.010 [http-nio-8185-exec-8] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 21:04:25.010 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 21:04:25.010 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 21:04:25.010 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 21:04:25.010 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 21:04:25.010 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:25.010096700Z","nanoTime":32251024754500,"traceId":"33e4d03d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":162127100,"duration_ms":162,"resultData":{"latitude":37.56036796794163,"longitude":127.0407450875696,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":162018000,"addressApiResult":{"cached":false,"cacheKey":"address:37.56036796794163:127.0407450875696","roadAddress":"주소 없음","jibunAddress":"서울 성동구 행당동 3-26","responseSize":58,"executionTimeNs":77765100,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":37600,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56036796794163:127.0407450875696:500","categoryCount":15,"placesByCategory":{"CT1":7,"AT4":1,"CS2":15,"SC4":3,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":7,"FD6":15,"PK6":15,"OL7":0,"PM9":15},"totalPlaces":144,"responseSize":16699,"executionTimeNs":84215300,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:04:25.010 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:25.010096700Z","nanoTime":32251025039100,"traceId":"33e4d03d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 21:04:25.010 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 21:04:25.010 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 21:04:25.010 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 34개
2025-11-21 21:04:25.010 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 34개 (총 카메라 대수: 95대)
2025-11-21 21:04:25.010 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 21:04:25.088 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 영등포구  선유로 95 (거리: 93m)
2025-11-21 21:04:25.088 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 21:04:25.088 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 21:04:25.088 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 21:04:25.088 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 21:04:25.088 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:25.088797600Z","nanoTime":32251104635400,"traceId":"33e4d03d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":79596300,"duration_ms":79,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":34,"totalCctvAfterFilter":34,"totalCameraCount":95,"filterRate":1.0,"filterExecutionTimeNs":14800,"success":true},"policeQuery":{"queryDurationNs":79162200,"found":true,"nearestAddress":"서울특별시 영등포구  선유로 95","nearestDistance":93.10778336752956,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":7,"AT4":1,"CS2":15,"SC4":3,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":7,"FD6":15,"PK6":15,"PM9":15},"placesAfterFilter":{"CT1":7,"AT4":1,"CS2":15,"SC4":3,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":4,"PO3":7,"FD6":15,"PK6":15,"PM9":15},"totalBeforeFilter":144,"totalAfterFilter":144,"filterRate":1.0,"filterExecutionTimeNs":97900,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:04:25.088 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:25.088797600Z","nanoTime":32251104818800,"traceId":"33e4d03d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 21:04:25.088 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 21:04:25.088 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 66.51, 편의성: 40.13, 종합: 53.32
2025-11-21 21:04:25.088 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:25.088797600Z","nanoTime":32251105012800,"traceId":"33e4d03d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":194000,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":88.3615270790588,"policeDistance":93.10778336752956,"cctvScore":100.0,"cctvCount":34,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":66.50845812371765,"success":true},"convenienceScore":{"categoryScores":{"CT1":28.0,"AT4":3.0,"CS2":3.75,"SC4":6.0,"MT1":20.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":21.0,"FD6":15.0,"PK6":45.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":40.125,"success":true},"overallScore":53.31672906185882,"errorMessage":null,"success":true}}
2025-11-21 21:04:25.088 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:25.088797600Z","nanoTime":32251105137400,"traceId":"33e4d03d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 21:04:25.088 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 21:04:25.088 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 영등포구  선유로 95, latitude=37.560301, longitude=127.041798, geohashId=wydmdvt)
2025-11-21 21:04:25.088 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 93.10778336752956
2025-11-21 21:04:25.088 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmdvs
2025-11-21 21:04:25.088 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 21:04:25.088 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:25.088797600Z","nanoTime":32251106586300,"traceId":"33e4d03d","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1448900,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["음식점이(가) 14m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmdvs","dataSize":21326,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":21326,"errorMessage":null,"success":true}}
2025-11-21 21:04:25.088 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 21:04:25.587 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 21:04:25.587 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56310301275703, longitude=127.05100113165997, radius=500)
2025-11-21 21:04:25.587 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 21:04:25.587 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56310301275703, longitude=127.05100113165997, radius=500
2025-11-21 21:04:25.587 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:25.587871600Z","nanoTime":32251602107400,"traceId":"05cbf382","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 21:04:25.587 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 21:04:25.587 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56310301275703, lon=127.05100113165997
2025-11-21 21:04:25.587 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:25.587871600Z","nanoTime":32251602199700,"traceId":"05cbf382","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 21:04:25.587 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:25.587871600Z","nanoTime":32251602242000,"traceId":"05cbf382","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":42300,"duration_ms":0,"resultData":{"latitude":37.56310301275703,"longitude":127.05100113165997,"precision":7,"centerHash":"wydmen5","adjacentHashes":["wydmen5","wydmen7","wydmenk","wydmenh","wydmeju","wydmejg","wydmejf","wydmen4","wydmen6"],"errorMessage":null,"success":true}}
2025-11-21 21:04:25.587 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmen5, wydmen7, wydmenk, wydmenh, wydmeju, wydmejg, wydmejf, wydmen4, wydmen6]
2025-11-21 21:04:25.587 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmen5
2025-11-21 21:04:25.587 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:25.587871600Z","nanoTime":32251602346800,"traceId":"05cbf382","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":239400,"duration_ms":0,"resultData":{"requestLatitude":37.56310301275703,"requestLongitude":127.05100113165997,"requestRadius":500,"centerGeohashId":"wydmen5","nineBlockGeohashes":["wydmen5","wydmen7","wydmenk","wydmenh","wydmeju","wydmejg","wydmejf","wydmen4","wydmen6"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 21:04:25.587 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:25.587871600Z","nanoTime":32251602393900,"traceId":"05cbf382","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 21:04:25.587 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 21:04:25.587 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmen5
2025-11-21 21:04:25.588 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.5413ms)
2025-11-21 21:04:25.588 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 21:04:25.590 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 21:04:25.591 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 1개, 미스: 8개
2025-11-21 21:04:25.591 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.6051ms, 역직렬화: 0.0726ms
2025-11-21 21:04:25.591 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 21:04:25.591 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:25.591048400Z","nanoTime":32251604901600,"traceId":"05cbf382","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2507700,"duration_ms":2,"resultData":{"centerGeohashId":"wydmen5","nineBlockGeohashes":["wydmen5","wydmen7","wydmenk","wydmenh","wydmeju","wydmejg","wydmejf","wydmen4","wydmen6"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmen5","hit":false,"valueSize":0,"l1CacheGetDurationNs":541300,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmen5","cacheKey":"data:wydmen5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":248600},{"geohashId":"wydmen7","cacheKey":"data:wydmen7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":126500},{"geohashId":"wydmenk","cacheKey":"data:wydmenk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":173900},{"geohashId":"wydmenh","cacheKey":"data:wydmenh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":148900},{"geohashId":"wydmeju","cacheKey":"data:wydmeju:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":654,"l2CacheGetDurationNs":251300},{"geohashId":"wydmejg","cacheKey":"data:wydmejg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":118600},{"geohashId":"wydmejf","cacheKey":"data:wydmejf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":147800},{"geohashId":"wydmen4","cacheKey":"data:wydmen4:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":116500},{"geohashId":"wydmen6","cacheKey":"data:wydmen6:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":105400}],"l2TotalHits":1,"l2TotalMisses":8,"l2CacheTotalDurationNs":1605100,"l2JsonDeserializeTotalDurationNs":72600,"errorMessage":null,"success":true}}
2025-11-21 21:04:25.591 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:25.591048400Z","nanoTime":32251605062600,"traceId":"05cbf382","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 21:04:25.591 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 21:04:25.591 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 8개
2025-11-21 21:04:25.595 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 21건
2025-11-21 21:04:25.596 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 21:04:25.596 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 7개
2025-11-21 21:04:25.596 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:25.596603300Z","nanoTime":32251610650300,"traceId":"05cbf382","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5587700,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydmen5","wydmen7","wydmenk","wydmenh","wydmejg","wydmejf","wydmen4","wydmen6"],"cctvQueryResult":{"queryGeohashIds":["wydmen5","wydmen7","wydmenk","wydmenh","wydmejg","wydmejf","wydmen4","wydmen6"],"totalRowsReturned":21,"rowsPerGrid":{"wydmenh":5,"wydmejf":3,"wydmenk":4,"wydmen4":4,"wydmen5":2,"wydmen7":3},"queryExecutionTimeNs":3827200,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmenh","cacheKey":"data:wydmenh:cctv","dataCount":5,"dataSize":651,"errorMessage":null,"success":true},{"geohashId":"wydmejf","cacheKey":"data:wydmejf:cctv","dataCount":3,"dataSize":388,"errorMessage":null,"success":true},{"geohashId":"wydmenk","cacheKey":"data:wydmenk:cctv","dataCount":4,"dataSize":523,"errorMessage":null,"success":true},{"geohashId":"wydmen4","cacheKey":"data:wydmen4:cctv","dataCount":4,"dataSize":523,"errorMessage":null,"success":true},{"geohashId":"wydmen5","cacheKey":"data:wydmen5:cctv","dataCount":2,"dataSize":264,"errorMessage":null,"success":true},{"geohashId":"wydmen7","cacheKey":"data:wydmen7:cctv","dataCount":3,"dataSize":393,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 21:04:25.596 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:25.596603300Z","nanoTime":32251610804300,"traceId":"05cbf382","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 21:04:25.596 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 21:04:25.596 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56310301275703, 127.05100113165997)
2025-11-21 21:04:25.596 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 21:04:25.673 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 21:04:25.673 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 21:04:25.673 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 21:04:25.673 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56310301275703, 127.05100113165997), 반경: 500m
2025-11-21 21:04:25.755 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 21:04:25.755 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 124건
2025-11-21 21:04:25.756 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 21:04:25.756 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 21:04:25.756 [http-nio-8185-exec-9] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 21:04:25.756 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 21:04:25.756 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 21:04:25.756 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 21:04:25.756 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 21:04:25.756 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:25.756034900Z","nanoTime":32251770610500,"traceId":"05cbf382","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":159806200,"duration_ms":159,"resultData":{"latitude":37.56310301275703,"longitude":127.05100113165997,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":159704600,"addressApiResult":{"cached":false,"cacheKey":"address:37.56310301275703:127.05100113165997","roadAddress":"주소 없음","jibunAddress":"서울 성동구 용답동 127","responseSize":57,"executionTimeNs":76786300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":27300,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56310301275703:127.05100113165997:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":2,"CS2":14,"SC4":3,"MT1":0,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":2,"FD6":15,"PK6":10,"OL7":1,"PM9":14},"totalPlaces":124,"responseSize":14285,"executionTimeNs":82891000,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:04:25.757 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:25.757033700Z","nanoTime":32251770824200,"traceId":"05cbf382","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 21:04:25.757 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 21:04:25.757 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 21:04:25.757 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 26개
2025-11-21 21:04:25.757 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 26개 (총 카메라 대수: 76대)
2025-11-21 21:04:25.757 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 21:04:25.833 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 성동구  마장로 205 (거리: 198m)
2025-11-21 21:04:25.833 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 21:04:25.833 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 21:04:25.833 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 21:04:25.833 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 21:04:25.833 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:25.833265Z","nanoTime":32251848621900,"traceId":"05cbf382","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":77797700,"duration_ms":77,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":26,"totalCctvAfterFilter":26,"totalCameraCount":76,"filterRate":1.0,"filterExecutionTimeNs":8900,"success":true},"policeQuery":{"queryDurationNs":77348300,"found":true,"nearestAddress":"서울특별시 성동구  마장로 205","nearestDistance":198.36054434001923,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"AT4":2,"CS2":14,"SC4":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":2,"FD6":15,"PK6":10,"OL7":1,"PM9":14},"placesAfterFilter":{"CT1":1,"AT4":2,"CS2":14,"SC4":3,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":2,"PO3":2,"FD6":15,"PK6":10,"OL7":1,"PM9":14},"totalBeforeFilter":124,"totalAfterFilter":124,"filterRate":1.0,"filterExecutionTimeNs":86800,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:04:25.833 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:25.833265Z","nanoTime":32251848829700,"traceId":"05cbf382","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 21:04:25.833 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 21:04:25.833 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 57.23, 편의성: 35.39, 종합: 46.31
2025-11-21 21:04:25.833 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:25.833265Z","nanoTime":32251849074400,"traceId":"05cbf382","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":244700,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":75.20493195749759,"policeDistance":198.36054434001923,"cctvScore":86.66666666666667,"cctvCount":26,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":57.22814625391595,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"AT4":6.0,"CS2":3.5,"SC4":6.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":6.0,"FD6":15.0,"PK6":30.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":35.392857142857146,"success":true},"overallScore":46.310501698386545,"errorMessage":null,"success":true}}
2025-11-21 21:04:25.833 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:25.833265Z","nanoTime":32251849224500,"traceId":"05cbf382","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 21:04:25.833 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 21:04:25.833 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 성동구  마장로 205, latitude=37.564783, longitude=127.051758, geohashId=wydmenk)
2025-11-21 21:04:25.833 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 198.36054434001923
2025-11-21 21:04:25.836 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmen5
2025-11-21 21:04:25.836 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 21:04:25.836 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:25.836068100Z","nanoTime":32251850707300,"traceId":"05cbf382","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1482800,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["약국이(가) 64m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmen5","dataSize":18156,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":18156,"errorMessage":null,"success":true}}
2025-11-21 21:04:25.836 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 21:04:26.553 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 21:04:26.555 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56443006028287, longitude=127.06417699517345, radius=500)
2025-11-21 21:04:26.555 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 21:04:26.555 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56443006028287, longitude=127.06417699517345, radius=500
2025-11-21 21:04:26.555 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:26.555044300Z","nanoTime":32252568992500,"traceId":"7dd29d69","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 21:04:26.555 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 21:04:26.555 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56443006028287, lon=127.06417699517345
2025-11-21 21:04:26.555 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:26.555044300Z","nanoTime":32252569064900,"traceId":"7dd29d69","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 21:04:26.555 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:26.555044300Z","nanoTime":32252569103700,"traceId":"7dd29d69","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":38800,"duration_ms":0,"resultData":{"latitude":37.56443006028287,"longitude":127.06417699517345,"precision":7,"centerHash":"wydmeqm","adjacentHashes":["wydmeqm","wydmeqt","wydmeqw","wydmeqq","wydmeqn","wydmeqj","wydmeqh","wydmeqk","wydmeqs"],"errorMessage":null,"success":true}}
2025-11-21 21:04:26.555 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmeqm, wydmeqt, wydmeqw, wydmeqq, wydmeqn, wydmeqj, wydmeqh, wydmeqk, wydmeqs]
2025-11-21 21:04:26.555 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmeqm
2025-11-21 21:04:26.555 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:26.555044300Z","nanoTime":32252569296000,"traceId":"7dd29d69","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":303500,"duration_ms":0,"resultData":{"requestLatitude":37.56443006028287,"requestLongitude":127.06417699517345,"requestRadius":500,"centerGeohashId":"wydmeqm","nineBlockGeohashes":["wydmeqm","wydmeqt","wydmeqw","wydmeqq","wydmeqn","wydmeqj","wydmeqh","wydmeqk","wydmeqs"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 21:04:26.555 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:26.555044300Z","nanoTime":32252569345100,"traceId":"7dd29d69","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 21:04:26.555 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 21:04:26.555 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmeqm
2025-11-21 21:04:26.555 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3683ms)
2025-11-21 21:04:26.556 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 21:04:26.559 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 21:04:26.559 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 4개, 미스: 5개
2025-11-21 21:04:26.559 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 3.3119ms, 역직렬화: 0.1806ms
2025-11-21 21:04:26.559 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 21:04:26.559 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:26.559155100Z","nanoTime":32252573327800,"traceId":"7dd29d69","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3982700,"duration_ms":3,"resultData":{"centerGeohashId":"wydmeqm","nineBlockGeohashes":["wydmeqm","wydmeqt","wydmeqw","wydmeqq","wydmeqn","wydmeqj","wydmeqh","wydmeqk","wydmeqs"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmeqm","hit":false,"valueSize":0,"l1CacheGetDurationNs":368300,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmeqm","cacheKey":"data:wydmeqm:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":146,"l2CacheGetDurationNs":393100},{"geohashId":"wydmeqt","cacheKey":"data:wydmeqt:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":566,"l2CacheGetDurationNs":442500},{"geohashId":"wydmeqw","cacheKey":"data:wydmeqw:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":146,"l2CacheGetDurationNs":363500},{"geohashId":"wydmeqq","cacheKey":"data:wydmeqq:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":427,"l2CacheGetDurationNs":330400},{"geohashId":"wydmeqn","cacheKey":"data:wydmeqn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":278300},{"geohashId":"wydmeqj","cacheKey":"data:wydmeqj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":218200},{"geohashId":"wydmeqh","cacheKey":"data:wydmeqh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":316400},{"geohashId":"wydmeqk","cacheKey":"data:wydmeqk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":417000},{"geohashId":"wydmeqs","cacheKey":"data:wydmeqs:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":258800}],"l2TotalHits":4,"l2TotalMisses":5,"l2CacheTotalDurationNs":3311900,"l2JsonDeserializeTotalDurationNs":180600,"errorMessage":null,"success":true}}
2025-11-21 21:04:26.559 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:26.559155100Z","nanoTime":32252573534100,"traceId":"7dd29d69","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 21:04:26.559 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 21:04:26.559 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 5개
2025-11-21 21:04:26.561 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 4건
2025-11-21 21:04:26.561 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 21:04:26.561 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 7개
2025-11-21 21:04:26.561 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:26.561167200Z","nanoTime":32252578545900,"traceId":"7dd29d69","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5011800,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydmeqn","wydmeqj","wydmeqh","wydmeqk","wydmeqs"],"cctvQueryResult":{"queryGeohashIds":["wydmeqn","wydmeqj","wydmeqh","wydmeqk","wydmeqs"],"totalRowsReturned":4,"rowsPerGrid":{"wydmeqk":1,"wydmeqn":1,"wydmeqh":2},"queryExecutionTimeNs":3717900,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmeqk","cacheKey":"data:wydmeqk:cctv","dataCount":1,"dataSize":145,"errorMessage":null,"success":true},{"geohashId":"wydmeqn","cacheKey":"data:wydmeqn:cctv","dataCount":1,"dataSize":137,"errorMessage":null,"success":true},{"geohashId":"wydmeqh","cacheKey":"data:wydmeqh:cctv","dataCount":2,"dataSize":289,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 21:04:26.561 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:26.561167200Z","nanoTime":32252578681400,"traceId":"7dd29d69","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 21:04:26.561 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 21:04:26.561 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56443006028287, 127.06417699517345)
2025-11-21 21:04:26.561 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 21:04:26.640 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 21:04:26.640 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 21:04:26.640 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 21:04:26.640 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56443006028287, 127.06417699517345), 반경: 500m
2025-11-21 21:04:26.817 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 21:04:26.818 [http-nio-8185-exec-10] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 129건
2025-11-21 21:04:26.818 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 21:04:26.818 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 21:04:26.818 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 동대문구
2025-11-21 21:04:26.820 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 동대문구
2025-11-21 21:04:26.820 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 21:04:26.820 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 21:04:26.820 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 21:04:26.820 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.713272637
2025-11-21 21:04:26.820 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:26.820378100Z","nanoTime":32252834598900,"traceId":"7dd29d69","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":255917500,"duration_ms":255,"resultData":{"latitude":37.56443006028287,"longitude":127.06417699517345,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":255802200,"addressApiResult":{"cached":false,"cacheKey":"address:37.56443006028287:127.06417699517345","roadAddress":"서울특별시 동대문구 장한로3길 34","jibunAddress":"서울 동대문구 장안동 421-1","responseSize":74,"executionTimeNs":75894900,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:동대문구","guName":"동대문구","arrestRate":0.713272637,"dataFound":true,"executionTimeNs":784100,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56443006028287:127.06417699517345:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":1,"CS2":15,"SC4":1,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":4,"FD6":15,"PK6":15,"OL7":1,"PM9":14},"totalPlaces":129,"responseSize":14925,"executionTimeNs":179123200,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:04:26.820 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:26.820378100Z","nanoTime":32252834833400,"traceId":"7dd29d69","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 21:04:26.820 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 21:04:26.820 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 21:04:26.820 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 13개
2025-11-21 21:04:26.820 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 13개 (총 카메라 대수: 36대)
2025-11-21 21:04:26.820 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 21:04:26.912 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 성동구  마장로 205 (거리: 1095m)
2025-11-21 21:04:26.912 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 21:04:26.912 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 21:04:26.913 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 21:04:26.913 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 21:04:26.913 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:26.913544500Z","nanoTime":32252927420800,"traceId":"7dd29d69","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":92587400,"duration_ms":92,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":13,"totalCctvAfterFilter":13,"totalCameraCount":36,"filterRate":1.0,"filterExecutionTimeNs":9800,"success":true},"policeQuery":{"queryDurationNs":92113600,"found":true,"nearestAddress":"서울특별시 성동구  마장로 205","nearestDistance":1095.3195188866794,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"AT4":1,"CS2":15,"SC4":1,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":4,"FD6":15,"PK6":15,"OL7":1,"PM9":14},"placesAfterFilter":{"AT4":1,"CS2":15,"SC4":1,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":4,"FD6":15,"PK6":15,"OL7":1,"PM9":14},"totalBeforeFilter":129,"totalAfterFilter":129,"filterRate":1.0,"filterExecutionTimeNs":109300,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:04:26.913 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:26.913544500Z","nanoTime":32252927576700,"traceId":"7dd29d69","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 21:04:26.913 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 21:04:26.913 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 38.73, 편의성: 37.58, 종합: 38.16
2025-11-21 21:04:26.913 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:26.913544500Z","nanoTime":32252927736600,"traceId":"7dd29d69","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":159900,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":0.0,"policeDistance":1095.3195188866794,"cctvScore":43.333333333333336,"cctvCount":13,"arrestRateScore":71.3272637,"arrestRate":0.713272637,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":38.73151244333334,"success":true},"convenienceScore":{"categoryScores":{"AT4":3.0,"CS2":4.182898637211624,"SC4":2.0,"MT1":20.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":12.0,"FD6":15.0,"PK6":45.0,"OL7":5.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"동대문구","guPopulation":358603,"finalScore":37.584492759800824,"success":true},"overallScore":38.15800260156708,"errorMessage":null,"success":true}}
2025-11-21 21:04:26.913 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:26.913544500Z","nanoTime":32252927830600,"traceId":"7dd29d69","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 21:04:26.913 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 21:04:26.913 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 성동구  마장로 205, latitude=37.564783, longitude=127.051758, geohashId=wydmenk)
2025-11-21 21:04:26.913 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 1095.3195188866794
2025-11-21 21:04:26.914 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmeqm
2025-11-21 21:04:26.914 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 21:04:26.914 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:26.914556400Z","nanoTime":32252928745400,"traceId":"7dd29d69","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":914800,"duration_ms":0,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["카페이(가) 43m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","가장 가까운 파출소가 1km 이상 떨어져 있습니다."],"cacheWrite":{"cacheKey":"dto:wydmeqm","dataSize":17894,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17894,"errorMessage":null,"success":true}}
2025-11-21 21:04:26.914 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 21:04:27.312 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 21:04:27.312 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.566732911692796, longitude=127.07065346227554, radius=500)
2025-11-21 21:04:27.312 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 21:04:27.312 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.566732911692796, longitude=127.07065346227554, radius=500
2025-11-21 21:04:27.312 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:27.312468Z","nanoTime":32253327145100,"traceId":"cdeb4715","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 21:04:27.313 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 21:04:27.313 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.566732911692796, lon=127.07065346227554
2025-11-21 21:04:27.313 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:27.313466200Z","nanoTime":32253327340300,"traceId":"cdeb4715","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 21:04:27.313 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:27.313466200Z","nanoTime":32253327407800,"traceId":"cdeb4715","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":67500,"duration_ms":0,"resultData":{"latitude":37.566732911692796,"longitude":127.07065346227554,"precision":7,"centerHash":"wydmewf","adjacentHashes":["wydmewf","wydmex4","wydmex5","wydmewg","wydmewe","wydmewd","wydmew9","wydmewc","wydmex1"],"errorMessage":null,"success":true}}
2025-11-21 21:04:27.313 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmewf, wydmex4, wydmex5, wydmewg, wydmewe, wydmewd, wydmew9, wydmewc, wydmex1]
2025-11-21 21:04:27.313 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmewf
2025-11-21 21:04:27.313 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:27.313466200Z","nanoTime":32253327521500,"traceId":"cdeb4715","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":376400,"duration_ms":0,"resultData":{"requestLatitude":37.566732911692796,"requestLongitude":127.07065346227554,"requestRadius":500,"centerGeohashId":"wydmewf","nineBlockGeohashes":["wydmewf","wydmex4","wydmex5","wydmewg","wydmewe","wydmewd","wydmew9","wydmewc","wydmex1"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 21:04:27.313 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:27.313466200Z","nanoTime":32253327568100,"traceId":"cdeb4715","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 21:04:27.313 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 21:04:27.313 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmewf
2025-11-21 21:04:27.313 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4958ms)
2025-11-21 21:04:27.313 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 21:04:27.315 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 21:04:27.315 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 2개, 미스: 7개
2025-11-21 21:04:27.315 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.8204ms, 역직렬화: 0.1297ms
2025-11-21 21:04:27.315 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 21:04:27.316 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:27.315466200Z","nanoTime":32253330169100,"traceId":"cdeb4715","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2601000,"duration_ms":2,"resultData":{"centerGeohashId":"wydmewf","nineBlockGeohashes":["wydmewf","wydmex4","wydmex5","wydmewg","wydmewe","wydmewd","wydmew9","wydmewc","wydmex1"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmewf","hit":false,"valueSize":0,"l1CacheGetDurationNs":495800,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmewf","cacheKey":"data:wydmewf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":137800},{"geohashId":"wydmex4","cacheKey":"data:wydmex4:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":425,"l2CacheGetDurationNs":354500},{"geohashId":"wydmex5","cacheKey":"data:wydmex5:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":89700},{"geohashId":"wydmewg","cacheKey":"data:wydmewg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":117300},{"geohashId":"wydmewe","cacheKey":"data:wydmewe:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":162300},{"geohashId":"wydmewd","cacheKey":"data:wydmewd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":210100},{"geohashId":"wydmew9","cacheKey":"data:wydmew9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":222700},{"geohashId":"wydmewc","cacheKey":"data:wydmewc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":115300},{"geohashId":"wydmex1","cacheKey":"data:wydmex1:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":137,"l2CacheGetDurationNs":200100}],"l2TotalHits":2,"l2TotalMisses":7,"l2CacheTotalDurationNs":1820400,"l2JsonDeserializeTotalDurationNs":129700,"errorMessage":null,"success":true}}
2025-11-21 21:04:27.316 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:27.316466Z","nanoTime":32253330393500,"traceId":"cdeb4715","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 21:04:27.316 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 21:04:27.316 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 7개
2025-11-21 21:04:27.320 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 8건
2025-11-21 21:04:27.321 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 21:04:27.321 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 7개
2025-11-21 21:04:27.322 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:27.321681800Z","nanoTime":32253336508200,"traceId":"cdeb4715","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":6114700,"duration_ms":6,"resultData":{"inputCctvMissGrids":["wydmewf","wydmex5","wydmewg","wydmewe","wydmewd","wydmew9","wydmewc"],"cctvQueryResult":{"queryGeohashIds":["wydmewf","wydmex5","wydmewg","wydmewe","wydmewd","wydmew9","wydmewc"],"totalRowsReturned":8,"rowsPerGrid":{"wydmewc":1,"wydmewd":2,"wydmex5":3,"wydmew9":1,"wydmewf":1},"queryExecutionTimeNs":4046700,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmewc","cacheKey":"data:wydmewc:cctv","dataCount":1,"dataSize":142,"errorMessage":null,"success":true},{"geohashId":"wydmewd","cacheKey":"data:wydmewd:cctv","dataCount":2,"dataSize":288,"errorMessage":null,"success":true},{"geohashId":"wydmex5","cacheKey":"data:wydmex5:cctv","dataCount":3,"dataSize":430,"errorMessage":null,"success":true},{"geohashId":"wydmew9","cacheKey":"data:wydmew9:cctv","dataCount":1,"dataSize":145,"errorMessage":null,"success":true},{"geohashId":"wydmewf","cacheKey":"data:wydmewf:cctv","dataCount":1,"dataSize":145,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 21:04:27.322 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:27.322835100Z","nanoTime":32253336692800,"traceId":"cdeb4715","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 21:04:27.322 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 21:04:27.322 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.566732911692796, 127.07065346227554)
2025-11-21 21:04:27.322 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 21:04:27.385 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 21:04:27.385 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 21:04:27.385 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 21:04:27.385 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.566732911692796, 127.07065346227554), 반경: 500m
2025-11-21 21:04:27.477 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 21:04:27.477 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 114건
2025-11-21 21:04:27.478 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 21:04:27.484 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 21:04:27.484 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 동대문구
2025-11-21 21:04:27.486 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 동대문구
2025-11-21 21:04:27.487 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 21:04:27.487 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 21:04:27.487 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 21:04:27.487 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.713272637
2025-11-21 21:04:27.487 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:27.487519300Z","nanoTime":32253501420300,"traceId":"cdeb4715","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":164727500,"duration_ms":164,"resultData":{"latitude":37.566732911692796,"longitude":127.07065346227554,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":164584400,"addressApiResult":{"cached":false,"cacheKey":"address:37.566732911692796:127.07065346227554","roadAddress":"서울특별시 동대문구 답십리로72길 158","jibunAddress":"서울 동대문구 장안동 352","responseSize":75,"executionTimeNs":62903300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:동대문구","guName":"동대문구","arrestRate":0.713272637,"dataFound":true,"executionTimeNs":999400,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.566732911692796:127.07065346227554:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":3,"CS2":15,"SC4":2,"MT1":1,"BK9":8,"HP8":12,"AC5":15,"CE7":15,"SW8":0,"PO3":5,"FD6":15,"PK6":15,"OL7":0,"PM9":8},"totalPlaces":114,"responseSize":13277,"executionTimeNs":100681700,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:04:27.487 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:27.487519300Z","nanoTime":32253501729200,"traceId":"cdeb4715","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 21:04:27.487 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 21:04:27.487 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 21:04:27.487 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 12개
2025-11-21 21:04:27.487 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 12개 (총 카메라 대수: 28대)
2025-11-21 21:04:27.487 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 21:04:27.567 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구 여의대방로 130 (거리: 867m)
2025-11-21 21:04:27.567 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 21:04:27.567 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 21:04:27.567 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 12개 카테고리
2025-11-21 21:04:27.567 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 21:04:27.567 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:27.567505200Z","nanoTime":32253582844600,"traceId":"cdeb4715","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":81115400,"duration_ms":81,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":12,"totalCctvAfterFilter":12,"totalCameraCount":28,"filterRate":1.0,"filterExecutionTimeNs":9000,"success":true},"policeQuery":{"queryDurationNs":80640400,"found":true,"nearestAddress":"서울특별시 동작구 여의대방로 130","nearestDistance":866.8863900784396,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"AT4":3,"BK9":8,"HP8":12,"CS2":15,"AC5":15,"CE7":15,"SC4":2,"PO3":5,"FD6":15,"PK6":15,"MT1":1,"PM9":8},"placesAfterFilter":{"AT4":3,"BK9":8,"HP8":11,"CS2":15,"AC5":15,"CE7":15,"SC4":2,"PO3":5,"FD6":15,"PK6":15,"MT1":1,"PM9":8},"totalBeforeFilter":114,"totalAfterFilter":113,"filterRate":0.9912280701754386,"filterExecutionTimeNs":90100,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:04:27.567 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:27.567505200Z","nanoTime":32253583100900,"traceId":"cdeb4715","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 21:04:27.567 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 21:04:27.569 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 37.40, 편의성: 29.27, 종합: 33.33
2025-11-21 21:04:27.569 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:27.569520400Z","nanoTime":32253583347800,"traceId":"cdeb4715","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":246900,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":0.0,"policeDistance":866.8863900784396,"cctvScore":40.0,"cctvCount":12,"arrestRateScore":71.3272637,"arrestRate":0.713272637,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":37.39817911,"success":true},"convenienceScore":{"categoryScores":{"AT4":9.0,"BK9":40.0,"HP8":100.0,"CS2":4.182898637211624,"AC5":15.0,"CE7":30.0,"SC4":4.0,"PO3":15.0,"FD6":15.0,"PK6":45.0,"MT1":10.0,"PM9":64.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"동대문구","guPopulation":358603,"finalScore":29.265241553100967,"success":true},"overallScore":33.33171033155048,"errorMessage":null,"success":true}}
2025-11-21 21:04:27.569 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:27.569520400Z","nanoTime":32253583480200,"traceId":"cdeb4715","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 21:04:27.569 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 21:04:27.569 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구 여의대방로 130, latitude=37.568809, longitude=127.080134, geohashId=wydmez0)
2025-11-21 21:04:27.569 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 866.8863900784396
2025-11-21 21:04:27.571 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmewf
2025-11-21 21:04:27.571 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 21:04:27.571 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:27.571056800Z","nanoTime":32253585442700,"traceId":"cdeb4715","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1962500,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["학교이(가) 14m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다."],"cacheWrite":{"cacheKey":"dto:wydmewf","dataSize":15883,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":15883,"errorMessage":null,"success":true}}
2025-11-21 21:04:27.571 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 21:04:27.917 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 21:04:27.917 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.5633383381463, longitude=127.08126703458657, radius=500)
2025-11-21 21:04:27.917 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 21:04:27.917 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.5633383381463, longitude=127.08126703458657, radius=500
2025-11-21 21:04:27.917 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:27.917290400Z","nanoTime":32253931831200,"traceId":"5770747c","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 21:04:27.917 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 21:04:27.917 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.5633383381463, lon=127.08126703458657
2025-11-21 21:04:27.917 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:27.917290400Z","nanoTime":32253931930800,"traceId":"5770747c","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 21:04:27.918 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:27.917290400Z","nanoTime":32253931981200,"traceId":"5770747c","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":50400,"duration_ms":0,"resultData":{"latitude":37.5633383381463,"longitude":127.08126703458657,"precision":7,"centerHash":"wydmey1","adjacentHashes":["wydmey1","wydmey3","wydmey6","wydmey4","wydmevf","wydmevc","wydmevb","wydmey0","wydmey2"],"errorMessage":null,"success":true}}
2025-11-21 21:04:27.918 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmey1, wydmey3, wydmey6, wydmey4, wydmevf, wydmevc, wydmevb, wydmey0, wydmey2]
2025-11-21 21:04:27.918 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmey1
2025-11-21 21:04:27.918 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:27.918264800Z","nanoTime":32253932089500,"traceId":"5770747c","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":258300,"duration_ms":0,"resultData":{"requestLatitude":37.5633383381463,"requestLongitude":127.08126703458657,"requestRadius":500,"centerGeohashId":"wydmey1","nineBlockGeohashes":["wydmey1","wydmey3","wydmey6","wydmey4","wydmevf","wydmevc","wydmevb","wydmey0","wydmey2"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 21:04:27.918 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:27.918264800Z","nanoTime":32253932144100,"traceId":"5770747c","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 21:04:27.918 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 21:04:27.918 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmey1
2025-11-21 21:04:27.918 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.338ms)
2025-11-21 21:04:27.918 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 21:04:27.920 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 21:04:27.920 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 8개, 미스: 1개
2025-11-21 21:04:27.920 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.3166ms, 역직렬화: 0.2337ms
2025-11-21 21:04:27.920 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 21:04:27.921 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:27.920400200Z","nanoTime":32253935120300,"traceId":"5770747c","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2976200,"duration_ms":2,"resultData":{"centerGeohashId":"wydmey1","nineBlockGeohashes":["wydmey1","wydmey3","wydmey6","wydmey4","wydmevf","wydmevc","wydmevb","wydmey0","wydmey2"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmey1","hit":false,"valueSize":0,"l1CacheGetDurationNs":338000,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmey1","cacheKey":"data:wydmey1:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":401,"l2CacheGetDurationNs":309600},{"geohashId":"wydmey3","cacheKey":"data:wydmey3:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":200,"l2CacheGetDurationNs":186200},{"geohashId":"wydmey6","cacheKey":"data:wydmey6:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":300,"l2CacheGetDurationNs":187300},{"geohashId":"wydmey4","cacheKey":"data:wydmey4:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":201,"l2CacheGetDurationNs":222800},{"geohashId":"wydmevf","cacheKey":"data:wydmevf:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":101,"l2CacheGetDurationNs":199500},{"geohashId":"wydmevc","cacheKey":"data:wydmevc:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":101,"l2CacheGetDurationNs":274700},{"geohashId":"wydmevb","cacheKey":"data:wydmevb:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":500,"l2CacheGetDurationNs":227100},{"geohashId":"wydmey0","cacheKey":"data:wydmey0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":93400},{"geohashId":"wydmey2","cacheKey":"data:wydmey2:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":301,"l2CacheGetDurationNs":285000}],"l2TotalHits":8,"l2TotalMisses":1,"l2CacheTotalDurationNs":2316600,"l2JsonDeserializeTotalDurationNs":233700,"errorMessage":null,"success":true}}
2025-11-21 21:04:27.921 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:27.921411Z","nanoTime":32253935363400,"traceId":"5770747c","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 21:04:27.921 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 21:04:27.921 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 1개
2025-11-21 21:04:27.925 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 0건
2025-11-21 21:04:27.925 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 21:04:27.925 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 21:04:27.925 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:27.925403Z","nanoTime":32253939924900,"traceId":"5770747c","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4561500,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmey0"],"cctvQueryResult":{"queryGeohashIds":["wydmey0"],"totalRowsReturned":0,"rowsPerGrid":{},"queryExecutionTimeNs":4208700,"errorMessage":null,"success":true},"cctvCacheWrites":[],"errorMessage":null,"success":true}}
2025-11-21 21:04:27.925 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:27.925403Z","nanoTime":32253940033900,"traceId":"5770747c","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 21:04:27.925 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 21:04:27.925 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.5633383381463, 127.08126703458657)
2025-11-21 21:04:27.926 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 21:04:28.006 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 21:04:28.006 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 21:04:28.006 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 21:04:28.006 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.5633383381463, 127.08126703458657), 반경: 500m
2025-11-21 21:04:28.083 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 21:04:28.083 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 126건
2025-11-21 21:04:28.089 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 21:04:28.089 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 21:04:28.089 [http-nio-8185-exec-3] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 21:04:28.089 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 21:04:28.089 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 21:04:28.089 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 21:04:28.089 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 21:04:28.089 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:28.089750500Z","nanoTime":32254103606300,"traceId":"5770747c","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":163572400,"duration_ms":163,"resultData":{"latitude":37.5633383381463,"longitude":127.08126703458657,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":163455000,"addressApiResult":{"cached":false,"cacheKey":"address:37.5633383381463:127.08126703458657","roadAddress":"주소 없음","jibunAddress":"서울 광진구 중곡동 265-5","responseSize":59,"executionTimeNs":81642900,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":30400,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.5633383381463:127.08126703458657:500","categoryCount":15,"placesByCategory":{"CT1":3,"AT4":1,"CS2":15,"SC4":2,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":4,"FD6":15,"PK6":8,"OL7":2,"PM9":14},"totalPlaces":126,"responseSize":14516,"executionTimeNs":81781700,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:04:28.089 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:28.089750500Z","nanoTime":32254103855500,"traceId":"5770747c","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 21:04:28.089 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 21:04:28.089 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 21:04:28.089 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 21개
2025-11-21 21:04:28.089 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 21개 (총 카메라 대수: 21대)
2025-11-21 21:04:28.089 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 21:04:28.170 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구 노량진로 248 (거리: 141m)
2025-11-21 21:04:28.170 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 21:04:28.170 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 21:04:28.170 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 21:04:28.170 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 21:04:28.170 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:28.170998400Z","nanoTime":32254185654300,"traceId":"5770747c","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":81798800,"duration_ms":81,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":21,"totalCctvAfterFilter":21,"totalCameraCount":21,"filterRate":1.0,"filterExecutionTimeNs":9500,"success":true},"policeQuery":{"queryDurationNs":81178600,"found":true,"nearestAddress":"서울특별시 동작구 노량진로 248","nearestDistance":140.5680583096205,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":3,"AT4":1,"CS2":15,"SC4":2,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":4,"FD6":15,"PK6":8,"OL7":2,"PM9":14},"placesAfterFilter":{"CT1":3,"AT4":1,"CS2":15,"SC4":2,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":4,"FD6":15,"PK6":8,"OL7":2,"PM9":14},"totalBeforeFilter":126,"totalAfterFilter":126,"filterRate":1.0,"filterExecutionTimeNs":128400,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:04:28.170 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:28.170998400Z","nanoTime":32254186059200,"traceId":"5770747c","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 21:04:28.170 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 21:04:28.170 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 52.73, 편의성: 34.25, 종합: 43.49
2025-11-21 21:04:28.170 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:28.170998400Z","nanoTime":32254186502500,"traceId":"5770747c","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":443300,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":82.42899271129744,"policeDistance":140.5680583096205,"cctvScore":70.0,"cctvCount":21,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":52.72869781338923,"success":true},"convenienceScore":{"categoryScores":{"CT1":12.0,"AT4":3.0,"CS2":3.75,"SC4":4.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":12.0,"FD6":15.0,"PK6":24.0,"OL7":10.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":34.25,"success":true},"overallScore":43.489348906694616,"errorMessage":null,"success":true}}
2025-11-21 21:04:28.170 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:28.170998400Z","nanoTime":32254186741500,"traceId":"5770747c","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 21:04:28.173 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 21:04:28.173 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구 노량진로 248, latitude=37.563716, longitude=127.082789, geohashId=wydmey6)
2025-11-21 21:04:28.173 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 140.5680583096205
2025-11-21 21:04:28.174 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmey1
2025-11-21 21:04:28.174 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 21:04:28.174 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:28.174017900Z","nanoTime":32254189072400,"traceId":"5770747c","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":2330900,"duration_ms":2,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["병원이(가) 48m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmey1","dataSize":17018,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17018,"errorMessage":null,"success":true}}
2025-11-21 21:04:28.174 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 21:04:28.812 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 21:04:28.812 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56180264801464, longitude=127.08687924032208, radius=500)
2025-11-21 21:04:28.812 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 21:04:28.812 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56180264801464, longitude=127.08687924032208, radius=500
2025-11-21 21:04:28.812 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:28.812319800Z","nanoTime":32254826598400,"traceId":"c5c0f29a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 21:04:28.812 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 21:04:28.812 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56180264801464, lon=127.08687924032208
2025-11-21 21:04:28.812 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:28.812319800Z","nanoTime":32254826690300,"traceId":"c5c0f29a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 21:04:28.812 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:28.812319800Z","nanoTime":32254826732400,"traceId":"c5c0f29a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":42100,"duration_ms":0,"resultData":{"latitude":37.56180264801464,"longitude":127.08687924032208,"precision":7,"centerHash":"wydmevv","adjacentHashes":["wydmevv","wydmeyj","wydmeyn","wydmevy","wydmevw","wydmevt","wydmevs","wydmevu","wydmeyh"],"errorMessage":null,"success":true}}
2025-11-21 21:04:28.812 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmevv, wydmeyj, wydmeyn, wydmevy, wydmevw, wydmevt, wydmevs, wydmevu, wydmeyh]
2025-11-21 21:04:28.812 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmevv
2025-11-21 21:04:28.812 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:28.812319800Z","nanoTime":32254826848400,"traceId":"c5c0f29a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":250000,"duration_ms":0,"resultData":{"requestLatitude":37.56180264801464,"requestLongitude":127.08687924032208,"requestRadius":500,"centerGeohashId":"wydmevv","nineBlockGeohashes":["wydmevv","wydmeyj","wydmeyn","wydmevy","wydmevw","wydmevt","wydmevs","wydmevu","wydmeyh"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 21:04:28.812 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:28.812319800Z","nanoTime":32254827032800,"traceId":"c5c0f29a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 21:04:28.813 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 21:04:28.813 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmevv
2025-11-21 21:04:28.813 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3776ms)
2025-11-21 21:04:28.813 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 21:04:28.816 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 21:04:28.816 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 8개, 미스: 1개
2025-11-21 21:04:28.816 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.9139ms, 역직렬화: 0.1994ms
2025-11-21 21:04:28.816 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 21:04:28.816 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:28.816128700Z","nanoTime":32254830695600,"traceId":"c5c0f29a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3662800,"duration_ms":3,"resultData":{"centerGeohashId":"wydmevv","nineBlockGeohashes":["wydmevv","wydmeyj","wydmeyn","wydmevy","wydmevw","wydmevt","wydmevs","wydmevu","wydmeyh"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmevv","hit":false,"valueSize":0,"l1CacheGetDurationNs":377600,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmevv","cacheKey":"data:wydmevv:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":398,"l2CacheGetDurationNs":324500},{"geohashId":"wydmeyj","cacheKey":"data:wydmeyj:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":200,"l2CacheGetDurationNs":303900},{"geohashId":"wydmeyn","cacheKey":"data:wydmeyn:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":201,"l2CacheGetDurationNs":298200},{"geohashId":"wydmevy","cacheKey":"data:wydmevy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":108100},{"geohashId":"wydmevw","cacheKey":"data:wydmevw:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":101,"l2CacheGetDurationNs":232400},{"geohashId":"wydmevt","cacheKey":"data:wydmevt:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":101,"l2CacheGetDurationNs":354100},{"geohashId":"wydmevs","cacheKey":"data:wydmevs:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":200,"l2CacheGetDurationNs":288800},{"geohashId":"wydmevu","cacheKey":"data:wydmevu:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":200,"l2CacheGetDurationNs":368100},{"geohashId":"wydmeyh","cacheKey":"data:wydmeyh:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":197,"l2CacheGetDurationNs":335000}],"l2TotalHits":8,"l2TotalMisses":1,"l2CacheTotalDurationNs":2913900,"l2JsonDeserializeTotalDurationNs":199400,"errorMessage":null,"success":true}}
2025-11-21 21:04:28.816 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:28.816128700Z","nanoTime":32254830942900,"traceId":"c5c0f29a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 21:04:28.816 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 21:04:28.816 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 1개
2025-11-21 21:04:28.820 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 0건
2025-11-21 21:04:28.820 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 21:04:28.820 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 21:04:28.820 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:28.820305700Z","nanoTime":32254834738800,"traceId":"c5c0f29a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":3795900,"duration_ms":3,"resultData":{"inputCctvMissGrids":["wydmevy"],"cctvQueryResult":{"queryGeohashIds":["wydmevy"],"totalRowsReturned":0,"rowsPerGrid":{},"queryExecutionTimeNs":3477800,"errorMessage":null,"success":true},"cctvCacheWrites":[],"errorMessage":null,"success":true}}
2025-11-21 21:04:28.820 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:28.820305700Z","nanoTime":32254834859700,"traceId":"c5c0f29a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 21:04:28.820 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 21:04:28.820 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56180264801464, 127.08687924032208)
2025-11-21 21:04:28.821 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 21:04:28.885 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 21:04:28.885 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 21:04:28.885 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 21:04:28.885 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56180264801464, 127.08687924032208), 반경: 500m
2025-11-21 21:04:28.970 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 21:04:28.970 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 119건
2025-11-21 21:04:28.972 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 21:04:28.972 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 21:04:28.972 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 광진구
2025-11-21 21:04:28.972 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 광진구
2025-11-21 21:04:28.972 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 21:04:28.972 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 21:04:28.972 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 21:04:28.972 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.672940923
2025-11-21 21:04:28.974 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:28.972615100Z","nanoTime":32254988198100,"traceId":"c5c0f29a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":153338400,"duration_ms":153,"resultData":{"latitude":37.56180264801464,"longitude":127.08687924032208,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":153116600,"addressApiResult":{"cached":false,"cacheKey":"address:37.56180264801464:127.08687924032208","roadAddress":"서울특별시 광진구 긴고랑로31길 44","jibunAddress":"서울 광진구 중곡동 150-110","responseSize":76,"executionTimeNs":65365900,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:광진구","guName":"광진구","arrestRate":0.672940923,"dataFound":true,"executionTimeNs":775900,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56180264801464:127.08687924032208:500","categoryCount":15,"placesByCategory":{"CT1":3,"AT4":1,"CS2":15,"SC4":5,"MT1":0,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":0,"PO3":3,"FD6":15,"PK6":10,"OL7":2,"PM9":6},"totalPlaces":119,"responseSize":13752,"executionTimeNs":86974800,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:04:28.974 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:28.974641700Z","nanoTime":32254988529400,"traceId":"c5c0f29a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 21:04:28.974 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 21:04:28.974 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 21:04:28.974 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 16개
2025-11-21 21:04:28.974 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 16개 (총 카메라 대수: 16대)
2025-11-21 21:04:28.974 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 21:04:29.050 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 광진구 아차산로 567 (거리: 396m)
2025-11-21 21:04:29.050 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 21:04:29.050 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 21:04:29.050 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 21:04:29.050 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 21:04:29.050 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:29.050290600Z","nanoTime":32255064697400,"traceId":"c5c0f29a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":76168000,"duration_ms":76,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":16,"totalCctvAfterFilter":16,"totalCameraCount":16,"filterRate":1.0,"filterExecutionTimeNs":8400,"success":true},"policeQuery":{"queryDurationNs":75768400,"found":true,"nearestAddress":"서울특별시 광진구 아차산로 567","nearestDistance":396.3458892551899,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":3,"AT4":1,"CS2":15,"SC4":5,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"PO3":3,"FD6":15,"PK6":10,"OL7":2,"PM9":6},"placesAfterFilter":{"CT1":3,"AT4":1,"CS2":15,"SC4":5,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"PO3":3,"FD6":15,"PK6":10,"OL7":2,"PM9":6},"totalBeforeFilter":119,"totalAfterFilter":119,"filterRate":1.0,"filterExecutionTimeNs":85600,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:04:29.050 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:29.050290600Z","nanoTime":32255064963700,"traceId":"c5c0f29a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 21:04:29.050 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 21:04:29.051 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 56.66, 편의성: 27.41, 종합: 42.03
2025-11-21 21:04:29.051 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:29.051303400Z","nanoTime":32255065156700,"traceId":"c5c0f29a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":193000,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":50.45676384310126,"policeDistance":396.3458892551899,"cctvScore":53.333333333333336,"cctvCount":16,"arrestRateScore":67.2940923,"arrestRate":0.672940923,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":56.658590176263715,"success":true},"convenienceScore":{"categoryScores":{"CT1":12.0,"AT4":3.0,"CS2":4.339624824968466,"SC4":10.0,"BK9":70.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"PO3":9.0,"FD6":15.0,"PK6":30.0,"OL7":10.0,"PM9":48.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"광진구","guPopulation":345652,"finalScore":27.410740371151423,"success":true},"overallScore":42.03466527370757,"errorMessage":null,"success":true}}
2025-11-21 21:04:29.051 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:29.051303400Z","nanoTime":32255065301500,"traceId":"c5c0f29a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 21:04:29.051 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 21:04:29.051 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 광진구 아차산로 567, latitude=37.565354, longitude=127.087264, geohashId=wydmeyw)
2025-11-21 21:04:29.051 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 396.3458892551899
2025-11-21 21:04:29.051 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmevv
2025-11-21 21:04:29.051 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 21:04:29.051 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:04:29.051758900Z","nanoTime":32255066631200,"traceId":"c5c0f29a","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1329700,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["학원이(가) 16m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmevv","dataSize":15847,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":15847,"errorMessage":null,"success":true}}
2025-11-21 21:04:29.051 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 21:22:22.210 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 21:22:22.210 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56607755060557, longitude=127.08099835568373, radius=500)
2025-11-21 21:22:22.210 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 21:22:22.210 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56607755060557, longitude=127.08099835568373, radius=500
2025-11-21 21:22:22.210 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:22.210391100Z","nanoTime":33328224958500,"traceId":"bddc3c93","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 21:22:22.210 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 21:22:22.210 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56607755060557, lon=127.08099835568373
2025-11-21 21:22:22.210 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:22.210391100Z","nanoTime":33328225076900,"traceId":"bddc3c93","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 21:22:22.211 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:22.210391100Z","nanoTime":33328225123500,"traceId":"bddc3c93","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":46600,"duration_ms":0,"resultData":{"latitude":37.56607755060557,"longitude":127.08099835568373,"precision":7,"centerHash":"wydmey9","adjacentHashes":["wydmey9","wydmeyc","wydmeyf","wydmeyd","wydmey6","wydmey3","wydmey2","wydmey8","wydmeyb"],"errorMessage":null,"success":true}}
2025-11-21 21:22:22.211 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmey9, wydmeyc, wydmeyf, wydmeyd, wydmey6, wydmey3, wydmey2, wydmey8, wydmeyb]
2025-11-21 21:22:22.211 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmey9
2025-11-21 21:22:22.211 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:22.211399700Z","nanoTime":33328225328599,"traceId":"bddc3c93","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":370099,"duration_ms":0,"resultData":{"requestLatitude":37.56607755060557,"requestLongitude":127.08099835568373,"requestRadius":500,"centerGeohashId":"wydmey9","nineBlockGeohashes":["wydmey9","wydmeyc","wydmeyf","wydmeyd","wydmey6","wydmey3","wydmey2","wydmey8","wydmeyb"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 21:22:22.211 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:22.211399700Z","nanoTime":33328225390500,"traceId":"bddc3c93","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 21:22:22.211 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 21:22:22.211 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmey9
2025-11-21 21:22:22.211 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.658901ms)
2025-11-21 21:22:22.211 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 21:22:22.215 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 21:22:22.216 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 7개, 미스: 2개
2025-11-21 21:22:22.216 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 3.686801ms, 역직렬화: 0.315098ms
2025-11-21 21:22:22.216 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 21:22:22.216 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:22.216342500Z","nanoTime":33328230226200,"traceId":"bddc3c93","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":4835700,"duration_ms":4,"resultData":{"centerGeohashId":"wydmey9","nineBlockGeohashes":["wydmey9","wydmeyc","wydmeyf","wydmeyd","wydmey6","wydmey3","wydmey2","wydmey8","wydmeyb"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmey9","hit":false,"valueSize":0,"l1CacheGetDurationNs":658901,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmey9","cacheKey":"data:wydmey9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":265201},{"geohashId":"wydmeyc","cacheKey":"data:wydmeyc:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":301,"l2CacheGetDurationNs":474800},{"geohashId":"wydmeyf","cacheKey":"data:wydmeyf:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":301,"l2CacheGetDurationNs":269201},{"geohashId":"wydmeyd","cacheKey":"data:wydmeyd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":139399},{"geohashId":"wydmey6","cacheKey":"data:wydmey6:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":300,"l2CacheGetDurationNs":506700},{"geohashId":"wydmey3","cacheKey":"data:wydmey3:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":200,"l2CacheGetDurationNs":466400},{"geohashId":"wydmey2","cacheKey":"data:wydmey2:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":301,"l2CacheGetDurationNs":367799},{"geohashId":"wydmey8","cacheKey":"data:wydmey8:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":400,"l2CacheGetDurationNs":486699},{"geohashId":"wydmeyb","cacheKey":"data:wydmeyb:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":301,"l2CacheGetDurationNs":257900}],"l2TotalHits":7,"l2TotalMisses":2,"l2CacheTotalDurationNs":3686801,"l2JsonDeserializeTotalDurationNs":315098,"errorMessage":null,"success":true}}
2025-11-21 21:22:22.216 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:22.216342500Z","nanoTime":33328230406100,"traceId":"bddc3c93","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 21:22:22.216 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 21:22:22.216 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 2개
2025-11-21 21:22:22.220 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 7건
2025-11-21 21:22:22.220 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 21:22:22.221 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 21:22:22.221 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:22.221986200Z","nanoTime":33328235840399,"traceId":"bddc3c93","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5434299,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydmey9","wydmeyd"],"cctvQueryResult":{"queryGeohashIds":["wydmey9","wydmeyd"],"totalRowsReturned":7,"rowsPerGrid":{"wydmeyd":4,"wydmey9":3},"queryExecutionTimeNs":3868099,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmeyd","cacheKey":"data:wydmeyd:cctv","dataCount":4,"dataSize":400,"errorMessage":null,"success":true},{"geohashId":"wydmey9","cacheKey":"data:wydmey9:cctv","dataCount":3,"dataSize":299,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 21:22:22.221 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:22.221986200Z","nanoTime":33328236068400,"traceId":"bddc3c93","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 21:22:22.221 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 21:22:22.221 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56607755060557, 127.08099835568373)
2025-11-21 21:22:22.221 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 21:22:22.408 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 21:22:22.408 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 21:22:22.408 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 21:22:22.408 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56607755060557, 127.08099835568373), 반경: 500m
2025-11-21 21:22:22.692 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 21:22:22.692 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 127건
2025-11-21 21:22:22.692 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 21:22:22.692 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 21:22:22.692 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 광진구
2025-11-21 21:22:22.692 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 광진구
2025-11-21 21:22:22.692 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 21:22:22.692 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 21:22:22.692 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 21:22:22.692 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.672940923
2025-11-21 21:22:22.692 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:22.692528300Z","nanoTime":33328720446800,"traceId":"bddc3c93","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":484378400,"duration_ms":484,"resultData":{"latitude":37.56607755060557,"longitude":127.08099835568373,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":484164300,"addressApiResult":{"cached":false,"cacheKey":"address:37.56607755060557:127.08099835568373","roadAddress":"서울특별시 광진구 긴고랑로7길 66-6","jibunAddress":"서울 광진구 중곡동 192-55","responseSize":76,"executionTimeNs":187234100,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:광진구","guName":"광진구","arrestRate":0.672940923,"dataFound":true,"executionTimeNs":1428600,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56607755060557:127.08099835568373:500","categoryCount":15,"placesByCategory":{"CT1":2,"AT4":0,"CS2":15,"SC4":2,"MT1":1,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":10,"OL7":4,"PM9":15},"totalPlaces":127,"responseSize":14675,"executionTimeNs":295501600,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:22:22.692 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:22.692528300Z","nanoTime":33328720908400,"traceId":"bddc3c93","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 21:22:22.692 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 21:22:22.692 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 21:22:22.692 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 28개
2025-11-21 21:22:22.692 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 28개 (총 카메라 대수: 28대)
2025-11-21 21:22:22.692 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 21:22:22.768 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구 노량진로 248 (거리: 306m)
2025-11-21 21:22:22.768 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 21:22:22.768 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 21:22:22.768 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 21:22:22.768 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 21:22:22.768 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:22.768439500Z","nanoTime":33328782884300,"traceId":"bddc3c93","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":61975900,"duration_ms":61,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":28,"totalCctvAfterFilter":28,"totalCameraCount":28,"filterRate":1.0,"filterExecutionTimeNs":28300,"success":true},"policeQuery":{"queryDurationNs":61447000,"found":true,"nearestAddress":"서울특별시 동작구 노량진로 248","nearestDistance":306.3729039663095,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":2,"CS2":15,"SC4":2,"MT1":1,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":10,"OL7":4,"PM9":15},"placesAfterFilter":{"CT1":2,"CS2":15,"SC4":2,"MT1":1,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":10,"OL7":4,"PM9":15},"totalBeforeFilter":127,"totalAfterFilter":127,"filterRate":1.0,"filterExecutionTimeNs":69600,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:22:22.768 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:22.768439500Z","nanoTime":33328783068200,"traceId":"bddc3c93","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 21:22:22.768 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 21:22:22.768 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 76.03, 편의성: 36.81, 종합: 56.42
2025-11-21 21:22:22.769 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:22.769451200Z","nanoTime":33328783215600,"traceId":"bddc3c93","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":147400,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":61.70338700421132,"policeDistance":306.3729039663095,"cctvScore":93.33333333333333,"cctvCount":28,"arrestRateScore":67.2940923,"arrestRate":0.672940923,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":76.03257712459674,"success":true},"convenienceScore":{"categoryScores":{"CT1":8.0,"CS2":4.339624824968466,"SC4":4.0,"MT1":10.0,"BK9":70.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":30.0,"OL7":20.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"광진구","guPopulation":345652,"finalScore":36.809973201783464,"success":true},"overallScore":56.4212751631901,"errorMessage":null,"success":true}}
2025-11-21 21:22:22.769 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:22.769451200Z","nanoTime":33328783309200,"traceId":"bddc3c93","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 21:22:22.769 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 21:22:22.769 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구 노량진로 248, latitude=37.563716, longitude=127.082789, geohashId=wydmey6)
2025-11-21 21:22:22.769 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 306.3729039663095
2025-11-21 21:22:22.770 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmey9
2025-11-21 21:22:22.770 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 21:22:22.770 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:22.770386700Z","nanoTime":33328784397400,"traceId":"bddc3c93","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1088200,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["약국이(가) 28m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmey9","dataSize":17535,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17535,"errorMessage":null,"success":true}}
2025-11-21 21:22:22.770 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 21:22:23.146 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 21:22:23.146 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.57004678921483, longitude=127.07357703439783, radius=500)
2025-11-21 21:22:23.146 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 21:22:23.146 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.57004678921483, longitude=127.07357703439783, radius=500
2025-11-21 21:22:23.146 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:23.146667800Z","nanoTime":33329161139099,"traceId":"3c942f49","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 21:22:23.146 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 21:22:23.146 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.57004678921483, lon=127.07357703439783
2025-11-21 21:22:23.146 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:23.146667800Z","nanoTime":33329161246199,"traceId":"3c942f49","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 21:22:23.146 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:23.146667800Z","nanoTime":33329161291800,"traceId":"3c942f49","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":45601,"duration_ms":0,"resultData":{"latitude":37.57004678921483,"longitude":127.07357703439783,"precision":7,"centerHash":"wydmexk","adjacentHashes":["wydmexk","wydmexs","wydmext","wydmexm","wydmexj","wydmexh","wydmex5","wydmex7","wydmexe"],"errorMessage":null,"success":true}}
2025-11-21 21:22:23.146 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmexk, wydmexs, wydmext, wydmexm, wydmexj, wydmexh, wydmex5, wydmex7, wydmexe]
2025-11-21 21:22:23.147 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmexk
2025-11-21 21:22:23.147 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:23.147664600Z","nanoTime":33329161452100,"traceId":"3c942f49","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":313001,"duration_ms":0,"resultData":{"requestLatitude":37.57004678921483,"requestLongitude":127.07357703439783,"requestRadius":500,"centerGeohashId":"wydmexk","nineBlockGeohashes":["wydmexk","wydmexs","wydmext","wydmexm","wydmexj","wydmexh","wydmex5","wydmex7","wydmexe"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 21:22:23.147 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:23.147664600Z","nanoTime":33329161527300,"traceId":"3c942f49","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 21:22:23.147 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 21:22:23.147 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmexk
2025-11-21 21:22:23.147 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.346101ms)
2025-11-21 21:22:23.147 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 21:22:23.149 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 21:22:23.149 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 1개, 미스: 8개
2025-11-21 21:22:23.149 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.8817ms, 역직렬화: 0.067899ms
2025-11-21 21:22:23.149 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 21:22:23.149 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:23.149065600Z","nanoTime":33329164035600,"traceId":"3c942f49","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2508300,"duration_ms":2,"resultData":{"centerGeohashId":"wydmexk","nineBlockGeohashes":["wydmexk","wydmexs","wydmext","wydmexm","wydmexj","wydmexh","wydmex5","wydmex7","wydmexe"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmexk","hit":false,"valueSize":0,"l1CacheGetDurationNs":346101,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmexk","cacheKey":"data:wydmexk:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":199300},{"geohashId":"wydmexs","cacheKey":"data:wydmexs:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":162600},{"geohashId":"wydmext","cacheKey":"data:wydmext:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":153600},{"geohashId":"wydmexm","cacheKey":"data:wydmexm:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":149900},{"geohashId":"wydmexj","cacheKey":"data:wydmexj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":163600},{"geohashId":"wydmexh","cacheKey":"data:wydmexh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":175000},{"geohashId":"wydmex5","cacheKey":"data:wydmex5:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":430,"l2CacheGetDurationNs":425400},{"geohashId":"wydmex7","cacheKey":"data:wydmex7:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":109900},{"geohashId":"wydmexe","cacheKey":"data:wydmexe:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":166700}],"l2TotalHits":1,"l2TotalMisses":8,"l2CacheTotalDurationNs":1881700,"l2JsonDeserializeTotalDurationNs":67899,"errorMessage":null,"success":true}}
2025-11-21 21:22:23.149 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:23.149065600Z","nanoTime":33329164223800,"traceId":"3c942f49","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 21:22:23.149 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 21:22:23.149 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 8개
2025-11-21 21:22:23.153 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 10건
2025-11-21 21:22:23.154 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 21:22:23.155 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 7개
2025-11-21 21:22:23.155 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:23.155722Z","nanoTime":33329169501400,"traceId":"3c942f49","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":5277600,"duration_ms":5,"resultData":{"inputCctvMissGrids":["wydmexk","wydmexs","wydmext","wydmexm","wydmexj","wydmexh","wydmex7","wydmexe"],"cctvQueryResult":{"queryGeohashIds":["wydmexk","wydmexs","wydmext","wydmexm","wydmexj","wydmexh","wydmex7","wydmexe"],"totalRowsReturned":10,"rowsPerGrid":{"wydmexs":1,"wydmext":1,"wydmexe":3,"wydmexk":2,"wydmex7":2,"wydmexh":1},"queryExecutionTimeNs":3697600,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmexs","cacheKey":"data:wydmexs:cctv","dataCount":1,"dataSize":139,"errorMessage":null,"success":true},{"geohashId":"wydmext","cacheKey":"data:wydmext:cctv","dataCount":1,"dataSize":139,"errorMessage":null,"success":true},{"geohashId":"wydmexe","cacheKey":"data:wydmexe:cctv","dataCount":3,"dataSize":433,"errorMessage":null,"success":true},{"geohashId":"wydmexk","cacheKey":"data:wydmexk:cctv","dataCount":2,"dataSize":280,"errorMessage":null,"success":true},{"geohashId":"wydmex7","cacheKey":"data:wydmex7:cctv","dataCount":2,"dataSize":280,"errorMessage":null,"success":true},{"geohashId":"wydmexh","cacheKey":"data:wydmexh:cctv","dataCount":1,"dataSize":145,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 21:22:23.155 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:23.155722Z","nanoTime":33329169700000,"traceId":"3c942f49","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 21:22:23.155 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 21:22:23.155 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.57004678921483, 127.07357703439783)
2025-11-21 21:22:23.155 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 21:22:23.237 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 21:22:23.237 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 21:22:23.237 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 21:22:23.237 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.57004678921483, 127.07357703439783), 반경: 500m
2025-11-21 21:22:23.318 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 21:22:23.318 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 130건
2025-11-21 21:22:23.318 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 21:22:23.318 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 21:22:23.318 [http-nio-8185-exec-7] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 21:22:23.318 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 21:22:23.318 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 21:22:23.318 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 21:22:23.318 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 21:22:23.318 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:23.318867700Z","nanoTime":33329334201300,"traceId":"3c942f49","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":164501300,"duration_ms":164,"resultData":{"latitude":37.57004678921483,"longitude":127.07357703439783,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":164383199,"addressApiResult":{"cached":false,"cacheKey":"address:37.57004678921483:127.07357703439783","roadAddress":"주소 없음","jibunAddress":"서울 동대문구 장안동 477-1","responseSize":60,"executionTimeNs":81891099,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":36200,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.57004678921483:127.07357703439783:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":2,"CS2":15,"SC4":3,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":0,"PO3":1,"FD6":15,"PK6":15,"OL7":3,"PM9":15},"totalPlaces":130,"responseSize":15226,"executionTimeNs":82455900,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:22:23.318 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:23.318867700Z","nanoTime":33329334419900,"traceId":"3c942f49","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 21:22:23.318 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 21:22:23.318 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 21:22:23.318 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 13개
2025-11-21 21:22:23.318 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 13개 (총 카메라 대수: 28대)
2025-11-21 21:22:23.318 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 21:22:23.403 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구 여의대방로 130 (거리: 594m)
2025-11-21 21:22:23.403 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 21:22:23.403 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 21:22:23.403 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 21:22:23.403 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 21:22:23.403 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:23.403247Z","nanoTime":33329418899300,"traceId":"3c942f49","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":84479400,"duration_ms":84,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":13,"totalCctvAfterFilter":13,"totalCameraCount":28,"filterRate":1.0,"filterExecutionTimeNs":7300,"success":true},"policeQuery":{"queryDurationNs":84033000,"found":true,"nearestAddress":"서울특별시 동작구 여의대방로 130","nearestDistance":594.0608004925626,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"AT4":2,"CS2":15,"SC4":3,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"PO3":1,"FD6":15,"PK6":15,"OL7":3,"PM9":15},"placesAfterFilter":{"AT4":2,"CS2":15,"SC4":3,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"PO3":1,"FD6":15,"PK6":15,"OL7":3,"PM9":15},"totalBeforeFilter":130,"totalAfterFilter":130,"filterRate":1.0,"filterExecutionTimeNs":107300,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:22:23.403 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:23.403247Z","nanoTime":33329419151800,"traceId":"3c942f49","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 21:22:23.403 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 21:22:23.403 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 25.06, 편의성: 32.60, 종합: 28.83
2025-11-21 21:22:23.403 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:23.403247Z","nanoTime":33329419399799,"traceId":"3c942f49","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":247999,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":25.74239993842967,"policeDistance":594.0608004925626,"cctvScore":43.333333333333336,"cctvCount":13,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":25.056053314862236,"success":true},"convenienceScore":{"categoryScores":{"AT4":6.0,"CS2":3.75,"SC4":6.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"PO3":3.0,"FD6":15.0,"PK6":45.0,"OL7":15.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":32.59615384615385,"success":true},"overallScore":28.82610358050804,"errorMessage":null,"success":true}}
2025-11-21 21:22:23.403 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:23.403247Z","nanoTime":33329419574900,"traceId":"3c942f49","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 21:22:23.403 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 21:22:23.403 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구 여의대방로 130, latitude=37.568809, longitude=127.080134, geohashId=wydmez0)
2025-11-21 21:22:23.403 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 594.0608004925626
2025-11-21 21:22:23.403 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmexk
2025-11-21 21:22:23.403 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 21:22:23.403 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:23.403247Z","nanoTime":33329421335900,"traceId":"3c942f49","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1761000,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["음식점이(가) 30m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmexk","dataSize":18195,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":18195,"errorMessage":null,"success":true}}
2025-11-21 21:22:23.403 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 21:22:24.104 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 21:22:24.104 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56750177123274, longitude=127.08004908869256, radius=500)
2025-11-21 21:22:24.104 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 21:22:24.104 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56750177123274, longitude=127.08004908869256, radius=500
2025-11-21 21:22:24.104 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.104604200Z","nanoTime":33330118792200,"traceId":"f10d932b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 21:22:24.104 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 21:22:24.104 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56750177123274, lon=127.08004908869256
2025-11-21 21:22:24.104 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.104604200Z","nanoTime":33330118873200,"traceId":"f10d932b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 21:22:24.104 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.104604200Z","nanoTime":33330118916300,"traceId":"f10d932b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":43100,"duration_ms":0,"resultData":{"latitude":37.56750177123274,"longitude":127.08004908869256,"precision":7,"centerHash":"wydmeyb","adjacentHashes":["wydmeyb","wydmez0","wydmez1","wydmeyc","wydmey9","wydmey8","wydmewx","wydmewz","wydmexp"],"errorMessage":null,"success":true}}
2025-11-21 21:22:24.104 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmeyb, wydmez0, wydmez1, wydmeyc, wydmey9, wydmey8, wydmewx, wydmewz, wydmexp]
2025-11-21 21:22:24.104 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmeyb
2025-11-21 21:22:24.104 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.104604200Z","nanoTime":33330119039100,"traceId":"f10d932b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":246900,"duration_ms":0,"resultData":{"requestLatitude":37.56750177123274,"requestLongitude":127.08004908869256,"requestRadius":500,"centerGeohashId":"wydmeyb","nineBlockGeohashes":["wydmeyb","wydmez0","wydmez1","wydmeyc","wydmey9","wydmey8","wydmewx","wydmewz","wydmexp"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 21:22:24.104 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.104604200Z","nanoTime":33330119111100,"traceId":"f10d932b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 21:22:24.104 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 21:22:24.104 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmeyb
2025-11-21 21:22:24.105 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4391ms)
2025-11-21 21:22:24.105 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 21:22:24.108 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 21:22:24.108 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 7개, 미스: 2개
2025-11-21 21:22:24.108 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.7704ms, 역직렬화: 0.161902ms
2025-11-21 21:22:24.108 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 21:22:24.108 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.108548600Z","nanoTime":33330122579800,"traceId":"f10d932b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3468700,"duration_ms":3,"resultData":{"centerGeohashId":"wydmeyb","nineBlockGeohashes":["wydmeyb","wydmez0","wydmez1","wydmeyc","wydmey9","wydmey8","wydmewx","wydmewz","wydmexp"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmeyb","hit":false,"valueSize":0,"l1CacheGetDurationNs":439100,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmeyb","cacheKey":"data:wydmeyb:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":301,"l2CacheGetDurationNs":547100},{"geohashId":"wydmez0","cacheKey":"data:wydmez0:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":200,"l2CacheGetDurationNs":579401},{"geohashId":"wydmez1","cacheKey":"data:wydmez1:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":300,"l2CacheGetDurationNs":540201},{"geohashId":"wydmeyc","cacheKey":"data:wydmeyc:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":301,"l2CacheGetDurationNs":218800},{"geohashId":"wydmey9","cacheKey":"data:wydmey9:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":299,"l2CacheGetDurationNs":185501},{"geohashId":"wydmey8","cacheKey":"data:wydmey8:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":400,"l2CacheGetDurationNs":165600},{"geohashId":"wydmewx","cacheKey":"data:wydmewx:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":200,"l2CacheGetDurationNs":153600},{"geohashId":"wydmewz","cacheKey":"data:wydmewz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":73001},{"geohashId":"wydmexp","cacheKey":"data:wydmexp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":70600}],"l2TotalHits":7,"l2TotalMisses":2,"l2CacheTotalDurationNs":2770400,"l2JsonDeserializeTotalDurationNs":161902,"errorMessage":null,"success":true}}
2025-11-21 21:22:24.108 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.108548600Z","nanoTime":33330122724499,"traceId":"f10d932b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 21:22:24.108 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 21:22:24.108 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 2개
2025-11-21 21:22:24.110 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 3건
2025-11-21 21:22:24.111 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 21:22:24.111 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 21:22:24.111 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.111722300Z","nanoTime":33330125903000,"traceId":"f10d932b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":3178501,"duration_ms":3,"resultData":{"inputCctvMissGrids":["wydmewz","wydmexp"],"cctvQueryResult":{"queryGeohashIds":["wydmewz","wydmexp"],"totalRowsReturned":3,"rowsPerGrid":{"wydmexp":2,"wydmewz":1},"queryExecutionTimeNs":2340999,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmexp","cacheKey":"data:wydmexp:cctv","dataCount":2,"dataSize":201,"errorMessage":null,"success":true},{"geohashId":"wydmewz","cacheKey":"data:wydmewz:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 21:22:24.111 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.111722300Z","nanoTime":33330126018199,"traceId":"f10d932b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 21:22:24.111 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 21:22:24.111 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56750177123274, 127.08004908869256)
2025-11-21 21:22:24.111 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 21:22:24.219 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 21:22:24.219 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 21:22:24.219 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 21:22:24.219 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56750177123274, 127.08004908869256), 반경: 500m
2025-11-21 21:22:24.306 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 21:22:24.306 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 126건
2025-11-21 21:22:24.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 21:22:24.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 21:22:24.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 광진구
2025-11-21 21:22:24.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 광진구
2025-11-21 21:22:24.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 21:22:24.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 21:22:24.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 21:22:24.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.672940923
2025-11-21 21:22:24.306 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.306718800Z","nanoTime":33330322675700,"traceId":"f10d932b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":196657501,"duration_ms":196,"resultData":{"latitude":37.56750177123274,"longitude":127.08004908869256,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":196569498,"addressApiResult":{"cached":false,"cacheKey":"address:37.56750177123274:127.08004908869256","roadAddress":"서울특별시 광진구 동일로76길 24-3","jibunAddress":"서울 광진구 중곡동 189-64","responseSize":76,"executionTimeNs":107718799,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:광진구","guName":"광진구","arrestRate":0.672940923,"dataFound":true,"executionTimeNs":433599,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56750177123274:127.08004908869256:500","categoryCount":15,"placesByCategory":{"CT1":2,"AT4":1,"CS2":15,"SC4":2,"MT1":1,"BK9":13,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":9,"OL7":4,"PM9":15},"totalPlaces":126,"responseSize":14544,"executionTimeNs":88417100,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:22:24.306 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.306718800Z","nanoTime":33330322858900,"traceId":"f10d932b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 21:22:24.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 21:22:24.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 21:22:24.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 23개
2025-11-21 21:22:24.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 23개 (총 카메라 대수: 23대)
2025-11-21 21:22:24.306 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 21:22:24.389 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구 여의대방로 130 (거리: 146m)
2025-11-21 21:22:24.390 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 21:22:24.390 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 21:22:24.390 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 15개 카테고리
2025-11-21 21:22:24.390 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 21:22:24.390 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.390776400Z","nanoTime":33330404767499,"traceId":"f10d932b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":81908599,"duration_ms":81,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":23,"totalCctvAfterFilter":23,"totalCameraCount":23,"filterRate":1.0,"filterExecutionTimeNs":6101,"success":true},"policeQuery":{"queryDurationNs":81461001,"found":true,"nearestAddress":"서울특별시 동작구 여의대방로 130","nearestDistance":145.54973157547786,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":2,"AT4":1,"CS2":15,"SC4":2,"MT1":1,"BK9":13,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":9,"OL7":4,"PM9":15},"placesAfterFilter":{"CT1":2,"AT4":1,"CS2":15,"SC4":2,"MT1":1,"BK9":13,"HP8":15,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":9,"OL7":4,"PM9":15},"totalBeforeFilter":126,"totalAfterFilter":126,"filterRate":1.0,"filterExecutionTimeNs":76600,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:22:24.390 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.390776400Z","nanoTime":33330404947299,"traceId":"f10d932b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 21:22:24.390 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 21:22:24.391 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 75.40, 편의성: 34.02, 종합: 54.71
2025-11-21 21:22:24.391 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.391376700Z","nanoTime":33330405243300,"traceId":"f10d932b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":296001,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":81.80628355306527,"policeDistance":145.54973157547786,"cctvScore":76.66666666666667,"cctvCount":23,"arrestRateScore":67.2940923,"arrestRate":0.672940923,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":75.39677942258625,"success":true},"convenienceScore":{"categoryScores":{"CT1":8.0,"AT4":3.0,"CS2":4.339624824968466,"SC4":4.0,"MT1":10.0,"BK9":65.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":27.0,"OL7":20.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"광진구","guPopulation":345652,"finalScore":34.0226416549979,"success":true},"overallScore":54.70971053879207,"errorMessage":null,"success":true}}
2025-11-21 21:22:24.391 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.391376700Z","nanoTime":33330405405500,"traceId":"f10d932b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 21:22:24.391 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 21:22:24.391 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구 여의대방로 130, latitude=37.568809, longitude=127.080134, geohashId=wydmez0)
2025-11-21 21:22:24.391 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 145.54973157547786
2025-11-21 21:22:24.391 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmeyb
2025-11-21 21:22:24.391 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 21:22:24.391 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.391707100Z","nanoTime":33330406824200,"traceId":"f10d932b","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1418700,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 116m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmeyb","dataSize":17145,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17145,"errorMessage":null,"success":true}}
2025-11-21 21:22:24.391 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 21:22:24.598 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 21:22:24.598 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56755812862527, longitude=127.07658548444836, radius=500)
2025-11-21 21:22:24.598 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 21:22:24.598 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56755812862527, longitude=127.07658548444836, radius=500
2025-11-21 21:22:24.598 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.598231200Z","nanoTime":33330612441200,"traceId":"ff0f7457","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 21:22:24.598 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 21:22:24.598 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56755812862527, lon=127.07658548444836
2025-11-21 21:22:24.598 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.598231200Z","nanoTime":33330612531300,"traceId":"ff0f7457","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 21:22:24.598 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.598231200Z","nanoTime":33330612583399,"traceId":"ff0f7457","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":52099,"duration_ms":0,"resultData":{"latitude":37.56755812862527,"longitude":127.07658548444836,"precision":7,"centerHash":"wydmewy","adjacentHashes":["wydmewy","wydmexn","wydmexp","wydmewz","wydmewx","wydmeww","wydmewt","wydmewv","wydmexj"],"errorMessage":null,"success":true}}
2025-11-21 21:22:24.598 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmewy, wydmexn, wydmexp, wydmewz, wydmewx, wydmeww, wydmewt, wydmewv, wydmexj]
2025-11-21 21:22:24.598 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmewy
2025-11-21 21:22:24.598 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.598231200Z","nanoTime":33330612738300,"traceId":"ff0f7457","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":297100,"duration_ms":0,"resultData":{"requestLatitude":37.56755812862527,"requestLongitude":127.07658548444836,"requestRadius":500,"centerGeohashId":"wydmewy","nineBlockGeohashes":["wydmewy","wydmexn","wydmexp","wydmewz","wydmewx","wydmeww","wydmewt","wydmewv","wydmexj"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 21:22:24.598 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.598231200Z","nanoTime":33330612796800,"traceId":"ff0f7457","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 21:22:24.598 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 21:22:24.598 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmewy
2025-11-21 21:22:24.599 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.459ms)
2025-11-21 21:22:24.599 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 21:22:24.601 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 21:22:24.601 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 3개, 미스: 6개
2025-11-21 21:22:24.601 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.4475ms, 역직렬화: 0.1857ms
2025-11-21 21:22:24.601 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 21:22:24.602 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.601337800Z","nanoTime":33330616057300,"traceId":"ff0f7457","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3260500,"duration_ms":3,"resultData":{"centerGeohashId":"wydmewy","nineBlockGeohashes":["wydmewy","wydmexn","wydmexp","wydmewz","wydmewx","wydmeww","wydmewt","wydmewv","wydmexj"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmewy","hit":false,"valueSize":0,"l1CacheGetDurationNs":459000,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmewy","cacheKey":"data:wydmewy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":266500},{"geohashId":"wydmexn","cacheKey":"data:wydmexn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":98000},{"geohashId":"wydmexp","cacheKey":"data:wydmexp:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":201,"l2CacheGetDurationNs":260200},{"geohashId":"wydmewz","cacheKey":"data:wydmewz:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":101,"l2CacheGetDurationNs":362800},{"geohashId":"wydmewx","cacheKey":"data:wydmewx:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":200,"l2CacheGetDurationNs":421001},{"geohashId":"wydmeww","cacheKey":"data:wydmeww:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":320201},{"geohashId":"wydmewt","cacheKey":"data:wydmewt:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":129500},{"geohashId":"wydmewv","cacheKey":"data:wydmewv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":105399},{"geohashId":"wydmexj","cacheKey":"data:wydmexj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":184700}],"l2TotalHits":3,"l2TotalMisses":6,"l2CacheTotalDurationNs":2447500,"l2JsonDeserializeTotalDurationNs":185700,"errorMessage":null,"success":true}}
2025-11-21 21:22:24.602 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.602343500Z","nanoTime":33330616233399,"traceId":"ff0f7457","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 21:22:24.602 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 21:22:24.602 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 6개
2025-11-21 21:22:24.605 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 3건
2025-11-21 21:22:24.605 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 21:22:24.605 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 4개
2025-11-21 21:22:24.605 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.605831800Z","nanoTime":33330620514900,"traceId":"ff0f7457","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4281501,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmewy","wydmexn","wydmeww","wydmewt","wydmewv","wydmexj"],"cctvQueryResult":{"queryGeohashIds":["wydmewy","wydmexn","wydmeww","wydmewt","wydmewv","wydmexj"],"totalRowsReturned":3,"rowsPerGrid":{"wydmewy":3},"queryExecutionTimeNs":3340101,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmewy","cacheKey":"data:wydmewy:cctv","dataCount":3,"dataSize":332,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 21:22:24.605 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.605831800Z","nanoTime":33330620673500,"traceId":"ff0f7457","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 21:22:24.605 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 21:22:24.605 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56755812862527, 127.07658548444836)
2025-11-21 21:22:24.605 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 21:22:24.712 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 21:22:24.712 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 21:22:24.712 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 21:22:24.712 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56755812862527, 127.07658548444836), 반경: 500m
2025-11-21 21:22:24.784 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 21:22:24.784 [http-nio-8185-exec-9] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 101건
2025-11-21 21:22:24.788 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 21:22:24.788 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 21:22:24.788 [http-nio-8185-exec-9] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 21:22:24.788 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 21:22:24.788 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 21:22:24.788 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 21:22:24.788 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 21:22:24.788 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.788340200Z","nanoTime":33330803450800,"traceId":"ff0f7457","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":182777300,"duration_ms":182,"resultData":{"latitude":37.56755812862527,"longitude":127.07658548444836,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":182680500,"addressApiResult":{"cached":false,"cacheKey":"address:37.56755812862527:127.07658548444836","roadAddress":"주소 없음","jibunAddress":"서울 광진구 중곡동 485-7","responseSize":59,"executionTimeNs":105625500,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":30299,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56755812862527:127.07658548444836:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":0,"CS2":11,"SC4":2,"MT1":1,"BK9":9,"HP8":15,"AC5":15,"CE7":15,"SW8":0,"PO3":3,"FD6":15,"PK6":3,"OL7":4,"PM9":8},"totalPlaces":101,"responseSize":11731,"executionTimeNs":77024701,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:22:24.788 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.788340200Z","nanoTime":33330803678099,"traceId":"ff0f7457","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 21:22:24.788 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 21:22:24.788 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 21:22:24.788 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 8개
2025-11-21 21:22:24.788 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 8개 (총 카메라 대수: 8대)
2025-11-21 21:22:24.788 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 21:22:24.859 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구 여의대방로 130 (거리: 342m)
2025-11-21 21:22:24.861 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 21:22:24.861 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 21:22:24.861 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 12개 카테고리
2025-11-21 21:22:24.861 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 21:22:24.861 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.861420600Z","nanoTime":33330875481700,"traceId":"ff0f7457","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":71803601,"duration_ms":71,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":8,"totalCctvAfterFilter":8,"totalCameraCount":8,"filterRate":1.0,"filterExecutionTimeNs":5200,"success":true},"policeQuery":{"queryDurationNs":71319000,"found":true,"nearestAddress":"서울특별시 동작구 여의대방로 130","nearestDistance":342.287201135921,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"BK9":9,"HP8":15,"CS2":11,"AC5":15,"CE7":15,"SC4":2,"PO3":3,"FD6":15,"PK6":3,"MT1":1,"OL7":4,"PM9":8},"placesAfterFilter":{"BK9":9,"HP8":15,"CS2":11,"AC5":15,"CE7":15,"SC4":2,"PO3":3,"FD6":15,"PK6":3,"MT1":1,"OL7":4,"PM9":8},"totalBeforeFilter":101,"totalAfterFilter":101,"filterRate":1.0,"filterExecutionTimeNs":81600,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:22:24.861 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.861420600Z","nanoTime":33330875679800,"traceId":"ff0f7457","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 21:22:24.861 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 21:22:24.862 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 27.83, 편의성: 26.98, 종합: 27.41
2025-11-21 21:22:24.862 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.862442Z","nanoTime":33330876485599,"traceId":"ff0f7457","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":805799,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":57.214099858009874,"policeDistance":342.287201135921,"cctvScore":26.666666666666668,"cctvCount":8,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":27.83089662406963,"success":true},"convenienceScore":{"categoryScores":{"BK9":45.0,"HP8":100.0,"CS2":2.75,"AC5":15.0,"CE7":30.0,"SC4":4.0,"PO3":9.0,"FD6":15.0,"PK6":9.0,"MT1":10.0,"OL7":20.0,"PM9":64.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":26.979166666666668,"success":true},"overallScore":27.405031645368148,"errorMessage":null,"success":true}}
2025-11-21 21:22:24.862 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.862442Z","nanoTime":33330876597500,"traceId":"ff0f7457","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 21:22:24.862 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 21:22:24.862 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구 여의대방로 130, latitude=37.568809, longitude=127.080134, geohashId=wydmez0)
2025-11-21 21:22:24.862 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 342.287201135921
2025-11-21 21:22:24.862 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmewy
2025-11-21 21:22:24.862 [http-nio-8185-exec-9] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 21:22:24.862 [http-nio-8185-exec-9] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:24.862959900Z","nanoTime":33330877663800,"traceId":"ff0f7457","thread":"http-nio-8185-exec-9","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1066300,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["주유소이(가) 119m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","CCTV 설치 대수가 적은 편입니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmewy","dataSize":13560,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":13560,"errorMessage":null,"success":true}}
2025-11-21 21:22:24.862 [http-nio-8185-exec-9] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 21:22:25.610 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 21:22:25.611 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.567051518791175, longitude=127.07968639603693, radius=500)
2025-11-21 21:22:25.611 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 21:22:25.611 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.567051518791175, longitude=127.07968639603693, radius=500
2025-11-21 21:22:25.611 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:25.611224100Z","nanoTime":33331625128100,"traceId":"0d3a4efb","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 21:22:25.611 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 21:22:25.611 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.567051518791175, lon=127.07968639603693
2025-11-21 21:22:25.611 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:25.611224100Z","nanoTime":33331625230300,"traceId":"0d3a4efb","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 21:22:25.611 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:25.611224100Z","nanoTime":33331625269999,"traceId":"0d3a4efb","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":39699,"duration_ms":0,"resultData":{"latitude":37.567051518791175,"longitude":127.07968639603693,"precision":7,"centerHash":"wydmeyb","adjacentHashes":["wydmeyb","wydmez0","wydmez1","wydmeyc","wydmey9","wydmey8","wydmewx","wydmewz","wydmexp"],"errorMessage":null,"success":true}}
2025-11-21 21:22:25.611 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmeyb, wydmez0, wydmez1, wydmeyc, wydmey9, wydmey8, wydmewx, wydmewz, wydmexp]
2025-11-21 21:22:25.611 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmeyb
2025-11-21 21:22:25.611 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:25.611224100Z","nanoTime":33331625446100,"traceId":"0d3a4efb","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":318000,"duration_ms":0,"resultData":{"requestLatitude":37.567051518791175,"requestLongitude":127.07968639603693,"requestRadius":500,"centerGeohashId":"wydmeyb","nineBlockGeohashes":["wydmeyb","wydmez0","wydmez1","wydmeyc","wydmey9","wydmey8","wydmewx","wydmewz","wydmexp"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 21:22:25.611 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:25.611224100Z","nanoTime":33331625519499,"traceId":"0d3a4efb","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 21:22:25.611 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 21:22:25.611 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmeyb
2025-11-21 21:22:25.612 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 히트! JSON 역직렬화 시도
2025-11-21 21:22:25.613 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 히트 성공! 즉시 반환 (L1 조회: 1.097199ms, 역직렬화: 0.533799ms)
2025-11-21 21:22:25.613 [http-nio-8185-exec-10] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:25.613079800Z","nanoTime":33331627346100,"traceId":"0d3a4efb","thread":"http-nio-8185-exec-10","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1826601,"duration_ms":1,"resultData":{"centerGeohashId":"wydmeyb","nineBlockGeohashes":["wydmeyb","wydmez0","wydmez1","wydmeyc","wydmey9","wydmey8","wydmewx","wydmewz","wydmexp"],"l1CacheHit":true,"l1CacheResult":{"cacheKey":"dto:wydmeyb","hit":true,"valueSize":15125,"l1CacheGetDurationNs":1097199,"l1JsonDeserializeDurationNs":533799},"l2CacheRequired":false,"l2CacheResults":null,"l2TotalHits":0,"l2TotalMisses":0,"l2CacheTotalDurationNs":null,"l2JsonDeserializeTotalDurationNs":null,"errorMessage":null,"success":true}}
2025-11-21 21:22:25.613 [http-nio-8185-exec-10] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 1단계 캐시 히트: 즉시 반환 ===
2025-11-21 21:22:25.613 [http-nio-8185-exec-10] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 21:22:26.378 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 21:22:26.378 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56835327035598, longitude=127.0730094042527, radius=500)
2025-11-21 21:22:26.378 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 21:22:26.378 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56835327035598, longitude=127.0730094042527, radius=500
2025-11-21 21:22:26.378 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:26.378945800Z","nanoTime":33332393075800,"traceId":"cb5ae944","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 21:22:26.378 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 21:22:26.378 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56835327035598, lon=127.0730094042527
2025-11-21 21:22:26.378 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:26.378945800Z","nanoTime":33332393171900,"traceId":"cb5ae944","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 21:22:26.378 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:26.378945800Z","nanoTime":33332393213800,"traceId":"cb5ae944","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":41900,"duration_ms":0,"resultData":{"latitude":37.56835327035598,"longitude":127.0730094042527,"precision":7,"centerHash":"wydmex5","adjacentHashes":["wydmex5","wydmex7","wydmexk","wydmexh","wydmewu","wydmewg","wydmewf","wydmex4","wydmex6"],"errorMessage":null,"success":true}}
2025-11-21 21:22:26.378 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmex5, wydmex7, wydmexk, wydmexh, wydmewu, wydmewg, wydmewf, wydmex4, wydmex6]
2025-11-21 21:22:26.378 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmex5
2025-11-21 21:22:26.378 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:26.378945800Z","nanoTime":33332393326700,"traceId":"cb5ae944","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":250900,"duration_ms":0,"resultData":{"requestLatitude":37.56835327035598,"requestLongitude":127.0730094042527,"requestRadius":500,"centerGeohashId":"wydmex5","nineBlockGeohashes":["wydmex5","wydmex7","wydmexk","wydmexh","wydmewu","wydmewg","wydmewf","wydmex4","wydmex6"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 21:22:26.378 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:26.378945800Z","nanoTime":33332393373400,"traceId":"cb5ae944","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 21:22:26.378 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 21:22:26.378 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmex5
2025-11-21 21:22:26.379 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3953ms)
2025-11-21 21:22:26.379 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 21:22:26.382 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 21:22:26.382 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 7개, 미스: 2개
2025-11-21 21:22:26.382 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 3.2166ms, 역직렬화: 0.245402ms
2025-11-21 21:22:26.382 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 21:22:26.382 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:26.382966600Z","nanoTime":33332397354700,"traceId":"cb5ae944","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3981300,"duration_ms":3,"resultData":{"centerGeohashId":"wydmex5","nineBlockGeohashes":["wydmex5","wydmex7","wydmexk","wydmexh","wydmewu","wydmewg","wydmewf","wydmex4","wydmex6"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmex5","hit":false,"valueSize":0,"l1CacheGetDurationNs":395300,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmex5","cacheKey":"data:wydmex5:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":430,"l2CacheGetDurationNs":431900},{"geohashId":"wydmex7","cacheKey":"data:wydmex7:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":280,"l2CacheGetDurationNs":234100},{"geohashId":"wydmexk","cacheKey":"data:wydmexk:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":280,"l2CacheGetDurationNs":713900},{"geohashId":"wydmexh","cacheKey":"data:wydmexh:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":145,"l2CacheGetDurationNs":363000},{"geohashId":"wydmewu","cacheKey":"data:wydmewu:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":108800},{"geohashId":"wydmewg","cacheKey":"data:wydmewg:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":116700},{"geohashId":"wydmewf","cacheKey":"data:wydmewf:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":145,"l2CacheGetDurationNs":232400},{"geohashId":"wydmex4","cacheKey":"data:wydmex4:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":425,"l2CacheGetDurationNs":320100},{"geohashId":"wydmex6","cacheKey":"data:wydmex6:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":284,"l2CacheGetDurationNs":343700}],"l2TotalHits":7,"l2TotalMisses":2,"l2CacheTotalDurationNs":3216600,"l2JsonDeserializeTotalDurationNs":245402,"errorMessage":null,"success":true}}
2025-11-21 21:22:26.382 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:26.382966600Z","nanoTime":33332397553700,"traceId":"cb5ae944","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 21:22:26.382 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 21:22:26.382 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 2개
2025-11-21 21:22:26.385 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 2건
2025-11-21 21:22:26.385 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 21:22:26.385 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 8개
2025-11-21 21:22:26.385 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:26.385002700Z","nanoTime":33332401681299,"traceId":"cb5ae944","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4127599,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmewu","wydmewg"],"cctvQueryResult":{"queryGeohashIds":["wydmewu","wydmewg"],"totalRowsReturned":2,"rowsPerGrid":{"wydmewu":2},"queryExecutionTimeNs":3345500,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmewu","cacheKey":"data:wydmewu:cctv","dataCount":2,"dataSize":285,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 21:22:26.385 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:26.385002700Z","nanoTime":33332401823800,"traceId":"cb5ae944","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 21:22:26.385 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 21:22:26.385 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56835327035598, 127.0730094042527)
2025-11-21 21:22:26.385 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 21:22:26.465 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 21:22:26.465 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 21:22:26.465 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 21:22:26.465 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56835327035598, 127.0730094042527), 반경: 500m
2025-11-21 21:22:26.644 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 21:22:26.644 [http-nio-8185-exec-1] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 126건
2025-11-21 21:22:26.650 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 21:22:26.650 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 21:22:26.650 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 동대문구
2025-11-21 21:22:26.650 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 동대문구
2025-11-21 21:22:26.650 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 21:22:26.650 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 21:22:26.650 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 21:22:26.650 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.713272637
2025-11-21 21:22:26.650 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:26.650703500Z","nanoTime":33332665131700,"traceId":"cb5ae944","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":263307900,"duration_ms":263,"resultData":{"latitude":37.56835327035598,"longitude":127.0730094042527,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":263159801,"addressApiResult":{"cached":false,"cacheKey":"address:37.56835327035598:127.0730094042527","roadAddress":"서울특별시 동대문구 장안벚꽃로 107","jibunAddress":"서울 동대문구 장안동 336","responseSize":73,"executionTimeNs":77228100,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:동대문구","guName":"동대문구","arrestRate":0.713272637,"dataFound":true,"executionTimeNs":692401,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56835327035598:127.0730094042527:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":1,"CS2":15,"SC4":2,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":0,"PO3":2,"FD6":15,"PK6":15,"OL7":3,"PM9":12},"totalPlaces":126,"responseSize":14768,"executionTimeNs":185239300,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:22:26.650 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:26.650703500Z","nanoTime":33332665462500,"traceId":"cb5ae944","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 21:22:26.650 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 21:22:26.650 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 21:22:26.650 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 16개
2025-11-21 21:22:26.650 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 16개 (총 카메라 대수: 36대)
2025-11-21 21:22:26.650 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 21:22:26.714 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구 여의대방로 130 (거리: 630m)
2025-11-21 21:22:26.714 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 21:22:26.714 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 21:22:26.714 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 21:22:26.714 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 21:22:26.714 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:26.714673600Z","nanoTime":33332729283599,"traceId":"cb5ae944","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":63821099,"duration_ms":63,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":16,"totalCctvAfterFilter":16,"totalCameraCount":36,"filterRate":1.0,"filterExecutionTimeNs":12300,"success":true},"policeQuery":{"queryDurationNs":63419601,"found":true,"nearestAddress":"서울특별시 동작구 여의대방로 130","nearestDistance":629.9732377600725,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"AT4":1,"CS2":15,"SC4":2,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"PO3":2,"FD6":15,"PK6":15,"OL7":3,"PM9":12},"placesAfterFilter":{"AT4":1,"CS2":15,"SC4":2,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":14,"PO3":2,"FD6":15,"PK6":15,"OL7":3,"PM9":12},"totalBeforeFilter":126,"totalAfterFilter":125,"filterRate":0.9920634920634921,"filterExecutionTimeNs":59499,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:22:26.714 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:26.714673600Z","nanoTime":33332729429100,"traceId":"cb5ae944","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 21:22:26.714 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 21:22:26.714 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 49.11, 편의성: 32.01, 종합: 40.56
2025-11-21 21:22:26.714 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:26.714673600Z","nanoTime":33332729585000,"traceId":"cb5ae944","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":155900,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":21.25334527999094,"policeDistance":629.9732377600725,"cctvScore":53.333333333333336,"cctvCount":16,"arrestRateScore":71.3272637,"arrestRate":0.713272637,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":49.10751602733062,"success":true},"convenienceScore":{"categoryScores":{"AT4":3.0,"CS2":4.182898637211624,"SC4":4.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":28.0,"PO3":6.0,"FD6":15.0,"PK6":45.0,"OL7":15.0,"PM9":96.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"동대문구","guPopulation":358603,"finalScore":32.01406912593936,"success":true},"overallScore":40.56079257663499,"errorMessage":null,"success":true}}
2025-11-21 21:22:26.714 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:26.714673600Z","nanoTime":33332729694299,"traceId":"cb5ae944","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 21:22:26.714 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 21:22:26.714 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구 여의대방로 130, latitude=37.568809, longitude=127.080134, geohashId=wydmez0)
2025-11-21 21:22:26.714 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 629.9732377600725
2025-11-21 21:22:26.714 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmex5
2025-11-21 21:22:26.714 [http-nio-8185-exec-1] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 21:22:26.714 [http-nio-8185-exec-1] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:26.714673600Z","nanoTime":33332730727100,"traceId":"cb5ae944","thread":"http-nio-8185-exec-1","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1032801,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["카페이(가) 37m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmex5","dataSize":17937,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":17937,"errorMessage":null,"success":true}}
2025-11-21 21:22:26.714 [http-nio-8185-exec-1] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 21:22:27.577 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 21:22:27.577 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56802780697124, longitude=127.07477488749221, radius=500)
2025-11-21 21:22:27.577 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 21:22:27.577 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56802780697124, longitude=127.07477488749221, radius=500
2025-11-21 21:22:27.577 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:27.577090400Z","nanoTime":33333591281700,"traceId":"7c3a751a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 21:22:27.577 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 21:22:27.577 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56802780697124, lon=127.07477488749221
2025-11-21 21:22:27.577 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:27.577090400Z","nanoTime":33333591459099,"traceId":"7c3a751a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 21:22:27.577 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:27.577090400Z","nanoTime":33333591510799,"traceId":"7c3a751a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":51700,"duration_ms":0,"resultData":{"latitude":37.56802780697124,"longitude":127.07477488749221,"precision":7,"centerHash":"wydmexj","adjacentHashes":["wydmexj","wydmexm","wydmexq","wydmexn","wydmewy","wydmewv","wydmewu","wydmexh","wydmexk"],"errorMessage":null,"success":true}}
2025-11-21 21:22:27.577 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmexj, wydmexm, wydmexq, wydmexn, wydmewy, wydmewv, wydmewu, wydmexh, wydmexk]
2025-11-21 21:22:27.577 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmexj
2025-11-21 21:22:27.577 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:27.577090400Z","nanoTime":33333591612800,"traceId":"7c3a751a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":331100,"duration_ms":0,"resultData":{"requestLatitude":37.56802780697124,"requestLongitude":127.07477488749221,"requestRadius":500,"centerGeohashId":"wydmexj","nineBlockGeohashes":["wydmexj","wydmexm","wydmexq","wydmexn","wydmewy","wydmewv","wydmewu","wydmexh","wydmexk"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 21:22:27.577 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:27.577090400Z","nanoTime":33333591670200,"traceId":"7c3a751a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 21:22:27.577 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 21:22:27.577 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmexj
2025-11-21 21:22:27.578 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3898ms)
2025-11-21 21:22:27.578 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 21:22:27.579 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 21:22:27.579 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 4개, 미스: 5개
2025-11-21 21:22:27.579 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.7112ms, 역직렬화: 0.128499ms
2025-11-21 21:22:27.579 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 21:22:27.579 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:27.579847100Z","nanoTime":33333594155300,"traceId":"7c3a751a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2485100,"duration_ms":2,"resultData":{"centerGeohashId":"wydmexj","nineBlockGeohashes":["wydmexj","wydmexm","wydmexq","wydmexn","wydmewy","wydmewv","wydmewu","wydmexh","wydmexk"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmexj","hit":false,"valueSize":0,"l1CacheGetDurationNs":389800,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmexj","cacheKey":"data:wydmexj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":155301},{"geohashId":"wydmexm","cacheKey":"data:wydmexm:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":89499},{"geohashId":"wydmexq","cacheKey":"data:wydmexq:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":76300},{"geohashId":"wydmexn","cacheKey":"data:wydmexn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":71399},{"geohashId":"wydmewy","cacheKey":"data:wydmewy:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":332,"l2CacheGetDurationNs":180500},{"geohashId":"wydmewv","cacheKey":"data:wydmewv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":174200},{"geohashId":"wydmewu","cacheKey":"data:wydmewu:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":285,"l2CacheGetDurationNs":261099},{"geohashId":"wydmexh","cacheKey":"data:wydmexh:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":145,"l2CacheGetDurationNs":205600},{"geohashId":"wydmexk","cacheKey":"data:wydmexk:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":280,"l2CacheGetDurationNs":291300}],"l2TotalHits":4,"l2TotalMisses":5,"l2CacheTotalDurationNs":1711200,"l2JsonDeserializeTotalDurationNs":128499,"errorMessage":null,"success":true}}
2025-11-21 21:22:27.579 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:27.579847100Z","nanoTime":33333594298300,"traceId":"7c3a751a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 21:22:27.579 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 21:22:27.579 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 5개
2025-11-21 21:22:27.582 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 0건
2025-11-21 21:22:27.582 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 21:22:27.582 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 4개
2025-11-21 21:22:27.582 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:27.582581Z","nanoTime":33333597189599,"traceId":"7c3a751a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":2891299,"duration_ms":2,"resultData":{"inputCctvMissGrids":["wydmexj","wydmexm","wydmexq","wydmexn","wydmewv"],"cctvQueryResult":{"queryGeohashIds":["wydmexj","wydmexm","wydmexq","wydmexn","wydmewv"],"totalRowsReturned":0,"rowsPerGrid":{},"queryExecutionTimeNs":2669800,"errorMessage":null,"success":true},"cctvCacheWrites":[],"errorMessage":null,"success":true}}
2025-11-21 21:22:27.582 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:27.582581Z","nanoTime":33333597295699,"traceId":"7c3a751a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 21:22:27.582 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 21:22:27.582 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56802780697124, 127.07477488749221)
2025-11-21 21:22:27.583 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 21:22:27.659 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 21:22:27.661 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 21:22:27.661 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 21:22:27.661 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56802780697124, 127.07477488749221), 반경: 500m
2025-11-21 21:22:27.738 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 21:22:27.738 [http-nio-8185-exec-3] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 109건
2025-11-21 21:22:27.739 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 21:22:27.739 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 21:22:27.739 [http-nio-8185-exec-3] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 21:22:27.739 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 21:22:27.739 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 21:22:27.739 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 21:22:27.739 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 21:22:27.740 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:27.739469500Z","nanoTime":33333754113199,"traceId":"7c3a751a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":156817500,"duration_ms":156,"resultData":{"latitude":37.56802780697124,"longitude":127.07477488749221,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":156696801,"addressApiResult":{"cached":false,"cacheKey":"address:37.56802780697124:127.07477488749221","roadAddress":"주소 없음","jibunAddress":"서울 동대문구 장안동 356-1","responseSize":60,"executionTimeNs":77789300,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":30001,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56802780697124:127.07477488749221:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":1,"CS2":15,"SC4":2,"MT1":1,"BK9":7,"HP8":15,"AC5":15,"CE7":15,"SW8":0,"PO3":3,"FD6":15,"PK6":10,"OL7":4,"PM9":6},"totalPlaces":109,"responseSize":12740,"executionTimeNs":78877500,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:22:27.740 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:27.740416Z","nanoTime":33333754315300,"traceId":"7c3a751a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 21:22:27.740 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 21:22:27.740 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 21:22:27.740 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 8개
2025-11-21 21:22:27.740 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 8개 (총 카메라 대수: 15대)
2025-11-21 21:22:27.740 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 21:22:27.811 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구 여의대방로 130 (거리: 480m)
2025-11-21 21:22:27.811 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 21:22:27.811 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 21:22:27.811 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 21:22:27.811 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 21:22:27.811 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:27.811866700Z","nanoTime":33333826877500,"traceId":"7c3a751a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":72562200,"duration_ms":72,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":8,"totalCctvAfterFilter":8,"totalCameraCount":15,"filterRate":1.0,"filterExecutionTimeNs":4700,"success":true},"policeQuery":{"queryDurationNs":72189600,"found":true,"nearestAddress":"서울특별시 동작구 여의대방로 130","nearestDistance":480.25166457821194,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"AT4":1,"CS2":15,"SC4":2,"MT1":1,"BK9":7,"HP8":15,"AC5":15,"CE7":15,"PO3":3,"FD6":15,"PK6":10,"OL7":4,"PM9":6},"placesAfterFilter":{"AT4":1,"CS2":15,"SC4":2,"MT1":1,"BK9":7,"HP8":15,"AC5":15,"CE7":15,"PO3":3,"FD6":15,"PK6":10,"OL7":4,"PM9":6},"totalBeforeFilter":109,"totalAfterFilter":109,"filterRate":1.0,"filterExecutionTimeNs":84899,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:22:27.811 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:27.811866700Z","nanoTime":33333827066300,"traceId":"7c3a751a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 21:22:27.811 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 21:22:27.811 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 22.66, 편의성: 24.83, 종합: 23.74
2025-11-21 21:22:27.811 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:27.811866700Z","nanoTime":33333827217000,"traceId":"7c3a751a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":150700,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":39.96854192772351,"policeDistance":480.25166457821194,"cctvScore":26.666666666666668,"cctvCount":8,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":22.657229244983718,"success":true},"convenienceScore":{"categoryScores":{"AT4":3.0,"CS2":3.75,"SC4":4.0,"MT1":10.0,"BK9":35.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"PO3":9.0,"FD6":15.0,"PK6":30.0,"OL7":20.0,"PM9":48.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":24.826923076923077,"success":true},"overallScore":23.742076160953395,"errorMessage":null,"success":true}}
2025-11-21 21:22:27.811 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:27.811866700Z","nanoTime":33333827334299,"traceId":"7c3a751a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 21:22:27.811 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 21:22:27.811 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구 여의대방로 130, latitude=37.568809, longitude=127.080134, geohashId=wydmez0)
2025-11-21 21:22:27.811 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 480.25166457821194
2025-11-21 21:22:27.813 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmexj
2025-11-21 21:22:27.813 [http-nio-8185-exec-3] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 21:22:27.813 [http-nio-8185-exec-3] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:27.813882200Z","nanoTime":33333828533200,"traceId":"7c3a751a","thread":"http-nio-8185-exec-3","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1198901,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["학원이(가) 83m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmexj","dataSize":14985,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":14985,"errorMessage":null,"success":true}}
2025-11-21 21:22:27.813 [http-nio-8185-exec-3] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 21:22:30.050 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 21:22:30.050 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.56846403723661, longitude=127.06859498427698, radius=500)
2025-11-21 21:22:30.050 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 21:22:30.050 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.56846403723661, longitude=127.06859498427698, radius=500
2025-11-21 21:22:30.051 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:30.050093800Z","nanoTime":33336064817500,"traceId":"dba4ea94","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 21:22:30.051 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 21:22:30.051 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.56846403723661, lon=127.06859498427698
2025-11-21 21:22:30.051 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:30.051090100Z","nanoTime":33336064888000,"traceId":"dba4ea94","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 21:22:30.051 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:30.051090100Z","nanoTime":33336064920700,"traceId":"dba4ea94","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":32700,"duration_ms":0,"resultData":{"latitude":37.56846403723661,"longitude":127.06859498427698,"precision":7,"centerHash":"wydmex0","adjacentHashes":["wydmex0","wydmex2","wydmex3","wydmex1","wydmewc","wydmewb","wydmeqz","wydmerp","wydmerr"],"errorMessage":null,"success":true}}
2025-11-21 21:22:30.051 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmex0, wydmex2, wydmex3, wydmex1, wydmewc, wydmewb, wydmeqz, wydmerp, wydmerr]
2025-11-21 21:22:30.051 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmex0
2025-11-21 21:22:30.051 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:30.051090100Z","nanoTime":33336065031899,"traceId":"dba4ea94","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":214399,"duration_ms":0,"resultData":{"requestLatitude":37.56846403723661,"requestLongitude":127.06859498427698,"requestRadius":500,"centerGeohashId":"wydmex0","nineBlockGeohashes":["wydmex0","wydmex2","wydmex3","wydmex1","wydmewc","wydmewb","wydmeqz","wydmerp","wydmerr"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 21:22:30.051 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:30.051090100Z","nanoTime":33336065069700,"traceId":"dba4ea94","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 21:22:30.051 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 21:22:30.051 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmex0
2025-11-21 21:22:30.051 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.4535ms)
2025-11-21 21:22:30.051 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 21:22:30.053 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 21:22:30.053 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 6개, 미스: 3개
2025-11-21 21:22:30.053 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.8651ms, 역직렬화: 0.184899ms
2025-11-21 21:22:30.053 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 21:22:30.053 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:30.053102900Z","nanoTime":33336068668100,"traceId":"dba4ea94","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3598400,"duration_ms":3,"resultData":{"centerGeohashId":"wydmex0","nineBlockGeohashes":["wydmex0","wydmex2","wydmex3","wydmex1","wydmewc","wydmewb","wydmeqz","wydmerp","wydmerr"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmex0","hit":false,"valueSize":0,"l1CacheGetDurationNs":453500,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmex0","cacheKey":"data:wydmex0:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":289,"l2CacheGetDurationNs":583399},{"geohashId":"wydmex2","cacheKey":"data:wydmex2:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":139,"l2CacheGetDurationNs":232699},{"geohashId":"wydmex3","cacheKey":"data:wydmex3:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":289,"l2CacheGetDurationNs":213000},{"geohashId":"wydmex1","cacheKey":"data:wydmex1:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":137,"l2CacheGetDurationNs":523401},{"geohashId":"wydmewc","cacheKey":"data:wydmewc:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":142,"l2CacheGetDurationNs":292400},{"geohashId":"wydmewb","cacheKey":"data:wydmewb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":131800},{"geohashId":"wydmeqz","cacheKey":"data:wydmeqz:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":145,"l2CacheGetDurationNs":323601},{"geohashId":"wydmerp","cacheKey":"data:wydmerp:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":155800},{"geohashId":"wydmerr","cacheKey":"data:wydmerr:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":127601}],"l2TotalHits":6,"l2TotalMisses":3,"l2CacheTotalDurationNs":2865100,"l2JsonDeserializeTotalDurationNs":184899,"errorMessage":null,"success":true}}
2025-11-21 21:22:30.053 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:30.053102900Z","nanoTime":33336068848500,"traceId":"dba4ea94","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 21:22:30.055 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 21:22:30.055 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 3개
2025-11-21 21:22:30.058 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 8건
2025-11-21 21:22:30.058 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 21:22:30.058 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 21:22:30.059 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:30.058272800Z","nanoTime":33336072987599,"traceId":"dba4ea94","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4139099,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmewb","wydmerp","wydmerr"],"cctvQueryResult":{"queryGeohashIds":["wydmewb","wydmerp","wydmerr"],"totalRowsReturned":8,"rowsPerGrid":{"wydmewb":3,"wydmerp":2,"wydmerr":3},"queryExecutionTimeNs":3102499,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmewb","cacheKey":"data:wydmewb:cctv","dataCount":3,"dataSize":424,"errorMessage":null,"success":true},{"geohashId":"wydmerp","cacheKey":"data:wydmerp:cctv","dataCount":2,"dataSize":286,"errorMessage":null,"success":true},{"geohashId":"wydmerr","cacheKey":"data:wydmerr:cctv","dataCount":3,"dataSize":434,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 21:22:30.059 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:30.059268700Z","nanoTime":33336073148900,"traceId":"dba4ea94","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 21:22:30.059 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 21:22:30.059 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.56846403723661, 127.06859498427698)
2025-11-21 21:22:30.059 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 21:22:30.145 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 21:22:30.145 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 21:22:30.145 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 21:22:30.145 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.56846403723661, 127.06859498427698), 반경: 500m
2025-11-21 21:22:30.235 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 21:22:30.235 [http-nio-8185-exec-2] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 133건
2025-11-21 21:22:30.237 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 21:22:30.237 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 21:22:30.237 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 동대문구
2025-11-21 21:22:30.237 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 동대문구
2025-11-21 21:22:30.237 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 21:22:30.237 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 21:22:30.237 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 21:22:30.237 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.713272637
2025-11-21 21:22:30.237 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:30.237182700Z","nanoTime":33336251818800,"traceId":"dba4ea94","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":178669900,"duration_ms":178,"resultData":{"latitude":37.56846403723661,"longitude":127.06859498427698,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":178547699,"addressApiResult":{"cached":false,"cacheKey":"address:37.56846403723661:127.06859498427698","roadAddress":"서울특별시 동대문구 장한로 85","jibunAddress":"서울 동대문구 장안동 374-1","responseSize":72,"executionTimeNs":86187899,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:동대문구","guName":"동대문구","arrestRate":0.713272637,"dataFound":true,"executionTimeNs":526500,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.56846403723661:127.06859498427698:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":3,"CS2":15,"SC4":2,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":0,"PO3":4,"FD6":15,"PK6":15,"OL7":3,"PM9":15},"totalPlaces":133,"responseSize":15479,"executionTimeNs":91833300,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:22:30.237 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:30.237182700Z","nanoTime":33336252011700,"traceId":"dba4ea94","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 21:22:30.237 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 21:22:30.237 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 21:22:30.237 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 16개
2025-11-21 21:22:30.237 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 16개 (총 카메라 대수: 50대)
2025-11-21 21:22:30.237 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 21:22:30.318 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구 여의대방로 130 (거리: 1018m)
2025-11-21 21:22:30.318 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 21:22:30.318 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 21:22:30.318 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 21:22:30.318 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 21:22:30.318 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:30.318327300Z","nanoTime":33336337145899,"traceId":"dba4ea94","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":85134199,"duration_ms":85,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":16,"totalCctvAfterFilter":16,"totalCameraCount":50,"filterRate":1.0,"filterExecutionTimeNs":8200,"success":true},"policeQuery":{"queryDurationNs":84726601,"found":true,"nearestAddress":"서울특별시 동작구 여의대방로 130","nearestDistance":1017.7225035402072,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"AT4":3,"CS2":15,"SC4":2,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"PO3":4,"FD6":15,"PK6":15,"OL7":3,"PM9":15},"placesAfterFilter":{"AT4":3,"CS2":15,"SC4":2,"MT1":1,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"PO3":4,"FD6":15,"PK6":15,"OL7":3,"PM9":15},"totalBeforeFilter":133,"totalAfterFilter":133,"filterRate":1.0,"filterExecutionTimeNs":71000,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:22:30.318 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:30.318327300Z","nanoTime":33336337358200,"traceId":"dba4ea94","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 21:22:30.318 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 21:22:30.318 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 42.73, 편의성: 33.40, 종합: 38.07
2025-11-21 21:22:30.318 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:30.318327300Z","nanoTime":33336337495500,"traceId":"dba4ea94","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":137300,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":0.0,"policeDistance":1017.7225035402072,"cctvScore":53.333333333333336,"cctvCount":16,"arrestRateScore":71.3272637,"arrestRate":0.713272637,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":42.73151244333334,"success":true},"convenienceScore":{"categoryScores":{"AT4":9.0,"CS2":4.182898637211624,"SC4":4.0,"MT1":10.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"PO3":12.0,"FD6":15.0,"PK6":45.0,"OL7":15.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"동대문구","guPopulation":358603,"finalScore":33.39868451055474,"success":true},"overallScore":38.06509847694404,"errorMessage":null,"success":true}}
2025-11-21 21:22:30.318 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:30.318327300Z","nanoTime":33336337595400,"traceId":"dba4ea94","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 21:22:30.318 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 21:22:30.318 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구 여의대방로 130, latitude=37.568809, longitude=127.080134, geohashId=wydmez0)
2025-11-21 21:22:30.318 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 1017.7225035402072
2025-11-21 21:22:30.324 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmex0
2025-11-21 21:22:30.324 [http-nio-8185-exec-2] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 21:22:30.324 [http-nio-8185-exec-2] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:30.324689500Z","nanoTime":33336339127000,"traceId":"dba4ea94","thread":"http-nio-8185-exec-2","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1531600,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["카페이(가) 25m 내에 있습니다."],"warnings":["가장 가까운 파출소가 1km 이상 떨어져 있습니다."],"cacheWrite":{"cacheKey":"dto:wydmex0","dataSize":18642,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":18642,"errorMessage":null,"success":true}}
2025-11-21 21:22:30.324 [http-nio-8185-exec-2] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 21:22:30.998 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 21:22:30.998 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.57192588138048, longitude=127.06502109388981, radius=500)
2025-11-21 21:22:30.998 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 21:22:30.998 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.57192588138048, longitude=127.06502109388981, radius=500
2025-11-21 21:22:30.998 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:30.998207800Z","nanoTime":33337012750299,"traceId":"e041045b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 21:22:30.998 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 21:22:30.998 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.57192588138048, lon=127.06502109388981
2025-11-21 21:22:30.998 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:30.998207800Z","nanoTime":33337012834100,"traceId":"e041045b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 21:22:30.998 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:30.998207800Z","nanoTime":33337012874499,"traceId":"e041045b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":40399,"duration_ms":0,"resultData":{"latitude":37.57192588138048,"longitude":127.06502109388981,"precision":7,"centerHash":"wydmerv","adjacentHashes":["wydmerv","wydmg2j","wydmg2n","wydmery","wydmerw","wydmert","wydmers","wydmeru","wydmg2h"],"errorMessage":null,"success":true}}
2025-11-21 21:22:30.999 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmerv, wydmg2j, wydmg2n, wydmery, wydmerw, wydmert, wydmers, wydmeru, wydmg2h]
2025-11-21 21:22:30.999 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmerv
2025-11-21 21:22:30.999 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:30.999223200Z","nanoTime":33337013025599,"traceId":"e041045b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":275300,"duration_ms":0,"resultData":{"requestLatitude":37.57192588138048,"requestLongitude":127.06502109388981,"requestRadius":500,"centerGeohashId":"wydmerv","nineBlockGeohashes":["wydmerv","wydmg2j","wydmg2n","wydmery","wydmerw","wydmert","wydmers","wydmeru","wydmg2h"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 21:22:30.999 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:30.999223200Z","nanoTime":33337013130400,"traceId":"e041045b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 21:22:30.999 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 21:22:30.999 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmerv
2025-11-21 21:22:30.999 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.341999ms)
2025-11-21 21:22:30.999 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 21:22:31.000 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 21:22:31.000 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 4개, 미스: 5개
2025-11-21 21:22:31.000 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 2.4171ms, 역직렬화: 0.1359ms
2025-11-21 21:22:31.000 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 21:22:31.000 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:31.000980500Z","nanoTime":33337016249000,"traceId":"e041045b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3118600,"duration_ms":3,"resultData":{"centerGeohashId":"wydmerv","nineBlockGeohashes":["wydmerv","wydmg2j","wydmg2n","wydmery","wydmerw","wydmert","wydmers","wydmeru","wydmg2h"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmerv","hit":false,"valueSize":0,"l1CacheGetDurationNs":341999,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmerv","cacheKey":"data:wydmerv:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":145,"l2CacheGetDurationNs":261000},{"geohashId":"wydmg2j","cacheKey":"data:wydmg2j:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":97201},{"geohashId":"wydmg2n","cacheKey":"data:wydmg2n:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":96199},{"geohashId":"wydmery","cacheKey":"data:wydmery:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":136,"l2CacheGetDurationNs":286000},{"geohashId":"wydmerw","cacheKey":"data:wydmerw:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":146,"l2CacheGetDurationNs":403100},{"geohashId":"wydmert","cacheKey":"data:wydmert:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":138,"l2CacheGetDurationNs":370201},{"geohashId":"wydmers","cacheKey":"data:wydmers:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":253600},{"geohashId":"wydmeru","cacheKey":"data:wydmeru:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":212599},{"geohashId":"wydmg2h","cacheKey":"data:wydmg2h:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":203600}],"l2TotalHits":4,"l2TotalMisses":5,"l2CacheTotalDurationNs":2417100,"l2JsonDeserializeTotalDurationNs":135900,"errorMessage":null,"success":true}}
2025-11-21 21:22:31.000 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:31.000980500Z","nanoTime":33337016455099,"traceId":"e041045b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 21:22:31.000 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 21:22:31.000 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 5개
2025-11-21 21:22:31.005 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 1건
2025-11-21 21:22:31.005 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 21:22:31.005 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 5개
2025-11-21 21:22:31.005 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:31.005689800Z","nanoTime":33337020646800,"traceId":"e041045b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":4191701,"duration_ms":4,"resultData":{"inputCctvMissGrids":["wydmg2j","wydmg2n","wydmers","wydmeru","wydmg2h"],"cctvQueryResult":{"queryGeohashIds":["wydmg2j","wydmg2n","wydmers","wydmeru","wydmg2h"],"totalRowsReturned":1,"rowsPerGrid":{"wydmg2n":1},"queryExecutionTimeNs":3533400,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmg2n","cacheKey":"data:wydmg2n:cctv","dataCount":1,"dataSize":139,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 21:22:31.005 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:31.005689800Z","nanoTime":33337020770299,"traceId":"e041045b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 21:22:31.005 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 21:22:31.005 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.57192588138048, 127.06502109388981)
2025-11-21 21:22:31.005 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 21:22:31.098 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 21:22:31.100 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 21:22:31.100 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 21:22:31.100 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.57192588138048, 127.06502109388981), 반경: 500m
2025-11-21 21:22:31.190 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 21:22:31.190 [http-nio-8185-exec-5] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 123건
2025-11-21 21:22:31.191 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 21:22:31.191 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 21:22:31.191 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 동대문구
2025-11-21 21:22:31.192 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 히트 - 구: 동대문구
2025-11-21 21:22:31.192 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 21:22:31.192 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 21:22:31.192 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 21:22:31.192 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.713272637
2025-11-21 21:22:31.192 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:31.192080200Z","nanoTime":33337206275600,"traceId":"e041045b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":185505301,"duration_ms":185,"resultData":{"latitude":37.57192588138048,"longitude":127.06502109388981,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":185365000,"addressApiResult":{"cached":false,"cacheKey":"address:37.57192588138048:127.06502109388981","roadAddress":"서울특별시 동대문구 답십리로60길 12","jibunAddress":"서울 동대문구 답십리동 2-24","responseSize":76,"executionTimeNs":93549500,"errorMessage":null,"success":true},"arrestRateResult":{"cached":true,"cacheKey":"arrest_rate:동대문구","guName":"동대문구","arrestRate":0.713272637,"dataFound":true,"executionTimeNs":756400,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.57192588138048:127.06502109388981:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":1,"CS2":15,"SC4":1,"MT1":0,"BK9":10,"HP8":15,"AC5":15,"CE7":15,"SW8":0,"PO3":2,"FD6":15,"PK6":15,"OL7":5,"PM9":13},"totalPlaces":123,"responseSize":14280,"executionTimeNs":91059100,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:22:31.192 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:31.192080200Z","nanoTime":33337206574500,"traceId":"e041045b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 21:22:31.192 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 21:22:31.192 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 21:22:31.192 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 5개
2025-11-21 21:22:31.192 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 5개 (총 카메라 대수: 14대)
2025-11-21 21:22:31.192 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 21:22:31.261 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동대문구 전농로38다길 21 (거리: 988m)
2025-11-21 21:22:31.261 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 21:22:31.261 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 21:22:31.261 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 21:22:31.261 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 21:22:31.261 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:31.261041600Z","nanoTime":33337275480400,"traceId":"e041045b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":68905900,"duration_ms":68,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":5,"totalCctvAfterFilter":5,"totalCameraCount":14,"filterRate":1.0,"filterExecutionTimeNs":5401,"success":true},"policeQuery":{"queryDurationNs":68514400,"found":true,"nearestAddress":"서울특별시 동대문구 전농로38다길 21","nearestDistance":988.2048133302251,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"AT4":1,"CS2":15,"SC4":1,"BK9":10,"HP8":15,"AC5":15,"CE7":15,"PO3":2,"FD6":15,"PK6":15,"OL7":5,"PM9":13},"placesAfterFilter":{"CT1":1,"AT4":1,"CS2":15,"SC4":1,"BK9":10,"HP8":15,"AC5":15,"CE7":15,"PO3":2,"FD6":15,"PK6":15,"OL7":5,"PM9":13},"totalBeforeFilter":123,"totalAfterFilter":123,"filterRate":1.0,"filterExecutionTimeNs":83600,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:22:31.261 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:31.261041600Z","nanoTime":33337275688500,"traceId":"e041045b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 21:22:31.261 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 21:22:31.262 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 28.06, 편의성: 30.71, 종합: 29.39
2025-11-21 21:22:31.262 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:31.262049200Z","nanoTime":33337275928600,"traceId":"e041045b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":240100,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":0.0,"policeDistance":988.2048133302251,"cctvScore":16.666666666666664,"cctvCount":5,"arrestRateScore":71.3272637,"arrestRate":0.713272637,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":28.064845776666665,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"AT4":3.0,"CS2":4.182898637211624,"SC4":2.0,"BK9":50.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"PO3":6.0,"FD6":15.0,"PK6":45.0,"OL7":25.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"동대문구","guPopulation":358603,"finalScore":30.706376818247048,"success":true},"overallScore":29.385611297456855,"errorMessage":null,"success":true}}
2025-11-21 21:22:31.262 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:31.262049200Z","nanoTime":33337276075000,"traceId":"e041045b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 21:22:31.262 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 21:22:31.262 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동대문구 전농로38다길 21, latitude=37.576792, longitude=127.074404, geohashId=wydmg8s)
2025-11-21 21:22:31.262 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 988.2048133302251
2025-11-21 21:22:31.262 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmerv
2025-11-21 21:22:31.262 [http-nio-8185-exec-5] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 21:22:31.262 [http-nio-8185-exec-5] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:31.262549400Z","nanoTime":33337277434199,"traceId":"e041045b","thread":"http-nio-8185-exec-5","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1359199,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["음식점이(가) 34m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다."],"cacheWrite":{"cacheKey":"dto:wydmerv","dataSize":16117,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":16117,"errorMessage":null,"success":true}}
2025-11-21 21:22:31.262 [http-nio-8185-exec-5] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 21:22:31.725 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 21:22:31.725 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.574283705135365, longitude=127.06989082287323, radius=500)
2025-11-21 21:22:31.725 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 21:22:31.725 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.574283705135365, longitude=127.06989082287323, radius=500
2025-11-21 21:22:31.725 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:31.725932700Z","nanoTime":33337740001000,"traceId":"86fb7af0","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 21:22:31.725 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 21:22:31.725 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.574283705135365, lon=127.06989082287323
2025-11-21 21:22:31.725 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:31.725932700Z","nanoTime":33337740080400,"traceId":"86fb7af0","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 21:22:31.725 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:31.725932700Z","nanoTime":33337740120399,"traceId":"86fb7af0","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":39999,"duration_ms":0,"resultData":{"latitude":37.574283705135365,"longitude":127.06989082287323,"precision":7,"centerHash":"wydmg81","adjacentHashes":["wydmg81","wydmg83","wydmg86","wydmg84","wydmexf","wydmexc","wydmexb","wydmg80","wydmg82"],"errorMessage":null,"success":true}}
2025-11-21 21:22:31.725 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmg81, wydmg83, wydmg86, wydmg84, wydmexf, wydmexc, wydmexb, wydmg80, wydmg82]
2025-11-21 21:22:31.725 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmg81
2025-11-21 21:22:31.725 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:31.725932700Z","nanoTime":33337740212999,"traceId":"86fb7af0","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":211999,"duration_ms":0,"resultData":{"requestLatitude":37.574283705135365,"requestLongitude":127.06989082287323,"requestRadius":500,"centerGeohashId":"wydmg81","nineBlockGeohashes":["wydmg81","wydmg83","wydmg86","wydmg84","wydmexf","wydmexc","wydmexb","wydmg80","wydmg82"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 21:22:31.725 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:31.725932700Z","nanoTime":33337740259100,"traceId":"86fb7af0","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 21:22:31.725 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 21:22:31.725 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmg81
2025-11-21 21:22:31.725 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.333099ms)
2025-11-21 21:22:31.726 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 21:22:31.728 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 21:22:31.728 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 4개, 미스: 5개
2025-11-21 21:22:31.728 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.8039ms, 역직렬화: 0.124599ms
2025-11-21 21:22:31.728 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 21:22:31.728 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:31.728871500Z","nanoTime":33337742721800,"traceId":"86fb7af0","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":2462700,"duration_ms":2,"resultData":{"centerGeohashId":"wydmg81","nineBlockGeohashes":["wydmg81","wydmg83","wydmg86","wydmg84","wydmexf","wydmexc","wydmexb","wydmg80","wydmg82"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmg81","hit":false,"valueSize":0,"l1CacheGetDurationNs":333099,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmg81","cacheKey":"data:wydmg81:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":144,"l2CacheGetDurationNs":265500},{"geohashId":"wydmg83","cacheKey":"data:wydmg83:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":435,"l2CacheGetDurationNs":367200},{"geohashId":"wydmg86","cacheKey":"data:wydmg86:cctv","hit":true,"dataType":"cctv","dataCount":1,"dataSize":143,"l2CacheGetDurationNs":238900},{"geohashId":"wydmg84","cacheKey":"data:wydmg84:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":290,"l2CacheGetDurationNs":233699},{"geohashId":"wydmexf","cacheKey":"data:wydmexf:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":129300},{"geohashId":"wydmexc","cacheKey":"data:wydmexc:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":95299},{"geohashId":"wydmexb","cacheKey":"data:wydmexb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":87400},{"geohashId":"wydmg80","cacheKey":"data:wydmg80:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":90200},{"geohashId":"wydmg82","cacheKey":"data:wydmg82:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":104501}],"l2TotalHits":4,"l2TotalMisses":5,"l2CacheTotalDurationNs":1803900,"l2JsonDeserializeTotalDurationNs":124599,"errorMessage":null,"success":true}}
2025-11-21 21:22:31.728 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:31.728871500Z","nanoTime":33337742904799,"traceId":"86fb7af0","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 21:22:31.729 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 21:22:31.729 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 5개
2025-11-21 21:22:31.731 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 9건
2025-11-21 21:22:31.732 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 21:22:31.732 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 21:22:31.732 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:31.732285800Z","nanoTime":33337746662300,"traceId":"86fb7af0","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":3757501,"duration_ms":3,"resultData":{"inputCctvMissGrids":["wydmexf","wydmexc","wydmexb","wydmg80","wydmg82"],"cctvQueryResult":{"queryGeohashIds":["wydmexf","wydmexc","wydmexb","wydmg80","wydmg82"],"totalRowsReturned":9,"rowsPerGrid":{"wydmexb":2,"wydmg80":3,"wydmexc":1,"wydmg82":2,"wydmexf":1},"queryExecutionTimeNs":2323900,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmexb","cacheKey":"data:wydmexb:cctv","dataCount":2,"dataSize":288,"errorMessage":null,"success":true},{"geohashId":"wydmg80","cacheKey":"data:wydmg80:cctv","dataCount":3,"dataSize":434,"errorMessage":null,"success":true},{"geohashId":"wydmexc","cacheKey":"data:wydmexc:cctv","dataCount":1,"dataSize":144,"errorMessage":null,"success":true},{"geohashId":"wydmg82","cacheKey":"data:wydmg82:cctv","dataCount":2,"dataSize":290,"errorMessage":null,"success":true},{"geohashId":"wydmexf","cacheKey":"data:wydmexf:cctv","dataCount":1,"dataSize":145,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 21:22:31.732 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:31.732285800Z","nanoTime":33337746839599,"traceId":"86fb7af0","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 21:22:31.732 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 21:22:31.732 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.574283705135365, 127.06989082287323)
2025-11-21 21:22:31.732 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 21:22:31.844 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 21:22:31.844 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 21:22:31.844 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 21:22:31.844 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.574283705135365, 127.06989082287323), 반경: 500m
2025-11-21 21:22:31.928 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 21:22:31.928 [http-nio-8185-exec-4] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 129건
2025-11-21 21:22:31.928 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 21:22:31.928 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 21:22:31.928 [http-nio-8185-exec-4] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 21:22:31.928 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 21:22:31.928 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 21:22:31.928 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 21:22:31.928 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 21:22:31.930 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:31.928523Z","nanoTime":33337944277199,"traceId":"86fb7af0","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":197437600,"duration_ms":197,"resultData":{"latitude":37.574283705135365,"longitude":127.06989082287323,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":197319300,"addressApiResult":{"cached":false,"cacheKey":"address:37.574283705135365:127.06989082287323","roadAddress":"주소 없음","jibunAddress":"서울 동대문구 장안동 475-13","responseSize":61,"executionTimeNs":111896900,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":33500,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.574283705135365:127.06989082287323:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":1,"CS2":15,"SC4":1,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"SW8":0,"PO3":2,"FD6":15,"PK6":15,"OL7":3,"PM9":15},"totalPlaces":129,"responseSize":15114,"executionTimeNs":85388900,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:22:31.930 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:31.930532200Z","nanoTime":33337944653300,"traceId":"86fb7af0","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 21:22:31.930 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 21:22:31.930 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 21:22:31.930 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 16개
2025-11-21 21:22:31.930 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 16개 (총 카메라 대수: 43대)
2025-11-21 21:22:31.930 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 21:22:32.007 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동대문구 전농로38다길 21 (거리: 486m)
2025-11-21 21:22:32.007 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 21:22:32.007 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 21:22:32.009 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 21:22:32.009 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 21:22:32.009 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:32.009701900Z","nanoTime":33338023614700,"traceId":"86fb7af0","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":78961400,"duration_ms":78,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":16,"totalCctvAfterFilter":16,"totalCameraCount":43,"filterRate":1.0,"filterExecutionTimeNs":9400,"success":true},"policeQuery":{"queryDurationNs":78346600,"found":true,"nearestAddress":"서울특별시 동대문구 전농로38다길 21","nearestDistance":485.7817538854435,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"AT4":1,"CS2":15,"SC4":1,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"PO3":2,"FD6":15,"PK6":15,"OL7":3,"PM9":15},"placesAfterFilter":{"AT4":1,"CS2":15,"SC4":1,"MT1":2,"BK9":15,"HP8":15,"AC5":15,"CE7":15,"PO3":2,"FD6":15,"PK6":15,"OL7":3,"PM9":15},"totalBeforeFilter":129,"totalAfterFilter":129,"filterRate":1.0,"filterExecutionTimeNs":117200,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:22:32.009 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:32.009701900Z","nanoTime":33338023968000,"traceId":"86fb7af0","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 21:22:32.009 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 21:22:32.009 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 33.12, 편의성: 33.06, 종합: 33.09
2025-11-21 21:22:32.009 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:32.009701900Z","nanoTime":33338024203200,"traceId":"86fb7af0","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":235200,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":39.27728076431956,"policeDistance":485.7817538854435,"cctvScore":53.333333333333336,"cctvCount":16,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":33.116517562629205,"success":true},"convenienceScore":{"categoryScores":{"AT4":3.0,"CS2":3.75,"SC4":2.0,"MT1":20.0,"BK9":75.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"PO3":6.0,"FD6":15.0,"PK6":45.0,"OL7":15.0,"PM9":100.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":33.05769230769231,"success":true},"overallScore":33.08710493516075,"errorMessage":null,"success":true}}
2025-11-21 21:22:32.009 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:32.009701900Z","nanoTime":33338024350900,"traceId":"86fb7af0","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 21:22:32.009 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 21:22:32.009 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동대문구 전농로38다길 21, latitude=37.576792, longitude=127.074404, geohashId=wydmg8s)
2025-11-21 21:22:32.009 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 485.7817538854435
2025-11-21 21:22:32.011 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmg81
2025-11-21 21:22:32.011 [http-nio-8185-exec-4] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 21:22:32.011 [http-nio-8185-exec-4] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:32.011195100Z","nanoTime":33338025709000,"traceId":"86fb7af0","thread":"http-nio-8185-exec-4","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1358100,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 16m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmg81","dataSize":18514,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":18514,"errorMessage":null,"success":true}}
2025-11-21 21:22:32.011 [http-nio-8185-exec-4] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 21:22:32.385 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 21:22:32.385 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.57335941961531, longitude=127.07828943134925, radius=500)
2025-11-21 21:22:32.385 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 21:22:32.385 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.57335941961531, longitude=127.07828943134925, radius=500
2025-11-21 21:22:32.386 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:32.386321200Z","nanoTime":33338400075300,"traceId":"ae8a9089","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 21:22:32.386 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 21:22:32.386 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.57335941961531, lon=127.07828943134925
2025-11-21 21:22:32.386 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:32.386321200Z","nanoTime":33338400164400,"traceId":"ae8a9089","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 21:22:32.386 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:32.386321200Z","nanoTime":33338400213300,"traceId":"ae8a9089","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":48900,"duration_ms":0,"resultData":{"latitude":37.57335941961531,"longitude":127.07828943134925,"precision":7,"centerHash":"wydmg8p","adjacentHashes":["wydmg8p","wydmg8r","wydmgb2","wydmgb0","wydmezb","wydmexz","wydmexy","wydmg8n","wydmg8q"],"errorMessage":null,"success":true}}
2025-11-21 21:22:32.386 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmg8p, wydmg8r, wydmgb2, wydmgb0, wydmezb, wydmexz, wydmexy, wydmg8n, wydmg8q]
2025-11-21 21:22:32.386 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmg8p
2025-11-21 21:22:32.386 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:32.386321200Z","nanoTime":33338400318000,"traceId":"ae8a9089","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":242700,"duration_ms":0,"resultData":{"requestLatitude":37.57335941961531,"requestLongitude":127.07828943134925,"requestRadius":500,"centerGeohashId":"wydmg8p","nineBlockGeohashes":["wydmg8p","wydmg8r","wydmgb2","wydmgb0","wydmezb","wydmexz","wydmexy","wydmg8n","wydmg8q"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 21:22:32.386 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:32.386321200Z","nanoTime":33338400366900,"traceId":"ae8a9089","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 21:22:32.386 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 21:22:32.386 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmg8p
2025-11-21 21:22:32.386 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.3214ms)
2025-11-21 21:22:32.386 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 21:22:32.387 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 21:22:32.387 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 0개, 미스: 9개
2025-11-21 21:22:32.388 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.105ms, 역직렬화: 0.0ms
2025-11-21 21:22:32.388 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 21:22:32.388 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:32.388334100Z","nanoTime":33338402138300,"traceId":"ae8a9089","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1771400,"duration_ms":1,"resultData":{"centerGeohashId":"wydmg8p","nineBlockGeohashes":["wydmg8p","wydmg8r","wydmgb2","wydmgb0","wydmezb","wydmexz","wydmexy","wydmg8n","wydmg8q"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmg8p","hit":false,"valueSize":0,"l1CacheGetDurationNs":321400,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmg8p","cacheKey":"data:wydmg8p:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":152000},{"geohashId":"wydmg8r","cacheKey":"data:wydmg8r:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":137000},{"geohashId":"wydmgb2","cacheKey":"data:wydmgb2:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":115001},{"geohashId":"wydmgb0","cacheKey":"data:wydmgb0:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":81399},{"geohashId":"wydmezb","cacheKey":"data:wydmezb:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":103300},{"geohashId":"wydmexz","cacheKey":"data:wydmexz:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":87000},{"geohashId":"wydmexy","cacheKey":"data:wydmexy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":97100},{"geohashId":"wydmg8n","cacheKey":"data:wydmg8n:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":118799},{"geohashId":"wydmg8q","cacheKey":"data:wydmg8q:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":155199}],"l2TotalHits":0,"l2TotalMisses":9,"l2CacheTotalDurationNs":1105000,"l2JsonDeserializeTotalDurationNs":0,"errorMessage":null,"success":true}}
2025-11-21 21:22:32.388 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:32.388334100Z","nanoTime":33338402289899,"traceId":"ae8a9089","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 21:22:32.388 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 21:22:32.388 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 9개
2025-11-21 21:22:32.390 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 0건
2025-11-21 21:22:32.390 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 21:22:32.390 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 0개
2025-11-21 21:22:32.391 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:32.390405Z","nanoTime":33338404838100,"traceId":"ae8a9089","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":2548201,"duration_ms":2,"resultData":{"inputCctvMissGrids":["wydmg8p","wydmg8r","wydmgb2","wydmgb0","wydmezb","wydmexz","wydmexy","wydmg8n","wydmg8q"],"cctvQueryResult":{"queryGeohashIds":["wydmg8p","wydmg8r","wydmgb2","wydmgb0","wydmezb","wydmexz","wydmexy","wydmg8n","wydmg8q"],"totalRowsReturned":0,"rowsPerGrid":{},"queryExecutionTimeNs":2238401,"errorMessage":null,"success":true},"cctvCacheWrites":[],"errorMessage":null,"success":true}}
2025-11-21 21:22:32.391 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:32.391168200Z","nanoTime":33338405043100,"traceId":"ae8a9089","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 21:22:32.391 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 21:22:32.391 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.57335941961531, 127.07828943134925)
2025-11-21 21:22:32.391 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 21:22:32.464 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 21:22:32.464 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 21:22:32.464 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 21:22:32.464 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.57335941961531, 127.07828943134925), 반경: 500m
2025-11-21 21:22:32.553 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 21:22:32.554 [http-nio-8185-exec-6] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 107건
2025-11-21 21:22:32.554 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 21:22:32.554 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 21:22:32.554 [http-nio-8185-exec-6] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 21:22:32.554 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 21:22:32.554 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 21:22:32.554 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 21:22:32.554 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 21:22:32.554 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:32.554065900Z","nanoTime":33338568950499,"traceId":"ae8a9089","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":163907399,"duration_ms":163,"resultData":{"latitude":37.57335941961531,"longitude":127.07828943134925,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":163798901,"addressApiResult":{"cached":false,"cacheKey":"address:37.57335941961531:127.07828943134925","roadAddress":"주소 없음","jibunAddress":"서울 중랑구 면목동 727-65","responseSize":60,"executionTimeNs":74199600,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":31100,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.57335941961531:127.07828943134925:500","categoryCount":15,"placesByCategory":{"CT1":0,"AT4":3,"CS2":13,"SC4":2,"MT1":0,"BK9":14,"HP8":15,"AC5":15,"CE7":15,"SW8":0,"PO3":1,"FD6":15,"PK6":8,"OL7":1,"PM9":5},"totalPlaces":107,"responseSize":12591,"executionTimeNs":89568201,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:22:32.554 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:32.554065900Z","nanoTime":33338569138400,"traceId":"ae8a9089","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 21:22:32.554 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 21:22:32.554 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 21:22:32.554 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 0개
2025-11-21 21:22:32.554 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 0개 (총 카메라 대수: 0대)
2025-11-21 21:22:32.554 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 21:22:32.627 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동대문구 전농로38다길 21 (거리: 513m)
2025-11-21 21:22:32.627 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 21:22:32.627 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 21:22:32.627 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 12개 카테고리
2025-11-21 21:22:32.627 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 21:22:32.627 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:32.627908900Z","nanoTime":33338642234500,"traceId":"ae8a9089","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":73096100,"duration_ms":73,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":0,"totalCctvAfterFilter":0,"totalCameraCount":0,"filterRate":0.0,"filterExecutionTimeNs":200,"success":true},"policeQuery":{"queryDurationNs":72632099,"found":true,"nearestAddress":"서울특별시 동대문구 전농로38다길 21","nearestDistance":512.7692680191465,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"AT4":3,"BK9":14,"HP8":15,"CS2":13,"AC5":15,"CE7":15,"SC4":2,"PO3":1,"FD6":15,"PK6":8,"OL7":1,"PM9":5},"placesAfterFilter":{"AT4":3,"BK9":14,"HP8":15,"CS2":13,"AC5":15,"CE7":15,"SC4":2,"PO3":1,"FD6":15,"PK6":8,"OL7":1,"PM9":5},"totalBeforeFilter":107,"totalAfterFilter":107,"filterRate":1.0,"filterExecutionTimeNs":79501,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:22:32.627 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:32.627908900Z","nanoTime":33338642486899,"traceId":"ae8a9089","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 21:22:32.627 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 21:22:32.627 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 10.77, 편의성: 26.52, 종합: 18.65
2025-11-21 21:22:32.629 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:32.629007900Z","nanoTime":33338642759500,"traceId":"ae8a9089","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":272601,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":35.90384149760669,"policeDistance":512.7692680191465,"cctvScore":0.0,"cctvCount":0,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":10.771152449282008,"success":true},"convenienceScore":{"categoryScores":{"AT4":9.0,"BK9":70.0,"HP8":100.0,"CS2":3.25,"AC5":15.0,"CE7":30.0,"SC4":4.0,"PO3":3.0,"FD6":15.0,"PK6":24.0,"OL7":5.0,"PM9":40.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":26.520833333333332,"success":true},"overallScore":18.64599289130767,"errorMessage":null,"success":true}}
2025-11-21 21:22:32.629 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:32.629007900Z","nanoTime":33338642979099,"traceId":"ae8a9089","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 21:22:32.629 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 21:22:32.629 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동대문구 전농로38다길 21, latitude=37.576792, longitude=127.074404, geohashId=wydmg8s)
2025-11-21 21:22:32.629 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 512.7692680191465
2025-11-21 21:22:32.630 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmg8p
2025-11-21 21:22:32.630 [http-nio-8185-exec-6] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 21:22:32.630 [http-nio-8185-exec-6] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:32.630014700Z","nanoTime":33338644128499,"traceId":"ae8a9089","thread":"http-nio-8185-exec-6","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1149400,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["관광명소이(가) 122m 내에 있습니다."],"warnings":["안전 인프라가 부족한 지역입니다. 주의가 필요합니다.","CCTV 설치 대수가 적은 편입니다.","해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmg8p","dataSize":14036,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":14036,"errorMessage":null,"success":true}}
2025-11-21 21:22:32.630 [http-nio-8185-exec-6] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 21:22:32.960 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 21:22:32.960 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.572200560238535, longitude=127.08630268444134, radius=500)
2025-11-21 21:22:32.960 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 21:22:32.960 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.572200560238535, longitude=127.08630268444134, radius=500
2025-11-21 21:22:32.960 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:32.960085900Z","nanoTime":33338974380900,"traceId":"112ba103","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 21:22:32.960 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 21:22:32.960 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.572200560238535, lon=127.08630268444134
2025-11-21 21:22:32.960 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:32.960085900Z","nanoTime":33338974480400,"traceId":"112ba103","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 21:22:32.960 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:32.960085900Z","nanoTime":33338974515600,"traceId":"112ba103","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":35200,"duration_ms":0,"resultData":{"latitude":37.572200560238535,"longitude":127.08630268444134,"precision":7,"centerHash":"wydmezv","adjacentHashes":["wydmezv","wydmgbj","wydmgbn","wydmezy","wydmezw","wydmezt","wydmezs","wydmezu","wydmgbh"],"errorMessage":null,"success":true}}
2025-11-21 21:22:32.960 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmezv, wydmgbj, wydmgbn, wydmezy, wydmezw, wydmezt, wydmezs, wydmezu, wydmgbh]
2025-11-21 21:22:32.960 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmezv
2025-11-21 21:22:32.960 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:32.960085900Z","nanoTime":33338974611700,"traceId":"112ba103","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":230800,"duration_ms":0,"resultData":{"requestLatitude":37.572200560238535,"requestLongitude":127.08630268444134,"requestRadius":500,"centerGeohashId":"wydmezv","nineBlockGeohashes":["wydmezv","wydmgbj","wydmgbn","wydmezy","wydmezw","wydmezt","wydmezs","wydmezu","wydmgbh"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 21:22:32.960 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:32.960085900Z","nanoTime":33338974661700,"traceId":"112ba103","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 21:22:32.960 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 21:22:32.960 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmezv
2025-11-21 21:22:32.961 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.2905ms)
2025-11-21 21:22:32.961 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 21:22:32.962 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 21:22:32.962 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 3개, 미스: 6개
2025-11-21 21:22:32.962 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 1.115701ms, 역직렬화: 0.0779ms
2025-11-21 21:22:32.962 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 21:22:32.962 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:32.962087100Z","nanoTime":33338976301800,"traceId":"112ba103","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":1640100,"duration_ms":1,"resultData":{"centerGeohashId":"wydmezv","nineBlockGeohashes":["wydmezv","wydmgbj","wydmgbn","wydmezy","wydmezw","wydmezt","wydmezs","wydmezu","wydmgbh"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmezv","hit":false,"valueSize":0,"l1CacheGetDurationNs":290500,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmezv","cacheKey":"data:wydmezv:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":111401},{"geohashId":"wydmgbj","cacheKey":"data:wydmgbj:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":73800},{"geohashId":"wydmgbn","cacheKey":"data:wydmgbn:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":70200},{"geohashId":"wydmezy","cacheKey":"data:wydmezy:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":66999},{"geohashId":"wydmezw","cacheKey":"data:wydmezw:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":563,"l2CacheGetDurationNs":187300},{"geohashId":"wydmezt","cacheKey":"data:wydmezt:cctv","hit":true,"dataType":"cctv","dataCount":5,"dataSize":628,"l2CacheGetDurationNs":169100},{"geohashId":"wydmezs","cacheKey":"data:wydmezs:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":265,"l2CacheGetDurationNs":158201},{"geohashId":"wydmezu","cacheKey":"data:wydmezu:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":73500},{"geohashId":"wydmgbh","cacheKey":"data:wydmgbh:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":68200}],"l2TotalHits":3,"l2TotalMisses":6,"l2CacheTotalDurationNs":1115701,"l2JsonDeserializeTotalDurationNs":77900,"errorMessage":null,"success":true}}
2025-11-21 21:22:32.962 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:32.962087100Z","nanoTime":33338976414500,"traceId":"112ba103","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 21:22:32.962 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 21:22:32.962 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 6개
2025-11-21 21:22:32.964 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 9건
2025-11-21 21:22:32.965 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 21:22:32.966 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 7개
2025-11-21 21:22:32.966 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:32.966117200Z","nanoTime":33338980009200,"traceId":"112ba103","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":3594700,"duration_ms":3,"resultData":{"inputCctvMissGrids":["wydmezv","wydmgbj","wydmgbn","wydmezy","wydmezu","wydmgbh"],"cctvQueryResult":{"queryGeohashIds":["wydmezv","wydmgbj","wydmgbn","wydmezy","wydmezu","wydmgbh"],"totalRowsReturned":9,"rowsPerGrid":{"wydmgbj":3,"wydmezu":4,"wydmgbh":1,"wydmgbn":1},"queryExecutionTimeNs":2135500,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmgbj","cacheKey":"data:wydmgbj:cctv","dataCount":3,"dataSize":394,"errorMessage":null,"success":true},{"geohashId":"wydmezu","cacheKey":"data:wydmezu:cctv","dataCount":4,"dataSize":523,"errorMessage":null,"success":true},{"geohashId":"wydmgbh","cacheKey":"data:wydmgbh:cctv","dataCount":1,"dataSize":130,"errorMessage":null,"success":true},{"geohashId":"wydmgbn","cacheKey":"data:wydmgbn:cctv","dataCount":1,"dataSize":131,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 21:22:32.966 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:32.966117200Z","nanoTime":33338980154400,"traceId":"112ba103","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 21:22:32.966 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 21:22:32.966 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.572200560238535, 127.08630268444134)
2025-11-21 21:22:32.966 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 21:22:33.030 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 21:22:33.030 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 21:22:33.030 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 21:22:33.030 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.572200560238535, 127.08630268444134), 반경: 500m
2025-11-21 21:22:33.125 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 21:22:33.125 [http-nio-8185-exec-7] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 94건
2025-11-21 21:22:33.125 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 21:22:33.125 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 21:22:33.125 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 추출된 구: 중랑구
2025-11-21 21:22:33.125 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 캐시 미스 - DB 조회
2025-11-21 21:22:33.130 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 성공 및 캐싱 완료 - 중랑구: 0.69830102
2025-11-21 21:22:33.130 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 21:22:33.130 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 21:22:33.130 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 21:22:33.130 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.69830102
2025-11-21 21:22:33.130 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:33.130403300Z","nanoTime":33339144985699,"traceId":"112ba103","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":164831299,"duration_ms":164,"resultData":{"latitude":37.572200560238535,"longitude":127.08630268444134,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":164701501,"addressApiResult":{"cached":false,"cacheKey":"address:37.572200560238535:127.08630268444134","roadAddress":"서울특별시 중랑구 용마산로 210","jibunAddress":"서울 중랑구 면목동 1537","responseSize":71,"executionTimeNs":63950600,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":"arrest_rate:중랑구","guName":"중랑구","arrestRate":0.69830102,"dataFound":true,"executionTimeNs":4245401,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.572200560238535:127.08630268444134:500","categoryCount":15,"placesByCategory":{"CT1":2,"AT4":1,"CS2":15,"SC4":2,"MT1":0,"BK9":6,"HP8":5,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":10,"OL7":0,"PM9":5},"totalPlaces":94,"responseSize":10806,"executionTimeNs":96505500,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:22:33.130 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:33.130403300Z","nanoTime":33339145213400,"traceId":"112ba103","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 21:22:33.130 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 21:22:33.130 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 21:22:33.130 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 21개
2025-11-21 21:22:33.130 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 21개 (총 카메라 대수: 62대)
2025-11-21 21:22:33.130 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 21:22:33.201 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구 여의대방로 130 (거리: 662m)
2025-11-21 21:22:33.201 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 21:22:33.201 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 21:22:33.201 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 13개 카테고리
2025-11-21 21:22:33.201 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 21:22:33.201 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:33.201320400Z","nanoTime":33339216038300,"traceId":"112ba103","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":70824900,"duration_ms":70,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":21,"totalCctvAfterFilter":21,"totalCameraCount":62,"filterRate":1.0,"filterExecutionTimeNs":9901,"success":true},"policeQuery":{"queryDurationNs":70309401,"found":true,"nearestAddress":"서울특별시 동작구 여의대방로 130","nearestDistance":661.6625829769926,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":2,"AT4":1,"CS2":15,"SC4":2,"BK9":6,"HP8":5,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":10,"PM9":5},"placesAfterFilter":{"CT1":2,"AT4":1,"CS2":15,"SC4":2,"BK9":6,"HP8":5,"AC5":15,"CE7":15,"SW8":1,"PO3":2,"FD6":15,"PK6":10,"PM9":5},"totalBeforeFilter":94,"totalAfterFilter":94,"filterRate":1.0,"filterExecutionTimeNs":96200,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:22:33.201 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:33.201320400Z","nanoTime":33339216381000,"traceId":"112ba103","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 21:22:33.201 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 21:22:33.201 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 54.14, 편의성: 29.61, 종합: 41.87
2025-11-21 21:22:33.201 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:33.201320400Z","nanoTime":33339216736500,"traceId":"112ba103","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":355500,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":17.29217712787593,"policeDistance":661.6625829769926,"cctvScore":70.0,"cctvCount":21,"arrestRateScore":69.83010200000001,"arrestRate":0.69830102,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":54.13668373836278,"success":true},"convenienceScore":{"categoryScores":{"CT1":8.0,"AT4":3.0,"CS2":3.8925753018692144,"SC4":4.0,"BK9":30.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":6.0,"FD6":15.0,"PK6":30.0,"PM9":40.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":"중랑구","guPopulation":385349,"finalScore":29.607121177066862,"success":true},"overallScore":41.87190245771482,"errorMessage":null,"success":true}}
2025-11-21 21:22:33.201 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:33.201320400Z","nanoTime":33339217054900,"traceId":"112ba103","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 21:22:33.203 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 21:22:33.203 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구 여의대방로 130, latitude=37.568809, longitude=127.080134, geohashId=wydmez0)
2025-11-21 21:22:33.203 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 661.6625829769926
2025-11-21 21:22:33.203 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmezv
2025-11-21 21:22:33.203 [http-nio-8185-exec-7] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 21:22:33.203 [http-nio-8185-exec-7] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:33.203334700Z","nanoTime":33339218480700,"traceId":"112ba103","thread":"http-nio-8185-exec-7","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1425800,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["편의점이(가) 92m 내에 있습니다."],"warnings":[],"cacheWrite":{"cacheKey":"dto:wydmezv","dataSize":14030,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":14030,"errorMessage":null,"success":true}}
2025-11-21 21:22:33.203 [http-nio-8185-exec-7] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 21:22:33.892 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - === 위치 분석 요청 시작 (POST /api/location-analysis) ===
2025-11-21 21:22:33.892 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - Request DTO: LocationAnalysisRequestDTO(latitude=37.569788819953075, longitude=127.08220224177222, radius=500)
2025-11-21 21:22:33.892 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - === 위치 분석 시작 ===
2025-11-21 21:22:33.892 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - 요청 좌표: latitude=37.569788819953075, longitude=127.08220224177222, radius=500
2025-11-21 21:22:33.892 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:33.892626100Z","nanoTime":33339906576700,"traceId":"ab127fa0","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"START"}
2025-11-21 21:22:33.892 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 9-Block 그리드 범위 계산 시작
2025-11-21 21:22:33.892 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 요청 좌표: lat=37.569788819953075, lon=127.08220224177222
2025-11-21 21:22:33.892 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:33.892626100Z","nanoTime":33339906658900,"traceId":"ab127fa0","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"START"}
2025-11-21 21:22:33.892 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:33.892626100Z","nanoTime":33339906688199,"traceId":"ab127fa0","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Utility","class":"GeohashService","method":"calculate9BlockGeohashes","action":"calculate9BlockGeohashes","status":"END","duration_ns":29299,"duration_ms":0,"resultData":{"latitude":37.569788819953075,"longitude":127.08220224177222,"precision":7,"centerHash":"wydmez6","adjacentHashes":["wydmez6","wydmezd","wydmeze","wydmez7","wydmez5","wydmez4","wydmez1","wydmez3","wydmez9"],"errorMessage":null,"success":true}}
2025-11-21 21:22:33.892 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 계산된 9-Block 그리드: [wydmez6, wydmezd, wydmeze, wydmez7, wydmez5, wydmez4, wydmez1, wydmez3, wydmez9]
2025-11-21 21:22:33.892 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-01] 중심 격자 ID: wydmez6
2025-11-21 21:22:33.892 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:33.892626100Z","nanoTime":33339906769300,"traceId":"ab127fa0","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-01","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculate9BlockGrid","action":"calculate9BlockGrid","status":"END","duration_ns":192600,"duration_ms":0,"resultData":{"requestLatitude":37.569788819953075,"requestLongitude":127.08220224177222,"requestRadius":500,"centerGeohashId":"wydmez6","nineBlockGeohashes":["wydmez6","wydmezd","wydmeze","wydmez7","wydmez5","wydmez4","wydmez1","wydmez3","wydmez9"],"totalGridCount":9,"errorMessage":null,"success":true}}
2025-11-21 21:22:33.892 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:33.892626100Z","nanoTime":33339906808300,"traceId":"ab127fa0","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"START"}
2025-11-21 21:22:33.892 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 시작
2025-11-21 21:22:33.892 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 전체 DTO 캐시 조회 - Key: dto:wydmez6
2025-11-21 21:22:33.893 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-1단계] 캐시 미스. 2단계 캐시 조회 진행 (L1 조회: 0.397ms)
2025-11-21 21:22:33.893 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 시작 (9개 격자)
2025-11-21 21:22:33.894 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] 개별 격자 데이터 캐시 조회 완료
2025-11-21 21:22:33.894 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] CCTV 캐시 히트: 6개, 미스: 3개
2025-11-21 21:22:33.896 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02-2단계] L2 전체 조회 시간: 3.1716ms, 역직렬화: 0.188903ms
2025-11-21 21:22:33.896 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-02] 단계별 캐시 조회 완료
2025-11-21 21:22:33.896 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:33.896967400Z","nanoTime":33339910748299,"traceId":"ab127fa0","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-02","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performCacheLookup","action":"performCacheLookup","status":"END","duration_ns":3939999,"duration_ms":3,"resultData":{"centerGeohashId":"wydmez6","nineBlockGeohashes":["wydmez6","wydmezd","wydmeze","wydmez7","wydmez5","wydmez4","wydmez1","wydmez3","wydmez9"],"l1CacheHit":false,"l1CacheResult":{"cacheKey":"dto:wydmez6","hit":false,"valueSize":0,"l1CacheGetDurationNs":397000,"l1JsonDeserializeDurationNs":null},"l2CacheRequired":true,"l2CacheResults":[{"geohashId":"wydmez6","cacheKey":"data:wydmez6:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":199,"l2CacheGetDurationNs":423800},{"geohashId":"wydmezd","cacheKey":"data:wydmezd:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":320100},{"geohashId":"wydmeze","cacheKey":"data:wydmeze:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":215501},{"geohashId":"wydmez7","cacheKey":"data:wydmez7:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":401,"l2CacheGetDurationNs":665900},{"geohashId":"wydmez5","cacheKey":"data:wydmez5:cctv","hit":true,"dataType":"cctv","dataCount":4,"dataSize":401,"l2CacheGetDurationNs":539300},{"geohashId":"wydmez4","cacheKey":"data:wydmez4:cctv","hit":true,"dataType":"cctv","dataCount":2,"dataSize":201,"l2CacheGetDurationNs":234600},{"geohashId":"wydmez1","cacheKey":"data:wydmez1:cctv","hit":true,"dataType":"cctv","dataCount":3,"dataSize":300,"l2CacheGetDurationNs":191901},{"geohashId":"wydmez3","cacheKey":"data:wydmez3:cctv","hit":true,"dataType":"cctv","dataCount":6,"dataSize":599,"l2CacheGetDurationNs":207999},{"geohashId":"wydmez9","cacheKey":"data:wydmez9:cctv","hit":false,"dataType":"cctv","dataCount":0,"dataSize":0,"l2CacheGetDurationNs":85000}],"l2TotalHits":6,"l2TotalMisses":3,"l2CacheTotalDurationNs":3171600,"l2JsonDeserializeTotalDurationNs":188903,"errorMessage":null,"success":true}}
2025-11-21 21:22:33.896 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:33.896967400Z","nanoTime":33339910908899,"traceId":"ab127fa0","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"START"}
2025-11-21 21:22:33.896 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 선택된 데이터베이스 조회 시작
2025-11-21 21:22:33.896 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 데이터 DB 조회 시작 - 대상 격자: 3개
2025-11-21 21:22:33.899 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV DB 조회 완료 - 조회된 데이터: 10건
2025-11-21 21:22:33.900 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] 데이터베이스 조회 완료
2025-11-21 21:22:33.900 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-03] CCTV 총 격자: 9개
2025-11-21 21:22:33.900 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:33.900631400Z","nanoTime":33339914730700,"traceId":"ab127fa0","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-03","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performDatabaseQuery","action":"performDatabaseQuery","status":"END","duration_ns":3821801,"duration_ms":3,"resultData":{"inputCctvMissGrids":["wydmezd","wydmeze","wydmez9"],"cctvQueryResult":{"queryGeohashIds":["wydmezd","wydmeze","wydmez9"],"totalRowsReturned":10,"rowsPerGrid":{"wydmezd":4,"wydmeze":1,"wydmez9":5},"queryExecutionTimeNs":2811901,"errorMessage":null,"success":true},"cctvCacheWrites":[{"geohashId":"wydmezd","cacheKey":"data:wydmezd:cctv","dataCount":4,"dataSize":465,"errorMessage":null,"success":true},{"geohashId":"wydmeze","cacheKey":"data:wydmeze:cctv","dataCount":1,"dataSize":101,"errorMessage":null,"success":true},{"geohashId":"wydmez9","cacheKey":"data:wydmez9:cctv","dataCount":5,"dataSize":531,"errorMessage":null,"success":true}],"errorMessage":null,"success":true}}
2025-11-21 21:22:33.901 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:33.901099Z","nanoTime":33339914861300,"traceId":"ab127fa0","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"START"}
2025-11-21 21:22:33.901 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 시작 (순차 실행)
2025-11-21 21:22:33.901 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 API 호출 시작 - 좌표: (37.569788819953075, 127.08220224177222)
2025-11-21 21:22:33.901 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 캐시 미스 - API 호출
2025-11-21 21:22:34.007 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소 변환 결과 캐싱 완료
2025-11-21 21:22:34.007 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 조회 API 호출 시작 - 반경: 500m
2025-11-21 21:22:34.007 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 캐시 미스 - API 호출
2025-11-21 21:22:34.007 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 시작 - 좌표: (37.569788819953075, 127.08220224177222), 반경: 500m
2025-11-21 21:22:34.099 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 15개 카테고리 병렬 검색 완료
2025-11-21 21:22:34.099 [http-nio-8185-exec-8] INFO  c.w.information.util.KakaoApiService - [KakaoApiService] 검색 결과 - 총 카테고리: 15개, 총 장소: 109건
2025-11-21 21:22:34.101 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 편의시설 결과 캐싱 완료 - 총 카테고리: 15개
2025-11-21 21:22:34.101 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 검거율 조회 시작
2025-11-21 21:22:34.101 [http-nio-8185-exec-8] WARN  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 주소에서 구 추출 실패: 주소 없음
2025-11-21 21:22:34.101 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] 외부 API 호출 결과:
2025-11-21 21:22:34.101 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 주소: 성공
2025-11-21 21:22:34.101 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 편의시설: 15개 카테고리
2025-11-21 21:22:34.101 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-04] - 검거율: 0.0
2025-11-21 21:22:34.101 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:34.101174800Z","nanoTime":33340115765000,"traceId":"ab127fa0","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-04","layer":"Service","class":"LocationAnalysisServiceImpl","method":"performExternalApiCalls","action":"performExternalApiCalls","status":"END","duration_ns":200903700,"duration_ms":200,"resultData":{"latitude":37.569788819953075,"longitude":127.08220224177222,"radius":500,"totalSequentialTasks":3,"totalExecutionTimeNs":200740998,"addressApiResult":{"cached":false,"cacheKey":"address:37.569788819953075:127.08220224177222","roadAddress":"주소 없음","jibunAddress":"서울 광진구 중곡동 212-12","responseSize":60,"executionTimeNs":107270199,"errorMessage":null,"success":true},"arrestRateResult":{"cached":false,"cacheKey":null,"guName":null,"arrestRate":0.0,"dataFound":false,"executionTimeNs":34000,"errorMessage":null,"success":true},"amenityApiResult":{"cached":false,"cacheKey":"amenity:37.569788819953075:127.08220224177222:500","categoryCount":15,"placesByCategory":{"CT1":1,"AT4":1,"CS2":15,"SC4":1,"MT1":0,"BK9":9,"HP8":14,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":7,"OL7":2,"PM9":10},"totalPlaces":109,"responseSize":12479,"executionTimeNs":93436799,"errorMessage":null,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:22:34.101 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:34.101174800Z","nanoTime":33340115931200,"traceId":"ab127fa0","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"START"}
2025-11-21 21:22:34.101 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 시작
2025-11-21 21:22:34.101 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] CCTV 데이터 통합 및 반경 필터링 시작
2025-11-21 21:22:34.101 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 9개 격자에서 통합된 전체 CCTV 개수: 31개
2025-11-21 21:22:34.101 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 반경 500m 내 필터링된 CCTV: 31개 (총 카메라 대수: 40대)
2025-11-21 21:22:34.101 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 검색 시작
2025-11-21 21:22:34.174 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 가장 가까운 파출소 발견: 서울특별시 동작구 여의대방로 130 (거리: 212m)
2025-11-21 21:22:34.174 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 외부 API 데이터 통합 시작
2025-11-21 21:22:34.174 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 데이터 거리 계산 및 DTO 변환 시작
2025-11-21 21:22:34.174 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 편의시설 상세 정보 통합 완료: 14개 카테고리
2025-11-21 21:22:34.174 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-05] 데이터 통합 및 필터링 완료
2025-11-21 21:22:34.174 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:34.174051400Z","nanoTime":33340188776299,"traceId":"ab127fa0","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-05","layer":"Service","class":"LocationAnalysisServiceImpl","method":"integrateAndFilterData","action":"integrateAndFilterData","status":"END","duration_ns":72845099,"duration_ms":72,"resultData":{"requestRadius":500,"cctvFilter":{"totalCctvBeforeFilter":31,"totalCctvAfterFilter":31,"totalCameraCount":40,"filterRate":1.0,"filterExecutionTimeNs":14101,"success":true},"policeQuery":{"queryDurationNs":72293500,"found":true,"nearestAddress":"서울특별시 동작구 여의대방로 130","nearestDistance":212.36267094572398,"errorMessage":null,"success":true},"amenityFilter":{"placesBeforeFilter":{"CT1":1,"AT4":1,"CS2":15,"SC4":1,"BK9":9,"HP8":14,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":7,"OL7":2,"PM9":10},"placesAfterFilter":{"CT1":1,"AT4":1,"CS2":15,"SC4":1,"BK9":9,"HP8":14,"AC5":15,"CE7":15,"SW8":1,"PO3":3,"FD6":15,"PK6":7,"OL7":2,"PM9":10},"totalBeforeFilter":109,"totalAfterFilter":109,"filterRate":1.0,"filterExecutionTimeNs":114200,"success":true},"errorMessage":null,"success":true}}
2025-11-21 21:22:34.174 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:34.174051400Z","nanoTime":33340189136100,"traceId":"ab127fa0","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"START"}
2025-11-21 21:22:34.174 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 최종 점수 계산 시작
2025-11-21 21:22:34.174 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-06] 점수 계산 완료 - 안전: 62.04, 편의성: 31.27, 종합: 46.65
2025-11-21 21:22:34.174 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:34.174051400Z","nanoTime":33340189415800,"traceId":"ab127fa0","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-06","layer":"Service","class":"LocationAnalysisServiceImpl","method":"calculateScores","action":"calculateScores","status":"END","duration_ns":279700,"duration_ms":0,"resultData":{"safetyScore":{"policeDistanceScore":73.4546661317845,"policeDistance":212.36267094572398,"cctvScore":100.0,"cctvCount":31,"arrestRateScore":0.0,"arrestRate":0.0,"policeWeight":0.3,"cctvWeight":0.4,"arrestWeight":0.3,"finalScore":62.03639983953535,"success":true},"convenienceScore":{"categoryScores":{"CT1":4.0,"AT4":3.0,"CS2":3.75,"SC4":2.0,"BK9":45.0,"HP8":100.0,"AC5":15.0,"CE7":30.0,"SW8":100.0,"PO3":9.0,"FD6":15.0,"PK6":21.0,"OL7":10.0,"PM9":80.0},"categoryNames":{"CT1":"문화시설","AT4":"관광명소","CS2":"편의점","SC4":"학교","MT1":"대형마트","BK9":"은행","HP8":"병원","AC5":"학원","CE7":"카페","SW8":"지하철역","PO3":"공공기관","FD6":"음식점","PK6":"주차장","OL7":"주유소","PM9":"약국"},"currentGu":null,"guPopulation":400000,"finalScore":31.267857142857142,"success":true},"overallScore":46.652128491196244,"errorMessage":null,"success":true}}
2025-11-21 21:22:34.174 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:34.174051400Z","nanoTime":33340189556300,"traceId":"ab127fa0","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"START"}
2025-11-21 21:22:34.174 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 시작
2025-11-21 21:22:34.174 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] nearestPolice: PoliceOfficeGeo(address=서울특별시 동작구 여의대방로 130, latitude=37.568809, longitude=127.080134, geohashId=wydmez0)
2025-11-21 21:22:34.174 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] policeDistance: 212.36267094572398
2025-11-21 21:22:34.176 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 캐싱 완료 - Key: dto:wydmez6
2025-11-21 21:22:34.176 [http-nio-8185-exec-8] INFO  c.w.i.s.LocationAnalysisServiceImpl - [R-07] 최종 응답 생성 완료
2025-11-21 21:22:34.176 [http-nio-8185-exec-8] INFO  PERFORMANCE - {"timestamp":"2025-11-21T12:22:34.176064500Z","nanoTime":33340190690800,"traceId":"ab127fa0","thread":"http-nio-8185-exec-8","eventType":"PERFORMANCE","step":"R-07","layer":"Service","class":"LocationAnalysisServiceImpl","method":"buildFinalResponse","action":"buildFinalResponse","status":"END","duration_ns":1134500,"duration_ms":1,"resultData":{"analysisStatus":"SUCCESS","hasAddress":true,"hasSafetyScore":true,"hasConvenienceScore":true,"recommendations":["음식점이(가) 77m 내에 있습니다."],"warnings":["해당 지역의 검거율이 낮은 편입니다."],"cacheWrite":{"cacheKey":"dto:wydmez6","dataSize":15517,"ttlSeconds":300,"errorMessage":null,"success":true},"responseSizeBytes":15517,"errorMessage":null,"success":true}}
2025-11-21 21:22:34.176 [http-nio-8185-exec-8] INFO  c.w.i.c.LocationAnalysisController - 위치 분석 요청 처리 완료. Status: SUCCESS
2025-11-21 21:46:05.015 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - ========================================
2025-11-21 21:46:05.015 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - === Geohash Indexing ETL 프로세스 시작 ===
2025-11-21 21:46:05.015 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - ========================================
2025-11-21 21:46:05.015 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-01] ETL 대상 테이블: CCTV → CCTV_GEO, POLICEOFFICE → POLICEOFFICE_GEO
2025-11-21 21:46:05.015 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - --- [CCTV] ETL 처리 시작 ---
2025-11-21 21:46:05.015 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-02] CCTV_GEO 테이블 초기화 중...
2025-11-21 21:46:05.047 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - 테이블 CCTV_GEO TRUNCATE 완료
2025-11-21 21:46:05.047 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-03] CCTV 원본 데이터 추출 중...
2025-11-21 21:46:05.270 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - 추출된 CCTV 데이터: 46764건
2025-11-21 21:46:05.270 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-03 & B-04] Geohash ID 계산 및 CCTV_GEO 테이블 적재 중...
2025-11-21 21:46:11.790 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - CCTV_GEO 테이블 적재 완료: 총 46764건
2025-11-21 21:46:11.790 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-05] CCTV_GEO 테이블에 B-Tree 인덱스 생성 중...
2025-11-21 21:46:11.790 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - 인덱스 IDX_CCTV_GEO_GEOHASH가 이미 존재합니다. 생성을 건너뜁니다.
2025-11-21 21:46:11.790 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - --- [CCTV] ETL 처리 완료 (소요 시간: 6775ms) ---
2025-11-21 21:46:11.790 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - --- [POLICEOFFICE] ETL 처리 시작 ---
2025-11-21 21:46:11.790 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-02] POLICEOFFICE_GEO 테이블 초기화 중...
2025-11-21 21:46:11.806 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - 테이블 POLICEOFFICE_GEO TRUNCATE 완료
2025-11-21 21:46:11.806 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-03] POLICEOFFICE 원본 데이터 추출 중...
2025-11-21 21:46:11.806 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - 추출된 POLICEOFFICE 데이터: 1951건
2025-11-21 21:46:11.806 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-03 & B-04] Geohash ID 계산 및 POLICEOFFICE_GEO 테이블 적재 중...
2025-11-21 21:46:12.077 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - POLICEOFFICE_GEO 테이블 적재 완료: 총 1951건
2025-11-21 21:46:12.077 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-05] POLICEOFFICE_GEO 테이블에 B-Tree 인덱스 생성 중...
2025-11-21 21:46:12.077 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - 인덱스 IDX_POLICE_GEO_GEOHASH가 이미 존재합니다. 생성을 건너뜁니다.
2025-11-21 21:46:12.077 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - --- [POLICEOFFICE] ETL 처리 완료 (소요 시간: 287ms) ---
2025-11-21 21:46:12.077 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - ========================================
2025-11-21 21:46:12.077 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - === ETL 프로세스 정상 완료 ===
2025-11-21 21:46:12.077 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - 총 소요 시간: 7062ms (7.062초)
2025-11-21 21:46:12.077 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - ========================================
2025-11-21 22:21:55.224 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=29m42s886ms488µs400ns).
2025-11-21 22:45:49.986 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=23m54s762ms513µs300ns).
2025-11-21 23:38:48.362 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - ========================================
2025-11-21 23:38:48.362 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - === Geohash Indexing ETL 프로세스 시작 ===
2025-11-21 23:38:48.362 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - ========================================
2025-11-21 23:38:48.362 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-01] ETL 대상 테이블: CCTV → CCTV_GEO, POLICEOFFICE → POLICEOFFICE_GEO
2025-11-21 23:38:48.362 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - --- [CCTV] ETL 처리 시작 ---
2025-11-21 23:38:48.362 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-02] CCTV_GEO 테이블 초기화 중...
2025-11-21 23:38:48.406 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - 테이블 CCTV_GEO TRUNCATE 완료
2025-11-21 23:38:48.407 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-03] CCTV 원본 데이터 추출 중...
2025-11-21 23:38:48.685 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - 추출된 CCTV 데이터: 46764건
2025-11-21 23:38:48.685 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-03 & B-04] Geohash ID 계산 및 CCTV_GEO 테이블 적재 중...
2025-11-21 23:38:55.923 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - CCTV_GEO 테이블 적재 완료: 총 46764건
2025-11-21 23:38:55.923 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-05] CCTV_GEO 테이블에 B-Tree 인덱스 생성 중...
2025-11-21 23:38:55.923 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - 인덱스 IDX_CCTV_GEO_GEOHASH가 이미 존재합니다. 생성을 건너뜁니다.
2025-11-21 23:38:55.923 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - --- [CCTV] ETL 처리 완료 (소요 시간: 7561ms) ---
2025-11-21 23:38:55.923 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - --- [POLICEOFFICE] ETL 처리 시작 ---
2025-11-21 23:38:55.923 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-02] POLICEOFFICE_GEO 테이블 초기화 중...
2025-11-21 23:38:55.939 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - 테이블 POLICEOFFICE_GEO TRUNCATE 완료
2025-11-21 23:38:55.939 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-03] POLICEOFFICE 원본 데이터 추출 중...
2025-11-21 23:38:55.939 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - 추출된 POLICEOFFICE 데이터: 1951건
2025-11-21 23:38:55.939 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-03 & B-04] Geohash ID 계산 및 POLICEOFFICE_GEO 테이블 적재 중...
2025-11-21 23:38:56.230 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - POLICEOFFICE_GEO 테이블 적재 완료: 총 1951건
2025-11-21 23:38:56.230 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-05] POLICEOFFICE_GEO 테이블에 B-Tree 인덱스 생성 중...
2025-11-21 23:38:56.231 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - 인덱스 IDX_POLICE_GEO_GEOHASH가 이미 존재합니다. 생성을 건너뜁니다.
2025-11-21 23:38:56.231 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - --- [POLICEOFFICE] ETL 처리 완료 (소요 시간: 308ms) ---
2025-11-21 23:38:56.231 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - ========================================
2025-11-21 23:38:56.231 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - === ETL 프로세스 정상 완료 ===
2025-11-21 23:38:56.231 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - 총 소요 시간: 7869ms (7.869초)
2025-11-21 23:38:56.231 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - ========================================
2025-11-21 23:46:05.004 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - ========================================
2025-11-21 23:46:05.004 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - === Geohash Indexing ETL 프로세스 시작 ===
2025-11-21 23:46:05.004 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - ========================================
2025-11-21 23:46:05.004 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-01] ETL 대상 테이블: CCTV → CCTV_GEO, POLICEOFFICE → POLICEOFFICE_GEO
2025-11-21 23:46:05.004 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - --- [CCTV] ETL 처리 시작 ---
2025-11-21 23:46:05.004 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-02] CCTV_GEO 테이블 초기화 중...
2025-11-21 23:46:05.027 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - 테이블 CCTV_GEO TRUNCATE 완료
2025-11-21 23:46:05.027 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-03] CCTV 원본 데이터 추출 중...
2025-11-21 23:46:05.265 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - 추출된 CCTV 데이터: 46764건
2025-11-21 23:46:05.265 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-03 & B-04] Geohash ID 계산 및 CCTV_GEO 테이블 적재 중...
2025-11-21 23:46:11.981 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - CCTV_GEO 테이블 적재 완료: 총 46764건
2025-11-21 23:46:11.981 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-05] CCTV_GEO 테이블에 B-Tree 인덱스 생성 중...
2025-11-21 23:46:11.981 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - 인덱스 IDX_CCTV_GEO_GEOHASH가 이미 존재합니다. 생성을 건너뜁니다.
2025-11-21 23:46:11.981 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - --- [CCTV] ETL 처리 완료 (소요 시간: 6977ms) ---
2025-11-21 23:46:11.981 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - --- [POLICEOFFICE] ETL 처리 시작 ---
2025-11-21 23:46:11.981 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-02] POLICEOFFICE_GEO 테이블 초기화 중...
2025-11-21 23:46:11.986 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - 테이블 POLICEOFFICE_GEO TRUNCATE 완료
2025-11-21 23:46:11.986 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-03] POLICEOFFICE 원본 데이터 추출 중...
2025-11-21 23:46:11.996 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - 추출된 POLICEOFFICE 데이터: 1951건
2025-11-21 23:46:11.996 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-03 & B-04] Geohash ID 계산 및 POLICEOFFICE_GEO 테이블 적재 중...
2025-11-21 23:46:12.266 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - POLICEOFFICE_GEO 테이블 적재 완료: 총 1951건
2025-11-21 23:46:12.266 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - [B-05] POLICEOFFICE_GEO 테이블에 B-Tree 인덱스 생성 중...
2025-11-21 23:46:12.266 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - 인덱스 IDX_POLICE_GEO_GEOHASH가 이미 존재합니다. 생성을 건너뜁니다.
2025-11-21 23:46:12.266 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - --- [POLICEOFFICE] ETL 처리 완료 (소요 시간: 285ms) ---
2025-11-21 23:46:12.266 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - ========================================
2025-11-21 23:46:12.266 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - === ETL 프로세스 정상 완료 ===
2025-11-21 23:46:12.266 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - 총 소요 시간: 7262ms (7.262초)
2025-11-21 23:46:12.266 [scheduling-1] INFO  c.w.i.b.p.GeohashIndexingEtlProcessor - ========================================
